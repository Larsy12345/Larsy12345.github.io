function addScript(t, e, i) {
        var s = document.createElement("script");
        s.setAttribute("src", t + "?v=" + e), "function" == typeof i && (s.onload = i), document.body.appendChild(s)
    }! function(t) {
        if ("object" == typeof exports) module.exports = t();
        else {
            var e;
            "undefined" != typeof window ? e = window : "undefined" != typeof global ? e = global : "undefined" != typeof self && (e = self), e.p2 = t()
        }
    }(function() {
        return function t(e, i, s) {
            function n(o, r) {
                if (!i[o]) {
                    if (!e[o]) {
                        var h = "function" == typeof require && require;
                        if (!r && h) return h(o, !0);
                        if (a) return a(o, !0);
                        throw new Error("Cannot find module '" + o + "'")
                    }
                    var l = i[o] = {
                        exports: {}
                    };
                    e[o][0].call(l.exports, function(t) {
                        var i = e[o][1][t];
                        return n(i || t)
                    }, l, l.exports, t, e, i, s)
                }
                return i[o].exports
            }
            for (var a = "function" == typeof require && require, o = 0; o < s.length; o++) n(s[o]);
            return n
        }({
            1: [
                function(t, e, i) {
                    function s() {}
                    var n = t("./Scalar");
                    e.exports = s, s.lineInt = function(t, e, i) {
                        i = i || 0;
                        var s, a, o, r, h, l, c, u = [0, 0];
                        return s = t[1][1] - t[0][1], a = t[0][0] - t[1][0], o = s * t[0][0] + a * t[0][1], r = e[1][1] - e[0][1], h = e[0][0] - e[1][0], l = r * e[0][0] + h * e[0][1], c = s * h - r * a, n.eq(c, 0, i) || (u[0] = (h * o - a * l) / c, u[1] = (s * l - r * o) / c), u
                    }, s.segmentsIntersect = function(t, e, i, s) {
                        var n = e[0] - t[0],
                            a = e[1] - t[1],
                            o = s[0] - i[0],
                            r = s[1] - i[1];
                        if (o * a - r * n == 0) return !1;
                        var h = (n * (i[1] - t[1]) + a * (t[0] - i[0])) / (o * a - r * n),
                            l = (o * (t[1] - i[1]) + r * (i[0] - t[0])) / (r * n - o * a);
                        return h >= 0 && h <= 1 && l >= 0 && l <= 1
                    }
                }, {
                    "./Scalar": 4
                }
            ],
            2: [
                function(t, e, i) {
                    function s() {}
                    e.exports = s, s.area = function(t, e, i) {
                        return (e[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (e[1] - t[1])
                    }, s.left = function(t, e, i) {
                        return s.area(t, e, i) > 0
                    }, s.leftOn = function(t, e, i) {
                        return s.area(t, e, i) >= 0
                    }, s.right = function(t, e, i) {
                        return s.area(t, e, i) < 0
                    }, s.rightOn = function(t, e, i) {
                        return s.area(t, e, i) <= 0
                    };
                    var n = [],
                        a = [];
                    s.collinear = function(t, e, i, o) {
                        if (o) {
                            var r = n,
                                h = a;
                            r[0] = e[0] - t[0], r[1] = e[1] - t[1], h[0] = i[0] - e[0], h[1] = i[1] - e[1];
                            var l = r[0] * h[0] + r[1] * h[1],
                                c = Math.sqrt(r[0] * r[0] + r[1] * r[1]),
                                u = Math.sqrt(h[0] * h[0] + h[1] * h[1]);
                            return Math.acos(l / (c * u)) < o
                        }
                        return 0 == s.area(t, e, i)
                    }, s.sqdist = function(t, e) {
                        var i = e[0] - t[0],
                            s = e[1] - t[1];
                        return i * i + s * s
                    }
                }, {}
            ],
            3: [
                function(t, e, i) {
                    function s() {
                        this.vertices = []
                    }

                    function n(t, e, i, s, n) {
                        n = n || 0;
                        var a = e[1] - t[1],
                            o = t[0] - e[0],
                            h = a * t[0] + o * t[1],
                            l = s[1] - i[1],
                            c = i[0] - s[0],
                            u = l * i[0] + c * i[1],
                            d = a * c - l * o;
                        return r.eq(d, 0, n) ? [0, 0] : [(c * h - o * u) / d, (a * u - l * h) / d]
                    }
                    var a = t("./Line"),
                        o = t("./Point"),
                        r = t("./Scalar");
                    e.exports = s, s.prototype.at = function(t) {
                        var e = this.vertices,
                            i = e.length;
                        return e[t < 0 ? t % i + i : t % i]
                    }, s.prototype.first = function() {
                        return this.vertices[0]
                    }, s.prototype.last = function() {
                        return this.vertices[this.vertices.length - 1]
                    }, s.prototype.clear = function() {
                        this.vertices.length = 0
                    }, s.prototype.append = function(t, e, i) {
                        if (void 0 === e) throw new Error("From is not given!");
                        if (void 0 === i) throw new Error("To is not given!");
                        if (i - 1 < e) throw new Error("lol1");
                        if (i > t.vertices.length) throw new Error("lol2");
                        if (e < 0) throw new Error("lol3");
                        for (var s = e; s < i; s++) this.vertices.push(t.vertices[s])
                    }, s.prototype.makeCCW = function() {
                        for (var t = 0, e = this.vertices, i = 1; i < this.vertices.length; ++i)(e[i][1] < e[t][1] || e[i][1] == e[t][1] && e[i][0] > e[t][0]) && (t = i);
                        o.left(this.at(t - 1), this.at(t), this.at(t + 1)) || this.reverse()
                    }, s.prototype.reverse = function() {
                        for (var t = [], e = 0, i = this.vertices.length; e !== i; e++) t.push(this.vertices.pop());
                        this.vertices = t
                    }, s.prototype.isReflex = function(t) {
                        return o.right(this.at(t - 1), this.at(t), this.at(t + 1))
                    };
                    var h = [],
                        l = [];
                    s.prototype.canSee = function(t, e) {
                        var i, s, n = h,
                            r = l;
                        if (o.leftOn(this.at(t + 1), this.at(t), this.at(e)) && o.rightOn(this.at(t - 1), this.at(t), this.at(e))) return !1;
                        s = o.sqdist(this.at(t), this.at(e));
                        for (var c = 0; c !== this.vertices.length; ++c)
                            if ((c + 1) % this.vertices.length !== t && c !== t && o.leftOn(this.at(t), this.at(e), this.at(c + 1)) && o.rightOn(this.at(t), this.at(e), this.at(c)) && (n[0] = this.at(t), n[1] = this.at(e), r[0] = this.at(c), r[1] = this.at(c + 1), i = a.lineInt(n, r), o.sqdist(this.at(t), i) < s)) return !1;
                        return !0
                    }, s.prototype.copy = function(t, e, i) {
                        var n = i || new s;
                        if (n.clear(), t < e)
                            for (a = t; a <= e; a++) n.vertices.push(this.vertices[a]);
                        else {
                            for (a = 0; a <= e; a++) n.vertices.push(this.vertices[a]);
                            for (var a = t; a < this.vertices.length; a++) n.vertices.push(this.vertices[a])
                        }
                        return n
                    }, s.prototype.getCutEdges = function() {
                        for (var t = [], e = [], i = [], n = new s, a = Number.MAX_VALUE, o = 0; o < this.vertices.length; ++o)
                            if (this.isReflex(o))
                                for (var r = 0; r < this.vertices.length; ++r)
                                    if (this.canSee(o, r)) {
                                        e = this.copy(o, r, n).getCutEdges(), i = this.copy(r, o, n).getCutEdges();
                                        for (var h = 0; h < i.length; h++) e.push(i[h]);
                                        e.length < a && (t = e, a = e.length, t.push([this.at(o), this.at(r)]))
                                    }
                        return t
                    }, s.prototype.decomp = function() {
                        var t = this.getCutEdges();
                        return t.length > 0 ? this.slice(t) : [this]
                    }, s.prototype.slice = function(t) {
                        if (0 == t.length) return [this];
                        if (t instanceof Array && t.length && t[0] instanceof Array && 2 == t[0].length && t[0][0] instanceof Array) {
                            for (var e = [this], i = 0; i < t.length; i++)
                                for (var s = t[i], n = 0; n < e.length; n++) {
                                    var a = e[n].slice(s);
                                    if (a) {
                                        e.splice(n, 1), e.push(a[0], a[1]);
                                        break
                                    }
                                }
                            return e
                        }
                        var s = t,
                            i = this.vertices.indexOf(s[0]),
                            n = this.vertices.indexOf(s[1]);
                        return -1 != i && -1 != n && [this.copy(i, n), this.copy(n, i)]
                    }, s.prototype.isSimple = function() {
                        for (var t = this.vertices, e = 0; e < t.length - 1; e++)
                            for (var i = 0; i < e - 1; i++)
                                if (a.segmentsIntersect(t[e], t[e + 1], t[i], t[i + 1])) return !1;
                        for (e = 1; e < t.length - 2; e++)
                            if (a.segmentsIntersect(t[0], t[t.length - 1], t[e], t[e + 1])) return !1;
                        return !0
                    }, s.prototype.quickDecomp = function(t, e, i, a, r, h) {
                        r = r || 100, h = h || 0, a = a || 25, t = void 0 !== t ? t : [], e = e || [], i = i || [];
                        var l = [0, 0],
                            c = [0, 0],
                            u = [0, 0],
                            d = 0,
                            p = 0,
                            m = 0,
                            g = 0,
                            f = 0,
                            _ = 0,
                            y = 0,
                            v = new s,
                            b = new s,
                            S = this,
                            T = this.vertices;
                        if (T.length < 3) return t;
                        if (++h > r) return t;
                        for (var E = 0; E < this.vertices.length; ++E)
                            if (S.isReflex(E)) {
                                e.push(S.vertices[E]), d = p = Number.MAX_VALUE;
                                for (P = 0; P < this.vertices.length; ++P) o.left(S.at(E - 1), S.at(E), S.at(P)) && o.rightOn(S.at(E - 1), S.at(E), S.at(P - 1)) && (u = n(S.at(E - 1), S.at(E), S.at(P), S.at(P - 1)), o.right(S.at(E + 1), S.at(E), u) && (m = o.sqdist(S.vertices[E], u)) < p && (p = m, c = u, _ = P)), o.left(S.at(E + 1), S.at(E), S.at(P + 1)) && o.rightOn(S.at(E + 1), S.at(E), S.at(P)) && (u = n(S.at(E + 1), S.at(E), S.at(P), S.at(P + 1)), o.left(S.at(E - 1), S.at(E), u) && (m = o.sqdist(S.vertices[E], u)) < d && (d = m, l = u, f = P));
                                if (_ == (f + 1) % this.vertices.length) u[0] = (c[0] + l[0]) / 2, u[1] = (c[1] + l[1]) / 2, i.push(u), E < f ? (v.append(S, E, f + 1), v.vertices.push(u), b.vertices.push(u), 0 != _ && b.append(S, _, S.vertices.length), b.append(S, 0, E + 1)) : (0 != E && v.append(S, E, S.vertices.length), v.append(S, 0, f + 1), v.vertices.push(u), b.vertices.push(u), b.append(S, _, E + 1));
                                else {
                                    if (_ > f && (f += this.vertices.length), g = Number.MAX_VALUE, f < _) return t;
                                    for (var P = _; P <= f; ++P) o.leftOn(S.at(E - 1), S.at(E), S.at(P)) && o.rightOn(S.at(E + 1), S.at(E), S.at(P)) && (m = o.sqdist(S.at(E), S.at(P))) < g && (g = m, y = P % this.vertices.length);
                                    E < y ? (v.append(S, E, y + 1), 0 != y && b.append(S, y, T.length), b.append(S, 0, E + 1)) : (0 != E && v.append(S, E, T.length), v.append(S, 0, y + 1), b.append(S, y, E + 1))
                                }
                                return v.vertices.length < b.vertices.length ? (v.quickDecomp(t, e, i, a, r, h), b.quickDecomp(t, e, i, a, r, h)) : (b.quickDecomp(t, e, i, a, r, h), v.quickDecomp(t, e, i, a, r, h)), t
                            }
                        return t.push(this), t
                    }, s.prototype.removeCollinearPoints = function(t) {
                        for (var e = 0, i = this.vertices.length - 1; this.vertices.length > 3 && i >= 0; --i) o.collinear(this.at(i - 1), this.at(i), this.at(i + 1), t) && (this.vertices.splice(i % this.vertices.length, 1), i--, e++);
                        return e
                    }
                }, {
                    "./Line": 1,
                    "./Point": 2,
                    "./Scalar": 4
                }
            ],
            4: [
                function(t, e, i) {
                    function s() {}
                    e.exports = s, s.eq = function(t, e, i) {
                        return i = i || 0, Math.abs(t - e) < i
                    }
                }, {}
            ],
            5: [
                function(t, e, i) {
                    e.exports = {
                        Polygon: t("./Polygon"),
                        Point: t("./Point")
                    }
                }, {
                    "./Point": 2,
                    "./Polygon": 3
                }
            ],
            6: [
                function(t, e, i) {
                    e.exports = {
                        name: "p2",
                        version: "0.7.0",
                        description: "A JavaScript 2D physics engine.",
                        author: "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",
                        keywords: ["p2.js", "p2", "physics", "engine", "2d"],
                        main: "./src/p2.js",
                        engines: {
                            node: "*"
                        },
                        repository: {
                            type: "git",
                            url: "https://github.com/schteppe/p2.js.git"
                        },
                        bugs: {
                            url: "https://github.com/schteppe/p2.js/issues"
                        },
                        licenses: [{
                            type: "MIT"
                        }],
                        devDependencies: {
                            grunt: "^0.4.5",
                            "grunt-contrib-jshint": "^0.11.2",
                            "grunt-contrib-nodeunit": "^0.4.1",
                            "grunt-contrib-uglify": "~0.4.0",
                            "grunt-contrib-watch": "~0.5.0",
                            "grunt-browserify": "~2.0.1",
                            "grunt-contrib-concat": "^0.4.0"
                        },
                        dependencies: {
                            "poly-decomp": "0.1.0"
                        }
                    }
                }, {}
            ],
            7: [
                function(t, e, i) {
                    function s(t) {
                        this.lowerBound = n.create(), t && t.lowerBound && n.copy(this.lowerBound, t.lowerBound), this.upperBound = n.create(), t && t.upperBound && n.copy(this.upperBound, t.upperBound)
                    }
                    var n = t("../math/vec2");
                    t("../utils/Utils");
                    e.exports = s;
                    var a = n.create();
                    s.prototype.setFromPoints = function(t, e, i, s) {
                        var o = this.lowerBound,
                            r = this.upperBound;
                        "number" != typeof i && (i = 0), 0 !== i ? n.rotate(o, t[0], i) : n.copy(o, t[0]), n.copy(r, o);
                        for (var h = Math.cos(i), l = Math.sin(i), c = 1; c < t.length; c++) {
                            var u = t[c];
                            if (0 !== i) {
                                var d = u[0],
                                    p = u[1];
                                a[0] = h * d - l * p, a[1] = l * d + h * p, u = a
                            }
                            for (var m = 0; m < 2; m++) u[m] > r[m] && (r[m] = u[m]), u[m] < o[m] && (o[m] = u[m])
                        }
                        e && (n.add(this.lowerBound, this.lowerBound, e), n.add(this.upperBound, this.upperBound, e)), s && (this.lowerBound[0] -= s, this.lowerBound[1] -= s, this.upperBound[0] += s, this.upperBound[1] += s)
                    }, s.prototype.copy = function(t) {
                        n.copy(this.lowerBound, t.lowerBound), n.copy(this.upperBound, t.upperBound)
                    }, s.prototype.extend = function(t) {
                        for (var e = 2; e--;) {
                            var i = t.lowerBound[e];
                            this.lowerBound[e] > i && (this.lowerBound[e] = i);
                            var s = t.upperBound[e];
                            this.upperBound[e] < s && (this.upperBound[e] = s)
                        }
                    }, s.prototype.overlaps = function(t) {
                        var e = this.lowerBound,
                            i = this.upperBound,
                            s = t.lowerBound,
                            n = t.upperBound;
                        return (s[0] <= i[0] && i[0] <= n[0] || e[0] <= n[0] && n[0] <= i[0]) && (s[1] <= i[1] && i[1] <= n[1] || e[1] <= n[1] && n[1] <= i[1])
                    }, s.prototype.containsPoint = function(t) {
                        var e = this.lowerBound,
                            i = this.upperBound;
                        return e[0] <= t[0] && t[0] <= i[0] && e[1] <= t[1] && t[1] <= i[1]
                    }, s.prototype.overlapsRay = function(t) {
                        var e = 1 / t.direction[0],
                            i = 1 / t.direction[1],
                            s = (this.lowerBound[0] - t.from[0]) * e,
                            n = (this.upperBound[0] - t.from[0]) * e,
                            a = (this.lowerBound[1] - t.from[1]) * i,
                            o = (this.upperBound[1] - t.from[1]) * i,
                            r = Math.max(Math.max(Math.min(s, n), Math.min(a, o))),
                            h = Math.min(Math.min(Math.max(s, n), Math.max(a, o)));
                        return h < 0 ? -1 : r > h ? -1 : r
                    }
                }, {
                    "../math/vec2": 30,
                    "../utils/Utils": 57
                }
            ],
            8: [
                function(t, e, i) {
                    function s(t) {
                        this.type = t, this.result = [], this.world = null, this.boundingVolumeType = s.AABB
                    }
                    var n = t("../math/vec2"),
                        a = t("../objects/Body");
                    e.exports = s, s.AABB = 1, s.BOUNDING_CIRCLE = 2, s.prototype.setWorld = function(t) {
                        this.world = t
                    }, s.prototype.getCollisionPairs = function(t) {};
                    var o = n.create();
                    s.boundingRadiusCheck = function(t, e) {
                        n.sub(o, t.position, e.position);
                        var i = n.squaredLength(o),
                            s = t.boundingRadius + e.boundingRadius;
                        return i <= s * s
                    }, s.aabbCheck = function(t, e) {
                        return t.getAABB().overlaps(e.getAABB())
                    }, s.prototype.boundingVolumeCheck = function(t, e) {
                        var i;
                        switch (this.boundingVolumeType) {
                            case s.BOUNDING_CIRCLE:
                                i = s.boundingRadiusCheck(t, e);
                                break;
                            case s.AABB:
                                i = s.aabbCheck(t, e);
                                break;
                            default:
                                throw new Error("Bounding volume type not recognized: " + this.boundingVolumeType)
                        }
                        return i
                    }, s.canCollide = function(t, e) {
                        var i = a.KINEMATIC,
                            s = a.STATIC;
                        return (t.type !== s || e.type !== s) && (!(t.type === i && e.type === s || t.type === s && e.type === i) && ((t.type !== i || e.type !== i) && ((t.sleepState !== a.SLEEPING || e.sleepState !== a.SLEEPING) && !(t.sleepState === a.SLEEPING && e.type === s || e.sleepState === a.SLEEPING && t.type === s))))
                    }, s.NAIVE = 1, s.SAP = 2
                }, {
                    "../math/vec2": 30,
                    "../objects/Body": 31
                }
            ],
            9: [
                function(t, e, i) {
                    function s() {
                        n.call(this, n.NAIVE)
                    }
                    t("../shapes/Circle"), t("../shapes/Plane"), t("../shapes/Shape"), t("../shapes/Particle");
                    var n = t("../collision/Broadphase");
                    t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.getCollisionPairs = function(t) {
                        var e = t.bodies,
                            i = this.result;
                        i.length = 0;
                        for (var s = 0, a = e.length; s !== a; s++)
                            for (var o = e[s], r = 0; r < s; r++) {
                                var h = e[r];
                                n.canCollide(o, h) && this.boundingVolumeCheck(o, h) && i.push(o, h)
                            }
                        return i
                    }, s.prototype.aabbQuery = function(t, e, i) {
                        i = i || [];
                        for (var s = t.bodies, n = 0; n < s.length; n++) {
                            var a = s[n];
                            a.aabbNeedsUpdate && a.updateAABB(), a.aabb.overlaps(e) && i.push(a)
                        }
                        return i
                    }
                }, {
                    "../collision/Broadphase": 8,
                    "../math/vec2": 30,
                    "../shapes/Circle": 39,
                    "../shapes/Particle": 43,
                    "../shapes/Plane": 44,
                    "../shapes/Shape": 45
                }
            ],
            10: [
                function(t, e, i) {
                    function s() {
                        this.contactEquations = [], this.frictionEquations = [], this.enableFriction = !0, this.enabledEquations = !0, this.slipForce = 10, this.frictionCoefficient = .3, this.surfaceVelocity = 0, this.contactEquationPool = new c({
                            size: 32
                        }), this.frictionEquationPool = new u({
                            size: 64
                        }), this.restitution = 0, this.stiffness = p.DEFAULT_STIFFNESS, this.relaxation = p.DEFAULT_RELAXATION, this.frictionStiffness = p.DEFAULT_STIFFNESS, this.frictionRelaxation = p.DEFAULT_RELAXATION, this.enableFrictionReduction = !0, this.collidingBodiesLastStep = new d, this.contactSkinSize = .01
                    }

                    function n(t, e) {
                        o.set(t.vertices[0], .5 * -e.length, -e.radius), o.set(t.vertices[1], .5 * e.length, -e.radius), o.set(t.vertices[2], .5 * e.length, e.radius), o.set(t.vertices[3], .5 * -e.length, e.radius)
                    }

                    function a(t, e, i, s) {
                        for (var n = X, a = z, l = K, c = V, u = t, d = e.vertices, p = null, m = 0; m !== d.length + 1; m++) {
                            var g = d[m % d.length],
                                f = d[(m + 1) % d.length];
                            o.rotate(n, g, s), o.rotate(a, f, s), h(n, n, i), h(a, a, i), r(l, n, u), r(c, a, u);
                            var _ = o.crossLength(l, c);
                            if (null === p && (p = _), _ * p <= 0) return !1;
                            p = _
                        }
                        return !0
                    }
                    var o = t("../math/vec2"),
                        r = o.sub,
                        h = o.add,
                        l = o.dot,
                        c = (t("../utils/Utils"), t("../utils/ContactEquationPool")),
                        u = t("../utils/FrictionEquationPool"),
                        d = t("../utils/TupleDictionary"),
                        p = t("../equations/Equation"),
                        m = (t("../equations/ContactEquation"), t("../equations/FrictionEquation"), t("../shapes/Circle")),
                        g = t("../shapes/Convex"),
                        f = t("../shapes/Shape"),
                        _ = (t("../objects/Body"), t("../shapes/Box"));
                    e.exports = s;
                    var y = o.fromValues(0, 1),
                        v = o.fromValues(0, 0),
                        b = o.fromValues(0, 0),
                        S = o.fromValues(0, 0),
                        T = o.fromValues(0, 0),
                        E = o.fromValues(0, 0),
                        P = o.fromValues(0, 0),
                        A = o.fromValues(0, 0),
                        I = o.fromValues(0, 0),
                        C = o.fromValues(0, 0),
                        x = o.fromValues(0, 0),
                        w = o.fromValues(0, 0),
                        M = o.fromValues(0, 0),
                        O = o.fromValues(0, 0),
                        L = o.fromValues(0, 0),
                        N = o.fromValues(0, 0),
                        k = o.fromValues(0, 0),
                        R = o.fromValues(0, 0),
                        D = o.fromValues(0, 0),
                        G = [],
                        B = o.create(),
                        F = o.create();
                    s.prototype.bodiesOverlap = function(t, e) {
                        for (var i = B, s = F, n = 0, a = t.shapes.length; n !== a; n++) {
                            var o = t.shapes[n];
                            t.toWorldFrame(i, o.position);
                            for (var r = 0, h = e.shapes.length; r !== h; r++) {
                                var l = e.shapes[r];
                                if (e.toWorldFrame(s, l.position), this[o.type | l.type](t, o, i, o.angle + t.angle, e, l, s, l.angle + e.angle, !0)) return !0
                            }
                        }
                        return !1
                    }, s.prototype.collidedLastStep = function(t, e) {
                        var i = 0 | t.id,
                            s = 0 | e.id;
                        return !!this.collidingBodiesLastStep.get(i, s)
                    }, s.prototype.reset = function() {
                        this.collidingBodiesLastStep.reset();
                        for (var t = this.contactEquations, e = t.length; e--;) {
                            var i = t[e],
                                s = i.bodyA.id,
                                n = i.bodyB.id;
                            this.collidingBodiesLastStep.set(s, n, !0)
                        }
                        for (var a = this.contactEquations, o = this.frictionEquations, r = 0; r < a.length; r++) this.contactEquationPool.release(a[r]);
                        for (r = 0; r < o.length; r++) this.frictionEquationPool.release(o[r]);
                        this.contactEquations.length = this.frictionEquations.length = 0
                    }, s.prototype.createContactEquation = function(t, e, i, s) {
                        var n = this.contactEquationPool.get();
                        return n.bodyA = t, n.bodyB = e, n.shapeA = i, n.shapeB = s, n.restitution = this.restitution, n.firstImpact = !this.collidedLastStep(t, e), n.stiffness = this.stiffness, n.relaxation = this.relaxation, n.needsUpdate = !0, n.enabled = this.enabledEquations, n.offset = this.contactSkinSize, n
                    }, s.prototype.createFrictionEquation = function(t, e, i, s) {
                        var n = this.frictionEquationPool.get();
                        return n.bodyA = t, n.bodyB = e, n.shapeA = i, n.shapeB = s, n.setSlipForce(this.slipForce), n.frictionCoefficient = this.frictionCoefficient, n.relativeVelocity = this.surfaceVelocity, n.enabled = this.enabledEquations, n.needsUpdate = !0, n.stiffness = this.frictionStiffness, n.relaxation = this.frictionRelaxation, n.contactEquations.length = 0, n
                    }, s.prototype.createFrictionFromContact = function(t) {
                        var e = this.createFrictionEquation(t.bodyA, t.bodyB, t.shapeA, t.shapeB);
                        return o.copy(e.contactPointA, t.contactPointA), o.copy(e.contactPointB, t.contactPointB), o.rotate90cw(e.t, t.normalA), e.contactEquations.push(t), e
                    }, s.prototype.createFrictionFromAverage = function(t) {
                        var e = this.contactEquations[this.contactEquations.length - 1],
                            i = this.createFrictionEquation(e.bodyA, e.bodyB, e.shapeA, e.shapeB),
                            s = e.bodyA;
                        e.bodyB;
                        o.set(i.contactPointA, 0, 0), o.set(i.contactPointB, 0, 0), o.set(i.t, 0, 0);
                        for (var n = 0; n !== t; n++)(e = this.contactEquations[this.contactEquations.length - 1 - n]).bodyA === s ? (o.add(i.t, i.t, e.normalA), o.add(i.contactPointA, i.contactPointA, e.contactPointA), o.add(i.contactPointB, i.contactPointB, e.contactPointB)) : (o.sub(i.t, i.t, e.normalA), o.add(i.contactPointA, i.contactPointA, e.contactPointB), o.add(i.contactPointB, i.contactPointB, e.contactPointA)), i.contactEquations.push(e);
                        var a = 1 / t;
                        return o.scale(i.contactPointA, i.contactPointA, a), o.scale(i.contactPointB, i.contactPointB, a), o.normalize(i.t, i.t), o.rotate90cw(i.t, i.t), i
                    }, s.prototype[f.LINE | f.CONVEX] = s.prototype.convexLine = function(t, e, i, s, n, a, o, r, h) {
                        return !h && 0
                    }, s.prototype[f.LINE | f.BOX] = s.prototype.lineBox = function(t, e, i, s, n, a, o, r, h) {
                        return !h && 0
                    };
                    var U = new _({
                            width: 1,
                            height: 1
                        }),
                        H = o.create();
                    s.prototype[f.CAPSULE | f.CONVEX] = s.prototype[f.CAPSULE | f.BOX] = s.prototype.convexCapsule = function(t, e, i, s, a, r, h, l, c) {
                        var u = H;
                        o.set(u, r.length / 2, 0), o.rotate(u, u, l), o.add(u, u, h);
                        var d = this.circleConvex(a, r, u, l, t, e, i, s, c, r.radius);
                        o.set(u, -r.length / 2, 0), o.rotate(u, u, l), o.add(u, u, h);
                        var p = this.circleConvex(a, r, u, l, t, e, i, s, c, r.radius);
                        if (c && (d || p)) return !0;
                        var m = U;
                        return n(m, r), this.convexConvex(t, e, i, s, a, m, h, l, c) + d + p
                    }, s.prototype[f.CAPSULE | f.LINE] = s.prototype.lineCapsule = function(t, e, i, s, n, a, o, r, h) {
                        return !h && 0
                    };
                    var Y = o.create(),
                        W = o.create(),
                        j = new _({
                            width: 1,
                            height: 1
                        });
                    s.prototype[f.CAPSULE | f.CAPSULE] = s.prototype.capsuleCapsule = function(t, e, i, s, a, r, h, l, c) {
                        for (var u = Y, d = W, p = 0, m = 0; m < 2; m++) {
                            o.set(u, (0 === m ? -1 : 1) * e.length / 2, 0), o.rotate(u, u, s), o.add(u, u, i);
                            for (var g = 0; g < 2; g++) {
                                o.set(d, (0 === g ? -1 : 1) * r.length / 2, 0), o.rotate(d, d, l), o.add(d, d, h), this.enableFrictionReduction && (v = this.enableFriction, this.enableFriction = !1);
                                var f = this.circleCircle(t, e, u, s, a, r, d, l, c, e.radius, r.radius);
                                if (this.enableFrictionReduction && (this.enableFriction = v), c && f) return !0;
                                p += f
                            }
                        }
                        this.enableFrictionReduction && (v = this.enableFriction, this.enableFriction = !1);
                        var _ = j;
                        n(_, e);
                        var y = this.convexCapsule(t, _, i, s, a, r, h, l, c);
                        if (this.enableFrictionReduction && (this.enableFriction = v), c && y) return !0;
                        if (p += y, this.enableFrictionReduction) {
                            var v = this.enableFriction;
                            this.enableFriction = !1
                        }
                        n(_, r);
                        var b = this.convexCapsule(a, _, h, l, t, e, i, s, c);
                        return this.enableFrictionReduction && (this.enableFriction = v), !(!c || !b) || (p += b, this.enableFrictionReduction && p && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(p)), p)
                    }, s.prototype[f.LINE | f.LINE] = s.prototype.lineLine = function(t, e, i, s, n, a, o, r, h) {
                        return !h && 0
                    }, s.prototype[f.PLANE | f.LINE] = s.prototype.planeLine = function(t, e, i, s, n, a, c, u, d) {
                        var p = v,
                            m = b,
                            g = S,
                            f = T,
                            _ = E,
                            x = P,
                            w = A,
                            M = I,
                            O = C,
                            L = G,
                            N = 0;
                        o.set(p, -a.length / 2, 0), o.set(m, a.length / 2, 0), o.rotate(g, p, u), o.rotate(f, m, u), h(g, g, c), h(f, f, c), o.copy(p, g), o.copy(m, f), r(_, m, p), o.normalize(x, _), o.rotate90cw(O, x), o.rotate(M, y, s), L[0] = p, L[1] = m;
                        for (var k = 0; k < L.length; k++) {
                            var R = L[k];
                            r(w, R, i);
                            var D = l(w, M);
                            if (D < 0) {
                                if (d) return !0;
                                var B = this.createContactEquation(t, n, e, a);
                                N++, o.copy(B.normalA, M), o.normalize(B.normalA, B.normalA), o.scale(w, M, D), r(B.contactPointA, R, w), r(B.contactPointA, B.contactPointA, t.position), r(B.contactPointB, R, c), h(B.contactPointB, B.contactPointB, c), r(B.contactPointB, B.contactPointB, n.position), this.contactEquations.push(B), this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(B))
                            }
                        }
                        return !d && (this.enableFrictionReduction || N && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(N)), N)
                    }, s.prototype[f.PARTICLE | f.CAPSULE] = s.prototype.particleCapsule = function(t, e, i, s, n, a, o, r, h) {
                        return this.circleLine(t, e, i, s, n, a, o, r, h, a.radius, 0)
                    }, s.prototype[f.CIRCLE | f.LINE] = s.prototype.circleLine = function(t, e, i, s, n, a, c, u, d, p, m) {
                        var p = p || 0,
                            m = void 0 !== m ? m : e.radius,
                            g = v,
                            f = b,
                            _ = S,
                            y = T,
                            N = E,
                            k = P,
                            R = A,
                            D = I,
                            B = C,
                            F = x,
                            U = w,
                            H = M,
                            Y = O,
                            W = L,
                            j = G;
                        o.set(D, -a.length / 2, 0), o.set(B, a.length / 2, 0), o.rotate(F, D, u), o.rotate(U, B, u), h(F, F, c), h(U, U, c), o.copy(D, F), o.copy(B, U), r(k, B, D), o.normalize(R, k), o.rotate90cw(N, R), r(H, i, D);
                        var X = l(H, N);
                        r(y, D, c), r(Y, i, c);
                        var z = m + p;
                        if (Math.abs(X) < z) {
                            o.scale(g, N, X), r(_, i, g), o.scale(f, N, l(N, Y)), o.normalize(f, f), o.scale(f, f, p), h(_, _, f);
                            var K = l(R, _),
                                V = l(R, D),
                                q = l(R, B);
                            if (K > V && K < q) {
                                if (d) return !0;
                                Q = this.createContactEquation(t, n, e, a);
                                return o.scale(Q.normalA, g, -1), o.normalize(Q.normalA, Q.normalA), o.scale(Q.contactPointA, Q.normalA, m), h(Q.contactPointA, Q.contactPointA, i), r(Q.contactPointA, Q.contactPointA, t.position), r(Q.contactPointB, _, c), h(Q.contactPointB, Q.contactPointB, c), r(Q.contactPointB, Q.contactPointB, n.position), this.contactEquations.push(Q), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Q)), 1
                            }
                        }
                        j[0] = D, j[1] = B;
                        for (var J = 0; J < j.length; J++) {
                            var Z = j[J];
                            if (r(H, Z, i), o.squaredLength(H) < Math.pow(z, 2)) {
                                if (d) return !0;
                                var Q = this.createContactEquation(t, n, e, a);
                                return o.copy(Q.normalA, H), o.normalize(Q.normalA, Q.normalA), o.scale(Q.contactPointA, Q.normalA, m), h(Q.contactPointA, Q.contactPointA, i), r(Q.contactPointA, Q.contactPointA, t.position), r(Q.contactPointB, Z, c), o.scale(W, Q.normalA, -p), h(Q.contactPointB, Q.contactPointB, W), h(Q.contactPointB, Q.contactPointB, c), r(Q.contactPointB, Q.contactPointB, n.position), this.contactEquations.push(Q), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Q)), 1
                            }
                        }
                        return 0
                    }, s.prototype[f.CIRCLE | f.CAPSULE] = s.prototype.circleCapsule = function(t, e, i, s, n, a, o, r, h) {
                        return this.circleLine(t, e, i, s, n, a, o, r, h, a.radius)
                    }, s.prototype[f.CIRCLE | f.CONVEX] = s.prototype[f.CIRCLE | f.BOX] = s.prototype.circleConvex = function(t, e, i, s, n, l, c, u, d, p) {
                        for (var p = "number" == typeof p ? p : e.radius, m = v, g = b, f = S, _ = T, y = E, P = x, A = w, I = O, C = L, M = N, R = k, D = !1, G = Number.MAX_VALUE, B = l.vertices, F = 0; F !== B.length + 1; F++) {
                            var U = B[F % B.length],
                                H = B[(F + 1) % B.length];
                            if (o.rotate(m, U, u), o.rotate(g, H, u), h(m, m, c), h(g, g, c), r(f, g, m), o.normalize(_, f), o.rotate90cw(y, _), o.scale(C, y, -e.radius), h(C, C, i), a(C, l, c, u)) {
                                o.sub(M, m, C);
                                var Y = Math.abs(o.dot(M, y));
                                Y < G && (o.copy(R, C), G = Y, o.scale(I, y, Y), o.add(I, I, C), D = !0)
                            }
                        }
                        if (D) {
                            if (d) return !0;
                            j = this.createContactEquation(t, n, e, l);
                            return o.sub(j.normalA, R, i), o.normalize(j.normalA, j.normalA), o.scale(j.contactPointA, j.normalA, p), h(j.contactPointA, j.contactPointA, i), r(j.contactPointA, j.contactPointA, t.position), r(j.contactPointB, I, c), h(j.contactPointB, j.contactPointB, c), r(j.contactPointB, j.contactPointB, n.position), this.contactEquations.push(j), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(j)), 1
                        }
                        if (p > 0)
                            for (F = 0; F < B.length; F++) {
                                var W = B[F];
                                if (o.rotate(A, W, u), h(A, A, c), r(P, A, i), o.squaredLength(P) < Math.pow(p, 2)) {
                                    if (d) return !0;
                                    var j = this.createContactEquation(t, n, e, l);
                                    return o.copy(j.normalA, P), o.normalize(j.normalA, j.normalA), o.scale(j.contactPointA, j.normalA, p), h(j.contactPointA, j.contactPointA, i), r(j.contactPointA, j.contactPointA, t.position), r(j.contactPointB, A, c), h(j.contactPointB, j.contactPointB, c), r(j.contactPointB, j.contactPointB, n.position), this.contactEquations.push(j), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(j)), 1
                                }
                            }
                        return 0
                    };
                    var X = o.create(),
                        z = o.create(),
                        K = o.create(),
                        V = o.create();
                    s.prototype[f.PARTICLE | f.CONVEX] = s.prototype[f.PARTICLE | f.BOX] = s.prototype.particleConvex = function(t, e, i, s, n, c, u, d, p) {
                        var m = v,
                            g = b,
                            f = S,
                            _ = T,
                            y = E,
                            I = P,
                            C = A,
                            w = x,
                            M = O,
                            L = R,
                            N = D,
                            k = Number.MAX_VALUE,
                            G = !1,
                            B = c.vertices;
                        if (!a(i, c, u, d)) return 0;
                        if (p) return !0;
                        for (var F = 0; F !== B.length + 1; F++) {
                            var U = B[F % B.length],
                                H = B[(F + 1) % B.length];
                            o.rotate(m, U, d), o.rotate(g, H, d), h(m, m, u), h(g, g, u), r(f, g, m), o.normalize(_, f), o.rotate90cw(y, _), r(w, i, m);
                            l(w, y);
                            r(I, m, u), r(C, i, u), o.sub(L, m, i);
                            var Y = Math.abs(o.dot(L, y));
                            Y < k && (k = Y, o.scale(M, y, Y), o.add(M, M, i), o.copy(N, y), G = !0)
                        }
                        if (G) {
                            var W = this.createContactEquation(t, n, e, c);
                            return o.scale(W.normalA, N, -1), o.normalize(W.normalA, W.normalA), o.set(W.contactPointA, 0, 0), h(W.contactPointA, W.contactPointA, i), r(W.contactPointA, W.contactPointA, t.position), r(W.contactPointB, M, u), h(W.contactPointB, W.contactPointB, u), r(W.contactPointB, W.contactPointB, n.position), this.contactEquations.push(W), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(W)), 1
                        }
                        return 0
                    }, s.prototype[f.CIRCLE] = s.prototype.circleCircle = function(t, e, i, s, n, a, l, c, u, d, p) {
                        var m = v,
                            d = d || e.radius,
                            p = p || a.radius;
                        r(m, i, l);
                        var g = d + p;
                        if (o.squaredLength(m) > Math.pow(g, 2)) return 0;
                        if (u) return !0;
                        var f = this.createContactEquation(t, n, e, a);
                        return r(f.normalA, l, i), o.normalize(f.normalA, f.normalA), o.scale(f.contactPointA, f.normalA, d), o.scale(f.contactPointB, f.normalA, -p), h(f.contactPointA, f.contactPointA, i), r(f.contactPointA, f.contactPointA, t.position), h(f.contactPointB, f.contactPointB, l), r(f.contactPointB, f.contactPointB, n.position), this.contactEquations.push(f), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(f)), 1
                    }, s.prototype[f.PLANE | f.CONVEX] = s.prototype[f.PLANE | f.BOX] = s.prototype.planeConvex = function(t, e, i, s, n, a, c, u, d) {
                        var p = v,
                            m = b,
                            g = S,
                            f = 0;
                        o.rotate(m, y, s);
                        for (var _ = 0; _ !== a.vertices.length; _++) {
                            var T = a.vertices[_];
                            if (o.rotate(p, T, u), h(p, p, c), r(g, p, i), l(g, m) <= 0) {
                                if (d) return !0;
                                f++;
                                var E = this.createContactEquation(t, n, e, a);
                                r(g, p, i), o.copy(E.normalA, m);
                                var P = l(g, E.normalA);
                                o.scale(g, E.normalA, P), r(E.contactPointB, p, n.position), r(E.contactPointA, p, g), r(E.contactPointA, E.contactPointA, t.position), this.contactEquations.push(E), this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(E))
                            }
                        }
                        return this.enableFrictionReduction && this.enableFriction && f && this.frictionEquations.push(this.createFrictionFromAverage(f)), f
                    }, s.prototype[f.PARTICLE | f.PLANE] = s.prototype.particlePlane = function(t, e, i, s, n, a, h, c, u) {
                        var d = v,
                            p = b;
                        c = c || 0, r(d, i, h), o.rotate(p, y, c);
                        var m = l(d, p);
                        if (m > 0) return 0;
                        if (u) return !0;
                        var g = this.createContactEquation(n, t, a, e);
                        return o.copy(g.normalA, p), o.scale(d, g.normalA, m), r(g.contactPointA, i, d), r(g.contactPointA, g.contactPointA, n.position), r(g.contactPointB, i, t.position), this.contactEquations.push(g), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(g)), 1
                    }, s.prototype[f.CIRCLE | f.PARTICLE] = s.prototype.circleParticle = function(t, e, i, s, n, a, l, c, u) {
                        var d = v;
                        if (r(d, l, i), o.squaredLength(d) > Math.pow(e.radius, 2)) return 0;
                        if (u) return !0;
                        var p = this.createContactEquation(t, n, e, a);
                        return o.copy(p.normalA, d), o.normalize(p.normalA, p.normalA), o.scale(p.contactPointA, p.normalA, e.radius), h(p.contactPointA, p.contactPointA, i), r(p.contactPointA, p.contactPointA, t.position), r(p.contactPointB, l, n.position), this.contactEquations.push(p), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(p)), 1
                    };
                    var q = new m({
                            radius: 1
                        }),
                        J = o.create(),
                        Z = o.create();
                    o.create();
                    s.prototype[f.PLANE | f.CAPSULE] = s.prototype.planeCapsule = function(t, e, i, s, n, a, r, l, c) {
                        var u = J,
                            d = Z,
                            p = q;
                        o.set(u, -a.length / 2, 0), o.rotate(u, u, l), h(u, u, r), o.set(d, a.length / 2, 0), o.rotate(d, d, l), h(d, d, r), p.radius = a.radius;
                        var m;
                        this.enableFrictionReduction && (m = this.enableFriction, this.enableFriction = !1);
                        var g = this.circlePlane(n, p, u, 0, t, e, i, s, c),
                            f = this.circlePlane(n, p, d, 0, t, e, i, s, c);
                        if (this.enableFrictionReduction && (this.enableFriction = m), c) return g || f;
                        var _ = g + f;
                        return this.enableFrictionReduction && _ && this.frictionEquations.push(this.createFrictionFromAverage(_)), _
                    }, s.prototype[f.CIRCLE | f.PLANE] = s.prototype.circlePlane = function(t, e, i, s, n, a, c, u, d) {
                        var p = t,
                            m = e,
                            g = i,
                            f = n,
                            _ = c,
                            T = u;
                        T = T || 0;
                        var E = v,
                            P = b,
                            A = S;
                        r(E, g, _), o.rotate(P, y, T);
                        var I = l(P, E);
                        if (I > m.radius) return 0;
                        if (d) return !0;
                        var C = this.createContactEquation(f, p, a, e);
                        return o.copy(C.normalA, P), o.scale(C.contactPointB, C.normalA, -m.radius), h(C.contactPointB, C.contactPointB, g), r(C.contactPointB, C.contactPointB, p.position), o.scale(A, C.normalA, I), r(C.contactPointA, E, A), h(C.contactPointA, C.contactPointA, _), r(C.contactPointA, C.contactPointA, f.position), this.contactEquations.push(C), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(C)), 1
                    }, s.prototype[f.CONVEX] = s.prototype[f.CONVEX | f.BOX] = s.prototype[f.BOX] = s.prototype.convexConvex = function(t, e, i, n, a, c, u, d, p, m) {
                        var g = v,
                            f = b,
                            _ = S,
                            y = T,
                            P = E,
                            x = A,
                            w = I,
                            M = C,
                            O = 0,
                            m = "number" == typeof m ? m : 0;
                        if (!s.findSeparatingAxis(e, i, n, c, u, d, g)) return 0;
                        r(w, u, i), l(g, w) > 0 && o.scale(g, g, -1);
                        var L = s.getClosestEdge(e, n, g, !0),
                            N = s.getClosestEdge(c, d, g);
                        if (-1 === L || -1 === N) return 0;
                        for (var k = 0; k < 2; k++) {
                            var R = L,
                                D = N,
                                G = e,
                                B = c,
                                F = i,
                                U = u,
                                H = n,
                                Y = d,
                                W = t,
                                j = a;
                            if (0 === k) {
                                var X;
                                X = R, R = D, D = X, X = G, G = B, B = X, X = F, F = U, U = X, X = H, H = Y, Y = X, X = W, W = j, j = X
                            }
                            for (var z = D; z < D + 2; z++) {
                                var K = B.vertices[(z + B.vertices.length) % B.vertices.length];
                                o.rotate(f, K, Y), h(f, f, U);
                                for (var V = 0, q = R - 1; q < R + 2; q++) {
                                    var J = G.vertices[(q + G.vertices.length) % G.vertices.length],
                                        Z = G.vertices[(q + 1 + G.vertices.length) % G.vertices.length];
                                    o.rotate(_, J, H), o.rotate(y, Z, H), h(_, _, F), h(y, y, F), r(P, y, _), o.rotate90cw(M, P), o.normalize(M, M), r(w, f, _);
                                    $ = l(M, w);
                                    (q === R && $ <= m || q !== R && $ <= 0) && V++
                                }
                                if (V >= 3) {
                                    if (p) return !0;
                                    var Q = this.createContactEquation(W, j, G, B);
                                    O++;
                                    var J = G.vertices[R % G.vertices.length],
                                        Z = G.vertices[(R + 1) % G.vertices.length];
                                    o.rotate(_, J, H), o.rotate(y, Z, H), h(_, _, F), h(y, y, F), r(P, y, _), o.rotate90cw(Q.normalA, P), o.normalize(Q.normalA, Q.normalA), r(w, f, _);
                                    var $ = l(Q.normalA, w);
                                    o.scale(x, Q.normalA, $), r(Q.contactPointA, f, F), r(Q.contactPointA, Q.contactPointA, x), h(Q.contactPointA, Q.contactPointA, F), r(Q.contactPointA, Q.contactPointA, W.position), r(Q.contactPointB, f, U), h(Q.contactPointB, Q.contactPointB, U), r(Q.contactPointB, Q.contactPointB, j.position), this.contactEquations.push(Q), this.enableFrictionReduction || this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Q))
                                }
                            }
                        }
                        return this.enableFrictionReduction && this.enableFriction && O && this.frictionEquations.push(this.createFrictionFromAverage(O)), O
                    };
                    var Q = o.fromValues(0, 0);
                    s.projectConvexOntoAxis = function(t, e, i, s, n) {
                        var a, r, h = null,
                            c = null,
                            u = Q;
                        o.rotate(u, s, -i);
                        for (var d = 0; d < t.vertices.length; d++) a = t.vertices[d], r = l(a, u), (null === h || r > h) && (h = r), (null === c || r < c) && (c = r);
                        if (c > h) {
                            var p = c;
                            c = h, h = p
                        }
                        var m = l(e, s);
                        o.set(n, c + m, h + m)
                    };
                    var $ = o.fromValues(0, 0),
                        tt = o.fromValues(0, 0),
                        et = o.fromValues(0, 0),
                        it = o.fromValues(0, 0),
                        st = o.fromValues(0, 0),
                        nt = o.fromValues(0, 0);
                    s.findSeparatingAxis = function(t, e, i, n, a, h, l) {
                        var c = null,
                            u = !1,
                            d = !1,
                            p = $,
                            m = tt,
                            g = et,
                            f = it,
                            y = st,
                            v = nt;
                        if (t instanceof _ && n instanceof _)
                            for (P = 0; 2 !== P; P++) {
                                var b = t,
                                    S = i;
                                1 === P && (b = n, S = h);
                                for (A = 0; 2 !== A; A++) {
                                    0 === A ? o.set(f, 0, 1) : 1 === A && o.set(f, 1, 0), 0 !== S && o.rotate(f, f, S), s.projectConvexOntoAxis(t, e, i, f, y), s.projectConvexOntoAxis(n, a, h, f, v);
                                    var T = y,
                                        E = v;
                                    y[0] > v[0] && (E = y, T = v, !0), u = (I = E[0] - T[1]) <= 0, (null === c || I > c) && (o.copy(l, f), c = I, d = u)
                                }
                            } else
                                for (var P = 0; 2 !== P; P++) {
                                    var b = t,
                                        S = i;
                                    1 === P && (b = n, S = h);
                                    for (var A = 0; A !== b.vertices.length; A++) {
                                        o.rotate(m, b.vertices[A], S), o.rotate(g, b.vertices[(A + 1) % b.vertices.length], S), r(p, g, m), o.rotate90cw(f, p), o.normalize(f, f), s.projectConvexOntoAxis(t, e, i, f, y), s.projectConvexOntoAxis(n, a, h, f, v);
                                        var T = y,
                                            E = v;
                                        y[0] > v[0] && (E = y, T = v, !0);
                                        var I = E[0] - T[1];
                                        u = I <= 0, (null === c || I > c) && (o.copy(l, f), c = I, d = u)
                                    }
                                }
                        return d
                    };
                    var at = o.fromValues(0, 0),
                        ot = o.fromValues(0, 0),
                        rt = o.fromValues(0, 0);
                    s.getClosestEdge = function(t, e, i, s) {
                        var n = at,
                            a = ot,
                            h = rt;
                        o.rotate(n, i, -e), s && o.scale(n, n, -1);
                        for (var c = -1, u = t.vertices.length, d = -1, p = 0; p !== u; p++) {
                            r(a, t.vertices[(p + 1) % u], t.vertices[p % u]), o.rotate90cw(h, a), o.normalize(h, h);
                            var m = l(h, n);
                            (-1 === c || m > d) && (c = p % u, d = m)
                        }
                        return c
                    };
                    var ht = o.create(),
                        lt = o.create(),
                        ct = o.create(),
                        ut = o.create(),
                        dt = o.create(),
                        pt = o.create(),
                        mt = o.create();
                    s.prototype[f.CIRCLE | f.HEIGHTFIELD] = s.prototype.circleHeightfield = function(t, e, i, s, n, a, l, c, u, d) {
                        var p = a.heights,
                            d = d || e.radius,
                            m = a.elementWidth,
                            g = lt,
                            f = ht,
                            _ = dt,
                            y = mt,
                            v = pt,
                            b = ct,
                            S = ut,
                            T = Math.floor((i[0] - d - l[0]) / m),
                            E = Math.ceil((i[0] + d - l[0]) / m);
                        T < 0 && (T = 0), E >= p.length && (E = p.length - 1);
                        for (var P = p[T], A = p[E], I = T; I < E; I++) p[I] < A && (A = p[I]), p[I] > P && (P = p[I]);
                        if (i[1] - d > P) return !u && 0;
                        for (var C = !1, I = T; I < E; I++) {
                            o.set(b, I * m, p[I]), o.set(S, (I + 1) * m, p[I + 1]), o.add(b, b, l), o.add(S, S, l), o.sub(v, S, b), o.rotate(v, v, Math.PI / 2), o.normalize(v, v), o.scale(f, v, -d), o.add(f, f, i), o.sub(g, f, b);
                            var x = o.dot(g, v);
                            if (f[0] >= b[0] && f[0] < S[0] && x <= 0) {
                                if (u) return !0;
                                C = !0, o.scale(g, v, -x), o.add(_, f, g), o.copy(y, v);
                                w = this.createContactEquation(n, t, a, e);
                                o.copy(w.normalA, y), o.scale(w.contactPointB, w.normalA, -d), h(w.contactPointB, w.contactPointB, i), r(w.contactPointB, w.contactPointB, t.position), o.copy(w.contactPointA, _), o.sub(w.contactPointA, w.contactPointA, n.position), this.contactEquations.push(w), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(w))
                            }
                        }
                        if (C = !1, d > 0)
                            for (I = T; I <= E; I++)
                                if (o.set(b, I * m, p[I]), o.add(b, b, l), o.sub(g, i, b), o.squaredLength(g) < Math.pow(d, 2)) {
                                    if (u) return !0;
                                    C = !0;
                                    var w = this.createContactEquation(n, t, a, e);
                                    o.copy(w.normalA, g), o.normalize(w.normalA, w.normalA), o.scale(w.contactPointB, w.normalA, -d), h(w.contactPointB, w.contactPointB, i), r(w.contactPointB, w.contactPointB, t.position), r(w.contactPointA, b, l), h(w.contactPointA, w.contactPointA, l), r(w.contactPointA, w.contactPointA, n.position), this.contactEquations.push(w), this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(w))
                                }
                        return C ? 1 : 0
                    };
                    var gt = o.create(),
                        ft = o.create(),
                        _t = o.create(),
                        yt = new g({
                            vertices: [o.create(), o.create(), o.create(), o.create()]
                        });
                    s.prototype[f.BOX | f.HEIGHTFIELD] = s.prototype[f.CONVEX | f.HEIGHTFIELD] = s.prototype.convexHeightfield = function(t, e, i, s, n, a, r, h, l) {
                        var c = a.heights,
                            u = a.elementWidth,
                            d = gt,
                            p = ft,
                            m = _t,
                            g = yt,
                            f = Math.floor((t.aabb.lowerBound[0] - r[0]) / u),
                            _ = Math.ceil((t.aabb.upperBound[0] - r[0]) / u);
                        f < 0 && (f = 0), _ >= c.length && (_ = c.length - 1);
                        for (var y = c[f], v = c[_], b = f; b < _; b++) c[b] < v && (v = c[b]), c[b] > y && (y = c[b]);
                        if (t.aabb.lowerBound[1] > y) return !l && 0;
                        for (var S = 0, b = f; b < _; b++) {
                            o.set(d, b * u, c[b]), o.set(p, (b + 1) * u, c[b + 1]), o.add(d, d, r), o.add(p, p, r);
                            o.set(m, .5 * (p[0] + d[0]), .5 * (p[1] + d[1] - 100)), o.sub(g.vertices[0], p, m), o.sub(g.vertices[1], d, m), o.copy(g.vertices[2], g.vertices[1]), o.copy(g.vertices[3], g.vertices[0]), g.vertices[2][1] -= 100, g.vertices[3][1] -= 100, S += this.convexConvex(t, e, i, s, n, g, m, 0, l)
                        }
                        return S
                    }
                }, {
                    "../equations/ContactEquation": 21,
                    "../equations/Equation": 22,
                    "../equations/FrictionEquation": 23,
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "../shapes/Box": 37,
                    "../shapes/Circle": 39,
                    "../shapes/Convex": 40,
                    "../shapes/Shape": 45,
                    "../utils/ContactEquationPool": 48,
                    "../utils/FrictionEquationPool": 49,
                    "../utils/TupleDictionary": 56,
                    "../utils/Utils": 57
                }
            ],
            11: [
                function(t, e, i) {
                    function s(t) {
                        t = t || {}, this.from = t.from ? a.fromValues(t.from[0], t.from[1]) : a.create(), this.to = t.to ? a.fromValues(t.to[0], t.to[1]) : a.create(), this.checkCollisionResponse = void 0 === t.checkCollisionResponse || t.checkCollisionResponse, this.skipBackfaces = !!t.skipBackfaces, this.collisionMask = void 0 !== t.collisionMask ? t.collisionMask : -1, this.collisionGroup = void 0 !== t.collisionGroup ? t.collisionGroup : -1, this.mode = void 0 !== t.mode ? t.mode : s.ANY, this.callback = t.callback || function(t) {}, this.direction = a.create(), this.length = 1, this.update()
                    }

                    function n(t, e, i) {
                        a.sub(r, i, t);
                        var s = a.dot(r, e);
                        return a.scale(h, e, s), a.add(h, h, t), a.squaredDistance(i, h)
                    }
                    e.exports = s;
                    var a = t("../math/vec2");
                    t("../collision/RaycastResult"), t("../shapes/Shape"), t("../collision/AABB");
                    s.prototype.constructor = s, s.CLOSEST = 1, s.ANY = 2, s.ALL = 4, s.prototype.update = function() {
                        var t = this.direction;
                        a.sub(t, this.to, this.from), this.length = a.length(t), a.normalize(t, t)
                    }, s.prototype.intersectBodies = function(t, e) {
                        for (var i = 0, s = e.length; !t.shouldStop(this) && i < s; i++) {
                            var n = e[i],
                                a = n.getAABB();
                            (a.overlapsRay(this) >= 0 || a.containsPoint(this.from)) && this.intersectBody(t, n)
                        }
                    };
                    var o = a.create();
                    s.prototype.intersectBody = function(t, e) {
                        var i = this.checkCollisionResponse;
                        if (!i || e.collisionResponse)
                            for (var s = o, n = 0, r = e.shapes.length; n < r; n++) {
                                var h = e.shapes[n];
                                if ((!i || h.collisionResponse) && (0 != (this.collisionGroup & h.collisionMask) && 0 != (h.collisionGroup & this.collisionMask))) {
                                    a.rotate(s, h.position, e.angle), a.add(s, s, e.position);
                                    var l = h.angle + e.angle;
                                    if (this.intersectShape(t, h, l, s, e), t.shouldStop(this)) break
                                }
                            }
                    }, s.prototype.intersectShape = function(t, e, i, s, a) {
                        n(this.from, this.direction, s) > e.boundingRadius * e.boundingRadius || (this._currentBody = a, this._currentShape = e, e.raycast(t, this, s, i), this._currentBody = this._currentShape = null)
                    }, s.prototype.getAABB = function(t) {
                        var e = this.to,
                            i = this.from;
                        a.set(t.lowerBound, Math.min(e[0], i[0]), Math.min(e[1], i[1])), a.set(t.upperBound, Math.max(e[0], i[0]), Math.max(e[1], i[1]))
                    };
                    a.create();
                    s.prototype.reportIntersection = function(t, e, i, n) {
                        this.from, this.to;
                        var o = this._currentShape,
                            r = this._currentBody;
                        if (!(this.skipBackfaces && a.dot(i, this.direction) > 0)) switch (this.mode) {
                            case s.ALL:
                                t.set(i, o, r, e, n), this.callback(t);
                                break;
                            case s.CLOSEST:
                                (e < t.fraction || !t.hasHit()) && t.set(i, o, r, e, n);
                                break;
                            case s.ANY:
                                t.set(i, o, r, e, n)
                        }
                    };
                    var r = a.create(),
                        h = a.create()
                }, {
                    "../collision/AABB": 7,
                    "../collision/RaycastResult": 12,
                    "../math/vec2": 30,
                    "../shapes/Shape": 45
                }
            ],
            12: [
                function(t, e, i) {
                    function s() {
                        this.normal = n.create(), this.shape = null, this.body = null, this.faceIndex = -1, this.fraction = -1, this.isStopped = !1
                    }
                    var n = t("../math/vec2"),
                        a = t("../collision/Ray");
                    e.exports = s, s.prototype.reset = function() {
                        n.set(this.normal, 0, 0), this.shape = null, this.body = null, this.faceIndex = -1, this.fraction = -1, this.isStopped = !1
                    }, s.prototype.getHitDistance = function(t) {
                        return n.distance(t.from, t.to) * this.fraction
                    }, s.prototype.hasHit = function() {
                        return -1 !== this.fraction
                    }, s.prototype.getHitPoint = function(t, e) {
                        n.lerp(t, e.from, e.to, this.fraction)
                    }, s.prototype.stop = function() {
                        this.isStopped = !0
                    }, s.prototype.shouldStop = function(t) {
                        return this.isStopped || -1 !== this.fraction && t.mode === a.ANY
                    }, s.prototype.set = function(t, e, i, s, a) {
                        n.copy(this.normal, t), this.shape = e, this.body = i, this.fraction = s, this.faceIndex = a
                    }
                }, {
                    "../collision/Ray": 11,
                    "../math/vec2": 30
                }
            ],
            13: [
                function(t, e, i) {
                    function s() {
                        a.call(this, a.SAP), this.axisList = [], this.axisIndex = 0;
                        var t = this;
                        this._addBodyHandler = function(e) {
                            t.axisList.push(e.body)
                        }, this._removeBodyHandler = function(e) {
                            var i = t.axisList.indexOf(e.body); - 1 !== i && t.axisList.splice(i, 1)
                        }
                    }
                    var n = t("../utils/Utils"),
                        a = t("../collision/Broadphase");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.setWorld = function(t) {
                        this.axisList.length = 0, n.appendArray(this.axisList, t.bodies), t.off("addBody", this._addBodyHandler).off("removeBody", this._removeBodyHandler), t.on("addBody", this._addBodyHandler).on("removeBody", this._removeBodyHandler), this.world = t
                    }, s.sortAxisList = function(t, e) {
                        e |= 0;
                        for (var i = 1, s = t.length; i < s; i++) {
                            for (var n = t[i], a = i - 1; a >= 0 && !(t[a].aabb.lowerBound[e] <= n.aabb.lowerBound[e]); a--) t[a + 1] = t[a];
                            t[a + 1] = n
                        }
                        return t
                    }, s.prototype.sortList = function() {
                        var t = this.axisList,
                            e = this.axisIndex;
                        s.sortAxisList(t, e)
                    }, s.prototype.getCollisionPairs = function(t) {
                        var e = this.axisList,
                            i = this.result,
                            s = this.axisIndex;
                        i.length = 0;
                        for (var n = e.length; n--;) {
                            var o = e[n];
                            o.aabbNeedsUpdate && o.updateAABB()
                        }
                        this.sortList();
                        for (var r = 0, h = 0 | e.length; r !== h; r++)
                            for (var l = e[r], c = r + 1; c < h; c++) {
                                var u = e[c];
                                if (!(u.aabb.lowerBound[s] <= l.aabb.upperBound[s])) break;
                                a.canCollide(l, u) && this.boundingVolumeCheck(l, u) && i.push(l, u)
                            }
                        return i
                    }, s.prototype.aabbQuery = function(t, e, i) {
                        i = i || [], this.sortList();
                        var s = this.axisIndex,
                            n = "x";
                        1 === s && (n = "y"), 2 === s && (n = "z");
                        for (var a = this.axisList, o = (e.lowerBound[n], e.upperBound[n], 0); o < a.length; o++) {
                            var r = a[o];
                            r.aabbNeedsUpdate && r.updateAABB(), r.aabb.overlaps(e) && i.push(r)
                        }
                        return i
                    }
                }, {
                    "../collision/Broadphase": 8,
                    "../utils/Utils": 57
                }
            ],
            14: [
                function(t, e, i) {
                    function s(t, e, i, s) {
                        this.type = i, s = n.defaults(s, {
                            collideConnected: !0,
                            wakeUpBodies: !0
                        }), this.equations = [], this.bodyA = t, this.bodyB = e, this.collideConnected = s.collideConnected, s.wakeUpBodies && (t && t.wakeUp(), e && e.wakeUp())
                    }
                    e.exports = s;
                    var n = t("../utils/Utils");
                    s.prototype.update = function() {
                        throw new Error("method update() not implmemented in this Constraint subclass!")
                    }, s.DISTANCE = 1, s.GEAR = 2, s.LOCK = 3, s.PRISMATIC = 4, s.REVOLUTE = 5, s.prototype.setStiffness = function(t) {
                        for (var e = this.equations, i = 0; i !== e.length; i++) {
                            var s = e[i];
                            s.stiffness = t, s.needsUpdate = !0
                        }
                    }, s.prototype.setRelaxation = function(t) {
                        for (var e = this.equations, i = 0; i !== e.length; i++) {
                            var s = e[i];
                            s.relaxation = t, s.needsUpdate = !0
                        }
                    }
                }, {
                    "../utils/Utils": 57
                }
            ],
            15: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = r.defaults(i, {
                            localAnchorA: [0, 0],
                            localAnchorB: [0, 0]
                        }), n.call(this, t, e, n.DISTANCE, i), this.localAnchorA = o.fromValues(i.localAnchorA[0], i.localAnchorA[1]), this.localAnchorB = o.fromValues(i.localAnchorB[0], i.localAnchorB[1]);
                        var s = this.localAnchorA,
                            h = this.localAnchorB;
                        if (this.distance = 0, "number" == typeof i.distance) this.distance = i.distance;
                        else {
                            var l = o.create(),
                                c = o.create(),
                                u = o.create();
                            o.rotate(l, s, t.angle), o.rotate(c, h, e.angle), o.add(u, e.position, c), o.sub(u, u, l), o.sub(u, u, t.position), this.distance = o.length(u)
                        }
                        var d;
                        d = void 0 === i.maxForce ? Number.MAX_VALUE : i.maxForce;
                        var p = new a(t, e, -d, d);
                        this.equations = [p], this.maxForce = d;
                        var u = o.create(),
                            m = o.create(),
                            g = o.create(),
                            f = this;
                        p.computeGq = function() {
                            var t = this.bodyA,
                                e = this.bodyB,
                                i = t.position,
                                n = e.position;
                            return o.rotate(m, s, t.angle), o.rotate(g, h, e.angle), o.add(u, n, g), o.sub(u, u, m), o.sub(u, u, i), o.length(u) - f.distance
                        }, this.setMaxForce(d), this.upperLimitEnabled = !1, this.upperLimit = 1, this.lowerLimitEnabled = !1, this.lowerLimit = 0, this.position = 0
                    }
                    var n = t("./Constraint"),
                        a = t("../equations/Equation"),
                        o = t("../math/vec2"),
                        r = t("../utils/Utils");
                    e.exports = s, (s.prototype = new n).constructor = s;
                    var h = o.create(),
                        l = o.create(),
                        c = o.create();
                    s.prototype.update = function() {
                        var t = this.equations[0],
                            e = this.bodyA,
                            i = this.bodyB,
                            s = (this.distance, e.position),
                            n = i.position,
                            a = this.equations[0],
                            r = t.G;
                        o.rotate(l, this.localAnchorA, e.angle), o.rotate(c, this.localAnchorB, i.angle), o.add(h, n, c), o.sub(h, h, l), o.sub(h, h, s), this.position = o.length(h);
                        var u = !1;
                        if (this.upperLimitEnabled && this.position > this.upperLimit && (a.maxForce = 0, a.minForce = -this.maxForce, this.distance = this.upperLimit, u = !0), this.lowerLimitEnabled && this.position < this.lowerLimit && (a.maxForce = this.maxForce, a.minForce = 0, this.distance = this.lowerLimit, u = !0), !this.lowerLimitEnabled && !this.upperLimitEnabled || u) {
                            a.enabled = !0, o.normalize(h, h);
                            var d = o.crossLength(l, h),
                                p = o.crossLength(c, h);
                            r[0] = -h[0], r[1] = -h[1], r[2] = -d, r[3] = h[0], r[4] = h[1], r[5] = p
                        } else a.enabled = !1
                    }, s.prototype.setMaxForce = function(t) {
                        var e = this.equations[0];
                        e.minForce = -t, e.maxForce = t
                    }, s.prototype.getMaxForce = function() {
                        return this.equations[0].maxForce
                    }
                }, {
                    "../equations/Equation": 22,
                    "../math/vec2": 30,
                    "../utils/Utils": 57,
                    "./Constraint": 14
                }
            ],
            16: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, n.GEAR, i), this.ratio = void 0 !== i.ratio ? i.ratio : 1, this.angle = void 0 !== i.angle ? i.angle : e.angle - this.ratio * t.angle, i.angle = this.angle, i.ratio = this.ratio, this.equations = [new a(t, e, i)], void 0 !== i.maxTorque && this.setMaxTorque(i.maxTorque)
                    }
                    var n = t("./Constraint"),
                        a = (t("../equations/Equation"), t("../equations/AngleLockEquation"));
                    t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.update = function() {
                        var t = this.equations[0];
                        t.ratio !== this.ratio && t.setRatio(this.ratio), t.angle = this.angle
                    }, s.prototype.setMaxTorque = function(t) {
                        this.equations[0].setMaxTorque(t)
                    }, s.prototype.getMaxTorque = function(t) {
                        return this.equations[0].maxForce
                    }
                }, {
                    "../equations/AngleLockEquation": 20,
                    "../equations/Equation": 22,
                    "../math/vec2": 30,
                    "./Constraint": 14
                }
            ],
            17: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, n.LOCK, i);
                        var s = void 0 === i.maxForce ? Number.MAX_VALUE : i.maxForce,
                            r = (i.localAngleB, new o(t, e, -s, s)),
                            h = new o(t, e, -s, s),
                            l = new o(t, e, -s, s),
                            c = a.create(),
                            u = a.create(),
                            d = this;
                        r.computeGq = function() {
                            return a.rotate(c, d.localOffsetB, t.angle), a.sub(u, e.position, t.position), a.sub(u, u, c), u[0]
                        }, h.computeGq = function() {
                            return a.rotate(c, d.localOffsetB, t.angle), a.sub(u, e.position, t.position), a.sub(u, u, c), u[1]
                        };
                        var p = a.create(),
                            m = a.create();
                        l.computeGq = function() {
                            return a.rotate(p, d.localOffsetB, e.angle - d.localAngleB), a.scale(p, p, -1), a.sub(u, t.position, e.position), a.add(u, u, p), a.rotate(m, p, -Math.PI / 2), a.normalize(m, m), a.dot(u, m)
                        }, this.localOffsetB = a.create(), i.localOffsetB ? a.copy(this.localOffsetB, i.localOffsetB) : (a.sub(this.localOffsetB, e.position, t.position), a.rotate(this.localOffsetB, this.localOffsetB, -t.angle)), this.localAngleB = 0, "number" == typeof i.localAngleB ? this.localAngleB = i.localAngleB : this.localAngleB = e.angle - t.angle, this.equations.push(r, h, l), this.setMaxForce(s)
                    }
                    var n = t("./Constraint"),
                        a = t("../math/vec2"),
                        o = t("../equations/Equation");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.setMaxForce = function(t) {
                        for (var e = this.equations, i = 0; i < this.equations.length; i++) e[i].maxForce = t, e[i].minForce = -t
                    }, s.prototype.getMaxForce = function() {
                        return this.equations[0].maxForce
                    };
                    var r = a.create(),
                        h = a.create(),
                        l = a.create(),
                        c = a.fromValues(1, 0),
                        u = a.fromValues(0, 1);
                    s.prototype.update = function() {
                        var t = this.equations[0],
                            e = this.equations[1],
                            i = this.equations[2],
                            s = this.bodyA,
                            n = this.bodyB;
                        a.rotate(r, this.localOffsetB, s.angle), a.rotate(h, this.localOffsetB, n.angle - this.localAngleB), a.scale(h, h, -1), a.rotate(l, h, Math.PI / 2), a.normalize(l, l), t.G[0] = -1, t.G[1] = 0, t.G[2] = -a.crossLength(r, c), t.G[3] = 1, e.G[0] = 0, e.G[1] = -1, e.G[2] = -a.crossLength(r, u), e.G[4] = 1, i.G[0] = -l[0], i.G[1] = -l[1], i.G[3] = l[0], i.G[4] = l[1], i.G[5] = a.crossLength(h, l)
                    }
                }, {
                    "../equations/Equation": 22,
                    "../math/vec2": 30,
                    "./Constraint": 14
                }
            ],
            18: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, n.PRISMATIC, i);
                        var s = r.fromValues(0, 0),
                            l = r.fromValues(1, 0),
                            c = r.fromValues(0, 0);
                        i.localAnchorA && r.copy(s, i.localAnchorA), i.localAxisA && r.copy(l, i.localAxisA), i.localAnchorB && r.copy(c, i.localAnchorB), this.localAnchorA = s, this.localAnchorB = c, this.localAxisA = l;
                        var u = this.maxForce = void 0 !== i.maxForce ? i.maxForce : Number.MAX_VALUE,
                            d = new o(t, e, -u, u),
                            p = new r.create,
                            m = new r.create,
                            g = new r.create,
                            f = new r.create;
                        if (d.computeGq = function() {
                            return r.dot(g, f)
                        }, d.updateJacobian = function() {
                            var i = this.G,
                                n = t.position,
                                a = e.position;
                            r.rotate(p, s, t.angle), r.rotate(m, c, e.angle), r.add(g, a, m), r.sub(g, g, n), r.sub(g, g, p), r.rotate(f, l, t.angle + Math.PI / 2), i[0] = -f[0], i[1] = -f[1], i[2] = -r.crossLength(p, f) + r.crossLength(f, g), i[3] = f[0], i[4] = f[1], i[5] = r.crossLength(m, f)
                        }, this.equations.push(d), !i.disableRotationalLock) {
                            var _ = new h(t, e, -u, u);
                            this.equations.push(_)
                        }
                        this.position = 0, this.velocity = 0, this.lowerLimitEnabled = void 0 !== i.lowerLimit, this.upperLimitEnabled = void 0 !== i.upperLimit, this.lowerLimit = void 0 !== i.lowerLimit ? i.lowerLimit : 0, this.upperLimit = void 0 !== i.upperLimit ? i.upperLimit : 1, this.upperLimitEquation = new a(t, e), this.lowerLimitEquation = new a(t, e), this.upperLimitEquation.minForce = this.lowerLimitEquation.minForce = 0, this.upperLimitEquation.maxForce = this.lowerLimitEquation.maxForce = u, this.motorEquation = new o(t, e), this.motorEnabled = !1, this.motorSpeed = 0;
                        var y = this,
                            v = this.motorEquation;
                        v.computeGW;
                        v.computeGq = function() {
                            return 0
                        }, v.computeGW = function() {
                            var t = this.G,
                                e = this.bodyA,
                                i = this.bodyB,
                                s = e.velocity,
                                n = i.velocity,
                                a = e.angularVelocity,
                                o = i.angularVelocity;
                            return this.gmult(t, s, a, n, o) + y.motorSpeed
                        }
                    }
                    var n = t("./Constraint"),
                        a = t("../equations/ContactEquation"),
                        o = t("../equations/Equation"),
                        r = t("../math/vec2"),
                        h = t("../equations/RotationalLockEquation");
                    e.exports = s, (s.prototype = new n).constructor = s;
                    var l = r.create(),
                        c = r.create(),
                        u = r.create(),
                        d = r.create(),
                        p = r.create(),
                        m = r.create();
                    s.prototype.update = function() {
                        var t = this.equations,
                            e = t[0],
                            i = this.upperLimit,
                            s = this.lowerLimit,
                            n = this.upperLimitEquation,
                            a = this.lowerLimitEquation,
                            o = this.bodyA,
                            h = this.bodyB,
                            g = this.localAxisA,
                            f = this.localAnchorA,
                            _ = this.localAnchorB;
                        e.updateJacobian(), r.rotate(l, g, o.angle), r.rotate(d, f, o.angle), r.add(c, d, o.position), r.rotate(p, _, h.angle), r.add(u, p, h.position);
                        var y = this.position = r.dot(u, l) - r.dot(c, l);
                        if (this.motorEnabled) {
                            var v = this.motorEquation.G;
                            v[0] = l[0], v[1] = l[1], v[2] = r.crossLength(l, p), v[3] = -l[0], v[4] = -l[1], v[5] = -r.crossLength(l, d)
                        }
                        if (this.upperLimitEnabled && y > i ? (r.scale(n.normalA, l, -1), r.sub(n.contactPointA, c, o.position), r.sub(n.contactPointB, u, h.position), r.scale(m, l, i), r.add(n.contactPointA, n.contactPointA, m), -1 === t.indexOf(n) && t.push(n)) : -1 !== (b = t.indexOf(n)) && t.splice(b, 1), this.lowerLimitEnabled && y < s) r.scale(a.normalA, l, 1), r.sub(a.contactPointA, c, o.position), r.sub(a.contactPointB, u, h.position), r.scale(m, l, s), r.sub(a.contactPointB, a.contactPointB, m), -1 === t.indexOf(a) && t.push(a);
                        else {
                            var b = t.indexOf(a); - 1 !== b && t.splice(b, 1)
                        }
                    }, s.prototype.enableMotor = function() {
                        this.motorEnabled || (this.equations.push(this.motorEquation), this.motorEnabled = !0)
                    }, s.prototype.disableMotor = function() {
                        if (this.motorEnabled) {
                            var t = this.equations.indexOf(this.motorEquation);
                            this.equations.splice(t, 1), this.motorEnabled = !1
                        }
                    }, s.prototype.setLimits = function(t, e) {
                        "number" == typeof t ? (this.lowerLimit = t, this.lowerLimitEnabled = !0) : (this.lowerLimit = t, this.lowerLimitEnabled = !1), "number" == typeof e ? (this.upperLimit = e, this.upperLimitEnabled = !0) : (this.upperLimit = e, this.upperLimitEnabled = !1)
                    }
                }, {
                    "../equations/ContactEquation": 21,
                    "../equations/Equation": 22,
                    "../equations/RotationalLockEquation": 24,
                    "../math/vec2": 30,
                    "./Constraint": 14
                }
            ],
            19: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, n.REVOLUTE, i);
                        var s = this.maxForce = void 0 !== i.maxForce ? i.maxForce : Number.MAX_VALUE;
                        this.pivotA = h.create(), this.pivotB = h.create(), i.worldPivot ? (h.sub(this.pivotA, i.worldPivot, t.position), h.sub(this.pivotB, i.worldPivot, e.position), h.rotate(this.pivotA, this.pivotA, -t.angle), h.rotate(this.pivotB, this.pivotB, -e.angle)) : (h.copy(this.pivotA, i.localPivotA), h.copy(this.pivotB, i.localPivotB));
                        var m = this.equations = [new a(t, e, -s, s), new a(t, e, -s, s)],
                            g = m[0],
                            f = m[1],
                            _ = this;
                        g.computeGq = function() {
                            return h.rotate(l, _.pivotA, t.angle), h.rotate(c, _.pivotB, e.angle), h.add(p, e.position, c), h.sub(p, p, t.position), h.sub(p, p, l), h.dot(p, u)
                        }, f.computeGq = function() {
                            return h.rotate(l, _.pivotA, t.angle), h.rotate(c, _.pivotB, e.angle), h.add(p, e.position, c), h.sub(p, p, t.position), h.sub(p, p, l), h.dot(p, d)
                        }, f.minForce = g.minForce = -s, f.maxForce = g.maxForce = s, this.motorEquation = new o(t, e), this.motorEnabled = !1, this.angle = 0, this.lowerLimitEnabled = !1, this.upperLimitEnabled = !1, this.lowerLimit = 0, this.upperLimit = 0, this.upperLimitEquation = new r(t, e), this.lowerLimitEquation = new r(t, e), this.upperLimitEquation.minForce = 0, this.lowerLimitEquation.maxForce = 0
                    }
                    var n = t("./Constraint"),
                        a = t("../equations/Equation"),
                        o = t("../equations/RotationalVelocityEquation"),
                        r = t("../equations/RotationalLockEquation"),
                        h = t("../math/vec2");
                    e.exports = s;
                    var l = h.create(),
                        c = h.create(),
                        u = h.fromValues(1, 0),
                        d = h.fromValues(0, 1),
                        p = h.create();
                    (s.prototype = new n).constructor = s, s.prototype.setLimits = function(t, e) {
                        "number" == typeof t ? (this.lowerLimit = t, this.lowerLimitEnabled = !0) : (this.lowerLimit = t, this.lowerLimitEnabled = !1), "number" == typeof e ? (this.upperLimit = e, this.upperLimitEnabled = !0) : (this.upperLimit = e, this.upperLimitEnabled = !1)
                    }, s.prototype.update = function() {
                        var t = this.bodyA,
                            e = this.bodyB,
                            i = this.pivotA,
                            s = this.pivotB,
                            n = this.equations,
                            a = (n[0], n[1], n[0]),
                            o = n[1],
                            r = this.upperLimit,
                            p = this.lowerLimit,
                            m = this.upperLimitEquation,
                            g = this.lowerLimitEquation,
                            f = this.angle = e.angle - t.angle;
                        if (this.upperLimitEnabled && f > r ? (m.angle = r, -1 === n.indexOf(m) && n.push(m)) : -1 !== (_ = n.indexOf(m)) && n.splice(_, 1), this.lowerLimitEnabled && f < p) g.angle = p, -1 === n.indexOf(g) && n.push(g);
                        else {
                            var _ = n.indexOf(g); - 1 !== _ && n.splice(_, 1)
                        }
                        h.rotate(l, i, t.angle), h.rotate(c, s, e.angle), a.G[0] = -1, a.G[1] = 0, a.G[2] = -h.crossLength(l, u), a.G[3] = 1, a.G[4] = 0, a.G[5] = h.crossLength(c, u), o.G[0] = 0, o.G[1] = -1, o.G[2] = -h.crossLength(l, d), o.G[3] = 0, o.G[4] = 1, o.G[5] = h.crossLength(c, d)
                    }, s.prototype.enableMotor = function() {
                        this.motorEnabled || (this.equations.push(this.motorEquation), this.motorEnabled = !0)
                    }, s.prototype.disableMotor = function() {
                        if (this.motorEnabled) {
                            var t = this.equations.indexOf(this.motorEquation);
                            this.equations.splice(t, 1), this.motorEnabled = !1
                        }
                    }, s.prototype.motorIsEnabled = function() {
                        return !!this.motorEnabled
                    }, s.prototype.setMotorSpeed = function(t) {
                        if (this.motorEnabled) {
                            var e = this.equations.indexOf(this.motorEquation);
                            this.equations[e].relativeVelocity = t
                        }
                    }, s.prototype.getMotorSpeed = function() {
                        return !!this.motorEnabled && this.motorEquation.relativeVelocity
                    }
                }, {
                    "../equations/Equation": 22,
                    "../equations/RotationalLockEquation": 24,
                    "../equations/RotationalVelocityEquation": 25,
                    "../math/vec2": 30,
                    "./Constraint": 14
                }
            ],
            20: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE), this.angle = i.angle || 0, this.ratio = "number" == typeof i.ratio ? i.ratio : 1, this.setRatio(this.ratio)
                    }
                    var n = t("./Equation");
                    t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeGq = function() {
                        return this.ratio * this.bodyA.angle - this.bodyB.angle + this.angle
                    }, s.prototype.setRatio = function(t) {
                        var e = this.G;
                        e[2] = t, e[5] = -1, this.ratio = t
                    }, s.prototype.setMaxTorque = function(t) {
                        this.maxForce = t, this.minForce = -t
                    }
                }, {
                    "../math/vec2": 30,
                    "./Equation": 22
                }
            ],
            21: [
                function(t, e, i) {
                    function s(t, e) {
                        n.call(this, t, e, 0, Number.MAX_VALUE), this.contactPointA = a.create(), this.penetrationVec = a.create(), this.contactPointB = a.create(), this.normalA = a.create(), this.restitution = 0, this.firstImpact = !1, this.shapeA = null, this.shapeB = null
                    }
                    var n = t("./Equation"),
                        a = t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeB = function(t, e, i) {
                        var s = this.bodyA,
                            n = this.bodyB,
                            o = this.contactPointA,
                            r = this.contactPointB,
                            h = s.position,
                            l = n.position,
                            c = this.penetrationVec,
                            u = this.normalA,
                            d = this.G,
                            p = a.crossLength(o, u),
                            m = a.crossLength(r, u);
                        d[0] = -u[0], d[1] = -u[1], d[2] = -p, d[3] = u[0], d[4] = u[1], d[5] = m, a.add(c, l, r), a.sub(c, c, h), a.sub(c, c, o);
                        var g, f;
                        return this.firstImpact && 0 !== this.restitution ? (f = 0, g = 1 / e * (1 + this.restitution) * this.computeGW()) : (f = a.dot(u, c) + this.offset, g = this.computeGW()), -f * t - g * e - i * this.computeGiMf()
                    }
                }, {
                    "../math/vec2": 30,
                    "./Equation": 22
                }
            ],
            22: [
                function(t, e, i) {
                    function s(t, e, i, n) {
                        this.minForce = void 0 === i ? -Number.MAX_VALUE : i, this.maxForce = void 0 === n ? Number.MAX_VALUE : n, this.bodyA = t, this.bodyB = e, this.stiffness = s.DEFAULT_STIFFNESS, this.relaxation = s.DEFAULT_RELAXATION, this.G = new a.ARRAY_TYPE(6);
                        for (var o = 0; o < 6; o++) this.G[o] = 0;
                        this.offset = 0, this.a = 0, this.b = 0, this.epsilon = 0, this.timeStep = 1 / 60, this.needsUpdate = !0, this.multiplier = 0, this.relativeVelocity = 0, this.enabled = !0
                    }
                    e.exports = s;
                    var n = t("../math/vec2"),
                        a = t("../utils/Utils");
                    t("../objects/Body");
                    s.prototype.constructor = s, s.DEFAULT_STIFFNESS = 1e6, s.DEFAULT_RELAXATION = 4, s.prototype.update = function() {
                        var t = this.stiffness,
                            e = this.relaxation,
                            i = this.timeStep;
                        this.a = 4 / (i * (1 + 4 * e)), this.b = 4 * e / (1 + 4 * e), this.epsilon = 4 / (i * i * t * (1 + 4 * e)), this.needsUpdate = !1
                    }, s.prototype.gmult = function(t, e, i, s, n) {
                        return t[0] * e[0] + t[1] * e[1] + t[2] * i + t[3] * s[0] + t[4] * s[1] + t[5] * n
                    }, s.prototype.computeB = function(t, e, i) {
                        var s = this.computeGW();
                        return -this.computeGq() * t - s * e - this.computeGiMf() * i
                    };
                    var o = n.create(),
                        r = n.create();
                    s.prototype.computeGq = function() {
                        var t = this.G,
                            e = this.bodyA,
                            i = this.bodyB,
                            s = (e.position, i.position, e.angle),
                            n = i.angle;
                        return this.gmult(t, o, s, r, n) + this.offset
                    }, s.prototype.computeGW = function() {
                        var t = this.G,
                            e = this.bodyA,
                            i = this.bodyB,
                            s = e.velocity,
                            n = i.velocity,
                            a = e.angularVelocity,
                            o = i.angularVelocity;
                        return this.gmult(t, s, a, n, o) + this.relativeVelocity
                    }, s.prototype.computeGWlambda = function() {
                        var t = this.G,
                            e = this.bodyA,
                            i = this.bodyB,
                            s = e.vlambda,
                            n = i.vlambda,
                            a = e.wlambda,
                            o = i.wlambda;
                        return this.gmult(t, s, a, n, o)
                    };
                    var h = n.create(),
                        l = n.create();
                    s.prototype.computeGiMf = function() {
                        var t = this.bodyA,
                            e = this.bodyB,
                            i = t.force,
                            s = t.angularForce,
                            a = e.force,
                            o = e.angularForce,
                            r = t.invMassSolve,
                            c = e.invMassSolve,
                            u = t.invInertiaSolve,
                            d = e.invInertiaSolve,
                            p = this.G;
                        return n.scale(h, i, r), n.multiply(h, t.massMultiplier, h), n.scale(l, a, c), n.multiply(l, e.massMultiplier, l), this.gmult(p, h, s * u, l, o * d)
                    }, s.prototype.computeGiMGt = function() {
                        var t = this.bodyA,
                            e = this.bodyB,
                            i = t.invMassSolve,
                            s = e.invMassSolve,
                            n = t.invInertiaSolve,
                            a = e.invInertiaSolve,
                            o = this.G;
                        return o[0] * o[0] * i * t.massMultiplier[0] + o[1] * o[1] * i * t.massMultiplier[1] + o[2] * o[2] * n + o[3] * o[3] * s * e.massMultiplier[0] + o[4] * o[4] * s * e.massMultiplier[1] + o[5] * o[5] * a
                    };
                    var c = n.create(),
                        u = n.create(),
                        d = n.create();
                    n.create(), n.create(), n.create();
                    s.prototype.addToWlambda = function(t) {
                        var e = this.bodyA,
                            i = this.bodyB,
                            s = c,
                            a = u,
                            o = d,
                            r = e.invMassSolve,
                            h = i.invMassSolve,
                            l = e.invInertiaSolve,
                            p = i.invInertiaSolve,
                            m = this.G;
                        a[0] = m[0], a[1] = m[1], o[0] = m[3], o[1] = m[4], n.scale(s, a, r * t), n.multiply(s, s, e.massMultiplier), n.add(e.vlambda, e.vlambda, s), e.wlambda += l * m[2] * t, n.scale(s, o, h * t), n.multiply(s, s, i.massMultiplier), n.add(i.vlambda, i.vlambda, s), i.wlambda += p * m[5] * t
                    }, s.prototype.computeInvC = function(t) {
                        return 1 / (this.computeGiMGt() + t)
                    }
                }, {
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "../utils/Utils": 57
                }
            ],
            23: [
                function(t, e, i) {
                    function s(t, e, i) {
                        a.call(this, t, e, -i, i), this.contactPointA = n.create(), this.contactPointB = n.create(), this.t = n.create(), this.contactEquations = [], this.shapeA = null, this.shapeB = null, this.frictionCoefficient = .3
                    }
                    var n = t("../math/vec2"),
                        a = t("./Equation");
                    t("../utils/Utils");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.setSlipForce = function(t) {
                        this.maxForce = t, this.minForce = -t
                    }, s.prototype.getSlipForce = function() {
                        return this.maxForce
                    }, s.prototype.computeB = function(t, e, i) {
                        this.bodyA, this.bodyB;
                        var s = this.contactPointA,
                            a = this.contactPointB,
                            o = this.t,
                            r = this.G;
                        return r[0] = -o[0], r[1] = -o[1], r[2] = -n.crossLength(s, o), r[3] = o[0], r[4] = o[1], r[5] = n.crossLength(a, o), -this.computeGW() * e - i * this.computeGiMf()
                    }
                }, {
                    "../math/vec2": 30,
                    "../utils/Utils": 57,
                    "./Equation": 22
                }
            ],
            24: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE), this.angle = i.angle || 0;
                        var s = this.G;
                        s[2] = 1, s[5] = -1
                    }
                    var n = t("./Equation"),
                        a = t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s;
                    var o = a.create(),
                        r = a.create(),
                        h = a.fromValues(1, 0),
                        l = a.fromValues(0, 1);
                    s.prototype.computeGq = function() {
                        return a.rotate(o, h, this.bodyA.angle + this.angle), a.rotate(r, l, this.bodyB.angle), a.dot(o, r)
                    }
                }, {
                    "../math/vec2": 30,
                    "./Equation": 22
                }
            ],
            25: [
                function(t, e, i) {
                    function s(t, e) {
                        n.call(this, t, e, -Number.MAX_VALUE, Number.MAX_VALUE), this.relativeVelocity = 1, this.ratio = 1
                    }
                    var n = t("./Equation");
                    t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeB = function(t, e, i) {
                        var s = this.G;
                        s[2] = -1, s[5] = this.ratio;
                        var n = this.computeGiMf();
                        return -this.computeGW() * e - i * n
                    }
                }, {
                    "../math/vec2": 30,
                    "./Equation": 22
                }
            ],
            26: [
                function(t, e, i) {
                    var s = function() {};
                    e.exports = s, s.prototype = {
                        constructor: s,
                        on: function(t, e, i) {
                            e.context = i || this, void 0 === this._listeners && (this._listeners = {});
                            var s = this._listeners;
                            return void 0 === s[t] && (s[t] = []), -1 === s[t].indexOf(e) && s[t].push(e), this
                        },
                        has: function(t, e) {
                            if (void 0 === this._listeners) return !1;
                            var i = this._listeners;
                            if (e) {
                                if (void 0 !== i[t] && -1 !== i[t].indexOf(e)) return !0
                            } else if (void 0 !== i[t]) return !0;
                            return !1
                        },
                        off: function(t, e) {
                            if (void 0 === this._listeners) return this;
                            var i = this._listeners,
                                s = i[t].indexOf(e);
                            return -1 !== s && i[t].splice(s, 1), this
                        },
                        emit: function(t) {
                            if (void 0 === this._listeners) return this;
                            var e = this._listeners[t.type];
                            if (void 0 !== e) {
                                t.target = this;
                                for (var i = 0, s = e.length; i < s; i++) {
                                    var n = e[i];
                                    n.call(n.context, t)
                                }
                            }
                            return this
                        }
                    }
                }, {}
            ],
            27: [
                function(t, e, i) {
                    function s(t, e, i) {
                        if (i = i || {}, !(t instanceof n && e instanceof n)) throw new Error("First two arguments must be Material instances.");
                        this.id = s.idCounter++, this.materialA = t, this.materialB = e, this.friction = void 0 !== i.friction ? Number(i.friction) : .3, this.restitution = void 0 !== i.restitution ? Number(i.restitution) : 0, this.stiffness = void 0 !== i.stiffness ? Number(i.stiffness) : a.DEFAULT_STIFFNESS, this.relaxation = void 0 !== i.relaxation ? Number(i.relaxation) : a.DEFAULT_RELAXATION, this.frictionStiffness = void 0 !== i.frictionStiffness ? Number(i.frictionStiffness) : a.DEFAULT_STIFFNESS, this.frictionRelaxation = void 0 !== i.frictionRelaxation ? Number(i.frictionRelaxation) : a.DEFAULT_RELAXATION, this.surfaceVelocity = void 0 !== i.surfaceVelocity ? Number(i.surfaceVelocity) : 0, this.contactSkinSize = .005
                    }
                    var n = t("./Material"),
                        a = t("../equations/Equation");
                    e.exports = s, s.idCounter = 0
                }, {
                    "../equations/Equation": 22,
                    "./Material": 28
                }
            ],
            28: [
                function(t, e, i) {
                    function s(t) {
                        this.id = t || s.idCounter++
                    }
                    e.exports = s, s.idCounter = 0
                }, {}
            ],
            29: [
                function(t, e, i) {
                    var s = {};
                    s.GetArea = function(t) {
                        if (t.length < 6) return 0;
                        for (var e = t.length - 2, i = 0, s = 0; s < e; s += 2) i += (t[s + 2] - t[s]) * (t[s + 1] + t[s + 3]);
                        return .5 * -(i += (t[0] - t[e]) * (t[e + 1] + t[1]))
                    }, s.Triangulate = function(t) {
                        var e = t.length >> 1;
                        if (e < 3) return [];
                        for (var i = [], n = [], a = 0; a < e; a++) n.push(a);
                        for (var a = 0, o = e; o > 3;) {
                            var r = n[(a + 0) % o],
                                h = n[(a + 1) % o],
                                l = n[(a + 2) % o],
                                c = t[2 * r],
                                u = t[2 * r + 1],
                                d = t[2 * h],
                                p = t[2 * h + 1],
                                m = t[2 * l],
                                g = t[2 * l + 1],
                                f = !1;
                            if (s._convex(c, u, d, p, m, g)) {
                                f = !0;
                                for (var _ = 0; _ < o; _++) {
                                    var y = n[_];
                                    if (y != r && y != h && y != l && s._PointInTriangle(t[2 * y], t[2 * y + 1], c, u, d, p, m, g)) {
                                        f = !1;
                                        break
                                    }
                                }
                            }
                            if (f) i.push(r, h, l), n.splice((a + 1) % o, 1), o--, a = 0;
                            else if (a++ > 3 * o) break
                        }
                        return i.push(n[0], n[1], n[2]), i
                    }, s._PointInTriangle = function(t, e, i, s, n, a, o, r) {
                        var h = o - i,
                            l = r - s,
                            c = n - i,
                            u = a - s,
                            d = t - i,
                            p = e - s,
                            m = h * h + l * l,
                            g = h * c + l * u,
                            f = h * d + l * p,
                            _ = c * c + u * u,
                            y = c * d + u * p,
                            v = 1 / (m * _ - g * g),
                            b = (_ * f - g * y) * v,
                            S = (m * y - g * f) * v;
                        return b >= 0 && S >= 0 && b + S < 1
                    }, s._convex = function(t, e, i, s, n, a) {
                        return (e - s) * (n - i) + (i - t) * (a - s) >= 0
                    }, e.exports = s
                }, {}
            ],
            30: [
                function(t, e, i) {
                    var s = e.exports = {},
                        n = t("../utils/Utils");
                    s.crossLength = function(t, e) {
                        return t[0] * e[1] - t[1] * e[0]
                    }, s.crossVZ = function(t, e, i) {
                        return s.rotate(t, e, -Math.PI / 2), s.scale(t, t, i), t
                    }, s.crossZV = function(t, e, i) {
                        return s.rotate(t, i, Math.PI / 2), s.scale(t, t, e), t
                    }, s.rotate = function(t, e, i) {
                        if (0 !== i) {
                            var s = Math.cos(i),
                                n = Math.sin(i),
                                a = e[0],
                                o = e[1];
                            t[0] = s * a - n * o, t[1] = n * a + s * o
                        } else t[0] = e[0], t[1] = e[1]
                    }, s.rotate90cw = function(t, e) {
                        var i = e[0],
                            s = e[1];
                        t[0] = s, t[1] = -i
                    }, s.toLocalFrame = function(t, e, i, n) {
                        s.copy(t, e), s.sub(t, t, i), s.rotate(t, t, -n)
                    }, s.toGlobalFrame = function(t, e, i, n) {
                        s.copy(t, e), s.rotate(t, t, n), s.add(t, t, i)
                    }, s.vectorToLocalFrame = function(t, e, i) {
                        s.rotate(t, e, -i)
                    }, s.vectorToGlobalFrame = function(t, e, i) {
                        s.rotate(t, e, i)
                    }, s.centroid = function(t, e, i, n) {
                        return s.add(t, e, i), s.add(t, t, n), s.scale(t, t, 1 / 3), t
                    }, s.create = function() {
                        var t = new n.ARRAY_TYPE(2);
                        return t[0] = 0, t[1] = 0, t
                    }, s.clone = function(t) {
                        var e = new n.ARRAY_TYPE(2);
                        return e[0] = t[0], e[1] = t[1], e
                    }, s.fromValues = function(t, e) {
                        var i = new n.ARRAY_TYPE(2);
                        return i[0] = t, i[1] = e, i
                    }, s.copy = function(t, e) {
                        return t[0] = e[0], t[1] = e[1], t
                    }, s.set = function(t, e, i) {
                        return t[0] = e, t[1] = i, t
                    }, s.add = function(t, e, i) {
                        return t[0] = e[0] + i[0], t[1] = e[1] + i[1], t
                    }, s.subtract = function(t, e, i) {
                        return t[0] = e[0] - i[0], t[1] = e[1] - i[1], t
                    }, s.sub = s.subtract, s.multiply = function(t, e, i) {
                        return t[0] = e[0] * i[0], t[1] = e[1] * i[1], t
                    }, s.mul = s.multiply, s.divide = function(t, e, i) {
                        return t[0] = e[0] / i[0], t[1] = e[1] / i[1], t
                    }, s.div = s.divide, s.scale = function(t, e, i) {
                        return t[0] = e[0] * i, t[1] = e[1] * i, t
                    }, s.distance = function(t, e) {
                        var i = e[0] - t[0],
                            s = e[1] - t[1];
                        return Math.sqrt(i * i + s * s)
                    }, s.dist = s.distance, s.squaredDistance = function(t, e) {
                        var i = e[0] - t[0],
                            s = e[1] - t[1];
                        return i * i + s * s
                    }, s.sqrDist = s.squaredDistance, s.length = function(t) {
                        var e = t[0],
                            i = t[1];
                        return Math.sqrt(e * e + i * i)
                    }, s.len = s.length, s.squaredLength = function(t) {
                        var e = t[0],
                            i = t[1];
                        return e * e + i * i
                    }, s.sqrLen = s.squaredLength, s.negate = function(t, e) {
                        return t[0] = -e[0], t[1] = -e[1], t
                    }, s.normalize = function(t, e) {
                        var i = e[0],
                            s = e[1],
                            n = i * i + s * s;
                        return n > 0 && (n = 1 / Math.sqrt(n), t[0] = e[0] * n, t[1] = e[1] * n), t
                    }, s.dot = function(t, e) {
                        return t[0] * e[0] + t[1] * e[1]
                    }, s.str = function(t) {
                        return "vec2(" + t[0] + ", " + t[1] + ")"
                    }, s.lerp = function(t, e, i, s) {
                        var n = e[0],
                            a = e[1];
                        return t[0] = n + s * (i[0] - n), t[1] = a + s * (i[1] - a), t
                    }, s.reflect = function(t, e, i) {
                        var s = e[0] * i[0] + e[1] * i[1];
                        t[0] = e[0] - 2 * i[0] * s, t[1] = e[1] - 2 * i[1] * s
                    }, s.getLineSegmentsIntersection = function(t, e, i, n, a) {
                        var o = s.getLineSegmentsIntersectionFraction(e, i, n, a);
                        return !(o < 0) && (t[0] = e[0] + o * (i[0] - e[0]), t[1] = e[1] + o * (i[1] - e[1]), !0)
                    }, s.getLineSegmentsIntersectionFraction = function(t, e, i, s) {
                        var n, a, o = e[0] - t[0],
                            r = e[1] - t[1],
                            h = s[0] - i[0],
                            l = s[1] - i[1];
                        return n = (-r * (t[0] - i[0]) + o * (t[1] - i[1])) / (-h * r + o * l), a = (h * (t[1] - i[1]) - l * (t[0] - i[0])) / (-h * r + o * l), n >= 0 && n <= 1 && a >= 0 && a <= 1 ? a : -1
                    }
                }, {
                    "../utils/Utils": 57
                }
            ],
            31: [
                function(t, e, i) {
                    function s(t) {
                        t = t || {}, c.call(this), this.id = t.id || ++s._idCounter, this.world = null, this.shapes = [], this.mass = t.mass || 0, this.invMass = 0, this.inertia = 0, this.invInertia = 0, this.invMassSolve = 0, this.invInertiaSolve = 0, this.fixedRotation = !!t.fixedRotation, this.fixedX = !!t.fixedX, this.fixedY = !!t.fixedY, this.massMultiplier = n.create(), this.position = n.fromValues(0, 0), t.position && n.copy(this.position, t.position), this.interpolatedPosition = n.fromValues(0, 0), this.interpolatedAngle = 0, this.previousPosition = n.fromValues(0, 0), this.previousAngle = 0, this.velocity = n.fromValues(0, 0), t.velocity && n.copy(this.velocity, t.velocity), this.vlambda = n.fromValues(0, 0), this.wlambda = 0, this.angle = t.angle || 0, this.angularVelocity = t.angularVelocity || 0, this.force = n.create(), t.force && n.copy(this.force, t.force), this.angularForce = t.angularForce || 0, this.damping = "number" == typeof t.damping ? t.damping : .1, this.angularDamping = "number" == typeof t.angularDamping ? t.angularDamping : .1, this.type = s.STATIC, void 0 !== t.type ? this.type = t.type : t.mass ? this.type = s.DYNAMIC : this.type = s.STATIC, this.boundingRadius = 0, this.aabb = new l, this.aabbNeedsUpdate = !0, this.allowSleep = void 0 === t.allowSleep || t.allowSleep, this.wantsToSleep = !1, this.sleepState = s.AWAKE, this.sleepSpeedLimit = void 0 !== t.sleepSpeedLimit ? t.sleepSpeedLimit : .2, this.sleepTimeLimit = void 0 !== t.sleepTimeLimit ? t.sleepTimeLimit : 1, this.gravityScale = void 0 !== t.gravityScale ? t.gravityScale : 1, this.collisionResponse = void 0 === t.collisionResponse || t.collisionResponse, this.idleTime = 0, this.timeLastSleepy = 0, this.ccdSpeedThreshold = void 0 !== t.ccdSpeedThreshold ? t.ccdSpeedThreshold : -1, this.ccdIterations = void 0 !== t.ccdIterations ? t.ccdIterations : 10, this.concavePath = null, this._wakeUpAfterNarrowphase = !1, this.updateMassProperties()
                    }
                    var n = t("../math/vec2"),
                        a = t("poly-decomp"),
                        o = t("../shapes/Convex"),
                        r = t("../collision/RaycastResult"),
                        h = t("../collision/Ray"),
                        l = t("../collision/AABB"),
                        c = t("../events/EventEmitter");
                    e.exports = s, s.prototype = new c, s.prototype.constructor = s, s._idCounter = 0, s.prototype.updateSolveMassProperties = function() {
                        this.sleepState === s.SLEEPING || this.type === s.KINEMATIC ? (this.invMassSolve = 0, this.invInertiaSolve = 0) : (this.invMassSolve = this.invMass, this.invInertiaSolve = this.invInertia)
                    }, s.prototype.setDensity = function(t) {
                        var e = this.getArea();
                        this.mass = e * t, this.updateMassProperties()
                    }, s.prototype.getArea = function() {
                        for (var t = 0, e = 0; e < this.shapes.length; e++) t += this.shapes[e].area;
                        return t
                    }, s.prototype.getAABB = function() {
                        return this.aabbNeedsUpdate && this.updateAABB(), this.aabb
                    };
                    var u = new l,
                        d = n.create();
                    s.prototype.updateAABB = function() {
                        for (var t = this.shapes, e = t.length, i = d, s = this.angle, a = 0; a !== e; a++) {
                            var o = t[a],
                                r = o.angle + s;
                            n.rotate(i, o.position, s), n.add(i, i, this.position), o.computeAABB(u, i, r), 0 === a ? this.aabb.copy(u) : this.aabb.extend(u)
                        }
                        this.aabbNeedsUpdate = !1
                    }, s.prototype.updateBoundingRadius = function() {
                        for (var t = this.shapes, e = t.length, i = 0, s = 0; s !== e; s++) {
                            var a = t[s],
                                o = n.length(a.position),
                                r = a.boundingRadius;
                            o + r > i && (i = o + r)
                        }
                        this.boundingRadius = i
                    }, s.prototype.addShape = function(t, e, i) {
                        if (t.body) throw new Error("A shape can only be added to one body.");
                        t.body = this, e ? n.copy(t.position, e) : n.set(t.position, 0, 0), t.angle = i || 0, this.shapes.push(t), this.updateMassProperties(), this.updateBoundingRadius(), this.aabbNeedsUpdate = !0
                    }, s.prototype.removeShape = function(t) {
                        var e = this.shapes.indexOf(t);
                        return -1 !== e && (this.shapes.splice(e, 1), this.aabbNeedsUpdate = !0, t.body = null, !0)
                    }, s.prototype.updateMassProperties = function() {
                        if (this.type === s.STATIC || this.type === s.KINEMATIC) this.mass = Number.MAX_VALUE, this.invMass = 0, this.inertia = Number.MAX_VALUE, this.invInertia = 0;
                        else {
                            var t = this.shapes,
                                e = t.length,
                                i = this.mass / e,
                                a = 0;
                            if (this.fixedRotation) this.inertia = Number.MAX_VALUE, this.invInertia = 0;
                            else {
                                for (var o = 0; o < e; o++) {
                                    var r = t[o],
                                        h = n.squaredLength(r.position);
                                    a += r.computeMomentOfInertia(i) + i * h
                                }
                                this.inertia = a, this.invInertia = a > 0 ? 1 / a : 0
                            }
                            this.invMass = 1 / this.mass, n.set(this.massMultiplier, this.fixedX ? 0 : 1, this.fixedY ? 0 : 1)
                        }
                    };
                    n.create();
                    s.prototype.applyForce = function(t, e) {
                        if (n.add(this.force, this.force, t), e) {
                            var i = n.crossLength(e, t);
                            this.angularForce += i
                        }
                    };
                    var p = n.create(),
                        m = n.create(),
                        g = n.create();
                    s.prototype.applyForceLocal = function(t, e) {
                        e = e || g;
                        var i = p,
                            s = m;
                        this.vectorToWorldFrame(i, t), this.vectorToWorldFrame(s, e), this.applyForce(i, s)
                    };
                    var f = n.create();
                    s.prototype.applyImpulse = function(t, e) {
                        if (this.type === s.DYNAMIC) {
                            var i = f;
                            if (n.scale(i, t, this.invMass), n.multiply(i, this.massMultiplier, i), n.add(this.velocity, i, this.velocity), e) {
                                var a = n.crossLength(e, t);
                                a *= this.invInertia, this.angularVelocity += a
                            }
                        }
                    };
                    var _ = n.create(),
                        y = n.create(),
                        v = n.create();
                    s.prototype.applyImpulseLocal = function(t, e) {
                        e = e || v;
                        var i = _,
                            s = y;
                        this.vectorToWorldFrame(i, t), this.vectorToWorldFrame(s, e), this.applyImpulse(i, s)
                    }, s.prototype.toLocalFrame = function(t, e) {
                        n.toLocalFrame(t, e, this.position, this.angle)
                    }, s.prototype.toWorldFrame = function(t, e) {
                        n.toGlobalFrame(t, e, this.position, this.angle)
                    }, s.prototype.vectorToLocalFrame = function(t, e) {
                        n.vectorToLocalFrame(t, e, this.angle)
                    }, s.prototype.vectorToWorldFrame = function(t, e) {
                        n.vectorToGlobalFrame(t, e, this.angle)
                    }, s.prototype.fromPolygon = function(t, e) {
                        e = e || {};
                        for (h = this.shapes.length; h >= 0; --h) this.removeShape(this.shapes[h]);
                        var i = new a.Polygon;
                        if (i.vertices = t, i.makeCCW(), "number" == typeof e.removeCollinearPoints && i.removeCollinearPoints(e.removeCollinearPoints), void 0 === e.skipSimpleCheck && !i.isSimple()) return !1;
                        this.concavePath = i.vertices.slice(0);
                        for (h = 0; h < this.concavePath.length; h++) {
                            u = [0, 0];
                            n.copy(u, this.concavePath[h]), this.concavePath[h] = u
                        }
                        var s;
                        s = e.optimalDecomp ? i.decomp() : i.quickDecomp();
                        for (var r = n.create(), h = 0; h !== s.length; h++) {
                            for (var l = new o({
                                vertices: s[h].vertices
                            }), c = 0; c !== l.vertices.length; c++) {
                                var u = l.vertices[c];
                                n.sub(u, u, l.centerOfMass)
                            }
                            n.scale(r, l.centerOfMass, 1), l.updateTriangles(), l.updateCenterOfMass(), l.updateBoundingRadius(), this.addShape(l, r)
                        }
                        return this.adjustCenterOfMass(), this.aabbNeedsUpdate = !0, !0
                    };
                    n.fromValues(0, 0);
                    var b = n.fromValues(0, 0),
                        S = n.fromValues(0, 0),
                        T = n.fromValues(0, 0);
                    s.prototype.adjustCenterOfMass = function() {
                        var t = b,
                            e = S,
                            i = T,
                            s = 0;
                        n.set(e, 0, 0);
                        for (o = 0; o !== this.shapes.length; o++) {
                            a = this.shapes[o];
                            n.scale(t, a.position, a.area), n.add(e, e, t), s += a.area
                        }
                        n.scale(i, e, 1 / s);
                        for (o = 0; o !== this.shapes.length; o++) {
                            var a = this.shapes[o];
                            n.sub(a.position, a.position, i)
                        }
                        n.add(this.position, this.position, i);
                        for (var o = 0; this.concavePath && o < this.concavePath.length; o++) n.sub(this.concavePath[o], this.concavePath[o], i);
                        this.updateMassProperties(), this.updateBoundingRadius()
                    }, s.prototype.setZeroForce = function() {
                        n.set(this.force, 0, 0), this.angularForce = 0
                    }, s.prototype.resetConstraintVelocity = function() {
                        var t = this,
                            e = t.vlambda;
                        n.set(e, 0, 0), t.wlambda = 0
                    }, s.prototype.addConstraintVelocity = function() {
                        var t = this,
                            e = t.velocity;
                        n.add(e, e, t.vlambda), t.angularVelocity += t.wlambda
                    }, s.prototype.applyDamping = function(t) {
                        if (this.type === s.DYNAMIC) {
                            var e = this.velocity;
                            n.scale(e, e, Math.pow(1 - this.damping, t)), this.angularVelocity *= Math.pow(1 - this.angularDamping, t)
                        }
                    }, s.prototype.wakeUp = function() {
                        var t = this.sleepState;
                        this.sleepState = s.AWAKE, this.idleTime = 0, t !== s.AWAKE && this.emit(s.wakeUpEvent)
                    }, s.prototype.sleep = function() {
                        this.sleepState = s.SLEEPING, this.angularVelocity = 0, this.angularForce = 0, n.set(this.velocity, 0, 0), n.set(this.force, 0, 0), this.emit(s.sleepEvent)
                    }, s.prototype.sleepTick = function(t, e, i) {
                        if (this.allowSleep && this.type !== s.SLEEPING) {
                            this.wantsToSleep = !1;
                            this.sleepState;
                            n.squaredLength(this.velocity) + Math.pow(this.angularVelocity, 2) >= Math.pow(this.sleepSpeedLimit, 2) ? (this.idleTime = 0, this.sleepState = s.AWAKE) : (this.idleTime += i, this.sleepState = s.SLEEPY), this.idleTime > this.sleepTimeLimit && (e ? this.wantsToSleep = !0 : this.sleep())
                        }
                    }, s.prototype.overlaps = function(t) {
                        return this.world.overlapKeeper.bodiesAreOverlapping(this, t)
                    };
                    var E = n.create(),
                        P = n.create();
                    s.prototype.integrate = function(t) {
                        var e = this.invMass,
                            i = this.force,
                            s = this.position,
                            a = this.velocity;
                        n.copy(this.previousPosition, this.position), this.previousAngle = this.angle, this.fixedRotation || (this.angularVelocity += this.angularForce * this.invInertia * t), n.scale(E, i, t * e), n.multiply(E, this.massMultiplier, E), n.add(a, E, a), this.integrateToTimeOfImpact(t) || (n.scale(P, a, t), n.add(s, s, P), this.fixedRotation || (this.angle += this.angularVelocity * t)), this.aabbNeedsUpdate = !0
                    };
                    var A = new r,
                        I = new h({
                            mode: h.ALL
                        }),
                        C = n.create(),
                        x = n.create(),
                        w = n.create(),
                        M = n.create();
                    s.prototype.integrateToTimeOfImpact = function(t) {
                        if (this.ccdSpeedThreshold < 0 || n.squaredLength(this.velocity) < Math.pow(this.ccdSpeedThreshold, 2)) return !1;
                        n.normalize(C, this.velocity), n.scale(x, this.velocity, t), n.add(x, x, this.position), n.sub(w, x, this.position);
                        var e, i = this.angularVelocity * t,
                            s = n.length(w),
                            a = 1,
                            o = this;
                        if (A.reset(), I.callback = function(t) {
                            t.body !== o && (e = t.body, t.getHitPoint(x, I), n.sub(w, x, o.position), a = n.length(w) / s, t.stop())
                        }, n.copy(I.from, this.position), n.copy(I.to, x), I.update(), this.world.raycast(A, I), !e) return !1;
                        var r = this.angle;
                        n.copy(M, this.position);
                        for (var h = 0, l = 0, c = 0, u = a; u >= l && h < this.ccdIterations;) h++, c = (u - l) / 2, n.scale(P, w, a), n.add(this.position, M, P), this.angle = r + i * a, this.updateAABB(), this.aabb.overlaps(e.aabb) && this.world.narrowphase.bodiesOverlap(this, e) ? l = c : u = c;
                        return a = c, n.copy(this.position, M), this.angle = r, n.scale(P, w, a), n.add(this.position, this.position, P), this.fixedRotation || (this.angle += i * a), !0
                    }, s.prototype.getVelocityAtPoint = function(t, e) {
                        return n.crossVZ(t, e, this.angularVelocity), n.subtract(t, this.velocity, t), t
                    }, s.sleepyEvent = {
                        type: "sleepy"
                    }, s.sleepEvent = {
                        type: "sleep"
                    }, s.wakeUpEvent = {
                        type: "wakeup"
                    }, s.DYNAMIC = 1, s.STATIC = 2, s.KINEMATIC = 4, s.AWAKE = 0, s.SLEEPY = 1, s.SLEEPING = 2
                }, {
                    "../collision/AABB": 7,
                    "../collision/Ray": 11,
                    "../collision/RaycastResult": 12,
                    "../events/EventEmitter": 26,
                    "../math/vec2": 30,
                    "../shapes/Convex": 40,
                    "poly-decomp": 5
                }
            ],
            32: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, a.call(this, t, e, i), this.localAnchorA = n.fromValues(0, 0), this.localAnchorB = n.fromValues(0, 0), i.localAnchorA && n.copy(this.localAnchorA, i.localAnchorA), i.localAnchorB && n.copy(this.localAnchorB, i.localAnchorB), i.worldAnchorA && this.setWorldAnchorA(i.worldAnchorA), i.worldAnchorB && this.setWorldAnchorB(i.worldAnchorB);
                        var s = n.create(),
                            o = n.create();
                        this.getWorldAnchorA(s), this.getWorldAnchorB(o);
                        var r = n.distance(s, o);
                        this.restLength = "number" == typeof i.restLength ? i.restLength : r
                    }
                    var n = t("../math/vec2"),
                        a = t("./Spring");
                    t("../utils/Utils");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.setWorldAnchorA = function(t) {
                        this.bodyA.toLocalFrame(this.localAnchorA, t)
                    }, s.prototype.setWorldAnchorB = function(t) {
                        this.bodyB.toLocalFrame(this.localAnchorB, t)
                    }, s.prototype.getWorldAnchorA = function(t) {
                        this.bodyA.toWorldFrame(t, this.localAnchorA)
                    }, s.prototype.getWorldAnchorB = function(t) {
                        this.bodyB.toWorldFrame(t, this.localAnchorB)
                    };
                    var o = n.create(),
                        r = n.create(),
                        h = n.create(),
                        l = n.create(),
                        c = n.create(),
                        u = n.create(),
                        d = n.create(),
                        p = n.create(),
                        m = n.create();
                    s.prototype.applyForce = function() {
                        var t = this.stiffness,
                            e = this.damping,
                            i = this.restLength,
                            s = this.bodyA,
                            a = this.bodyB,
                            g = o,
                            f = r,
                            _ = h,
                            y = l,
                            v = m,
                            b = c,
                            S = u,
                            T = d,
                            E = p;
                        this.getWorldAnchorA(b), this.getWorldAnchorB(S), n.sub(T, b, s.position), n.sub(E, S, a.position), n.sub(g, S, b);
                        var P = n.len(g);
                        n.normalize(f, g), n.sub(_, a.velocity, s.velocity), n.crossZV(v, a.angularVelocity, E), n.add(_, _, v), n.crossZV(v, s.angularVelocity, T), n.sub(_, _, v), n.scale(y, f, -t * (P - i) - e * n.dot(_, f)), n.sub(s.force, s.force, y), n.add(a.force, a.force, y);
                        var A = n.crossLength(T, y),
                            I = n.crossLength(E, y);
                        s.angularForce -= A, a.angularForce += I
                    }
                }, {
                    "../math/vec2": 30,
                    "../utils/Utils": 57,
                    "./Spring": 34
                }
            ],
            33: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = i || {}, n.call(this, t, e, i), this.restAngle = "number" == typeof i.restAngle ? i.restAngle : e.angle - t.angle
                    }
                    t("../math/vec2");
                    var n = t("./Spring");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.applyForce = function() {
                        var t = this.stiffness,
                            e = this.damping,
                            i = this.restAngle,
                            s = this.bodyA,
                            n = this.bodyB,
                            a = -t * (n.angle - s.angle - i) - e * (n.angularVelocity - s.angularVelocity) * 0;
                        s.angularForce -= a, n.angularForce += a
                    }
                }, {
                    "../math/vec2": 30,
                    "./Spring": 34
                }
            ],
            34: [
                function(t, e, i) {
                    function s(t, e, i) {
                        i = n.defaults(i, {
                            stiffness: 100,
                            damping: 1
                        }), this.stiffness = i.stiffness, this.damping = i.damping, this.bodyA = t, this.bodyB = e
                    }
                    t("../math/vec2");
                    var n = t("../utils/Utils");
                    e.exports = s, s.prototype.applyForce = function() {}
                }, {
                    "../math/vec2": 30,
                    "../utils/Utils": 57
                }
            ],
            35: [
                function(t, e, i) {
                    function s(t, e) {
                        e = e || {}, this.chassisBody = t, this.wheels = [], this.groundBody = new h({
                            mass: 0
                        }), this.world = null;
                        var i = this;
                        this.preStepCallback = function() {
                            i.update()
                        }
                    }

                    function n(t, e) {
                        e = e || {}, this.vehicle = t, this.forwardEquation = new r(t.chassisBody, t.groundBody), this.sideEquation = new r(t.chassisBody, t.groundBody), this.steerValue = 0, this.engineForce = 0, this.setSideFriction(void 0 !== e.sideFriction ? e.sideFriction : 5), this.localForwardVector = a.fromValues(0, 1), e.localForwardVector && a.copy(this.localForwardVector, e.localForwardVector), this.localPosition = a.fromValues(0, 0), e.localPosition && a.copy(this.localPosition, e.localPosition), o.apply(this, t.chassisBody, t.groundBody), this.equations.push(this.forwardEquation, this.sideEquation), this.setBrakeForce(0)
                    }
                    var a = t("../math/vec2"),
                        o = (t("../utils/Utils"), t("../constraints/Constraint")),
                        r = t("../equations/FrictionEquation"),
                        h = t("../objects/Body");
                    e.exports = s, s.prototype.addToWorld = function(t) {
                        this.world = t, t.addBody(this.groundBody), t.on("preStep", this.preStepCallback);
                        for (var e = 0; e < this.wheels.length; e++) {
                            var i = this.wheels[e];
                            t.addConstraint(i)
                        }
                    }, s.prototype.removeFromWorld = function() {
                        var t = this.world;
                        t.removeBody(this.groundBody), t.off("preStep", this.preStepCallback);
                        for (var e = 0; e < this.wheels.length; e++) {
                            var i = this.wheels[e];
                            t.removeConstraint(i)
                        }
                        this.world = null
                    }, s.prototype.addWheel = function(t) {
                        var e = new n(this, t);
                        return this.wheels.push(e), e
                    }, s.prototype.update = function() {
                        for (var t = 0; t < this.wheels.length; t++) this.wheels[t].update()
                    }, (n.prototype = new o).setBrakeForce = function(t) {
                        this.forwardEquation.setSlipForce(t)
                    }, n.prototype.setSideFriction = function(t) {
                        this.sideEquation.setSlipForce(t)
                    };
                    var l = a.create(),
                        c = a.create();
                    n.prototype.getSpeed = function() {
                        return this.vehicle.chassisBody.vectorToWorldFrame(c, this.localForwardVector), this.vehicle.chassisBody.getVelocityAtPoint(l, c), a.dot(l, c)
                    };
                    var u = a.create();
                    n.prototype.update = function() {
                        this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t, this.localForwardVector), a.rotate(this.sideEquation.t, this.localForwardVector, Math.PI / 2), this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t, this.sideEquation.t), a.rotate(this.forwardEquation.t, this.forwardEquation.t, this.steerValue), a.rotate(this.sideEquation.t, this.sideEquation.t, this.steerValue), this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB, this.localPosition), a.copy(this.sideEquation.contactPointB, this.forwardEquation.contactPointB), this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA, this.localPosition), a.copy(this.sideEquation.contactPointA, this.forwardEquation.contactPointA), a.normalize(u, this.forwardEquation.t), a.scale(u, u, this.engineForce), this.vehicle.chassisBody.applyForce(u, this.forwardEquation.contactPointA)
                    }
                }, {
                    "../constraints/Constraint": 14,
                    "../equations/FrictionEquation": 23,
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "../utils/Utils": 57
                }
            ],
            36: [
                function(t, e, i) {
                    var s = e.exports = {
                        AABB: t("./collision/AABB"),
                        AngleLockEquation: t("./equations/AngleLockEquation"),
                        Body: t("./objects/Body"),
                        Broadphase: t("./collision/Broadphase"),
                        Capsule: t("./shapes/Capsule"),
                        Circle: t("./shapes/Circle"),
                        Constraint: t("./constraints/Constraint"),
                        ContactEquation: t("./equations/ContactEquation"),
                        ContactEquationPool: t("./utils/ContactEquationPool"),
                        ContactMaterial: t("./material/ContactMaterial"),
                        Convex: t("./shapes/Convex"),
                        DistanceConstraint: t("./constraints/DistanceConstraint"),
                        Equation: t("./equations/Equation"),
                        EventEmitter: t("./events/EventEmitter"),
                        FrictionEquation: t("./equations/FrictionEquation"),
                        FrictionEquationPool: t("./utils/FrictionEquationPool"),
                        GearConstraint: t("./constraints/GearConstraint"),
                        GSSolver: t("./solver/GSSolver"),
                        Heightfield: t("./shapes/Heightfield"),
                        Line: t("./shapes/Line"),
                        LockConstraint: t("./constraints/LockConstraint"),
                        Material: t("./material/Material"),
                        Narrowphase: t("./collision/Narrowphase"),
                        NaiveBroadphase: t("./collision/NaiveBroadphase"),
                        Particle: t("./shapes/Particle"),
                        Plane: t("./shapes/Plane"),
                        Pool: t("./utils/Pool"),
                        RevoluteConstraint: t("./constraints/RevoluteConstraint"),
                        PrismaticConstraint: t("./constraints/PrismaticConstraint"),
                        Ray: t("./collision/Ray"),
                        RaycastResult: t("./collision/RaycastResult"),
                        Box: t("./shapes/Box"),
                        RotationalVelocityEquation: t("./equations/RotationalVelocityEquation"),
                        SAPBroadphase: t("./collision/SAPBroadphase"),
                        Shape: t("./shapes/Shape"),
                        Solver: t("./solver/Solver"),
                        Spring: t("./objects/Spring"),
                        TopDownVehicle: t("./objects/TopDownVehicle"),
                        LinearSpring: t("./objects/LinearSpring"),
                        RotationalSpring: t("./objects/RotationalSpring"),
                        Utils: t("./utils/Utils"),
                        World: t("./world/World"),
                        vec2: t("./math/vec2"),
                        version: t("../package.json").version
                    };
                    Object.defineProperty(s, "Rectangle", {
                        get: function() {
                            return this.Box
                        }
                    })
                }, {
                    "../package.json": 6,
                    "./collision/AABB": 7,
                    "./collision/Broadphase": 8,
                    "./collision/NaiveBroadphase": 9,
                    "./collision/Narrowphase": 10,
                    "./collision/Ray": 11,
                    "./collision/RaycastResult": 12,
                    "./collision/SAPBroadphase": 13,
                    "./constraints/Constraint": 14,
                    "./constraints/DistanceConstraint": 15,
                    "./constraints/GearConstraint": 16,
                    "./constraints/LockConstraint": 17,
                    "./constraints/PrismaticConstraint": 18,
                    "./constraints/RevoluteConstraint": 19,
                    "./equations/AngleLockEquation": 20,
                    "./equations/ContactEquation": 21,
                    "./equations/Equation": 22,
                    "./equations/FrictionEquation": 23,
                    "./equations/RotationalVelocityEquation": 25,
                    "./events/EventEmitter": 26,
                    "./material/ContactMaterial": 27,
                    "./material/Material": 28,
                    "./math/vec2": 30,
                    "./objects/Body": 31,
                    "./objects/LinearSpring": 32,
                    "./objects/RotationalSpring": 33,
                    "./objects/Spring": 34,
                    "./objects/TopDownVehicle": 35,
                    "./shapes/Box": 37,
                    "./shapes/Capsule": 38,
                    "./shapes/Circle": 39,
                    "./shapes/Convex": 40,
                    "./shapes/Heightfield": 41,
                    "./shapes/Line": 42,
                    "./shapes/Particle": 43,
                    "./shapes/Plane": 44,
                    "./shapes/Shape": 45,
                    "./solver/GSSolver": 46,
                    "./solver/Solver": 47,
                    "./utils/ContactEquationPool": 48,
                    "./utils/FrictionEquationPool": 49,
                    "./utils/Pool": 55,
                    "./utils/Utils": 57,
                    "./world/World": 61
                }
            ],
            37: [
                function(t, e, i) {
                    function s(t) {
                        "number" == typeof arguments[0] && "number" == typeof arguments[1] && (t = {
                            width: arguments[0],
                            height: arguments[1]
                        }), t = t || {};
                        var e = this.width = t.width || 1,
                            i = this.height = t.height || 1,
                            s = [n.fromValues(-e / 2, -i / 2), n.fromValues(e / 2, -i / 2), n.fromValues(e / 2, i / 2), n.fromValues(-e / 2, i / 2)],
                            r = [n.fromValues(1, 0), n.fromValues(0, 1)];
                        t.vertices = s, t.axes = r, t.type = a.BOX, o.call(this, t)
                    }
                    var n = t("../math/vec2"),
                        a = t("./Shape"),
                        o = t("./Convex");
                    e.exports = s, (s.prototype = new o).constructor = s, s.prototype.computeMomentOfInertia = function(t) {
                        var e = this.width,
                            i = this.height;
                        return t * (i * i + e * e) / 12
                    }, s.prototype.updateBoundingRadius = function() {
                        var t = this.width,
                            e = this.height;
                        this.boundingRadius = Math.sqrt(t * t + e * e) / 2
                    };
                    n.create(), n.create(), n.create(), n.create();
                    s.prototype.computeAABB = function(t, e, i) {
                        t.setFromPoints(this.vertices, e, i, 0)
                    }, s.prototype.updateArea = function() {
                        this.area = this.width * this.height
                    }
                }, {
                    "../math/vec2": 30,
                    "./Convex": 40,
                    "./Shape": 45
                }
            ],
            38: [
                function(t, e, i) {
                    function s(t) {
                        "number" == typeof arguments[0] && "number" == typeof arguments[1] && (t = {
                            length: arguments[0],
                            radius: arguments[1]
                        }), t = t || {}, this.length = t.length || 1, this.radius = t.radius || 1, t.type = n.CAPSULE, n.call(this, t)
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeMomentOfInertia = function(t) {
                        var e = this.radius,
                            i = this.length + e,
                            s = 2 * e;
                        return t * (s * s + i * i) / 12
                    }, s.prototype.updateBoundingRadius = function() {
                        this.boundingRadius = this.radius + this.length / 2
                    }, s.prototype.updateArea = function() {
                        this.area = Math.PI * this.radius * this.radius + 2 * this.radius * this.length
                    };
                    var o = a.create();
                    s.prototype.computeAABB = function(t, e, i) {
                        var s = this.radius;
                        a.set(o, this.length / 2, 0), 0 !== i && a.rotate(o, o, i), a.set(t.upperBound, Math.max(o[0] + s, -o[0] + s), Math.max(o[1] + s, -o[1] + s)), a.set(t.lowerBound, Math.min(o[0] - s, -o[0] - s), Math.min(o[1] - s, -o[1] - s)), a.add(t.lowerBound, t.lowerBound, e), a.add(t.upperBound, t.upperBound, e)
                    };
                    var r = a.create(),
                        h = a.create(),
                        l = a.create(),
                        c = a.create(),
                        u = a.fromValues(0, 1);
                    s.prototype.raycast = function(t, e, i, s) {
                        for (var n = e.from, o = e.to, d = (e.direction, r), p = h, m = l, g = c, f = this.length / 2, _ = 0; _ < 2; _++) {
                            var y = this.radius * (2 * _ - 1);
                            if (a.set(m, -f, y), a.set(g, f, y), a.toGlobalFrame(m, m, i, s), a.toGlobalFrame(g, g, i, s), (E = a.getLineSegmentsIntersectionFraction(n, o, m, g)) >= 0 && (a.rotate(p, u, s), a.scale(p, p, 2 * _ - 1), e.reportIntersection(t, E, p, -1), t.shouldStop(e))) return
                        }
                        for (var v = Math.pow(this.radius, 2) + Math.pow(f, 2), _ = 0; _ < 2; _++) {
                            a.set(m, f * (2 * _ - 1), 0), a.toGlobalFrame(m, m, i, s);
                            var b = Math.pow(o[0] - n[0], 2) + Math.pow(o[1] - n[1], 2),
                                S = 2 * ((o[0] - n[0]) * (n[0] - m[0]) + (o[1] - n[1]) * (n[1] - m[1])),
                                T = Math.pow(n[0] - m[0], 2) + Math.pow(n[1] - m[1], 2) - Math.pow(this.radius, 2),
                                E = Math.pow(S, 2) - 4 * b * T;
                            if (!(E < 0))
                                if (0 === E) {
                                    if (a.lerp(d, n, o, E), a.squaredDistance(d, i) > v && (a.sub(p, d, m), a.normalize(p, p), e.reportIntersection(t, E, p, -1), t.shouldStop(e))) return
                                } else {
                                    var P = Math.sqrt(E),
                                        A = 1 / (2 * b),
                                        I = (-S - P) * A,
                                        C = (-S + P) * A;
                                    if (I >= 0 && I <= 1 && (a.lerp(d, n, o, I), a.squaredDistance(d, i) > v && (a.sub(p, d, m), a.normalize(p, p), e.reportIntersection(t, I, p, -1), t.shouldStop(e)))) return;
                                    if (C >= 0 && C <= 1 && (a.lerp(d, n, o, C), a.squaredDistance(d, i) > v && (a.sub(p, d, m), a.normalize(p, p), e.reportIntersection(t, C, p, -1), t.shouldStop(e)))) return
                                }
                        }
                    }
                }, {
                    "../math/vec2": 30,
                    "./Shape": 45
                }
            ],
            39: [
                function(t, e, i) {
                    function s(t) {
                        "number" == typeof arguments[0] && (t = {
                            radius: arguments[0]
                        }), t = t || {}, this.radius = t.radius || 1, t.type = n.CIRCLE, n.call(this, t)
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeMomentOfInertia = function(t) {
                        var e = this.radius;
                        return t * e * e / 2
                    }, s.prototype.updateBoundingRadius = function() {
                        this.boundingRadius = this.radius
                    }, s.prototype.updateArea = function() {
                        this.area = Math.PI * this.radius * this.radius
                    }, s.prototype.computeAABB = function(t, e, i) {
                        var s = this.radius;
                        a.set(t.upperBound, s, s), a.set(t.lowerBound, -s, -s), e && (a.add(t.lowerBound, t.lowerBound, e), a.add(t.upperBound, t.upperBound, e))
                    };
                    var o = a.create(),
                        r = a.create();
                    s.prototype.raycast = function(t, e, i, s) {
                        var n = e.from,
                            h = e.to,
                            l = this.radius,
                            c = Math.pow(h[0] - n[0], 2) + Math.pow(h[1] - n[1], 2),
                            u = 2 * ((h[0] - n[0]) * (n[0] - i[0]) + (h[1] - n[1]) * (n[1] - i[1])),
                            d = Math.pow(n[0] - i[0], 2) + Math.pow(n[1] - i[1], 2) - Math.pow(l, 2),
                            p = Math.pow(u, 2) - 4 * c * d,
                            m = o,
                            g = r;
                        if (!(p < 0))
                            if (0 === p) a.lerp(m, n, h, p), a.sub(g, m, i), a.normalize(g, g), e.reportIntersection(t, p, g, -1);
                            else {
                                var f = Math.sqrt(p),
                                    _ = 1 / (2 * c),
                                    y = (-u - f) * _,
                                    v = (-u + f) * _;
                                if (y >= 0 && y <= 1 && (a.lerp(m, n, h, y), a.sub(g, m, i), a.normalize(g, g), e.reportIntersection(t, y, g, -1), t.shouldStop(e))) return;
                                v >= 0 && v <= 1 && (a.lerp(m, n, h, v), a.sub(g, m, i), a.normalize(g, g), e.reportIntersection(t, v, g, -1))
                            }
                    }
                }, {
                    "../math/vec2": 30,
                    "./Shape": 45
                }
            ],
            40: [
                function(t, e, i) {
                    function s(t) {
                        Array.isArray(arguments[0]) && (t = {
                            vertices: arguments[0],
                            axes: arguments[1]
                        }), t = t || {}, this.vertices = [];
                        for (var e = void 0 !== t.vertices ? t.vertices : [], i = 0; i < e.length; i++) {
                            var s = a.create();
                            a.copy(s, e[i]), this.vertices.push(s)
                        }
                        if (this.axes = [], t.axes)
                            for (i = 0; i < t.axes.length; i++) {
                                var o = a.create();
                                a.copy(o, t.axes[i]), this.axes.push(o)
                            } else
                                for (i = 0; i < this.vertices.length; i++) {
                                    var r = this.vertices[i],
                                        h = this.vertices[(i + 1) % this.vertices.length],
                                        l = a.create();
                                    a.sub(l, h, r), a.rotate90cw(l, l), a.normalize(l, l), this.axes.push(l)
                                }
                        if (this.centerOfMass = a.fromValues(0, 0), this.triangles = [], this.vertices.length && (this.updateTriangles(), this.updateCenterOfMass()), this.boundingRadius = 0, t.type = n.CONVEX, n.call(this, t), this.updateBoundingRadius(), this.updateArea(), this.area < 0) throw new Error("Convex vertices must be given in conter-clockwise winding.")
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2"),
                        o = t("../math/polyk");
                    t("poly-decomp");
                    e.exports = s, (s.prototype = new n).constructor = s;
                    var r = a.create(),
                        h = a.create();
                    s.prototype.projectOntoLocalAxis = function(t, e) {
                        for (var i, s, n = null, o = null, t = r, h = 0; h < this.vertices.length; h++) i = this.vertices[h], s = a.dot(i, t), (null === n || s > n) && (n = s), (null === o || s < o) && (o = s);
                        if (o > n) {
                            var l = o;
                            o = n, n = l
                        }
                        a.set(e, o, n)
                    }, s.prototype.projectOntoWorldAxis = function(t, e, i, s) {
                        var n = h;
                        this.projectOntoLocalAxis(t, s), 0 !== i ? a.rotate(n, t, i) : n = t;
                        var o = a.dot(e, n);
                        a.set(s, s[0] + o, s[1] + o)
                    }, s.prototype.updateTriangles = function() {
                        this.triangles.length = 0;
                        for (var t = [], e = 0; e < this.vertices.length; e++) {
                            var i = this.vertices[e];
                            t.push(i[0], i[1])
                        }
                        for (var s = o.Triangulate(t), e = 0; e < s.length; e += 3) {
                            var n = s[e],
                                a = s[e + 1],
                                r = s[e + 2];
                            this.triangles.push([n, a, r])
                        }
                    };
                    var l = a.create(),
                        c = a.create(),
                        u = a.create(),
                        d = a.create(),
                        p = a.create();
                    a.create(), a.create(), a.create(), a.create();
                    s.prototype.updateCenterOfMass = function() {
                        var t = this.triangles,
                            e = this.vertices,
                            i = this.centerOfMass,
                            n = l,
                            o = u,
                            r = d,
                            h = p,
                            m = c;
                        a.set(i, 0, 0);
                        for (var g = 0, f = 0; f !== t.length; f++) {
                            var _ = t[f],
                                o = e[_[0]],
                                r = e[_[1]],
                                h = e[_[2]];
                            a.centroid(n, o, r, h);
                            var y = s.triangleArea(o, r, h);
                            g += y, a.scale(m, n, y), a.add(i, i, m)
                        }
                        a.scale(i, i, 1 / g)
                    }, s.prototype.computeMomentOfInertia = function(t) {
                        for (var e = 0, i = 0, s = this.vertices.length, n = s - 1, o = 0; o < s; n = o, o++) {
                            var r = this.vertices[n],
                                h = this.vertices[o],
                                l = Math.abs(a.crossLength(r, h));
                            e += l * (a.dot(h, h) + a.dot(h, r) + a.dot(r, r)), i += l
                        }
                        return t / 6 * (e / i)
                    }, s.prototype.updateBoundingRadius = function() {
                        for (var t = this.vertices, e = 0, i = 0; i !== t.length; i++) {
                            var s = a.squaredLength(t[i]);
                            s > e && (e = s)
                        }
                        this.boundingRadius = Math.sqrt(e)
                    }, s.triangleArea = function(t, e, i) {
                        return .5 * ((e[0] - t[0]) * (i[1] - t[1]) - (i[0] - t[0]) * (e[1] - t[1]))
                    }, s.prototype.updateArea = function() {
                        this.updateTriangles(), this.area = 0;
                        for (var t = this.triangles, e = this.vertices, i = 0; i !== t.length; i++) {
                            var n = t[i],
                                a = e[n[0]],
                                o = e[n[1]],
                                r = e[n[2]],
                                h = s.triangleArea(a, o, r);
                            this.area += h
                        }
                    }, s.prototype.computeAABB = function(t, e, i) {
                        t.setFromPoints(this.vertices, e, i, 0)
                    };
                    var m = a.create(),
                        g = a.create(),
                        f = a.create();
                    s.prototype.raycast = function(t, e, i, s) {
                        var n = m,
                            o = g,
                            r = f,
                            h = this.vertices;
                        a.toLocalFrame(n, e.from, i, s), a.toLocalFrame(o, e.to, i, s);
                        for (var l = h.length, c = 0; c < l && !t.shouldStop(e); c++) {
                            var u = h[c],
                                d = h[(c + 1) % l],
                                p = a.getLineSegmentsIntersectionFraction(n, o, u, d);
                            p >= 0 && (a.sub(r, d, u), a.rotate(r, r, -Math.PI / 2 + s), a.normalize(r, r), e.reportIntersection(t, p, r, c))
                        }
                    }
                }, {
                    "../math/polyk": 29,
                    "../math/vec2": 30,
                    "./Shape": 45,
                    "poly-decomp": 5
                }
            ],
            41: [
                function(t, e, i) {
                    function s(t) {
                        if (Array.isArray(arguments[0]) && (t = {
                            heights: arguments[0]
                        }, "object" == typeof arguments[1]))
                            for (var e in arguments[1]) t[e] = arguments[1][e];
                        t = t || {}, this.heights = t.heights ? t.heights.slice(0) : [], this.maxValue = t.maxValue || null, this.minValue = t.minValue || null, this.elementWidth = t.elementWidth || .1, void 0 !== t.maxValue && void 0 !== t.minValue || this.updateMaxMinValues(), t.type = n.HEIGHTFIELD, n.call(this, t)
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2");
                    t("../utils/Utils");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.updateMaxMinValues = function() {
                        for (var t = this.heights, e = t[0], i = t[0], s = 0; s !== t.length; s++) {
                            var n = t[s];
                            n > e && (e = n), n < i && (i = n)
                        }
                        this.maxValue = e, this.minValue = i
                    }, s.prototype.computeMomentOfInertia = function(t) {
                        return Number.MAX_VALUE
                    }, s.prototype.updateBoundingRadius = function() {
                        this.boundingRadius = Number.MAX_VALUE
                    }, s.prototype.updateArea = function() {
                        for (var t = this.heights, e = 0, i = 0; i < t.length - 1; i++) e += (t[i] + t[i + 1]) / 2 * this.elementWidth;
                        this.area = e
                    };
                    var o = [a.create(), a.create(), a.create(), a.create()];
                    s.prototype.computeAABB = function(t, e, i) {
                        a.set(o[0], 0, this.maxValue), a.set(o[1], this.elementWidth * this.heights.length, this.maxValue), a.set(o[2], this.elementWidth * this.heights.length, this.minValue), a.set(o[3], 0, this.minValue), t.setFromPoints(o, e, i)
                    }, s.prototype.getLineSegment = function(t, e, i) {
                        var s = this.heights,
                            n = this.elementWidth;
                        a.set(t, i * n, s[i]), a.set(e, (i + 1) * n, s[i + 1])
                    }, s.prototype.getSegmentIndex = function(t) {
                        return Math.floor(t[0] / this.elementWidth)
                    }, s.prototype.getClampedSegmentIndex = function(t) {
                        var e = this.getSegmentIndex(t);
                        return e = Math.min(this.heights.length, Math.max(e, 0))
                    };
                    a.create();
                    var r = a.create(),
                        h = a.create(),
                        l = a.create(),
                        c = a.create(),
                        u = a.create();
                    a.fromValues(0, 1);
                    s.prototype.raycast = function(t, e, i, s) {
                        var n = e.from,
                            o = e.to,
                            d = (e.direction, r),
                            p = h,
                            m = l,
                            g = c,
                            f = u;
                        a.toLocalFrame(g, n, i, s), a.toLocalFrame(f, o, i, s);
                        var _ = this.getClampedSegmentIndex(g),
                            y = this.getClampedSegmentIndex(f);
                        if (_ > y) {
                            var v = _;
                            _ = y, y = v
                        }
                        for (var b = 0; b < this.heights.length - 1; b++) {
                            this.getLineSegment(p, m, b);
                            var S = a.getLineSegmentsIntersectionFraction(g, f, p, m);
                            if (S >= 0 && (a.sub(d, m, p), a.rotate(d, d, s + Math.PI / 2), a.normalize(d, d), e.reportIntersection(t, S, d, -1), t.shouldStop(e))) return
                        }
                    }
                }, {
                    "../math/vec2": 30,
                    "../utils/Utils": 57,
                    "./Shape": 45
                }
            ],
            42: [
                function(t, e, i) {
                    function s(t) {
                        "number" == typeof arguments[0] && (t = {
                            length: arguments[0]
                        }), t = t || {}, this.length = t.length || 1, t.type = n.LINE, n.call(this, t)
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeMomentOfInertia = function(t) {
                        return t * Math.pow(this.length, 2) / 12
                    }, s.prototype.updateBoundingRadius = function() {
                        this.boundingRadius = this.length / 2
                    };
                    var o = [a.create(), a.create()];
                    s.prototype.computeAABB = function(t, e, i) {
                        var s = this.length / 2;
                        a.set(o[0], -s, 0), a.set(o[1], s, 0), t.setFromPoints(o, e, i, 0)
                    };
                    a.create();
                    var r = a.create(),
                        h = a.create(),
                        l = a.create(),
                        c = a.fromValues(0, 1);
                    s.prototype.raycast = function(t, e, i, s) {
                        var n = e.from,
                            o = e.to,
                            u = h,
                            d = l,
                            p = this.length / 2;
                        a.set(u, -p, 0), a.set(d, p, 0), a.toGlobalFrame(u, u, i, s), a.toGlobalFrame(d, d, i, s);
                        var m = a.getLineSegmentsIntersectionFraction(u, d, n, o);
                        if (m >= 0) {
                            var g = r;
                            a.rotate(g, c, s), e.reportIntersection(t, m, g, -1)
                        }
                    }
                }, {
                    "../math/vec2": 30,
                    "./Shape": 45
                }
            ],
            43: [
                function(t, e, i) {
                    function s(t) {
                        (t = t || {}).type = n.PARTICLE, n.call(this, t)
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeMomentOfInertia = function(t) {
                        return 0
                    }, s.prototype.updateBoundingRadius = function() {
                        this.boundingRadius = 0
                    }, s.prototype.computeAABB = function(t, e, i) {
                        a.copy(t.lowerBound, e), a.copy(t.upperBound, e)
                    }
                }, {
                    "../math/vec2": 30,
                    "./Shape": 45
                }
            ],
            44: [
                function(t, e, i) {
                    function s(t) {
                        (t = t || {}).type = n.PLANE, n.call(this, t)
                    }
                    var n = t("./Shape"),
                        a = t("../math/vec2");
                    t("../utils/Utils");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.computeMomentOfInertia = function(t) {
                        return 0
                    }, s.prototype.updateBoundingRadius = function() {
                        this.boundingRadius = Number.MAX_VALUE
                    }, s.prototype.computeAABB = function(t, e, i) {
                        var s = i % (2 * Math.PI),
                            n = a.set,
                            o = Number.MAX_VALUE,
                            r = t.lowerBound,
                            h = t.upperBound;
                        0 === s ? (n(r, -o, -o), n(h, o, 0)) : s === Math.PI / 2 ? (n(r, 0, -o), n(h, o, o)) : s === Math.PI ? (n(r, -o, 0), n(h, o, o)) : s === 3 * Math.PI / 2 ? (n(r, -o, -o), n(h, 0, o)) : (n(r, -o, -o), n(h, o, o)), a.add(r, r, e), a.add(h, h, e)
                    }, s.prototype.updateArea = function() {
                        this.area = Number.MAX_VALUE
                    };
                    var o = a.create(),
                        r = (a.create(), a.create(), a.create()),
                        h = a.create();
                    s.prototype.raycast = function(t, e, i, s) {
                        var n = e.from,
                            l = e.to,
                            c = e.direction,
                            u = o,
                            d = r,
                            p = h;
                        a.set(d, 0, 1), a.rotate(d, d, s), a.sub(p, n, i);
                        var m = a.dot(p, d);
                        if (a.sub(p, l, i), !(m * a.dot(p, d) > 0 || a.squaredDistance(n, l) < m * m)) {
                            var g = a.dot(d, c);
                            a.sub(u, n, i);
                            var f = -a.dot(d, u) / g / e.length;
                            e.reportIntersection(t, f, d, -1)
                        }
                    }
                }, {
                    "../math/vec2": 30,
                    "../utils/Utils": 57,
                    "./Shape": 45
                }
            ],
            45: [
                function(t, e, i) {
                    function s(t) {
                        t = t || {}, this.body = null, this.position = n.fromValues(0, 0), t.position && n.copy(this.position, t.position), this.angle = t.angle || 0, this.type = t.type || 0, this.id = s.idCounter++, this.boundingRadius = 0, this.collisionGroup = void 0 !== t.collisionGroup ? t.collisionGroup : 1, this.collisionResponse = void 0 === t.collisionResponse || t.collisionResponse, this.collisionMask = void 0 !== t.collisionMask ? t.collisionMask : 1, this.material = t.material || null, this.area = 0, this.sensor = void 0 !== t.sensor && t.sensor, this.type && this.updateBoundingRadius(), this.updateArea()
                    }
                    e.exports = s;
                    var n = t("../math/vec2");
                    s.idCounter = 0, s.CIRCLE = 1, s.PARTICLE = 2, s.PLANE = 4, s.CONVEX = 8, s.LINE = 16, s.BOX = 32, Object.defineProperty(s, "RECTANGLE", {
                        get: function() {
                            return s.BOX
                        }
                    }), s.CAPSULE = 64, s.HEIGHTFIELD = 128, s.prototype.computeMomentOfInertia = function(t) {}, s.prototype.updateBoundingRadius = function() {}, s.prototype.updateArea = function() {}, s.prototype.computeAABB = function(t, e, i) {}, s.prototype.raycast = function(t, e, i, s) {}
                }, {
                    "../math/vec2": 30
                }
            ],
            46: [
                function(t, e, i) {
                    function s(t) {
                        o.call(this, t, o.GS), t = t || {}, this.iterations = t.iterations || 10, this.tolerance = t.tolerance || 1e-7, this.arrayStep = 30, this.lambda = new r.ARRAY_TYPE(this.arrayStep), this.Bs = new r.ARRAY_TYPE(this.arrayStep), this.invCs = new r.ARRAY_TYPE(this.arrayStep), this.useZeroRHS = !1, this.frictionIterations = 0, this.usedIterations = 0
                    }

                    function n(t) {
                        for (var e = t.length; e--;) t[e] = 0
                    }
                    var a = t("../math/vec2"),
                        o = t("./Solver"),
                        r = t("../utils/Utils"),
                        h = t("../equations/FrictionEquation");
                    e.exports = s, (s.prototype = new o).constructor = s, s.prototype.solve = function(t, e) {
                        this.sortEquations();
                        var i = 0,
                            o = this.iterations,
                            l = this.frictionIterations,
                            c = this.equations,
                            u = c.length,
                            d = Math.pow(this.tolerance * u, 2),
                            p = e.bodies,
                            m = e.bodies.length,
                            g = (a.add, a.set, this.useZeroRHS),
                            f = this.lambda;
                        if (this.usedIterations = 0, u)
                            for (v = 0; v !== m; v++)(E = p[v]).updateSolveMassProperties();
                        f.length < u && (f = this.lambda = new r.ARRAY_TYPE(u + this.arrayStep), this.Bs = new r.ARRAY_TYPE(u + this.arrayStep), this.invCs = new r.ARRAY_TYPE(u + this.arrayStep)), n(f);
                        for (var _ = this.invCs, y = this.Bs, f = this.lambda, v = 0; v !== c.length; v++)((b = c[v]).timeStep !== t || b.needsUpdate) && (b.timeStep = t, b.update()), y[v] = b.computeB(b.a, b.b, t), _[v] = b.computeInvC(b.epsilon);
                        var b, S, T;
                        if (0 !== u) {
                            for (v = 0; v !== m; v++) {
                                var E = p[v];
                                E.resetConstraintVelocity()
                            }
                            if (l) {
                                for (i = 0; i !== l; i++) {
                                    for (S = 0, T = 0; T !== u; T++) {
                                        b = c[T];
                                        C = s.iterateEquation(T, b, b.epsilon, y, _, f, g, t, i);
                                        S += Math.abs(C)
                                    }
                                    if (this.usedIterations++, S * S <= d) break
                                }
                                for (s.updateMultipliers(c, f, 1 / t), T = 0; T !== u; T++) {
                                    var P = c[T];
                                    if (P instanceof h) {
                                        for (var A = 0, I = 0; I !== P.contactEquations.length; I++) A += P.contactEquations[I].multiplier;
                                        A *= P.frictionCoefficient / P.contactEquations.length, P.maxForce = A, P.minForce = -A
                                    }
                                }
                            }
                            for (i = 0; i !== o; i++) {
                                for (S = 0, T = 0; T !== u; T++) {
                                    b = c[T];
                                    var C = s.iterateEquation(T, b, b.epsilon, y, _, f, g, t, i);
                                    S += Math.abs(C)
                                }
                                if (this.usedIterations++, S * S <= d) break
                            }
                            for (v = 0; v !== m; v++) p[v].addConstraintVelocity();
                            s.updateMultipliers(c, f, 1 / t)
                        }
                    }, s.updateMultipliers = function(t, e, i) {
                        for (var s = t.length; s--;) t[s].multiplier = e[s] * i
                    }, s.iterateEquation = function(t, e, i, s, n, a, o, r, h) {
                        var l = s[t],
                            c = n[t],
                            u = a[t],
                            d = e.computeGWlambda(),
                            p = e.maxForce,
                            m = e.minForce;
                        o && (l = 0);
                        var g = c * (l - d - i * u),
                            f = u + g;
                        return f < m * r ? g = m * r - u : f > p * r && (g = p * r - u), a[t] += g, e.addToWlambda(g), g
                    }
                }, {
                    "../equations/FrictionEquation": 23,
                    "../math/vec2": 30,
                    "../utils/Utils": 57,
                    "./Solver": 47
                }
            ],
            47: [
                function(t, e, i) {
                    function s(t, e) {
                        t = t || {}, n.call(this), this.type = e, this.equations = [], this.equationSortFunction = t.equationSortFunction || !1
                    }
                    t("../utils/Utils");
                    var n = t("../events/EventEmitter");
                    e.exports = s, (s.prototype = new n).constructor = s, s.prototype.solve = function(t, e) {
                        throw new Error("Solver.solve should be implemented by subclasses!")
                    };
                    var a = {
                        bodies: []
                    };
                    s.prototype.solveIsland = function(t, e) {
                        this.removeAllEquations(), e.equations.length && (this.addEquations(e.equations), a.bodies.length = 0, e.getBodies(a.bodies), a.bodies.length && this.solve(t, a))
                    }, s.prototype.sortEquations = function() {
                        this.equationSortFunction && this.equations.sort(this.equationSortFunction)
                    }, s.prototype.addEquation = function(t) {
                        t.enabled && this.equations.push(t)
                    }, s.prototype.addEquations = function(t) {
                        for (var e = 0, i = t.length; e !== i; e++) {
                            var s = t[e];
                            s.enabled && this.equations.push(s)
                        }
                    }, s.prototype.removeEquation = function(t) {
                        var e = this.equations.indexOf(t); - 1 !== e && this.equations.splice(e, 1)
                    }, s.prototype.removeAllEquations = function() {
                        this.equations.length = 0
                    }, s.GS = 1, s.ISLAND = 2
                }, {
                    "../events/EventEmitter": 26,
                    "../utils/Utils": 57
                }
            ],
            48: [
                function(t, e, i) {
                    function s() {
                        a.apply(this, arguments)
                    }
                    var n = t("../equations/ContactEquation"),
                        a = t("./Pool");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.create = function() {
                        return new n
                    }, s.prototype.destroy = function(t) {
                        return t.bodyA = t.bodyB = null, this
                    }
                }, {
                    "../equations/ContactEquation": 21,
                    "./Pool": 55
                }
            ],
            49: [
                function(t, e, i) {
                    function s() {
                        a.apply(this, arguments)
                    }
                    var n = t("../equations/FrictionEquation"),
                        a = t("./Pool");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.create = function() {
                        return new n
                    }, s.prototype.destroy = function(t) {
                        return t.bodyA = t.bodyB = null, this
                    }
                }, {
                    "../equations/FrictionEquation": 23,
                    "./Pool": 55
                }
            ],
            50: [
                function(t, e, i) {
                    function s() {
                        a.apply(this, arguments)
                    }
                    var n = t("../world/IslandNode"),
                        a = t("./Pool");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.create = function() {
                        return new n
                    }, s.prototype.destroy = function(t) {
                        return t.reset(), this
                    }
                }, {
                    "../world/IslandNode": 60,
                    "./Pool": 55
                }
            ],
            51: [
                function(t, e, i) {
                    function s() {
                        a.apply(this, arguments)
                    }
                    var n = t("../world/Island"),
                        a = t("./Pool");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.create = function() {
                        return new n
                    }, s.prototype.destroy = function(t) {
                        return t.reset(), this
                    }
                }, {
                    "../world/Island": 58,
                    "./Pool": 55
                }
            ],
            52: [
                function(t, e, i) {
                    function s() {
                        this.overlappingShapesLastState = new n, this.overlappingShapesCurrentState = new n, this.recordPool = new a({
                            size: 16
                        }), this.tmpDict = new n, this.tmpArray1 = []
                    }
                    var n = t("./TupleDictionary"),
                        a = (t("./OverlapKeeperRecord"), t("./OverlapKeeperRecordPool"));
                    t("./Utils");
                    e.exports = s, s.prototype.tick = function() {
                        for (var t = this.overlappingShapesLastState, e = this.overlappingShapesCurrentState, i = t.keys.length; i--;) {
                            var s = t.keys[i],
                                n = t.getByKey(s);
                            e.getByKey(s);
                            n && this.recordPool.release(n)
                        }
                        t.reset(), t.copy(e), e.reset()
                    }, s.prototype.setOverlapping = function(t, e, i, s) {
                        this.overlappingShapesLastState;
                        var n = this.overlappingShapesCurrentState;
                        if (!n.get(e.id, s.id)) {
                            var a = this.recordPool.get();
                            a.set(t, e, i, s), n.set(e.id, s.id, a)
                        }
                    }, s.prototype.getNewOverlaps = function(t) {
                        return this.getDiff(this.overlappingShapesLastState, this.overlappingShapesCurrentState, t)
                    }, s.prototype.getEndOverlaps = function(t) {
                        return this.getDiff(this.overlappingShapesCurrentState, this.overlappingShapesLastState, t)
                    }, s.prototype.bodiesAreOverlapping = function(t, e) {
                        for (var i = this.overlappingShapesCurrentState, s = i.keys.length; s--;) {
                            var n = i.keys[s],
                                a = i.data[n];
                            if (a.bodyA === t && a.bodyB === e || a.bodyA === e && a.bodyB === t) return !0
                        }
                        return !1
                    }, s.prototype.getDiff = function(t, e, i) {
                        var s = t,
                            n = e;
                        (i = i || []).length = 0;
                        for (var a = n.keys.length; a--;) {
                            var o = n.keys[a],
                                r = n.data[o];
                            if (!r) throw new Error("Key " + o + " had no data!");
                            s.data[o] || i.push(r)
                        }
                        return i
                    }, s.prototype.isNewOverlap = function(t, e) {
                        var i = 0 | t.id,
                            s = 0 | e.id,
                            n = this.overlappingShapesLastState,
                            a = this.overlappingShapesCurrentState;
                        return !n.get(i, s) && !!a.get(i, s)
                    }, s.prototype.getNewBodyOverlaps = function(t) {
                        this.tmpArray1.length = 0;
                        var e = this.getNewOverlaps(this.tmpArray1);
                        return this.getBodyDiff(e, t)
                    }, s.prototype.getEndBodyOverlaps = function(t) {
                        this.tmpArray1.length = 0;
                        var e = this.getEndOverlaps(this.tmpArray1);
                        return this.getBodyDiff(e, t)
                    }, s.prototype.getBodyDiff = function(t, e) {
                        e = e || [];
                        for (var i = this.tmpDict, s = t.length; s--;) {
                            var n = t[s];
                            i.set(0 | n.bodyA.id, 0 | n.bodyB.id, n)
                        }
                        for (s = i.keys.length; s--;)(n = i.getByKey(i.keys[s])) && e.push(n.bodyA, n.bodyB);
                        return i.reset(), e
                    }
                }, {
                    "./OverlapKeeperRecord": 53,
                    "./OverlapKeeperRecordPool": 54,
                    "./TupleDictionary": 56,
                    "./Utils": 57
                }
            ],
            53: [
                function(t, e, i) {
                    function s(t, e, i, s) {
                        this.shapeA = e, this.shapeB = s, this.bodyA = t, this.bodyB = i
                    }
                    e.exports = s, s.prototype.set = function(t, e, i, n) {
                        s.call(this, t, e, i, n)
                    }
                }, {}
            ],
            54: [
                function(t, e, i) {
                    function s() {
                        a.apply(this, arguments)
                    }
                    var n = t("./OverlapKeeperRecord"),
                        a = t("./Pool");
                    e.exports = s, (s.prototype = new a).constructor = s, s.prototype.create = function() {
                        return new n
                    }, s.prototype.destroy = function(t) {
                        return t.bodyA = t.bodyB = t.shapeA = t.shapeB = null, this
                    }
                }, {
                    "./OverlapKeeperRecord": 53,
                    "./Pool": 55
                }
            ],
            55: [
                function(t, e, i) {
                    function s(t) {
                        t = t || {}, this.objects = [], void 0 !== t.size && this.resize(t.size)
                    }
                    e.exports = s, s.prototype.resize = function(t) {
                        for (var e = this.objects; e.length > t;) e.pop();
                        for (; e.length < t;) e.push(this.create());
                        return this
                    }, s.prototype.get = function() {
                        var t = this.objects;
                        return t.length ? t.pop() : this.create()
                    }, s.prototype.release = function(t) {
                        return this.destroy(t), this.objects.push(t), this
                    }
                }, {}
            ],
            56: [
                function(t, e, i) {
                    function s() {
                        this.data = {}, this.keys = []
                    }
                    var n = t("./Utils");
                    e.exports = s, s.prototype.getKey = function(t, e) {
                        return t |= 0, e |= 0, (0 | t) == (0 | e) ? -1 : 0 | ((0 | t) > (0 | e) ? t << 16 | 65535 & e : e << 16 | 65535 & t)
                    }, s.prototype.getByKey = function(t) {
                        return t |= 0, this.data[t]
                    }, s.prototype.get = function(t, e) {
                        return this.data[this.getKey(t, e)]
                    }, s.prototype.set = function(t, e, i) {
                        if (!i) throw new Error("No data!");
                        var s = this.getKey(t, e);
                        return this.data[s] || this.keys.push(s), this.data[s] = i, s
                    }, s.prototype.reset = function() {
                        for (var t = this.data, e = this.keys, i = e.length; i--;) delete t[e[i]];
                        e.length = 0
                    }, s.prototype.copy = function(t) {
                        this.reset(), n.appendArray(this.keys, t.keys);
                        for (var e = t.keys.length; e--;) {
                            var i = t.keys[e];
                            this.data[i] = t.data[i]
                        }
                    }
                }, {
                    "./Utils": 57
                }
            ],
            57: [
                function(t, e, i) {
                    function s() {}
                    e.exports = s, s.appendArray = function(t, e) {
                        if (e.length < 15e4) t.push.apply(t, e);
                        else
                            for (var i = 0, s = e.length; i !== s; ++i) t.push(e[i])
                    }, s.splice = function(t, e, i) {
                        i = i || 1;
                        for (var s = e, n = t.length - i; s < n; s++) t[s] = t[s + i];
                        t.length = n
                    }, s.ARRAY_TYPE = "undefined" != typeof P2_ARRAY_TYPE ? P2_ARRAY_TYPE : "undefined" != typeof Float32Array ? Float32Array : Array, s.extend = function(t, e) {
                        for (var i in e) t[i] = e[i]
                    }, s.defaults = function(t, e) {
                        t = t || {};
                        for (var i in e) i in t || (t[i] = e[i]);
                        return t
                    }
                }, {}
            ],
            58: [
                function(t, e, i) {
                    function s() {
                        this.equations = [], this.bodies = []
                    }
                    var n = t("../objects/Body");
                    e.exports = s, s.prototype.reset = function() {
                        this.equations.length = this.bodies.length = 0
                    };
                    var a = [];
                    s.prototype.getBodies = function(t) {
                        var e = t || [],
                            i = this.equations;
                        a.length = 0;
                        for (var s = 0; s !== i.length; s++) {
                            var n = i[s]; - 1 === a.indexOf(n.bodyA.id) && (e.push(n.bodyA), a.push(n.bodyA.id)), -1 === a.indexOf(n.bodyB.id) && (e.push(n.bodyB), a.push(n.bodyB.id))
                        }
                        return e
                    }, s.prototype.wantsToSleep = function() {
                        for (var t = 0; t < this.bodies.length; t++) {
                            var e = this.bodies[t];
                            if (e.type === n.DYNAMIC && !e.wantsToSleep) return !1
                        }
                        return !0
                    }, s.prototype.sleep = function() {
                        for (var t = 0; t < this.bodies.length; t++) this.bodies[t].sleep();
                        return !0
                    }
                }, {
                    "../objects/Body": 31
                }
            ],
            59: [
                function(t, e, i) {
                    function s(t) {
                        this.nodePool = new n({
                            size: 16
                        }), this.islandPool = new a({
                            size: 8
                        }), this.equations = [], this.islands = [], this.nodes = [], this.queue = []
                    }
                    t("../math/vec2"), t("./Island"), t("./IslandNode");
                    var n = t("./../utils/IslandNodePool"),
                        a = t("./../utils/IslandPool"),
                        o = t("../objects/Body");
                    e.exports = s, s.getUnvisitedNode = function(t) {
                        for (var e = t.length, i = 0; i !== e; i++) {
                            var s = t[i];
                            if (!s.visited && s.body.type === o.DYNAMIC) return s
                        }
                        return !1
                    }, s.prototype.visit = function(t, e, i) {
                        e.push(t.body);
                        for (var s = t.equations.length, n = 0; n !== s; n++) {
                            var a = t.equations[n]; - 1 === i.indexOf(a) && i.push(a)
                        }
                    }, s.prototype.bfs = function(t, e, i) {
                        var n = this.queue;
                        for (n.length = 0, n.push(t), t.visited = !0, this.visit(t, e, i); n.length;)
                            for (var a, r = n.pop(); a = s.getUnvisitedNode(r.neighbors);) a.visited = !0, this.visit(a, e, i), a.body.type === o.DYNAMIC && n.push(a)
                    }, s.prototype.split = function(t) {
                        for (var e = t.bodies, i = this.nodes, n = this.equations; i.length;) this.nodePool.release(i.pop());
                        for (h = 0; h !== e.length; h++) {
                            var a = this.nodePool.get();
                            a.body = e[h], i.push(a)
                        }
                        for (var o = 0; o !== n.length; o++) {
                            var r = n[o],
                                h = e.indexOf(r.bodyA),
                                l = e.indexOf(r.bodyB),
                                c = i[h],
                                u = i[l];
                            c.neighbors.push(u), u.neighbors.push(c), c.equations.push(r), u.equations.push(r)
                        }
                        for (var d = this.islands, h = 0; h < d.length; h++) this.islandPool.release(d[h]);
                        d.length = 0;
                        for (var p; p = s.getUnvisitedNode(i);) {
                            var m = this.islandPool.get();
                            this.bfs(p, m.bodies, m.equations), d.push(m)
                        }
                        return d
                    }
                }, {
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "./../utils/IslandNodePool": 50,
                    "./../utils/IslandPool": 51,
                    "./Island": 58,
                    "./IslandNode": 60
                }
            ],
            60: [
                function(t, e, i) {
                    function s(t) {
                        this.body = t, this.neighbors = [], this.equations = [], this.visited = !1
                    }
                    e.exports = s, s.prototype.reset = function() {
                        this.equations.length = 0, this.neighbors.length = 0, this.visited = !1, this.body = null
                    }
                }, {}
            ],
            61: [
                function(t, e, i) {
                    function s(t) {
                        u.apply(this), t = t || {}, this.springs = [], this.bodies = [], this.disabledBodyCollisionPairs = [], this.solver = t.solver || new n, this.narrowphase = new _(this), this.islandManager = new b, this.gravity = a.fromValues(0, -9.78), t.gravity && a.copy(this.gravity, t.gravity), this.frictionGravity = a.length(this.gravity) || 10, this.useWorldGravityAsFrictionGravity = !0, this.useFrictionGravityOnZeroGravity = !0, this.broadphase = t.broadphase || new f, this.broadphase.setWorld(this), this.constraints = [], this.defaultMaterial = new p, this.defaultContactMaterial = new m(this.defaultMaterial, this.defaultMaterial), this.lastTimeStep = 1 / 60, this.applySpringForces = !0, this.applyDamping = !0, this.applyGravity = !0, this.solveConstraints = !0, this.contactMaterials = [], this.time = 0, this.accumulator = 0, this.stepping = !1, this.bodiesToBeRemoved = [], this.islandSplit = void 0 === t.islandSplit || !!t.islandSplit, this.emitImpactEvent = !0, this._constraintIdCounter = 0, this._bodyIdCounter = 0, this.postStepEvent = {
                            type: "postStep"
                        }, this.addBodyEvent = {
                            type: "addBody",
                            body: null
                        }, this.removeBodyEvent = {
                            type: "removeBody",
                            body: null
                        }, this.addSpringEvent = {
                            type: "addSpring",
                            spring: null
                        }, this.impactEvent = {
                            type: "impact",
                            bodyA: null,
                            bodyB: null,
                            shapeA: null,
                            shapeB: null,
                            contactEquation: null
                        }, this.postBroadphaseEvent = {
                            type: "postBroadphase",
                            pairs: null
                        }, this.sleepMode = s.NO_SLEEPING, this.beginContactEvent = {
                            type: "beginContact",
                            shapeA: null,
                            shapeB: null,
                            bodyA: null,
                            bodyB: null,
                            contactEquations: []
                        }, this.endContactEvent = {
                            type: "endContact",
                            shapeA: null,
                            shapeB: null,
                            bodyA: null,
                            bodyB: null
                        }, this.preSolveEvent = {
                            type: "preSolve",
                            contactEquations: null,
                            frictionEquations: null
                        }, this.overlappingShapesLastState = {
                            keys: []
                        }, this.overlappingShapesCurrentState = {
                            keys: []
                        }, this.overlapKeeper = new v
                    }
                    var n = t("../solver/GSSolver"),
                        a = (t("../solver/Solver"), t("../collision/Ray"), t("../math/vec2")),
                        o = t("../shapes/Circle"),
                        r = t("../shapes/Convex"),
                        h = (t("../shapes/Line"), t("../shapes/Plane")),
                        l = t("../shapes/Capsule"),
                        c = t("../shapes/Particle"),
                        u = t("../events/EventEmitter"),
                        d = t("../objects/Body"),
                        p = (t("../shapes/Shape"), t("../objects/LinearSpring"), t("../material/Material")),
                        m = t("../material/ContactMaterial"),
                        g = (t("../constraints/DistanceConstraint"), t("../constraints/Constraint"), t("../constraints/LockConstraint"), t("../constraints/RevoluteConstraint"), t("../constraints/PrismaticConstraint"), t("../constraints/GearConstraint"), t("../../package.json"), t("../collision/Broadphase"), t("../collision/AABB")),
                        f = t("../collision/SAPBroadphase"),
                        _ = t("../collision/Narrowphase"),
                        y = t("../utils/Utils"),
                        v = t("../utils/OverlapKeeper"),
                        b = t("./IslandManager");
                    t("../objects/RotationalSpring");
                    e.exports = s, s.prototype = new Object(u.prototype), s.prototype.constructor = s, s.NO_SLEEPING = 1, s.BODY_SLEEPING = 2, s.ISLAND_SLEEPING = 4, s.prototype.addConstraint = function(t) {
                        this.constraints.push(t)
                    }, s.prototype.addContactMaterial = function(t) {
                        this.contactMaterials.push(t)
                    }, s.prototype.removeContactMaterial = function(t) {
                        var e = this.contactMaterials.indexOf(t); - 1 !== e && y.splice(this.contactMaterials, e, 1)
                    }, s.prototype.getContactMaterial = function(t, e) {
                        for (var i = this.contactMaterials, s = 0, n = i.length; s !== n; s++) {
                            var a = i[s];
                            if (a.materialA.id === t.id && a.materialB.id === e.id || a.materialA.id === e.id && a.materialB.id === t.id) return a
                        }
                        return !1
                    }, s.prototype.removeConstraint = function(t) {
                        var e = this.constraints.indexOf(t); - 1 !== e && y.splice(this.constraints, e, 1)
                    };
                    a.create(), a.create(), a.create(), a.create(), a.create(), a.create();
                    var S = a.create(),
                        T = a.fromValues(0, 0),
                        E = a.fromValues(0, 0);
                    a.fromValues(0, 0), a.fromValues(0, 0);
                    s.prototype.step = function(t, e, i) {
                        if (i = i || 10, 0 === (e = e || 0)) this.internalStep(t), this.time += t;
                        else {
                            this.accumulator += e;
                            for (var s = 0; this.accumulator >= t && s < i;) this.internalStep(t), this.time += t, this.accumulator -= t, s++;
                            for (var n = this.accumulator % t / t, o = 0; o !== this.bodies.length; o++) {
                                var r = this.bodies[o];
                                a.lerp(r.interpolatedPosition, r.previousPosition, r.position, n), r.interpolatedAngle = r.previousAngle + n * (r.angle - r.previousAngle)
                            }
                        }
                    };
                    var P = [];
                    s.prototype.internalStep = function(t) {
                        this.stepping = !0;
                        var e = this.springs.length,
                            i = this.springs,
                            n = this.bodies,
                            o = this.gravity,
                            r = this.solver,
                            h = this.bodies.length,
                            l = this.broadphase,
                            c = this.narrowphase,
                            u = this.constraints,
                            p = S,
                            m = (a.scale, a.add),
                            g = (a.rotate, this.islandManager);
                        if (this.overlapKeeper.tick(), this.lastTimeStep = t, this.useWorldGravityAsFrictionGravity) {
                            var f = a.length(this.gravity);
                            0 === f && this.useFrictionGravityOnZeroGravity || (this.frictionGravity = f)
                        }
                        if (this.applyGravity)
                            for (E = 0; E !== h; E++) {
                                var _ = (v = n[E]).force;
                                v.type === d.DYNAMIC && v.sleepState !== d.SLEEPING && (a.scale(p, o, v.mass * v.gravityScale), m(_, _, p))
                            }
                        if (this.applySpringForces)
                            for (E = 0; E !== e; E++) i[E].applyForce();
                        if (this.applyDamping)
                            for (E = 0; E !== h; E++) {
                                var v = n[E];
                                v.type === d.DYNAMIC && v.applyDamping(t)
                            }
                        for (var b = l.getCollisionPairs(this), T = this.disabledBodyCollisionPairs, E = T.length - 2; E >= 0; E -= 2)
                            for (I = b.length - 2; I >= 0; I -= 2)(T[E] === b[I] && T[E + 1] === b[I + 1] || T[E + 1] === b[I] && T[E] === b[I + 1]) && b.splice(I, 2);
                        X = u.length;
                        for (E = 0; E !== X; E++) {
                            var A = u[E];
                            if (!A.collideConnected)
                                for (var I = b.length - 2; I >= 0; I -= 2)(A.bodyA === b[I] && A.bodyB === b[I + 1] || A.bodyB === b[I] && A.bodyA === b[I + 1]) && b.splice(I, 2)
                        }
                        this.postBroadphaseEvent.pairs = b, this.emit(this.postBroadphaseEvent), this.postBroadphaseEvent.pairs = null, c.reset(this);
                        for (var E = 0, C = b.length; E !== C; E += 2)
                            for (var x = b[E], w = b[E + 1], M = 0, O = x.shapes.length; M !== O; M++)
                                for (var L = x.shapes[M], N = L.position, k = L.angle, R = 0, D = w.shapes.length; R !== D; R++) {
                                    var G = w.shapes[R],
                                        B = G.position,
                                        F = G.angle,
                                        U = this.defaultContactMaterial;
                                    if (L.material && G.material) {
                                        var H = this.getContactMaterial(L.material, G.material);
                                        H && (U = H)
                                    }
                                    this.runNarrowphase(c, x, L, N, k, w, G, B, F, U, this.frictionGravity)
                                }
                        for (E = 0; E !== h; E++)(z = n[E])._wakeUpAfterNarrowphase && (z.wakeUp(), z._wakeUpAfterNarrowphase = !1);
                        if (this.has("endContact")) {
                            this.overlapKeeper.getEndOverlaps(P);
                            for (var Y = this.endContactEvent, R = P.length; R--;) {
                                var W = P[R];
                                Y.shapeA = W.shapeA, Y.shapeB = W.shapeB, Y.bodyA = W.bodyA, Y.bodyB = W.bodyB, this.emit(Y)
                            }
                            P.length = 0
                        }
                        var j = this.preSolveEvent;
                        j.contactEquations = c.contactEquations, j.frictionEquations = c.frictionEquations, this.emit(j), j.contactEquations = j.frictionEquations = null;
                        var X = u.length;
                        for (E = 0; E !== X; E++) u[E].update();
                        if (c.contactEquations.length || c.frictionEquations.length || X)
                            if (this.islandSplit) {
                                for (g.equations.length = 0, y.appendArray(g.equations, c.contactEquations), y.appendArray(g.equations, c.frictionEquations), E = 0; E !== X; E++) y.appendArray(g.equations, u[E].equations);
                                g.split(this);
                                for (E = 0; E !== g.islands.length; E++)(q = g.islands[E]).equations.length && r.solveIsland(t, q)
                            } else {
                                for (r.addEquations(c.contactEquations), r.addEquations(c.frictionEquations), E = 0; E !== X; E++) r.addEquations(u[E].equations);
                                this.solveConstraints && r.solve(t, this), r.removeAllEquations()
                            }
                        for (E = 0; E !== h; E++) {
                            var z = n[E];
                            z.integrate(t)
                        }
                        for (E = 0; E !== h; E++) n[E].setZeroForce();
                        if (this.emitImpactEvent && this.has("impact"))
                            for (var K = this.impactEvent, E = 0; E !== c.contactEquations.length; E++) {
                                var V = c.contactEquations[E];
                                V.firstImpact && (K.bodyA = V.bodyA, K.bodyB = V.bodyB, K.shapeA = V.shapeA, K.shapeB = V.shapeB, K.contactEquation = V, this.emit(K))
                            }
                        if (this.sleepMode === s.BODY_SLEEPING)
                            for (E = 0; E !== h; E++) n[E].sleepTick(this.time, !1, t);
                        else if (this.sleepMode === s.ISLAND_SLEEPING && this.islandSplit) {
                            for (E = 0; E !== h; E++) n[E].sleepTick(this.time, !0, t);
                            for (E = 0; E < this.islandManager.islands.length; E++) {
                                var q = this.islandManager.islands[E];
                                q.wantsToSleep() && q.sleep()
                            }
                        }
                        this.stepping = !1;
                        for (var J = this.bodiesToBeRemoved, E = 0; E !== J.length; E++) this.removeBody(J[E]);
                        J.length = 0, this.emit(this.postStepEvent)
                    }, s.prototype.runNarrowphase = function(t, e, i, s, n, o, r, h, l, c, u) {
                        if (0 != (i.collisionGroup & r.collisionMask) && 0 != (r.collisionGroup & i.collisionMask)) {
                            a.rotate(T, s, e.angle), a.rotate(E, h, o.angle), a.add(T, T, e.position), a.add(E, E, o.position);
                            var p = n + e.angle,
                                m = l + o.angle;
                            t.enableFriction = c.friction > 0, t.frictionCoefficient = c.friction;
                            var g;
                            g = e.type === d.STATIC || e.type === d.KINEMATIC ? o.mass : o.type === d.STATIC || o.type === d.KINEMATIC ? e.mass : e.mass * o.mass / (e.mass + o.mass), t.slipForce = c.friction * u * g, t.restitution = c.restitution, t.surfaceVelocity = c.surfaceVelocity, t.frictionStiffness = c.frictionStiffness, t.frictionRelaxation = c.frictionRelaxation, t.stiffness = c.stiffness, t.relaxation = c.relaxation, t.contactSkinSize = c.contactSkinSize, t.enabledEquations = e.collisionResponse && o.collisionResponse && i.collisionResponse && r.collisionResponse;
                            var f = t[i.type | r.type],
                                _ = 0;
                            if (f) {
                                var y = i.sensor || r.sensor,
                                    v = t.frictionEquations.length;
                                _ = i.type < r.type ? f.call(t, e, i, T, p, o, r, E, m, y) : f.call(t, o, r, E, m, e, i, T, p, y);
                                var b = t.frictionEquations.length - v;
                                if (_) {
                                    if (e.allowSleep && e.type === d.DYNAMIC && e.sleepState === d.SLEEPING && o.sleepState === d.AWAKE && o.type !== d.STATIC && a.squaredLength(o.velocity) + Math.pow(o.angularVelocity, 2) >= 2 * Math.pow(o.sleepSpeedLimit, 2) && (e._wakeUpAfterNarrowphase = !0), o.allowSleep && o.type === d.DYNAMIC && o.sleepState === d.SLEEPING && e.sleepState === d.AWAKE && e.type !== d.STATIC && a.squaredLength(e.velocity) + Math.pow(e.angularVelocity, 2) >= 2 * Math.pow(e.sleepSpeedLimit, 2) && (o._wakeUpAfterNarrowphase = !0), this.overlapKeeper.setOverlapping(e, i, o, r), this.has("beginContact") && this.overlapKeeper.isNewOverlap(i, r)) {
                                        var S = this.beginContactEvent;
                                        if (S.shapeA = i, S.shapeB = r, S.bodyA = e, S.bodyB = o, S.contactEquations.length = 0, "number" == typeof _)
                                            for (P = t.contactEquations.length - _; P < t.contactEquations.length; P++) S.contactEquations.push(t.contactEquations[P]);
                                        this.emit(S)
                                    }
                                    if ("number" == typeof _ && b > 1)
                                        for (var P = t.frictionEquations.length - b; P < t.frictionEquations.length; P++) {
                                            var A = t.frictionEquations[P];
                                            A.setSlipForce(A.getSlipForce() / b)
                                        }
                                }
                            }
                        }
                    }, s.prototype.addSpring = function(t) {
                        this.springs.push(t);
                        var e = this.addSpringEvent;
                        e.spring = t, this.emit(e), e.spring = null
                    }, s.prototype.removeSpring = function(t) {
                        var e = this.springs.indexOf(t); - 1 !== e && y.splice(this.springs, e, 1)
                    }, s.prototype.addBody = function(t) {
                        if (-1 === this.bodies.indexOf(t)) {
                            this.bodies.push(t), t.world = this;
                            var e = this.addBodyEvent;
                            e.body = t, this.emit(e), e.body = null
                        }
                    }, s.prototype.removeBody = function(t) {
                        if (this.stepping) this.bodiesToBeRemoved.push(t);
                        else {
                            t.world = null;
                            var e = this.bodies.indexOf(t); - 1 !== e && (y.splice(this.bodies, e, 1), this.removeBodyEvent.body = t, t.resetConstraintVelocity(), this.emit(this.removeBodyEvent), this.removeBodyEvent.body = null)
                        }
                    }, s.prototype.getBodyById = function(t) {
                        for (var e = this.bodies, i = 0; i < e.length; i++) {
                            var s = e[i];
                            if (s.id === t) return s
                        }
                        return !1
                    }, s.prototype.disableBodyCollision = function(t, e) {
                        this.disabledBodyCollisionPairs.push(t, e)
                    }, s.prototype.enableBodyCollision = function(t, e) {
                        for (var i = this.disabledBodyCollisionPairs, s = 0; s < i.length; s += 2)
                            if (i[s] === t && i[s + 1] === e || i[s + 1] === t && i[s] === e) return void i.splice(s, 2)
                    }, s.prototype.clear = function() {
                        this.time = 0, this.solver && this.solver.equations.length && this.solver.removeAllEquations();
                        for (var t = this.constraints, e = t.length - 1; e >= 0; e--) this.removeConstraint(t[e]);
                        for (var i = this.bodies, e = i.length - 1; e >= 0; e--) this.removeBody(i[e]);
                        for (var n = this.springs, e = n.length - 1; e >= 0; e--) this.removeSpring(n[e]);
                        for (var a = this.contactMaterials, e = a.length - 1; e >= 0; e--) this.removeContactMaterial(a[e]);
                        s.apply(this)
                    };
                    var A = a.create(),
                        I = (a.fromValues(0, 0), a.fromValues(0, 0));
                    s.prototype.hitTest = function(t, e, i) {
                        i = i || 0;
                        var s = new d({
                                position: t
                            }),
                            n = new c,
                            u = t,
                            p = A,
                            m = I;
                        s.addShape(n);
                        for (var g = this.narrowphase, f = [], _ = 0, y = e.length; _ !== y; _++)
                            for (var v = e[_], b = 0, S = v.shapes.length; b !== S; b++) {
                                var T = v.shapes[b];
                                a.rotate(p, T.position, v.angle), a.add(p, p, v.position);
                                var E = T.angle + v.angle;
                                (T instanceof o && g.circleParticle(v, T, p, E, s, n, u, 0, !0) || T instanceof r && g.particleConvex(s, n, u, 0, v, T, p, E, !0) || T instanceof h && g.particlePlane(s, n, u, 0, v, T, p, E, !0) || T instanceof l && g.particleCapsule(s, n, u, 0, v, T, p, E, !0) || T instanceof c && a.squaredLength(a.sub(m, p, t)) < i * i) && f.push(v)
                            }
                        return f
                    }, s.prototype.setGlobalStiffness = function(t) {
                        for (var e = this.constraints, i = 0; i !== e.length; i++)
                            for (var s = e[i], n = 0; n !== s.equations.length; n++) {
                                var a = s.equations[n];
                                a.stiffness = t, a.needsUpdate = !0
                            }
                        for (var o = this.contactMaterials, i = 0; i !== o.length; i++)(s = o[i]).stiffness = s.frictionStiffness = t;
                        (s = this.defaultContactMaterial).stiffness = s.frictionStiffness = t
                    }, s.prototype.setGlobalRelaxation = function(t) {
                        for (n = 0; n !== this.constraints.length; n++)
                            for (var e = this.constraints[n], i = 0; i !== e.equations.length; i++) {
                                var s = e.equations[i];
                                s.relaxation = t, s.needsUpdate = !0
                            }
                        for (var n = 0; n !== this.contactMaterials.length; n++)(e = this.contactMaterials[n]).relaxation = e.frictionRelaxation = t;
                        (e = this.defaultContactMaterial).relaxation = e.frictionRelaxation = t
                    };
                    var C = new g,
                        x = [];
                    s.prototype.raycast = function(t, e) {
                        return e.getAABB(C), this.broadphase.aabbQuery(this, C, x), e.intersectBodies(t, x), x.length = 0, t.hasHit()
                    }
                }, {
                    "../../package.json": 6,
                    "../collision/AABB": 7,
                    "../collision/Broadphase": 8,
                    "../collision/Narrowphase": 10,
                    "../collision/Ray": 11,
                    "../collision/SAPBroadphase": 13,
                    "../constraints/Constraint": 14,
                    "../constraints/DistanceConstraint": 15,
                    "../constraints/GearConstraint": 16,
                    "../constraints/LockConstraint": 17,
                    "../constraints/PrismaticConstraint": 18,
                    "../constraints/RevoluteConstraint": 19,
                    "../events/EventEmitter": 26,
                    "../material/ContactMaterial": 27,
                    "../material/Material": 28,
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "../objects/LinearSpring": 32,
                    "../objects/RotationalSpring": 33,
                    "../shapes/Capsule": 38,
                    "../shapes/Circle": 39,
                    "../shapes/Convex": 40,
                    "../shapes/Line": 42,
                    "../shapes/Particle": 43,
                    "../shapes/Plane": 44,
                    "../shapes/Shape": 45,
                    "../solver/GSSolver": 46,
                    "../solver/Solver": 47,
                    "../utils/OverlapKeeper": 52,
                    "../utils/Utils": 57,
                    "./IslandManager": 59
                }
            ]
        }, {}, [36])(36)
    }),
    function() {
        var t = this,
            e = e || {};
        return e.game = null, e.WEBGL_RENDERER = 0, e.CANVAS_RENDERER = 1, e.VERSION = "v2.2.9", e._UID = 0, "undefined" != typeof Float32Array ? (e.Float32Array = Float32Array, e.Uint16Array = Uint16Array, e.Uint32Array = Uint32Array, e.ArrayBuffer = ArrayBuffer) : (e.Float32Array = Array, e.Uint16Array = Array), e.PI_2 = 2 * Math.PI, e.RAD_TO_DEG = 180 / Math.PI, e.DEG_TO_RAD = Math.PI / 180, e.RETINA_PREFIX = "@2x", e.DisplayObject = function() {
            this.position = new e.Point(0, 0), this.scale = new e.Point(1, 1), this.pivot = new e.Point(0, 0), this.rotation = 0, this.alpha = 1, this.visible = !0, this.hitArea = null, this.renderable = !1, this.parent = null, this.worldAlpha = 1, this.worldTransform = new e.Matrix, this.worldPosition = new e.Point(0, 0), this.worldScale = new e.Point(1, 1), this.worldRotation = 0, this.filterArea = null, this._sr = 0, this._cr = 1, this._bounds = new e.Rectangle(0, 0, 0, 0), this._currentBounds = null, this._mask = null, this._cacheAsBitmap = !1, this._cacheIsDirty = !1
        }, e.DisplayObject.prototype.constructor = e.DisplayObject, e.DisplayObject.prototype = {
            destroy: function() {
                if (this.children) {
                    for (var t = this.children.length; t--;) this.children[t].destroy();
                    this.children = []
                }
                this.hitArea = null, this.parent = null, this.worldTransform = null, this.filterArea = null, this.renderable = !1, this._bounds = null, this._currentBounds = null, this._mask = null, this._destroyCachedSprite()
            },
            updateTransform: function(t) {
                if (!t && !this.parent && !this.game) return this;
                var i = this.parent;
                t ? i = t : this.parent || (i = this.game.world);
                var s, n, a, o, r, h, l = i.worldTransform,
                    c = this.worldTransform;
                return this.rotation % e.PI_2 ? (this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation)), s = this._cr * this.scale.x, n = this._sr * this.scale.x, a = -this._sr * this.scale.y, o = this._cr * this.scale.y, r = this.position.x, h = this.position.y, (this.pivot.x || this.pivot.y) && (r -= this.pivot.x * s + this.pivot.y * a, h -= this.pivot.x * n + this.pivot.y * o), c.a = s * l.a + n * l.c, c.b = s * l.b + n * l.d, c.c = a * l.a + o * l.c, c.d = a * l.b + o * l.d, c.tx = r * l.a + h * l.c + l.tx, c.ty = r * l.b + h * l.d + l.ty) : (s = this.scale.x, o = this.scale.y, r = this.position.x - this.pivot.x * s, h = this.position.y - this.pivot.y * o, c.a = s * l.a, c.b = s * l.b, c.c = o * l.c, c.d = o * l.d, c.tx = r * l.a + h * l.c + l.tx, c.ty = r * l.b + h * l.d + l.ty), this.worldAlpha = this.alpha * i.worldAlpha, this.worldPosition.set(c.tx, c.ty), this.worldScale.set(this.scale.x * Math.sqrt(c.a * c.a + c.c * c.c), this.scale.y * Math.sqrt(c.b * c.b + c.d * c.d)), this.worldRotation = Math.atan2(-c.c, c.d), this._currentBounds = null, this.transformCallback && this.transformCallback.call(this.transformCallbackContext, c, l), this
            },
            preUpdate: function() {},
            generateTexture: function(t, i, s) {
                var n = this.getLocalBounds(),
                    a = new e.RenderTexture(0 | n.width, 0 | n.height, s, i, t);
                return e.DisplayObject._tempMatrix.tx = -n.x, e.DisplayObject._tempMatrix.ty = -n.y, a.render(this, e.DisplayObject._tempMatrix), a
            },
            updateCache: function() {
                return this._generateCachedSprite(), this
            },
            toGlobal: function(t) {
                return this.updateTransform(), this.worldTransform.apply(t)
            },
            toLocal: function(t, e) {
                return e && (t = e.toGlobal(t)), this.updateTransform(), this.worldTransform.applyInverse(t)
            },
            _renderCachedSprite: function(t) {
                this._cachedSprite.worldAlpha = this.worldAlpha, t.gl ? e.Sprite.prototype._renderWebGL.call(this._cachedSprite, t) : e.Sprite.prototype._renderCanvas.call(this._cachedSprite, t)
            },
            _generateCachedSprite: function() {
                this._cacheAsBitmap = !1;
                var t = this.getLocalBounds();
                if (t.width = Math.max(1, Math.ceil(t.width)), t.height = Math.max(1, Math.ceil(t.height)), this.updateTransform(), this._cachedSprite) this._cachedSprite.texture.resize(t.width, t.height);
                else {
                    var i = new e.RenderTexture(t.width, t.height);
                    this._cachedSprite = new e.Sprite(i), this._cachedSprite.worldTransform = this.worldTransform
                }
                var s = this._filters;
                this._filters = null, this._cachedSprite.filters = s, e.DisplayObject._tempMatrix.tx = -t.x, e.DisplayObject._tempMatrix.ty = -t.y, this._cachedSprite.texture.render(this, e.DisplayObject._tempMatrix, !0), this._cachedSprite.anchor.x = -t.x / t.width, this._cachedSprite.anchor.y = -t.y / t.height, this._filters = s, this._cacheAsBitmap = !0
            },
            _destroyCachedSprite: function() {
                this._cachedSprite && (this._cachedSprite.texture.destroy(!0), this._cachedSprite = null)
            }
        }, e.DisplayObject.prototype.displayObjectUpdateTransform = e.DisplayObject.prototype.updateTransform, Object.defineProperties(e.DisplayObject.prototype, {
            x: {
                get: function() {
                    return this.position.x
                },
                set: function(t) {
                    this.position.x = t
                }
            },
            y: {
                get: function() {
                    return this.position.y
                },
                set: function(t) {
                    this.position.y = t
                }
            },
            worldVisible: {
                get: function() {
                    if (this.visible) {
                        var t = this.parent;
                        if (!t) return this.visible;
                        do {
                            if (!t.visible) return !1;
                            t = t.parent
                        } while (t);
                        return !0
                    }
                    return !1
                }
            },
            mask: {
                get: function() {
                    return this._mask
                },
                set: function(t) {
                    this._mask && (this._mask.isMask = !1), this._mask = t, t && (this._mask.isMask = !0)
                }
            },
            filters: {
                get: function() {
                    return this._filters
                },
                set: function(t) {
                    if (Array.isArray(t)) {
                        for (var i = [], s = 0; s < t.length; s++)
                            for (var n = t[s].passes, a = 0; a < n.length; a++) i.push(n[a]);
                        this._filterBlock = {
                            target: this,
                            filterPasses: i
                        }
                    }
                    this._filters = t, this.blendMode && this.blendMode === e.blendModes.MULTIPLY && (this.blendMode = e.blendModes.NORMAL)
                }
            },
            cacheAsBitmap: {
                get: function() {
                    return this._cacheAsBitmap
                },
                set: function(t) {
                    this._cacheAsBitmap !== t && (t ? this._generateCachedSprite() : this._destroyCachedSprite(), this._cacheAsBitmap = t)
                }
            }
        }), e.DisplayObjectContainer = function() {
            e.DisplayObject.call(this), this.children = [], this.ignoreChildInput = !1
        }, e.DisplayObjectContainer.prototype = Object.create(e.DisplayObject.prototype), e.DisplayObjectContainer.prototype.constructor = e.DisplayObjectContainer, e.DisplayObjectContainer.prototype.addChild = function(t) {
            return this.addChildAt(t, this.children.length)
        }, e.DisplayObjectContainer.prototype.addChildAt = function(t, e) {
            if (e >= 0 && e <= this.children.length) return t.parent && t.parent.removeChild(t), t.parent = this, this.children.splice(e, 0, t), t;
            throw new Error(t + "addChildAt: The index " + e + " supplied is out of bounds " + this.children.length)
        }, e.DisplayObjectContainer.prototype.swapChildren = function(t, e) {
            if (t !== e) {
                var i = this.getChildIndex(t),
                    s = this.getChildIndex(e);
                if (i < 0 || s < 0) throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
                this.children[i] = e, this.children[s] = t
            }
        }, e.DisplayObjectContainer.prototype.getChildIndex = function(t) {
            var e = this.children.indexOf(t);
            if (-1 === e) throw new Error("The supplied DisplayObject must be a child of the caller");
            return e
        }, e.DisplayObjectContainer.prototype.setChildIndex = function(t, e) {
            if (e < 0 || e >= this.children.length) throw new Error("The supplied index is out of bounds");
            var i = this.getChildIndex(t);
            this.children.splice(i, 1), this.children.splice(e, 0, t)
        }, e.DisplayObjectContainer.prototype.getChildAt = function(t) {
            if (t < 0 || t >= this.children.length) throw new Error("getChildAt: Supplied index " + t + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller");
            return this.children[t]
        }, e.DisplayObjectContainer.prototype.removeChild = function(t) {
            var e = this.children.indexOf(t);
            if (-1 !== e) return this.removeChildAt(e)
        }, e.DisplayObjectContainer.prototype.removeChildAt = function(t) {
            var e = this.getChildAt(t);
            return e && (e.parent = void 0, this.children.splice(t, 1)), e
        }, e.DisplayObjectContainer.prototype.removeChildren = function(t, e) {
            void 0 === t && (t = 0), void 0 === e && (e = this.children.length);
            var i = e - t;
            if (i > 0 && i <= e) {
                for (var s = this.children.splice(begin, i), n = 0; n < s.length; n++) s[n].parent = void 0;
                return s
            }
            if (0 === i && 0 === this.children.length) return [];
            throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")
        }, e.DisplayObjectContainer.prototype.updateTransform = function() {
            if (this.visible && (this.displayObjectUpdateTransform(), !this._cacheAsBitmap))
                for (var t = 0; t < this.children.length; t++) this.children[t].updateTransform()
        }, e.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = e.DisplayObjectContainer.prototype.updateTransform, e.DisplayObjectContainer.prototype.getBounds = function(t) {
            var i = t && t instanceof e.DisplayObject,
                s = !0;
            i ? s = t instanceof e.DisplayObjectContainer && t.contains(this) : t = this;
            var n;
            if (i) {
                var a = t.worldTransform;
                for (t.worldTransform = e.identityMatrix, n = 0; n < t.children.length; n++) t.children[n].updateTransform()
            }
            var o, r, h, l = 1 / 0,
                c = 1 / 0,
                u = -1 / 0,
                d = -1 / 0,
                p = !1;
            for (n = 0; n < this.children.length; n++) this.children[n].visible && (p = !0, l = l < (o = this.children[n].getBounds()).x ? l : o.x, c = c < o.y ? c : o.y, r = o.width + o.x, h = o.height + o.y, u = u > r ? u : r, d = d > h ? d : h);
            var m = this._bounds;
            if (!p) {
                var g = (m = new e.Rectangle).x,
                    f = m.width + m.x,
                    _ = m.y,
                    y = m.height + m.y,
                    v = this.worldTransform,
                    b = v.a,
                    S = v.b,
                    T = v.c,
                    E = v.d,
                    P = v.tx,
                    A = v.ty,
                    I = b * f + T * y + P,
                    C = E * y + S * f + A,
                    x = b * g + T * y + P,
                    w = E * y + S * g + A,
                    M = b * g + T * _ + P,
                    O = E * _ + S * g + A,
                    L = b * f + T * _ + P,
                    N = E * _ + S * f + A;
                u = I, d = C, c = C, l = L < (l = M < (l = x < (l = I) ? x : l) ? M : l) ? L : l, c = N < (c = O < (c = w < c ? w : c) ? O : c) ? N : c, u = L > (u = M > (u = x > u ? x : u) ? M : u) ? L : u, d = N > (d = O > (d = w > d ? w : d) ? O : d) ? N : d
            }
            if (m.x = l, m.y = c, m.width = u - l, m.height = d - c, i)
                for (t.worldTransform = a, n = 0; n < t.children.length; n++) t.children[n].updateTransform();
            if (!s) {
                var k = t.getBounds();
                m.x -= k.x, m.y -= k.y
            }
            return m
        }, e.DisplayObjectContainer.prototype.getLocalBounds = function() {
            return this.getBounds(this)
        }, e.DisplayObjectContainer.prototype.contains = function(t) {
            return !!t && (t === this || this.contains(t.parent))
        }, e.DisplayObjectContainer.prototype._renderWebGL = function(t) {
            if (this.visible && !(this.alpha <= 0))
                if (this._cacheAsBitmap) this._renderCachedSprite(t);
                else {
                    var e;
                    if (this._mask || this._filters) {
                        for (this._filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(t);
                        t.spriteBatch.stop(), this._mask && t.maskManager.popMask(this._mask, t), this._filters && t.filterManager.popFilter(), t.spriteBatch.start()
                    } else
                        for (e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(t)
                }
        }, e.DisplayObjectContainer.prototype._renderCanvas = function(t) {
            if (!1 !== this.visible && 0 !== this.alpha)
                if (this._cacheAsBitmap) this._renderCachedSprite(t);
                else {
                    this._mask && t.maskManager.pushMask(this._mask, t);
                    for (var e = 0; e < this.children.length; e++) this.children[e]._renderCanvas(t);
                    this._mask && t.maskManager.popMask(t)
                }
        }, Object.defineProperty(e.DisplayObjectContainer.prototype, "width", {
            get: function() {
                return this.getLocalBounds().width * this.scale.x
            },
            set: function(t) {
                var e = this.getLocalBounds().width;
                this.scale.x = 0 !== e ? t / e : 1, this._width = t
            }
        }), Object.defineProperty(e.DisplayObjectContainer.prototype, "height", {
            get: function() {
                return this.getLocalBounds().height * this.scale.y
            },
            set: function(t) {
                var e = this.getLocalBounds().height;
                this.scale.y = 0 !== e ? t / e : 1, this._height = t
            }
        }), e.Sprite = function(t) {
            e.DisplayObjectContainer.call(this), this.anchor = new e.Point, this.texture = t || e.Texture.emptyTexture, this._width = 0, this._height = 0, this.tint = 16777215, this.cachedTint = -1, this.tintedTexture = null, this.blendMode = e.blendModes.NORMAL, this.shader = null, this.exists = !0, this.texture.baseTexture.hasLoaded && this.onTextureUpdate(), this.renderable = !0
        }, e.Sprite.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Sprite.prototype.constructor = e.Sprite, Object.defineProperty(e.Sprite.prototype, "width", {
            get: function() {
                return this.scale.x * this.texture.frame.width
            },
            set: function(t) {
                this.scale.x = t / this.texture.frame.width, this._width = t
            }
        }), Object.defineProperty(e.Sprite.prototype, "height", {
            get: function() {
                return this.scale.y * this.texture.frame.height
            },
            set: function(t) {
                this.scale.y = t / this.texture.frame.height, this._height = t
            }
        }), e.Sprite.prototype.setTexture = function(t, e) {
            void 0 !== e && this.texture.baseTexture.destroy(), this.texture.baseTexture.skipRender = !1, this.texture = t, this.texture.valid = !0, this.cachedTint = -1
        }, e.Sprite.prototype.onTextureUpdate = function() {
            this._width && (this.scale.x = this._width / this.texture.frame.width), this._height && (this.scale.y = this._height / this.texture.frame.height)
        }, e.Sprite.prototype.getBounds = function(t) {
            var e = this.texture.frame.width,
                i = this.texture.frame.height,
                s = e * (1 - this.anchor.x),
                n = e * -this.anchor.x,
                a = i * (1 - this.anchor.y),
                o = i * -this.anchor.y,
                r = t || this.worldTransform,
                h = r.a,
                l = r.b,
                c = r.c,
                u = r.d,
                d = r.tx,
                p = r.ty,
                m = -1 / 0,
                g = -1 / 0,
                f = 1 / 0,
                _ = 1 / 0;
            if (0 === l && 0 === c) {
                if (h < 0) {
                    h *= -1;
                    y = s;
                    s = -n, n = -y
                }
                if (u < 0) {
                    u *= -1;
                    var y = a;
                    a = -o, o = -y
                }
                f = h * n + d, m = h * s + d, _ = u * o + p, g = u * a + p
            } else {
                var v = h * n + c * o + d,
                    b = u * o + l * n + p,
                    S = h * s + c * o + d,
                    T = u * o + l * s + p,
                    E = h * s + c * a + d,
                    P = u * a + l * s + p,
                    A = h * n + c * a + d,
                    I = u * a + l * n + p;
                f = A < (f = E < (f = S < (f = v < f ? v : f) ? S : f) ? E : f) ? A : f, _ = I < (_ = P < (_ = T < (_ = b < _ ? b : _) ? T : _) ? P : _) ? I : _, m = A > (m = E > (m = S > (m = v > m ? v : m) ? S : m) ? E : m) ? A : m, g = I > (g = P > (g = T > (g = b > g ? b : g) ? T : g) ? P : g) ? I : g
            }
            var C = this._bounds;
            return C.x = f, C.width = m - f, C.y = _, C.height = g - _, this._currentBounds = C, C
        }, e.Sprite.prototype.getLocalBounds = function() {
            var t = this.worldTransform;
            this.worldTransform = e.identityMatrix;
            for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform();
            var s = this.getBounds();
            for (this.worldTransform = t, i = 0; i < this.children.length; i++) this.children[i].updateTransform();
            return s
        }, e.Sprite.prototype._renderWebGL = function(t, e) {
            if (this.visible && !(this.alpha <= 0) && this.renderable) {
                var i = this.worldTransform;
                if (e && (i = e), this._mask || this._filters) {
                    var s = t.spriteBatch;
                    this._filters && (s.flush(), t.filterManager.pushFilter(this._filterBlock)), this._mask && (s.stop(), t.maskManager.pushMask(this.mask, t), s.start()), s.render(this);
                    for (n = 0; n < this.children.length; n++) this.children[n]._renderWebGL(t);
                    s.stop(), this._mask && t.maskManager.popMask(this._mask, t), this._filters && t.filterManager.popFilter(), s.start()
                } else {
                    t.spriteBatch.render(this);
                    for (var n = 0; n < this.children.length; n++) this.children[n]._renderWebGL(t, i)
                }
            }
        }, e.Sprite.prototype._renderCanvas = function(t, i) {
            if (!(!this.visible || 0 === this.alpha || !this.renderable || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) {
                var s = this.worldTransform;
                if (i && (s = i), this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, t.context.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t), this.texture.valid) {
                    var n = this.texture.baseTexture.resolution / t.resolution;
                    t.context.globalAlpha = this.worldAlpha, t.smoothProperty && t.scaleMode !== this.texture.baseTexture.scaleMode && (t.scaleMode = this.texture.baseTexture.scaleMode, t.context[t.smoothProperty] = t.scaleMode === e.scaleModes.LINEAR);
                    var a = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width : this.anchor.x * -this.texture.frame.width,
                        o = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height : this.anchor.y * -this.texture.frame.height,
                        r = s.tx * t.resolution + t.shakeX,
                        h = s.ty * t.resolution + t.shakeY;
                    t.roundPixels ? (t.context.setTransform(s.a, s.b, s.c, s.d, 0 | r, 0 | h), a |= 0, o |= 0) : t.context.setTransform(s.a, s.b, s.c, s.d, r, h);
                    var l = this.texture.crop.width,
                        c = this.texture.crop.height;
                    if (a /= n, o /= n, 16777215 !== this.tint)(this.texture.requiresReTint || this.cachedTint !== this.tint) && (this.tintedTexture = e.CanvasTinter.getTintedTexture(this, this.tint), this.cachedTint = this.tint, this.texture.requiresReTint = !1), t.context.drawImage(this.tintedTexture, 0, 0, l, c, a, o, l / n, c / n);
                    else {
                        var u = this.texture.crop.x,
                            d = this.texture.crop.y;
                        t.context.drawImage(this.texture.baseTexture.source, u, d, l, c, a, o, l / n, c / n)
                    }
                }
                for (var p = 0; p < this.children.length; p++) this.children[p]._renderCanvas(t);
                this._mask && t.maskManager.popMask(t)
            }
        }, e.SpriteBatch = function(t) {
            e.DisplayObjectContainer.call(this), this.textureThing = t, this.ready = !1
        }, e.SpriteBatch.prototype = Object.create(e.DisplayObjectContainer.prototype), e.SpriteBatch.prototype.constructor = e.SpriteBatch, e.SpriteBatch.prototype.initWebGL = function(t) {
            this.fastSpriteBatch = new e.WebGLFastSpriteBatch(t), this.ready = !0
        }, e.SpriteBatch.prototype.updateTransform = function() {
            this.displayObjectUpdateTransform()
        }, e.SpriteBatch.prototype._renderWebGL = function(t) {
            !this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(t.gl), this.fastSpriteBatch.gl !== t.gl && this.fastSpriteBatch.setContext(t.gl), t.spriteBatch.stop(), t.shaderManager.setShader(t.shaderManager.fastShader), this.fastSpriteBatch.begin(this, t), this.fastSpriteBatch.render(this), t.spriteBatch.start())
        }, e.SpriteBatch.prototype._renderCanvas = function(t) {
            if (this.visible && !(this.alpha <= 0) && this.children.length) {
                var e = t.context;
                e.globalAlpha = this.worldAlpha, this.displayObjectUpdateTransform();
                for (var i = this.worldTransform, s = !0, n = 0; n < this.children.length; n++) {
                    var a = this.children[n];
                    if (a.visible) {
                        var o = a.texture,
                            r = o.frame;
                        if (e.globalAlpha = this.worldAlpha * a.alpha, a.rotation % (2 * Math.PI) == 0) s && (e.setTransform(i.a, i.b, i.c, i.d, i.tx, i.ty), s = !1), e.drawImage(o.baseTexture.source, r.x, r.y, r.width, r.height, a.anchor.x * (-r.width * a.scale.x) + a.position.x + .5 + t.shakeX | 0, a.anchor.y * (-r.height * a.scale.y) + a.position.y + .5 + t.shakeY | 0, r.width * a.scale.x, r.height * a.scale.y);
                        else {
                            s || (s = !0), a.displayObjectUpdateTransform();
                            var h = a.worldTransform,
                                l = h.tx * t.resolution + t.shakeX,
                                c = h.ty * t.resolution + t.shakeY;
                            t.roundPixels ? e.setTransform(h.a, h.b, h.c, h.d, 0 | l, 0 | c) : e.setTransform(h.a, h.b, h.c, h.d, l, c), e.drawImage(o.baseTexture.source, r.x, r.y, r.width, r.height, a.anchor.x * -r.width + .5 | 0, a.anchor.y * -r.height + .5 | 0, r.width, r.height)
                        }
                    }
                }
            }
        }, e.hex2rgb = function(t) {
            return [(t >> 16 & 255) / 255, (t >> 8 & 255) / 255, (255 & t) / 255]
        }, e.rgb2hex = function(t) {
            return (255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2]
        }, e.canUseNewCanvasBlendModes = function() {
            if (void 0 === document) return !1;
            var t = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",
                i = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",
                s = new Image;
            s.src = t + "AP804Oa6" + i;
            var n = new Image;
            n.src = t + "/wCKxvRF" + i;
            var a = e.CanvasPool.create(this, 6, 1).getContext("2d");
            if (a.globalCompositeOperation = "multiply", a.drawImage(s, 0, 0), a.drawImage(n, 2, 0), !a.getImageData(2, 0, 1, 1)) return !1;
            var o = a.getImageData(2, 0, 1, 1).data;
            return e.CanvasPool.remove(this), 255 === o[0] && 0 === o[1] && 0 === o[2]
        }, e.getNextPowerOfTwo = function(t) {
            if (t > 0 && 0 == (t & t - 1)) return t;
            for (var e = 1; e < t;) e <<= 1;
            return e
        }, e.isPowerOfTwo = function(t, e) {
            return t > 0 && 0 == (t & t - 1) && e > 0 && 0 == (e & e - 1)
        }, e.CanvasPool = {
            create: function(t, i, s) {
                var n, a = e.CanvasPool.getFirst();
                if (-1 === a) {
                    var o = {
                        parent: t,
                        canvas: document.createElement("canvas")
                    };
                    e.CanvasPool.pool.push(o), n = o.canvas
                } else e.CanvasPool.pool[a].parent = t, n = e.CanvasPool.pool[a].canvas;
                return void 0 !== i && (n.width = i, n.height = s), n
            },
            getFirst: function() {
                for (var t = e.CanvasPool.pool, i = 0; i < t.length; i++)
                    if (!t[i].parent) return i;
                return -1
            },
            remove: function(t) {
                for (var i = e.CanvasPool.pool, s = 0; s < i.length; s++) i[s].parent === t && (i[s].parent = null, i[s].canvas.width = 1, i[s].canvas.height = 1)
            },
            removeByCanvas: function(t) {
                for (var i = e.CanvasPool.pool, s = 0; s < i.length; s++) i[s].canvas === t && (i[s].parent = null, i[s].canvas.width = 1, i[s].canvas.height = 1)
            },
            getTotal: function() {
                for (var t = e.CanvasPool.pool, i = 0, s = 0; s < t.length; s++) t[s].parent && i++;
                return i
            },
            getFree: function() {
                for (var t = e.CanvasPool.pool, i = 0, s = 0; s < t.length; s++) t[s].parent || i++;
                return i
            }
        }, e.CanvasPool.pool = [], e.initDefaultShaders = function() {}, e.CompileVertexShader = function(t, i) {
            return e._CompileShader(t, i, t.VERTEX_SHADER)
        }, e.CompileFragmentShader = function(t, i) {
            return e._CompileShader(t, i, t.FRAGMENT_SHADER)
        }, e._CompileShader = function(t, e, i) {
            var s = e;
            Array.isArray(e) && (s = e.join("\n"));
            var n = t.createShader(i);
            return t.shaderSource(n, s), t.compileShader(n), t.getShaderParameter(n, t.COMPILE_STATUS) ? n : (window.console.log(t.getShaderInfoLog(n)), null)
        }, e.compileProgram = function(t, i, s) {
            var n = e.CompileFragmentShader(t, s),
                a = e.CompileVertexShader(t, i),
                o = t.createProgram();
            return t.attachShader(o, a), t.attachShader(o, n), t.linkProgram(o), t.getProgramParameter(o, t.LINK_STATUS) || (window.console.log(t.getProgramInfoLog(o)), window.console.log("Could not initialise shaders")), o
        }, e.PixiShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.textureCount = 0, this.firstRun = !0, this.dirty = !0, this.attributes = [], this.init()
        }, e.PixiShader.prototype.constructor = e.PixiShader, e.PixiShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc || e.PixiShader.defaultVertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
            for (var s in this.uniforms) this.uniforms[s].uniformLocation = t.getUniformLocation(i, s);
            this.initUniforms(), this.program = i
        }, e.PixiShader.prototype.initUniforms = function() {
            this.textureCount = 1;
            var t, e = this.gl;
            for (var i in this.uniforms) {
                var s = (t = this.uniforms[i]).type;
                "sampler2D" === s ? (t._init = !1, null !== t.value && this.initSampler2D(t)) : "mat2" === s || "mat3" === s || "mat4" === s ? (t.glMatrix = !0, t.glValueLength = 1, "mat2" === s ? t.glFunc = e.uniformMatrix2fv : "mat3" === s ? t.glFunc = e.uniformMatrix3fv : "mat4" === s && (t.glFunc = e.uniformMatrix4fv)) : (t.glFunc = e["uniform" + s], t.glValueLength = "2f" === s || "2i" === s ? 2 : "3f" === s || "3i" === s ? 3 : "4f" === s || "4i" === s ? 4 : 1)
            }
        }, e.PixiShader.prototype.initSampler2D = function(t) {
            if (t.value && t.value.baseTexture && t.value.baseTexture.hasLoaded) {
                var e = this.gl;
                if (e.activeTexture(e["TEXTURE" + this.textureCount]), e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTextures[e.id]), t.textureData) {
                    var i = t.textureData,
                        s = i.magFilter ? i.magFilter : e.LINEAR,
                        n = i.minFilter ? i.minFilter : e.LINEAR,
                        a = i.wrapS ? i.wrapS : e.CLAMP_TO_EDGE,
                        o = i.wrapT ? i.wrapT : e.CLAMP_TO_EDGE,
                        r = i.luminance ? e.LUMINANCE : e.RGBA;
                    if (i.repeat && (a = e.REPEAT, o = e.REPEAT), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !!i.flipY), i.width) {
                        var h = i.width ? i.width : 512,
                            l = i.height ? i.height : 2,
                            c = i.border ? i.border : 0;
                        e.texImage2D(e.TEXTURE_2D, 0, r, h, l, c, r, e.UNSIGNED_BYTE, null)
                    } else e.texImage2D(e.TEXTURE_2D, 0, r, e.RGBA, e.UNSIGNED_BYTE, t.value.baseTexture.source);
                    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, s), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, n), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, a), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, o)
                }
                e.uniform1i(t.uniformLocation, this.textureCount), t._init = !0, this.textureCount++
            }
        }, e.PixiShader.prototype.syncUniforms = function() {
            this.textureCount = 1;
            var t, i = this.gl;
            for (var s in this.uniforms) 1 === (t = this.uniforms[s]).glValueLength ? !0 === t.glMatrix ? t.glFunc.call(i, t.uniformLocation, t.transpose, t.value) : t.glFunc.call(i, t.uniformLocation, t.value) : 2 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y) : 3 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z) : 4 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z, t.value.w) : "sampler2D" === t.type && (t._init ? (i.activeTexture(i["TEXTURE" + this.textureCount]), t.value.baseTexture._dirty[i.id] ? e.instances[i.id].updateTexture(t.value.baseTexture) : i.bindTexture(i.TEXTURE_2D, t.value.baseTexture._glTextures[i.id]), i.uniform1i(t.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(t))
        }, e.PixiShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec4 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);", "}"], e.PixiFastShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"], this.textureCount = 0, this.init()
        }, e.PixiFastShader.prototype.constructor = e.PixiFastShader, e.PixiFastShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.uMatrix = t.getUniformLocation(i, "uMatrix"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aPositionCoord = t.getAttribLocation(i, "aPositionCoord"), this.aScale = t.getAttribLocation(i, "aScale"), this.aRotation = t.getAttribLocation(i, "aRotation"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute], this.program = i
        }, e.PixiFastShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.StripShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "}"], this.init()
        }, e.StripShader.prototype.constructor = e.StripShader, e.StripShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.attributes = [this.aVertexPosition, this.aTextureCoord], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.StripShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null
        }, e.PrimitiveShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform float flipY;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"], this.init()
        }, e.PrimitiveShader.prototype.constructor = e.PrimitiveShader, e.PrimitiveShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.flipY = t.getUniformLocation(i, "flipY"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.PrimitiveShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.ComplexPrimitiveShader = function(t) {
            this._UID = e._UID++, this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform vec3 tint;", "uniform float alpha;", "uniform vec3 color;", "uniform float flipY;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);", "   vColor = vec4(color * alpha * tint, alpha);", "}"], this.init()
        }, e.ComplexPrimitiveShader.prototype.constructor = e.ComplexPrimitiveShader, e.ComplexPrimitiveShader.prototype.init = function() {
            var t = this.gl,
                i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.color = t.getUniformLocation(i, "color"), this.flipY = t.getUniformLocation(i, "flipY"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.ComplexPrimitiveShader.prototype.destroy = function() {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null
        }, e.glContexts = [], e.instances = [], e.WebGLRenderer = function(t) {
            this.game = t, e.defaultRenderer || (e.defaultRenderer = this), this.type = e.WEBGL_RENDERER, this.resolution = t.resolution, this.transparent = t.transparent, this.autoResize = !1, this.preserveDrawingBuffer = t.preserveDrawingBuffer, this.clearBeforeRender = t.clearBeforeRender, this.width = t.width, this.height = t.height, this.view = t.canvas, this._contextOptions = {
                alpha: this.transparent,
                antialias: t.antialias,
                premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent,
                stencil: !0,
                preserveDrawingBuffer: this.preserveDrawingBuffer
            }, this.projection = new e.Point, this.offset = new e.Point, this.shaderManager = new e.WebGLShaderManager, this.spriteBatch = new e.WebGLSpriteBatch, this.maskManager = new e.WebGLMaskManager, this.filterManager = new e.WebGLFilterManager, this.stencilManager = new e.WebGLStencilManager, this.blendModeManager = new e.WebGLBlendModeManager, this.renderSession = {}, this.renderSession.game = this.game, this.renderSession.gl = this.gl, this.renderSession.drawCount = 0, this.renderSession.shaderManager = this.shaderManager, this.renderSession.maskManager = this.maskManager, this.renderSession.filterManager = this.filterManager, this.renderSession.blendModeManager = this.blendModeManager, this.renderSession.spriteBatch = this.spriteBatch, this.renderSession.stencilManager = this.stencilManager, this.renderSession.renderer = this, this.renderSession.resolution = this.resolution, this.initContext(), this.mapBlendModes()
        }, e.WebGLRenderer.prototype.constructor = e.WebGLRenderer, e.WebGLRenderer.prototype.initContext = function() {
            var t = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);
            if (this.gl = t, !t) throw new Error("This browser does not support webGL. Try using the canvas renderer");
            this.glContextId = t.id = e.WebGLRenderer.glContextId++, e.glContexts[this.glContextId] = t, e.instances[this.glContextId] = this, t.disable(t.DEPTH_TEST), t.disable(t.CULL_FACE), t.enable(t.BLEND), this.shaderManager.setContext(t), this.spriteBatch.setContext(t), this.maskManager.setContext(t), this.filterManager.setContext(t), this.blendModeManager.setContext(t), this.stencilManager.setContext(t), this.renderSession.gl = this.gl, this.resize(this.width, this.height)
        }, e.WebGLRenderer.prototype.render = function(t) {
            if (!this.contextLost) {
                var e = this.gl;
                e.viewport(0, 0, this.width, this.height), e.bindFramebuffer(e.FRAMEBUFFER, null), this.game.clearBeforeRender && (e.clearColor(t._bgColor.r, t._bgColor.g, t._bgColor.b, t._bgColor.a), e.clear(e.COLOR_BUFFER_BIT)), this.offset.x = this.game.camera._shake.x, this.offset.y = this.game.camera._shake.y, this.renderDisplayObject(t, this.projection)
            }
        }, e.WebGLRenderer.prototype.renderDisplayObject = function(t, i, s, n) {
            this.renderSession.blendModeManager.setBlendMode(e.blendModes.NORMAL), this.renderSession.drawCount = 0, this.renderSession.flipY = s ? -1 : 1, this.renderSession.projection = i, this.renderSession.offset = this.offset, this.spriteBatch.begin(this.renderSession), this.filterManager.begin(this.renderSession, s), t._renderWebGL(this.renderSession, n), this.spriteBatch.end()
        }, e.WebGLRenderer.prototype.resize = function(t, e) {
            this.width = t * this.resolution, this.height = e * this.resolution, this.view.width = this.width, this.view.height = this.height, this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"), this.gl.viewport(0, 0, this.width, this.height), this.projection.x = this.width / 2 / this.resolution, this.projection.y = -this.height / 2 / this.resolution
        }, e.WebGLRenderer.prototype.updateTexture = function(t) {
            if (!t.hasLoaded) return !1;
            var i = this.gl;
            return t._glTextures[i.id] || (t._glTextures[i.id] = i.createTexture()), i.bindTexture(i.TEXTURE_2D, t._glTextures[i.id]), i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.premultipliedAlpha), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, i.RGBA, i.UNSIGNED_BYTE, t.source), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), t.mipmap && e.isPowerOfTwo(t.width, t.height) ? (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST), i.generateMipmap(i.TEXTURE_2D)) : i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), t._powerOf2 ? (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.REPEAT), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.REPEAT)) : (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE)), t._dirty[i.id] = !1, !0
        }, e.WebGLRenderer.prototype.destroy = function() {
            e.glContexts[this.glContextId] = null, this.projection = null, this.offset = null, this.shaderManager.destroy(), this.spriteBatch.destroy(), this.maskManager.destroy(), this.filterManager.destroy(), this.shaderManager = null, this.spriteBatch = null, this.maskManager = null, this.filterManager = null, this.gl = null, this.renderSession = null, e.CanvasPool.remove(this), e.instances[this.glContextId] = null, e.WebGLRenderer.glContextId--
        }, e.WebGLRenderer.prototype.mapBlendModes = function() {
            var t = this.gl;
            if (!e.blendModesWebGL) {
                var i = [],
                    s = e.blendModes;
                i[s.NORMAL] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.ADD] = [t.SRC_ALPHA, t.DST_ALPHA], i[s.MULTIPLY] = [t.DST_COLOR, t.ONE_MINUS_SRC_ALPHA], i[s.SCREEN] = [t.SRC_ALPHA, t.ONE], i[s.OVERLAY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.DARKEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.LIGHTEN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.COLOR_DODGE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.COLOR_BURN] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.HARD_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.SOFT_LIGHT] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.DIFFERENCE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.EXCLUSION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.HUE] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.SATURATION] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.COLOR] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], i[s.LUMINOSITY] = [t.ONE, t.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL = i
            }
        }, e.WebGLRenderer.glContextId = 0, e.WebGLBlendModeManager = function() {
            this.currentBlendMode = 99999
        }, e.WebGLBlendModeManager.prototype.constructor = e.WebGLBlendModeManager, e.WebGLBlendModeManager.prototype.setContext = function(t) {
            this.gl = t
        }, e.WebGLBlendModeManager.prototype.setBlendMode = function(t) {
            if (this.currentBlendMode === t) return !1;
            this.currentBlendMode = t;
            var i = e.blendModesWebGL[this.currentBlendMode];
            return i && this.gl.blendFunc(i[0], i[1]), !0
        }, e.WebGLBlendModeManager.prototype.destroy = function() {
            this.gl = null
        }, e.WebGLMaskManager = function() {}, e.WebGLMaskManager.prototype.constructor = e.WebGLMaskManager, e.WebGLMaskManager.prototype.setContext = function(t) {
            this.gl = t
        }, e.WebGLMaskManager.prototype.pushMask = function(t, i) {
            var s = i.gl;
            t.dirty && e.WebGLGraphics.updateGraphics(t, s), void 0 !== t._webGL[s.id] && void 0 !== t._webGL[s.id].data && 0 !== t._webGL[s.id].data.length && i.stencilManager.pushStencil(t, t._webGL[s.id].data[0], i)
        }, e.WebGLMaskManager.prototype.popMask = function(t, e) {
            var i = this.gl;
            void 0 !== t._webGL[i.id] && void 0 !== t._webGL[i.id].data && 0 !== t._webGL[i.id].data.length && e.stencilManager.popStencil(t, t._webGL[i.id].data[0], e)
        }, e.WebGLMaskManager.prototype.destroy = function() {
            this.gl = null
        }, e.WebGLStencilManager = function() {
            this.stencilStack = [], this.reverse = !0, this.count = 0
        }, e.WebGLStencilManager.prototype.setContext = function(t) {
            this.gl = t
        }, e.WebGLStencilManager.prototype.pushStencil = function(t, e, i) {
            var s = this.gl;
            this.bindGraphics(t, e, i), 0 === this.stencilStack.length && (s.enable(s.STENCIL_TEST), s.clear(s.STENCIL_BUFFER_BIT), this.reverse = !0, this.count = 0), this.stencilStack.push(e);
            var n = this.count;
            s.colorMask(!1, !1, !1, !1), s.stencilFunc(s.ALWAYS, 0, 255), s.stencilOp(s.KEEP, s.KEEP, s.INVERT), 1 === e.mode ? (s.drawElements(s.TRIANGLE_FAN, e.indices.length - 4, s.UNSIGNED_SHORT, 0), this.reverse ? (s.stencilFunc(s.EQUAL, 255 - n, 255), s.stencilOp(s.KEEP, s.KEEP, s.DECR)) : (s.stencilFunc(s.EQUAL, n, 255), s.stencilOp(s.KEEP, s.KEEP, s.INCR)), s.drawElements(s.TRIANGLE_FAN, 4, s.UNSIGNED_SHORT, 2 * (e.indices.length - 4)), this.reverse ? s.stencilFunc(s.EQUAL, 255 - (n + 1), 255) : s.stencilFunc(s.EQUAL, n + 1, 255), this.reverse = !this.reverse) : (this.reverse ? (s.stencilFunc(s.EQUAL, n, 255), s.stencilOp(s.KEEP, s.KEEP, s.INCR)) : (s.stencilFunc(s.EQUAL, 255 - n, 255), s.stencilOp(s.KEEP, s.KEEP, s.DECR)), s.drawElements(s.TRIANGLE_STRIP, e.indices.length, s.UNSIGNED_SHORT, 0), this.reverse ? s.stencilFunc(s.EQUAL, n + 1, 255) : s.stencilFunc(s.EQUAL, 255 - (n + 1), 255)), s.colorMask(!0, !0, !0, !0), s.stencilOp(s.KEEP, s.KEEP, s.KEEP), this.count++
        }, e.WebGLStencilManager.prototype.bindGraphics = function(t, i, s) {
            this._currentGraphics = t;
            var n, a = this.gl,
                o = s.projection,
                r = s.offset;
            1 === i.mode ? (n = s.shaderManager.complexPrimitiveShader, s.shaderManager.setShader(n), a.uniform1f(n.flipY, s.flipY), a.uniformMatrix3fv(n.translationMatrix, !1, t.worldTransform.toArray(!0)), a.uniform2f(n.projectionVector, o.x, -o.y), a.uniform2f(n.offsetVector, -r.x, -r.y), a.uniform3fv(n.tintColor, e.hex2rgb(t.tint)), a.uniform3fv(n.color, i.color), a.uniform1f(n.alpha, t.worldAlpha * i.alpha), a.bindBuffer(a.ARRAY_BUFFER, i.buffer), a.vertexAttribPointer(n.aVertexPosition, 2, a.FLOAT, !1, 8, 0), a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, i.indexBuffer)) : (n = s.shaderManager.primitiveShader, s.shaderManager.setShader(n), a.uniformMatrix3fv(n.translationMatrix, !1, t.worldTransform.toArray(!0)), a.uniform1f(n.flipY, s.flipY), a.uniform2f(n.projectionVector, o.x, -o.y), a.uniform2f(n.offsetVector, -r.x, -r.y), a.uniform3fv(n.tintColor, e.hex2rgb(t.tint)), a.uniform1f(n.alpha, t.worldAlpha), a.bindBuffer(a.ARRAY_BUFFER, i.buffer), a.vertexAttribPointer(n.aVertexPosition, 2, a.FLOAT, !1, 24, 0), a.vertexAttribPointer(n.colorAttribute, 4, a.FLOAT, !1, 24, 8), a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, i.indexBuffer))
        }, e.WebGLStencilManager.prototype.popStencil = function(t, e, i) {
            var s = this.gl;
            if (this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length) s.disable(s.STENCIL_TEST);
            else {
                var n = this.count;
                this.bindGraphics(t, e, i), s.colorMask(!1, !1, !1, !1), 1 === e.mode ? (this.reverse = !this.reverse, this.reverse ? (s.stencilFunc(s.EQUAL, 255 - (n + 1), 255), s.stencilOp(s.KEEP, s.KEEP, s.INCR)) : (s.stencilFunc(s.EQUAL, n + 1, 255), s.stencilOp(s.KEEP, s.KEEP, s.DECR)), s.drawElements(s.TRIANGLE_FAN, 4, s.UNSIGNED_SHORT, 2 * (e.indices.length - 4)), s.stencilFunc(s.ALWAYS, 0, 255), s.stencilOp(s.KEEP, s.KEEP, s.INVERT), s.drawElements(s.TRIANGLE_FAN, e.indices.length - 4, s.UNSIGNED_SHORT, 0), this.reverse ? s.stencilFunc(s.EQUAL, n, 255) : s.stencilFunc(s.EQUAL, 255 - n, 255)) : (this.reverse ? (s.stencilFunc(s.EQUAL, n + 1, 255), s.stencilOp(s.KEEP, s.KEEP, s.DECR)) : (s.stencilFunc(s.EQUAL, 255 - (n + 1), 255), s.stencilOp(s.KEEP, s.KEEP, s.INCR)), s.drawElements(s.TRIANGLE_STRIP, e.indices.length, s.UNSIGNED_SHORT, 0), this.reverse ? s.stencilFunc(s.EQUAL, n, 255) : s.stencilFunc(s.EQUAL, 255 - n, 255)), s.colorMask(!0, !0, !0, !0), s.stencilOp(s.KEEP, s.KEEP, s.KEEP)
            }
        }, e.WebGLStencilManager.prototype.destroy = function() {
            this.stencilStack = null, this.gl = null
        }, e.WebGLShaderManager = function() {
            this.maxAttibs = 10, this.attribState = [], this.tempAttribState = [];
            for (var t = 0; t < this.maxAttibs; t++) this.attribState[t] = !1;
            this.stack = []
        }, e.WebGLShaderManager.prototype.constructor = e.WebGLShaderManager, e.WebGLShaderManager.prototype.setContext = function(t) {
            this.gl = t, this.primitiveShader = new e.PrimitiveShader(t), this.complexPrimitiveShader = new e.ComplexPrimitiveShader(t), this.defaultShader = new e.PixiShader(t), this.fastShader = new e.PixiFastShader(t), this.stripShader = new e.StripShader(t), this.setShader(this.defaultShader)
        }, e.WebGLShaderManager.prototype.setAttribs = function(t) {
            var e;
            for (e = 0; e < this.tempAttribState.length; e++) this.tempAttribState[e] = !1;
            for (e = 0; e < t.length; e++) {
                var i = t[e];
                this.tempAttribState[i] = !0
            }
            var s = this.gl;
            for (e = 0; e < this.attribState.length; e++) this.attribState[e] !== this.tempAttribState[e] && (this.attribState[e] = this.tempAttribState[e], this.tempAttribState[e] ? s.enableVertexAttribArray(e) : s.disableVertexAttribArray(e))
        }, e.WebGLShaderManager.prototype.setShader = function(t) {
            return this._currentId !== t._UID && (this._currentId = t._UID, this.currentShader = t, this.gl.useProgram(t.program), this.setAttribs(t.attributes), !0)
        }, e.WebGLShaderManager.prototype.destroy = function() {
            this.attribState = null, this.tempAttribState = null, this.primitiveShader.destroy(), this.complexPrimitiveShader.destroy(), this.defaultShader.destroy(), this.fastShader.destroy(), this.stripShader.destroy(), this.gl = null
        }, e.WebGLSpriteBatch = function() {
            this.vertSize = 5, this.size = 2e3;
            var t = 4 * this.size * 4 * this.vertSize,
                i = 6 * this.size;
            this.vertices = new e.ArrayBuffer(t), this.positions = new e.Float32Array(this.vertices), this.colors = new e.Uint32Array(this.vertices), this.indices = new e.Uint16Array(i), this.lastIndexCount = 0;
            for (var s = 0, n = 0; s < i; s += 6, n += 4) this.indices[s + 0] = n + 0, this.indices[s + 1] = n + 1, this.indices[s + 2] = n + 2, this.indices[s + 3] = n + 0, this.indices[s + 4] = n + 2, this.indices[s + 5] = n + 3;
            this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.dirty = !0, this.textures = [], this.blendModes = [], this.shaders = [], this.sprites = [], this.defaultShader = new e.AbstractFilter(["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"])
        }, e.WebGLSpriteBatch.prototype.setContext = function(t) {
            this.gl = t, this.vertexBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW), this.currentBlendMode = 99999;
            var i = new e.PixiShader(t);
            i.fragmentSrc = this.defaultShader.fragmentSrc, i.uniforms = {}, i.init(), this.defaultShader.shaders[t.id] = i
        }, e.WebGLSpriteBatch.prototype.begin = function(t) {
            this.renderSession = t, this.shader = this.renderSession.shaderManager.defaultShader, this.start()
        }, e.WebGLSpriteBatch.prototype.end = function() {
            this.flush()
        }, e.WebGLSpriteBatch.prototype.render = function(t, e) {
            var i = t.texture,
                s = t.worldTransform;
            e && (s = e), this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = i.baseTexture);
            var n = i._uvs;
            if (n) {
                var a, o, r, h, l = t.anchor.x,
                    c = t.anchor.y;
                if (i.trim) {
                    var u = i.trim;
                    a = (o = u.x - l * u.width) + i.crop.width, r = (h = u.y - c * u.height) + i.crop.height
                } else a = i.frame.width * (1 - l), o = i.frame.width * -l, r = i.frame.height * (1 - c), h = i.frame.height * -c;
                var d = 4 * this.currentBatchSize * this.vertSize,
                    p = i.baseTexture.resolution,
                    m = s.a / p,
                    g = s.b / p,
                    f = s.c / p,
                    _ = s.d / p,
                    y = s.tx,
                    v = s.ty,
                    b = this.colors,
                    S = this.positions;
                this.renderSession.roundPixels ? (S[d] = m * o + f * h + y | 0, S[d + 1] = _ * h + g * o + v | 0, S[d + 5] = m * a + f * h + y | 0, S[d + 6] = _ * h + g * a + v | 0, S[d + 10] = m * a + f * r + y | 0, S[d + 11] = _ * r + g * a + v | 0, S[d + 15] = m * o + f * r + y | 0, S[d + 16] = _ * r + g * o + v | 0) : (S[d] = m * o + f * h + y, S[d + 1] = _ * h + g * o + v, S[d + 5] = m * a + f * h + y, S[d + 6] = _ * h + g * a + v, S[d + 10] = m * a + f * r + y, S[d + 11] = _ * r + g * a + v, S[d + 15] = m * o + f * r + y, S[d + 16] = _ * r + g * o + v), S[d + 2] = n.x0, S[d + 3] = n.y0, S[d + 7] = n.x1, S[d + 8] = n.y1, S[d + 12] = n.x2, S[d + 13] = n.y2, S[d + 17] = n.x3, S[d + 18] = n.y3;
                var T = t.tint;
                b[d + 4] = b[d + 9] = b[d + 14] = b[d + 19] = (T >> 16) + (65280 & T) + ((255 & T) << 16) + (255 * t.worldAlpha << 24), this.sprites[this.currentBatchSize++] = t
            }
        }, e.WebGLSpriteBatch.prototype.renderTilingSprite = function(t) {
            var i = t.tilingTexture;
            this.currentBatchSize >= this.size && (this.flush(), this.currentBaseTexture = i.baseTexture), t._uvs || (t._uvs = new e.TextureUvs);
            var s = t._uvs,
                n = i.baseTexture.width,
                a = i.baseTexture.height;
            t.tilePosition.x %= n * t.tileScaleOffset.x, t.tilePosition.y %= a * t.tileScaleOffset.y;
            var o = t.tilePosition.x / (n * t.tileScaleOffset.x),
                r = t.tilePosition.y / (a * t.tileScaleOffset.y),
                h = t.width / n / (t.tileScale.x * t.tileScaleOffset.x),
                l = t.height / a / (t.tileScale.y * t.tileScaleOffset.y);
            s.x0 = 0 - o, s.y0 = 0 - r, s.x1 = 1 * h - o, s.y1 = 0 - r, s.x2 = 1 * h - o, s.y2 = 1 * l - r, s.x3 = 0 - o, s.y3 = 1 * l - r;
            var c = t.tint,
                u = (c >> 16) + (65280 & c) + ((255 & c) << 16) + (255 * t.worldAlpha << 24),
                d = this.positions,
                p = this.colors,
                m = t.width,
                g = t.height,
                f = t.anchor.x,
                _ = t.anchor.y,
                y = m * (1 - f),
                v = m * -f,
                b = g * (1 - _),
                S = g * -_,
                T = 4 * this.currentBatchSize * this.vertSize,
                E = i.baseTexture.resolution,
                P = t.worldTransform,
                A = P.a / E,
                I = P.b / E,
                C = P.c / E,
                x = P.d / E,
                w = P.tx,
                M = P.ty;
            d[T++] = A * v + C * S + w, d[T++] = x * S + I * v + M, d[T++] = s.x0, d[T++] = s.y0, p[T++] = u, d[T++] = A * y + C * S + w, d[T++] = x * S + I * y + M, d[T++] = s.x1, d[T++] = s.y1, p[T++] = u, d[T++] = A * y + C * b + w, d[T++] = x * b + I * y + M, d[T++] = s.x2, d[T++] = s.y2, p[T++] = u, d[T++] = A * v + C * b + w, d[T++] = x * b + I * v + M, d[T++] = s.x3, d[T++] = s.y3, p[T++] = u, this.sprites[this.currentBatchSize++] = t
        }, e.WebGLSpriteBatch.prototype.flush = function() {
            if (0 !== this.currentBatchSize) {
                var t, i = this.gl;
                if (this.dirty) {
                    this.dirty = !1, i.activeTexture(i.TEXTURE0), i.bindBuffer(i.ARRAY_BUFFER, this.vertexBuffer), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t = this.defaultShader.shaders[i.id];
                    var s = 4 * this.vertSize;
                    i.vertexAttribPointer(t.aVertexPosition, 2, i.FLOAT, !1, s, 0), i.vertexAttribPointer(t.aTextureCoord, 2, i.FLOAT, !1, s, 8), i.vertexAttribPointer(t.colorAttribute, 4, i.UNSIGNED_BYTE, !0, s, 16)
                }
                if (this.currentBatchSize > .5 * this.size) i.bufferSubData(i.ARRAY_BUFFER, 0, this.vertices);
                else {
                    var n = this.positions.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                    i.bufferSubData(i.ARRAY_BUFFER, 0, n)
                }
                for (var a, o, r, h, l = 0, c = 0, u = null, d = this.renderSession.blendModeManager.currentBlendMode, p = null, m = !1, g = !1, f = 0, _ = this.currentBatchSize; f < _; f++) {
                    a = (h = this.sprites[f]).tilingTexture ? h.tilingTexture.baseTexture : h.texture.baseTexture, m = d !== (o = h.blendMode), g = p !== (r = h.shader || this.defaultShader);
                    var y = a.skipRender;
                    if (y && h.children.length > 0 && (y = !1), (u !== a && !y || m || g) && (this.renderBatch(u, l, c), c = f, l = 0, u = a, m && (d = o, this.renderSession.blendModeManager.setBlendMode(d)), g)) {
                        (t = (p = r).shaders[i.id]) || ((t = new e.PixiShader(i)).fragmentSrc = p.fragmentSrc, t.uniforms = p.uniforms, t.init(), p.shaders[i.id] = t), this.renderSession.shaderManager.setShader(t), t.dirty && t.syncUniforms();
                        var v = this.renderSession.projection;
                        i.uniform2f(t.projectionVector, v.x, v.y);
                        var b = this.renderSession.offset;
                        i.uniform2f(t.offsetVector, b.x, b.y)
                    }
                    l++
                }
                this.renderBatch(u, l, c), this.currentBatchSize = 0
            }
        }, e.WebGLSpriteBatch.prototype.renderBatch = function(t, e, i) {
            if (0 !== e) {
                var s = this.gl;
                if (t._dirty[s.id]) {
                    if (!this.renderSession.renderer.updateTexture(t)) return
                } else s.bindTexture(s.TEXTURE_2D, t._glTextures[s.id]);
                s.drawElements(s.TRIANGLES, 6 * e, s.UNSIGNED_SHORT, 6 * i * 2), this.renderSession.drawCount++
            }
        }, e.WebGLSpriteBatch.prototype.stop = function() {
            this.flush(), this.dirty = !0
        }, e.WebGLSpriteBatch.prototype.start = function() {
            this.dirty = !0
        }, e.WebGLSpriteBatch.prototype.destroy = function() {
            this.vertices = null, this.indices = null, this.gl.deleteBuffer(this.vertexBuffer), this.gl.deleteBuffer(this.indexBuffer), this.currentBaseTexture = null, this.gl = null
        }, e.WebGLFastSpriteBatch = function(t) {
            this.vertSize = 10, this.maxSize = 6e3, this.size = this.maxSize;
            var i = 4 * this.size * this.vertSize,
                s = 6 * this.maxSize;
            this.vertices = new e.Float32Array(i), this.indices = new e.Uint16Array(s), this.vertexBuffer = null, this.indexBuffer = null, this.lastIndexCount = 0;
            for (var n = 0, a = 0; n < s; n += 6, a += 4) this.indices[n + 0] = a + 0, this.indices[n + 1] = a + 1, this.indices[n + 2] = a + 2, this.indices[n + 3] = a + 0, this.indices[n + 4] = a + 2, this.indices[n + 5] = a + 3;
            this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.currentBlendMode = 0, this.renderSession = null, this.shader = null, this.matrix = null, this.setContext(t)
        }, e.WebGLFastSpriteBatch.prototype.constructor = e.WebGLFastSpriteBatch, e.WebGLFastSpriteBatch.prototype.setContext = function(t) {
            this.gl = t, this.vertexBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW)
        }, e.WebGLFastSpriteBatch.prototype.begin = function(t, e) {
            this.renderSession = e, this.shader = this.renderSession.shaderManager.fastShader, this.matrix = t.worldTransform.toArray(!0), this.start()
        }, e.WebGLFastSpriteBatch.prototype.end = function() {
            this.flush()
        }, e.WebGLFastSpriteBatch.prototype.render = function(t) {
            var e = t.children,
                i = e[0];
            if (i.texture._uvs) {
                this.currentBaseTexture = i.texture.baseTexture, i.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(i.blendMode));
                for (var s = 0, n = e.length; s < n; s++) this.renderSprite(e[s]);
                this.flush()
            }
        }, e.WebGLFastSpriteBatch.prototype.renderSprite = function(t) {
            if (t.visible && (t.texture.baseTexture === this.currentBaseTexture || t.texture.baseTexture.skipRender || (this.flush(), this.currentBaseTexture = t.texture.baseTexture, t.texture._uvs))) {
                var e, i, s, n, a, o, r = this.vertices;
                if (e = t.texture._uvs, t.texture.frame.width, t.texture.frame.height, t.texture.trim) {
                    var h = t.texture.trim;
                    i = (s = h.x - t.anchor.x * h.width) + t.texture.crop.width, n = (a = h.y - t.anchor.y * h.height) + t.texture.crop.height
                } else i = t.texture.frame.width * (1 - t.anchor.x), s = t.texture.frame.width * -t.anchor.x, n = t.texture.frame.height * (1 - t.anchor.y), a = t.texture.frame.height * -t.anchor.y;
                o = 4 * this.currentBatchSize * this.vertSize, r[o++] = s, r[o++] = a, r[o++] = t.position.x, r[o++] = t.position.y, r[o++] = t.scale.x, r[o++] = t.scale.y, r[o++] = t.rotation, r[o++] = e.x0, r[o++] = e.y1, r[o++] = t.alpha, r[o++] = i, r[o++] = a, r[o++] = t.position.x, r[o++] = t.position.y, r[o++] = t.scale.x, r[o++] = t.scale.y, r[o++] = t.rotation, r[o++] = e.x1, r[o++] = e.y1, r[o++] = t.alpha, r[o++] = i, r[o++] = n, r[o++] = t.position.x, r[o++] = t.position.y, r[o++] = t.scale.x, r[o++] = t.scale.y, r[o++] = t.rotation, r[o++] = e.x2, r[o++] = e.y2, r[o++] = t.alpha, r[o++] = s, r[o++] = n, r[o++] = t.position.x, r[o++] = t.position.y, r[o++] = t.scale.x, r[o++] = t.scale.y, r[o++] = t.rotation, r[o++] = e.x3, r[o++] = e.y3, r[o++] = t.alpha, ++this.currentBatchSize >= this.size && this.flush()
            }
        }, e.WebGLFastSpriteBatch.prototype.flush = function() {
            if (0 !== this.currentBatchSize) {
                var t = this.gl;
                if (this.currentBaseTexture._glTextures[t.id] || this.renderSession.renderer.updateTexture(this.currentBaseTexture, t), t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id]), this.currentBatchSize > .5 * this.size) t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices);
                else {
                    var e = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                    t.bufferSubData(t.ARRAY_BUFFER, 0, e)
                }
                t.drawElements(t.TRIANGLES, 6 * this.currentBatchSize, t.UNSIGNED_SHORT, 0), this.currentBatchSize = 0, this.renderSession.drawCount++
            }
        }, e.WebGLFastSpriteBatch.prototype.stop = function() {
            this.flush()
        }, e.WebGLFastSpriteBatch.prototype.start = function() {
            var t = this.gl;
            t.activeTexture(t.TEXTURE0), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
            var e = this.renderSession.projection;
            t.uniform2f(this.shader.projectionVector, e.x, e.y), t.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
            var i = 4 * this.vertSize;
            t.vertexAttribPointer(this.shader.aVertexPosition, 2, t.FLOAT, !1, i, 0), t.vertexAttribPointer(this.shader.aPositionCoord, 2, t.FLOAT, !1, i, 8), t.vertexAttribPointer(this.shader.aScale, 2, t.FLOAT, !1, i, 16), t.vertexAttribPointer(this.shader.aRotation, 1, t.FLOAT, !1, i, 24), t.vertexAttribPointer(this.shader.aTextureCoord, 2, t.FLOAT, !1, i, 28), t.vertexAttribPointer(this.shader.colorAttribute, 1, t.FLOAT, !1, i, 36)
        }, e.WebGLFilterManager = function() {
            this.filterStack = [], this.offsetX = 0, this.offsetY = 0
        }, e.WebGLFilterManager.prototype.constructor = e.WebGLFilterManager, e.WebGLFilterManager.prototype.setContext = function(t) {
            this.gl = t, this.texturePool = [], this.initShaderBuffers()
        }, e.WebGLFilterManager.prototype.begin = function(t, e) {
            this.renderSession = t, this.defaultShader = t.shaderManager.defaultShader;
            var i = this.renderSession.projection;
            this.width = 2 * i.x, this.height = 2 * -i.y, this.buffer = e
        }, e.WebGLFilterManager.prototype.pushFilter = function(t) {
            var i = this.gl,
                s = this.renderSession.projection,
                n = this.renderSession.offset;
            t._filterArea = t.target.filterArea || t.target.getBounds(), t._previous_stencil_mgr = this.renderSession.stencilManager, this.renderSession.stencilManager = new e.WebGLStencilManager, this.renderSession.stencilManager.setContext(i), i.disable(i.STENCIL_TEST), this.filterStack.push(t);
            var a = t.filterPasses[0];
            this.offsetX += t._filterArea.x, this.offsetY += t._filterArea.y;
            var o = this.texturePool.pop();
            o ? o.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution) : o = new e.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution), i.bindTexture(i.TEXTURE_2D, o.texture);
            var r = t._filterArea,
                h = a.padding;
            r.x -= h, r.y -= h, r.width += 2 * h, r.height += 2 * h, r.x < 0 && (r.x = 0), r.width > this.width && (r.width = this.width), r.y < 0 && (r.y = 0), r.height > this.height && (r.height = this.height), i.bindFramebuffer(i.FRAMEBUFFER, o.frameBuffer), i.viewport(0, 0, r.width * this.renderSession.resolution, r.height * this.renderSession.resolution), s.x = r.width / 2, s.y = -r.height / 2, n.x = -r.x, n.y = -r.y, i.colorMask(!0, !0, !0, !0), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), t._glFilterTexture = o
        }, e.WebGLFilterManager.prototype.popFilter = function() {
            var t = this.gl,
                i = this.filterStack.pop(),
                s = i._filterArea,
                n = i._glFilterTexture,
                a = this.renderSession.projection,
                o = this.renderSession.offset;
            if (i.filterPasses.length > 1) {
                t.viewport(0, 0, s.width * this.renderSession.resolution, s.height * this.renderSession.resolution), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = 0, this.vertexArray[1] = s.height, this.vertexArray[2] = s.width, this.vertexArray[3] = s.height, this.vertexArray[4] = 0, this.vertexArray[5] = 0, this.vertexArray[6] = s.width, this.vertexArray[7] = 0, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = s.width / this.width, this.uvArray[5] = s.height / this.height, this.uvArray[6] = s.width / this.width, this.uvArray[7] = s.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray);
                var r = n,
                    h = this.texturePool.pop();
                h || (h = new e.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution)), h.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution), t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer), t.clear(t.COLOR_BUFFER_BIT), t.disable(t.BLEND);
                for (var l = 0; l < i.filterPasses.length - 1; l++) {
                    var c = i.filterPasses[l];
                    t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, r.texture), this.applyFilterPass(c, s, s.width, s.height);
                    var u = r;
                    r = h, h = u
                }
                t.enable(t.BLEND), n = r, this.texturePool.push(h)
            }
            var d = i.filterPasses[i.filterPasses.length - 1];
            this.offsetX -= s.x, this.offsetY -= s.y;
            var p = this.width,
                m = this.height,
                g = 0,
                f = 0,
                _ = this.buffer;
            if (0 === this.filterStack.length) t.colorMask(!0, !0, !0, !0);
            else {
                var y = this.filterStack[this.filterStack.length - 1];
                p = (s = y._filterArea).width, m = s.height, g = s.x, f = s.y, _ = y._glFilterTexture.frameBuffer
            }
            a.x = p / 2, a.y = -m / 2, o.x = g, o.y = f;
            var v = (s = i._filterArea).x - g,
                b = s.y - f;
            t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = v, this.vertexArray[1] = b + s.height, this.vertexArray[2] = v + s.width, this.vertexArray[3] = b + s.height, this.vertexArray[4] = v, this.vertexArray[5] = b, this.vertexArray[6] = v + s.width, this.vertexArray[7] = b, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = s.width / this.width, this.uvArray[5] = s.height / this.height, this.uvArray[6] = s.width / this.width, this.uvArray[7] = s.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray), t.viewport(0, 0, p * this.renderSession.resolution, m * this.renderSession.resolution), t.bindFramebuffer(t.FRAMEBUFFER, _), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, n.texture), this.renderSession.stencilManager && this.renderSession.stencilManager.destroy(), this.renderSession.stencilManager = i._previous_stencil_mgr, i._previous_stencil_mgr = null, this.renderSession.stencilManager.count > 0 ? t.enable(t.STENCIL_TEST) : t.disable(t.STENCIL_TEST), this.applyFilterPass(d, s, p, m), this.texturePool.push(n), i._glFilterTexture = null
        }, e.WebGLFilterManager.prototype.applyFilterPass = function(t, i, s, n) {
            var a = this.gl,
                o = t.shaders[a.id];
            o || ((o = new e.PixiShader(a)).fragmentSrc = t.fragmentSrc, o.uniforms = t.uniforms, o.init(), t.shaders[a.id] = o), this.renderSession.shaderManager.setShader(o), a.uniform2f(o.projectionVector, s / 2, -n / 2), a.uniform2f(o.offsetVector, 0, 0), t.uniforms.dimensions && (t.uniforms.dimensions.value[0] = this.width, t.uniforms.dimensions.value[1] = this.height, t.uniforms.dimensions.value[2] = this.vertexArray[0], t.uniforms.dimensions.value[3] = this.vertexArray[5]), o.syncUniforms(), a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer), a.vertexAttribPointer(o.aVertexPosition, 2, a.FLOAT, !1, 0, 0), a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer), a.vertexAttribPointer(o.aTextureCoord, 2, a.FLOAT, !1, 0, 0), a.bindBuffer(a.ARRAY_BUFFER, this.colorBuffer), a.vertexAttribPointer(o.colorAttribute, 2, a.FLOAT, !1, 0, 0), a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer), a.drawElements(a.TRIANGLES, 6, a.UNSIGNED_SHORT, 0), this.renderSession.drawCount++
        }, e.WebGLFilterManager.prototype.initShaderBuffers = function() {
            var t = this.gl;
            this.vertexBuffer = t.createBuffer(), this.uvBuffer = t.createBuffer(), this.colorBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), this.vertexArray = new e.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertexArray, t.STATIC_DRAW), this.uvArray = new e.Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), t.bufferData(t.ARRAY_BUFFER, this.uvArray, t.STATIC_DRAW), this.colorArray = new e.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]), t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer), t.bufferData(t.ARRAY_BUFFER, this.colorArray, t.STATIC_DRAW), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), t.STATIC_DRAW)
        }, e.WebGLFilterManager.prototype.destroy = function() {
            var t = this.gl;
            this.filterStack = null, this.offsetX = 0, this.offsetY = 0;
            for (var e = 0; e < this.texturePool.length; e++) this.texturePool[e].destroy();
            this.texturePool = null, t.deleteBuffer(this.vertexBuffer), t.deleteBuffer(this.uvBuffer), t.deleteBuffer(this.colorBuffer), t.deleteBuffer(this.indexBuffer)
        }, e.FilterTexture = function(t, i, s, n) {
            this.gl = t, this.frameBuffer = t.createFramebuffer(), this.texture = t.createTexture(), n = n || e.scaleModes.DEFAULT, t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, n === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, n === e.scaleModes.LINEAR ? t.LINEAR : t.NEAREST), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0), this.renderBuffer = t.createRenderbuffer(), t.bindRenderbuffer(t.RENDERBUFFER, this.renderBuffer), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_STENCIL_ATTACHMENT, t.RENDERBUFFER, this.renderBuffer), this.resize(i, s)
        }, e.FilterTexture.prototype.constructor = e.FilterTexture, e.FilterTexture.prototype.clear = function() {
            var t = this.gl;
            t.clearColor(0, 0, 0, 0), t.clear(t.COLOR_BUFFER_BIT)
        }, e.FilterTexture.prototype.resize = function(t, e) {
            if (this.width !== t || this.height !== e) {
                this.width = t, this.height = e;
                var i = this.gl;
                i.bindTexture(i.TEXTURE_2D, this.texture), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, t, e, 0, i.RGBA, i.UNSIGNED_BYTE, null), i.bindRenderbuffer(i.RENDERBUFFER, this.renderBuffer), i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, t, e)
            }
        }, e.FilterTexture.prototype.destroy = function() {
            var t = this.gl;
            t.deleteFramebuffer(this.frameBuffer), t.deleteTexture(this.texture), this.frameBuffer = null, this.texture = null
        }, e.CanvasBuffer = function(t, i) {
            this.width = t, this.height = i, this.canvas = e.CanvasPool.create(this, this.width, this.height), this.context = this.canvas.getContext("2d"), this.canvas.width = t, this.canvas.height = i
        }, e.CanvasBuffer.prototype.constructor = e.CanvasBuffer, e.CanvasBuffer.prototype.clear = function() {
            this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.width, this.height)
        }, e.CanvasBuffer.prototype.resize = function(t, e) {
            this.width = this.canvas.width = t, this.height = this.canvas.height = e
        }, e.CanvasBuffer.prototype.destroy = function() {
            e.CanvasPool.remove(this)
        }, e.CanvasMaskManager = function() {}, e.CanvasMaskManager.prototype.constructor = e.CanvasMaskManager, e.CanvasMaskManager.prototype.pushMask = function(t, i) {
            var s = i.context;
            s.save();
            var n = t.alpha,
                a = t.worldTransform,
                o = i.resolution;
            s.setTransform(a.a * o, a.b * o, a.c * o, a.d * o, a.tx * o, a.ty * o), e.CanvasGraphics.renderGraphicsMask(t, s), s.clip(), t.worldAlpha = n
        }, e.CanvasMaskManager.prototype.popMask = function(t) {
            t.context.restore()
        }, e.CanvasTinter = function() {}, e.CanvasTinter.getTintedTexture = function(t, i) {
            var s = t.tintedTexture || e.CanvasPool.create(this);
            return e.CanvasTinter.tintMethod(t.texture, i, s), s
        }, e.CanvasTinter.tintWithMultiply = function(t, e, i) {
            var s = i.getContext("2d"),
                n = t.crop;
            i.width === n.width && i.height === n.height || (i.width = n.width, i.height = n.height), s.clearRect(0, 0, n.width, n.height), s.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), s.fillRect(0, 0, n.width, n.height), s.globalCompositeOperation = "multiply", s.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height), s.globalCompositeOperation = "destination-atop", s.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height)
        }, e.CanvasTinter.tintWithPerPixel = function(t, i, s) {
            var n = s.getContext("2d"),
                a = t.crop;
            s.width = a.width, s.height = a.height, n.globalCompositeOperation = "copy", n.drawImage(t.baseTexture.source, a.x, a.y, a.width, a.height, 0, 0, a.width, a.height);
            for (var o = e.hex2rgb(i), r = o[0], h = o[1], l = o[2], c = n.getImageData(0, 0, a.width, a.height), u = c.data, d = 0; d < u.length; d += 4)
                if (u[d + 0] *= r, u[d + 1] *= h, u[d + 2] *= l, !e.CanvasTinter.canHandleAlpha) {
                    var p = u[d + 3];
                    u[d + 0] /= 255 / p, u[d + 1] /= 255 / p, u[d + 2] /= 255 / p
                }
            n.putImageData(c, 0, 0)
        }, e.CanvasTinter.checkInverseAlpha = function() {
            var t = new e.CanvasBuffer(2, 1);
            t.context.fillStyle = "rgba(10, 20, 30, 0.5)", t.context.fillRect(0, 0, 1, 1);
            var i = t.context.getImageData(0, 0, 1, 1);
            if (null === i) return !1;
            t.context.putImageData(i, 1, 0);
            var s = t.context.getImageData(1, 0, 1, 1);
            return s.data[0] === i.data[0] && s.data[1] === i.data[1] && s.data[2] === i.data[2] && s.data[3] === i.data[3]
        }, e.CanvasTinter.canHandleAlpha = e.CanvasTinter.checkInverseAlpha(), e.CanvasTinter.canUseMultiply = e.canUseNewCanvasBlendModes(), e.CanvasTinter.tintMethod = e.CanvasTinter.canUseMultiply ? e.CanvasTinter.tintWithMultiply : e.CanvasTinter.tintWithPerPixel, e.CanvasRenderer = function(t) {
            this.game = t, e.defaultRenderer || (e.defaultRenderer = this), this.type = e.CANVAS_RENDERER, this.resolution = t.resolution, this.clearBeforeRender = t.clearBeforeRender, this.transparent = t.transparent, this.autoResize = !1, this.width = t.width * this.resolution, this.height = t.height * this.resolution, this.view = t.canvas, this.context = this.view.getContext("2d", {
                alpha: this.transparent
            }), this.refresh = !0, this.count = 0, this.maskManager = new e.CanvasMaskManager, this.renderSession = {
                context: this.context,
                maskManager: this.maskManager,
                scaleMode: null,
                smoothProperty: Phaser.Canvas.getSmoothingPrefix(this.context),
                roundPixels: !1
            }, this.mapBlendModes(), this.resize(this.width, this.height)
        }, e.CanvasRenderer.prototype.constructor = e.CanvasRenderer, e.CanvasRenderer.prototype.render = function(t) {
            this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.globalAlpha = 1, this.renderSession.currentBlendMode = 0, this.renderSession.shakeX = this.game.camera._shake.x, this.renderSession.shakeY = this.game.camera._shake.y, this.context.globalCompositeOperation = "source-over", navigator.isCocoonJS && this.view.screencanvas && (this.context.fillStyle = "black", this.context.clear()), this.clearBeforeRender && (this.transparent ? this.context.clearRect(0, 0, this.width, this.height) : t._bgColor && (this.context.fillStyle = t._bgColor.rgba, this.context.fillRect(0, 0, this.width, this.height))), this.renderDisplayObject(t)
        }, e.CanvasRenderer.prototype.destroy = function(t) {
            void 0 === t && (t = !0), t && this.view.parent && this.view.parent.removeChild(this.view), this.view = null, this.context = null, this.maskManager = null, this.renderSession = null
        }, e.CanvasRenderer.prototype.resize = function(t, i) {
            this.width = t * this.resolution, this.height = i * this.resolution, this.view.width = this.width, this.view.height = this.height, this.autoResize && (this.view.style.width = this.width / this.resolution + "px", this.view.style.height = this.height / this.resolution + "px"), this.renderSession.smoothProperty && (this.context[this.renderSession.smoothProperty] = this.renderSession.scaleMode === e.scaleModes.LINEAR)
        }, e.CanvasRenderer.prototype.renderDisplayObject = function(t, e, i) {
            this.renderSession.context = e || this.context, this.renderSession.resolution = this.resolution, t._renderCanvas(this.renderSession, i)
        }, e.CanvasRenderer.prototype.mapBlendModes = function() {
            if (!e.blendModesCanvas) {
                var t = [],
                    i = e.blendModes,
                    s = e.canUseNewCanvasBlendModes();
                t[i.NORMAL] = "source-over", t[i.ADD] = "lighter", t[i.MULTIPLY] = s ? "multiply" : "source-over", t[i.SCREEN] = s ? "screen" : "source-over", t[i.OVERLAY] = s ? "overlay" : "source-over", t[i.DARKEN] = s ? "darken" : "source-over", t[i.LIGHTEN] = s ? "lighten" : "source-over", t[i.COLOR_DODGE] = s ? "color-dodge" : "source-over", t[i.COLOR_BURN] = s ? "color-burn" : "source-over", t[i.HARD_LIGHT] = s ? "hard-light" : "source-over", t[i.SOFT_LIGHT] = s ? "soft-light" : "source-over", t[i.DIFFERENCE] = s ? "difference" : "source-over", t[i.EXCLUSION] = s ? "exclusion" : "source-over", t[i.HUE] = s ? "hue" : "source-over", t[i.SATURATION] = s ? "saturation" : "source-over", t[i.COLOR] = s ? "color" : "source-over", t[i.LUMINOSITY] = s ? "luminosity" : "source-over", e.blendModesCanvas = t
            }
        }, e.BaseTexture = function(t, i) {
            this.resolution = 1, this.width = 100, this.height = 100, this.scaleMode = i || e.scaleModes.DEFAULT, this.hasLoaded = !1, this.source = t, this.premultipliedAlpha = !0, this._glTextures = [], this.mipmap = !1, this._dirty = [!0, !0, !0, !0], t && ((this.source.complete || this.source.getContext) && this.source.width && this.source.height && (this.hasLoaded = !0, this.width = this.source.naturalWidth || this.source.width, this.height = this.source.naturalHeight || this.source.height, this.dirty()), this.skipRender = !1, this._powerOf2 = !1)
        }, e.BaseTexture.prototype.constructor = e.BaseTexture, e.BaseTexture.prototype.forceLoaded = function(t, e) {
            this.hasLoaded = !0, this.width = t, this.height = e, this.dirty()
        }, e.BaseTexture.prototype.destroy = function() {
            this.source && e.CanvasPool.removeByCanvas(this.source), this.source = null, this.unloadFromGPU()
        }, e.BaseTexture.prototype.updateSourceImage = function(t) {}, e.BaseTexture.prototype.dirty = function() {
            for (var t = 0; t < this._glTextures.length; t++) this._dirty[t] = !0
        }, e.BaseTexture.prototype.unloadFromGPU = function() {
            this.dirty();
            for (var t = this._glTextures.length - 1; t >= 0; t--) {
                var i = this._glTextures[t],
                    s = e.glContexts[t];
                s && i && s.deleteTexture(i)
            }
            this._glTextures.length = 0, this.dirty()
        }, e.BaseTexture.fromCanvas = function(t, i) {
            return 0 === t.width && (t.width = 1), 0 === t.height && (t.height = 1), new e.BaseTexture(t, i)
        }, e.TextureSilentFail = !1, e.Texture = function(t, i, s, n) {
            this.noFrame = !1, i || (this.noFrame = !0, i = new e.Rectangle(0, 0, 1, 1)), t instanceof e.Texture && (t = t.baseTexture), this.baseTexture = t, this.frame = i, this.trim = n, this.valid = !1, this.isTiling = !1, this.requiresUpdate = !1, this.requiresReTint = !1, this._uvs = null, this.width = 0, this.height = 0, this.crop = s || new e.Rectangle(0, 0, 1, 1), t.hasLoaded && (this.noFrame && (i = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(i))
        }, e.Texture.prototype.constructor = e.Texture, e.Texture.prototype.onBaseTextureLoaded = function() {
            var t = this.baseTexture;
            this.noFrame && (this.frame = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(this.frame)
        }, e.Texture.prototype.destroy = function(t) {
            t && this.baseTexture.destroy(), this.valid = !1
        }, e.Texture.prototype.setFrame = function(t) {
            if (this.noFrame = !1, this.frame = t, this.width = t.width, this.height = t.height, this.crop.x = t.x, this.crop.y = t.y, this.crop.width = t.width, this.crop.height = t.height, this.trim || !(t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height)) this.valid = t && t.width && t.height && this.baseTexture.source && this.baseTexture.hasLoaded, this.trim && (this.width = this.trim.width, this.height = this.trim.height, this.frame.width = this.trim.width, this.frame.height = this.trim.height), this.valid && this._updateUvs();
            else {
                if (!e.TextureSilentFail) throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
                this.valid = !1
            }
        }, e.Texture.prototype._updateUvs = function() {
            this._uvs || (this._uvs = new e.TextureUvs);
            var t = this.crop,
                i = this.baseTexture.width,
                s = this.baseTexture.height;
            this._uvs.x0 = t.x / i, this._uvs.y0 = t.y / s, this._uvs.x1 = (t.x + t.width) / i, this._uvs.y1 = t.y / s, this._uvs.x2 = (t.x + t.width) / i, this._uvs.y2 = (t.y + t.height) / s, this._uvs.x3 = t.x / i, this._uvs.y3 = (t.y + t.height) / s
        }, e.Texture.fromCanvas = function(t, i) {
            var s = e.BaseTexture.fromCanvas(t, i);
            return new e.Texture(s)
        }, e.TextureUvs = function() {
            this.x0 = 0, this.y0 = 0, this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.x3 = 0, this.y3 = 0
        }, e.RenderTexture = function(t, i, s, n, a) {
            if (this.width = t || 100, this.height = i || 100, this.resolution = a || 1, this.frame = new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.crop = new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution), this.baseTexture = new e.BaseTexture, this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution, this.baseTexture._glTextures = [], this.baseTexture.resolution = this.resolution, this.baseTexture.scaleMode = n || e.scaleModes.DEFAULT, this.baseTexture.hasLoaded = !0, e.Texture.call(this, this.baseTexture, new e.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)), this.renderer = s || e.defaultRenderer, this.renderer.type === e.WEBGL_RENDERER) {
                var o = this.renderer.gl;
                this.baseTexture._dirty[o.id] = !1, this.textureBuffer = new e.FilterTexture(o, this.width, this.height, this.baseTexture.scaleMode), this.baseTexture._glTextures[o.id] = this.textureBuffer.texture, this.render = this.renderWebGL, this.projection = new e.Point(.5 * this.width, .5 * -this.height)
            } else this.render = this.renderCanvas, this.textureBuffer = new e.CanvasBuffer(this.width * this.resolution, this.height * this.resolution), this.baseTexture.source = this.textureBuffer.canvas;
            this.valid = !0, this.tempMatrix = new Phaser.Matrix, this._updateUvs()
        }, e.RenderTexture.prototype = Object.create(e.Texture.prototype), e.RenderTexture.prototype.constructor = e.RenderTexture, e.RenderTexture.prototype.resize = function(t, i, s) {
            t === this.width && i === this.height || (this.valid = t > 0 && i > 0, this.width = t, this.height = i, this.frame.width = this.crop.width = t * this.resolution, this.frame.height = this.crop.height = i * this.resolution, s && (this.baseTexture.width = this.width * this.resolution, this.baseTexture.height = this.height * this.resolution), this.renderer.type === e.WEBGL_RENDERER && (this.projection.x = this.width / 2, this.projection.y = -this.height / 2), this.valid && this.textureBuffer.resize(this.width, this.height))
        }, e.RenderTexture.prototype.clear = function() {
            this.valid && (this.renderer.type === e.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear())
        }, e.RenderTexture.prototype.renderWebGL = function(t, e, i) {
            if (this.valid && 0 !== t.alpha) {
                var s = t.worldTransform;
                s.identity(), s.translate(0, 2 * this.projection.y), e && s.append(e), s.scale(1, -1);
                for (var n = 0; n < t.children.length; n++) t.children[n].updateTransform();
                var a = this.renderer.gl;
                a.viewport(0, 0, this.width * this.resolution, this.height * this.resolution), a.bindFramebuffer(a.FRAMEBUFFER, this.textureBuffer.frameBuffer), i && this.textureBuffer.clear(), this.renderer.spriteBatch.dirty = !0, this.renderer.renderDisplayObject(t, this.projection, this.textureBuffer.frameBuffer, e), this.renderer.spriteBatch.dirty = !0
            }
        }, e.RenderTexture.prototype.renderCanvas = function(t, e, i) {
            if (this.valid && 0 !== t.alpha) {
                var s = t.worldTransform;
                s.identity(), e && s.append(e);
                for (var n = 0; n < t.children.length; n++) t.children[n].updateTransform();
                i && this.textureBuffer.clear();
                var a = this.renderer.resolution;
                this.renderer.resolution = this.resolution, this.renderer.renderDisplayObject(t, this.textureBuffer.context, e), this.renderer.resolution = a
            }
        }, e.RenderTexture.prototype.getImage = function() {
            var t = new Image;
            return t.src = this.getBase64(), t
        }, e.RenderTexture.prototype.getBase64 = function() {
            return this.getCanvas().toDataURL()
        }, e.RenderTexture.prototype.getCanvas = function() {
            if (this.renderer.type === e.WEBGL_RENDERER) {
                var t = this.renderer.gl,
                    i = this.textureBuffer.width,
                    s = this.textureBuffer.height,
                    n = new Uint8Array(4 * i * s);
                t.bindFramebuffer(t.FRAMEBUFFER, this.textureBuffer.frameBuffer), t.readPixels(0, 0, i, s, t.RGBA, t.UNSIGNED_BYTE, n), t.bindFramebuffer(t.FRAMEBUFFER, null);
                var a = new e.CanvasBuffer(i, s),
                    o = a.context.getImageData(0, 0, i, s);
                return o.data.set(n), a.context.putImageData(o, 0, 0), a.canvas
            }
            return this.textureBuffer.canvas
        }, e.AbstractFilter = function(t, e) {
            this.passes = [this], this.shaders = [], this.dirty = !0, this.padding = 0, this.uniforms = e || {}, this.fragmentSrc = t || []
        }, e.AbstractFilter.prototype.constructor = e.AbstractFilter, e.AbstractFilter.prototype.syncUniforms = function() {
            for (var t = 0, e = this.shaders.length; t < e; t++) this.shaders[t].dirty = !0
        }, e.Strip = function(t) {
            e.DisplayObjectContainer.call(this), this.texture = t, this.uvs = new e.Float32Array([0, 1, 1, 1, 1, 0, 0, 1]), this.vertices = new e.Float32Array([0, 0, 100, 0, 100, 100, 0, 100]), this.colors = new e.Float32Array([1, 1, 1, 1]), this.indices = new e.Uint16Array([0, 1, 2, 3]), this.dirty = !0, this.blendMode = e.blendModes.NORMAL, this.canvasPadding = 0, this.drawMode = e.Strip.DrawModes.TRIANGLE_STRIP
        }, e.Strip.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Strip.prototype.constructor = e.Strip, e.Strip.prototype._renderWebGL = function(t) {
            !this.visible || this.alpha <= 0 || (t.spriteBatch.stop(), this._vertexBuffer || this._initWebGL(t), t.shaderManager.setShader(t.shaderManager.stripShader), this._renderStrip(t), t.spriteBatch.start())
        }, e.Strip.prototype._initWebGL = function(t) {
            var e = t.gl;
            this._vertexBuffer = e.createBuffer(), this._indexBuffer = e.createBuffer(), this._uvBuffer = e.createBuffer(), this._colorBuffer = e.createBuffer(), e.bindBuffer(e.ARRAY_BUFFER, this._vertexBuffer), e.bufferData(e.ARRAY_BUFFER, this.vertices, e.DYNAMIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this._uvBuffer), e.bufferData(e.ARRAY_BUFFER, this.uvs, e.STATIC_DRAW), e.bindBuffer(e.ARRAY_BUFFER, this._colorBuffer), e.bufferData(e.ARRAY_BUFFER, this.colors, e.STATIC_DRAW), e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._indexBuffer), e.bufferData(e.ELEMENT_ARRAY_BUFFER, this.indices, e.STATIC_DRAW)
        }, e.Strip.prototype._renderStrip = function(t) {
            var i = t.gl,
                s = t.projection,
                n = t.offset,
                a = t.shaderManager.stripShader,
                o = this.drawMode === e.Strip.DrawModes.TRIANGLE_STRIP ? i.TRIANGLE_STRIP : i.TRIANGLES;
            t.blendModeManager.setBlendMode(this.blendMode), i.uniformMatrix3fv(a.translationMatrix, !1, this.worldTransform.toArray(!0)), i.uniform2f(a.projectionVector, s.x, -s.y), i.uniform2f(a.offsetVector, -n.x, -n.y), i.uniform1f(a.alpha, this.worldAlpha), this.dirty ? (this.dirty = !1, i.bindBuffer(i.ARRAY_BUFFER, this._vertexBuffer), i.bufferData(i.ARRAY_BUFFER, this.vertices, i.STATIC_DRAW), i.vertexAttribPointer(a.aVertexPosition, 2, i.FLOAT, !1, 0, 0), i.bindBuffer(i.ARRAY_BUFFER, this._uvBuffer), i.bufferData(i.ARRAY_BUFFER, this.uvs, i.STATIC_DRAW), i.vertexAttribPointer(a.aTextureCoord, 2, i.FLOAT, !1, 0, 0), i.activeTexture(i.TEXTURE0), this.texture.baseTexture._dirty[i.id] ? t.renderer.updateTexture(this.texture.baseTexture) : i.bindTexture(i.TEXTURE_2D, this.texture.baseTexture._glTextures[i.id]), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, this._indexBuffer), i.bufferData(i.ELEMENT_ARRAY_BUFFER, this.indices, i.STATIC_DRAW)) : (i.bindBuffer(i.ARRAY_BUFFER, this._vertexBuffer), i.bufferSubData(i.ARRAY_BUFFER, 0, this.vertices), i.vertexAttribPointer(a.aVertexPosition, 2, i.FLOAT, !1, 0, 0), i.bindBuffer(i.ARRAY_BUFFER, this._uvBuffer), i.vertexAttribPointer(a.aTextureCoord, 2, i.FLOAT, !1, 0, 0), i.activeTexture(i.TEXTURE0), this.texture.baseTexture._dirty[i.id] ? t.renderer.updateTexture(this.texture.baseTexture) : i.bindTexture(i.TEXTURE_2D, this.texture.baseTexture._glTextures[i.id]), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, this._indexBuffer)), i.drawElements(o, this.indices.length, i.UNSIGNED_SHORT, 0)
        }, e.Strip.prototype._renderCanvas = function(t) {
            var i = t.context,
                s = this.worldTransform,
                n = s.tx * t.resolution + t.shakeX,
                a = s.ty * t.resolution + t.shakeY;
            t.roundPixels ? i.setTransform(s.a, s.b, s.c, s.d, 0 | n, 0 | a) : i.setTransform(s.a, s.b, s.c, s.d, n, a), this.drawMode === e.Strip.DrawModes.TRIANGLE_STRIP ? this._renderCanvasTriangleStrip(i) : this._renderCanvasTriangles(i)
        }, e.Strip.prototype._renderCanvasTriangleStrip = function(t) {
            var e = this.vertices,
                i = this.uvs,
                s = e.length / 2;
            this.count++;
            for (var n = 0; n < s - 2; n++) {
                var a = 2 * n;
                this._renderCanvasDrawTriangle(t, e, i, a, a + 2, a + 4)
            }
        }, e.Strip.prototype._renderCanvasTriangles = function(t) {
            var e = this.vertices,
                i = this.uvs,
                s = this.indices,
                n = s.length;
            this.count++;
            for (var a = 0; a < n; a += 3) {
                var o = 2 * s[a],
                    r = 2 * s[a + 1],
                    h = 2 * s[a + 2];
                this._renderCanvasDrawTriangle(t, e, i, o, r, h)
            }
        }, e.Strip.prototype._renderCanvasDrawTriangle = function(t, e, i, s, n, a) {
            var o = this.texture.baseTexture.source,
                r = this.texture.width,
                h = this.texture.height,
                l = e[s],
                c = e[n],
                u = e[a],
                d = e[s + 1],
                p = e[n + 1],
                m = e[a + 1],
                g = i[s] * r,
                f = i[n] * r,
                _ = i[a] * r,
                y = i[s + 1] * h,
                v = i[n + 1] * h,
                b = i[a + 1] * h;
            if (this.canvasPadding > 0) {
                var S = this.canvasPadding / this.worldTransform.a,
                    T = this.canvasPadding / this.worldTransform.d,
                    E = (l + c + u) / 3,
                    P = (d + p + m) / 3,
                    A = l - E,
                    I = d - P,
                    C = Math.sqrt(A * A + I * I);
                l = E + A / C * (C + S), d = P + I / C * (C + T), I = p - P, c = E + (A = c - E) / (C = Math.sqrt(A * A + I * I)) * (C + S), p = P + I / C * (C + T), I = m - P, u = E + (A = u - E) / (C = Math.sqrt(A * A + I * I)) * (C + S), m = P + I / C * (C + T)
            }
            t.save(), t.beginPath(), t.moveTo(l, d), t.lineTo(c, p), t.lineTo(u, m), t.closePath(), t.clip();
            var x = g * v + y * _ + f * b - v * _ - y * f - g * b,
                w = l * v + y * u + c * b - v * u - y * c - l * b,
                M = g * c + l * _ + f * u - c * _ - l * f - g * u,
                O = g * v * u + y * c * _ + l * f * b - l * v * _ - y * f * u - g * c * b,
                L = d * v + y * m + p * b - v * m - y * p - d * b,
                N = g * p + d * _ + f * m - p * _ - d * f - g * m,
                k = g * v * m + y * p * _ + d * f * b - d * v * _ - y * f * m - g * p * b;
            t.transform(w / x, L / x, M / x, N / x, O / x, k / x), t.drawImage(o, 0, 0), t.restore()
        }, e.Strip.prototype.renderStripFlat = function(t) {
            var e = this.context,
                i = t.vertices,
                s = i.length / 2;
            this.count++, e.beginPath();
            for (var n = 1; n < s - 2; n++) {
                var a = 2 * n,
                    o = i[a],
                    r = i[a + 2],
                    h = i[a + 4],
                    l = i[a + 1],
                    c = i[a + 3],
                    u = i[a + 5];
                e.moveTo(o, l), e.lineTo(r, c), e.lineTo(h, u)
            }
            e.fillStyle = "#FF0000", e.fill(), e.closePath()
        }, e.Strip.prototype.onTextureUpdate = function() {
            this.updateFrame = !0
        }, e.Strip.prototype.getBounds = function(t) {
            for (var i = t || this.worldTransform, s = i.a, n = i.b, a = i.c, o = i.d, r = i.tx, h = i.ty, l = -1 / 0, c = -1 / 0, u = 1 / 0, d = 1 / 0, p = this.vertices, m = 0, g = p.length; m < g; m += 2) {
                var f = p[m],
                    _ = p[m + 1],
                    y = s * f + a * _ + r,
                    v = o * _ + n * f + h;
                u = y < u ? y : u, d = v < d ? v : d, l = y > l ? y : l, c = v > c ? v : c
            }
            if (u === -1 / 0 || c === 1 / 0) return e.EmptyRectangle;
            var b = this._bounds;
            return b.x = u, b.width = l - u, b.y = d, b.height = c - d, this._currentBounds = b, b
        }, e.Strip.DrawModes = {
            TRIANGLE_STRIP: 0,
            TRIANGLES: 1
        }, e.Rope = function(t, i) {
            e.Strip.call(this, t), this.points = i, this.vertices = new e.Float32Array(4 * i.length), this.uvs = new e.Float32Array(4 * i.length), this.colors = new e.Float32Array(2 * i.length), this.indices = new e.Uint16Array(2 * i.length), this.refresh()
        }, e.Rope.prototype = Object.create(e.Strip.prototype), e.Rope.prototype.constructor = e.Rope, e.Rope.prototype.refresh = function() {
            var t = this.points;
            if (!(t.length < 1)) {
                var e = this.uvs,
                    i = (t[0], this.indices),
                    s = this.colors;
                this.count -= .2, e[0] = 0, e[1] = 0, e[2] = 0, e[3] = 1, s[0] = 1, s[1] = 1, i[0] = 0, i[1] = 1;
                for (var n, a, o, r = t.length, h = 1; h < r; h++) n = t[h], o = h / (r - 1), e[a = 4 * h] = o, e[a + 1] = 0, e[a + 2] = o, e[a + 3] = 1, s[a = 2 * h] = 1, s[a + 1] = 1, i[a = 2 * h] = a, i[a + 1] = a + 1, n
            }
        }, e.Rope.prototype.updateTransform = function() {
            var t = this.points;
            if (!(t.length < 1)) {
                var i, s = t[0],
                    n = {
                        x: 0,
                        y: 0
                    };
                this.count -= .2;
                for (var a, o, r, h, l = this.vertices, c = t.length, u = 0; u < c; u++) a = t[u], o = 4 * u, i = u < t.length - 1 ? t[u + 1] : a, n.y = -(i.x - s.x), n.x = i.y - s.y, 10 * (1 - u / (c - 1)) > 1 && 1, r = Math.sqrt(n.x * n.x + n.y * n.y), h = this.texture.height / 2, n.x /= r, n.y /= r, n.x *= h, n.y *= h, l[o] = a.x + n.x, l[o + 1] = a.y + n.y, l[o + 2] = a.x - n.x, l[o + 3] = a.y - n.y, s = a;
                e.DisplayObjectContainer.prototype.updateTransform.call(this)
            }
        }, e.Rope.prototype.setTexture = function(t) {
            this.texture = t
        }, e.TilingSprite = function(t, i, s) {
            e.Sprite.call(this, t), this._width = i || 128, this._height = s || 128, this.tileScale = new e.Point(1, 1), this.tileScaleOffset = new e.Point(1, 1), this.tilePosition = new e.Point, this.renderable = !0, this.tint = 16777215, this.textureDebug = !1, this.blendMode = e.blendModes.NORMAL, this.canvasBuffer = null, this.tilingTexture = null, this.tilePattern = null, this.refreshTexture = !0, this.frameWidth = 0, this.frameHeight = 0
        }, e.TilingSprite.prototype = Object.create(e.Sprite.prototype), e.TilingSprite.prototype.constructor = e.TilingSprite, e.TilingSprite.prototype.setTexture = function(t) {
            this.texture !== t && (this.texture = t, this.refreshTexture = !0, this.cachedTint = 16777215)
        }, e.TilingSprite.prototype._renderWebGL = function(t) {
            if (this.visible && this.renderable && 0 !== this.alpha) {
                if (this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), this._filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), this.refreshTexture) {
                    if (this.generateTilingTexture(!0, t), !this.tilingTexture) return;
                    this.tilingTexture.needsUpdate && (t.renderer.updateTexture(this.tilingTexture.baseTexture), this.tilingTexture.needsUpdate = !1)
                }
                t.spriteBatch.renderTilingSprite(this);
                for (var e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(t);
                t.spriteBatch.stop(), this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(this._mask, t), t.spriteBatch.start()
            }
        }, e.TilingSprite.prototype._renderCanvas = function(t) {
            if (this.visible && this.renderable && 0 !== this.alpha) {
                var i = t.context;
                this._mask && t.maskManager.pushMask(this._mask, t), i.globalAlpha = this.worldAlpha;
                var s = this.worldTransform,
                    n = t.resolution,
                    a = s.tx * n + t.shakeX,
                    o = s.ty * n + t.shakeY;
                if (i.setTransform(s.a * n, s.b * n, s.c * n, s.d * n, a, o), this.refreshTexture) {
                    if (this.generateTilingTexture(!1, t), !this.tilingTexture) return;
                    this.tilePattern = i.createPattern(this.tilingTexture.baseTexture.source, "repeat")
                }
                var r = t.currentBlendMode;
                this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, i.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]);
                var h = this.tilePosition,
                    l = this.tileScale;
                h.x %= this.tilingTexture.baseTexture.width, h.y %= this.tilingTexture.baseTexture.height, i.scale(l.x, l.y), i.translate(h.x + this.anchor.x * -this._width, h.y + this.anchor.y * -this._height), i.fillStyle = this.tilePattern;
                var a = -h.x,
                    o = -h.y,
                    c = this._width / l.x,
                    u = this._height / l.y;
                t.roundPixels && (a |= 0, o |= 0, c |= 0, u |= 0), i.fillRect(a, o, c, u), i.scale(1 / l.x, 1 / l.y), i.translate(-h.x + this.anchor.x * this._width, -h.y + this.anchor.y * this._height), this._mask && t.maskManager.popMask(t);
                for (var d = 0; d < this.children.length; d++) this.children[d]._renderCanvas(t);
                r !== this.blendMode && (t.currentBlendMode = r, i.globalCompositeOperation = e.blendModesCanvas[r])
            }
        }, e.TilingSprite.prototype.onTextureUpdate = function() {}, e.TilingSprite.prototype.generateTilingTexture = function(t, i) {
            if (this.texture.baseTexture.hasLoaded) {
                var s = this.texture,
                    n = s.frame,
                    a = this._frame.sourceSizeW || this._frame.width,
                    o = this._frame.sourceSizeH || this._frame.height,
                    r = 0,
                    h = 0;
                this._frame.trimmed && (r = this._frame.spriteSourceSizeX, h = this._frame.spriteSourceSizeY), t && (a = e.getNextPowerOfTwo(a), o = e.getNextPowerOfTwo(o)), this.canvasBuffer ? (this.canvasBuffer.resize(a, o), this.tilingTexture.baseTexture.width = a, this.tilingTexture.baseTexture.height = o, this.tilingTexture.needsUpdate = !0) : (this.canvasBuffer = new e.CanvasBuffer(a, o), this.tilingTexture = e.Texture.fromCanvas(this.canvasBuffer.canvas), this.tilingTexture.isTiling = !0, this.tilingTexture.needsUpdate = !0), this.textureDebug && (this.canvasBuffer.context.strokeStyle = "#00ff00", this.canvasBuffer.context.strokeRect(0, 0, a, o));
                var l = s.crop.width,
                    c = s.crop.height;
                l === a && c === o || (l = a, c = o), this.canvasBuffer.context.drawImage(s.baseTexture.source, s.crop.x, s.crop.y, s.crop.width, s.crop.height, r, h, l, c), this.tileScaleOffset.x = n.width / a, this.tileScaleOffset.y = n.height / o, this.refreshTexture = !1, this.tilingTexture.baseTexture._powerOf2 = !0
            }
        }, e.TilingSprite.prototype.getBounds = function() {
            var t = this._width,
                e = this._height,
                i = t * (1 - this.anchor.x),
                s = t * -this.anchor.x,
                n = e * (1 - this.anchor.y),
                a = e * -this.anchor.y,
                o = this.worldTransform,
                r = o.a,
                h = o.b,
                l = o.c,
                c = o.d,
                u = o.tx,
                d = o.ty,
                p = r * s + l * a + u,
                m = c * a + h * s + d,
                g = r * i + l * a + u,
                f = c * a + h * i + d,
                _ = r * i + l * n + u,
                y = c * n + h * i + d,
                v = r * s + l * n + u,
                b = c * n + h * s + d,
                S = -1 / 0,
                T = -1 / 0,
                E = 1 / 0,
                P = 1 / 0;
            E = v < (E = _ < (E = g < (E = p < E ? p : E) ? g : E) ? _ : E) ? v : E, P = b < (P = y < (P = f < (P = m < P ? m : P) ? f : P) ? y : P) ? b : P, S = v > (S = _ > (S = g > (S = p > S ? p : S) ? g : S) ? _ : S) ? v : S, T = b > (T = y > (T = f > (T = m > T ? m : T) ? f : T) ? y : T) ? b : T;
            var A = this._bounds;
            return A.x = E, A.width = S - E, A.y = P, A.height = T - P, this._currentBounds = A, A
        }, e.TilingSprite.prototype.destroy = function() {
            e.Sprite.prototype.destroy.call(this), this.canvasBuffer && (this.canvasBuffer.destroy(), this.canvasBuffer = null), this.tileScale = null, this.tileScaleOffset = null, this.tilePosition = null, this.tilingTexture && (this.tilingTexture.destroy(!0), this.tilingTexture = null)
        }, Object.defineProperty(e.TilingSprite.prototype, "width", {
            get: function() {
                return this._width
            },
            set: function(t) {
                this._width = t
            }
        }), Object.defineProperty(e.TilingSprite.prototype, "height", {
            get: function() {
                return this._height
            },
            set: function(t) {
                this._height = t
            }
        }), "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = e), exports.PIXI = e) : "undefined" != typeof define && define.amd ? define("PIXI", t.PIXI = e) : t.PIXI = e, e
    }.call(this),
    function() {
        function t(t, e) {
            this._scaleFactor = t, this._deltaMode = e, this.originalEvent = null
        }
        var e = this,
            i = i || {
                VERSION: "2.6.4",
                GAMES: [],
                AUTO: 0,
                CANVAS: 1,
                WEBGL: 2,
                HEADLESS: 3,
                NONE: 0,
                LEFT: 1,
                RIGHT: 2,
                UP: 3,
                DOWN: 4,
                SPRITE: 0,
                BUTTON: 1,
                IMAGE: 2,
                GRAPHICS: 3,
                TEXT: 4,
                TILESPRITE: 5,
                BITMAPTEXT: 6,
                GROUP: 7,
                RENDERTEXTURE: 8,
                TILEMAP: 9,
                TILEMAPLAYER: 10,
                EMITTER: 11,
                POLYGON: 12,
                BITMAPDATA: 13,
                CANVAS_FILTER: 14,
                WEBGL_FILTER: 15,
                ELLIPSE: 16,
                SPRITEBATCH: 17,
                RETROFONT: 18,
                POINTER: 19,
                ROPE: 20,
                CIRCLE: 21,
                RECTANGLE: 22,
                LINE: 23,
                MATRIX: 24,
                POINT: 25,
                ROUNDEDRECTANGLE: 26,
                CREATURE: 27,
                VIDEO: 28,
                PENDING_ATLAS: -1,
                HORIZONTAL: 0,
                VERTICAL: 1,
                LANDSCAPE: 0,
                PORTRAIT: 1,
                ANGLE_UP: 270,
                ANGLE_DOWN: 90,
                ANGLE_LEFT: 180,
                ANGLE_RIGHT: 0,
                ANGLE_NORTH_EAST: 315,
                ANGLE_NORTH_WEST: 225,
                ANGLE_SOUTH_EAST: 45,
                ANGLE_SOUTH_WEST: 135,
                TOP_LEFT: 0,
                TOP_CENTER: 1,
                TOP_RIGHT: 2,
                LEFT_TOP: 3,
                LEFT_CENTER: 4,
                LEFT_BOTTOM: 5,
                CENTER: 6,
                RIGHT_TOP: 7,
                RIGHT_CENTER: 8,
                RIGHT_BOTTOM: 9,
                BOTTOM_LEFT: 10,
                BOTTOM_CENTER: 11,
                BOTTOM_RIGHT: 12,
                blendModes: {
                    NORMAL: 0,
                    ADD: 1,
                    MULTIPLY: 2,
                    SCREEN: 3,
                    OVERLAY: 4,
                    DARKEN: 5,
                    LIGHTEN: 6,
                    COLOR_DODGE: 7,
                    COLOR_BURN: 8,
                    HARD_LIGHT: 9,
                    SOFT_LIGHT: 10,
                    DIFFERENCE: 11,
                    EXCLUSION: 12,
                    HUE: 13,
                    SATURATION: 14,
                    COLOR: 15,
                    LUMINOSITY: 16
                },
                scaleModes: {
                    DEFAULT: 0,
                    LINEAR: 0,
                    NEAREST: 1
                },
                PIXI: PIXI || {}
            };
        if (Math.trunc || (Math.trunc = function(t) {
            return t < 0 ? Math.ceil(t) : Math.floor(t)
        }), Function.prototype.bind || (Function.prototype.bind = function() {
            var t = Array.prototype.slice;
            return function(e) {
                function i() {
                    var a = n.concat(t.call(arguments));
                    s.apply(this instanceof i ? this : e, a)
                }
                var s = this,
                    n = t.call(arguments, 1);
                if ("function" != typeof s) throw new TypeError;
                return i.prototype = function t(e) {
                    if (e && (t.prototype = e), !(this instanceof t)) return new t
                }(s.prototype), i
            }
        }()), Array.isArray || (Array.isArray = function(t) {
            return "[object Array]" === Object.prototype.toString.call(t)
        }), Array.prototype.forEach || (Array.prototype.forEach = function(t) {
            "use strict";
            if (void 0 === this || null === this) throw new TypeError;
            var e = Object(this),
                i = e.length >>> 0;
            if ("function" != typeof t) throw new TypeError;
            for (var s = arguments.length >= 2 ? arguments[1] : void 0, n = 0; n < i; n++) n in e && t.call(s, e[n], n, e)
        }), "function" != typeof window.Uint32Array && "object" != typeof window.Uint32Array) {
            var s = function(t) {
                var e = new Array;
                window[t] = function(t) {
                    if ("number" == typeof t) {
                        Array.call(this, t), this.length = t;
                        for (e = 0; e < this.length; e++) this[e] = 0
                    } else {
                        Array.call(this, t.length), this.length = t.length;
                        for (var e = 0; e < this.length; e++) this[e] = t[e]
                    }
                }, window[t].prototype = e, window[t].constructor = window[t]
            };
            s("Uint32Array"), s("Int16Array")
        }
        window.console || (window.console = {}, window.console.log = window.console.assert = function() {}, window.console.warn = window.console.assert = function() {}), /firefox/i.test(navigator.userAgent) && (window.oldGetComputedStyle = window.getComputedStyle, window.getComputedStyle = function(t, e) {
            var i = window.oldGetComputedStyle(t, e);
            return null === i ? {
                getPropertyValue: function() {}
            } : i
        }), i.Utils = {
            reverseString: function(t) {
                return t.split("").reverse().join("")
            },
            getProperty: function(t, e) {
                for (var i = e.split("."), s = i.pop(), n = i.length, a = 1, o = i[0]; a < n && (t = t[o]);) o = i[a], a++;
                return t ? t[s] : null
            },
            setProperty: function(t, e, i) {
                for (var s = e.split("."), n = s.pop(), a = s.length, o = 1, r = s[0]; o < a && (t = t[r]);) r = s[o], o++;
                return t && (t[n] = i), t
            },
            chanceRoll: function(t) {
                return void 0 === t && (t = 50), t > 0 && 100 * Math.random() <= t
            },
            randomChoice: function(t, e) {
                return Math.random() < .5 ? t : e
            },
            parseDimension: function(t, e) {
                var i = 0,
                    s = 0;
                return "string" == typeof t ? "%" === t.substr(-1) ? (i = parseInt(t, 10) / 100, s = 0 === e ? window.innerWidth * i : window.innerHeight * i) : s = parseInt(t, 10) : s = t, s
            },
            pad: function(t, e, i, s) {
                if (void 0 === e) var e = 0;
                if (void 0 === i) var i = " ";
                if (void 0 === s) var s = 3;
                var n = 0;
                if (e + 1 >= (t = t.toString()).length) switch (s) {
                    case 1:
                        t = new Array(e + 1 - t.length).join(i) + t;
                        break;
                    case 3:
                        var a = Math.ceil((n = e - t.length) / 2),
                            o = n - a;
                        t = new Array(o + 1).join(i) + t + new Array(a + 1).join(i);
                        break;
                    default:
                        t += new Array(e + 1 - t.length).join(i)
                }
                return t
            },
            isPlainObject: function(t) {
                if ("object" != typeof t || t.nodeType || t === t.window) return !1;
                try {
                    if (t.constructor && !{}.hasOwnProperty.call(t.constructor.prototype, "isPrototypeOf")) return !1
                } catch (t) {
                    return !1
                }
                return !0
            },
            extend: function() {
                var t, e, s, n, a, o, r = arguments[0] || {},
                    h = 1,
                    l = arguments.length,
                    c = !1;
                for ("boolean" == typeof r && (c = r, r = arguments[1] || {}, h = 2), l === h && (r = this, --h); h < l; h++)
                    if (null != (t = arguments[h]))
                        for (e in t) s = r[e], r !== (n = t[e]) && (c && n && (i.Utils.isPlainObject(n) || (a = Array.isArray(n))) ? (a ? (a = !1, o = s && Array.isArray(s) ? s : []) : o = s && i.Utils.isPlainObject(s) ? s : {}, r[e] = i.Utils.extend(c, o, n)) : void 0 !== n && (r[e] = n));
                return r
            },
            mixinPrototype: function(t, e, i) {
                void 0 === i && (i = !1);
                for (var s = Object.keys(e), n = 0; n < s.length; n++) {
                    var a = s[n],
                        o = e[a];
                    !i && a in t || (!o || "function" != typeof o.get && "function" != typeof o.set ? t[a] = o : "function" == typeof o.clone ? t[a] = o.clone() : Object.defineProperty(t, a, o))
                }
            },
            mixin: function(t, e) {
                if (!t || "object" != typeof t) return e;
                for (var s in t) {
                    var n = t[s];
                    if (!n.childNodes && !n.cloneNode) {
                        var a = typeof t[s];
                        t[s] && "object" === a ? typeof e[s] === a ? e[s] = i.Utils.mixin(t[s], e[s]) : e[s] = i.Utils.mixin(t[s], new n.constructor) : e[s] = t[s]
                    }
                }
                return e
            }
        }, i.Circle = function(t, e, s) {
            t = t || 0, e = e || 0, s = s || 0, this.x = t, this.y = e, this._diameter = s, this._radius = 0, s > 0 && (this._radius = .5 * s), this.type = i.CIRCLE
        }, i.Circle.prototype = {
            circumference: function() {
                return Math.PI * this._radius * 2
            },
            random: function(t) {
                void 0 === t && (t = new i.Point);
                var e = 2 * Math.PI * Math.random(),
                    s = Math.random() + Math.random(),
                    n = s > 1 ? 2 - s : s,
                    a = n * Math.cos(e),
                    o = n * Math.sin(e);
                return t.x = this.x + a * this.radius, t.y = this.y + o * this.radius, t
            },
            getBounds: function() {
                return new i.Rectangle(this.x - this.radius, this.y - this.radius, this.diameter, this.diameter)
            },
            setTo: function(t, e, i) {
                return this.x = t, this.y = e, this._diameter = i, this._radius = .5 * i, this
            },
            copyFrom: function(t) {
                return this.setTo(t.x, t.y, t.diameter)
            },
            copyTo: function(t) {
                return t.x = this.x, t.y = this.y, t.diameter = this._diameter, t
            },
            distance: function(t, e) {
                var s = i.Math.distance(this.x, this.y, t.x, t.y);
                return e ? Math.round(s) : s
            },
            clone: function(t) {
                return void 0 === t || null === t ? t = new i.Circle(this.x, this.y, this.diameter) : t.setTo(this.x, this.y, this.diameter), t
            },
            contains: function(t, e) {
                return i.Circle.contains(this, t, e)
            },
            circumferencePoint: function(t, e, s) {
                return i.Circle.circumferencePoint(this, t, e, s)
            },
            offset: function(t, e) {
                return this.x += t, this.y += e, this
            },
            offsetPoint: function(t) {
                return this.offset(t.x, t.y)
            },
            toString: function() {
                return "[{Phaser.Circle (x=" + this.x + " y=" + this.y + " diameter=" + this.diameter + " radius=" + this.radius + ")}]"
            }
        }, i.Circle.prototype.constructor = i.Circle, Object.defineProperty(i.Circle.prototype, "diameter", {
            get: function() {
                return this._diameter
            },
            set: function(t) {
                t > 0 && (this._diameter = t, this._radius = .5 * t)
            }
        }), Object.defineProperty(i.Circle.prototype, "radius", {
            get: function() {
                return this._radius
            },
            set: function(t) {
                t > 0 && (this._radius = t, this._diameter = 2 * t)
            }
        }), Object.defineProperty(i.Circle.prototype, "left", {
            get: function() {
                return this.x - this._radius
            },
            set: function(t) {
                t > this.x ? (this._radius = 0, this._diameter = 0) : this.radius = this.x - t
            }
        }), Object.defineProperty(i.Circle.prototype, "right", {
            get: function() {
                return this.x + this._radius
            },
            set: function(t) {
                t < this.x ? (this._radius = 0, this._diameter = 0) : this.radius = t - this.x
            }
        }), Object.defineProperty(i.Circle.prototype, "top", {
            get: function() {
                return this.y - this._radius
            },
            set: function(t) {
                t > this.y ? (this._radius = 0, this._diameter = 0) : this.radius = this.y - t
            }
        }), Object.defineProperty(i.Circle.prototype, "bottom", {
            get: function() {
                return this.y + this._radius
            },
            set: function(t) {
                t < this.y ? (this._radius = 0, this._diameter = 0) : this.radius = t - this.y
            }
        }), Object.defineProperty(i.Circle.prototype, "area", {
            get: function() {
                return this._radius > 0 ? Math.PI * this._radius * this._radius : 0
            }
        }), Object.defineProperty(i.Circle.prototype, "empty", {
            get: function() {
                return 0 === this._diameter
            },
            set: function(t) {
                !0 === t && this.setTo(0, 0, 0)
            }
        }), i.Circle.contains = function(t, e, i) {
            return t.radius > 0 && e >= t.left && e <= t.right && i >= t.top && i <= t.bottom && (t.x - e) * (t.x - e) + (t.y - i) * (t.y - i) <= t.radius * t.radius
        }, i.Circle.equals = function(t, e) {
            return t.x === e.x && t.y === e.y && t.diameter === e.diameter
        }, i.Circle.intersects = function(t, e) {
            return i.Math.distance(t.x, t.y, e.x, e.y) <= t.radius + e.radius
        }, i.Circle.circumferencePoint = function(t, e, s, n) {
            return void 0 === s && (s = !1), void 0 === n && (n = new i.Point), !0 === s && (e = i.Math.degToRad(e)), n.x = t.x + t.radius * Math.cos(e), n.y = t.y + t.radius * Math.sin(e), n
        }, i.Circle.intersectsRectangle = function(t, e) {
            var i = Math.abs(t.x - e.x - e.halfWidth);
            if (i > e.halfWidth + t.radius) return !1;
            var s = Math.abs(t.y - e.y - e.halfHeight);
            if (s > e.halfHeight + t.radius) return !1;
            if (i <= e.halfWidth || s <= e.halfHeight) return !0;
            var n = i - e.halfWidth,
                a = s - e.halfHeight;
            return n * n + a * a <= t.radius * t.radius
        }, PIXI.Circle = i.Circle, i.Ellipse = function(t, e, s, n) {
            t = t || 0, e = e || 0, s = s || 0, n = n || 0, this.x = t, this.y = e, this.width = s, this.height = n, this.type = i.ELLIPSE
        }, i.Ellipse.prototype = {
            setTo: function(t, e, i, s) {
                return this.x = t, this.y = e, this.width = i, this.height = s, this
            },
            getBounds: function() {
                return new i.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height)
            },
            copyFrom: function(t) {
                return this.setTo(t.x, t.y, t.width, t.height)
            },
            copyTo: function(t) {
                return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t
            },
            clone: function(t) {
                return void 0 === t || null === t ? t = new i.Ellipse(this.x, this.y, this.width, this.height) : t.setTo(this.x, this.y, this.width, this.height), t
            },
            contains: function(t, e) {
                return i.Ellipse.contains(this, t, e)
            },
            random: function(t) {
                void 0 === t && (t = new i.Point);
                var e = Math.random() * Math.PI * 2,
                    s = Math.random();
                return t.x = Math.sqrt(s) * Math.cos(e), t.y = Math.sqrt(s) * Math.sin(e), t.x = this.x + t.x * this.width / 2, t.y = this.y + t.y * this.height / 2, t
            },
            toString: function() {
                return "[{Phaser.Ellipse (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")}]"
            }
        }, i.Ellipse.prototype.constructor = i.Ellipse, Object.defineProperty(i.Ellipse.prototype, "left", {
            get: function() {
                return this.x
            },
            set: function(t) {
                this.x = t
            }
        }), Object.defineProperty(i.Ellipse.prototype, "right", {
            get: function() {
                return this.x + this.width
            },
            set: function(t) {
                t < this.x ? this.width = 0 : this.width = t - this.x
            }
        }), Object.defineProperty(i.Ellipse.prototype, "top", {
            get: function() {
                return this.y
            },
            set: function(t) {
                this.y = t
            }
        }), Object.defineProperty(i.Ellipse.prototype, "bottom", {
            get: function() {
                return this.y + this.height
            },
            set: function(t) {
                t < this.y ? this.height = 0 : this.height = t - this.y
            }
        }), Object.defineProperty(i.Ellipse.prototype, "empty", {
            get: function() {
                return 0 === this.width || 0 === this.height
            },
            set: function(t) {
                !0 === t && this.setTo(0, 0, 0, 0)
            }
        }), i.Ellipse.contains = function(t, e, i) {
            if (t.width <= 0 || t.height <= 0) return !1;
            var s = (e - t.x) / t.width - .5,
                n = (i - t.y) / t.height - .5;
            return s *= s, n *= n, s + n < .25
        }, PIXI.Ellipse = i.Ellipse, i.Line = function(t, e, s, n) {
            t = t || 0, e = e || 0, s = s || 0, n = n || 0, this.start = new i.Point(t, e), this.end = new i.Point(s, n), this.type = i.LINE
        }, i.Line.prototype = {
            setTo: function(t, e, i, s) {
                return this.start.setTo(t, e), this.end.setTo(i, s), this
            },
            fromSprite: function(t, e, i) {
                return void 0 === i && (i = !1), i ? this.setTo(t.center.x, t.center.y, e.center.x, e.center.y) : this.setTo(t.x, t.y, e.x, e.y)
            },
            fromAngle: function(t, e, i, s) {
                return this.start.setTo(t, e), this.end.setTo(t + Math.cos(i) * s, e + Math.sin(i) * s), this
            },
            rotate: function(t, e) {
                var i = (this.start.x + this.end.x) / 2,
                    s = (this.start.y + this.end.y) / 2;
                return this.start.rotate(i, s, t, e), this.end.rotate(i, s, t, e), this
            },
            rotateAround: function(t, e, i, s) {
                return this.start.rotate(t, e, i, s), this.end.rotate(t, e, i, s), this
            },
            intersects: function(t, e, s) {
                return i.Line.intersectsPoints(this.start, this.end, t.start, t.end, e, s)
            },
            reflect: function(t) {
                return i.Line.reflect(this, t)
            },
            midPoint: function(t) {
                return void 0 === t && (t = new i.Point), t.x = (this.start.x + this.end.x) / 2, t.y = (this.start.y + this.end.y) / 2, t
            },
            centerOn: function(t, e) {
                var i = t - (this.start.x + this.end.x) / 2,
                    s = e - (this.start.y + this.end.y) / 2;
                this.start.add(i, s), this.end.add(i, s)
            },
            pointOnLine: function(t, e) {
                return (t - this.start.x) * (this.end.y - this.start.y) == (this.end.x - this.start.x) * (e - this.start.y)
            },
            pointOnSegment: function(t, e) {
                var i = Math.min(this.start.x, this.end.x),
                    s = Math.max(this.start.x, this.end.x),
                    n = Math.min(this.start.y, this.end.y),
                    a = Math.max(this.start.y, this.end.y);
                return this.pointOnLine(t, e) && t >= i && t <= s && e >= n && e <= a
            },
            random: function(t) {
                void 0 === t && (t = new i.Point);
                var e = Math.random();
                return t.x = this.start.x + e * (this.end.x - this.start.x), t.y = this.start.y + e * (this.end.y - this.start.y), t
            },
            coordinatesOnLine: function(t, e) {
                void 0 === t && (t = 1), void 0 === e && (e = []);
                var i = Math.round(this.start.x),
                    s = Math.round(this.start.y),
                    n = Math.round(this.end.x),
                    a = Math.round(this.end.y),
                    o = Math.abs(n - i),
                    r = Math.abs(a - s),
                    h = i < n ? 1 : -1,
                    l = s < a ? 1 : -1,
                    c = o - r;
                e.push([i, s]);
                for (var u = 1; i !== n || s !== a;) {
                    var d = c << 1;
                    d > -r && (c -= r, i += h), d < o && (c += o, s += l), u % t == 0 && e.push([i, s]), u++
                }
                return e
            },
            clone: function(t) {
                return void 0 === t || null === t ? t = new i.Line(this.start.x, this.start.y, this.end.x, this.end.y) : t.setTo(this.start.x, this.start.y, this.end.x, this.end.y), t
            }
        }, Object.defineProperty(i.Line.prototype, "length", {
            get: function() {
                return Math.sqrt((this.end.x - this.start.x) * (this.end.x - this.start.x) + (this.end.y - this.start.y) * (this.end.y - this.start.y))
            }
        }), Object.defineProperty(i.Line.prototype, "angle", {
            get: function() {
                return Math.atan2(this.end.y - this.start.y, this.end.x - this.start.x)
            }
        }), Object.defineProperty(i.Line.prototype, "slope", {
            get: function() {
                return (this.end.y - this.start.y) / (this.end.x - this.start.x)
            }
        }), Object.defineProperty(i.Line.prototype, "perpSlope", {
            get: function() {
                return -(this.end.x - this.start.x) / (this.end.y - this.start.y)
            }
        }), Object.defineProperty(i.Line.prototype, "x", {
            get: function() {
                return Math.min(this.start.x, this.end.x)
            }
        }), Object.defineProperty(i.Line.prototype, "y", {
            get: function() {
                return Math.min(this.start.y, this.end.y)
            }
        }), Object.defineProperty(i.Line.prototype, "left", {
            get: function() {
                return Math.min(this.start.x, this.end.x)
            }
        }), Object.defineProperty(i.Line.prototype, "right", {
            get: function() {
                return Math.max(this.start.x, this.end.x)
            }
        }), Object.defineProperty(i.Line.prototype, "top", {
            get: function() {
                return Math.min(this.start.y, this.end.y)
            }
        }), Object.defineProperty(i.Line.prototype, "bottom", {
            get: function() {
                return Math.max(this.start.y, this.end.y)
            }
        }), Object.defineProperty(i.Line.prototype, "width", {
            get: function() {
                return Math.abs(this.start.x - this.end.x)
            }
        }), Object.defineProperty(i.Line.prototype, "height", {
            get: function() {
                return Math.abs(this.start.y - this.end.y)
            }
        }), Object.defineProperty(i.Line.prototype, "normalX", {
            get: function() {
                return Math.cos(this.angle - 1.5707963267948966)
            }
        }), Object.defineProperty(i.Line.prototype, "normalY", {
            get: function() {
                return Math.sin(this.angle - 1.5707963267948966)
            }
        }), Object.defineProperty(i.Line.prototype, "normalAngle", {
            get: function() {
                return i.Math.wrap(this.angle - 1.5707963267948966, -Math.PI, Math.PI)
            }
        }), i.Line.intersectsPoints = function(t, e, s, n, a, o) {
            void 0 === a && (a = !0), void 0 === o && (o = new i.Point);
            var r = e.y - t.y,
                h = n.y - s.y,
                l = t.x - e.x,
                c = s.x - n.x,
                u = e.x * t.y - t.x * e.y,
                d = n.x * s.y - s.x * n.y,
                p = r * c - h * l;
            if (0 === p) return null;
            if (o.x = (l * d - c * u) / p, o.y = (h * u - r * d) / p, a) {
                var m = (n.y - s.y) * (e.x - t.x) - (n.x - s.x) * (e.y - t.y),
                    g = ((n.x - s.x) * (t.y - s.y) - (n.y - s.y) * (t.x - s.x)) / m,
                    f = ((e.x - t.x) * (t.y - s.y) - (e.y - t.y) * (t.x - s.x)) / m;
                return g >= 0 && g <= 1 && f >= 0 && f <= 1 ? o : null
            }
            return o
        }, i.Line.intersects = function(t, e, s, n) {
            return i.Line.intersectsPoints(t.start, t.end, e.start, e.end, s, n)
        }, i.Line.intersectsRectangle = function(t, e) {
            if (!i.Rectangle.intersects(t, e)) return !1;
            var s = t.start.x,
                n = t.start.y,
                a = t.end.x,
                o = t.end.y,
                r = e.x,
                h = e.y,
                l = e.right,
                c = e.bottom,
                u = 0;
            if (s >= r && s <= l && n >= h && n <= c || a >= r && a <= l && o >= h && o <= c) return !0;
            if (s < r && a >= r) {
                if ((u = n + (o - n) * (r - s) / (a - s)) > h && u <= c) return !0
            } else if (s > l && a <= l && (u = n + (o - n) * (l - s) / (a - s)) >= h && u <= c) return !0;
            if (n < h && o >= h) {
                if ((u = s + (a - s) * (h - n) / (o - n)) >= r && u <= l) return !0
            } else if (n > c && o <= c && (u = s + (a - s) * (c - n) / (o - n)) >= r && u <= l) return !0;
            return !1
        }, i.Line.reflect = function(t, e) {
            return 2 * e.normalAngle - 3.141592653589793 - t.angle
        }, i.Matrix = function(t, e, s, n, a, o) {
            void 0 !== t && null !== t || (t = 1), void 0 !== e && null !== e || (e = 0), void 0 !== s && null !== s || (s = 0), void 0 !== n && null !== n || (n = 1), void 0 !== a && null !== a || (a = 0), void 0 !== o && null !== o || (o = 0), this.a = t, this.b = e, this.c = s, this.d = n, this.tx = a, this.ty = o, this.type = i.MATRIX
        }, i.Matrix.prototype = {
            fromArray: function(t) {
                return this.setTo(t[0], t[1], t[3], t[4], t[2], t[5])
            },
            setTo: function(t, e, i, s, n, a) {
                return this.a = t, this.b = e, this.c = i, this.d = s, this.tx = n, this.ty = a, this
            },
            clone: function(t) {
                return void 0 === t || null === t ? t = new i.Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty) : (t.a = this.a, t.b = this.b, t.c = this.c, t.d = this.d, t.tx = this.tx, t.ty = this.ty), t
            },
            copyTo: function(t) {
                return t.copyFrom(this), t
            },
            copyFrom: function(t) {
                return this.a = t.a, this.b = t.b, this.c = t.c, this.d = t.d, this.tx = t.tx, this.ty = t.ty, this
            },
            toArray: function(t, e) {
                return void 0 === e && (e = new PIXI.Float32Array(9)), t ? (e[0] = this.a, e[1] = this.b, e[2] = 0, e[3] = this.c, e[4] = this.d, e[5] = 0, e[6] = this.tx, e[7] = this.ty, e[8] = 1) : (e[0] = this.a, e[1] = this.c, e[2] = this.tx, e[3] = this.b, e[4] = this.d, e[5] = this.ty, e[6] = 0, e[7] = 0, e[8] = 1), e
            },
            apply: function(t, e) {
                return void 0 === e && (e = new i.Point), e.x = this.a * t.x + this.c * t.y + this.tx, e.y = this.b * t.x + this.d * t.y + this.ty, e
            },
            applyInverse: function(t, e) {
                void 0 === e && (e = new i.Point);
                var s = 1 / (this.a * this.d + this.c * -this.b),
                    n = t.x,
                    a = t.y;
                return e.x = this.d * s * n + -this.c * s * a + (this.ty * this.c - this.tx * this.d) * s, e.y = this.a * s * a + -this.b * s * n + (-this.ty * this.a + this.tx * this.b) * s, e
            },
            translate: function(t, e) {
                return this.tx += t, this.ty += e, this
            },
            scale: function(t, e) {
                return this.a *= t, this.d *= e, this.c *= t, this.b *= e, this.tx *= t, this.ty *= e, this
            },
            rotate: function(t) {
                var e = Math.cos(t),
                    i = Math.sin(t),
                    s = this.a,
                    n = this.c,
                    a = this.tx;
                return this.a = s * e - this.b * i, this.b = s * i + this.b * e, this.c = n * e - this.d * i, this.d = n * i + this.d * e, this.tx = a * e - this.ty * i, this.ty = a * i + this.ty * e, this
            },
            append: function(t) {
                var e = this.a,
                    i = this.b,
                    s = this.c,
                    n = this.d;
                return this.a = t.a * e + t.b * s, this.b = t.a * i + t.b * n, this.c = t.c * e + t.d * s, this.d = t.c * i + t.d * n, this.tx = t.tx * e + t.ty * s + this.tx, this.ty = t.tx * i + t.ty * n + this.ty, this
            },
            identity: function() {
                return this.setTo(1, 0, 0, 1, 0, 0)
            }
        }, i.identityMatrix = new i.Matrix, PIXI.Matrix = i.Matrix, PIXI.identityMatrix = i.identityMatrix, i.Point = function(t, e) {
            t = t || 0, e = e || 0, this.x = t, this.y = e, this.type = i.POINT
        }, i.Point.prototype = {
            copyFrom: function(t) {
                return this.setTo(t.x, t.y)
            },
            invert: function() {
                return this.setTo(this.y, this.x)
            },
            setTo: function(t, e) {
                return this.x = t || 0, this.y = e || (0 !== e ? this.x : 0), this
            },
            set: function(t, e) {
                return this.x = t || 0, this.y = e || (0 !== e ? this.x : 0), this
            },
            add: function(t, e) {
                return this.x += t, this.y += e, this
            },
            subtract: function(t, e) {
                return this.x -= t, this.y -= e, this
            },
            multiply: function(t, e) {
                return this.x *= t, this.y *= e, this
            },
            divide: function(t, e) {
                return this.x /= t, this.y /= e, this
            },
            clampX: function(t, e) {
                return this.x = i.Math.clamp(this.x, t, e), this
            },
            clampY: function(t, e) {
                return this.y = i.Math.clamp(this.y, t, e), this
            },
            clamp: function(t, e) {
                return this.x = i.Math.clamp(this.x, t, e), this.y = i.Math.clamp(this.y, t, e), this
            },
            clone: function(t) {
                return void 0 === t || null === t ? t = new i.Point(this.x, this.y) : t.setTo(this.x, this.y), t
            },
            copyTo: function(t) {
                return t.x = this.x, t.y = this.y, t
            },
            distance: function(t, e) {
                return i.Point.distance(this, t, e)
            },
            equals: function(t) {
                return t.x === this.x && t.y === this.y
            },
            angle: function(t, e) {
                return void 0 === e && (e = !1), e ? i.Math.radToDeg(Math.atan2(t.y - this.y, t.x - this.x)) : Math.atan2(t.y - this.y, t.x - this.x)
            },
            rotate: function(t, e, s, n, a) {
                return i.Point.rotate(this, t, e, s, n, a)
            },
            getMagnitude: function() {
                return Math.sqrt(this.x * this.x + this.y * this.y)
            },
            getMagnitudeSq: function() {
                return this.x * this.x + this.y * this.y
            },
            setMagnitude: function(t) {
                return this.normalize().multiply(t, t)
            },
            normalize: function() {
                if (!this.isZero()) {
                    var t = this.getMagnitude();
                    this.x /= t, this.y /= t
                }
                return this
            },
            isZero: function() {
                return 0 === this.x && 0 === this.y
            },
            dot: function(t) {
                return this.x * t.x + this.y * t.y
            },
            cross: function(t) {
                return this.x * t.y - this.y * t.x
            },
            perp: function() {
                return this.setTo(-this.y, this.x)
            },
            rperp: function() {
                return this.setTo(this.y, -this.x)
            },
            normalRightHand: function() {
                return this.setTo(-1 * this.y, this.x)
            },
            floor: function() {
                return this.setTo(Math.floor(this.x), Math.floor(this.y))
            },
            ceil: function() {
                return this.setTo(Math.ceil(this.x), Math.ceil(this.y))
            },
            toString: function() {
                return "[{Point (x=" + this.x + " y=" + this.y + ")}]"
            }
        }, i.Point.prototype.constructor = i.Point, i.Point.add = function(t, e, s) {
            return void 0 === s && (s = new i.Point), s.x = t.x + e.x, s.y = t.y + e.y, s
        }, i.Point.subtract = function(t, e, s) {
            return void 0 === s && (s = new i.Point), s.x = t.x - e.x, s.y = t.y - e.y, s
        }, i.Point.multiply = function(t, e, s) {
            return void 0 === s && (s = new i.Point), s.x = t.x * e.x, s.y = t.y * e.y, s
        }, i.Point.divide = function(t, e, s) {
            return void 0 === s && (s = new i.Point), s.x = t.x / e.x, s.y = t.y / e.y, s
        }, i.Point.equals = function(t, e) {
            return t.x === e.x && t.y === e.y
        }, i.Point.angle = function(t, e) {
            return Math.atan2(t.y - e.y, t.x - e.x)
        }, i.Point.negative = function(t, e) {
            return void 0 === e && (e = new i.Point), e.setTo(-t.x, -t.y)
        }, i.Point.multiplyAdd = function(t, e, s, n) {
            return void 0 === n && (n = new i.Point), n.setTo(t.x + e.x * s, t.y + e.y * s)
        }, i.Point.interpolate = function(t, e, s, n) {
            return void 0 === n && (n = new i.Point), n.setTo(t.x + (e.x - t.x) * s, t.y + (e.y - t.y) * s)
        }, i.Point.perp = function(t, e) {
            return void 0 === e && (e = new i.Point), e.setTo(-t.y, t.x)
        }, i.Point.rperp = function(t, e) {
            return void 0 === e && (e = new i.Point), e.setTo(t.y, -t.x)
        }, i.Point.distance = function(t, e, s) {
            var n = i.Math.distance(t.x, t.y, e.x, e.y);
            return s ? Math.round(n) : n
        }, i.Point.project = function(t, e, s) {
            void 0 === s && (s = new i.Point);
            var n = t.dot(e) / e.getMagnitudeSq();
            return 0 !== n && s.setTo(n * e.x, n * e.y), s
        }, i.Point.projectUnit = function(t, e, s) {
            void 0 === s && (s = new i.Point);
            var n = t.dot(e);
            return 0 !== n && s.setTo(n * e.x, n * e.y), s
        }, i.Point.normalRightHand = function(t, e) {
            return void 0 === e && (e = new i.Point), e.setTo(-1 * t.y, t.x)
        }, i.Point.normalize = function(t, e) {
            void 0 === e && (e = new i.Point);
            var s = t.getMagnitude();
            return 0 !== s && e.setTo(t.x / s, t.y / s), e
        }, i.Point.rotate = function(t, e, s, n, a, o) {
            if (a && (n = i.Math.degToRad(n)), void 0 === o) {
                t.subtract(e, s);
                var r = Math.sin(n),
                    h = Math.cos(n),
                    l = h * t.x - r * t.y,
                    c = r * t.x + h * t.y;
                t.x = l + e, t.y = c + s
            } else {
                var u = n + Math.atan2(t.y - s, t.x - e);
                t.x = e + o * Math.cos(u), t.y = s + o * Math.sin(u)
            }
            return t
        }, i.Point.centroid = function(t, e) {
            if (void 0 === e && (e = new i.Point), "[object Array]" !== Object.prototype.toString.call(t)) throw new Error("Phaser.Point. Parameter 'points' must be an array");
            var s = t.length;
            if (s < 1) throw new Error("Phaser.Point. Parameter 'points' array must not be empty");
            if (1 === s) return e.copyFrom(t[0]), e;
            for (var n = 0; n < s; n++) i.Point.add(e, t[n], e);
            return e.divide(s, s), e
        }, i.Point.parse = function(t, e, s) {
            e = e || "x", s = s || "y";
            var n = new i.Point;
            return t[e] && (n.x = parseInt(t[e], 10)), t[s] && (n.y = parseInt(t[s], 10)), n
        }, PIXI.Point = i.Point, i.Polygon = function() {
            this.area = 0, this._points = [], arguments.length > 0 && this.setTo.apply(this, arguments), this.closed = !0, this.flattened = !1, this.type = i.POLYGON
        }, i.Polygon.prototype = {
            toNumberArray: function(t) {
                void 0 === t && (t = []);
                for (var e = 0; e < this._points.length; e++) "number" == typeof this._points[e] ? (t.push(this._points[e]), t.push(this._points[e + 1]), e++) : (t.push(this._points[e].x), t.push(this._points[e].y));
                return t
            },
            flatten: function() {
                return this._points = this.toNumberArray(), this.flattened = !0, this
            },
            clone: function(t) {
                var e = this._points.slice();
                return void 0 === t || null === t ? t = new i.Polygon(e) : t.setTo(e), t
            },
            contains: function(t, e) {
                var i = !1;
                if (this.flattened)
                    for (var s = -2, n = this._points.length - 2;
                        (s += 2) < this._points.length; n = s) {
                        var a = this._points[s],
                            o = this._points[s + 1],
                            r = this._points[n],
                            h = this._points[n + 1];
                        (o <= e && e < h || h <= e && e < o) && t < (r - a) * (e - o) / (h - o) + a && (i = !i)
                    } else
                        for (var s = -1, n = this._points.length - 1; ++s < this._points.length; n = s) {
                            var a = this._points[s].x,
                                o = this._points[s].y,
                                r = this._points[n].x,
                                h = this._points[n].y;
                            (o <= e && e < h || h <= e && e < o) && t < (r - a) * (e - o) / (h - o) + a && (i = !i)
                        }
                return i
            },
            setTo: function(t) {
                if (this.area = 0, this._points = [], arguments.length > 0) {
                    Array.isArray(t) || (t = Array.prototype.slice.call(arguments));
                    for (var e = Number.MAX_VALUE, i = 0, s = t.length; i < s; i++) {
                        if ("number" == typeof t[i]) {
                            n = new PIXI.Point(t[i], t[i + 1]);
                            i++
                        } else if (Array.isArray(t[i])) n = new PIXI.Point(t[i][0], t[i][1]);
                        else var n = new PIXI.Point(t[i].x, t[i].y);
                        this._points.push(n), n.y < e && (e = n.y)
                    }
                    this.calculateArea(e)
                }
                return this
            },
            calculateArea: function(t) {
                for (var e, i, s, n, a = 0, o = this._points.length; a < o; a++) e = this._points[a], i = a === o - 1 ? this._points[0] : this._points[a + 1], s = (e.y - t + (i.y - t)) / 2, n = e.x - i.x, this.area += s * n;
                return this.area
            }
        }, i.Polygon.prototype.constructor = i.Polygon, Object.defineProperty(i.Polygon.prototype, "points", {
            get: function() {
                return this._points
            },
            set: function(t) {
                null != t ? this.setTo(t) : this.setTo()
            }
        }), PIXI.Polygon = i.Polygon, i.Rectangle = function(t, e, s, n) {
            t = t || 0, e = e || 0, s = s || 0, n = n || 0, this.x = t, this.y = e, this.width = s, this.height = n, this.type = i.RECTANGLE
        }, i.Rectangle.prototype = {
            offset: function(t, e) {
                return this.x += t, this.y += e, this
            },
            offsetPoint: function(t) {
                return this.offset(t.x, t.y)
            },
            setTo: function(t, e, i, s) {
                return this.x = t, this.y = e, this.width = i, this.height = s, this
            },
            scale: function(t, e) {
                return void 0 === e && (e = t), this.width *= t, this.height *= e, this
            },
            centerOn: function(t, e) {
                return this.centerX = t, this.centerY = e, this
            },
            floor: function() {
                this.x = Math.floor(this.x), this.y = Math.floor(this.y)
            },
            floorAll: function() {
                this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.width = Math.floor(this.width), this.height = Math.floor(this.height)
            },
            ceil: function() {
                this.x = Math.ceil(this.x), this.y = Math.ceil(this.y)
            },
            ceilAll: function() {
                this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.width = Math.ceil(this.width), this.height = Math.ceil(this.height)
            },
            copyFrom: function(t) {
                return this.setTo(t.x, t.y, t.width, t.height)
            },
            copyTo: function(t) {
                return t.x = this.x, t.y = this.y, t.width = this.width, t.height = this.height, t
            },
            inflate: function(t, e) {
                return i.Rectangle.inflate(this, t, e)
            },
            size: function(t) {
                return i.Rectangle.size(this, t)
            },
            resize: function(t, e) {
                return this.width = t, this.height = e, this
            },
            clone: function(t) {
                return i.Rectangle.clone(this, t)
            },
            contains: function(t, e) {
                return i.Rectangle.contains(this, t, e)
            },
            containsRect: function(t) {
                return i.Rectangle.containsRect(t, this)
            },
            equals: function(t) {
                return i.Rectangle.equals(this, t)
            },
            intersection: function(t, e) {
                return i.Rectangle.intersection(this, t, e)
            },
            intersects: function(t) {
                return i.Rectangle.intersects(this, t)
            },
            intersectsRaw: function(t, e, s, n, a) {
                return i.Rectangle.intersectsRaw(this, t, e, s, n, a)
            },
            union: function(t, e) {
                return i.Rectangle.union(this, t, e)
            },
            random: function(t) {
                return void 0 === t && (t = new i.Point), t.x = this.randomX, t.y = this.randomY, t
            },
            getPoint: function(t, e) {
                switch (void 0 === e && (e = new i.Point), t) {
                    default:
                        case i.TOP_LEFT:
                        return e.set(this.x, this.y);
                    case i.TOP_CENTER:
                        return e.set(this.centerX, this.y);
                    case i.TOP_RIGHT:
                        return e.set(this.right, this.y);
                    case i.LEFT_CENTER:
                        return e.set(this.x, this.centerY);
                    case i.CENTER:
                        return e.set(this.centerX, this.centerY);
                    case i.RIGHT_CENTER:
                        return e.set(this.right, this.centerY);
                    case i.BOTTOM_LEFT:
                        return e.set(this.x, this.bottom);
                    case i.BOTTOM_CENTER:
                        return e.set(this.centerX, this.bottom);
                    case i.BOTTOM_RIGHT:
                        return e.set(this.right, this.bottom)
                }
            },
            toString: function() {
                return "[{Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + " empty=" + this.empty + ")}]"
            }
        }, Object.defineProperty(i.Rectangle.prototype, "halfWidth", {
            get: function() {
                return Math.round(this.width / 2)
            }
        }), Object.defineProperty(i.Rectangle.prototype, "halfHeight", {
            get: function() {
                return Math.round(this.height / 2)
            }
        }), Object.defineProperty(i.Rectangle.prototype, "bottom", {
            get: function() {
                return this.y + this.height
            },
            set: function(t) {
                t <= this.y ? this.height = 0 : this.height = t - this.y
            }
        }), Object.defineProperty(i.Rectangle.prototype, "bottomLeft", {
            get: function() {
                return new i.Point(this.x, this.bottom)
            },
            set: function(t) {
                this.x = t.x, this.bottom = t.y
            }
        }), Object.defineProperty(i.Rectangle.prototype, "bottomRight", {
            get: function() {
                return new i.Point(this.right, this.bottom)
            },
            set: function(t) {
                this.right = t.x, this.bottom = t.y
            }
        }), Object.defineProperty(i.Rectangle.prototype, "left", {
            get: function() {
                return this.x
            },
            set: function(t) {
                t >= this.right ? this.width = 0 : this.width = this.right - t, this.x = t
            }
        }), Object.defineProperty(i.Rectangle.prototype, "right", {
            get: function() {
                return this.x + this.width
            },
            set: function(t) {
                t <= this.x ? this.width = 0 : this.width = t - this.x
            }
        }), Object.defineProperty(i.Rectangle.prototype, "volume", {
            get: function() {
                return this.width * this.height
            }
        }), Object.defineProperty(i.Rectangle.prototype, "perimeter", {
            get: function() {
                return 2 * this.width + 2 * this.height
            }
        }), Object.defineProperty(i.Rectangle.prototype, "centerX", {
            get: function() {
                return this.x + this.halfWidth
            },
            set: function(t) {
                this.x = t - this.halfWidth
            }
        }), Object.defineProperty(i.Rectangle.prototype, "centerY", {
            get: function() {
                return this.y + this.halfHeight
            },
            set: function(t) {
                this.y = t - this.halfHeight
            }
        }), Object.defineProperty(i.Rectangle.prototype, "randomX", {
            get: function() {
                return this.x + Math.random() * this.width
            }
        }), Object.defineProperty(i.Rectangle.prototype, "randomY", {
            get: function() {
                return this.y + Math.random() * this.height
            }
        }), Object.defineProperty(i.Rectangle.prototype, "top", {
            get: function() {
                return this.y
            },
            set: function(t) {
                t >= this.bottom ? (this.height = 0, this.y = t) : this.height = this.bottom - t
            }
        }), Object.defineProperty(i.Rectangle.prototype, "topLeft", {
            get: function() {
                return new i.Point(this.x, this.y)
            },
            set: function(t) {
                this.x = t.x, this.y = t.y
            }
        }), Object.defineProperty(i.Rectangle.prototype, "topRight", {
            get: function() {
                return new i.Point(this.x + this.width, this.y)
            },
            set: function(t) {
                this.right = t.x, this.y = t.y
            }
        }), Object.defineProperty(i.Rectangle.prototype, "empty", {
            get: function() {
                return !this.width || !this.height
            },
            set: function(t) {
                !0 === t && this.setTo(0, 0, 0, 0)
            }
        }), i.Rectangle.prototype.constructor = i.Rectangle, i.Rectangle.inflate = function(t, e, i) {
            return t.x -= e, t.width += 2 * e, t.y -= i, t.height += 2 * i, t
        }, i.Rectangle.inflatePoint = function(t, e) {
            return i.Rectangle.inflate(t, e.x, e.y)
        }, i.Rectangle.size = function(t, e) {
            return void 0 === e || null === e ? e = new i.Point(t.width, t.height) : e.setTo(t.width, t.height), e
        }, i.Rectangle.clone = function(t, e) {
            return void 0 === e || null === e ? e = new i.Rectangle(t.x, t.y, t.width, t.height) : e.setTo(t.x, t.y, t.width, t.height), e
        }, i.Rectangle.contains = function(t, e, i) {
            return !(t.width <= 0 || t.height <= 0) && (e >= t.x && e < t.right && i >= t.y && i < t.bottom)
        }, i.Rectangle.containsRaw = function(t, e, i, s, n, a) {
            return n >= t && n < t + i && a >= e && a < e + s
        }, i.Rectangle.containsPoint = function(t, e) {
            return i.Rectangle.contains(t, e.x, e.y)
        }, i.Rectangle.containsRect = function(t, e) {
            return !(t.volume > e.volume) && (t.x >= e.x && t.y >= e.y && t.right < e.right && t.bottom < e.bottom)
        }, i.Rectangle.equals = function(t, e) {
            return t.x === e.x && t.y === e.y && t.width === e.width && t.height === e.height
        }, i.Rectangle.sameDimensions = function(t, e) {
            return t.width === e.width && t.height === e.height
        }, i.Rectangle.intersection = function(t, e, s) {
            return void 0 === s && (s = new i.Rectangle), i.Rectangle.intersects(t, e) && (s.x = Math.max(t.x, e.x), s.y = Math.max(t.y, e.y), s.width = Math.min(t.right, e.right) - s.x, s.height = Math.min(t.bottom, e.bottom) - s.y), s
        }, i.Rectangle.intersects = function(t, e) {
            return !(t.width <= 0 || t.height <= 0 || e.width <= 0 || e.height <= 0) && !(t.right < e.x || t.bottom < e.y || t.x > e.right || t.y > e.bottom)
        }, i.Rectangle.intersectsRaw = function(t, e, i, s, n, a) {
            return void 0 === a && (a = 0), !(e > t.right + a || i < t.left - a || s > t.bottom + a || n < t.top - a)
        }, i.Rectangle.union = function(t, e, s) {
            return void 0 === s && (s = new i.Rectangle), s.setTo(Math.min(t.x, e.x), Math.min(t.y, e.y), Math.max(t.right, e.right) - Math.min(t.left, e.left), Math.max(t.bottom, e.bottom) - Math.min(t.top, e.top))
        }, i.Rectangle.aabb = function(t, e) {
            void 0 === e && (e = new i.Rectangle);
            var s = Number.NEGATIVE_INFINITY,
                n = Number.POSITIVE_INFINITY,
                a = Number.NEGATIVE_INFINITY,
                o = Number.POSITIVE_INFINITY;
            return t.forEach(function(t) {
                t.x > s && (s = t.x), t.x < n && (n = t.x), t.y > a && (a = t.y), t.y < o && (o = t.y)
            }), e.setTo(n, o, s - n, a - o), e
        }, PIXI.Rectangle = i.Rectangle, PIXI.EmptyRectangle = new i.Rectangle(0, 0, 0, 0), i.RoundedRectangle = function(t, e, s, n, a) {
            void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === s && (s = 0), void 0 === n && (n = 0), void 0 === a && (a = 20), this.x = t, this.y = e, this.width = s, this.height = n, this.radius = a || 20, this.type = i.ROUNDEDRECTANGLE
        }, i.RoundedRectangle.prototype = {
            clone: function() {
                return new i.RoundedRectangle(this.x, this.y, this.width, this.height, this.radius)
            },
            contains: function(t, e) {
                if (this.width <= 0 || this.height <= 0) return !1;
                var i = this.x;
                if (t >= i && t <= i + this.width) {
                    var s = this.y;
                    if (e >= s && e <= s + this.height) return !0
                }
                return !1
            }
        }, i.RoundedRectangle.prototype.constructor = i.RoundedRectangle, PIXI.RoundedRectangle = i.RoundedRectangle, i.Camera = function(t, e, s, n, a, o) {
            this.game = t, this.world = t.world, this.id = 0, this.view = new i.Rectangle(s, n, a, o), this.bounds = new i.Rectangle(s, n, a, o), this.deadzone = null, this.visible = !0, this.roundPx = !0, this.atLimit = {
                x: !1,
                y: !1
            }, this.target = null, this.displayObject = null, this.scale = null, this.totalInView = 0, this.lerp = new i.Point(1, 1), this.onShakeComplete = new i.Signal, this.onFlashComplete = new i.Signal, this.onFadeComplete = new i.Signal, this.fx = null, this._targetPosition = new i.Point, this._edge = 0, this._position = new i.Point, this._shake = {
                intensity: 0,
                duration: 0,
                horizontal: !1,
                vertical: !1,
                shakeBounds: !0,
                x: 0,
                y: 0
            }, this._fxDuration = 0, this._fxType = 0
        }, i.Camera.FOLLOW_LOCKON = 0, i.Camera.FOLLOW_PLATFORMER = 1, i.Camera.FOLLOW_TOPDOWN = 2, i.Camera.FOLLOW_TOPDOWN_TIGHT = 3, i.Camera.SHAKE_BOTH = 4, i.Camera.SHAKE_HORIZONTAL = 5, i.Camera.SHAKE_VERTICAL = 6, i.Camera.ENABLE_FX = !0, i.Camera.prototype = {
            boot: function() {
                this.displayObject = this.game.world, this.scale = this.game.world.scale, this.game.camera = this, i.Graphics && i.Camera.ENABLE_FX && (this.fx = new i.Graphics(this.game), this.game.stage.addChild(this.fx))
            },
            preUpdate: function() {
                this.totalInView = 0
            },
            follow: function(t, e, s, n) {
                void 0 === e && (e = i.Camera.FOLLOW_LOCKON), void 0 === s && (s = 1), void 0 === n && (n = 1), this.target = t, this.lerp.set(s, n);
                var a;
                switch (e) {
                    case i.Camera.FOLLOW_PLATFORMER:
                        var o = this.width / 8,
                            r = this.height / 3;
                        this.deadzone = new i.Rectangle((this.width - o) / 2, (this.height - r) / 2 - .25 * r, o, r);
                        break;
                    case i.Camera.FOLLOW_TOPDOWN:
                        a = Math.max(this.width, this.height) / 4, this.deadzone = new i.Rectangle((this.width - a) / 2, (this.height - a) / 2, a, a);
                        break;
                    case i.Camera.FOLLOW_TOPDOWN_TIGHT:
                        a = Math.max(this.width, this.height) / 8, this.deadzone = new i.Rectangle((this.width - a) / 2, (this.height - a) / 2, a, a);
                        break;
                    case i.Camera.FOLLOW_LOCKON:
                    default:
                        this.deadzone = null
                }
            },
            unfollow: function() {
                this.target = null
            },
            focusOn: function(t) {
                this.setPosition(Math.round(t.x - this.view.halfWidth), Math.round(t.y - this.view.halfHeight))
            },
            focusOnXY: function(t, e) {
                this.setPosition(Math.round(t - this.view.halfWidth), Math.round(e - this.view.halfHeight))
            },
            shake: function(t, e, s, n, a) {
                return void 0 === t && (t = .05), void 0 === e && (e = 500), void 0 === s && (s = !0), void 0 === n && (n = i.Camera.SHAKE_BOTH), void 0 === a && (a = !0), !(!s && this._shake.duration > 0) && (this._shake.intensity = t, this._shake.duration = e, this._shake.shakeBounds = a, this._shake.x = 0, this._shake.y = 0, this._shake.horizontal = n === i.Camera.SHAKE_BOTH || n === i.Camera.SHAKE_HORIZONTAL, this._shake.vertical = n === i.Camera.SHAKE_BOTH || n === i.Camera.SHAKE_VERTICAL, !0)
            },
            flash: function(t, e, i) {
                return void 0 === t && (t = 16777215), void 0 === e && (e = 500), void 0 === i && (i = !1), !(!this.fx || !i && this._fxDuration > 0) && (this.fx.clear(), this.fx.beginFill(t), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), this.fx.alpha = 1, this._fxDuration = e, this._fxType = 0, !0)
            },
            fade: function(t, e, i) {
                return void 0 === t && (t = 0), void 0 === e && (e = 500), void 0 === i && (i = !1), !(!this.fx || !i && this._fxDuration > 0) && (this.fx.clear(), this.fx.beginFill(t), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), this.fx.alpha = 0, this._fxDuration = e, this._fxType = 1, !0)
            },
            update: function() {
                this._fxDuration > 0 && this.updateFX(), this._shake.duration > 0 && this.updateShake(), this.bounds && this.checkBounds(), this.roundPx && (this.view.floor(), this._shake.x = Math.floor(this._shake.x), this._shake.y = Math.floor(this._shake.y)), this.displayObject.position.x = -this.view.x, this.displayObject.position.y = -this.view.y
            },
            updateFX: function() {
                0 === this._fxType ? (this.fx.alpha -= this.game.time.elapsedMS / this._fxDuration, this.fx.alpha <= 0 && (this._fxDuration = 0, this.fx.alpha = 0, this.onFlashComplete.dispatch())) : (this.fx.alpha += this.game.time.elapsedMS / this._fxDuration, this.fx.alpha >= 1 && (this._fxDuration = 0, this.fx.alpha = 1, this.onFadeComplete.dispatch()))
            },
            updateShake: function() {
                this._shake.duration -= this.game.time.elapsedMS, this._shake.duration <= 0 ? (this.onShakeComplete.dispatch(), this._shake.x = 0, this._shake.y = 0) : (this._shake.horizontal && (this._shake.x = this.game.rnd.frac() * this._shake.intensity * this.view.width * 2 - this._shake.intensity * this.view.width), this._shake.vertical && (this._shake.y = this.game.rnd.frac() * this._shake.intensity * this.view.height * 2 - this._shake.intensity * this.view.height))
            },
            updateTarget: function() {
                this._targetPosition.x = this.view.x + this.target.worldPosition.x, this._targetPosition.y = this.view.y + this.target.worldPosition.y, this.deadzone ? (this._edge = this._targetPosition.x - this.view.x, this._edge < this.deadzone.left ? this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.left, this.lerp.x) : this._edge > this.deadzone.right && (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.right, this.lerp.x)), this._edge = this._targetPosition.y - this.view.y, this._edge < this.deadzone.top ? this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.top, this.lerp.y) : this._edge > this.deadzone.bottom && (this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.bottom, this.lerp.y))) : (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.view.halfWidth, this.lerp.x), this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.view.halfHeight, this.lerp.y)), this.bounds && this.checkBounds(), this.roundPx && this.view.floor(), this.displayObject.position.x = -this.view.x, this.displayObject.position.y = -this.view.y
            },
            setBoundsToWorld: function() {
                this.bounds && this.bounds.copyFrom(this.game.world.bounds)
            },
            checkBounds: function() {
                this.atLimit.x = !1, this.atLimit.y = !1;
                var t = this.view.x + this._shake.x,
                    e = this.view.right + this._shake.x,
                    i = this.view.y + this._shake.y,
                    s = this.view.bottom + this._shake.y;
                t <= this.bounds.x * this.scale.x && (this.atLimit.x = !0, this.view.x = this.bounds.x * this.scale.x, this._shake.shakeBounds || (this._shake.x = 0)), e >= this.bounds.right * this.scale.x && (this.atLimit.x = !0, this.view.x = this.bounds.right * this.scale.x - this.width, this._shake.shakeBounds || (this._shake.x = 0)), i <= this.bounds.top * this.scale.y && (this.atLimit.y = !0, this.view.y = this.bounds.top * this.scale.y, this._shake.shakeBounds || (this._shake.y = 0)), s >= this.bounds.bottom * this.scale.y && (this.atLimit.y = !0, this.view.y = this.bounds.bottom * this.scale.y - this.height, this._shake.shakeBounds || (this._shake.y = 0))
            },
            setPosition: function(t, e) {
                this.view.x = t, this.view.y = e, this.bounds && this.checkBounds()
            },
            setSize: function(t, e) {
                this.view.width = t, this.view.height = e
            },
            reset: function() {
                this.target = null, this.view.x = 0, this.view.y = 0, this._shake.duration = 0, this.resetFX()
            },
            resetFX: function() {
                this.fx.clear(), this.fx.alpha = 0, this._fxDuration = 0
            }
        }, i.Camera.prototype.constructor = i.Camera, Object.defineProperty(i.Camera.prototype, "x", {
            get: function() {
                return this.view.x
            },
            set: function(t) {
                this.view.x = t, this.bounds && this.checkBounds()
            }
        }), Object.defineProperty(i.Camera.prototype, "y", {
            get: function() {
                return this.view.y
            },
            set: function(t) {
                this.view.y = t, this.bounds && this.checkBounds()
            }
        }), Object.defineProperty(i.Camera.prototype, "position", {
            get: function() {
                return this._position.set(this.view.x, this.view.y), this._position
            },
            set: function(t) {
                void 0 !== t.x && (this.view.x = t.x), void 0 !== t.y && (this.view.y = t.y), this.bounds && this.checkBounds()
            }
        }), Object.defineProperty(i.Camera.prototype, "width", {
            get: function() {
                return this.view.width
            },
            set: function(t) {
                this.view.width = t
            }
        }), Object.defineProperty(i.Camera.prototype, "height", {
            get: function() {
                return this.view.height
            },
            set: function(t) {
                this.view.height = t
            }
        }), Object.defineProperty(i.Camera.prototype, "shakeIntensity", {
            get: function() {
                return this._shake.intensity
            },
            set: function(t) {
                this._shake.intensity = t
            }
        }), i.State = function() {
            this.game = null, this.key = "", this.add = null, this.make = null, this.camera = null, this.cache = null, this.input = null, this.load = null, this.math = null, this.sound = null, this.scale = null, this.stage = null, this.state = null, this.time = null, this.tweens = null, this.world = null, this.particles = null, this.physics = null, this.rnd = null
        }, i.State.prototype = {
            init: function() {},
            preload: function() {},
            loadUpdate: function() {},
            loadRender: function() {},
            create: function() {},
            update: function() {},
            preRender: function() {},
            render: function() {},
            resize: function() {},
            paused: function() {},
            resumed: function() {},
            pauseUpdate: function() {},
            shutdown: function() {}
        }, i.State.prototype.constructor = i.State, i.StateManager = function(t, e) {
            this.game = t, this.states = {}, this._pendingState = null, void 0 !== e && null !== e && (this._pendingState = e), this._clearWorld = !1, this._clearCache = !1, this._created = !1, this._args = [], this.current = "", this.onStateChange = new i.Signal, this.onInitCallback = null, this.onPreloadCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onRenderCallback = null, this.onResizeCallback = null, this.onPreRenderCallback = null, this.onLoadUpdateCallback = null, this.onLoadRenderCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null, this.onShutDownCallback = null
        }, i.StateManager.prototype = {
            boot: function() {
                this.game.onPause.add(this.pause, this), this.game.onResume.add(this.resume, this), null !== this._pendingState && "string" != typeof this._pendingState && this.add("default", this._pendingState, !0)
            },
            add: function(t, e, s) {
                void 0 === s && (s = !1);
                var n;
                return e instanceof i.State ? n = e : "object" == typeof e ? (n = e).game = this.game : "function" == typeof e && (n = new e(this.game)), this.states[t] = n, s && (this.game.isBooted ? this.start(t) : this._pendingState = t), n
            },
            remove: function(t) {
                this.current === t && (this.callbackContext = null, this.onInitCallback = null, this.onShutDownCallback = null, this.onPreloadCallback = null, this.onLoadRenderCallback = null, this.onLoadUpdateCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onPreRenderCallback = null, this.onRenderCallback = null, this.onResizeCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null), delete this.states[t]
            },
            start: function(t, e, i) {
                void 0 === e && (e = !0), void 0 === i && (i = !1), this.checkState(t) && (this._pendingState = t, this._clearWorld = e, this._clearCache = i, arguments.length > 3 && (this._args = Array.prototype.splice.call(arguments, 3)))
            },
            restart: function(t, e) {
                void 0 === t && (t = !0), void 0 === e && (e = !1), this._pendingState = this.current, this._clearWorld = t, this._clearCache = e, arguments.length > 2 && (this._args = Array.prototype.slice.call(arguments, 2))
            },
            dummy: function() {},
            preUpdate: function() {
                if (this._pendingState && this.game.isBooted) {
                    var t = this.current;
                    if (this.clearCurrentState(), this.setCurrentState(this._pendingState), this.onStateChange.dispatch(this.current, t), this.current !== this._pendingState) return;
                    this._pendingState = null, this.onPreloadCallback ? (this.game.load.reset(!0), this.onPreloadCallback.call(this.callbackContext, this.game), 0 === this.game.load.totalQueuedFiles() && 0 === this.game.load.totalQueuedPacks() ? this.loadComplete() : this.game.load.start()) : this.loadComplete()
                }
            },
            clearCurrentState: function() {
                this.current && (this.onShutDownCallback && this.onShutDownCallback.call(this.callbackContext, this.game), this.game.tweens.removeAll(), this.game.camera.reset(), this.game.input.reset(!0), this.game.physics.clear(), this.game.time.removeAll(), this.game.scale.reset(this._clearWorld), this.game.debug && this.game.debug.reset(), this._clearWorld && (this.game.world.shutdown(), this._clearCache && this.game.cache.destroy()))
            },
            checkState: function(t) {
                return !!this.states[t] && !!(this.states[t].preload || this.states[t].create || this.states[t].update || this.states[t].render)
            },
            link: function(t) {
                this.states[t].game = this.game, this.states[t].add = this.game.add, this.states[t].make = this.game.make, this.states[t].camera = this.game.camera, this.states[t].cache = this.game.cache, this.states[t].input = this.game.input, this.states[t].load = this.game.load, this.states[t].math = this.game.math, this.states[t].sound = this.game.sound, this.states[t].scale = this.game.scale, this.states[t].state = this, this.states[t].stage = this.game.stage, this.states[t].time = this.game.time, this.states[t].tweens = this.game.tweens, this.states[t].world = this.game.world, this.states[t].particles = this.game.particles, this.states[t].rnd = this.game.rnd, this.states[t].physics = this.game.physics, this.states[t].key = t
            },
            unlink: function(t) {
                this.states[t] && (this.states[t].game = null, this.states[t].add = null, this.states[t].make = null, this.states[t].camera = null, this.states[t].cache = null, this.states[t].input = null, this.states[t].load = null, this.states[t].math = null, this.states[t].sound = null, this.states[t].scale = null, this.states[t].state = null, this.states[t].stage = null, this.states[t].time = null, this.states[t].tweens = null, this.states[t].world = null, this.states[t].particles = null, this.states[t].rnd = null, this.states[t].physics = null)
            },
            setCurrentState: function(t) {
                this.callbackContext = this.states[t], this.link(t), this.onInitCallback = this.states[t].init || this.dummy, this.onPreloadCallback = this.states[t].preload || null, this.onLoadRenderCallback = this.states[t].loadRender || null, this.onLoadUpdateCallback = this.states[t].loadUpdate || null, this.onCreateCallback = this.states[t].create || null, this.onUpdateCallback = this.states[t].update || null, this.onPreRenderCallback = this.states[t].preRender || null, this.onRenderCallback = this.states[t].render || null, this.onResizeCallback = this.states[t].resize || null, this.onPausedCallback = this.states[t].paused || null, this.onResumedCallback = this.states[t].resumed || null, this.onPauseUpdateCallback = this.states[t].pauseUpdate || null, this.onShutDownCallback = this.states[t].shutdown || this.dummy, "" !== this.current && this.game.physics.reset(), this.current = t, this._created = !1, this.onInitCallback.apply(this.callbackContext, this._args), t === this._pendingState && (this._args = []), this.game._kickstart = !0
            },
            getCurrentState: function() {
                return this.states[this.current]
            },
            loadComplete: function() {
                !1 === this._created && this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game), !1 === this._created && this.onCreateCallback ? (this._created = !0, this.onCreateCallback.call(this.callbackContext, this.game)) : this._created = !0
            },
            pause: function() {
                this._created && this.onPausedCallback && this.onPausedCallback.call(this.callbackContext, this.game)
            },
            resume: function() {
                this._created && this.onResumedCallback && this.onResumedCallback.call(this.callbackContext, this.game)
            },
            update: function() {
                this._created ? this.onUpdateCallback && this.onUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game)
            },
            pauseUpdate: function() {
                this._created ? this.onPauseUpdateCallback && this.onPauseUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game)
            },
            preRender: function(t) {
                this._created && this.onPreRenderCallback && this.onPreRenderCallback.call(this.callbackContext, this.game, t)
            },
            resize: function(t, e) {
                this.onResizeCallback && this.onResizeCallback.call(this.callbackContext, t, e)
            },
            render: function() {
                this._created ? this.onRenderCallback && (this.game.renderType === i.CANVAS ? (this.game.context.save(), this.game.context.setTransform(1, 0, 0, 1, 0, 0), this.onRenderCallback.call(this.callbackContext, this.game), this.game.context.restore()) : this.onRenderCallback.call(this.callbackContext, this.game)) : this.onLoadRenderCallback && this.onLoadRenderCallback.call(this.callbackContext, this.game)
            },
            destroy: function() {
                this._clearWorld = !0, this._clearCache = !0, this.clearCurrentState(), this.callbackContext = null, this.onInitCallback = null, this.onShutDownCallback = null, this.onPreloadCallback = null, this.onLoadRenderCallback = null, this.onLoadUpdateCallback = null, this.onCreateCallback = null, this.onUpdateCallback = null, this.onRenderCallback = null, this.onPausedCallback = null, this.onResumedCallback = null, this.onPauseUpdateCallback = null, this.game = null, this.states = {}, this._pendingState = null, this.current = ""
            }
        }, i.StateManager.prototype.constructor = i.StateManager, Object.defineProperty(i.StateManager.prototype, "created", {
            get: function() {
                return this._created
            }
        }), i.Signal = function() {}, i.Signal.prototype = {
            _bindings: null,
            _prevParams: null,
            memorize: !1,
            _shouldPropagate: !0,
            active: !0,
            _boundDispatch: !1,
            validateListener: function(t, e) {
                if ("function" != typeof t) throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}", e))
            },
            _registerListener: function(t, e, s, n, a) {
                var o, r = this._indexOfListener(t, s);
                if (-1 !== r) {
                    if ((o = this._bindings[r]).isOnce() !== e) throw new Error("You cannot add" + (e ? "" : "Once") + "() then add" + (e ? "Once" : "") + "() the same listener without removing the relationship first.")
                } else o = new i.SignalBinding(this, t, e, s, n, a), this._addBinding(o);
                return this.memorize && this._prevParams && o.execute(this._prevParams), o
            },
            _addBinding: function(t) {
                this._bindings || (this._bindings = []);
                var e = this._bindings.length;
                do {
                    e--
                } while (this._bindings[e] && t._priority <= this._bindings[e]._priority);
                this._bindings.splice(e + 1, 0, t)
            },
            _indexOfListener: function(t, e) {
                if (!this._bindings) return -1;
                void 0 === e && (e = null);
                for (var i, s = this._bindings.length; s--;)
                    if ((i = this._bindings[s])._listener === t && i.context === e) return s;
                return -1
            },
            has: function(t, e) {
                return -1 !== this._indexOfListener(t, e)
            },
            add: function(t, e, i) {
                this.validateListener(t, "add");
                var s = [];
                if (arguments.length > 3)
                    for (var n = 3; n < arguments.length; n++) s.push(arguments[n]);
                return this._registerListener(t, !1, e, i, s)
            },
            addOnce: function(t, e, i) {
                this.validateListener(t, "addOnce");
                var s = [];
                if (arguments.length > 3)
                    for (var n = 3; n < arguments.length; n++) s.push(arguments[n]);
                return this._registerListener(t, !0, e, i, s)
            },
            remove: function(t, e) {
                this.validateListener(t, "remove");
                var i = this._indexOfListener(t, e);
                return -1 !== i && (this._bindings[i]._destroy(), this._bindings.splice(i, 1)), t
            },
            removeAll: function(t) {
                if (void 0 === t && (t = null), this._bindings) {
                    for (var e = this._bindings.length; e--;) t ? this._bindings[e].context === t && (this._bindings[e]._destroy(), this._bindings.splice(e, 1)) : this._bindings[e]._destroy();
                    t || (this._bindings.length = 0)
                }
            },
            getNumListeners: function() {
                return this._bindings ? this._bindings.length : 0
            },
            halt: function() {
                this._shouldPropagate = !1
            },
            dispatch: function() {
                if (this.active && this._bindings) {
                    var t, e = Array.prototype.slice.call(arguments),
                        i = this._bindings.length;
                    if (this.memorize && (this._prevParams = e), i) {
                        t = this._bindings.slice(), this._shouldPropagate = !0;
                        do {
                            i--
                        } while (t[i] && this._shouldPropagate && !1 !== t[i].execute(e))
                    }
                }
            },
            forget: function() {
                this._prevParams && (this._prevParams = null)
            },
            dispose: function() {
                this.removeAll(), this._bindings = null, this._prevParams && (this._prevParams = null)
            },
            toString: function() {
                return "[Phaser.Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]"
            }
        }, Object.defineProperty(i.Signal.prototype, "boundDispatch", {
            get: function() {
                var t = this;
                return this._boundDispatch || (this._boundDispatch = function() {
                    return t.dispatch.apply(t, arguments)
                })
            }
        }), i.Signal.prototype.constructor = i.Signal, i.SignalBinding = function(t, e, i, s, n, a) {
            this._listener = e, i && (this._isOnce = !0), null != s && (this.context = s), this._signal = t, n && (this._priority = n), a && a.length && (this._args = a)
        }, i.SignalBinding.prototype = {
            context: null,
            _isOnce: !1,
            _priority: 0,
            _args: null,
            callCount: 0,
            active: !0,
            params: null,
            execute: function(t) {
                var e, i;
                return this.active && this._listener && (i = this.params ? this.params.concat(t) : t, this._args && (i = i.concat(this._args)), e = this._listener.apply(this.context, i), this.callCount++, this._isOnce && this.detach()), e
            },
            detach: function() {
                return this.isBound() ? this._signal.remove(this._listener, this.context) : null
            },
            isBound: function() {
                return !!this._signal && !!this._listener
            },
            isOnce: function() {
                return this._isOnce
            },
            getListener: function() {
                return this._listener
            },
            getSignal: function() {
                return this._signal
            },
            _destroy: function() {
                delete this._signal, delete this._listener, delete this.context
            },
            toString: function() {
                return "[Phaser.SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]"
            }
        }, i.SignalBinding.prototype.constructor = i.SignalBinding, i.Filter = function(t, e, s) {
            this.game = t, this.type = i.WEBGL_FILTER, this.passes = [this], this.shaders = [], this.dirty = !0, this.padding = 0, this.prevPoint = new i.Point;
            var n = new Date;
            if (this.uniforms = {
                resolution: {
                    type: "2f",
                    value: {
                        x: 256,
                        y: 256
                    }
                },
                time: {
                    type: "1f",
                    value: 0
                },
                mouse: {
                    type: "2f",
                    value: {
                        x: 0,
                        y: 0
                    }
                },
                date: {
                    type: "4fv",
                    value: [n.getFullYear(), n.getMonth(), n.getDate(), 60 * n.getHours() * 60 + 60 * n.getMinutes() + n.getSeconds()]
                },
                sampleRate: {
                    type: "1f",
                    value: 44100
                },
                iChannel0: {
                    type: "sampler2D",
                    value: null,
                    textureData: {
                        repeat: !0
                    }
                },
                iChannel1: {
                    type: "sampler2D",
                    value: null,
                    textureData: {
                        repeat: !0
                    }
                },
                iChannel2: {
                    type: "sampler2D",
                    value: null,
                    textureData: {
                        repeat: !0
                    }
                },
                iChannel3: {
                    type: "sampler2D",
                    value: null,
                    textureData: {
                        repeat: !0
                    }
                }
            }, e)
                for (var a in e) this.uniforms[a] = e[a];
            this.fragmentSrc = s || ""
        }, i.Filter.prototype = {
            init: function() {},
            setResolution: function(t, e) {
                this.uniforms.resolution.value.x = t, this.uniforms.resolution.value.y = e
            },
            update: function(t) {
                if (void 0 !== t) {
                    var e = t.x / this.game.width,
                        i = 1 - t.y / this.game.height;
                    e === this.prevPoint.x && i === this.prevPoint.y || (this.uniforms.mouse.value.x = e.toFixed(2), this.uniforms.mouse.value.y = i.toFixed(2), this.prevPoint.set(e, i))
                }
                this.uniforms.time.value = this.game.time.totalElapsedSeconds()
            },
            addToWorld: function(t, e, i, s, n, a) {
                void 0 === n && (n = 0), void 0 === a && (a = 0), void 0 !== i && null !== i ? this.width = i : i = this.width, void 0 !== s && null !== s ? this.height = s : s = this.height;
                var o = this.game.add.image(t, e, "__default");
                return o.width = i, o.height = s, o.anchor.set(n, a), o.filters = [this], o
            },
            destroy: function() {
                this.game = null
            }
        }, i.Filter.prototype.constructor = i.Filter, Object.defineProperty(i.Filter.prototype, "width", {
            get: function() {
                return this.uniforms.resolution.value.x
            },
            set: function(t) {
                this.uniforms.resolution.value.x = t
            }
        }), Object.defineProperty(i.Filter.prototype, "height", {
            get: function() {
                return this.uniforms.resolution.value.y
            },
            set: function(t) {
                this.uniforms.resolution.value.y = t
            }
        }), i.Plugin = function(t, e) {
            void 0 === e && (e = null), this.game = t, this.parent = e, this.active = !1, this.visible = !1, this.hasPreUpdate = !1, this.hasUpdate = !1, this.hasPostUpdate = !1, this.hasRender = !1, this.hasPostRender = !1
        }, i.Plugin.prototype = {
            preUpdate: function() {},
            update: function() {},
            render: function() {},
            postRender: function() {},
            destroy: function() {
                this.game = null, this.parent = null, this.active = !1, this.visible = !1
            }
        }, i.Plugin.prototype.constructor = i.Plugin, i.PluginManager = function(t) {
            this.game = t, this.plugins = [], this._len = 0, this._i = 0
        }, i.PluginManager.prototype = {
            add: function(t) {
                var e = Array.prototype.slice.call(arguments, 1),
                    i = !1;
                return "function" == typeof t ? t = new t(this.game, this) : (t.game = this.game, t.parent = this), "function" == typeof t.preUpdate && (t.hasPreUpdate = !0, i = !0), "function" == typeof t.update && (t.hasUpdate = !0, i = !0), "function" == typeof t.postUpdate && (t.hasPostUpdate = !0, i = !0), "function" == typeof t.render && (t.hasRender = !0, i = !0), "function" == typeof t.postRender && (t.hasPostRender = !0, i = !0), i ? ((t.hasPreUpdate || t.hasUpdate || t.hasPostUpdate) && (t.active = !0), (t.hasRender || t.hasPostRender) && (t.visible = !0), this._len = this.plugins.push(t), "function" == typeof t.init && t.init.apply(t, e), t) : null
            },
            remove: function(t, e) {
                for (void 0 === e && (e = !0), this._i = this._len; this._i--;)
                    if (this.plugins[this._i] === t) return e && t.destroy(), this.plugins.splice(this._i, 1), void this._len--
            },
            removeAll: function() {
                for (this._i = this._len; this._i--;) this.plugins[this._i].destroy();
                this.plugins.length = 0, this._len = 0
            },
            preUpdate: function() {
                for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasPreUpdate && this.plugins[this._i].preUpdate()
            },
            update: function() {
                for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasUpdate && this.plugins[this._i].update()
            },
            postUpdate: function() {
                for (this._i = this._len; this._i--;) this.plugins[this._i].active && this.plugins[this._i].hasPostUpdate && this.plugins[this._i].postUpdate()
            },
            render: function() {
                for (this._i = this._len; this._i--;) this.plugins[this._i].visible && this.plugins[this._i].hasRender && this.plugins[this._i].render()
            },
            postRender: function() {
                for (this._i = this._len; this._i--;) this.plugins[this._i].visible && this.plugins[this._i].hasPostRender && this.plugins[this._i].postRender()
            },
            destroy: function() {
                this.removeAll(), this.game = null
            }
        }, i.PluginManager.prototype.constructor = i.PluginManager, i.Stage = function(t) {
            this.game = t, PIXI.DisplayObjectContainer.call(this), this.name = "_stage_root", this.disableVisibilityChange = !1, this.exists = !0, this.worldTransform = new PIXI.Matrix, this.stage = this, this.currentRenderOrderID = 0, this._hiddenVar = "hidden", this._onChange = null, this._bgColor = {
                r: 0,
                g: 0,
                b: 0,
                a: 0,
                color: 0,
                rgba: "#000000"
            }, this.game.transparent || (this._bgColor.a = 1), t.config && this.parseConfig(t.config)
        }, i.Stage.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), i.Stage.prototype.constructor = i.Stage, i.Stage.prototype.parseConfig = function(t) {
            t.disableVisibilityChange && (this.disableVisibilityChange = t.disableVisibilityChange), t.backgroundColor && this.setBackgroundColor(t.backgroundColor)
        }, i.Stage.prototype.boot = function() {
            i.DOM.getOffset(this.game.canvas, this.offset), i.Canvas.setUserSelect(this.game.canvas, "none"), i.Canvas.setTouchAction(this.game.canvas, "none"), this.checkVisibility()
        }, i.Stage.prototype.preUpdate = function() {
            this.currentRenderOrderID = 0;
            for (var t = 0; t < this.children.length; t++) this.children[t].preUpdate()
        }, i.Stage.prototype.update = function() {
            for (var t = this.children.length; t--;) this.children[t].update()
        }, i.Stage.prototype.postUpdate = function() {
            this.game.camera.update(), this.game.camera.target && (this.game.camera.target.postUpdate(), this.updateTransform(), this.game.camera.updateTarget());
            for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate();
            this.updateTransform()
        }, i.Stage.prototype.updateTransform = function() {
            this.worldAlpha = 1;
            for (var t = 0; t < this.children.length; t++) this.children[t].updateTransform()
        }, i.Stage.prototype.checkVisibility = function() {
            void 0 !== document.hidden ? this._hiddenVar = "visibilitychange" : void 0 !== document.webkitHidden ? this._hiddenVar = "webkitvisibilitychange" : void 0 !== document.mozHidden ? this._hiddenVar = "mozvisibilitychange" : void 0 !== document.msHidden ? this._hiddenVar = "msvisibilitychange" : this._hiddenVar = null;
            var t = this;
            this._onChange = function(e) {
                return t.visibilityChange(e)
            }, this._hiddenVar && document.addEventListener(this._hiddenVar, this._onChange, !1), window.onblur = this._onChange, window.onfocus = this._onChange, window.onpagehide = this._onChange, window.onpageshow = this._onChange, this.game.device.cocoonJSApp && (CocoonJS.App.onSuspended.addEventListener(function() {
                i.Stage.prototype.visibilityChange.call(t, {
                    type: "pause"
                })
            }), CocoonJS.App.onActivated.addEventListener(function() {
                i.Stage.prototype.visibilityChange.call(t, {
                    type: "resume"
                })
            }))
        }, i.Stage.prototype.visibilityChange = function(t) {
            "pagehide" !== t.type && "blur" !== t.type && "pageshow" !== t.type && "focus" !== t.type ? this.disableVisibilityChange || (document.hidden || document.mozHidden || document.msHidden || document.webkitHidden || "pause" === t.type ? this.game.gamePaused(t) : this.game.gameResumed(t)) : "pagehide" === t.type || "blur" === t.type ? this.game.focusLoss(t) : "pageshow" !== t.type && "focus" !== t.type || this.game.focusGain(t)
        }, i.Stage.prototype.setBackgroundColor = function(t) {
            this.game.transparent || (i.Color.valueToColor(t, this._bgColor), i.Color.updateColor(this._bgColor), this._bgColor.r /= 255, this._bgColor.g /= 255, this._bgColor.b /= 255, this._bgColor.a = 1)
        }, i.Stage.prototype.destroy = function() {
            this._hiddenVar && document.removeEventListener(this._hiddenVar, this._onChange, !1), window.onpagehide = null, window.onpageshow = null, window.onblur = null, window.onfocus = null
        }, Object.defineProperty(i.Stage.prototype, "backgroundColor", {
            get: function() {
                return this._bgColor.color
            },
            set: function(t) {
                this.setBackgroundColor(t)
            }
        }), Object.defineProperty(i.Stage.prototype, "smoothed", {
            get: function() {
                return PIXI.scaleModes.DEFAULT === PIXI.scaleModes.LINEAR
            },
            set: function(t) {
                PIXI.scaleModes.DEFAULT = t ? PIXI.scaleModes.LINEAR : PIXI.scaleModes.NEAREST
            }
        }), i.Group = function(t, e, s, n, a, o) {
            void 0 === n && (n = !1), void 0 === a && (a = !1), void 0 === o && (o = i.Physics.ARCADE), this.game = t, void 0 === e && (e = t.world), this.name = s || "group", this.z = 0, PIXI.DisplayObjectContainer.call(this), n ? (this.game.stage.addChild(this), this.z = this.game.stage.children.length) : e && (e.addChild(this), this.z = e.children.length), this.type = i.GROUP, this.physicsType = i.GROUP, this.alive = !0, this.exists = !0, this.ignoreDestroy = !1, this.pendingDestroy = !1, this.classType = i.Sprite, this.cursor = null, this.inputEnableChildren = !1, this.onChildInputDown = new i.Signal, this.onChildInputUp = new i.Signal, this.onChildInputOver = new i.Signal, this.onChildInputOut = new i.Signal, this.enableBody = a, this.enableBodyDebug = !1, this.physicsBodyType = o, this.physicsSortDirection = null, this.onDestroy = new i.Signal, this.cursorIndex = 0, this.fixedToCamera = !1, this.cameraOffset = new i.Point, this.hash = [], this._sortProperty = "z"
        }, i.Group.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), i.Group.prototype.constructor = i.Group, i.Group.RETURN_NONE = 0, i.Group.RETURN_TOTAL = 1, i.Group.RETURN_CHILD = 2, i.Group.RETURN_ALL = 3, i.Group.SORT_ASCENDING = -1, i.Group.SORT_DESCENDING = 1, i.Group.prototype.add = function(t, e, i) {
            return void 0 === e && (e = !1), t.parent === this ? t : (t.body && t.parent && t.parent.hash && t.parent.removeFromHash(t), void 0 === i ? (t.z = this.children.length, this.addChild(t)) : (this.addChildAt(t, i), this.updateZ()), this.enableBody && t.hasOwnProperty("body") && null === t.body ? this.game.physics.enable(t, this.physicsBodyType) : t.body && this.addToHash(t), !this.inputEnableChildren || t.input && !t.inputEnabled || (t.inputEnabled = !0), !e && t.events && t.events.onAddedToGroup$dispatch(t, this), null === this.cursor && (this.cursor = t), t)
        }, i.Group.prototype.addAt = function(t, e, i) {
            this.add(t, i, e)
        }, i.Group.prototype.addToHash = function(t) {
            return t.parent === this && -1 === this.hash.indexOf(t) && (this.hash.push(t), !0)
        }, i.Group.prototype.removeFromHash = function(t) {
            if (t) {
                var e = this.hash.indexOf(t);
                if (-1 !== e) return this.hash.splice(e, 1), !0
            }
            return !1
        }, i.Group.prototype.addMultiple = function(t, e) {
            if (t instanceof i.Group) t.moveAll(this, e);
            else if (Array.isArray(t))
                for (var s = 0; s < t.length; s++) this.add(t[s], e);
            return t
        }, i.Group.prototype.getAt = function(t) {
            return t < 0 || t >= this.children.length ? -1 : this.getChildAt(t)
        }, i.Group.prototype.create = function(t, e, i, s, n, a) {
            void 0 === n && (n = !0);
            var o = new this.classType(this.game, t, e, i, s);
            return o.exists = n, o.visible = n, o.alive = n, this.add(o, !1, a)
        }, i.Group.prototype.createMultiple = function(t, e, i, s) {
            void 0 === i && (i = 0), void 0 === s && (s = !1), Array.isArray(e) || (e = [e]), Array.isArray(i) || (i = [i]);
            var n = this,
                a = [];
            return e.forEach(function(e) {
                i.forEach(function(i) {
                    for (var o = 0; o < t; o++) a.push(n.create(0, 0, e, i, s))
                })
            }), a
        }, i.Group.prototype.updateZ = function() {
            for (var t = this.children.length; t--;) this.children[t].z = t
        }, i.Group.prototype.align = function(t, e, s, n, a, o) {
            if (void 0 === a && (a = i.TOP_LEFT), void 0 === o && (o = 0), 0 === this.children.length || o > this.children.length || -1 === t && -1 === e) return !1;
            for (var r = new i.Rectangle(0, 0, s, n), h = t * s, l = e * n, c = o; c < this.children.length; c++) {
                var u = this.children[c];
                if (u.alignIn)
                    if (u.alignIn(r, a), -1 === t) r.y += n, r.y === l && (r.x += s, r.y = 0);
                    else if (-1 === e) r.x += s, r.x === h && (r.x = 0, r.y += n);
                else if (r.x += s, r.x === h && (r.x = 0, r.y += n, r.y === l)) return !0
            }
            return !0
        }, i.Group.prototype.resetCursor = function(t) {
            if (void 0 === t && (t = 0), t > this.children.length - 1 && (t = 0), this.cursor) return this.cursorIndex = t, this.cursor = this.children[this.cursorIndex], this.cursor
        }, i.Group.prototype.next = function() {
            if (this.cursor) return this.cursorIndex >= this.children.length - 1 ? this.cursorIndex = 0 : this.cursorIndex++, this.cursor = this.children[this.cursorIndex], this.cursor
        }, i.Group.prototype.previous = function() {
            if (this.cursor) return 0 === this.cursorIndex ? this.cursorIndex = this.children.length - 1 : this.cursorIndex--, this.cursor = this.children[this.cursorIndex], this.cursor
        }, i.Group.prototype.swap = function(t, e) {
            this.swapChildren(t, e), this.updateZ()
        }, i.Group.prototype.bringToTop = function(t) {
            return t.parent === this && this.getIndex(t) < this.children.length && (this.remove(t, !1, !0), this.add(t, !0)), t
        }, i.Group.prototype.sendToBack = function(t) {
            return t.parent === this && this.getIndex(t) > 0 && (this.remove(t, !1, !0), this.addAt(t, 0, !0)), t
        }, i.Group.prototype.moveUp = function(t) {
            if (t.parent === this && this.getIndex(t) < this.children.length - 1) {
                var e = this.getIndex(t),
                    i = this.getAt(e + 1);
                i && this.swap(t, i)
            }
            return t
        }, i.Group.prototype.moveDown = function(t) {
            if (t.parent === this && this.getIndex(t) > 0) {
                var e = this.getIndex(t),
                    i = this.getAt(e - 1);
                i && this.swap(t, i)
            }
            return t
        }, i.Group.prototype.xy = function(t, e, i) {
            if (t < 0 || t > this.children.length) return -1;
            this.getChildAt(t).x = e, this.getChildAt(t).y = i
        }, i.Group.prototype.reverse = function() {
            this.children.reverse(), this.updateZ()
        }, i.Group.prototype.getIndex = function(t) {
            return this.children.indexOf(t)
        }, i.Group.prototype.getByName = function(t) {
            for (var e = 0; e < this.children.length; e++)
                if (this.children[e].name === t) return this.children[e];
            return null
        }, i.Group.prototype.replace = function(t, e) {
            var s = this.getIndex(t);
            if (-1 !== s) return e.parent && (e.parent instanceof i.Group ? e.parent.remove(e) : e.parent.removeChild(e)), this.remove(t), this.addAt(e, s), t
        }, i.Group.prototype.hasProperty = function(t, e) {
            var i = e.length;
            return 1 === i && e[0] in t || (2 === i && e[0] in t && e[1] in t[e[0]] || (3 === i && e[0] in t && e[1] in t[e[0]] && e[2] in t[e[0]][e[1]] || 4 === i && e[0] in t && e[1] in t[e[0]] && e[2] in t[e[0]][e[1]] && e[3] in t[e[0]][e[1]][e[2]]))
        }, i.Group.prototype.setProperty = function(t, e, i, s, n) {
            if (void 0 === n && (n = !1), s = s || 0, !this.hasProperty(t, e) && (!n || s > 0)) return !1;
            var a = e.length;
            return 1 === a ? 0 === s ? t[e[0]] = i : 1 === s ? t[e[0]] += i : 2 === s ? t[e[0]] -= i : 3 === s ? t[e[0]] *= i : 4 === s && (t[e[0]] /= i) : 2 === a ? 0 === s ? t[e[0]][e[1]] = i : 1 === s ? t[e[0]][e[1]] += i : 2 === s ? t[e[0]][e[1]] -= i : 3 === s ? t[e[0]][e[1]] *= i : 4 === s && (t[e[0]][e[1]] /= i) : 3 === a ? 0 === s ? t[e[0]][e[1]][e[2]] = i : 1 === s ? t[e[0]][e[1]][e[2]] += i : 2 === s ? t[e[0]][e[1]][e[2]] -= i : 3 === s ? t[e[0]][e[1]][e[2]] *= i : 4 === s && (t[e[0]][e[1]][e[2]] /= i) : 4 === a && (0 === s ? t[e[0]][e[1]][e[2]][e[3]] = i : 1 === s ? t[e[0]][e[1]][e[2]][e[3]] += i : 2 === s ? t[e[0]][e[1]][e[2]][e[3]] -= i : 3 === s ? t[e[0]][e[1]][e[2]][e[3]] *= i : 4 === s && (t[e[0]][e[1]][e[2]][e[3]] /= i)), !0
        }, i.Group.prototype.checkProperty = function(t, e, s, n) {
            return void 0 === n && (n = !1), !(!i.Utils.getProperty(t, e) && n) && i.Utils.getProperty(t, e) === s
        }, i.Group.prototype.set = function(t, e, i, s, n, a, o) {
            if (void 0 === o && (o = !1), e = e.split("."), void 0 === s && (s = !1), void 0 === n && (n = !1), (!1 === s || s && t.alive) && (!1 === n || n && t.visible)) return this.setProperty(t, e, i, a, o)
        }, i.Group.prototype.setAll = function(t, e, i, s, n, a) {
            void 0 === i && (i = !1), void 0 === s && (s = !1), void 0 === a && (a = !1), t = t.split("."), n = n || 0;
            for (var o = 0; o < this.children.length; o++)(!i || i && this.children[o].alive) && (!s || s && this.children[o].visible) && this.setProperty(this.children[o], t, e, n, a)
        }, i.Group.prototype.setAllChildren = function(t, e, s, n, a, o) {
            void 0 === s && (s = !1), void 0 === n && (n = !1), void 0 === o && (o = !1), a = a || 0;
            for (var r = 0; r < this.children.length; r++)(!s || s && this.children[r].alive) && (!n || n && this.children[r].visible) && (this.children[r] instanceof i.Group ? this.children[r].setAllChildren(t, e, s, n, a, o) : this.setProperty(this.children[r], t.split("."), e, a, o))
        }, i.Group.prototype.checkAll = function(t, e, i, s, n) {
            void 0 === i && (i = !1), void 0 === s && (s = !1), void 0 === n && (n = !1);
            for (var a = 0; a < this.children.length; a++)
                if ((!i || i && this.children[a].alive) && (!s || s && this.children[a].visible) && !this.checkProperty(this.children[a], t, e, n)) return !1;
            return !0
        }, i.Group.prototype.addAll = function(t, e, i, s) {
            this.setAll(t, e, i, s, 1)
        }, i.Group.prototype.subAll = function(t, e, i, s) {
            this.setAll(t, e, i, s, 2)
        }, i.Group.prototype.multiplyAll = function(t, e, i, s) {
            this.setAll(t, e, i, s, 3)
        }, i.Group.prototype.divideAll = function(t, e, i, s) {
            this.setAll(t, e, i, s, 4)
        }, i.Group.prototype.callAllExists = function(t, e) {
            var i;
            if (arguments.length > 2) {
                i = [];
                for (s = 2; s < arguments.length; s++) i.push(arguments[s])
            }
            for (var s = 0; s < this.children.length; s++) this.children[s].exists === e && this.children[s][t] && this.children[s][t].apply(this.children[s], i)
        }, i.Group.prototype.callbackFromArray = function(t, e, i) {
            if (1 === i) {
                if (t[e[0]]) return t[e[0]]
            } else if (2 === i) {
                if (t[e[0]][e[1]]) return t[e[0]][e[1]]
            } else if (3 === i) {
                if (t[e[0]][e[1]][e[2]]) return t[e[0]][e[1]][e[2]]
            } else if (4 === i) {
                if (t[e[0]][e[1]][e[2]][e[3]]) return t[e[0]][e[1]][e[2]][e[3]]
            } else if (t[e]) return t[e];
            return !1
        }, i.Group.prototype.callAll = function(t, e) {
            if (void 0 !== t) {
                var i = (t = t.split(".")).length;
                if (void 0 === e || null === e || "" === e) e = null;
                else if ("string" == typeof e) var s = (e = e.split(".")).length;
                var n;
                if (arguments.length > 2) {
                    n = [];
                    for (r = 2; r < arguments.length; r++) n.push(arguments[r])
                }
                for (var a = null, o = null, r = 0; r < this.children.length; r++) a = this.callbackFromArray(this.children[r], t, i), e && a ? (o = this.callbackFromArray(this.children[r], e, s), a && a.apply(o, n)) : a && a.apply(this.children[r], n)
            }
        }, i.Group.prototype.preUpdate = function() {
            if (this.pendingDestroy) return this.destroy(), !1;
            if (!this.exists || !this.parent.exists) return this.renderOrderID = -1, !1;
            for (var t = 0; t < this.children.length; t++) this.children[t].preUpdate();
            return !0
        }, i.Group.prototype.update = function() {
            for (var t = this.children.length; t--;) this.children[t].update()
        }, i.Group.prototype.postUpdate = function() {
            this.fixedToCamera && (this.x = this.game.camera.view.x + this.cameraOffset.x, this.y = this.game.camera.view.y + this.cameraOffset.y);
            for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate()
        }, i.Group.prototype.filter = function(t, e) {
            for (var s = -1, n = this.children.length, a = []; ++s < n;) {
                var o = this.children[s];
                (!e || e && o.exists) && t(o, s, this.children) && a.push(o)
            }
            return new i.ArraySet(a)
        }, i.Group.prototype.forEach = function(t, e, i) {
            if (void 0 === i && (i = !1), arguments.length <= 3)
                for (n = 0; n < this.children.length; n++)(!i || i && this.children[n].exists) && t.call(e, this.children[n]);
            else {
                for (var s = [null], n = 3; n < arguments.length; n++) s.push(arguments[n]);
                for (n = 0; n < this.children.length; n++)(!i || i && this.children[n].exists) && (s[0] = this.children[n], t.apply(e, s))
            }
        }, i.Group.prototype.forEachExists = function(t, e) {
            var s;
            if (arguments.length > 2) {
                s = [null];
                for (var n = 2; n < arguments.length; n++) s.push(arguments[n])
            }
            this.iterate("exists", !0, i.Group.RETURN_TOTAL, t, e, s)
        }, i.Group.prototype.forEachAlive = function(t, e) {
            var s;
            if (arguments.length > 2) {
                s = [null];
                for (var n = 2; n < arguments.length; n++) s.push(arguments[n])
            }
            this.iterate("alive", !0, i.Group.RETURN_TOTAL, t, e, s)
        }, i.Group.prototype.forEachDead = function(t, e) {
            var s;
            if (arguments.length > 2) {
                s = [null];
                for (var n = 2; n < arguments.length; n++) s.push(arguments[n])
            }
            this.iterate("alive", !1, i.Group.RETURN_TOTAL, t, e, s)
        }, i.Group.prototype.sort = function(t, e) {
            this.children.length < 2 || (void 0 === t && (t = "z"), void 0 === e && (e = i.Group.SORT_ASCENDING), this._sortProperty = t, e === i.Group.SORT_ASCENDING ? this.children.sort(this.ascendingSortHandler.bind(this)) : this.children.sort(this.descendingSortHandler.bind(this)), this.updateZ())
        }, i.Group.prototype.customSort = function(t, e) {
            this.children.length < 2 || (this.children.sort(t.bind(e)), this.updateZ())
        }, i.Group.prototype.ascendingSortHandler = function(t, e) {
            return t[this._sortProperty] < e[this._sortProperty] ? -1 : t[this._sortProperty] > e[this._sortProperty] ? 1 : t.z < e.z ? -1 : 1
        }, i.Group.prototype.descendingSortHandler = function(t, e) {
            return t[this._sortProperty] < e[this._sortProperty] ? 1 : t[this._sortProperty] > e[this._sortProperty] ? -1 : 0
        }, i.Group.prototype.iterate = function(t, e, s, n, a, o) {
            if (0 === this.children.length) {
                if (s === i.Group.RETURN_TOTAL) return 0;
                if (s === i.Group.RETURN_ALL) return []
            }
            var r = 0;
            if (s === i.Group.RETURN_ALL) var h = [];
            for (var l = 0; l < this.children.length; l++)
                if (this.children[l][t] === e) {
                    if (r++, n && (o ? (o[0] = this.children[l], n.apply(a, o)) : n.call(a, this.children[l])), s === i.Group.RETURN_CHILD) return this.children[l];
                    s === i.Group.RETURN_ALL && h.push(this.children[l])
                }
            return s === i.Group.RETURN_TOTAL ? r : s === i.Group.RETURN_ALL ? h : null
        }, i.Group.prototype.getFirstExists = function(t, e, s, n, a, o) {
            void 0 === e && (e = !1), "boolean" != typeof t && (t = !0);
            var r = this.iterate("exists", t, i.Group.RETURN_CHILD);
            return null === r && e ? this.create(s, n, a, o) : this.resetChild(r, s, n, a, o)
        }, i.Group.prototype.getFirstAlive = function(t, e, s, n, a) {
            void 0 === t && (t = !1);
            var o = this.iterate("alive", !0, i.Group.RETURN_CHILD);
            return null === o && t ? this.create(e, s, n, a) : this.resetChild(o, e, s, n, a)
        }, i.Group.prototype.getFirstDead = function(t, e, s, n, a) {
            void 0 === t && (t = !1);
            var o = this.iterate("alive", !1, i.Group.RETURN_CHILD);
            return null === o && t ? this.create(e, s, n, a) : this.resetChild(o, e, s, n, a)
        }, i.Group.prototype.resetChild = function(t, e, i, s, n) {
            return null === t ? null : (void 0 === e && (e = null), void 0 === i && (i = null), null !== e && null !== i && t.reset(e, i), void 0 !== s && t.loadTexture(s, n), t)
        }, i.Group.prototype.getTop = function() {
            if (this.children.length > 0) return this.children[this.children.length - 1]
        }, i.Group.prototype.getBottom = function() {
            if (this.children.length > 0) return this.children[0]
        }, i.Group.prototype.getClosestTo = function(t, e, s) {
            for (var n = Number.MAX_VALUE, a = 0, o = null, r = 0; r < this.children.length; r++) {
                var h = this.children[r];
                h.exists && (a = Math.abs(i.Point.distance(t, h))) < n && (!e || e.call(s, h, a)) && (n = a, o = h)
            }
            return o
        }, i.Group.prototype.getFurthestFrom = function(t, e, s) {
            for (var n = 0, a = 0, o = null, r = 0; r < this.children.length; r++) {
                var h = this.children[r];
                h.exists && (a = Math.abs(i.Point.distance(t, h))) > n && (!e || e.call(s, h, a)) && (n = a, o = h)
            }
            return o
        }, i.Group.prototype.countLiving = function() {
            return this.iterate("alive", !0, i.Group.RETURN_TOTAL)
        }, i.Group.prototype.countDead = function() {
            return this.iterate("alive", !1, i.Group.RETURN_TOTAL)
        }, i.Group.prototype.getRandom = function(t, e) {
            return void 0 === t && (t = 0), void 0 === e && (e = this.children.length), 0 === e ? null : i.ArrayUtils.getRandomItem(this.children, t, e)
        }, i.Group.prototype.getRandomExists = function(t, e) {
            var i = this.getAll("exists", !0, t, e);
            return this.game.rnd.pick(i)
        }, i.Group.prototype.getAll = function(t, e, i, s) {
            void 0 === i && (i = 0), void 0 === s && (s = this.children.length);
            for (var n = [], a = i; a < s; a++) {
                var o = this.children[a];
                t && o[t] === e && n.push(o)
            }
            return n
        }, i.Group.prototype.remove = function(t, e, i) {
            if (void 0 === e && (e = !1), void 0 === i && (i = !1), 0 === this.children.length || -1 === this.children.indexOf(t)) return !1;
            i || !t.events || t.destroyPhase || t.events.onRemovedFromGroup$dispatch(t, this);
            var s = this.removeChild(t);
            return this.removeFromHash(t), this.updateZ(), this.cursor === t && this.next(), e && s && s.destroy(!0), !0
        }, i.Group.prototype.moveAll = function(t, e) {
            if (void 0 === e && (e = !1), this.children.length > 0 && t instanceof i.Group) {
                do {
                    t.add(this.children[0], e)
                } while (this.children.length > 0);
                this.hash = [], this.cursor = null
            }
            return t
        }, i.Group.prototype.removeAll = function(t, e, i) {
            if (void 0 === t && (t = !1), void 0 === e && (e = !1), void 0 === i && (i = !1), 0 !== this.children.length) {
                do {
                    !e && this.children[0].events && this.children[0].events.onRemovedFromGroup$dispatch(this.children[0], this);
                    var s = this.removeChild(this.children[0]);
                    this.removeFromHash(s), t && s && s.destroy(!0, i)
                } while (this.children.length > 0);
                this.hash = [], this.cursor = null
            }
        }, i.Group.prototype.removeBetween = function(t, e, i, s) {
            if (void 0 === e && (e = this.children.length - 1), void 0 === i && (i = !1), void 0 === s && (s = !1), 0 !== this.children.length) {
                if (t > e || t < 0 || e > this.children.length) return !1;
                for (var n = e; n >= t;) {
                    !s && this.children[n].events && this.children[n].events.onRemovedFromGroup$dispatch(this.children[n], this);
                    var a = this.removeChild(this.children[n]);
                    this.removeFromHash(a), i && a && a.destroy(!0), this.cursor === this.children[n] && (this.cursor = null), n--
                }
                this.updateZ()
            }
        }, i.Group.prototype.destroy = function(t, e) {
            null === this.game || this.ignoreDestroy || (void 0 === t && (t = !0), void 0 === e && (e = !1), this.onDestroy.dispatch(this, t, e), this.removeAll(t), this.cursor = null, this.filters = null, this.pendingDestroy = !1, e || (this.parent && this.parent.removeChild(this), this.game = null, this.exists = !1))
        }, Object.defineProperty(i.Group.prototype, "total", {
            get: function() {
                return this.iterate("exists", !0, i.Group.RETURN_TOTAL)
            }
        }), Object.defineProperty(i.Group.prototype, "length", {
            get: function() {
                return this.children.length
            }
        }), Object.defineProperty(i.Group.prototype, "angle", {
            get: function() {
                return i.Math.radToDeg(this.rotation)
            },
            set: function(t) {
                this.rotation = i.Math.degToRad(t)
            }
        }), Object.defineProperty(i.Group.prototype, "centerX", {
            get: function() {
                return this.getBounds(this.parent).centerX
            },
            set: function(t) {
                var e = this.getBounds(this.parent),
                    i = this.x - e.x;
                this.x = t + i - e.halfWidth
            }
        }), Object.defineProperty(i.Group.prototype, "centerY", {
            get: function() {
                return this.getBounds(this.parent).centerY
            },
            set: function(t) {
                var e = this.getBounds(this.parent),
                    i = this.y - e.y;
                this.y = t + i - e.halfHeight
            }
        }), Object.defineProperty(i.Group.prototype, "left", {
            get: function() {
                return this.getBounds(this.parent).left
            },
            set: function(t) {
                var e = this.getBounds(this.parent),
                    i = this.x - e.x;
                this.x = t + i
            }
        }), Object.defineProperty(i.Group.prototype, "right", {
            get: function() {
                return this.getBounds(this.parent).right
            },
            set: function(t) {
                var e = this.getBounds(this.parent),
                    i = this.x - e.x;
                this.x = t + i - e.width
            }
        }), Object.defineProperty(i.Group.prototype, "top", {
            get: function() {
                return this.getBounds(this.parent).top
            },
            set: function(t) {
                var e = this.getBounds(this.parent),
                    i = this.y - e.y;
                this.y = t + i
            }
        }), Object.defineProperty(i.Group.prototype, "bottom", {
            get: function() {
                return this.getBounds(this.parent).bottom
            },
            set: function(t) {
                var e = this.getBounds(this.parent),
                    i = this.y - e.y;
                this.y = t + i - e.height
            }
        }), i.World = function(t) {
            i.Group.call(this, t, null, "__world", !1), this.bounds = new i.Rectangle(0, 0, t.width, t.height), this.camera = null, this._definedSize = !1, this._width = t.width, this._height = t.height, this.game.state.onStateChange.add(this.stateChange, this)
        }, i.World.prototype = Object.create(i.Group.prototype), i.World.prototype.constructor = i.World, i.World.prototype.boot = function() {
            this.camera = new i.Camera(this.game, 0, 0, 0, this.game.width, this.game.height), this.game.stage.addChild(this), this.camera.boot()
        }, i.World.prototype.stateChange = function() {
            this.x = 0, this.y = 0, this.camera.reset()
        }, i.World.prototype.setBounds = function(t, e, i, s) {
            this._definedSize = !0, this._width = i, this._height = s, this.bounds.setTo(t, e, i, s), this.x = t, this.y = e, this.camera.bounds && this.camera.bounds.setTo(t, e, Math.max(i, this.game.width), Math.max(s, this.game.height)), this.game.physics.setBoundsToWorld()
        }, i.World.prototype.resize = function(t, e) {
            this._definedSize && (t < this._width && (t = this._width), e < this._height && (e = this._height)), this.bounds.width = t, this.bounds.height = e, this.game.camera.setBoundsToWorld(), this.game.physics.setBoundsToWorld()
        }, i.World.prototype.shutdown = function() {
            this.destroy(!0, !0)
        }, i.World.prototype.wrap = function(t, e, i, s, n) {
            void 0 === e && (e = 0), void 0 === i && (i = !1), void 0 === s && (s = !0), void 0 === n && (n = !0), i ? (t.getBounds(), s && (t.x + t._currentBounds.width < this.bounds.x ? t.x = this.bounds.right : t.x > this.bounds.right && (t.x = this.bounds.left)), n && (t.y + t._currentBounds.height < this.bounds.top ? t.y = this.bounds.bottom : t.y > this.bounds.bottom && (t.y = this.bounds.top))) : (s && t.x + e < this.bounds.x ? t.x = this.bounds.right + e : s && t.x - e > this.bounds.right && (t.x = this.bounds.left - e), n && t.y + e < this.bounds.top ? t.y = this.bounds.bottom + e : n && t.y - e > this.bounds.bottom && (t.y = this.bounds.top - e))
        }, Object.defineProperty(i.World.prototype, "width", {
            get: function() {
                return this.bounds.width
            },
            set: function(t) {
                t < this.game.width && (t = this.game.width), this.bounds.width = t, this._width = t, this._definedSize = !0
            }
        }), Object.defineProperty(i.World.prototype, "height", {
            get: function() {
                return this.bounds.height
            },
            set: function(t) {
                t < this.game.height && (t = this.game.height), this.bounds.height = t, this._height = t, this._definedSize = !0
            }
        }), Object.defineProperty(i.World.prototype, "centerX", {
            get: function() {
                return this.bounds.halfWidth + this.bounds.x
            }
        }), Object.defineProperty(i.World.prototype, "centerY", {
            get: function() {
                return this.bounds.halfHeight + this.bounds.y
            }
        }), Object.defineProperty(i.World.prototype, "randomX", {
            get: function() {
                return this.bounds.x < 0 ? this.game.rnd.between(this.bounds.x, this.bounds.width - Math.abs(this.bounds.x)) : this.game.rnd.between(this.bounds.x, this.bounds.width)
            }
        }), Object.defineProperty(i.World.prototype, "randomY", {
            get: function() {
                return this.bounds.y < 0 ? this.game.rnd.between(this.bounds.y, this.bounds.height - Math.abs(this.bounds.y)) : this.game.rnd.between(this.bounds.y, this.bounds.height)
            }
        }), i.Game = function(t, e, s, n, a, o, r, h) {
            return this.id = i.GAMES.push(this) - 1, this.config = null, this.physicsConfig = h, this.parent = "", this.width = 800, this.height = 600, this.resolution = 1, this._width = 800, this._height = 600, this.transparent = !1, this.antialias = !0, this.preserveDrawingBuffer = !1, this.clearBeforeRender = !0, this.renderer = null, this.renderType = i.AUTO, this.state = null, this.isBooted = !1, this.isRunning = !1, this.raf = null, this.add = null, this.make = null, this.cache = null, this.input = null, this.load = null, this.math = null, this.net = null, this.scale = null, this.sound = null, this.stage = null, this.time = null, this.tweens = null, this.world = null, this.physics = null, this.plugins = null, this.rnd = null, this.device = i.Device, this.camera = null, this.canvas = null, this.context = null, this.debug = null, this.particles = null, this.create = null, this.lockRender = !1, this.stepping = !1, this.pendingStep = !1, this.stepCount = 0, this.onPause = null, this.onResume = null, this.onBlur = null, this.onFocus = null, this._paused = !1, this._codePaused = !1, this.currentUpdateID = 0, this.updatesThisFrame = 1, this._deltaTime = 0, this._lastCount = 0, this._spiraling = 0, this._kickstart = !0, this.fpsProblemNotifier = new i.Signal, this.forceSingleUpdate = !0, this._nextFpsNotification = 0, 1 === arguments.length && "object" == typeof arguments[0] ? this.parseConfig(arguments[0]) : (this.config = {
                enableDebug: !0
            }, void 0 !== t && (this._width = t), void 0 !== e && (this._height = e), void 0 !== s && (this.renderType = s), void 0 !== n && (this.parent = n), void 0 !== o && (this.transparent = o), void 0 !== r && (this.antialias = r), this.rnd = new i.RandomDataGenerator([(Date.now() * Math.random()).toString()]), this.state = new i.StateManager(this, a)), this.device.whenReady(this.boot, this), this
        }, i.Game.prototype = {
            parseConfig: function(t) {
                this.config = t, void 0 === t.enableDebug && (this.config.enableDebug = !0), t.width && (this._width = t.width), t.height && (this._height = t.height), t.renderer && (this.renderType = t.renderer), t.parent && (this.parent = t.parent), void 0 !== t.transparent && (this.transparent = t.transparent), void 0 !== t.antialias && (this.antialias = t.antialias), t.resolution && (this.resolution = t.resolution), void 0 !== t.preserveDrawingBuffer && (this.preserveDrawingBuffer = t.preserveDrawingBuffer), t.physicsConfig && (this.physicsConfig = t.physicsConfig);
                var e = [(Date.now() * Math.random()).toString()];
                t.seed && (e = t.seed), this.rnd = new i.RandomDataGenerator(e);
                var s = null;
                t.state && (s = t.state), this.state = new i.StateManager(this, s)
            },
            boot: function() {
                this.isBooted || (this.onPause = new i.Signal, this.onResume = new i.Signal, this.onBlur = new i.Signal, this.onFocus = new i.Signal, this.isBooted = !0, PIXI.game = this, this.math = i.Math, this.scale = new i.ScaleManager(this, this._width, this._height), this.stage = new i.Stage(this), this.setUpRenderer(), this.world = new i.World(this), this.add = new i.GameObjectFactory(this), this.make = new i.GameObjectCreator(this), this.cache = new i.Cache(this), this.load = new i.Loader(this), this.time = new i.Time(this), this.tweens = new i.TweenManager(this), this.input = new i.Input(this), this.sound = new i.SoundManager(this), this.physics = new i.Physics(this, this.physicsConfig), this.particles = new i.Particles(this), this.create = new i.Create(this), this.plugins = new i.PluginManager(this), this.net = new i.Net(this), this.time.boot(), this.stage.boot(), this.world.boot(), this.scale.boot(), this.input.boot(), this.sound.boot(), this.state.boot(), this.config.enableDebug ? (this.debug = new i.Utils.Debug(this), this.debug.boot()) : this.debug = {
                    preUpdate: function() {},
                    update: function() {},
                    reset: function() {}
                }, this.showDebugHeader(), this.isRunning = !0, this.config && this.config.forceSetTimeOut ? this.raf = new i.RequestAnimationFrame(this, this.config.forceSetTimeOut) : this.raf = new i.RequestAnimationFrame(this, !1), this._kickstart = !0, window.focus && (!window.PhaserGlobal || window.PhaserGlobal && !window.PhaserGlobal.stopFocus) && window.focus(), this.raf.start())
            },
            showDebugHeader: function() {
                if (!window.PhaserGlobal || !window.PhaserGlobal.hideBanner) {
                    var t = i.VERSION,
                        e = "Canvas",
                        s = "HTML Audio",
                        n = 1;
                    if (this.renderType === i.WEBGL ? (e = "WebGL", n++) : this.renderType === i.HEADLESS && (e = "Headless"), this.device.webAudio && (s = "WebAudio", n++), this.device.chrome)
                        for (var a = ["%c %c %c @orange-games/phaser v" + t + " | Pixi.js | " + e + " | " + s + "  %c %c %c http://phaser.io %c♥%c♥%c♥", "background: #F47820", "background: #ED873F", "color: #ffffff; background: #DD6612;", "background: #ED873F", "background: #F47820", "background: #ffffff"], o = 0; o < 3; o++) o < n ? a.push("color: #ff2424; background: #fff") : a.push("color: #959595; background: #fff");
                    else window.console
                }
            },
            setUpRenderer: function() {
                if (this.config.canvas ? this.canvas = this.config.canvas : this.canvas = i.Canvas.create(this, this.width, this.height, this.config.canvasID, !0), this.config.canvasStyle ? this.canvas.style = this.config.canvasStyle : this.canvas.style["-webkit-full-screen"] = "width: 100%; height: 100%", this.renderType === i.HEADLESS || this.renderType === i.CANVAS || this.renderType === i.AUTO && !this.device.webGL) {
                    if (!this.device.canvas) throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");
                    this.renderType = i.CANVAS, this.renderer = new PIXI.CanvasRenderer(this), this.context = this.renderer.context
                } else this.renderType = i.WEBGL, this.renderer = new PIXI.WebGLRenderer(this), this.context = null, this.canvas.addEventListener("webglcontextlost", this.contextLost.bind(this), !1), this.canvas.addEventListener("webglcontextrestored", this.contextRestored.bind(this), !1);
                this.device.cocoonJS && (this.canvas.screencanvas = this.renderType === i.CANVAS), this.renderType !== i.HEADLESS && (this.stage.smoothed = this.antialias, i.Canvas.addToDOM(this.canvas, this.parent, !1), i.Canvas.setTouchAction(this.canvas))
            },
            contextLost: function(t) {
                t.preventDefault(), this.renderer.contextLost = !0
            },
            contextRestored: function() {
                this.renderer.initContext(), this.cache.clearGLTextures(), this.renderer.contextLost = !1
            },
            update: function(t) {
                if (this.time.update(t), this._kickstart) return this.updateLogic(this.time.desiredFpsMult), this.updateRender(this.time.slowMotion * this.time.desiredFps), void(this._kickstart = !1);
                if (this._spiraling > 1 && !this.forceSingleUpdate) this.time.time > this._nextFpsNotification && (this._nextFpsNotification = this.time.time + 1e4, this.fpsProblemNotifier.dispatch()), this._deltaTime = 0, this._spiraling = 0, this.updateRender(this.time.slowMotion * this.time.desiredFps);
                else {
                    var e = 1e3 * this.time.slowMotion / this.time.desiredFps;
                    this._deltaTime += Math.max(Math.min(3 * e, this.time.elapsed), 0);
                    var i = 0;
                    for (this.updatesThisFrame = Math.floor(this._deltaTime / e), this.forceSingleUpdate && (this.updatesThisFrame = Math.min(1, this.updatesThisFrame)); this._deltaTime >= e && (this._deltaTime -= e, this.currentUpdateID = i, this.updateLogic(this.time.desiredFpsMult), i++, !this.forceSingleUpdate || 1 !== i);) this.time.refresh();
                    i > this._lastCount ? this._spiraling++ : i < this._lastCount && (this._spiraling = 0), this._lastCount = i, this.updateRender(this._deltaTime / e)
                }
            },
            updateLogic: function(t) {
                this._paused || this.pendingStep ? (this.scale.pauseUpdate(), this.state.pauseUpdate(), this.debug.preUpdate()) : (this.stepping && (this.pendingStep = !0), this.scale.preUpdate(), this.debug.preUpdate(), this.camera.preUpdate(), this.physics.preUpdate(), this.state.preUpdate(t), this.plugins.preUpdate(t), this.stage.preUpdate(), this.state.update(), this.stage.update(), this.tweens.update(), this.sound.update(), this.input.update(), this.physics.update(), this.particles.update(), this.plugins.update(), this.stage.postUpdate(), this.plugins.postUpdate()), this.stage.updateTransform()
            },
            updateRender: function(t) {
                this.lockRender || (this.state.preRender(t), this.renderType !== i.HEADLESS && (this.renderer.render(this.stage), this.plugins.render(t), this.state.render(t)), this.plugins.postRender(t))
            },
            enableStep: function() {
                this.stepping = !0, this.pendingStep = !1, this.stepCount = 0
            },
            disableStep: function() {
                this.stepping = !1, this.pendingStep = !1
            },
            step: function() {
                this.pendingStep = !1, this.stepCount++
            },
            destroy: function() {
                this.raf.stop(), this.state.destroy(), this.sound.destroy(), this.scale.destroy(), this.stage.destroy(), this.input.destroy(), this.physics.destroy(), this.plugins.destroy(), this.state = null, this.sound = null, this.scale = null, this.stage = null, this.input = null, this.physics = null, this.plugins = null, this.cache = null, this.load = null, this.time = null, this.world = null, this.isBooted = !1, this.renderer.destroy(!1), i.Canvas.removeFromDOM(this.canvas), PIXI.defaultRenderer = null, i.GAMES[this.id] = null
            },
            gamePaused: function(t) {
                this._paused || (this._paused = !0, this.time.gamePaused(), this.sound.muteOnPause && this.sound.setMute(), this.onPause.dispatch(t), this.device.cordova && this.device.iOS && (this.lockRender = !0))
            },
            gameResumed: function(t) {
                this._paused && !this._codePaused && (this._paused = !1, this.time.gameResumed(), this.input.reset(), this.sound.muteOnPause && this.sound.unsetMute(), this.onResume.dispatch(t), this.device.cordova && this.device.iOS && (this.lockRender = !1))
            },
            focusLoss: function(t) {
                this.onBlur.dispatch(t), this.stage.disableVisibilityChange || this.gamePaused(t)
            },
            focusGain: function(t) {
                this.onFocus.dispatch(t), this.stage.disableVisibilityChange || this.gameResumed(t)
            }
        }, i.Game.prototype.constructor = i.Game, Object.defineProperty(i.Game.prototype, "paused", {
            get: function() {
                return this._paused
            },
            set: function(t) {
                !0 === t ? (!1 === this._paused && (this._paused = !0, this.sound.setMute(), this.time.gamePaused(), this.onPause.dispatch(this)), this._codePaused = !0) : (this._paused && (this._paused = !1, this.input.reset(), this.sound.unsetMute(), this.time.gameResumed(), this.onResume.dispatch(this)), this._codePaused = !1)
            }
        }), i.Input = function(t) {
            this.game = t, this.hitCanvas = null, this.hitContext = null, this.moveCallbacks = [], this.customCandidateHandler = null, this.customCandidateHandlerContext = null, this.pollRate = 0, this.enabled = !0, this.multiInputOverride = i.Input.MOUSE_TOUCH_COMBINE, this.position = null, this.speed = null, this.circle = null, this.scale = null, this.maxPointers = -1, this.tapRate = 200, this.doubleTapRate = 300, this.holdRate = 2e3, this.justPressedRate = 200, this.justReleasedRate = 200, this.recordPointerHistory = !1, this.recordRate = 100, this.recordLimit = 100, this.pointer1 = null, this.pointer2 = null, this.pointer3 = null, this.pointer4 = null, this.pointer5 = null, this.pointer6 = null, this.pointer7 = null, this.pointer8 = null, this.pointer9 = null, this.pointer10 = null, this.pointers = [], this.activePointer = null, this.mousePointer = null, this.mouse = null, this.keyboard = null, this.touch = null, this.mspointer = null, this.gamepad = null, this.resetLocked = !1, this.onDown = null, this.onUp = null, this.onTap = null, this.onHold = null, this.minPriorityID = 0, this.interactiveItems = new i.ArraySet, this._localPoint = new i.Point, this._pollCounter = 0, this._oldPosition = null, this._x = 0, this._y = 0
        }, i.Input.MOUSE_OVERRIDES_TOUCH = 0, i.Input.TOUCH_OVERRIDES_MOUSE = 1, i.Input.MOUSE_TOUCH_COMBINE = 2, i.Input.MAX_POINTERS = 10, i.Input.prototype = {
            boot: function() {
                this.mousePointer = new i.Pointer(this.game, 0, i.PointerMode.CURSOR), this.addPointer(), this.addPointer(), this.mouse = new i.Mouse(this.game), this.touch = new i.Touch(this.game), this.mspointer = new i.MSPointer(this.game), i.Keyboard && (this.keyboard = new i.Keyboard(this.game)), i.Gamepad && (this.gamepad = new i.Gamepad(this.game)), this.onDown = new i.Signal, this.onUp = new i.Signal, this.onTap = new i.Signal, this.onHold = new i.Signal, this.scale = new i.Point(1, 1), this.speed = new i.Point, this.position = new i.Point, this._oldPosition = new i.Point, this.circle = new i.Circle(0, 0, 44), this.activePointer = this.mousePointer, this.hitCanvas = PIXI.CanvasPool.create(this, 1, 1), this.hitContext = this.hitCanvas.getContext("2d"), this.mouse.start(), this.touch.start(), this.mspointer.start(), this.mousePointer.active = !0, this.keyboard && this.keyboard.start();
                var t = this;
                this._onClickTrampoline = function(e) {
                    t.onClickTrampoline(e)
                }, this.game.canvas.addEventListener("click", this._onClickTrampoline, !1)
            },
            destroy: function() {
                this.mouse.stop(), this.touch.stop(), this.mspointer.stop(), this.keyboard && this.keyboard.stop(), this.gamepad && this.gamepad.stop(), this.moveCallbacks = [], PIXI.CanvasPool.remove(this), this.game.canvas.removeEventListener("click", this._onClickTrampoline)
            },
            setInteractiveCandidateHandler: function(t, e) {
                this.customCandidateHandler = t, this.customCandidateHandlerContext = e
            },
            addMoveCallback: function(t, e) {
                this.moveCallbacks.push({
                    callback: t,
                    context: e
                })
            },
            deleteMoveCallback: function(t, e) {
                for (var i = this.moveCallbacks.length; i--;)
                    if (this.moveCallbacks[i].callback === t && this.moveCallbacks[i].context === e) return void this.moveCallbacks.splice(i, 1)
            },
            addPointer: function() {
                if (this.pointers.length >= i.Input.MAX_POINTERS) return null;
                var t = this.pointers.length + 1,
                    e = new i.Pointer(this.game, t, i.PointerMode.TOUCH);
                return this.pointers.push(e), this["pointer" + t] = e, e
            },
            update: function() {
                if (this.keyboard && this.keyboard.update(), this.pollRate > 0 && this._pollCounter < this.pollRate) this._pollCounter++;
                else {
                    this.speed.x = this.position.x - this._oldPosition.x, this.speed.y = this.position.y - this._oldPosition.y, this._oldPosition.copyFrom(this.position), this.mousePointer.update(), this.gamepad && this.gamepad.active && this.gamepad.update();
                    for (var t = 0; t < this.pointers.length; t++) this.pointers[t].update();
                    this._pollCounter = 0
                }
            },
            reset: function(t) {
                if (this.game.isBooted && !this.resetLocked) {
                    void 0 === t && (t = !1), this.mousePointer.reset(), this.keyboard && this.keyboard.reset(t), this.gamepad && this.gamepad.reset();
                    for (var e = 0; e < this.pointers.length; e++) this.pointers[e].reset();
                    "none" !== this.game.canvas.style.cursor && (this.game.canvas.style.cursor = "inherit"), t && (this.onDown.dispose(), this.onUp.dispose(), this.onTap.dispose(), this.onHold.dispose(), this.onDown = new i.Signal, this.onUp = new i.Signal, this.onTap = new i.Signal, this.onHold = new i.Signal, this.moveCallbacks = []), this._pollCounter = 0
                }
            },
            resetSpeed: function(t, e) {
                this._oldPosition.setTo(t, e), this.speed.setTo(0, 0)
            },
            startPointer: function(t) {
                if (this.maxPointers >= 0 && this.countActivePointers(this.maxPointers) >= this.maxPointers) return null;
                if (!this.pointer1.active) return this.pointer1.start(t);
                if (!this.pointer2.active) return this.pointer2.start(t);
                for (var e = 2; e < this.pointers.length; e++) {
                    var i = this.pointers[e];
                    if (!i.active) return i.start(t)
                }
                return null
            },
            updatePointer: function(t) {
                if (this.pointer1.active && this.pointer1.identifier === t.identifier) return this.pointer1.move(t);
                if (this.pointer2.active && this.pointer2.identifier === t.identifier) return this.pointer2.move(t);
                for (var e = 2; e < this.pointers.length; e++) {
                    var i = this.pointers[e];
                    if (i.active && i.identifier === t.identifier) return i.move(t)
                }
                return null
            },
            stopPointer: function(t) {
                if (this.pointer1.active && this.pointer1.identifier === t.identifier) return this.pointer1.stop(t);
                if (this.pointer2.active && this.pointer2.identifier === t.identifier) return this.pointer2.stop(t);
                for (var e = 2; e < this.pointers.length; e++) {
                    var i = this.pointers[e];
                    if (i.active && i.identifier === t.identifier) return i.stop(t)
                }
                return null
            },
            countActivePointers: function(t) {
                void 0 === t && (t = this.pointers.length);
                for (var e = t, i = 0; i < this.pointers.length && e > 0; i++) this.pointers[i].active && e--;
                return t - e
            },
            getPointer: function(t) {
                void 0 === t && (t = !1);
                for (var e = 0; e < this.pointers.length; e++) {
                    var i = this.pointers[e];
                    if (i.active === t) return i
                }
                return null
            },
            getPointerFromIdentifier: function(t) {
                for (var e = 0; e < this.pointers.length; e++) {
                    var i = this.pointers[e];
                    if (i.identifier === t) return i
                }
                return null
            },
            getPointerFromId: function(t) {
                for (var e = 0; e < this.pointers.length; e++) {
                    var i = this.pointers[e];
                    if (i.pointerId === t) return i
                }
                return null
            },
            getLocalPosition: function(t, e, s) {
                void 0 === s && (s = new i.Point);
                var n = t.worldTransform,
                    a = 1 / (n.a * n.d + n.c * -n.b);
                return s.setTo(n.d * a * e.x + -n.c * a * e.y + (n.ty * n.c - n.tx * n.d) * a, n.a * a * e.y + -n.b * a * e.x + (-n.ty * n.a + n.tx * n.b) * a)
            },
            hitTest: function(t, e, s) {
                if (!t.worldVisible) return !1;
                if (this.getLocalPosition(t, e, this._localPoint), s.copyFrom(this._localPoint), t.hitArea && t.hitArea.contains) return t.hitArea.contains(this._localPoint.x, this._localPoint.y);
                if (t instanceof i.TileSprite) {
                    var n = t.width,
                        a = t.height,
                        o = -n * t.anchor.x;
                    if (this._localPoint.x >= o && this._localPoint.x < o + n) {
                        r = -a * t.anchor.y;
                        if (this._localPoint.y >= r && this._localPoint.y < r + a) return !0
                    }
                } else if (t instanceof PIXI.Sprite) {
                    var n = t.texture.frame.width,
                        a = t.texture.frame.height,
                        o = -n * t.anchor.x;
                    if (this._localPoint.x >= o && this._localPoint.x < o + n) {
                        var r = -a * t.anchor.y;
                        if (this._localPoint.y >= r && this._localPoint.y < r + a) return !0
                    }
                } else if (t instanceof i.Graphics)
                    for (l = 0; l < t.graphicsData.length; l++) {
                        var h = t.graphicsData[l];
                        if (h.fill && (h.shape && h.shape.contains(this._localPoint.x, this._localPoint.y))) return !0
                    }
                for (var l = 0; l < t.children.length; l++)
                    if (this.hitTest(t.children[l], e, s)) return !0;
                return !1
            },
            onClickTrampoline: function() {
                this.activePointer.processClickTrampolines()
            }
        }, i.Input.prototype.constructor = i.Input, Object.defineProperty(i.Input.prototype, "x", {
            get: function() {
                return this._x
            },
            set: function(t) {
                this._x = Math.floor(t)
            }
        }), Object.defineProperty(i.Input.prototype, "y", {
            get: function() {
                return this._y
            },
            set: function(t) {
                this._y = Math.floor(t)
            }
        }), Object.defineProperty(i.Input.prototype, "pollLocked", {
            get: function() {
                return this.pollRate > 0 && this._pollCounter < this.pollRate
            }
        }), Object.defineProperty(i.Input.prototype, "totalInactivePointers", {
            get: function() {
                return this.pointers.length - this.countActivePointers()
            }
        }), Object.defineProperty(i.Input.prototype, "totalActivePointers", {
            get: function() {
                return this.countActivePointers()
            }
        }), Object.defineProperty(i.Input.prototype, "worldX", {
            get: function() {
                return this.game.camera.view.x + this.x
            }
        }), Object.defineProperty(i.Input.prototype, "worldY", {
            get: function() {
                return this.game.camera.view.y + this.y
            }
        }), i.Mouse = function(t) {
            this.game = t, this.input = t.input, this.callbackContext = this.game, this.mouseDownCallback = null, this.mouseUpCallback = null, this.mouseOutCallback = null, this.mouseOverCallback = null, this.mouseWheelCallback = null, this.capture = !1, this.button = -1, this.wheelDelta = 0, this.enabled = !0, this.locked = !1, this.stopOnGameOut = !1, this.pointerLock = new i.Signal, this.event = null, this._onMouseDown = null, this._onMouseMove = null, this._onMouseUp = null, this._onMouseOut = null, this._onMouseOver = null, this._onMouseWheel = null, this._wheelEvent = null
        }, i.Mouse.NO_BUTTON = -1, i.Mouse.LEFT_BUTTON = 0, i.Mouse.MIDDLE_BUTTON = 1, i.Mouse.RIGHT_BUTTON = 2, i.Mouse.BACK_BUTTON = 3, i.Mouse.FORWARD_BUTTON = 4, i.Mouse.WHEEL_UP = 1, i.Mouse.WHEEL_DOWN = -1, i.Mouse.prototype = {
            start: function() {
                if ((!this.game.device.android || !1 !== this.game.device.chrome) && null === this._onMouseDown) {
                    var e = this;
                    this._onMouseDown = function(t) {
                        return e.onMouseDown(t)
                    }, this._onMouseMove = function(t) {
                        return e.onMouseMove(t)
                    }, this._onMouseUp = function(t) {
                        return e.onMouseUp(t)
                    }, this._onMouseUpGlobal = function(t) {
                        return e.onMouseUpGlobal(t)
                    }, this._onMouseOutGlobal = function(t) {
                        return e.onMouseOutGlobal(t)
                    }, this._onMouseOut = function(t) {
                        return e.onMouseOut(t)
                    }, this._onMouseOver = function(t) {
                        return e.onMouseOver(t)
                    }, this._onMouseWheel = function(t) {
                        return e.onMouseWheel(t)
                    };
                    var i = this.game.canvas;
                    i.addEventListener("mousedown", this._onMouseDown, !0), i.addEventListener("mousemove", this._onMouseMove, !0), i.addEventListener("mouseup", this._onMouseUp, !0), this.game.device.cocoonJS || (window.addEventListener("mouseup", this._onMouseUpGlobal, !0), window.addEventListener("mouseout", this._onMouseOutGlobal, !0), i.addEventListener("mouseover", this._onMouseOver, !0), i.addEventListener("mouseout", this._onMouseOut, !0));
                    var s = this.game.device.wheelEvent;
                    s && (i.addEventListener(s, this._onMouseWheel, !0), "mousewheel" === s ? this._wheelEvent = new t(-.025, 1) : "DOMMouseScroll" === s && (this._wheelEvent = new t(1, 1)))
                }
            },
            onMouseDown: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.mouseDownCallback && this.mouseDownCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = 0, this.input.mousePointer.start(t))
            },
            onMouseMove: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.mouseMoveCallback && this.mouseMoveCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = 0, this.input.mousePointer.move(t))
            },
            onMouseUp: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = 0, this.input.mousePointer.stop(t))
            },
            onMouseUpGlobal: function(t) {
                this.input.mousePointer.withinGame || (this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, t), t.identifier = 0, this.input.mousePointer.stop(t))
            },
            onMouseOutGlobal: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.input.mousePointer.withinGame = !1, this.input.enabled && this.enabled && (this.input.mousePointer.stop(t), this.input.mousePointer.leftButton.stop(t), this.input.mousePointer.rightButton.stop(t))
            },
            onMouseOut: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.input.mousePointer.withinGame = !1, this.mouseOutCallback && this.mouseOutCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && this.stopOnGameOut && (t.identifier = 0, this.input.mousePointer.stop(t))
            },
            onMouseOver: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.input.mousePointer.withinGame = !0, this.mouseOverCallback && this.mouseOverCallback.call(this.callbackContext, t)
            },
            onMouseWheel: function(t) {
                this._wheelEvent && (t = this._wheelEvent.bindEvent(t)), this.event = t, this.capture && t.preventDefault(), this.wheelDelta = i.Math.clamp(-t.deltaY, -1, 1), this.mouseWheelCallback && this.mouseWheelCallback.call(this.callbackContext, t)
            },
            requestPointerLock: function() {
                if (this.game.device.pointerLock) {
                    var t = this.game.canvas;
                    t.requestPointerLock = t.requestPointerLock || t.mozRequestPointerLock || t.webkitRequestPointerLock, t.requestPointerLock();
                    var e = this;
                    this._pointerLockChange = function(t) {
                        return e.pointerLockChange(t)
                    }, document.addEventListener("pointerlockchange", this._pointerLockChange, !0), document.addEventListener("mozpointerlockchange", this._pointerLockChange, !0), document.addEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
                }
            },
            pointerLockChange: function(t) {
                var e = this.game.canvas;
                document.pointerLockElement === e || document.mozPointerLockElement === e || document.webkitPointerLockElement === e ? (this.locked = !0, this.pointerLock.dispatch(!0, t)) : (this.locked = !1, this.pointerLock.dispatch(!1, t))
            },
            releasePointerLock: function() {
                document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock, document.exitPointerLock(), document.removeEventListener("pointerlockchange", this._pointerLockChange, !0), document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0), document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
            },
            stop: function() {
                var t = this.game.canvas;
                t.removeEventListener("mousedown", this._onMouseDown, !0), t.removeEventListener("mousemove", this._onMouseMove, !0), t.removeEventListener("mouseup", this._onMouseUp, !0), t.removeEventListener("mouseover", this._onMouseOver, !0), t.removeEventListener("mouseout", this._onMouseOut, !0);
                var e = this.game.device.wheelEvent;
                e && t.removeEventListener(e, this._onMouseWheel, !0), window.removeEventListener("mouseup", this._onMouseUpGlobal, !0), window.removeEventListener("mouseout", this._onMouseOutGlobal, !0), document.removeEventListener("pointerlockchange", this._pointerLockChange, !0), document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0), document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0)
            }
        }, i.Mouse.prototype.constructor = i.Mouse, (t.prototype = {}).constructor = t, t.prototype.bindEvent = function(e) {
            if (!t._stubsGenerated && e) {
                for (var i in e) i in t.prototype || Object.defineProperty(t.prototype, i, {
                    get: function(t) {
                        return function() {
                            var e = this.originalEvent[t];
                            return "function" != typeof e ? e : e.bind(this.originalEvent)
                        }
                    }(i)
                });
                t._stubsGenerated = !0
            }
            return this.originalEvent = e, this
        }, Object.defineProperties(t.prototype, {
            type: {
                value: "wheel"
            },
            deltaMode: {
                get: function() {
                    return this._deltaMode
                }
            },
            deltaY: {
                get: function() {
                    return this._scaleFactor * (this.originalEvent.wheelDelta || this.originalEvent.detail) || 0
                }
            },
            deltaX: {
                get: function() {
                    return this._scaleFactor * this.originalEvent.wheelDeltaX || 0
                }
            },
            deltaZ: {
                value: 0
            }
        }), i.MSPointer = function(t) {
            this.game = t, this.input = t.input, this.callbackContext = this.game, this.pointerDownCallback = null, this.pointerMoveCallback = null, this.pointerUpCallback = null, this.capture = !0, this.button = -1, this.event = null, this.enabled = !0, this._onMSPointerDown = null, this._onMSPointerMove = null, this._onMSPointerUp = null, this._onMSPointerUpGlobal = null, this._onMSPointerOut = null, this._onMSPointerOver = null
        }, i.MSPointer.prototype = {
            start: function() {
                if (null === this._onMSPointerDown) {
                    var t = this;
                    if (this.game.device.mspointer) {
                        this._onMSPointerDown = function(e) {
                            return t.onPointerDown(e)
                        }, this._onMSPointerMove = function(e) {
                            return t.onPointerMove(e)
                        }, this._onMSPointerUp = function(e) {
                            return t.onPointerUp(e)
                        }, this._onMSPointerUpGlobal = function(e) {
                            return t.onPointerUpGlobal(e)
                        }, this._onMSPointerOut = function(e) {
                            return t.onPointerOut(e)
                        }, this._onMSPointerOver = function(e) {
                            return t.onPointerOver(e)
                        };
                        var e = this.game.canvas;
                        e.addEventListener("MSPointerDown", this._onMSPointerDown, !1), e.addEventListener("MSPointerMove", this._onMSPointerMove, !1), e.addEventListener("MSPointerUp", this._onMSPointerUp, !1), e.addEventListener("pointerdown", this._onMSPointerDown, !1), e.addEventListener("pointermove", this._onMSPointerMove, !1), e.addEventListener("pointerup", this._onMSPointerUp, !1), e.style["-ms-content-zooming"] = "none", e.style["-ms-touch-action"] = "none", this.game.device.cocoonJS || (window.addEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0), e.addEventListener("MSPointerOver", this._onMSPointerOver, !0), e.addEventListener("MSPointerOut", this._onMSPointerOut, !0), window.addEventListener("pointerup", this._onMSPointerUpGlobal, !0), e.addEventListener("pointerover", this._onMSPointerOver, !0), e.addEventListener("pointerout", this._onMSPointerOut, !0))
                    }
                }
            },
            onPointerDown: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.pointerDownCallback && this.pointerDownCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = t.pointerId, "mouse" === t.pointerType || 4 === t.pointerType ? this.input.mousePointer.start(t) : this.input.startPointer(t))
            },
            onPointerMove: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.pointerMoveCallback && this.pointerMoveCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = t.pointerId, "mouse" === t.pointerType || 4 === t.pointerType ? this.input.mousePointer.move(t) : this.input.updatePointer(t))
            },
            onPointerUp: function(t) {
                this.event = t, this.capture && t.preventDefault(), this.pointerUpCallback && this.pointerUpCallback.call(this.callbackContext, t), this.input.enabled && this.enabled && (t.identifier = t.pointerId, "mouse" === t.pointerType || 4 === t.pointerType ? this.input.mousePointer.stop(t) : this.input.stopPointer(t))
            },
            onPointerUpGlobal: function(t) {
                if ("mouse" !== t.pointerType && 4 !== t.pointerType || this.input.mousePointer.withinGame) {
                    var e = this.input.getPointerFromIdentifier(t.identifier);
                    e && e.withinGame && this.onPointerUp(t)
                } else this.onPointerUp(t)
            },
            onPointerOut: function(t) {
                if (this.event = t, this.capture && t.preventDefault(), "mouse" === t.pointerType || 4 === t.pointerType) this.input.mousePointer.withinGame = !1;
                else {
                    var e = this.input.getPointerFromIdentifier(t.identifier);
                    e && (e.withinGame = !1)
                }
                this.input.mouse.mouseOutCallback && this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext, t), this.input.enabled && this.enabled && this.input.mouse.stopOnGameOut && (t.identifier = 0, e ? e.stop(t) : this.input.mousePointer.stop(t))
            },
            onPointerOver: function(t) {
                if (this.event = t, this.capture && t.preventDefault(), "mouse" === t.pointerType || 4 === t.pointerType) this.input.mousePointer.withinGame = !0;
                else {
                    var e = this.input.getPointerFromIdentifier(t.identifier);
                    e && (e.withinGame = !0)
                }
                this.input.mouse.mouseOverCallback && this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext, t)
            },
            stop: function() {
                var t = this.game.canvas;
                t.removeEventListener("MSPointerDown", this._onMSPointerDown, !1), t.removeEventListener("MSPointerMove", this._onMSPointerMove, !1), t.removeEventListener("MSPointerUp", this._onMSPointerUp, !1), t.removeEventListener("pointerdown", this._onMSPointerDown, !1), t.removeEventListener("pointermove", this._onMSPointerMove, !1), t.removeEventListener("pointerup", this._onMSPointerUp, !1), window.removeEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0), t.removeEventListener("MSPointerOver", this._onMSPointerOver, !0), t.removeEventListener("MSPointerOut", this._onMSPointerOut, !0), window.removeEventListener("pointerup", this._onMSPointerUpGlobal, !0), t.removeEventListener("pointerover", this._onMSPointerOver, !0), t.removeEventListener("pointerout", this._onMSPointerOut, !0)
            }
        }, i.MSPointer.prototype.constructor = i.MSPointer, i.DeviceButton = function(t, e) {
            this.parent = t, this.game = t.game, this.event = null, this.isDown = !1, this.isUp = !0, this.timeDown = 0, this.timeUp = 0, this.repeats = 0, this.altKey = !1, this.shiftKey = !1, this.ctrlKey = !1, this.value = 0, this.buttonCode = e, this.onDown = new i.Signal, this.onUp = new i.Signal, this.onFloat = new i.Signal
        }, i.DeviceButton.prototype = {
            start: function(t, e) {
                this.isDown || (this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.repeats = 0, this.event = t, this.value = e, t && (this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.ctrlKey = t.ctrlKey), this.onDown.dispatch(this, e))
            },
            stop: function(t, e) {
                this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.event = t, this.value = e, t && (this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.ctrlKey = t.ctrlKey), this.onUp.dispatch(this, e))
            },
            padFloat: function(t) {
                this.value = t, this.onFloat.dispatch(this, t)
            },
            justPressed: function(t) {
                return t = t || 250, this.isDown && this.timeDown + t > this.game.time.time
            },
            justReleased: function(t) {
                return t = t || 250, this.isUp && this.timeUp + t > this.game.time.time
            },
            reset: function() {
                this.isDown = !1, this.isUp = !0, this.timeDown = this.game.time.time, this.repeats = 0, this.altKey = !1, this.shiftKey = !1, this.ctrlKey = !1
            },
            destroy: function() {
                this.onDown.dispose(), this.onUp.dispose(), this.onFloat.dispose(), this.parent = null, this.game = null
            }
        }, i.DeviceButton.prototype.constructor = i.DeviceButton, Object.defineProperty(i.DeviceButton.prototype, "duration", {
            get: function() {
                return this.isUp ? -1 : this.game.time.time - this.timeDown
            }
        }), i.Pointer = function(t, e, s) {
            this.game = t, this.id = e, this.type = i.POINTER, this.exists = !0, this.identifier = 0, this.pointerId = null, this.pointerMode = s || i.PointerMode.CURSOR | i.PointerMode.CONTACT, this.target = null, this.button = null, this.leftButton = new i.DeviceButton(this, i.Pointer.LEFT_BUTTON), this.middleButton = new i.DeviceButton(this, i.Pointer.MIDDLE_BUTTON), this.rightButton = new i.DeviceButton(this, i.Pointer.RIGHT_BUTTON), this.backButton = new i.DeviceButton(this, i.Pointer.BACK_BUTTON), this.forwardButton = new i.DeviceButton(this, i.Pointer.FORWARD_BUTTON), this.eraserButton = new i.DeviceButton(this, i.Pointer.ERASER_BUTTON), this._holdSent = !1, this._history = [], this._nextDrop = 0, this._stateReset = !1, this.withinGame = !1, this.clientX = -1, this.clientY = -1, this.pageX = -1, this.pageY = -1, this.screenX = -1, this.screenY = -1, this.rawMovementX = 0, this.rawMovementY = 0, this.movementX = 0, this.movementY = 0, this.x = -1, this.y = -1, this.isMouse = 0 === e, this.isDown = !1, this.isUp = !0, this.timeDown = 0, this.timeUp = 0, this.previousTapTime = 0, this.totalTouches = 0, this.msSinceLastClick = Number.MAX_VALUE, this.targetObject = null, this.interactiveCandidates = [], this.active = !1, this.dirty = !1, this.position = new i.Point, this.positionDown = new i.Point, this.positionUp = new i.Point, this.circle = new i.Circle(0, 0, 44), this._clickTrampolines = null, this._trampolineTargetObject = null
        }, i.Pointer.NO_BUTTON = 0, i.Pointer.LEFT_BUTTON = 1, i.Pointer.RIGHT_BUTTON = 2, i.Pointer.MIDDLE_BUTTON = 4, i.Pointer.BACK_BUTTON = 8, i.Pointer.FORWARD_BUTTON = 16, i.Pointer.ERASER_BUTTON = 32, i.Pointer.prototype = {
            resetButtons: function() {
                this.isDown = !1, this.isUp = !0, this.isMouse && (this.leftButton.reset(), this.middleButton.reset(), this.rightButton.reset(), this.backButton.reset(), this.forwardButton.reset(), this.eraserButton.reset())
            },
            processButtonsDown: function(t, e) {
                i.Pointer.LEFT_BUTTON & t && this.leftButton.start(e), i.Pointer.RIGHT_BUTTON & t && this.rightButton.start(e), i.Pointer.MIDDLE_BUTTON & t && this.middleButton.start(e), i.Pointer.BACK_BUTTON & t && this.backButton.start(e), i.Pointer.FORWARD_BUTTON & t && this.forwardButton.start(e), i.Pointer.ERASER_BUTTON & t && this.eraserButton.start(e)
            },
            processButtonsUp: function(t, e) {
                t === i.Mouse.LEFT_BUTTON && this.leftButton.stop(e), t === i.Mouse.RIGHT_BUTTON && this.rightButton.stop(e), t === i.Mouse.MIDDLE_BUTTON && this.middleButton.stop(e), t === i.Mouse.BACK_BUTTON && this.backButton.stop(e), t === i.Mouse.FORWARD_BUTTON && this.forwardButton.stop(e), 5 === t && this.eraserButton.stop(e)
            },
            updateButtons: function(t) {
                this.button = t.button;
                var e = "down" === t.type.toLowerCase().substr(-4);
                void 0 !== t.buttons ? e ? this.processButtonsDown(t.buttons, t) : this.processButtonsUp(t.button, t) : e ? this.leftButton.start(t) : (this.leftButton.stop(t), this.rightButton.stop(t)), 1 === t.buttons && t.ctrlKey && this.leftButton.isDown && (this.leftButton.stop(t), this.rightButton.start(t)), this.isUp = !0, this.isDown = !1, (this.leftButton.isDown || this.rightButton.isDown || this.middleButton.isDown || this.backButton.isDown || this.forwardButton.isDown || this.eraserButton.isDown) && (this.isUp = !1, this.isDown = !0)
            },
            start: function(t) {
                var e = this.game.input;
                return t.pointerId && (this.pointerId = t.pointerId), this.identifier = t.identifier, this.target = t.target, this.isMouse ? this.updateButtons(t) : (this.isDown = !0, this.isUp = !1), this.active = !0, this.withinGame = !0, this.dirty = !1, this._history = [], this._clickTrampolines = null, this._trampolineTargetObject = null, this.msSinceLastClick = this.game.time.time - this.timeDown, this.timeDown = this.game.time.time, this._holdSent = !1, this.move(t, !0), this.positionDown.setTo(this.x, this.y), (e.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || e.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || e.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === e.totalActivePointers) && (e.x = this.x, e.y = this.y, e.position.setTo(this.x, this.y), e.onDown.dispatch(this, t), e.resetSpeed(this.x, this.y)), this._stateReset = !1, this.totalTouches++, null !== this.targetObject && this.targetObject._touchedHandler(this), this
            },
            update: function() {
                var t = this.game.input;
                this.active && (this.dirty && (t.interactiveItems.total > 0 && this.processInteractiveObjects(!1), this.dirty = !1), !1 === this._holdSent && this.duration >= t.holdRate && ((t.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || t.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || t.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === t.totalActivePointers) && t.onHold.dispatch(this), this._holdSent = !0), t.recordPointerHistory && this.game.time.time >= this._nextDrop && (this._nextDrop = this.game.time.time + t.recordRate, this._history.push({
                    x: this.position.x,
                    y: this.position.y
                }), this._history.length > t.recordLimit && this._history.shift()))
            },
            move: function(t, e) {
                var s = this.game.input;
                if (!s.pollLocked) {
                    if (void 0 === e && (e = !1), void 0 !== t.button && (this.button = t.button), e && this.isMouse && this.updateButtons(t), this.clientX = t.clientX, this.clientY = t.clientY, this.pageX = t.pageX, this.pageY = t.pageY, this.screenX = t.screenX, this.screenY = t.screenY, this.isMouse && s.mouse.locked && !e && (this.rawMovementX = t.movementX || t.mozMovementX || t.webkitMovementX || 0, this.rawMovementY = t.movementY || t.mozMovementY || t.webkitMovementY || 0, this.movementX += this.rawMovementX, this.movementY += this.rawMovementY), this.x = (this.pageX - this.game.scale.offset.x) * s.scale.x, this.y = (this.pageY - this.game.scale.offset.y) * s.scale.y, this.position.setTo(this.x, this.y), this.circle.x = this.x, this.circle.y = this.y, (s.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || s.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || s.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === s.totalActivePointers) && (s.activePointer = this, s.x = this.x, s.y = this.y, s.position.setTo(s.x, s.y), s.circle.x = s.x, s.circle.y = s.y), this.withinGame = this.game.scale.bounds.contains(this.pageX, this.pageY), this.game.paused) return this;
                    for (var n = s.moveCallbacks.length; n--;) s.moveCallbacks[n].callback.call(s.moveCallbacks[n].context, this, this.x, this.y, e);
                    return null !== this.targetObject && !0 === this.targetObject.isDragged ? !1 === this.targetObject.update(this) && (this.targetObject = null) : s.interactiveItems.total > 0 && this.processInteractiveObjects(e), this
                }
            },
            processInteractiveObjects: function(t) {
                var e = 0,
                    i = -1,
                    s = null,
                    n = this.game.input.interactiveItems.first;
                for (this.interactiveCandidates = []; n;) n.checked = !1, n.validForInput(i, e, !1) && (n.checked = !0, (t && n.checkPointerDown(this, !0) || !t && n.checkPointerOver(this, !0)) && (e = n.sprite.renderOrderID, i = n.priorityID, s = n, this.interactiveCandidates.push(n))), n = this.game.input.interactiveItems.next;
                for (n = this.game.input.interactiveItems.first; n;)!n.checked && n.validForInput(i, e, !0) && (t && n.checkPointerDown(this, !1) || !t && n.checkPointerOver(this, !1)) && (e = n.sprite.renderOrderID, i = n.priorityID, s = n, this.interactiveCandidates.push(n)), n = this.game.input.interactiveItems.next;
                return this.game.input.customCandidateHandler && (s = this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext, this, this.interactiveCandidates, s)), this.swapTarget(s, !1), null !== this.targetObject
            },
            swapTarget: function(t, e) {
                void 0 === e && (e = !1), null === t ? this.targetObject && (this.targetObject._pointerOutHandler(this, e), this.targetObject = null) : null === this.targetObject ? (this.targetObject = t, t._pointerOverHandler(this, e)) : this.targetObject === t ? !1 === t.update(this) && (this.targetObject = null) : (this.targetObject._pointerOutHandler(this, e), this.targetObject = t, this.targetObject._pointerOverHandler(this, e))
            },
            leave: function(t) {
                this.withinGame = !1, this.move(t, !1)
            },
            stop: function(t) {
                var e = this.game.input; {
                    if (!this._stateReset || !this.withinGame) return this.timeUp = this.game.time.time, (e.multiInputOverride === i.Input.MOUSE_OVERRIDES_TOUCH || e.multiInputOverride === i.Input.MOUSE_TOUCH_COMBINE || e.multiInputOverride === i.Input.TOUCH_OVERRIDES_MOUSE && 0 === e.totalActivePointers) && (e.onUp.dispatch(this, t), this.duration >= 0 && this.duration <= e.tapRate && (this.timeUp - this.previousTapTime < e.doubleTapRate ? e.onTap.dispatch(this, !0) : e.onTap.dispatch(this, !1), this.previousTapTime = this.timeUp)), this.isMouse ? this.updateButtons(t) : (this.isDown = !1, this.isUp = !0), this.id > 0 && (this.active = !1), this.withinGame = this.game.scale.bounds.contains(t.pageX, t.pageY), this.pointerId = null, this.identifier = null, this.positionUp.setTo(this.x, this.y), !1 === this.isMouse && e.currentPointers--, e.interactiveItems.callAll("_releasedHandler", this), this._clickTrampolines && (this._trampolineTargetObject = this.targetObject), this.targetObject = null, this;
                    t.preventDefault()
                }
            },
            justPressed: function(t) {
                return t = t || this.game.input.justPressedRate, !0 === this.isDown && this.timeDown + t > this.game.time.time
            },
            justReleased: function(t) {
                return t = t || this.game.input.justReleasedRate, this.isUp && this.timeUp + t > this.game.time.time
            },
            addClickTrampoline: function(t, e, i, s) {
                if (this.isDown) {
                    for (var n = this._clickTrampolines = this._clickTrampolines || [], a = 0; a < n.length; a++)
                        if (n[a].name === t) {
                            n.splice(a, 1);
                            break
                        }
                    n.push({
                        name: t,
                        targetObject: this.targetObject,
                        callback: e,
                        callbackContext: i,
                        callbackArgs: s
                    })
                }
            },
            processClickTrampolines: function() {
                var t = this._clickTrampolines;
                if (t) {
                    for (var e = 0; e < t.length; e++) {
                        var i = t[e];
                        i.targetObject === this._trampolineTargetObject && i.callback.apply(i.callbackContext, i.callbackArgs)
                    }
                    this._clickTrampolines = null, this._trampolineTargetObject = null
                }
            },
            reset: function() {
                !1 === this.isMouse && (this.active = !1), this.pointerId = null, this.identifier = null, this.dirty = !1, this.totalTouches = 0, this._holdSent = !1, this._history.length = 0, this._stateReset = !0, this.resetButtons(), this.targetObject && this.targetObject._releasedHandler(this), this.targetObject = null
            },
            resetMovement: function() {
                this.movementX = 0, this.movementY = 0
            }
        }, i.Pointer.prototype.constructor = i.Pointer, Object.defineProperty(i.Pointer.prototype, "duration", {
            get: function() {
                return this.isUp ? -1 : this.game.time.time - this.timeDown
            }
        }), Object.defineProperty(i.Pointer.prototype, "worldX", {
            get: function() {
                return this.game.world.camera.x + this.x
            }
        }), Object.defineProperty(i.Pointer.prototype, "worldY", {
            get: function() {
                return this.game.world.camera.y + this.y
            }
        }), i.PointerMode = {
            CURSOR: 1,
            CONTACT: 2
        }, i.Touch = function(t) {
            this.game = t, this.enabled = !0, this.touchLockCallbacks = [], this.callbackContext = this.game, this.touchStartCallback = null, this.touchMoveCallback = null, this.touchEndCallback = null, this.touchEnterCallback = null, this.touchLeaveCallback = null, this.touchCancelCallback = null, this.preventDefault = !0, this.event = null, this._onTouchStart = null, this._onTouchMove = null, this._onTouchEnd = null, this._onTouchEnter = null, this._onTouchLeave = null, this._onTouchCancel = null, this._onTouchMove = null
        }, i.Touch.prototype = {
            start: function() {
                if (null === this._onTouchStart) {
                    var t = this;
                    this.game.device.touch && (this._onTouchStart = function(e) {
                        return t.onTouchStart(e)
                    }, this._onTouchMove = function(e) {
                        return t.onTouchMove(e)
                    }, this._onTouchEnd = function(e) {
                        return t.onTouchEnd(e)
                    }, this._onTouchEnter = function(e) {
                        return t.onTouchEnter(e)
                    }, this._onTouchLeave = function(e) {
                        return t.onTouchLeave(e)
                    }, this._onTouchCancel = function(e) {
                        return t.onTouchCancel(e)
                    }, this.game.canvas.addEventListener("touchstart", this._onTouchStart, !1), this.game.canvas.addEventListener("touchmove", this._onTouchMove, !1), this.game.canvas.addEventListener("touchend", this._onTouchEnd, !1), this.game.canvas.addEventListener("touchcancel", this._onTouchCancel, !1), this.game.device.cocoonJS || (this.game.canvas.addEventListener("touchenter", this._onTouchEnter, !1), this.game.canvas.addEventListener("touchleave", this._onTouchLeave, !1)))
                }
            },
            consumeDocumentTouches: function() {
                this._documentTouchMove = function(t) {
                    t.preventDefault()
                }, document.addEventListener("touchmove", this._documentTouchMove, !1)
            },
            addTouchLockCallback: function(t, e, i) {
                void 0 === i && (i = !1), this.touchLockCallbacks.push({
                    callback: t,
                    context: e,
                    onEnd: i
                })
            },
            removeTouchLockCallback: function(t, e) {
                for (var i = this.touchLockCallbacks.length; i--;)
                    if (this.touchLockCallbacks[i].callback === t && this.touchLockCallbacks[i].context === e) return this.touchLockCallbacks.splice(i, 1), !0;
                return !1
            },
            onTouchStart: function(t) {
                for (i = this.touchLockCallbacks.length; i--;) {
                    var e = this.touchLockCallbacks[i];
                    !e.onEnd && e.callback.call(e.context, this, t) && this.touchLockCallbacks.splice(i, 1)
                }
                if (this.event = t, this.game.input.enabled && this.enabled) {
                    this.touchStartCallback && this.touchStartCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault();
                    for (var i = 0; i < t.changedTouches.length; i++) this.game.input.startPointer(t.changedTouches[i])
                }
            },
            onTouchCancel: function(t) {
                if (this.event = t, this.touchCancelCallback && this.touchCancelCallback.call(this.callbackContext, t), this.game.input.enabled && this.enabled) {
                    this.preventDefault && t.preventDefault();
                    for (var e = 0; e < t.changedTouches.length; e++) this.game.input.stopPointer(t.changedTouches[e])
                }
            },
            onTouchEnter: function(t) {
                this.event = t, this.touchEnterCallback && this.touchEnterCallback.call(this.callbackContext, t), this.game.input.enabled && this.enabled && this.preventDefault && t.preventDefault()
            },
            onTouchLeave: function(t) {
                this.event = t, this.touchLeaveCallback && this.touchLeaveCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault()
            },
            onTouchMove: function(t) {
                this.event = t, this.touchMoveCallback && this.touchMoveCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault();
                for (var e = 0; e < t.changedTouches.length; e++) this.game.input.updatePointer(t.changedTouches[e])
            },
            onTouchEnd: function(t) {
                for (i = this.touchLockCallbacks.length; i--;) {
                    var e = this.touchLockCallbacks[i];
                    e.onEnd && e.callback.call(e.context, this, t) && this.touchLockCallbacks.splice(i, 1)
                }
                this.event = t, this.touchEndCallback && this.touchEndCallback.call(this.callbackContext, t), this.preventDefault && t.preventDefault();
                for (var i = 0; i < t.changedTouches.length; i++) this.game.input.stopPointer(t.changedTouches[i])
            },
            stop: function() {
                this.game.device.touch && (this.game.canvas.removeEventListener("touchstart", this._onTouchStart), this.game.canvas.removeEventListener("touchmove", this._onTouchMove), this.game.canvas.removeEventListener("touchend", this._onTouchEnd), this.game.canvas.removeEventListener("touchenter", this._onTouchEnter), this.game.canvas.removeEventListener("touchleave", this._onTouchLeave), this.game.canvas.removeEventListener("touchcancel", this._onTouchCancel))
            }
        }, i.Touch.prototype.constructor = i.Touch, i.InputHandler = function(t) {
            this.sprite = t, this.game = t.game, this.enabled = !1, this.checked = !1, this.priorityID = 0, this.useHandCursor = !1, this._setHandCursor = !1, this.isDragged = !1, this.allowHorizontalDrag = !0, this.allowVerticalDrag = !0, this.bringToTop = !1, this.snapOffset = null, this.snapOnDrag = !1, this.snapOnRelease = !1, this.snapX = 0, this.snapY = 0, this.snapOffsetX = 0, this.snapOffsetY = 0, this.pixelPerfectOver = !1, this.pixelPerfectClick = !1, this.pixelPerfectAlpha = 255, this.draggable = !1, this.boundsRect = null, this.boundsSprite = null, this.scaleLayer = !1, this.dragOffset = new i.Point, this.dragFromCenter = !1, this.dragStopBlocksInputUp = !1, this.dragStartPoint = new i.Point, this.dragDistanceThreshold = 0, this.dragTimeThreshold = 0, this.downPoint = new i.Point, this.snapPoint = new i.Point, this._dragPoint = new i.Point, this._dragPhase = !1, this._pendingDrag = !1, this._dragTimePass = !1, this._dragDistancePass = !1, this._wasEnabled = !1, this._tempPoint = new i.Point, this._pointerData = [], this._pointerData.push({
                id: 0,
                x: 0,
                y: 0,
                camX: 0,
                camY: 0,
                isDown: !1,
                isUp: !1,
                isOver: !1,
                isOut: !1,
                timeOver: 0,
                timeOut: 0,
                timeDown: 0,
                timeUp: 0,
                downDuration: 0,
                isDragged: !1
            })
        }, i.InputHandler.prototype = {
            start: function(t, e) {
                if (t = t || 0, void 0 === e && (e = !1), !1 === this.enabled) {
                    this.game.input.interactiveItems.add(this), this.useHandCursor = e, this.priorityID = t;
                    for (var s = 0; s < 10; s++) this._pointerData[s] = {
                        id: s,
                        x: 0,
                        y: 0,
                        isDown: !1,
                        isUp: !1,
                        isOver: !1,
                        isOut: !1,
                        timeOver: 0,
                        timeOut: 0,
                        timeDown: 0,
                        timeUp: 0,
                        downDuration: 0,
                        isDragged: !1
                    };
                    this.snapOffset = new i.Point, this.enabled = !0, this._wasEnabled = !0
                }
                return this.sprite.events.onAddedToGroup.add(this.addedToGroup, this), this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup, this), this.sprite
            },
            addedToGroup: function() {
                this._dragPhase || this._wasEnabled && !this.enabled && this.start()
            },
            removedFromGroup: function() {
                this._dragPhase || (this.enabled ? (this._wasEnabled = !0, this.stop()) : this._wasEnabled = !1)
            },
            reset: function() {
                this.enabled = !1;
                for (var t = 0; t < 10; t++) this._pointerData[t] = {
                    id: t,
                    x: 0,
                    y: 0,
                    isDown: !1,
                    isUp: !1,
                    isOver: !1,
                    isOut: !1,
                    timeOver: 0,
                    timeOut: 0,
                    timeDown: 0,
                    timeUp: 0,
                    downDuration: 0,
                    isDragged: !1
                }
            },
            stop: function() {
                !1 !== this.enabled && (this.enabled = !1, this.game.input.interactiveItems.remove(this))
            },
            destroy: function() {
                this.sprite && (this._setHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), this.enabled = !1, this.game.input.interactiveItems.remove(this), this._pointerData.length = 0, this.boundsRect = null, this.boundsSprite = null, this.sprite = null)
            },
            validForInput: function(t, e, i) {
                return void 0 === i && (i = !0), !(!this.enabled || 0 === this.sprite.scale.x || 0 === this.sprite.scale.y || this.priorityID < this.game.input.minPriorityID || this.sprite.parent && this.sprite.parent.ignoreChildInput) && (!(!i && (this.pixelPerfectClick || this.pixelPerfectOver)) && (this.priorityID > t || this.priorityID === t && this.sprite.renderOrderID > e))
            },
            isPixelPerfect: function() {
                return this.pixelPerfectClick || this.pixelPerfectOver
            },
            pointerX: function(t) {
                return t = t || 0, this._pointerData[t].x
            },
            pointerY: function(t) {
                return t = t || 0, this._pointerData[t].y
            },
            pointerDown: function(t) {
                return t = t || 0, this._pointerData[t].isDown
            },
            pointerUp: function(t) {
                return t = t || 0, this._pointerData[t].isUp
            },
            pointerTimeDown: function(t) {
                return t = t || 0, this._pointerData[t].timeDown
            },
            pointerTimeUp: function(t) {
                return t = t || 0, this._pointerData[t].timeUp
            },
            pointerOver: function(t) {
                if (!this.enabled) return !1;
                if (void 0 === t) {
                    for (var e = 0; e < 10; e++)
                        if (this._pointerData[e].isOver) return !0;
                    return !1
                }
                return this._pointerData[t].isOver
            },
            pointerOut: function(t) {
                if (!this.enabled) return !1;
                if (void 0 !== t) return this._pointerData[t].isOut;
                for (var e = 0; e < 10; e++)
                    if (this._pointerData[e].isOut) return !0
            },
            pointerTimeOver: function(t) {
                return t = t || 0, this._pointerData[t].timeOver
            },
            pointerTimeOut: function(t) {
                return t = t || 0, this._pointerData[t].timeOut
            },
            pointerDragged: function(t) {
                return t = t || 0, this._pointerData[t].isDragged
            },
            checkPointerDown: function(t, e) {
                return !!(t.isDown && this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) && (!!this.game.input.hitTest(this.sprite, t, this._tempPoint) && (void 0 === e && (e = !1), !(!e && this.pixelPerfectClick) || this.checkPixel(this._tempPoint.x, this._tempPoint.y)))
            },
            checkPointerOver: function(t, e) {
                return !!(this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) && (!!this.game.input.hitTest(this.sprite, t, this._tempPoint) && (void 0 === e && (e = !1), !(!e && this.pixelPerfectOver) || this.checkPixel(this._tempPoint.x, this._tempPoint.y)))
            },
            checkPixel: function(t, e, i) {
                if (this.sprite.texture.baseTexture.source) {
                    if (null === t && null === e) {
                        this.game.input.getLocalPosition(this.sprite, i, this._tempPoint);
                        var t = this._tempPoint.x,
                            e = this._tempPoint.y
                    }
                    if (0 !== this.sprite.anchor.x && (t -= -this.sprite.texture.frame.width * this.sprite.anchor.x), 0 !== this.sprite.anchor.y && (e -= -this.sprite.texture.frame.height * this.sprite.anchor.y), t += this.sprite.texture.frame.x, e += this.sprite.texture.frame.y, this.sprite.texture.trim && (t -= this.sprite.texture.trim.x, e -= this.sprite.texture.trim.y, t < this.sprite.texture.crop.x || t > this.sprite.texture.crop.right || e < this.sprite.texture.crop.y || e > this.sprite.texture.crop.bottom)) return this._dx = t, this._dy = e, !1;
                    if (this._dx = t, this._dy = e, this.game.input.hitContext.clearRect(0, 0, 1, 1), this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source, t, e, 1, 1, 0, 0, 1, 1), this.game.input.hitContext.getImageData(0, 0, 1, 1).data[3] >= this.pixelPerfectAlpha) return !0
                }
                return !1
            },
            update: function(t) {
                if (null !== this.sprite && void 0 !== this.sprite.parent) return this.enabled && this.sprite.visible && this.sprite.parent.visible ? this._pendingDrag ? (this._dragDistancePass || (this._dragDistancePass = i.Math.distance(t.x, t.y, this.downPoint.x, this.downPoint.y) >= this.dragDistanceThreshold), this._dragDistancePass && this._dragTimePass && this.startDrag(t), !0) : this.draggable && this._draggedPointerID === t.id ? this.updateDrag(t, !1) : this._pointerData[t.id].isOver ? this.checkPointerOver(t) ? (this._pointerData[t.id].x = t.x - this.sprite.x, this._pointerData[t.id].y = t.y - this.sprite.y, !0) : (this._pointerOutHandler(t), !1) : void 0 : (this._pointerOutHandler(t), !1)
            },
            _pointerOverHandler: function(t, e) {
                if (null !== this.sprite) {
                    var s = this._pointerData[t.id];
                    if (!1 === s.isOver || t.dirty) {
                        var n = !1 === s.isOver;
                        s.isOver = !0, s.isOut = !1, s.timeOver = this.game.time.time, s.x = t.x - this.sprite.x, s.y = t.y - this.sprite.y, this.useHandCursor && !1 === s.isDragged && (this.game.canvas.style.cursor = "pointer", this._setHandCursor = !0), !e && n && this.sprite && this.sprite.events && this.sprite.events.onInputOver$dispatch(this.sprite, t), this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputOver.dispatch(this.sprite, t)
                    }
                }
            },
            _pointerOutHandler: function(t, e) {
                if (null !== this.sprite) {
                    var s = this._pointerData[t.id];
                    s.isOver = !1, s.isOut = !0, s.timeOut = this.game.time.time, this.useHandCursor && !1 === s.isDragged && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), !e && this.sprite && this.sprite.events && (this.sprite.events.onInputOut$dispatch(this.sprite, t), this.sprite && this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputOut.dispatch(this.sprite, t))
                }
            },
            _touchedHandler: function(t) {
                if (null !== this.sprite) {
                    var e = this._pointerData[t.id];
                    if (!e.isDown && e.isOver) {
                        if (this.pixelPerfectClick && !this.checkPixel(null, null, t)) return;
                        if (e.isDown = !0, e.isUp = !1, e.timeDown = this.game.time.time, this.downPoint.set(t.x, t.y), t.dirty = !0, this.sprite && this.sprite.events && (this.sprite.events.onInputDown$dispatch(this.sprite, t), this.sprite && this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputDown.dispatch(this.sprite, t), null === this.sprite)) return;
                        this.draggable && !1 === this.isDragged && (0 === this.dragTimeThreshold && 0 === this.dragDistanceThreshold ? this.startDrag(t) : (this._pendingDrag = !0, this._dragDistancePass = 0 === this.dragDistanceThreshold, this.dragTimeThreshold > 0 ? (this._dragTimePass = !1, this.game.time.events.add(this.dragTimeThreshold, this.dragTimeElapsed, this, t)) : this._dragTimePass = !0)), this.bringToTop && this.sprite.bringToTop()
                    }
                }
            },
            dragTimeElapsed: function(t) {
                this._dragTimePass = !0, this._pendingDrag && this.sprite && this._dragDistancePass && this.startDrag(t)
            },
            _releasedHandler: function(t) {
                if (null !== this.sprite) {
                    var e = this._pointerData[t.id];
                    if (e.isDown && t.isUp) {
                        e.isDown = !1, e.isUp = !0, e.timeUp = this.game.time.time, e.downDuration = e.timeUp - e.timeDown;
                        var s = this.checkPointerOver(t);
                        this.sprite && this.sprite.events && (this.dragStopBlocksInputUp && (!this.dragStopBlocksInputUp || this.draggable && this.isDragged && this._draggedPointerID === t.id) || this.sprite.events.onInputUp$dispatch(this.sprite, t, s), this.sprite && this.sprite.parent && this.sprite.parent.type === i.GROUP && this.sprite.parent.onChildInputUp.dispatch(this.sprite, t, s), s && (s = this.checkPointerOver(t))), e.isOver = s, !s && this.useHandCursor && (this.game.canvas.style.cursor = "default", this._setHandCursor = !1), t.dirty = !0, this._pendingDrag = !1, this.draggable && this.isDragged && this._draggedPointerID === t.id && this.stopDrag(t)
                    }
                }
            },
            updateDrag: function(t, e) {
                if (void 0 === e && (e = !1), t.isUp) return this.stopDrag(t), !1;
                var i = this.globalToLocalX(t.x) + this._dragPoint.x + this.dragOffset.x,
                    s = this.globalToLocalY(t.y) + this._dragPoint.y + this.dragOffset.y;
                if (this.sprite.fixedToCamera) this.allowHorizontalDrag && (this.sprite.cameraOffset.x = i), this.allowVerticalDrag && (this.sprite.cameraOffset.y = s), this.boundsRect && this.checkBoundsRect(), this.boundsSprite && this.checkBoundsSprite(), this.snapOnDrag && (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY, this.snapPoint.set(this.sprite.cameraOffset.x, this.sprite.cameraOffset.y));
                else {
                    var n = this.game.camera.x - this._pointerData[t.id].camX,
                        a = this.game.camera.y - this._pointerData[t.id].camY;
                    this.allowHorizontalDrag && (this.sprite.x = i + n), this.allowVerticalDrag && (this.sprite.y = s + a), this.boundsRect && this.checkBoundsRect(), this.boundsSprite && this.checkBoundsSprite(), this.snapOnDrag && (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY, this.snapPoint.set(this.sprite.x, this.sprite.y))
                }
                return this.sprite.events.onDragUpdate.dispatch(this.sprite, t, i, s, this.snapPoint, e), !0
            },
            justOver: function(t, e) {
                return t = t || 0, e = e || 500, this._pointerData[t].isOver && this.overDuration(t) < e
            },
            justOut: function(t, e) {
                return t = t || 0, e = e || 500, this._pointerData[t].isOut && this.game.time.time - this._pointerData[t].timeOut < e
            },
            justPressed: function(t, e) {
                return t = t || 0, e = e || 500, this._pointerData[t].isDown && this.downDuration(t) < e
            },
            justReleased: function(t, e) {
                return t = t || 0, e = e || 500, this._pointerData[t].isUp && this.game.time.time - this._pointerData[t].timeUp < e
            },
            overDuration: function(t) {
                return t = t || 0, this._pointerData[t].isOver ? this.game.time.time - this._pointerData[t].timeOver : -1
            },
            downDuration: function(t) {
                return t = t || 0, this._pointerData[t].isDown ? this.game.time.time - this._pointerData[t].timeDown : -1
            },
            enableDrag: function(t, e, s, n, a, o) {
                void 0 === t && (t = !1), void 0 === e && (e = !1), void 0 === s && (s = !1), void 0 === n && (n = 255), void 0 === a && (a = null), void 0 === o && (o = null), this._dragPoint = new i.Point, this.draggable = !0, this.bringToTop = e, this.dragOffset = new i.Point, this.dragFromCenter = t, this.pixelPerfectClick = s, this.pixelPerfectAlpha = n, a && (this.boundsRect = a), o && (this.boundsSprite = o)
            },
            disableDrag: function() {
                if (this._pointerData)
                    for (var t = 0; t < 10; t++) this._pointerData[t].isDragged = !1;
                this.draggable = !1, this.isDragged = !1, this._draggedPointerID = -1, this._pendingDrag = !1
            },
            startDrag: function(t) {
                var e = this.sprite.x,
                    i = this.sprite.y;
                if (this.isDragged = !0, this._draggedPointerID = t.id, this._pointerData[t.id].camX = this.game.camera.x, this._pointerData[t.id].camY = this.game.camera.y, this._pointerData[t.id].isDragged = !0, this.sprite.fixedToCamera) {
                    if (this.dragFromCenter) {
                        s = this.sprite.getBounds();
                        this.sprite.cameraOffset.x = this.globalToLocalX(t.x) + (this.sprite.cameraOffset.x - s.centerX), this.sprite.cameraOffset.y = this.globalToLocalY(t.y) + (this.sprite.cameraOffset.y - s.centerY)
                    }
                    this._dragPoint.setTo(this.sprite.cameraOffset.x - t.x, this.sprite.cameraOffset.y - t.y)
                } else {
                    if (this.dragFromCenter) {
                        var s = this.sprite.getBounds();
                        this.sprite.x = this.globalToLocalX(t.x) + (this.sprite.x - s.centerX), this.sprite.y = this.globalToLocalY(t.y) + (this.sprite.y - s.centerY)
                    }
                    this._dragPoint.setTo(this.sprite.x - this.globalToLocalX(t.x), this.sprite.y - this.globalToLocalY(t.y))
                }
                this.updateDrag(t, !0), this.bringToTop && (this._dragPhase = !0, this.sprite.bringToTop()), this.dragStartPoint.set(e, i), this.sprite.events.onDragStart$dispatch(this.sprite, t, e, i), this._pendingDrag = !1
            },
            globalToLocalX: function(t) {
                return this.scaleLayer && (t -= this.game.scale.grid.boundsFluid.x, t *= this.game.scale.grid.scaleFluidInversed.x), t
            },
            globalToLocalY: function(t) {
                return this.scaleLayer && (t -= this.game.scale.grid.boundsFluid.y, t *= this.game.scale.grid.scaleFluidInversed.y), t
            },
            stopDrag: function(t) {
                this.isDragged = !1, this._draggedPointerID = -1, this._pointerData[t.id].isDragged = !1, this._dragPhase = !1, this._pendingDrag = !1, this.snapOnRelease && (this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY) : (this.sprite.x = Math.round((this.sprite.x - this.snapOffsetX % this.snapX) / this.snapX) * this.snapX + this.snapOffsetX % this.snapX, this.sprite.y = Math.round((this.sprite.y - this.snapOffsetY % this.snapY) / this.snapY) * this.snapY + this.snapOffsetY % this.snapY)), this.sprite.events.onDragStop$dispatch(this.sprite, t), !1 === this.checkPointerOver(t) && this._pointerOutHandler(t)
            },
            setDragLock: function(t, e) {
                void 0 === t && (t = !0), void 0 === e && (e = !0), this.allowHorizontalDrag = t, this.allowVerticalDrag = e
            },
            enableSnap: function(t, e, i, s, n, a) {
                void 0 === i && (i = !0), void 0 === s && (s = !1), void 0 === n && (n = 0), void 0 === a && (a = 0), this.snapX = t, this.snapY = e, this.snapOffsetX = n, this.snapOffsetY = a, this.snapOnDrag = i, this.snapOnRelease = s
            },
            disableSnap: function() {
                this.snapOnDrag = !1, this.snapOnRelease = !1
            },
            checkBoundsRect: function() {
                this.sprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsRect.left ? this.sprite.cameraOffset.x = this.boundsRect.left : this.sprite.cameraOffset.x + this.sprite.width > this.boundsRect.right && (this.sprite.cameraOffset.x = this.boundsRect.right - this.sprite.width), this.sprite.cameraOffset.y < this.boundsRect.top ? this.sprite.cameraOffset.y = this.boundsRect.top : this.sprite.cameraOffset.y + this.sprite.height > this.boundsRect.bottom && (this.sprite.cameraOffset.y = this.boundsRect.bottom - this.sprite.height)) : (this.sprite.left < this.boundsRect.left ? this.sprite.x = this.boundsRect.x + this.sprite.offsetX : this.sprite.right > this.boundsRect.right && (this.sprite.x = this.boundsRect.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsRect.top ? this.sprite.y = this.boundsRect.top + this.sprite.offsetY : this.sprite.bottom > this.boundsRect.bottom && (this.sprite.y = this.boundsRect.bottom - (this.sprite.height - this.sprite.offsetY)))
            },
            checkBoundsSprite: function() {
                this.sprite.fixedToCamera && this.boundsSprite.fixedToCamera ? (this.sprite.cameraOffset.x < this.boundsSprite.cameraOffset.x ? this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x : this.sprite.cameraOffset.x + this.sprite.width > this.boundsSprite.cameraOffset.x + this.boundsSprite.width && (this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x + this.boundsSprite.width - this.sprite.width), this.sprite.cameraOffset.y < this.boundsSprite.cameraOffset.y ? this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y : this.sprite.cameraOffset.y + this.sprite.height > this.boundsSprite.cameraOffset.y + this.boundsSprite.height && (this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y + this.boundsSprite.height - this.sprite.height)) : (this.sprite.left < this.boundsSprite.left ? this.sprite.x = this.boundsSprite.left + this.sprite.offsetX : this.sprite.right > this.boundsSprite.right && (this.sprite.x = this.boundsSprite.right - (this.sprite.width - this.sprite.offsetX)), this.sprite.top < this.boundsSprite.top ? this.sprite.y = this.boundsSprite.top + this.sprite.offsetY : this.sprite.bottom > this.boundsSprite.bottom && (this.sprite.y = this.boundsSprite.bottom - (this.sprite.height - this.sprite.offsetY)))
            }
        }, i.InputHandler.prototype.constructor = i.InputHandler, i.Gamepad = function(t) {
            this.game = t, this._gamepadIndexMap = {}, this._rawPads = [], this._active = !1, this.enabled = !0, this._gamepadSupportAvailable = !!navigator.webkitGetGamepads || !!navigator.webkitGamepads || -1 !== navigator.userAgent.indexOf("Firefox/") || !!navigator.getGamepads, this._prevRawGamepadTypes = [], this._prevTimestamps = [], this.callbackContext = this, this.onConnectCallback = null, this.onDisconnectCallback = null, this.onDownCallback = null, this.onUpCallback = null, this.onAxisCallback = null, this.onFloatCallback = null, this._ongamepadconnected = null, this._gamepaddisconnected = null, this._gamepads = [new i.SinglePad(t, this), new i.SinglePad(t, this), new i.SinglePad(t, this), new i.SinglePad(t, this)]
        }, i.Gamepad.prototype = {
            addCallbacks: function(t, e) {
                void 0 !== e && (this.onConnectCallback = "function" == typeof e.onConnect ? e.onConnect : this.onConnectCallback, this.onDisconnectCallback = "function" == typeof e.onDisconnect ? e.onDisconnect : this.onDisconnectCallback, this.onDownCallback = "function" == typeof e.onDown ? e.onDown : this.onDownCallback, this.onUpCallback = "function" == typeof e.onUp ? e.onUp : this.onUpCallback, this.onAxisCallback = "function" == typeof e.onAxis ? e.onAxis : this.onAxisCallback, this.onFloatCallback = "function" == typeof e.onFloat ? e.onFloat : this.onFloatCallback, this.callbackContext = t)
            },
            start: function() {
                if (!this._active) {
                    this._active = !0;
                    var t = this;
                    this._onGamepadConnected = function(e) {
                        return t.onGamepadConnected(e)
                    }, this._onGamepadDisconnected = function(e) {
                        return t.onGamepadDisconnected(e)
                    }, window.addEventListener("gamepadconnected", this._onGamepadConnected, !1), window.addEventListener("gamepaddisconnected", this._onGamepadDisconnected, !1)
                }
            },
            onGamepadConnected: function(t) {
                var e = t.gamepad;
                this._rawPads.push(e), this._gamepads[e.index].connect(e)
            },
            onGamepadDisconnected: function(t) {
                var e = t.gamepad;
                for (var i in this._rawPads) this._rawPads[i].index === e.index && this._rawPads.splice(i, 1);
                this._gamepads[e.index].disconnect()
            },
            update: function() {
                this._pollGamepads(), this.pad1.pollStatus(), this.pad2.pollStatus(), this.pad3.pollStatus(), this.pad4.pollStatus()
            },
            _pollGamepads: function() {
                if (this._active) {
                    if (navigator.getGamepads) t = navigator.getGamepads();
                    else if (navigator.webkitGetGamepads) t = navigator.webkitGetGamepads();
                    else if (navigator.webkitGamepads) var t = navigator.webkitGamepads();
                    if (t) {
                        this._rawPads = [];
                        for (var e = !1, i = 0; i < t.length && (typeof t[i] !== this._prevRawGamepadTypes[i] && (e = !0, this._prevRawGamepadTypes[i] = typeof t[i]), t[i] && this._rawPads.push(t[i]), 3 !== i); i++);
                        for (var s = 0; s < this._gamepads.length; s++) this._gamepads[s]._rawPad = this._rawPads[s];
                        if (e) {
                            for (var n, a = {
                                rawIndices: {},
                                padIndices: {}
                            }, o = 0; o < this._gamepads.length; o++)
                                if ((n = this._gamepads[o]).connected)
                                    for (var r = 0; r < this._rawPads.length; r++) this._rawPads[r].index === n.index && (a.rawIndices[n.index] = !0, a.padIndices[o] = !0);
                            for (var h = 0; h < this._gamepads.length; h++)
                                if (n = this._gamepads[h], !a.padIndices[h]) {
                                    this._rawPads.length < 1 && n.disconnect();
                                    for (var l = 0; l < this._rawPads.length && !a.padIndices[h]; l++) {
                                        var c = this._rawPads[l];
                                        if (c) {
                                            if (a.rawIndices[c.index]) {
                                                n.disconnect();
                                                continue
                                            }
                                            n.connect(c), a.rawIndices[c.index] = !0, a.padIndices[h] = !0
                                        } else n.disconnect()
                                    }
                                }
                        }
                    }
                }
            },
            setDeadZones: function(t) {
                for (var e = 0; e < this._gamepads.length; e++) this._gamepads[e].deadZone = t
            },
            stop: function() {
                this._active = !1, window.removeEventListener("gamepadconnected", this._onGamepadConnected), window.removeEventListener("gamepaddisconnected", this._onGamepadDisconnected)
            },
            reset: function() {
                this.update();
                for (var t = 0; t < this._gamepads.length; t++) this._gamepads[t].reset()
            },
            justPressed: function(t, e) {
                for (var i = 0; i < this._gamepads.length; i++)
                    if (!0 === this._gamepads[i].justPressed(t, e)) return !0;
                return !1
            },
            justReleased: function(t, e) {
                for (var i = 0; i < this._gamepads.length; i++)
                    if (!0 === this._gamepads[i].justReleased(t, e)) return !0;
                return !1
            },
            isDown: function(t) {
                for (var e = 0; e < this._gamepads.length; e++)
                    if (!0 === this._gamepads[e].isDown(t)) return !0;
                return !1
            },
            destroy: function() {
                this.stop();
                for (var t = 0; t < this._gamepads.length; t++) this._gamepads[t].destroy()
            }
        }, i.Gamepad.prototype.constructor = i.Gamepad, Object.defineProperty(i.Gamepad.prototype, "active", {
            get: function() {
                return this._active
            }
        }), Object.defineProperty(i.Gamepad.prototype, "supported", {
            get: function() {
                return this._gamepadSupportAvailable
            }
        }), Object.defineProperty(i.Gamepad.prototype, "padsConnected", {
            get: function() {
                return this._rawPads.length
            }
        }), Object.defineProperty(i.Gamepad.prototype, "pad1", {
            get: function() {
                return this._gamepads[0]
            }
        }), Object.defineProperty(i.Gamepad.prototype, "pad2", {
            get: function() {
                return this._gamepads[1]
            }
        }), Object.defineProperty(i.Gamepad.prototype, "pad3", {
            get: function() {
                return this._gamepads[2]
            }
        }), Object.defineProperty(i.Gamepad.prototype, "pad4", {
            get: function() {
                return this._gamepads[3]
            }
        }), i.Gamepad.BUTTON_0 = 0, i.Gamepad.BUTTON_1 = 1, i.Gamepad.BUTTON_2 = 2, i.Gamepad.BUTTON_3 = 3, i.Gamepad.BUTTON_4 = 4, i.Gamepad.BUTTON_5 = 5, i.Gamepad.BUTTON_6 = 6, i.Gamepad.BUTTON_7 = 7, i.Gamepad.BUTTON_8 = 8, i.Gamepad.BUTTON_9 = 9, i.Gamepad.BUTTON_10 = 10, i.Gamepad.BUTTON_11 = 11, i.Gamepad.BUTTON_12 = 12, i.Gamepad.BUTTON_13 = 13, i.Gamepad.BUTTON_14 = 14, i.Gamepad.BUTTON_15 = 15, i.Gamepad.AXIS_0 = 0, i.Gamepad.AXIS_1 = 1, i.Gamepad.AXIS_2 = 2, i.Gamepad.AXIS_3 = 3, i.Gamepad.AXIS_4 = 4, i.Gamepad.AXIS_5 = 5, i.Gamepad.AXIS_6 = 6, i.Gamepad.AXIS_7 = 7, i.Gamepad.AXIS_8 = 8, i.Gamepad.AXIS_9 = 9, i.Gamepad.XBOX360_A = 0, i.Gamepad.XBOX360_B = 1, i.Gamepad.XBOX360_X = 2, i.Gamepad.XBOX360_Y = 3, i.Gamepad.XBOX360_LEFT_BUMPER = 4, i.Gamepad.XBOX360_RIGHT_BUMPER = 5, i.Gamepad.XBOX360_LEFT_TRIGGER = 6, i.Gamepad.XBOX360_RIGHT_TRIGGER = 7, i.Gamepad.XBOX360_BACK = 8, i.Gamepad.XBOX360_START = 9, i.Gamepad.XBOX360_STICK_LEFT_BUTTON = 10, i.Gamepad.XBOX360_STICK_RIGHT_BUTTON = 11, i.Gamepad.XBOX360_DPAD_LEFT = 14, i.Gamepad.XBOX360_DPAD_RIGHT = 15, i.Gamepad.XBOX360_DPAD_UP = 12, i.Gamepad.XBOX360_DPAD_DOWN = 13, i.Gamepad.XBOX360_STICK_LEFT_X = 0, i.Gamepad.XBOX360_STICK_LEFT_Y = 1, i.Gamepad.XBOX360_STICK_RIGHT_X = 2, i.Gamepad.XBOX360_STICK_RIGHT_Y = 3, i.Gamepad.PS3XC_X = 0, i.Gamepad.PS3XC_CIRCLE = 1, i.Gamepad.PS3XC_SQUARE = 2, i.Gamepad.PS3XC_TRIANGLE = 3, i.Gamepad.PS3XC_L1 = 4, i.Gamepad.PS3XC_R1 = 5, i.Gamepad.PS3XC_L2 = 6, i.Gamepad.PS3XC_R2 = 7, i.Gamepad.PS3XC_SELECT = 8, i.Gamepad.PS3XC_START = 9, i.Gamepad.PS3XC_STICK_LEFT_BUTTON = 10, i.Gamepad.PS3XC_STICK_RIGHT_BUTTON = 11, i.Gamepad.PS3XC_DPAD_UP = 12, i.Gamepad.PS3XC_DPAD_DOWN = 13, i.Gamepad.PS3XC_DPAD_LEFT = 14, i.Gamepad.PS3XC_DPAD_RIGHT = 15, i.Gamepad.PS3XC_STICK_LEFT_X = 0, i.Gamepad.PS3XC_STICK_LEFT_Y = 1, i.Gamepad.PS3XC_STICK_RIGHT_X = 2, i.Gamepad.PS3XC_STICK_RIGHT_Y = 3, i.SinglePad = function(t, e) {
            this.game = t, this.index = null, this.connected = !1, this.callbackContext = this, this.onConnectCallback = null, this.onDisconnectCallback = null, this.onDownCallback = null, this.onUpCallback = null, this.onAxisCallback = null, this.onFloatCallback = null, this.deadZone = .26, this._padParent = e, this._rawPad = null, this._prevTimestamp = null, this._buttons = [], this._buttonsLen = 0, this._axes = [], this._axesLen = 0
        }, i.SinglePad.prototype = {
            addCallbacks: function(t, e) {
                void 0 !== e && (this.onConnectCallback = "function" == typeof e.onConnect ? e.onConnect : this.onConnectCallback, this.onDisconnectCallback = "function" == typeof e.onDisconnect ? e.onDisconnect : this.onDisconnectCallback, this.onDownCallback = "function" == typeof e.onDown ? e.onDown : this.onDownCallback, this.onUpCallback = "function" == typeof e.onUp ? e.onUp : this.onUpCallback, this.onAxisCallback = "function" == typeof e.onAxis ? e.onAxis : this.onAxisCallback, this.onFloatCallback = "function" == typeof e.onFloat ? e.onFloat : this.onFloatCallback, this.callbackContext = t)
            },
            getButton: function(t) {
                return this._buttons[t] ? this._buttons[t] : null
            },
            pollStatus: function() {
                if (this.connected && this.game.input.enabled && this.game.input.gamepad.enabled && (!this._rawPad.timestamp || this._rawPad.timestamp !== this._prevTimestamp)) {
                    for (var t = 0; t < this._buttonsLen; t++) {
                        var e = isNaN(this._rawPad.buttons[t]) ? this._rawPad.buttons[t].value : this._rawPad.buttons[t];
                        e !== this._buttons[t].value && (1 === e ? this.processButtonDown(t, e) : 0 === e ? this.processButtonUp(t, e) : this.processButtonFloat(t, e))
                    }
                    for (var i = 0; i < this._axesLen; i++) {
                        var s = this._rawPad.axes[i];
                        s > 0 && s > this.deadZone || s < 0 && s < -this.deadZone ? this.processAxisChange(i, s) : this.processAxisChange(i, 0)
                    }
                    this._prevTimestamp = this._rawPad.timestamp
                }
            },
            connect: function(t) {
                var e = !this.connected;
                this.connected = !0, this.index = t.index, this._rawPad = t, this._buttons = [], this._buttonsLen = t.buttons.length, this._axes = [], this._axesLen = t.axes.length;
                for (var s = 0; s < this._axesLen; s++) this._axes[s] = t.axes[s];
                for (var n in t.buttons) n = parseInt(n, 10), this._buttons[n] = new i.DeviceButton(this, n);
                e && this._padParent.onConnectCallback && this._padParent.onConnectCallback.call(this._padParent.callbackContext, this.index), e && this.onConnectCallback && this.onConnectCallback.call(this.callbackContext)
            },
            disconnect: function() {
                var t = this.connected,
                    e = this.index;
                this.connected = !1, this.index = null, this._rawPad = void 0;
                for (var i = 0; i < this._buttonsLen; i++) this._buttons[i].destroy();
                this._buttons = [], this._buttonsLen = 0, this._axes = [], this._axesLen = 0, t && this._padParent.onDisconnectCallback && this._padParent.onDisconnectCallback.call(this._padParent.callbackContext, e), t && this.onDisconnectCallback && this.onDisconnectCallback.call(this.callbackContext)
            },
            destroy: function() {
                this._rawPad = void 0;
                for (var t = 0; t < this._buttonsLen; t++) this._buttons[t].destroy();
                this._buttons = [], this._buttonsLen = 0, this._axes = [], this._axesLen = 0, this.onConnectCallback = null, this.onDisconnectCallback = null, this.onDownCallback = null, this.onUpCallback = null, this.onAxisCallback = null, this.onFloatCallback = null
            },
            processAxisChange: function(t, e) {
                this._axes[t] !== e && (this._axes[t] = e, this._padParent.onAxisCallback && this._padParent.onAxisCallback.call(this._padParent.callbackContext, this, t, e), this.onAxisCallback && this.onAxisCallback.call(this.callbackContext, this, t, e))
            },
            processButtonDown: function(t, e) {
                this._buttons[t] && this._buttons[t].start(null, e), this._padParent.onDownCallback && this._padParent.onDownCallback.call(this._padParent.callbackContext, t, e, this.index), this.onDownCallback && this.onDownCallback.call(this.callbackContext, t, e)
            },
            processButtonUp: function(t, e) {
                this._padParent.onUpCallback && this._padParent.onUpCallback.call(this._padParent.callbackContext, t, e, this.index), this.onUpCallback && this.onUpCallback.call(this.callbackContext, t, e), this._buttons[t] && this._buttons[t].stop(null, e)
            },
            processButtonFloat: function(t, e) {
                this._padParent.onFloatCallback && this._padParent.onFloatCallback.call(this._padParent.callbackContext, t, e, this.index), this.onFloatCallback && this.onFloatCallback.call(this.callbackContext, t, e), this._buttons[t] && this._buttons[t].padFloat(e)
            },
            axis: function(t) {
                return !!this._axes[t] && this._axes[t]
            },
            isDown: function(t) {
                return !!this._buttons[t] && this._buttons[t].isDown
            },
            isUp: function(t) {
                return !!this._buttons[t] && this._buttons[t].isUp
            },
            justReleased: function(t, e) {
                if (this._buttons[t]) return this._buttons[t].justReleased(e)
            },
            justPressed: function(t, e) {
                if (this._buttons[t]) return this._buttons[t].justPressed(e)
            },
            buttonValue: function(t) {
                return this._buttons[t] ? this._buttons[t].value : null
            },
            reset: function() {
                for (var t = 0; t < this._axes.length; t++) this._axes[t] = 0
            }
        }, i.SinglePad.prototype.constructor = i.SinglePad, i.Key = function(t, e) {
            this.game = t, this._enabled = !0, this.event = null, this.isDown = !1, this.isUp = !0, this.altKey = !1, this.ctrlKey = !1, this.shiftKey = !1, this.timeDown = 0, this.duration = 0, this.timeUp = -2500, this.repeats = 0, this.keyCode = e, this.onDown = new i.Signal, this.onHoldCallback = null, this.onHoldContext = null, this.onUp = new i.Signal, this._justDown = !1, this._justUp = !1
        }, i.Key.prototype = {
            update: function() {
                this._enabled && this.isDown && (this.duration = this.game.time.time - this.timeDown, this.repeats++, this.onHoldCallback && this.onHoldCallback.call(this.onHoldContext, this))
            },
            processKeyDown: function(t) {
                this._enabled && (this.event = t, this.isDown || (this.altKey = t.altKey, this.ctrlKey = t.ctrlKey, this.shiftKey = t.shiftKey, this.isDown = !0, this.isUp = !1, this.timeDown = this.game.time.time, this.duration = 0, this.repeats = 0, this._justDown = !0, this.onDown.dispatch(this)))
            },
            processKeyUp: function(t) {
                this._enabled && (this.event = t, this.isUp || (this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.duration = this.game.time.time - this.timeDown, this._justUp = !0, this.onUp.dispatch(this)))
            },
            reset: function(t) {
                void 0 === t && (t = !0), this.isDown = !1, this.isUp = !0, this.timeUp = this.game.time.time, this.duration = 0, this._enabled = !0, this._justDown = !1, this._justUp = !1, t && (this.onDown.removeAll(), this.onUp.removeAll(), this.onHoldCallback = null, this.onHoldContext = null)
            },
            downDuration: function(t) {
                return void 0 === t && (t = 50), this.isDown && this.duration < t
            },
            upDuration: function(t) {
                return void 0 === t && (t = 50), !this.isDown && this.game.time.time - this.timeUp < t
            }
        }, Object.defineProperty(i.Key.prototype, "justDown", {
            get: function() {
                var t = this._justDown;
                return this._justDown = !1, t
            }
        }), Object.defineProperty(i.Key.prototype, "justUp", {
            get: function() {
                var t = this._justUp;
                return this._justUp = !1, t
            }
        }), Object.defineProperty(i.Key.prototype, "enabled", {
            get: function() {
                return this._enabled
            },
            set: function(t) {
                (t = !!t) !== this._enabled && (t || this.reset(!1), this._enabled = t)
            }
        }), i.Key.prototype.constructor = i.Key, i.Keyboard = function(t) {
            this.game = t, this.enabled = !0, this.event = null, this.pressEvent = null, this.callbackContext = this, this.onDownCallback = null, this.onPressCallback = null, this.onUpCallback = null, this._keys = [], this._capture = [], this._onKeyDown = null, this._onKeyPress = null, this._onKeyUp = null, this._i = 0, this._k = 0
        }, i.Keyboard.prototype = {
            addCallbacks: function(t, e, i, s) {
                this.callbackContext = t, void 0 !== e && null !== e && (this.onDownCallback = e), void 0 !== i && null !== i && (this.onUpCallback = i), void 0 !== s && null !== s && (this.onPressCallback = s)
            },
            addKey: function(t) {
                return this._keys[t] || (this._keys[t] = new i.Key(this.game, t), this.addKeyCapture(t)), this._keys[t]
            },
            addKeys: function(t) {
                var e = {};
                for (var i in t) e[i] = this.addKey(t[i]);
                return e
            },
            removeKey: function(t) {
                this._keys[t] && (this._keys[t] = null, this.removeKeyCapture(t))
            },
            createCursorKeys: function() {
                return this.addKeys({
                    up: i.KeyCode.UP,
                    down: i.KeyCode.DOWN,
                    left: i.KeyCode.LEFT,
                    right: i.KeyCode.RIGHT
                })
            },
            start: function() {
                if (!this.game.device.cocoonJS && null === this._onKeyDown) {
                    var t = this;
                    this._onKeyDown = function(e) {
                        return t.processKeyDown(e)
                    }, this._onKeyUp = function(e) {
                        return t.processKeyUp(e)
                    }, this._onKeyPress = function(e) {
                        return t.processKeyPress(e)
                    }, window.addEventListener("keydown", this._onKeyDown, !1), window.addEventListener("keyup", this._onKeyUp, !1), window.addEventListener("keypress", this._onKeyPress, !1)
                }
            },
            stop: function() {
                window.removeEventListener("keydown", this._onKeyDown), window.removeEventListener("keyup", this._onKeyUp), window.removeEventListener("keypress", this._onKeyPress), this._onKeyDown = null, this._onKeyUp = null, this._onKeyPress = null
            },
            destroy: function() {
                this.stop(), this.clearCaptures(), this._keys.length = 0, this._i = 0
            },
            addKeyCapture: function(t) {
                if ("object" == typeof t)
                    for (var e in t) this._capture[t[e]] = !0;
                else this._capture[t] = !0
            },
            removeKeyCapture: function(t) {
                delete this._capture[t]
            },
            clearCaptures: function() {
                this._capture = {}
            },
            update: function() {
                for (this._i = this._keys.length; this._i--;) this._keys[this._i] && this._keys[this._i].update()
            },
            processKeyDown: function(t) {
                if (this.event = t, this.game.input.enabled && this.enabled) {
                    var e = t.keyCode;
                    this._capture[e] && t.preventDefault(), this._keys[e] || (this._keys[e] = new i.Key(this.game, e)), this._keys[e].processKeyDown(t), this._k = e, this.onDownCallback && this.onDownCallback.call(this.callbackContext, t)
                }
            },
            processKeyPress: function(t) {
                this.pressEvent = t, this.game.input.enabled && this.enabled && this.onPressCallback && this.onPressCallback.call(this.callbackContext, String.fromCharCode(t.charCode), t)
            },
            processKeyUp: function(t) {
                if (this.event = t, this.game.input.enabled && this.enabled) {
                    var e = t.keyCode;
                    this._capture[e] && t.preventDefault(), this._keys[e] || (this._keys[e] = new i.Key(this.game, e)), this._keys[e].processKeyUp(t), this.onUpCallback && this.onUpCallback.call(this.callbackContext, t)
                }
            },
            reset: function(t) {
                void 0 === t && (t = !0), this.event = null;
                for (var e = this._keys.length; e--;) this._keys[e] && this._keys[e].reset(t)
            },
            downDuration: function(t, e) {
                return this._keys[t] ? this._keys[t].downDuration(e) : null
            },
            upDuration: function(t, e) {
                return this._keys[t] ? this._keys[t].upDuration(e) : null
            },
            isDown: function(t) {
                return this._keys[t] ? this._keys[t].isDown : null
            }
        }, Object.defineProperty(i.Keyboard.prototype, "lastChar", {
            get: function() {
                return 32 === this.event.charCode ? "" : String.fromCharCode(this.pressEvent.charCode)
            }
        }), Object.defineProperty(i.Keyboard.prototype, "lastKey", {
            get: function() {
                return this._keys[this._k]
            }
        }), i.Keyboard.prototype.constructor = i.Keyboard, i.KeyCode = {
            A: "A".charCodeAt(0),
            B: "B".charCodeAt(0),
            C: "C".charCodeAt(0),
            D: "D".charCodeAt(0),
            E: "E".charCodeAt(0),
            F: "F".charCodeAt(0),
            G: "G".charCodeAt(0),
            H: "H".charCodeAt(0),
            I: "I".charCodeAt(0),
            J: "J".charCodeAt(0),
            K: "K".charCodeAt(0),
            L: "L".charCodeAt(0),
            M: "M".charCodeAt(0),
            N: "N".charCodeAt(0),
            O: "O".charCodeAt(0),
            P: "P".charCodeAt(0),
            Q: "Q".charCodeAt(0),
            R: "R".charCodeAt(0),
            S: "S".charCodeAt(0),
            T: "T".charCodeAt(0),
            U: "U".charCodeAt(0),
            V: "V".charCodeAt(0),
            W: "W".charCodeAt(0),
            X: "X".charCodeAt(0),
            Y: "Y".charCodeAt(0),
            Z: "Z".charCodeAt(0),
            ZERO: "0".charCodeAt(0),
            ONE: "1".charCodeAt(0),
            TWO: "2".charCodeAt(0),
            THREE: "3".charCodeAt(0),
            FOUR: "4".charCodeAt(0),
            FIVE: "5".charCodeAt(0),
            SIX: "6".charCodeAt(0),
            SEVEN: "7".charCodeAt(0),
            EIGHT: "8".charCodeAt(0),
            NINE: "9".charCodeAt(0),
            NUMPAD_0: 96,
            NUMPAD_1: 97,
            NUMPAD_2: 98,
            NUMPAD_3: 99,
            NUMPAD_4: 100,
            NUMPAD_5: 101,
            NUMPAD_6: 102,
            NUMPAD_7: 103,
            NUMPAD_8: 104,
            NUMPAD_9: 105,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_ADD: 107,
            NUMPAD_ENTER: 108,
            NUMPAD_SUBTRACT: 109,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            F1: 112,
            F2: 113,
            F3: 114,
            F4: 115,
            F5: 116,
            F6: 117,
            F7: 118,
            F8: 119,
            F9: 120,
            F10: 121,
            F11: 122,
            F12: 123,
            F13: 124,
            F14: 125,
            F15: 126,
            COLON: 186,
            EQUALS: 187,
            COMMA: 188,
            UNDERSCORE: 189,
            PERIOD: 190,
            QUESTION_MARK: 191,
            TILDE: 192,
            OPEN_BRACKET: 219,
            BACKWARD_SLASH: 220,
            CLOSED_BRACKET: 221,
            QUOTES: 222,
            BACKSPACE: 8,
            TAB: 9,
            CLEAR: 12,
            ENTER: 13,
            SHIFT: 16,
            CONTROL: 17,
            ALT: 18,
            CAPS_LOCK: 20,
            ESC: 27,
            SPACEBAR: 32,
            PAGE_UP: 33,
            PAGE_DOWN: 34,
            END: 35,
            HOME: 36,
            LEFT: 37,
            UP: 38,
            RIGHT: 39,
            DOWN: 40,
            PLUS: 43,
            MINUS: 44,
            INSERT: 45,
            DELETE: 46,
            HELP: 47,
            NUM_LOCK: 144
        };
        for (var n in i.KeyCode) i.KeyCode.hasOwnProperty(n) && !n.match(/[a-z]/) && (i.Keyboard[n] = i.KeyCode[n]);
        i.Component = function() {}, i.Component.Angle = function() {}, i.Component.Angle.prototype = {
            angle: {
                get: function() {
                    return i.Math.wrapAngle(i.Math.radToDeg(this.rotation))
                },
                set: function(t) {
                    this.rotation = i.Math.degToRad(i.Math.wrapAngle(t))
                }
            }
        }, i.Component.Animation = function() {}, i.Component.Animation.prototype = {
            play: function(t, e, i, s) {
                if (this.animations) return this.animations.play(t, e, i, s)
            }
        }, i.Component.AutoCull = function() {}, i.Component.AutoCull.prototype = {
            autoCull: !1,
            inCamera: {
                get: function() {
                    return this.autoCull || this.checkWorldBounds || (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y), this.game.world.camera.view.intersects(this._bounds)
                }
            }
        }, i.Component.Bounds = function() {}, i.Component.Bounds.prototype = {
            offsetX: {
                get: function() {
                    return this.anchor.x * this.width
                }
            },
            offsetY: {
                get: function() {
                    return this.anchor.y * this.height
                }
            },
            centerX: {
                get: function() {
                    return this.x - this.offsetX + .5 * this.width
                },
                set: function(t) {
                    this.x = t + this.offsetX - .5 * this.width
                }
            },
            centerY: {
                get: function() {
                    return this.y - this.offsetY + .5 * this.height
                },
                set: function(t) {
                    this.y = t + this.offsetY - .5 * this.height
                }
            },
            left: {
                get: function() {
                    return this.x - this.offsetX
                },
                set: function(t) {
                    this.x = t + this.offsetX
                }
            },
            right: {
                get: function() {
                    return this.x + this.width - this.offsetX
                },
                set: function(t) {
                    this.x = t - this.width + this.offsetX
                }
            },
            top: {
                get: function() {
                    return this.y - this.offsetY
                },
                set: function(t) {
                    this.y = t + this.offsetY
                }
            },
            bottom: {
                get: function() {
                    return this.y + this.height - this.offsetY
                },
                set: function(t) {
                    this.y = t - this.height + this.offsetY
                }
            },
            alignIn: function(t, e, s, n) {
                switch (void 0 === s && (s = 0), void 0 === n && (n = 0), e) {
                    default:
                        case i.TOP_LEFT:
                        this.left = t.left - s,
                    this.top = t.top - n;
                    break;
                    case i.TOP_CENTER:
                        this.centerX = t.centerX + s, this.top = t.top - n;
                        break;
                    case i.TOP_RIGHT:
                        this.right = t.right + s, this.top = t.top - n;
                        break;
                    case i.LEFT_CENTER:
                        this.left = t.left - s, this.centerY = t.centerY + n;
                        break;
                    case i.CENTER:
                        this.centerX = t.centerX + s, this.centerY = t.centerY + n;
                        break;
                    case i.RIGHT_CENTER:
                        this.right = t.right + s, this.centerY = t.centerY + n;
                        break;
                    case i.BOTTOM_LEFT:
                        this.left = t.left - s, this.bottom = t.bottom + n;
                        break;
                    case i.BOTTOM_CENTER:
                        this.centerX = t.centerX + s, this.bottom = t.bottom + n;
                        break;
                    case i.BOTTOM_RIGHT:
                        this.right = t.right + s, this.bottom = t.bottom + n
                }
                return this
            },
            alignTo: function(t, e, s, n) {
                switch (void 0 === s && (s = 0), void 0 === n && (n = 0), e) {
                    default:
                        case i.TOP_LEFT:
                        this.left = t.left - s,
                    this.bottom = t.top - n;
                    break;
                    case i.TOP_CENTER:
                        this.centerX = t.centerX + s, this.bottom = t.top - n;
                        break;
                    case i.TOP_RIGHT:
                        this.right = t.right + s, this.bottom = t.top - n;
                        break;
                    case i.LEFT_TOP:
                        this.right = t.left - s, this.top = t.top - n;
                        break;
                    case i.LEFT_CENTER:
                        this.right = t.left - s, this.centerY = t.centerY + n;
                        break;
                    case i.LEFT_BOTTOM:
                        this.right = t.left - s, this.bottom = t.bottom + n;
                        break;
                    case i.RIGHT_TOP:
                        this.left = t.right + s, this.top = t.top - n;
                        break;
                    case i.RIGHT_CENTER:
                        this.left = t.right + s, this.centerY = t.centerY + n;
                        break;
                    case i.RIGHT_BOTTOM:
                        this.left = t.right + s, this.bottom = t.bottom + n;
                        break;
                    case i.BOTTOM_LEFT:
                        this.left = t.left - s, this.top = t.bottom + n;
                        break;
                    case i.BOTTOM_CENTER:
                        this.centerX = t.centerX + s, this.top = t.bottom + n;
                        break;
                    case i.BOTTOM_RIGHT:
                        this.right = t.right + s, this.top = t.bottom + n
                }
                return this
            }
        }, i.Group.prototype.alignIn = i.Component.Bounds.prototype.alignIn, i.Group.prototype.alignTo = i.Component.Bounds.prototype.alignTo, i.Component.BringToTop = function() {}, i.Component.BringToTop.prototype.bringToTop = function() {
            return this.parent && this.parent.bringToTop(this), this
        }, i.Component.BringToTop.prototype.sendToBack = function() {
            return this.parent && this.parent.sendToBack(this), this
        }, i.Component.BringToTop.prototype.moveUp = function() {
            return this.parent && this.parent.moveUp(this), this
        }, i.Component.BringToTop.prototype.moveDown = function() {
            return this.parent && this.parent.moveDown(this), this
        }, i.Component.Core = function() {}, i.Component.Core.install = function(t) {
            i.Utils.mixinPrototype(this, i.Component.Core.prototype), this.components = {};
            for (var e = 0; e < t.length; e++) {
                var s = t[e],
                    n = !1;
                "Destroy" === s && (n = !0), i.Utils.mixinPrototype(this, i.Component[s].prototype, n), this.components[s] = !0
            }
        }, i.Component.Core.init = function(t, e, s, n, a) {
            this.game = t, this.key = n, this.data = {}, this.position.set(e, s), this.world = new i.Point(e, s), this.previousPosition = new i.Point(e, s), this.events = new i.Events(this), this._bounds = new i.Rectangle, this.components.PhysicsBody && (this.body = this.body), this.components.Animation && (this.animations = new i.AnimationManager(this)), this.components.LoadTexture && null !== n && this.loadTexture(n, a), this.components.FixedToCamera && (this.cameraOffset = new i.Point(e, s))
        }, i.Component.Core.preUpdate = function() {
            if (!this.pendingDestroy) {
                if (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !this.exists || !this.parent.exists) return this.renderOrderID = -1, !1;
                this.world.setTo(this.game.camera.x + this.worldTransform.tx, this.game.camera.y + this.worldTransform.ty), this.visible && (this.renderOrderID = this.game.stage.currentRenderOrderID++), this.animations && this.animations.update(), this.body && this.body.preUpdate();
                for (var t = 0; t < this.children.length; t++) this.children[t].preUpdate();
                return !0
            }
            this.destroy()
        }, i.Component.Core.prototype = {
            game: null,
            name: "",
            data: {},
            components: {},
            z: 0,
            events: void 0,
            animations: void 0,
            key: "",
            world: null,
            debug: !1,
            previousPosition: null,
            previousRotation: 0,
            renderOrderID: 0,
            fresh: !0,
            pendingDestroy: !1,
            _bounds: null,
            _exists: !0,
            exists: {
                get: function() {
                    return this._exists
                },
                set: function(t) {
                    t ? (this._exists = !0, this.body && this.body.type === i.Physics.P2JS && this.body.addToWorld(), this.visible = !0) : (this._exists = !1, this.body && this.body.type === i.Physics.P2JS && this.body.removeFromWorld(), this.visible = !1)
                }
            },
            update: function() {},
            postUpdate: function() {
                this.customRender && this.key.render(), this.components.PhysicsBody && i.Component.PhysicsBody.postUpdate.call(this), this.components.FixedToCamera && i.Component.FixedToCamera.postUpdate.call(this);
                for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate()
            }
        }, i.Component.Crop = function() {}, i.Component.Crop.prototype = {
            cropRect: null,
            _crop: null,
            crop: function(t, e) {
                void 0 === e && (e = !1), t ? (e && null !== this.cropRect ? this.cropRect.setTo(t.x, t.y, t.width, t.height) : e && null === this.cropRect ? this.cropRect = new i.Rectangle(t.x, t.y, t.width, t.height) : this.cropRect = t, this.updateCrop()) : (this._crop = null, this.cropRect = null, this.resetFrame())
            },
            updateCrop: function() {
                if (this.cropRect) {
                    var t = this.texture.crop.x,
                        e = this.texture.crop.y,
                        s = this.texture.crop.width,
                        n = this.texture.crop.height;
                    this._crop = i.Rectangle.clone(this.cropRect, this._crop), this._crop.x += this._frame.x, this._crop.y += this._frame.y;
                    var a = Math.max(this._frame.x, this._crop.x),
                        o = Math.max(this._frame.y, this._crop.y),
                        r = Math.min(this._frame.right, this._crop.right) - a,
                        h = Math.min(this._frame.bottom, this._crop.bottom) - o;
                    this.texture.crop.x = a, this.texture.crop.y = o, this.texture.crop.width = r, this.texture.crop.height = h, this.texture.frame.width = Math.min(r, this.cropRect.width), this.texture.frame.height = Math.min(h, this.cropRect.height), this.texture.width = this.texture.frame.width, this.texture.height = this.texture.frame.height, this.texture._updateUvs(), 16777215 === this.tint || t === a && e === o && s === r && n === h || (this.texture.requiresReTint = !0)
                }
            }
        }, i.Component.Delta = function() {}, i.Component.Delta.prototype = {
            deltaX: {
                get: function() {
                    return this.world.x - this.previousPosition.x
                }
            },
            deltaY: {
                get: function() {
                    return this.world.y - this.previousPosition.y
                }
            },
            deltaZ: {
                get: function() {
                    return this.rotation - this.previousRotation
                }
            }
        }, i.Component.Destroy = function() {}, i.Component.Destroy.prototype = {
            destroyPhase: !1,
            destroy: function(t, e) {
                if (null !== this.game && !this.destroyPhase) {
                    void 0 === t && (t = !0), void 0 === e && (e = !1), this.destroyPhase = !0, this.events && this.events.onDestroy$dispatch(this), this.parent && (this.parent instanceof i.Group ? this.parent.remove(this) : this.parent.removeChild(this)), this.input && this.input.destroy(), this.animations && this.animations.destroy(), this.body && this.body.destroy(), this.events && this.events.destroy(), this.game.tweens.removeFrom(this);
                    var s = this.children.length;
                    if (t)
                        for (; s--;) this.children[s].destroy(t);
                    else
                        for (; s--;) this.removeChild(this.children[s]);
                    this._crop && (this._crop = null, this.cropRect = null), this._frame && (this._frame = null), i.Video && this.key instanceof i.Video && this.key.onChangeSource.remove(this.resizeFrame, this), i.BitmapText && this._glyphs && (this._glyphs = []), this.alive = !1, this.exists = !1, this.visible = !1, this.filters = null, this.mask = null, this.game = null, this.data = {}, this.renderable = !1, this.transformCallback && (this.transformCallback = null, this.transformCallbackContext = null), this.hitArea = null, this.parent = null, this.stage = null, this.worldTransform = null, this.filterArea = null, this._bounds = null, this._currentBounds = null, this._mask = null, this._destroyCachedSprite(), e && this.texture.destroy(!0), this.destroyPhase = !1, this.pendingDestroy = !1
                }
            }
        }, i.Events = function(t) {
            this.parent = t
        }, i.Events.prototype = {
            destroy: function() {
                this._parent = null, this._onDestroy && this._onDestroy.dispose(), this._onAddedToGroup && this._onAddedToGroup.dispose(), this._onRemovedFromGroup && this._onRemovedFromGroup.dispose(), this._onRemovedFromWorld && this._onRemovedFromWorld.dispose(), this._onKilled && this._onKilled.dispose(), this._onRevived && this._onRevived.dispose(), this._onEnterBounds && this._onEnterBounds.dispose(), this._onOutOfBounds && this._onOutOfBounds.dispose(), this._onInputOver && this._onInputOver.dispose(), this._onInputOut && this._onInputOut.dispose(), this._onInputDown && this._onInputDown.dispose(), this._onInputUp && this._onInputUp.dispose(), this._onDragStart && this._onDragStart.dispose(), this._onDragUpdate && this._onDragUpdate.dispose(), this._onDragStop && this._onDragStop.dispose(), this._onAnimationStart && this._onAnimationStart.dispose(), this._onAnimationComplete && this._onAnimationComplete.dispose(), this._onAnimationLoop && this._onAnimationLoop.dispose()
            },
            onAddedToGroup: null,
            onRemovedFromGroup: null,
            onRemovedFromWorld: null,
            onDestroy: null,
            onKilled: null,
            onRevived: null,
            onOutOfBounds: null,
            onEnterBounds: null,
            onInputOver: null,
            onInputOut: null,
            onInputDown: null,
            onInputUp: null,
            onDragStart: null,
            onDragUpdate: null,
            onDragStop: null,
            onAnimationStart: null,
            onAnimationComplete: null,
            onAnimationLoop: null
        }, i.Events.prototype.constructor = i.Events;
        for (var a in i.Events.prototype) i.Events.prototype.hasOwnProperty(a) && 0 === a.indexOf("on") && null === i.Events.prototype[a] && function(t, e) {
            "use strict";
            Object.defineProperty(i.Events.prototype, t, {
                get: function() {
                    return this[e] || (this[e] = new i.Signal)
                }
            }), i.Events.prototype[t + "$dispatch"] = function() {
                return this[e] ? this[e].dispatch.apply(this[e], arguments) : null
            }
        }(a, "_" + a);
        i.Component.FixedToCamera = function() {}, i.Component.FixedToCamera.postUpdate = function() {
            this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y)
        }, i.Component.FixedToCamera.prototype = {
            _fixedToCamera: !1,
            fixedToCamera: {
                get: function() {
                    return this._fixedToCamera
                },
                set: function(t) {
                    t ? (this._fixedToCamera = !0, this.cameraOffset.set(this.x, this.y)) : this._fixedToCamera = !1
                }
            },
            cameraOffset: new i.Point
        }, i.Component.Health = function() {}, i.Component.Health.prototype = {
            health: 1,
            maxHealth: 100,
            damage: function(t) {
                return this.alive && (this.health -= t, this.health <= 0 && this.kill()), this
            },
            setHealth: function(t) {
                return this.health = t, this.health > this.maxHealth && (this.health = this.maxHealth), this
            },
            heal: function(t) {
                return this.alive && (this.health += t, this.health > this.maxHealth && (this.health = this.maxHealth)), this
            }
        }, i.Component.InCamera = function() {}, i.Component.InCamera.prototype = {
            inCamera: {
                get: function() {
                    return this.game.world.camera.view.intersects(this._bounds)
                }
            }
        }, i.Component.InputEnabled = function() {}, i.Component.InputEnabled.prototype = {
            input: null,
            inputEnabled: {
                get: function() {
                    return this.input && this.input.enabled
                },
                set: function(t) {
                    t ? null === this.input ? (this.input = new i.InputHandler(this), this.input.start()) : this.input && !this.input.enabled && this.input.start() : this.input && this.input.enabled && this.input.stop()
                }
            }
        }, i.Component.InWorld = function() {}, i.Component.InWorld.preUpdate = function() {
            if (this.autoCull || this.checkWorldBounds) {
                if (this._bounds.copyFrom(this.getBounds()), this._bounds.x += this.game.camera.view.x, this._bounds.y += this.game.camera.view.y, this.autoCull)
                    if (this.game.world.camera.view.intersects(this._bounds)) this.renderable = !0, this.game.world.camera.totalInView++;
                    else if (this.renderable = !1, this.outOfCameraBoundsKill) return this.kill(), !1;
                if (this.checkWorldBounds)
                    if (this._outOfBoundsFired && this.game.world.bounds.intersects(this._bounds)) this._outOfBoundsFired = !1, this.events.onEnterBounds$dispatch(this);
                    else if (!this._outOfBoundsFired && !this.game.world.bounds.intersects(this._bounds) && (this._outOfBoundsFired = !0, this.events.onOutOfBounds$dispatch(this), this.outOfBoundsKill)) return this.kill(), !1
            }
            return !0
        }, i.Component.InWorld.prototype = {
            checkWorldBounds: !1,
            outOfBoundsKill: !1,
            outOfCameraBoundsKill: !1,
            _outOfBoundsFired: !1,
            inWorld: {
                get: function() {
                    return this.game.world.bounds.intersects(this.getBounds())
                }
            }
        }, i.Component.LifeSpan = function() {}, i.Component.LifeSpan.preUpdate = function() {
            return !(this.lifespan > 0 && (this.lifespan -= this.game.time.physicsElapsedMS, this.lifespan <= 0)) || (this.kill(), !1)
        }, i.Component.LifeSpan.prototype = {
            alive: !0,
            lifespan: 0,
            revive: function(t) {
                return void 0 === t && (t = 100), this.alive = !0, this.exists = !0, this.visible = !0, "function" == typeof this.setHealth && this.setHealth(t), this.events && this.events.onRevived$dispatch(this), this
            },
            kill: function() {
                return this.alive = !1, this.exists = !1, this.visible = !1, this.events && this.events.onKilled$dispatch(this), this
            }
        }, i.Component.LoadTexture = function() {}, i.Component.LoadTexture.prototype = {
            customRender: !1,
            _frame: null,
            loadTexture: function(t, e, s) {
                t === i.PENDING_ATLAS ? (t = e, e = 0) : e = e || 0, (s || void 0 === s) && this.animations && this.animations.stop(), this.key = t, this.customRender = !1;
                var n = this.game.cache,
                    a = !0,
                    o = !this.texture.baseTexture.scaleMode;
                if (i.RenderTexture && t instanceof i.RenderTexture) this.key = t.key, this.setTexture(t);
                else if (i.BitmapData && t instanceof i.BitmapData) this.customRender = !0, this.setTexture(t.texture), a = n.hasFrameData(t.key, i.Cache.BITMAPDATA) ? !this.animations.loadFrameData(n.getFrameData(t.key, i.Cache.BITMAPDATA), e) : !this.animations.loadFrameData(t.frameData, 0);
                else if (i.Video && t instanceof i.Video) {
                    this.customRender = !0;
                    var r = t.texture.valid;
                    this.setTexture(t.texture), this.setFrame(t.texture.frame.clone()), t.onChangeSource.add(this.resizeFrame, this), this.texture.valid = r
                } else if (i.Tilemap && t instanceof i.TilemapLayer) this.setTexture(PIXI.Texture.fromCanvas(t.canvas));
                else if (t instanceof PIXI.Texture) this.setTexture(t);
                else {
                    var h = n.getImage(t, !0);
                    this.key = h.key, this.setTexture(new PIXI.Texture(h.base)), this.texture.baseTexture.skipRender = "__default" === t, a = !this.animations.loadFrameData(h.frameData, e)
                }
                a && (this._frame = i.Rectangle.clone(this.texture.frame)), o || (this.texture.baseTexture.scaleMode = 1)
            },
            setFrame: function(t) {
                this._frame = t, this.texture.frame.x = t.x, this.texture.frame.y = t.y, this.texture.frame.width = t.width, this.texture.frame.height = t.height, this.texture.crop.x = t.x, this.texture.crop.y = t.y, this.texture.crop.width = t.width, this.texture.crop.height = t.height, t.trimmed ? (this.texture.trim ? (this.texture.trim.x = t.spriteSourceSizeX, this.texture.trim.y = t.spriteSourceSizeY, this.texture.trim.width = t.sourceSizeW, this.texture.trim.height = t.sourceSizeH) : this.texture.trim = {
                    x: t.spriteSourceSizeX,
                    y: t.spriteSourceSizeY,
                    width: t.sourceSizeW,
                    height: t.sourceSizeH
                }, this.texture.width = t.sourceSizeW, this.texture.height = t.sourceSizeH, this.texture.frame.width = t.sourceSizeW, this.texture.frame.height = t.sourceSizeH) : !t.trimmed && this.texture.trim && (this.texture.trim = null), this.cropRect && this.updateCrop(), this.texture.requiresReTint = !0, this.texture._updateUvs(), this.tilingTexture && (this.refreshTexture = !0)
            },
            resizeFrame: function(t, e, i) {
                this.texture.frame.resize(e, i), this.texture.setFrame(this.texture.frame)
            },
            resetFrame: function() {
                this._frame && this.setFrame(this._frame)
            },
            frame: {
                get: function() {
                    return this.animations.frame
                },
                set: function(t) {
                    this.animations.frame = t
                }
            },
            frameName: {
                get: function() {
                    return this.animations.frameName
                },
                set: function(t) {
                    this.animations.frameName = t
                }
            }
        }, i.Component.Overlap = function() {}, i.Component.Overlap.prototype = {
            overlap: function(t) {
                return i.Rectangle.intersects(this.getBounds(), t.getBounds())
            }
        }, i.Component.PhysicsBody = function() {}, i.Component.PhysicsBody.preUpdate = function() {
            return this.fresh && this.exists ? (this.world.setTo(this.parent.position.x + this.position.x, this.parent.position.y + this.position.y), this.worldTransform.tx = this.world.x, this.worldTransform.ty = this.world.y, this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, this.body && this.body.preUpdate(), this.fresh = !1, !1) : (this.previousPosition.set(this.world.x, this.world.y), this.previousRotation = this.rotation, !(!this._exists || !this.parent.exists) || (this.renderOrderID = -1, !1))
        }, i.Component.PhysicsBody.postUpdate = function() {
            this.exists && this.body && this.body.postUpdate()
        }, i.Component.PhysicsBody.prototype = {
            body: null,
            x: {
                get: function() {
                    return this.position.x
                },
                set: function(t) {
                    this.position.x = t, this.body && !this.body.dirty && (this.body._reset = !0)
                }
            },
            y: {
                get: function() {
                    return this.position.y
                },
                set: function(t) {
                    this.position.y = t, this.body && !this.body.dirty && (this.body._reset = !0)
                }
            }
        }, i.Component.Reset = function() {}, i.Component.Reset.prototype.reset = function(t, e, i) {
            return void 0 === i && (i = 1), this.world.set(t, e), this.position.set(t, e), this.fresh = !0, this.exists = !0, this.visible = !0, this.renderable = !0, this.components.InWorld && (this._outOfBoundsFired = !1), this.components.LifeSpan && (this.alive = !0, this.health = i), this.components.PhysicsBody && this.body && this.body.reset(t, e, !1, !1), this
        }, i.Component.ScaleMinMax = function() {}, i.Component.ScaleMinMax.prototype = {
            transformCallback: null,
            transformCallbackContext: this,
            scaleMin: null,
            scaleMax: null,
            checkTransform: function(t) {
                this.scaleMin && (t.a < this.scaleMin.x && (t.a = this.scaleMin.x), t.d < this.scaleMin.y && (t.d = this.scaleMin.y)), this.scaleMax && (t.a > this.scaleMax.x && (t.a = this.scaleMax.x), t.d > this.scaleMax.y && (t.d = this.scaleMax.y))
            },
            setScaleMinMax: function(t, e, s, n) {
                void 0 === e ? e = s = n = t : void 0 === s && (s = n = e, e = t), null === t ? this.scaleMin = null : this.scaleMin ? this.scaleMin.set(t, e) : this.scaleMin = new i.Point(t, e), null === s ? this.scaleMax = null : this.scaleMax ? this.scaleMax.set(s, n) : this.scaleMax = new i.Point(s, n), null === this.scaleMin ? this.transformCallback = null : (this.transformCallback = this.checkTransform, this.transformCallbackContext = this)
            }
        }, i.Component.Smoothed = function() {}, i.Component.Smoothed.prototype = {
            smoothed: {
                get: function() {
                    return !this.texture.baseTexture.scaleMode
                },
                set: function(t) {
                    t ? this.texture && (this.texture.baseTexture.scaleMode = 0) : this.texture && (this.texture.baseTexture.scaleMode = 1)
                }
            }
        }, i.GameObjectFactory = function(t) {
            this.game = t, this.world = this.game.world
        }, i.GameObjectFactory.prototype = {
            existing: function(t) {
                return this.world.add(t)
            },
            weapon: function(t, e, s, n) {
                var a = this.game.plugins.add(i.Weapon);
                return a.createBullets(t, e, s, n), a
            },
            image: function(t, e, s, n, a) {
                return void 0 === a && (a = this.world), a.add(new i.Image(this.game, t, e, s, n))
            },
            sprite: function(t, e, i, s, n) {
                return void 0 === n && (n = this.world), n.create(t, e, i, s)
            },
            creature: function(t, e, s, n, a) {
                void 0 === a && (a = this.world);
                var o = new i.Creature(this.game, t, e, s, n);
                return a.add(o), o
            },
            tween: function(t) {
                return this.game.tweens.create(t)
            },
            group: function(t, e, s, n, a) {
                return new i.Group(this.game, t, e, s, n, a)
            },
            physicsGroup: function(t, e, s, n) {
                return new i.Group(this.game, e, s, n, !0, t)
            },
            spriteBatch: function(t, e, s) {
                return void 0 === t && (t = null), void 0 === e && (e = "group"), void 0 === s && (s = !1), new i.SpriteBatch(this.game, t, e, s)
            },
            audio: function(t, e, i, s) {
                return this.game.sound.add(t, e, i, s)
            },
            sound: function(t, e, i, s) {
                return this.game.sound.add(t, e, i, s)
            },
            audioSprite: function(t) {
                return this.game.sound.addSprite(t)
            },
            tileSprite: function(t, e, s, n, a, o, r) {
                return void 0 === r && (r = this.world), r.add(new i.TileSprite(this.game, t, e, s, n, a, o))
            },
            rope: function(t, e, s, n, a, o) {
                return void 0 === o && (o = this.world), o.add(new i.Rope(this.game, t, e, s, n, a))
            },
            text: function(t, e, s, n, a) {
                return void 0 === a && (a = this.world), a.add(new i.Text(this.game, t, e, s, n))
            },
            button: function(t, e, s, n, a, o, r, h, l, c) {
                return void 0 === c && (c = this.world), c.add(new i.Button(this.game, t, e, s, n, a, o, r, h, l))
            },
            graphics: function(t, e, s) {
                return void 0 === s && (s = this.world), s.add(new i.Graphics(this.game, t, e))
            },
            emitter: function(t, e, s) {
                return this.game.particles.add(new i.Particles.Arcade.Emitter(this.game, t, e, s))
            },
            retroFont: function(t, e, s, n, a, o, r, h, l) {
                return new i.RetroFont(this.game, t, e, s, n, a, o, r, h, l)
            },
            bitmapText: function(t, e, s, n, a, o) {
                return void 0 === o && (o = this.world), o.add(new i.BitmapText(this.game, t, e, s, n, a))
            },
            tilemap: function(t, e, s, n, a) {
                return new i.Tilemap(this.game, t, e, s, n, a)
            },
            renderTexture: function(t, e, s, n) {
                void 0 !== s && "" !== s || (s = this.game.rnd.uuid()), void 0 === n && (n = !1);
                var a = new i.RenderTexture(this.game, t, e, s);
                return n && this.game.cache.addRenderTexture(s, a), a
            },
            video: function(t, e) {
                return new i.Video(this.game, t, e)
            },
            bitmapData: function(t, e, s, n) {
                void 0 === n && (n = !1), void 0 !== s && "" !== s || (s = this.game.rnd.uuid());
                var a = new i.BitmapData(this.game, s, t, e);
                return n && this.game.cache.addBitmapData(s, a), a
            },
            filter: function(t) {
                var e = Array.prototype.slice.call(arguments, 1);
                return (t = new i.Filter[t](this.game)).init.apply(t, e), t
            },
            plugin: function(t) {
                return this.game.plugins.add(t)
            }
        }, i.GameObjectFactory.prototype.constructor = i.GameObjectFactory, i.GameObjectCreator = function(t) {
            this.game = t, this.world = this.game.world
        }, i.GameObjectCreator.prototype = {
            image: function(t, e, s, n) {
                return new i.Image(this.game, t, e, s, n)
            },
            sprite: function(t, e, s, n) {
                return new i.Sprite(this.game, t, e, s, n)
            },
            tween: function(t) {
                return new i.Tween(t, this.game, this.game.tweens)
            },
            group: function(t, e, s, n, a) {
                return new i.Group(this.game, t, e, s, n, a)
            },
            spriteBatch: function(t, e, s) {
                return void 0 === e && (e = "group"), void 0 === s && (s = !1), new i.SpriteBatch(this.game, t, e, s)
            },
            audio: function(t, e, i, s) {
                return this.game.sound.add(t, e, i, s)
            },
            audioSprite: function(t) {
                return this.game.sound.addSprite(t)
            },
            sound: function(t, e, i, s) {
                return this.game.sound.add(t, e, i, s)
            },
            tileSprite: function(t, e, s, n, a, o) {
                return new i.TileSprite(this.game, t, e, s, n, a, o)
            },
            rope: function(t, e, s, n, a) {
                return new i.Rope(this.game, t, e, s, n, a)
            },
            text: function(t, e, s, n) {
                return new i.Text(this.game, t, e, s, n)
            },
            button: function(t, e, s, n, a, o, r, h, l) {
                return new i.Button(this.game, t, e, s, n, a, o, r, h, l)
            },
            graphics: function(t, e) {
                return new i.Graphics(this.game, t, e)
            },
            emitter: function(t, e, s) {
                return new i.Particles.Arcade.Emitter(this.game, t, e, s)
            },
            retroFont: function(t, e, s, n, a, o, r, h, l) {
                return new i.RetroFont(this.game, t, e, s, n, a, o, r, h, l)
            },
            bitmapText: function(t, e, s, n, a, o) {
                return new i.BitmapText(this.game, t, e, s, n, a, o)
            },
            tilemap: function(t, e, s, n, a) {
                return new i.Tilemap(this.game, t, e, s, n, a)
            },
            renderTexture: function(t, e, s, n) {
                void 0 !== s && "" !== s || (s = this.game.rnd.uuid()), void 0 === n && (n = !1);
                var a = new i.RenderTexture(this.game, t, e, s);
                return n && this.game.cache.addRenderTexture(s, a), a
            },
            bitmapData: function(t, e, s, n) {
                void 0 === n && (n = !1), void 0 !== s && "" !== s || (s = this.game.rnd.uuid());
                var a = new i.BitmapData(this.game, s, t, e);
                return n && this.game.cache.addBitmapData(s, a), a
            },
            filter: function(t) {
                var e = Array.prototype.slice.call(arguments, 1);
                return (t = new i.Filter[t](this.game)).init.apply(t, e), t
            }
        }, i.GameObjectCreator.prototype.constructor = i.GameObjectCreator, i.Sprite = function(t, e, s, n, a) {
            e = e || 0, s = s || 0, n = n || null, a = a || null, this.type = i.SPRITE, this.physicsType = i.SPRITE, PIXI.Sprite.call(this, i.Cache.DEFAULT), i.Component.Core.init.call(this, t, e, s, n, a)
        }, i.Sprite.prototype = Object.create(PIXI.Sprite.prototype), i.Sprite.prototype.constructor = i.Sprite, i.Component.Core.install.call(i.Sprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "Health", "InCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]), i.Sprite.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.Sprite.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.Sprite.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Sprite.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Sprite.prototype.preUpdate = function() {
            return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
        }, i.Image = function(t, e, s, n, a) {
            e = e || 0, s = s || 0, n = n || null, a = a || null, this.type = i.IMAGE, PIXI.Sprite.call(this, i.Cache.DEFAULT), i.Component.Core.init.call(this, t, e, s, n, a)
        }, i.Image.prototype = Object.create(PIXI.Sprite.prototype), i.Image.prototype.constructor = i.Image, i.Component.Core.install.call(i.Image.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Destroy", "FixedToCamera", "InputEnabled", "LifeSpan", "LoadTexture", "Overlap", "Reset", "ScaleMinMax", "Smoothed"]), i.Image.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Image.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Image.prototype.preUpdate = function() {
            return !!this.preUpdateInWorld() && this.preUpdateCore()
        }, i.Button = function(t, e, s, n, a, o, r, h, l, c) {
            e = e || 0, s = s || 0, n = n || null, a = a || null, o = o || this, i.Image.call(this, t, e, s, n, h), this.type = i.BUTTON, this.physicsType = i.SPRITE, this._onOverFrame = null, this._onOutFrame = null, this._onDownFrame = null, this._onUpFrame = null, this.onOverSound = null, this.onOutSound = null, this.onDownSound = null, this.onUpSound = null, this.onOverSoundMarker = "", this.onOutSoundMarker = "", this.onDownSoundMarker = "", this.onUpSoundMarker = "", this.onInputOver = new i.Signal, this.onInputOut = new i.Signal, this.onInputDown = new i.Signal, this.onInputUp = new i.Signal, this.onOverMouseOnly = !0, this.justReleasedPreventsOver = i.PointerMode.TOUCH, this.freezeFrames = !1, this.forceOut = !1, this.inputEnabled = !0, this.input.start(0, !0), this.input.useHandCursor = !0, this.setFrames(r, h, l, c), null !== a && this.onInputUp.add(a, o), this.events.onInputOver.add(this.onInputOverHandler, this), this.events.onInputOut.add(this.onInputOutHandler, this), this.events.onInputDown.add(this.onInputDownHandler, this), this.events.onInputUp.add(this.onInputUpHandler, this), this.events.onRemovedFromWorld.add(this.removedFromWorld, this)
        }, i.Button.prototype = Object.create(i.Image.prototype), i.Button.prototype.constructor = i.Button;
        i.Button.prototype.clearFrames = function() {
            this.setFrames(null, null, null, null)
        }, i.Button.prototype.removedFromWorld = function() {
            this.inputEnabled = !1
        }, i.Button.prototype.setStateFrame = function(t, e, i) {
            var s = "_on" + t + "Frame";
            null !== e ? (this[s] = e, i && this.changeStateFrame(t)) : this[s] = null
        }, i.Button.prototype.changeStateFrame = function(t) {
            if (this.freezeFrames) return !1;
            var e = this["_on" + t + "Frame"];
            return "string" == typeof e ? (this.frameName = e, !0) : "number" == typeof e && (this.frame = e, !0)
        }, i.Button.prototype.setFrames = function(t, e, i, s) {
            this.setStateFrame("Over", t, this.input.pointerOver()), this.setStateFrame("Out", e, !this.input.pointerOver()), this.setStateFrame("Down", i, this.input.pointerDown()), this.setStateFrame("Up", s, this.input.pointerUp())
        }, i.Button.prototype.setStateSound = function(t, e, s) {
            var n = "on" + t + "Sound",
                a = "on" + t + "SoundMarker";
            e instanceof i.Sound || e instanceof i.AudioSprite ? (this[n] = e, this[a] = "string" == typeof s ? s : "") : (this[n] = null, this[a] = "")
        }, i.Button.prototype.playStateSound = function(t) {
            var e = this["on" + t + "Sound"];
            if (e) {
                var i = this["on" + t + "SoundMarker"];
                return e.play(i), !0
            }
            return !1
        }, i.Button.prototype.setSounds = function(t, e, i, s, n, a, o, r) {
            this.setStateSound("Over", t, e), this.setStateSound("Out", n, a), this.setStateSound("Down", i, s), this.setStateSound("Up", o, r)
        }, i.Button.prototype.setOverSound = function(t, e) {
            this.setStateSound("Over", t, e)
        }, i.Button.prototype.setOutSound = function(t, e) {
            this.setStateSound("Out", t, e)
        }, i.Button.prototype.setDownSound = function(t, e) {
            this.setStateSound("Down", t, e)
        }, i.Button.prototype.setUpSound = function(t, e) {
            this.setStateSound("Up", t, e)
        }, i.Button.prototype.onInputOverHandler = function(t, e) {
            e.justReleased() && (this.justReleasedPreventsOver & e.pointerMode) === e.pointerMode || (this.changeStateFrame("Over"), this.onOverMouseOnly && !e.isMouse || (this.playStateSound("Over"), this.onInputOver && this.onInputOver.dispatch(this, e)))
        }, i.Button.prototype.onInputOutHandler = function(t, e) {
            this.changeStateFrame("Out"), this.playStateSound("Out"), this.onInputOut && this.onInputOut.dispatch(this, e)
        }, i.Button.prototype.onInputDownHandler = function(t, e) {
            this.changeStateFrame("Down"), this.playStateSound("Down"), this.onInputDown && this.onInputDown.dispatch(this, e)
        }, i.Button.prototype.onInputUpHandler = function(t, e, i) {
            this.playStateSound("Up"), this.onInputUp && this.onInputUp.dispatch(this, e, i), this.freezeFrames || (!0 === this.forceOut || (this.forceOut & e.pointerMode) === e.pointerMode ? this.changeStateFrame("Out") : this.changeStateFrame("Up") || (i ? this.changeStateFrame("Over") : this.changeStateFrame("Out")))
        }, i.SpriteBatch = function(t, e, s, n) {
            void 0 !== e && null !== e || (e = t.world), PIXI.SpriteBatch.call(this), i.Group.call(this, t, e, s, n), this.type = i.SPRITEBATCH
        }, i.SpriteBatch.prototype = i.Utils.extend(!0, i.SpriteBatch.prototype, PIXI.SpriteBatch.prototype, i.Group.prototype), i.SpriteBatch.prototype.constructor = i.SpriteBatch, i.BitmapData = function(t, e, s, n, a) {
            void 0 !== s && 0 !== s || (s = 256), void 0 !== n && 0 !== n || (n = 256), void 0 === a && (a = !1), this.game = t, this.key = e, this.width = s, this.height = n, this.canvas = i.Canvas.create(this, s, n, null, a), this.context = this.canvas.getContext("2d", {
                alpha: !0
            }), this.ctx = this.context, this.smoothProperty = t.renderType === i.CANVAS ? t.renderer.renderSession.smoothProperty : i.Canvas.getSmoothingPrefix(this.context), this.imageData = this.context.getImageData(0, 0, s, n), this.data = null, this.imageData && (this.data = this.imageData.data), this.pixels = null, this.data && (this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data), this.baseTexture = new PIXI.BaseTexture(this.canvas), this.texture = new PIXI.Texture(this.baseTexture), this.frameData = new i.FrameData, this.textureFrame = this.frameData.addFrame(new i.Frame(0, 0, 0, s, n, "bitmapData")), this.texture.frame = this.textureFrame, this.type = i.BITMAPDATA, this.disableTextureUpload = !1, this.dirty = !1, this.cls = this.clear, this._image = null, this._pos = new i.Point, this._size = new i.Point, this._scale = new i.Point, this._rotate = 0, this._alpha = {
                prev: 1,
                current: 1
            }, this._anchor = new i.Point, this._tempR = 0, this._tempG = 0, this._tempB = 0, this._circle = new i.Circle, this._swapCanvas = void 0
        }, i.BitmapData.prototype = {
            move: function(t, e, i) {
                return 0 !== t && this.moveH(t, i), 0 !== e && this.moveV(e, i), this
            },
            moveH: function(t, e) {
                void 0 === e && (e = !0), void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height));
                var i = this._swapCanvas.getContext("2d"),
                    s = this.height,
                    n = this.canvas;
                if (i.clearRect(0, 0, this.width, this.height), t < 0) {
                    t = Math.abs(t);
                    a = this.width - t;
                    e && i.drawImage(n, 0, 0, t, s, a, 0, t, s), i.drawImage(n, t, 0, a, s, 0, 0, a, s)
                } else {
                    var a = this.width - t;
                    e && i.drawImage(n, a, 0, t, s, 0, 0, t, s), i.drawImage(n, 0, 0, a, s, t, 0, a, s)
                }
                return this.clear(), this.copy(this._swapCanvas)
            },
            moveV: function(t, e) {
                void 0 === e && (e = !0), void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height));
                var i = this._swapCanvas.getContext("2d"),
                    s = this.width,
                    n = this.canvas;
                if (i.clearRect(0, 0, this.width, this.height), t < 0) {
                    t = Math.abs(t);
                    a = this.height - t;
                    e && i.drawImage(n, 0, 0, s, t, 0, a, s, t), i.drawImage(n, 0, t, s, a, 0, 0, s, a)
                } else {
                    var a = this.height - t;
                    e && i.drawImage(n, 0, a, s, t, 0, 0, s, t), i.drawImage(n, 0, 0, s, a, 0, t, s, a)
                }
                return this.clear(), this.copy(this._swapCanvas)
            },
            add: function(t) {
                if (Array.isArray(t))
                    for (var e = 0; e < t.length; e++) t[e].loadTexture && t[e].loadTexture(this);
                else t.loadTexture(this);
                return this
            },
            load: function(t) {
                if ("string" == typeof t && (t = this.game.cache.getImage(t)), t) return this.resize(t.width, t.height), this.cls(), this.draw(t), this.update(), this
            },
            clear: function(t, e, i, s) {
                return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = this.width), void 0 === s && (s = this.height), this.context.clearRect(t, e, i, s), this.dirty = !0, this
            },
            fill: function(t, e, i, s) {
                return void 0 === s && (s = 1), this.context.fillStyle = "rgba(" + t + "," + e + "," + i + "," + s + ")", this.context.fillRect(0, 0, this.width, this.height), this.dirty = !0, this
            },
            generateTexture: function(t) {
                var e = new Image;
                e.src = this.canvas.toDataURL("image/png");
                var i = this.game.cache.addImage(t, "", e);
                return new PIXI.Texture(i.base)
            },
            resize: function(t, e) {
                return t === this.width && e === this.height || (this.width = t, this.height = e, this.canvas.width = t, this.canvas.height = e, void 0 !== this._swapCanvas && (this._swapCanvas.width = t, this._swapCanvas.height = e), this.baseTexture.width = t, this.baseTexture.height = e, this.textureFrame.width = t, this.textureFrame.height = e, this.texture.width = t, this.texture.height = e, this.texture.crop.width = t, this.texture.crop.height = e, this.update(), this.dirty = !0), this
            },
            update: function(t, e, i, s) {
                return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = Math.max(1, this.width)), void 0 === s && (s = Math.max(1, this.height)), this.imageData = this.context.getImageData(t, e, i, s), this.data = this.imageData.data, this.imageData.data.buffer ? (this.buffer = this.imageData.data.buffer, this.pixels = new Uint32Array(this.buffer)) : window.ArrayBuffer ? (this.buffer = new ArrayBuffer(this.imageData.data.length), this.pixels = new Uint32Array(this.buffer)) : this.pixels = this.imageData.data, this
            },
            processPixelRGB: function(t, e, s, n, a, o) {
                void 0 === s && (s = 0), void 0 === n && (n = 0), void 0 === a && (a = this.width), void 0 === o && (o = this.height);
                for (var r = s + a, h = n + o, l = i.Color.createColor(), c = {
                    r: 0,
                    g: 0,
                    b: 0,
                    a: 0
                }, u = !1, d = n; d < h; d++)
                    for (var p = s; p < r; p++) i.Color.unpackPixel(this.getPixel32(p, d), l), !1 !== (c = t.call(e, l, p, d)) && null !== c && void 0 !== c && (this.setPixel32(p, d, c.r, c.g, c.b, c.a, !1), u = !0);
                return u && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0), this
            },
            processPixel: function(t, e, i, s, n, a) {
                void 0 === i && (i = 0), void 0 === s && (s = 0), void 0 === n && (n = this.width), void 0 === a && (a = this.height);
                for (var o = i + n, r = s + a, h = 0, l = 0, c = !1, u = s; u < r; u++)
                    for (var d = i; d < o; d++) h = this.getPixel32(d, u), (l = t.call(e, h, d, u)) !== h && (this.pixels[u * this.width + d] = l, c = !0);
                return c && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0), this
            },
            replaceRGB: function(t, e, s, n, a, o, r, h, l) {
                var c = 0,
                    u = 0,
                    d = this.width,
                    p = this.height,
                    m = i.Color.packPixel(t, e, s, n);
                void 0 !== l && l instanceof i.Rectangle && (c = l.x, u = l.y, d = l.width, p = l.height);
                for (var g = 0; g < p; g++)
                    for (var f = 0; f < d; f++) this.getPixel32(c + f, u + g) === m && this.setPixel32(c + f, u + g, a, o, r, h, !1);
                return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this
            },
            setHSL: function(t, e, s, n) {
                var a = t || 0 === t,
                    o = e || 0 === e,
                    r = s || 0 === s;
                if (a || o || r) {
                    void 0 === n && (n = new i.Rectangle(0, 0, this.width, this.height));
                    for (var h = i.Color.createColor(), l = n.y; l < n.bottom; l++)
                        for (var c = n.x; c < n.right; c++) i.Color.unpackPixel(this.getPixel32(c, l), h, !0), a && (h.h = t), o && (h.s = e), r && (h.l = s), i.Color.HSLtoRGB(h.h, h.s, h.l, h), this.setPixel32(c, l, h.r, h.g, h.b, h.a, !1);
                    return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this
                }
            },
            shiftHSL: function(t, e, s, n) {
                if (void 0 !== t && null !== t || (t = !1), void 0 !== e && null !== e || (e = !1), void 0 !== s && null !== s || (s = !1), t || e || s) {
                    void 0 === n && (n = new i.Rectangle(0, 0, this.width, this.height));
                    for (var a = i.Color.createColor(), o = n.y; o < n.bottom; o++)
                        for (var r = n.x; r < n.right; r++) i.Color.unpackPixel(this.getPixel32(r, o), a, !0), t && (a.h = this.game.math.wrap(a.h + t, 0, 1)), e && (a.s = this.game.math.clamp(a.s + e, 0, 1)), s && (a.l = this.game.math.clamp(a.l + s, 0, 1)), i.Color.HSLtoRGB(a.h, a.s, a.l, a), this.setPixel32(r, o, a.r, a.g, a.b, a.a, !1);
                    return this.context.putImageData(this.imageData, 0, 0), this.dirty = !0, this
                }
            },
            setPixel32: function(t, e, s, n, a, o, r) {
                return void 0 === r && (r = !0), t >= 0 && t <= this.width && e >= 0 && e <= this.height && (i.Device.LITTLE_ENDIAN ? this.pixels[e * this.width + t] = o << 24 | a << 16 | n << 8 | s : this.pixels[e * this.width + t] = s << 24 | n << 16 | a << 8 | o, r && (this.context.putImageData(this.imageData, 0, 0), this.dirty = !0)), this
            },
            setPixel: function(t, e, i, s, n, a) {
                return this.setPixel32(t, e, i, s, n, 255, a)
            },
            getPixel: function(t, e, s) {
                s || (s = i.Color.createColor());
                var n = ~~(t + e * this.width);
                return n *= 4, s.r = this.data[n], s.g = this.data[++n], s.b = this.data[++n], s.a = this.data[++n], s
            },
            getPixel32: function(t, e) {
                if (t >= 0 && t <= this.width && e >= 0 && e <= this.height) return this.pixels[e * this.width + t]
            },
            getPixelRGB: function(t, e, s, n, a) {
                return i.Color.unpackPixel(this.getPixel32(t, e), s, n, a)
            },
            getPixels: function(t) {
                return this.context.getImageData(t.x, t.y, t.width, t.height)
            },
            getFirstPixel: function(t) {
                void 0 === t && (t = 0);
                var e = i.Color.createColor(),
                    s = 0,
                    n = 0,
                    a = 1,
                    o = !1;
                1 === t ? (a = -1, n = this.height) : 3 === t && (a = -1, s = this.width);
                do {
                    i.Color.unpackPixel(this.getPixel32(s, n), e), 0 === t || 1 === t ? ++s === this.width && (s = 0, ((n += a) >= this.height || n <= 0) && (o = !0)) : 2 !== t && 3 !== t || ++n === this.height && (n = 0, ((s += a) >= this.width || s <= 0) && (o = !0))
                } while (0 === e.a && !o);
                return e.x = s, e.y = n, e
            },
            getBounds: function(t) {
                return void 0 === t && (t = new i.Rectangle), t.x = this.getFirstPixel(2).x, t.x === this.width ? t.setTo(0, 0, 0, 0) : (t.y = this.getFirstPixel(0).y, t.width = this.getFirstPixel(3).x - t.x + 1, t.height = this.getFirstPixel(1).y - t.y + 1, t)
            },
            addToWorld: function(t, e, i, s, n, a) {
                n = n || 1, a = a || 1;
                var o = this.game.add.image(t, e, this);
                return o.anchor.set(i, s), o.scale.set(n, a), o
            },
            copy: function(t, e, s, n, a, o, r, h, l, c, u, d, p, m, g, f, _) {
                if (void 0 !== t && null !== t || (t = this), (t instanceof i.RenderTexture || t instanceof PIXI.RenderTexture) && (t = t.getCanvas()), this._image = t, t instanceof i.Sprite || t instanceof i.Image || t instanceof i.Text || t instanceof PIXI.Sprite) this._pos.set(t.texture.crop.x, t.texture.crop.y), this._size.set(t.texture.crop.width, t.texture.crop.height), this._scale.set(t.scale.x, t.scale.y), this._anchor.set(t.anchor.x, t.anchor.y), this._rotate = t.rotation, this._alpha.current = t.alpha, t.texture instanceof i.RenderTexture || t.texture instanceof PIXI.RenderTexture ? this._image = t.texture.getCanvas() : this._image = t.texture.baseTexture.source, void 0 !== o && null !== o || (o = t.x), void 0 !== r && null !== r || (r = t.y), t.texture.trim && (o += t.texture.trim.x - t.anchor.x * t.texture.trim.width, r += t.texture.trim.y - t.anchor.y * t.texture.trim.height), 16777215 !== t.tint && (t.cachedTint !== t.tint && (t.cachedTint = t.tint, t.tintedTexture = PIXI.CanvasTinter.getTintedTexture(t, t.tint)), this._image = t.tintedTexture, this._pos.set(0));
                else {
                    if (this._pos.set(0), this._scale.set(1), this._anchor.set(0), this._rotate = 0, this._alpha.current = 1, t instanceof i.BitmapData) this._image = t.canvas;
                    else if ("string" == typeof t) {
                        if (null === (t = this.game.cache.getImage(t))) return;
                        this._image = t
                    }
                    this._size.set(this._image.width, this._image.height)
                } if (void 0 !== e && null !== e || (e = 0), void 0 !== s && null !== s || (s = 0), n && (this._size.x = n), a && (this._size.y = a), void 0 !== o && null !== o || (o = e), void 0 !== r && null !== r || (r = s), void 0 !== h && null !== h || (h = this._size.x), void 0 !== l && null !== l || (l = this._size.y), "number" == typeof c && (this._rotate = c), "number" == typeof u && (this._anchor.x = u), "number" == typeof d && (this._anchor.y = d), "number" == typeof p && (this._scale.x = p), "number" == typeof m && (this._scale.y = m), "number" == typeof g && (this._alpha.current = g), void 0 === f && (f = null), void 0 === _ && (_ = !1), !(this._alpha.current <= 0 || 0 === this._scale.x || 0 === this._scale.y || 0 === this._size.x || 0 === this._size.y)) {
                    var y = this.context;
                    return this._alpha.prev = y.globalAlpha, y.save(), y.globalAlpha = this._alpha.current, f && (this.op = f), _ && (o |= 0, r |= 0), y.translate(o, r), y.scale(this._scale.x, this._scale.y), y.rotate(this._rotate), y.drawImage(this._image, this._pos.x + e, this._pos.y + s, this._size.x, this._size.y, -h * this._anchor.x, -l * this._anchor.y, h, l), y.restore(), y.globalAlpha = this._alpha.prev, this.dirty = !0, this
                }
            },
            copyTransform: function(t, e, s) {
                if (void 0 === e && (e = null), void 0 === s && (s = !1), !t.hasOwnProperty("worldTransform") || !t.worldVisible || 0 === t.worldAlpha) return this;
                var n = t.worldTransform;
                if (this._pos.set(t.texture.crop.x, t.texture.crop.y), this._size.set(t.texture.crop.width, t.texture.crop.height), 0 === n.a || 0 === n.d || 0 === this._size.x || 0 === this._size.y) return this;
                t.texture instanceof i.RenderTexture || t.texture instanceof PIXI.RenderTexture ? this._image = t.texture.getCanvas() : this._image = t.texture.baseTexture.source;
                var a = n.tx,
                    o = n.ty;
                t.texture.trim && (a += t.texture.trim.x - t.anchor.x * t.texture.trim.width, o += t.texture.trim.y - t.anchor.y * t.texture.trim.height), 16777215 !== t.tint && (t.cachedTint !== t.tint && (t.cachedTint = t.tint, t.tintedTexture = PIXI.CanvasTinter.getTintedTexture(t, t.tint)), this._image = t.tintedTexture, this._pos.set(0)), s && (a |= 0, o |= 0);
                var r = this.context;
                return this._alpha.prev = r.globalAlpha, r.save(), r.globalAlpha = this._alpha.current, e && (this.op = e), r[this.smoothProperty] = t.texture.baseTexture.scaleMode === PIXI.scaleModes.LINEAR, r.setTransform(n.a, n.b, n.c, n.d, a, o), r.drawImage(this._image, this._pos.x, this._pos.y, this._size.x, this._size.y, -this._size.x * t.anchor.x, -this._size.y * t.anchor.y, this._size.x, this._size.y), r.restore(), r.globalAlpha = this._alpha.prev, this.dirty = !0, this
            },
            copyRect: function(t, e, i, s, n, a, o) {
                return this.copy(t, e.x, e.y, e.width, e.height, i, s, e.width, e.height, 0, 0, 0, 1, 1, n, a, o)
            },
            draw: function(t, e, i, s, n, a, o) {
                return this.copy(t, null, null, null, null, e, i, s, n, null, null, null, null, null, null, a, o)
            },
            drawGroup: function(t, e, i) {
                return t.total > 0 && t.forEachExists(this.drawGroupProxy, this, e, i), this
            },
            drawGroupProxy: function(t, e, s) {
                if (t.hasOwnProperty("texture") && this.copyTransform(t, e, s), t.type === i.GROUP && t.exists) this.drawGroup(t, e, s);
                else if (t.hasOwnProperty("children") && t.children.length > 0)
                    for (var n = 0; n < t.children.length; n++) t.children[n].exists && this.copyTransform(t.children[n], e, s)
            },
            drawFull: function(t, e, s) {
                if (!1 === t.worldVisible || 0 === t.worldAlpha || t.hasOwnProperty("exists") && !1 === t.exists) return this;
                if (t.type !== i.GROUP && t.type !== i.EMITTER && t.type !== i.BITMAPTEXT)
                    if (t.type === i.GRAPHICS) {
                        var n = t.getBounds();
                        this.ctx.save(), this.ctx.translate(n.x, n.y), PIXI.CanvasGraphics.renderGraphics(t, this.ctx), this.ctx.restore()
                    } else this.copy(t, null, null, null, null, t.worldPosition.x, t.worldPosition.y, null, null, t.worldRotation, null, null, t.worldScale.x, t.worldScale.y, t.worldAlpha, e, s);
                if (t.children)
                    for (var a = 0; a < t.children.length; a++) this.drawFull(t.children[a], e, s);
                return this
            },
            shadow: function(t, e, i, s) {
                var n = this.context;
                return void 0 === t || null === t ? n.shadowColor = "rgba(0,0,0,0)" : (n.shadowColor = t, n.shadowBlur = e || 5, n.shadowOffsetX = i || 10, n.shadowOffsetY = s || 10), this
            },
            alphaMask: function(t, e, i, s) {
                return void 0 === s || null === s ? this.draw(e).blendSourceAtop() : this.draw(e, s.x, s.y, s.width, s.height).blendSourceAtop(), void 0 === i || null === i ? this.draw(t).blendReset() : this.draw(t, i.x, i.y, i.width, i.height).blendReset(), this
            },
            extract: function(t, e, i, s, n, a, o, r, h) {
                return void 0 === n && (n = 255), void 0 === a && (a = !1), void 0 === o && (o = e), void 0 === r && (r = i), void 0 === h && (h = s), a && t.resize(this.width, this.height), this.processPixelRGB(function(a, l, c) {
                    return a.r === e && a.g === i && a.b === s && t.setPixel32(l, c, o, r, h, n, !1), !1
                }, this), t.context.putImageData(t.imageData, 0, 0), t.dirty = !0, t
            },
            rect: function(t, e, i, s, n) {
                return void 0 !== n && (this.context.fillStyle = n), this.context.fillRect(t, e, i, s), this
            },
            text: function(t, e, i, s, n, a) {
                void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === s && (s = "14px Courier"), void 0 === n && (n = "rgb(255,255,255)"), void 0 === a && (a = !0);
                var o = this.context,
                    r = o.font;
                return o.font = s, a && (o.fillStyle = "rgb(0,0,0)", o.fillText(t, e + 1, i + 1)), o.fillStyle = n, o.fillText(t, e, i), o.font = r, this
            },
            circle: function(t, e, i, s) {
                var n = this.context;
                return void 0 !== s && (n.fillStyle = s), n.beginPath(), n.arc(t, e, i, 0, 2 * Math.PI, !1), n.closePath(), n.fill(), this
            },
            line: function(t, e, i, s, n, a) {
                void 0 === n && (n = "#fff"), void 0 === a && (a = 1);
                var o = this.context;
                return o.beginPath(), o.moveTo(t, e), o.lineTo(i, s), o.lineWidth = a, o.strokeStyle = n, o.stroke(), o.closePath(), this
            },
            textureLine: function(t, e, s) {
                if (void 0 === s && (s = "repeat-x"), "string" != typeof e || (e = this.game.cache.getImage(e))) {
                    var n = t.length;
                    "no-repeat" === s && n > e.width && (n = e.width);
                    var a = this.context;
                    return a.fillStyle = a.createPattern(e, s), this._circle = new i.Circle(t.start.x, t.start.y, e.height), this._circle.circumferencePoint(t.angle - 1.5707963267948966, !1, this._pos), a.save(), a.translate(this._pos.x, this._pos.y), a.rotate(t.angle), a.fillRect(0, 0, n, e.height), a.restore(), this.dirty = !0, this
                }
            },
            render: function() {
                return !this.disableTextureUpload && this.dirty && (this.baseTexture.dirty(), this.dirty = !1), this
            },
            destroy: function() {
                this.frameData.destroy(), this.texture.destroy(!0), PIXI.CanvasPool.remove(this)
            },
            blendReset: function() {
                return this.op = "source-over", this
            },
            blendSourceOver: function() {
                return this.op = "source-over", this
            },
            blendSourceIn: function() {
                return this.op = "source-in", this
            },
            blendSourceOut: function() {
                return this.op = "source-out", this
            },
            blendSourceAtop: function() {
                return this.op = "source-atop", this
            },
            blendDestinationOver: function() {
                return this.op = "destination-over", this
            },
            blendDestinationIn: function() {
                return this.op = "destination-in", this
            },
            blendDestinationOut: function() {
                return this.op = "destination-out", this
            },
            blendDestinationAtop: function() {
                return this.op = "destination-atop", this
            },
            blendXor: function() {
                return this.op = "xor", this
            },
            blendAdd: function() {
                return this.op = "lighter", this
            },
            blendMultiply: function() {
                return this.op = "multiply", this
            },
            blendScreen: function() {
                return this.op = "screen", this
            },
            blendOverlay: function() {
                return this.op = "overlay", this
            },
            blendDarken: function() {
                return this.op = "darken", this
            },
            blendLighten: function() {
                return this.op = "lighten", this
            },
            blendColorDodge: function() {
                return this.op = "color-dodge", this
            },
            blendColorBurn: function() {
                return this.op = "color-burn", this
            },
            blendHardLight: function() {
                return this.op = "hard-light", this
            },
            blendSoftLight: function() {
                return this.op = "soft-light", this
            },
            blendDifference: function() {
                return this.op = "difference", this
            },
            blendExclusion: function() {
                return this.op = "exclusion", this
            },
            blendHue: function() {
                return this.op = "hue", this
            },
            blendSaturation: function() {
                return this.op = "saturation", this
            },
            blendColor: function() {
                return this.op = "color", this
            },
            blendLuminosity: function() {
                return this.op = "luminosity", this
            }
        }, Object.defineProperty(i.BitmapData.prototype, "smoothed", {
            get: function() {
                i.Canvas.getSmoothingEnabled(this.context)
            },
            set: function(t) {
                i.Canvas.setSmoothingEnabled(this.context, t)
            }
        }), Object.defineProperty(i.BitmapData.prototype, "op", {
            get: function() {
                return this.context.globalCompositeOperation
            },
            set: function(t) {
                this.context.globalCompositeOperation = t
            }
        }), i.BitmapData.getTransform = function(t, e, i, s, n, a) {
            return "number" != typeof t && (t = 0), "number" != typeof e && (e = 0), "number" != typeof i && (i = 1), "number" != typeof s && (s = 1), "number" != typeof n && (n = 0), "number" != typeof a && (a = 0), {
                sx: i,
                sy: s,
                scaleX: i,
                scaleY: s,
                skewX: n,
                skewY: a,
                translateX: t,
                translateY: e,
                tx: t,
                ty: e
            }
        }, i.BitmapData.prototype.constructor = i.BitmapData, PIXI.Graphics = function() {
            PIXI.DisplayObjectContainer.call(this), this.renderable = !0, this.fillAlpha = 1, this.lineWidth = 0, this.lineColor = 0, this.graphicsData = [], this.tint = 16777215, this.blendMode = PIXI.blendModes.NORMAL, this.currentPath = null, this._webGL = [], this.isMask = !1, this.boundsPadding = 0, this._localBounds = new PIXI.Rectangle(0, 0, 1, 1), this.dirty = !0, this._boundsDirty = !1, this.webGLDirty = !1, this.cachedSpriteDirty = !1
        }, PIXI.Graphics.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), PIXI.Graphics.prototype.constructor = PIXI.Graphics, PIXI.Graphics.prototype.lineStyle = function(t, e, i) {
            return this.lineWidth = t || 0, this.lineColor = e || 0, this.lineAlpha = void 0 === i ? 1 : i, this.currentPath && (this.currentPath.shape.points.length ? this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2))) : (this.currentPath.lineWidth = this.lineWidth, this.currentPath.lineColor = this.lineColor, this.currentPath.lineAlpha = this.lineAlpha)), this
        }, PIXI.Graphics.prototype.moveTo = function(t, e) {
            return this.drawShape(new PIXI.Polygon([t, e])), this
        }, PIXI.Graphics.prototype.lineTo = function(t, e) {
            return this.currentPath || this.moveTo(0, 0), this.currentPath.shape.points.push(t, e), this.dirty = !0, this._boundsDirty = !0, this
        }, PIXI.Graphics.prototype.quadraticCurveTo = function(t, e, i, s) {
            this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
            var n, a, o = this.currentPath.shape.points;
            0 === o.length && this.moveTo(0, 0);
            for (var r = o[o.length - 2], h = o[o.length - 1], l = 0, c = 1; c <= 20; ++c) n = r + (t - r) * (l = c / 20), a = h + (e - h) * l, o.push(n + (t + (i - t) * l - n) * l, a + (e + (s - e) * l - a) * l);
            return this.dirty = !0, this._boundsDirty = !0, this
        }, PIXI.Graphics.prototype.bezierCurveTo = function(t, e, i, s, n, a) {
            this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
            for (var o, r, h, l, c, u = this.currentPath.shape.points, d = u[u.length - 2], p = u[u.length - 1], m = 0, g = 1; g <= 20; ++g) h = (r = (o = 1 - (m = g / 20)) * o) * o, c = (l = m * m) * m, u.push(h * d + 3 * r * m * t + 3 * o * l * i + c * n, h * p + 3 * r * m * e + 3 * o * l * s + c * a);
            return this.dirty = !0, this._boundsDirty = !0, this
        }, PIXI.Graphics.prototype.arcTo = function(t, e, i, s, n) {
            this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(t, e) : this.moveTo(t, e);
            var a = this.currentPath.shape.points,
                o = a[a.length - 2],
                r = a[a.length - 1] - e,
                h = o - t,
                l = s - e,
                c = i - t,
                u = Math.abs(r * c - h * l);
            if (u < 1e-8 || 0 === n) a[a.length - 2] === t && a[a.length - 1] === e || a.push(t, e);
            else {
                var d = r * r + h * h,
                    p = l * l + c * c,
                    m = r * l + h * c,
                    g = n * Math.sqrt(d) / u,
                    f = n * Math.sqrt(p) / u,
                    _ = g * m / d,
                    y = f * m / p,
                    v = g * c + f * h,
                    b = g * l + f * r,
                    S = h * (f + _),
                    T = r * (f + _),
                    E = c * (g + y),
                    P = l * (g + y),
                    A = Math.atan2(T - b, S - v),
                    I = Math.atan2(P - b, E - v);
                this.arc(v + t, b + e, n, A, I, h * l > c * r)
            }
            return this.dirty = !0, this._boundsDirty = !0, this
        }, PIXI.Graphics.prototype.arc = function(t, e, i, s, n, a, o) {
            if (s === n) return this;
            void 0 === a && (a = !1), void 0 === o && (o = 40), !a && n <= s ? n += 2 * Math.PI : a && s <= n && (s += 2 * Math.PI);
            var r = a ? -1 * (s - n) : n - s,
                h = Math.ceil(Math.abs(r) / (2 * Math.PI)) * o;
            if (0 === r) return this;
            var l = t + Math.cos(s) * i,
                c = e + Math.sin(s) * i;
            a && this.filling ? this.moveTo(t, e) : this.moveTo(l, c);
            for (var u = this.currentPath.shape.points, d = r / (2 * h), p = 2 * d, m = Math.cos(d), g = Math.sin(d), f = h - 1, _ = f % 1 / f, y = 0; y <= f; y++) {
                var v = d + s + p * (y + _ * y),
                    b = Math.cos(v),
                    S = -Math.sin(v);
                u.push((m * b + g * S) * i + t, (m * -S + g * b) * i + e)
            }
            return this.dirty = !0, this._boundsDirty = !0, this
        }, PIXI.Graphics.prototype.beginFill = function(t, e) {
            return this.filling = !0, this.fillColor = t || 0, this.fillAlpha = void 0 === e ? 1 : e, this.currentPath && this.currentPath.shape.points.length <= 2 && (this.currentPath.fill = this.filling, this.currentPath.fillColor = this.fillColor, this.currentPath.fillAlpha = this.fillAlpha), this
        }, PIXI.Graphics.prototype.endFill = function() {
            return this.filling = !1, this.fillColor = null, this.fillAlpha = 1, this
        }, PIXI.Graphics.prototype.drawRect = function(t, e, i, s) {
            return this.drawShape(new PIXI.Rectangle(t, e, i, s)), this
        }, PIXI.Graphics.prototype.drawRoundedRect = function(t, e, i, s, n) {
            return this.drawShape(new PIXI.RoundedRectangle(t, e, i, s, n)), this
        }, PIXI.Graphics.prototype.drawCircle = function(t, e, i) {
            return this.drawShape(new PIXI.Circle(t, e, i)), this
        }, PIXI.Graphics.prototype.drawEllipse = function(t, e, i, s) {
            return this.drawShape(new PIXI.Ellipse(t, e, i, s)), this
        }, PIXI.Graphics.prototype.drawPolygon = function(t) {
            (t instanceof i.Polygon || t instanceof PIXI.Polygon) && (t = t.points);
            var e = t;
            if (!Array.isArray(e)) {
                e = new Array(arguments.length);
                for (var s = 0; s < e.length; ++s) e[s] = arguments[s]
            }
            return this.drawShape(new i.Polygon(e)), this
        }, PIXI.Graphics.prototype.clear = function() {
            return this.lineWidth = 0, this.filling = !1, this.dirty = !0, this._boundsDirty = !0, this.clearDirty = !0, this.graphicsData = [], this.updateLocalBounds(), this
        }, PIXI.Graphics.prototype.generateTexture = function(t, e, i) {
            void 0 === t && (t = 1), void 0 === e && (e = PIXI.scaleModes.DEFAULT), void 0 === i && (i = 0);
            var s = this.getBounds();
            s.width += i, s.height += i;
            var n = new PIXI.CanvasBuffer(s.width * t, s.height * t),
                a = PIXI.Texture.fromCanvas(n.canvas, e);
            return a.baseTexture.resolution = t, n.context.scale(t, t), n.context.translate(-s.x, -s.y), PIXI.CanvasGraphics.renderGraphics(this, n.context), a
        }, PIXI.Graphics.prototype._renderWebGL = function(t) {
            if (!1 !== this.visible && 0 !== this.alpha && !0 !== this.isMask) {
                if (this._cacheAsBitmap) return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1), this._cachedSprite.worldAlpha = this.worldAlpha, void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite, t);
                if (t.spriteBatch.stop(), t.blendModeManager.setBlendMode(this.blendMode), this._mask && t.maskManager.pushMask(this._mask, t), this._filters && t.filterManager.pushFilter(this._filterBlock), this.blendMode !== t.spriteBatch.currentBlendMode) {
                    t.spriteBatch.currentBlendMode = this.blendMode;
                    var e = PIXI.blendModesWebGL[t.spriteBatch.currentBlendMode];
                    t.spriteBatch.gl.blendFunc(e[0], e[1])
                }
                if (this.webGLDirty && (this.dirty = !0, this.webGLDirty = !1), PIXI.WebGLGraphics.renderGraphics(this, t), this.children.length) {
                    t.spriteBatch.start();
                    for (var i = 0; i < this.children.length; i++) this.children[i]._renderWebGL(t);
                    t.spriteBatch.stop()
                }
                this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(this.mask, t), t.drawCount++, t.spriteBatch.start()
            }
        }, PIXI.Graphics.prototype._renderCanvas = function(t) {
            if (!1 !== this.visible && 0 !== this.alpha && !0 !== this.isMask) {
                if (this._prevTint !== this.tint && (this.dirty = !0, this._prevTint = this.tint), this._cacheAsBitmap) return (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), this.cachedSpriteDirty = !1, this.dirty = !1), this._cachedSprite.alpha = this.alpha, void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite, t);
                var e = t.context,
                    i = this.worldTransform;
                this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, e.globalCompositeOperation = PIXI.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t);
                var s = t.resolution,
                    n = i.tx * t.resolution + t.shakeX,
                    a = i.ty * t.resolution + t.shakeY;
                e.setTransform(i.a * s, i.b * s, i.c * s, i.d * s, n, a), PIXI.CanvasGraphics.renderGraphics(this, e);
                for (var o = 0; o < this.children.length; o++) this.children[o]._renderCanvas(t);
                this._mask && t.maskManager.popMask(t)
            }
        }, PIXI.Graphics.prototype.getBounds = function(t) {
            if (!this._currentBounds) {
                if (!this.renderable) return PIXI.EmptyRectangle;
                this.dirty && (this.updateLocalBounds(), this.webGLDirty = !0, this.cachedSpriteDirty = !0, this.dirty = !1);
                var e = this._localBounds,
                    i = e.x,
                    s = e.width + e.x,
                    n = e.y,
                    a = e.height + e.y,
                    o = t || this.worldTransform,
                    r = o.a,
                    h = o.b,
                    l = o.c,
                    c = o.d,
                    u = o.tx,
                    d = o.ty,
                    p = r * s + l * a + u,
                    m = c * a + h * s + d,
                    g = r * i + l * a + u,
                    f = c * a + h * i + d,
                    _ = r * i + l * n + u,
                    y = c * n + h * i + d,
                    v = r * s + l * n + u,
                    b = c * n + h * s + d,
                    S = p,
                    T = m,
                    E = p,
                    P = m;
                E = v < (E = _ < (E = g < E ? g : E) ? _ : E) ? v : E, P = b < (P = y < (P = f < P ? f : P) ? y : P) ? b : P, S = v > (S = _ > (S = g > S ? g : S) ? _ : S) ? v : S, T = b > (T = y > (T = f > T ? f : T) ? y : T) ? b : T, this._bounds.x = E, this._bounds.width = S - E, this._bounds.y = P, this._bounds.height = T - P, this._currentBounds = this._bounds
            }
            return this._currentBounds
        }, PIXI.Graphics.prototype.getLocalBounds = function() {
            var t = this.worldTransform;
            this.worldTransform = PIXI.identityMatrix;
            for (var e = 0; e < this.children.length; e++) this.children[e].updateTransform();
            var i = this.getBounds();
            for (this.worldTransform = t, e = 0; e < this.children.length; e++) this.children[e].updateTransform();
            return i
        }, PIXI.Graphics.prototype.containsPoint = function(t) {
            this.worldTransform.applyInverse(t, tempPoint);
            for (var e = this.graphicsData, i = 0; i < e.length; i++) {
                var s = e[i];
                if (s.fill && (s.shape && s.shape.contains(tempPoint.x, tempPoint.y))) return !0
            }
            return !1
        }, PIXI.Graphics.prototype.updateLocalBounds = function() {
            var t = 1 / 0,
                e = -1 / 0,
                s = 1 / 0,
                n = -1 / 0;
            if (this.graphicsData.length)
                for (var a, o, r, h, l, c, u = 0; u < this.graphicsData.length; u++) {
                    var d = this.graphicsData[u],
                        p = d.type,
                        m = d.lineWidth;
                    if (a = d.shape, p === PIXI.Graphics.RECT || p === PIXI.Graphics.RREC) r = a.x - m / 2, h = a.y - m / 2, l = a.width + m, c = a.height + m, t = r < t ? r : t, e = r + l > e ? r + l : e, s = h < s ? h : s, n = h + c > n ? h + c : n;
                    else if (p === PIXI.Graphics.CIRC) r = a.x, h = a.y, l = a.radius + m / 2, c = a.radius + m / 2, t = r - l < t ? r - l : t, e = r + l > e ? r + l : e, s = h - c < s ? h - c : s, n = h + c > n ? h + c : n;
                    else if (p === PIXI.Graphics.ELIP) r = a.x, h = a.y, l = a.width + m / 2, c = a.height + m / 2, t = r - l < t ? r - l : t, e = r + l > e ? r + l : e, s = h - c < s ? h - c : s, n = h + c > n ? h + c : n;
                    else {
                        o = a.points;
                        for (var g = 0; g < o.length; g++) o[g] instanceof i.Point ? (r = o[g].x, h = o[g].y) : (r = o[g], h = o[g + 1], g < o.length - 1 && g++), t = r - m < t ? r - m : t, e = r + m > e ? r + m : e, s = h - m < s ? h - m : s, n = h + m > n ? h + m : n
                    }
                } else t = 0, e = 0, s = 0, n = 0;
            var f = this.boundsPadding;
            this._localBounds.x = t - f, this._localBounds.width = e - t + 2 * f, this._localBounds.y = s - f, this._localBounds.height = n - s + 2 * f
        }, PIXI.Graphics.prototype._generateCachedSprite = function() {
            var t = this.getLocalBounds();
            if (this._cachedSprite) this._cachedSprite.buffer.resize(t.width, t.height);
            else {
                var e = new PIXI.CanvasBuffer(t.width, t.height),
                    i = PIXI.Texture.fromCanvas(e.canvas);
                this._cachedSprite = new PIXI.Sprite(i), this._cachedSprite.buffer = e, this._cachedSprite.worldTransform = this.worldTransform
            }
            this._cachedSprite.anchor.x = -t.x / t.width, this._cachedSprite.anchor.y = -t.y / t.height, this._cachedSprite.buffer.context.translate(-t.x, -t.y), this.worldAlpha = 1, PIXI.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context), this._cachedSprite.alpha = this.alpha
        }, PIXI.Graphics.prototype.updateCachedSpriteTexture = function() {
            var t = this._cachedSprite,
                e = t.texture,
                i = t.buffer.canvas;
            e.baseTexture.width = i.width, e.baseTexture.height = i.height, e.crop.width = e.frame.width = i.width, e.crop.height = e.frame.height = i.height, t._width = i.width, t._height = i.height, e.baseTexture.dirty()
        }, PIXI.Graphics.prototype.destroyCachedSprite = function() {
            this._cachedSprite.texture.destroy(!0), this._cachedSprite = null
        }, PIXI.Graphics.prototype.drawShape = function(t) {
            this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(), this.currentPath = null, t instanceof i.Polygon && (t = t.clone()).flatten();
            var e = new PIXI.GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, t);
            return this.graphicsData.push(e), e.type === PIXI.Graphics.POLY && (e.shape.closed = this.filling, this.currentPath = e), this.dirty = !0, this._boundsDirty = !0, e
        }, Object.defineProperty(PIXI.Graphics.prototype, "cacheAsBitmap", {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(t) {
                this._cacheAsBitmap = t, this._cacheAsBitmap ? this._generateCachedSprite() : this.destroyCachedSprite(), this.dirty = !0, this.webGLDirty = !0
            }
        }), PIXI.GraphicsData = function(t, e, i, s, n, a, o) {
            this.lineWidth = t, this.lineColor = e, this.lineAlpha = i, this._lineTint = e, this.fillColor = s, this.fillAlpha = n, this._fillTint = s, this.fill = a, this.shape = o, this.type = o.type
        }, PIXI.GraphicsData.prototype.constructor = PIXI.GraphicsData, PIXI.GraphicsData.prototype.clone = function() {
            return new GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.shape)
        }, PIXI.EarCut = {}, PIXI.EarCut.Triangulate = function(t, e, i) {
            i = i || 2;
            var s = e && e.length,
                n = s ? e[0] * i : t.length,
                a = PIXI.EarCut.linkedList(t, 0, n, i, !0),
                o = [];
            if (!a) return o;
            var r, h, l, c, u, d, p;
            if (s && (a = PIXI.EarCut.eliminateHoles(t, e, a, i)), t.length > 80 * i) {
                r = l = t[0], h = c = t[1];
                for (var m = i; m < n; m += i) u = t[m], d = t[m + 1], u < r && (r = u), d < h && (h = d), u > l && (l = u), d > c && (c = d);
                p = Math.max(l - r, c - h)
            }
            return PIXI.EarCut.earcutLinked(a, o, i, r, h, p), o
        }, PIXI.EarCut.linkedList = function(t, e, i, s, n) {
            var a, o, r, h = 0;
            for (a = e, o = i - s; a < i; a += s) h += (t[o] - t[a]) * (t[a + 1] + t[o + 1]), o = a;
            if (n === h > 0)
                for (a = e; a < i; a += s) r = PIXI.EarCut.insertNode(a, t[a], t[a + 1], r);
            else
                for (a = i - s; a >= e; a -= s) r = PIXI.EarCut.insertNode(a, t[a], t[a + 1], r);
            return r
        }, PIXI.EarCut.filterPoints = function(t, e) {
            if (!t) return t;
            e || (e = t);
            var i, s = t;
            do {
                if (i = !1, s.steiner || !PIXI.EarCut.equals(s, s.next) && 0 !== PIXI.EarCut.area(s.prev, s, s.next)) s = s.next;
                else {
                    if (PIXI.EarCut.removeNode(s), (s = e = s.prev) === s.next) return null;
                    i = !0
                }
            } while (i || s !== e);
            return e
        }, PIXI.EarCut.earcutLinked = function(t, e, i, s, n, a, o) {
            if (t) {
                !o && a && PIXI.EarCut.indexCurve(t, s, n, a);
                for (var r, h, l = t; t.prev !== t.next;)
                    if (r = t.prev, h = t.next, a ? PIXI.EarCut.isEarHashed(t, s, n, a) : PIXI.EarCut.isEar(t)) e.push(r.i / i), e.push(t.i / i), e.push(h.i / i), PIXI.EarCut.removeNode(t), t = h.next, l = h.next;
                    else if ((t = h) === l) {
                    o ? 1 === o ? (t = PIXI.EarCut.cureLocalIntersections(t, e, i), PIXI.EarCut.earcutLinked(t, e, i, s, n, a, 2)) : 2 === o && PIXI.EarCut.splitEarcut(t, e, i, s, n, a) : PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(t), e, i, s, n, a, 1);
                    break
                }
            }
        }, PIXI.EarCut.isEar = function(t) {
            var e = t.prev,
                i = t,
                s = t.next;
            if (PIXI.EarCut.area(e, i, s) >= 0) return !1;
            for (var n = t.next.next; n !== t.prev;) {
                if (PIXI.EarCut.pointInTriangle(e.x, e.y, i.x, i.y, s.x, s.y, n.x, n.y) && PIXI.EarCut.area(n.prev, n, n.next) >= 0) return !1;
                n = n.next
            }
            return !0
        }, PIXI.EarCut.isEarHashed = function(t, e, i, s) {
            var n = t.prev,
                a = t,
                o = t.next;
            if (PIXI.EarCut.area(n, a, o) >= 0) return !1;
            for (var r = n.x < a.x ? n.x < o.x ? n.x : o.x : a.x < o.x ? a.x : o.x, h = n.y < a.y ? n.y < o.y ? n.y : o.y : a.y < o.y ? a.y : o.y, l = n.x > a.x ? n.x > o.x ? n.x : o.x : a.x > o.x ? a.x : o.x, c = n.y > a.y ? n.y > o.y ? n.y : o.y : a.y > o.y ? a.y : o.y, u = PIXI.EarCut.zOrder(r, h, e, i, s), d = PIXI.EarCut.zOrder(l, c, e, i, s), p = t.nextZ; p && p.z <= d;) {
                if (p !== t.prev && p !== t.next && PIXI.EarCut.pointInTriangle(n.x, n.y, a.x, a.y, o.x, o.y, p.x, p.y) && PIXI.EarCut.area(p.prev, p, p.next) >= 0) return !1;
                p = p.nextZ
            }
            for (p = t.prevZ; p && p.z >= u;) {
                if (p !== t.prev && p !== t.next && PIXI.EarCut.pointInTriangle(n.x, n.y, a.x, a.y, o.x, o.y, p.x, p.y) && PIXI.EarCut.area(p.prev, p, p.next) >= 0) return !1;
                p = p.prevZ
            }
            return !0
        }, PIXI.EarCut.cureLocalIntersections = function(t, e, i) {
            var s = t;
            do {
                var n = s.prev,
                    a = s.next.next;
                PIXI.EarCut.intersects(n, s, s.next, a) && PIXI.EarCut.locallyInside(n, a) && PIXI.EarCut.locallyInside(a, n) && (e.push(n.i / i), e.push(s.i / i), e.push(a.i / i), PIXI.EarCut.removeNode(s), PIXI.EarCut.removeNode(s.next), s = t = a), s = s.next
            } while (s !== t);
            return s
        }, PIXI.EarCut.splitEarcut = function(t, e, i, s, n, a) {
            var o = t;
            do {
                for (var r = o.next.next; r !== o.prev;) {
                    if (o.i !== r.i && PIXI.EarCut.isValidDiagonal(o, r)) {
                        var h = PIXI.EarCut.splitPolygon(o, r);
                        return o = PIXI.EarCut.filterPoints(o, o.next), h = PIXI.EarCut.filterPoints(h, h.next), PIXI.EarCut.earcutLinked(o, e, i, s, n, a), void PIXI.EarCut.earcutLinked(h, e, i, s, n, a)
                    }
                    r = r.next
                }
                o = o.next
            } while (o !== t)
        }, PIXI.EarCut.eliminateHoles = function(t, e, i, s) {
            var n, a, o, r, h, l = [];
            for (n = 0, a = e.length; n < a; n++) o = e[n] * s, r = n < a - 1 ? e[n + 1] * s : t.length, (h = PIXI.EarCut.linkedList(t, o, r, s, !1)) === h.next && (h.steiner = !0), l.push(PIXI.EarCut.getLeftmost(h));
            for (l.sort(compareX), n = 0; n < l.length; n++) PIXI.EarCut.eliminateHole(l[n], i), i = PIXI.EarCut.filterPoints(i, i.next);
            return i
        }, PIXI.EarCut.compareX = function(t, e) {
            return t.x - e.x
        }, PIXI.EarCut.eliminateHole = function(t, e) {
            if (e = PIXI.EarCut.findHoleBridge(t, e)) {
                var i = PIXI.EarCut.splitPolygon(e, t);
                PIXI.EarCut.filterPoints(i, i.next)
            }
        }, PIXI.EarCut.findHoleBridge = function(t, e) {
            var i, s = e,
                n = t.x,
                a = t.y,
                o = -1 / 0;
            do {
                if (a <= s.y && a >= s.next.y) {
                    var r = s.x + (a - s.y) * (s.next.x - s.x) / (s.next.y - s.y);
                    r <= n && r > o && (o = r, i = s.x < s.next.x ? s : s.next)
                }
                s = s.next
            } while (s !== e);
            if (!i) return null;
            if (t.x === i.x) return i.prev;
            var h, l = i,
                c = 1 / 0;
            for (s = i.next; s !== l;) n >= s.x && s.x >= i.x && PIXI.EarCut.pointInTriangle(a < i.y ? n : o, a, i.x, i.y, a < i.y ? o : n, a, s.x, s.y) && ((h = Math.abs(a - s.y) / (n - s.x)) < c || h === c && s.x > i.x) && PIXI.EarCut.locallyInside(s, t) && (i = s, c = h), s = s.next;
            return i
        }, PIXI.EarCut.indexCurve = function(t, e, i, s) {
            var n = t;
            do {
                null === n.z && (n.z = PIXI.EarCut.zOrder(n.x, n.y, e, i, s)), n.prevZ = n.prev, n.nextZ = n.next, n = n.next
            } while (n !== t);
            n.prevZ.nextZ = null, n.prevZ = null, PIXI.EarCut.sortLinked(n)
        }, PIXI.EarCut.sortLinked = function(t) {
            var e, i, s, n, a, o, r, h, l = 1;
            do {
                for (i = t, t = null, a = null, o = 0; i;) {
                    for (o++, s = i, r = 0, e = 0; e < l && (r++, s = s.nextZ); e++);
                    for (h = l; r > 0 || h > 0 && s;) 0 === r ? (n = s, s = s.nextZ, h--) : 0 !== h && s ? i.z <= s.z ? (n = i, i = i.nextZ, r--) : (n = s, s = s.nextZ, h--) : (n = i, i = i.nextZ, r--), a ? a.nextZ = n : t = n, n.prevZ = a, a = n;
                    i = s
                }
                a.nextZ = null, l *= 2
            } while (o > 1);
            return t
        }, PIXI.EarCut.zOrder = function(t, e, i, s, n) {
            return t = 32767 * (t - i) / n, e = 32767 * (e - s) / n, t = 16711935 & (t | t << 8), t = 252645135 & (t | t << 4), t = 858993459 & (t | t << 2), t = 1431655765 & (t | t << 1), e = 16711935 & (e | e << 8), e = 252645135 & (e | e << 4), e = 858993459 & (e | e << 2), e = 1431655765 & (e | e << 1), t | e << 1
        }, PIXI.EarCut.getLeftmost = function(t) {
            var e = t,
                i = t;
            do {
                e.x < i.x && (i = e), e = e.next
            } while (e !== t);
            return i
        }, PIXI.EarCut.pointInTriangle = function(t, e, i, s, n, a, o, r) {
            return (n - o) * (e - r) - (t - o) * (a - r) >= 0 && (t - o) * (s - r) - (i - o) * (e - r) >= 0 && (i - o) * (a - r) - (n - o) * (s - r) >= 0
        }, PIXI.EarCut.isValidDiagonal = function(t, e) {
            return PIXI.EarCut.equals(t, e) || t.next.i !== e.i && t.prev.i !== e.i && !PIXI.EarCut.intersectsPolygon(t, e) && PIXI.EarCut.locallyInside(t, e) && PIXI.EarCut.locallyInside(e, t) && PIXI.EarCut.middleInside(t, e)
        }, PIXI.EarCut.area = function(t, e, i) {
            return (e.y - t.y) * (i.x - e.x) - (e.x - t.x) * (i.y - e.y)
        }, PIXI.EarCut.equals = function(t, e) {
            return t.x === e.x && t.y === e.y
        }, PIXI.EarCut.intersects = function(t, e, i, s) {
            return PIXI.EarCut.area(t, e, i) > 0 != PIXI.EarCut.area(t, e, s) > 0 && PIXI.EarCut.area(i, s, t) > 0 != PIXI.EarCut.area(i, s, e) > 0
        }, PIXI.EarCut.intersectsPolygon = function(t, e) {
            var i = t;
            do {
                if (i.i !== t.i && i.next.i !== t.i && i.i !== e.i && i.next.i !== e.i && PIXI.EarCut.intersects(i, i.next, t, e)) return !0;
                i = i.next
            } while (i !== t);
            return !1
        }, PIXI.EarCut.locallyInside = function(t, e) {
            return PIXI.EarCut.area(t.prev, t, t.next) < 0 ? PIXI.EarCut.area(t, e, t.next) >= 0 && PIXI.EarCut.area(t, t.prev, e) >= 0 : PIXI.EarCut.area(t, e, t.prev) < 0 || PIXI.EarCut.area(t, t.next, e) < 0
        }, PIXI.EarCut.middleInside = function(t, e) {
            var i = t,
                s = !1,
                n = (t.x + e.x) / 2,
                a = (t.y + e.y) / 2;
            do {
                i.y > a != i.next.y > a && n < (i.next.x - i.x) * (a - i.y) / (i.next.y - i.y) + i.x && (s = !s), i = i.next
            } while (i !== t);
            return s
        }, PIXI.EarCut.splitPolygon = function(t, e) {
            var i = new PIXI.EarCut.Node(t.i, t.x, t.y),
                s = new PIXI.EarCut.Node(e.i, e.x, e.y),
                n = t.next,
                a = e.prev;
            return t.next = e, e.prev = t, i.next = n, n.prev = i, s.next = i, i.prev = s, a.next = s, s.prev = a, s
        }, PIXI.EarCut.insertNode = function(t, e, i, s) {
            var n = new PIXI.EarCut.Node(t, e, i);
            return s ? (n.next = s.next, n.prev = s, s.next.prev = n, s.next = n) : (n.prev = n, n.next = n), n
        }, PIXI.EarCut.removeNode = function(t) {
            t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ)
        }, PIXI.EarCut.Node = function(t, e, i) {
            this.i = t, this.x = e, this.y = i, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1
        }, PIXI.WebGLGraphics = function() {}, PIXI.WebGLGraphics.stencilBufferLimit = 6, PIXI.WebGLGraphics.renderGraphics = function(t, e) {
            var i, s = e.gl,
                n = e.projection,
                a = e.offset,
                o = e.shaderManager.primitiveShader;
            t.dirty && PIXI.WebGLGraphics.updateGraphics(t, s);
            for (var r = t._webGL[s.id], h = 0; h < r.data.length; h++) 1 === r.data[h].mode ? (i = r.data[h], e.stencilManager.pushStencil(t, i, e), s.drawElements(s.TRIANGLE_FAN, 4, s.UNSIGNED_SHORT, 2 * (i.indices.length - 4)), e.stencilManager.popStencil(t, i, e)) : (i = r.data[h], e.shaderManager.setShader(o), o = e.shaderManager.primitiveShader, s.uniformMatrix3fv(o.translationMatrix, !1, t.worldTransform.toArray(!0)), s.uniform1f(o.flipY, 1), s.uniform2f(o.projectionVector, n.x, -n.y), s.uniform2f(o.offsetVector, -a.x, -a.y), s.uniform3fv(o.tintColor, PIXI.hex2rgb(t.tint)), s.uniform1f(o.alpha, t.worldAlpha), s.bindBuffer(s.ARRAY_BUFFER, i.buffer), s.vertexAttribPointer(o.aVertexPosition, 2, s.FLOAT, !1, 24, 0), s.vertexAttribPointer(o.colorAttribute, 4, s.FLOAT, !1, 24, 8), s.bindBuffer(s.ELEMENT_ARRAY_BUFFER, i.indexBuffer), s.drawElements(s.TRIANGLE_STRIP, i.indices.length, s.UNSIGNED_SHORT, 0))
        }, PIXI.WebGLGraphics.updateGraphics = function(t, e) {
            var i = t._webGL[e.id];
            i || (i = t._webGL[e.id] = {
                lastIndex: 0,
                data: [],
                gl: e
            }), t.dirty = !1;
            var s;
            if (t.clearDirty) {
                for (t.clearDirty = !1, s = 0; s < i.data.length; s++) {
                    var n = i.data[s];
                    n.reset(), PIXI.WebGLGraphics.graphicsDataPool.push(n)
                }
                i.data = [], i.lastIndex = 0
            }
            var a;
            for (s = i.lastIndex; s < t.graphicsData.length; s++) {
                var o = t.graphicsData[s];
                o.type === PIXI.Graphics.POLY ? (o.points = o.shape.points.slice(), o.shape.closed && (o.points[0] === o.points[o.points.length - 2] && o.points[1] === o.points[o.points.length - 1] || o.points.push(o.points[0], o.points[1])), o.fill && o.points.length >= PIXI.WebGLGraphics.stencilBufferLimit && (o.points.length < 2 * PIXI.WebGLGraphics.stencilBufferLimit ? (a = PIXI.WebGLGraphics.switchMode(i, 0), PIXI.WebGLGraphics.buildPoly(o, a) || (a = PIXI.WebGLGraphics.switchMode(i, 1), PIXI.WebGLGraphics.buildComplexPoly(o, a))) : (a = PIXI.WebGLGraphics.switchMode(i, 1), PIXI.WebGLGraphics.buildComplexPoly(o, a))), o.lineWidth > 0 && (a = PIXI.WebGLGraphics.switchMode(i, 0), PIXI.WebGLGraphics.buildLine(o, a))) : (a = PIXI.WebGLGraphics.switchMode(i, 0), o.type === PIXI.Graphics.RECT ? PIXI.WebGLGraphics.buildRectangle(o, a) : o.type === PIXI.Graphics.CIRC || o.type === PIXI.Graphics.ELIP ? PIXI.WebGLGraphics.buildCircle(o, a) : o.type === PIXI.Graphics.RREC && PIXI.WebGLGraphics.buildRoundedRectangle(o, a)), i.lastIndex++
            }
            for (s = 0; s < i.data.length; s++)(a = i.data[s]).dirty && a.upload()
        }, PIXI.WebGLGraphics.switchMode = function(t, e) {
            var i;
            return t.data.length ? (i = t.data[t.data.length - 1]).mode === e && 1 !== e || ((i = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(t.gl)).mode = e, t.data.push(i)) : ((i = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(t.gl)).mode = e, t.data.push(i)), i.dirty = !0, i
        }, PIXI.WebGLGraphics.buildRectangle = function(t, e) {
            var i = t.shape,
                s = i.x,
                n = i.y,
                a = i.width,
                o = i.height;
            if (t.fill) {
                var r = PIXI.hex2rgb(t.fillColor),
                    h = t.fillAlpha,
                    l = r[0] * h,
                    c = r[1] * h,
                    u = r[2] * h,
                    d = e.points,
                    p = e.indices,
                    m = d.length / 6;
                d.push(s, n), d.push(l, c, u, h), d.push(s + a, n), d.push(l, c, u, h), d.push(s, n + o), d.push(l, c, u, h), d.push(s + a, n + o), d.push(l, c, u, h), p.push(m, m, m + 1, m + 2, m + 3, m + 3)
            }
            if (t.lineWidth) {
                var g = t.points;
                t.points = [s, n, s + a, n, s + a, n + o, s, n + o, s, n], PIXI.WebGLGraphics.buildLine(t, e), t.points = g
            }
        }, PIXI.WebGLGraphics.buildRoundedRectangle = function(t, e) {
            var i = t.shape,
                s = i.x,
                n = i.y,
                a = i.width,
                o = i.height,
                r = i.radius,
                h = [];
            if (h.push(s, n + r), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s, n + o - r, s, n + o, s + r, n + o)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s + a - r, n + o, s + a, n + o, s + a, n + o - r)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s + a, n + r, s + a, n, s + a - r, n)), h = h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s + r, n, s, n, s, n + r)), t.fill) {
                var l = PIXI.hex2rgb(t.fillColor),
                    c = t.fillAlpha,
                    u = l[0] * c,
                    d = l[1] * c,
                    p = l[2] * c,
                    m = e.points,
                    g = e.indices,
                    f = m.length / 6,
                    _ = PIXI.EarCut.Triangulate(h, null, 2),
                    y = 0;
                for (y = 0; y < _.length; y += 3) g.push(_[y] + f), g.push(_[y] + f), g.push(_[y + 1] + f), g.push(_[y + 2] + f), g.push(_[y + 2] + f);
                for (y = 0; y < h.length; y++) m.push(h[y], h[++y], u, d, p, c)
            }
            if (t.lineWidth) {
                var v = t.points;
                t.points = h, PIXI.WebGLGraphics.buildLine(t, e), t.points = v
            }
        }, PIXI.WebGLGraphics.quadraticBezierCurve = function(t, e, i, s, n, a) {
            function o(t, e, i) {
                return t + (e - t) * i
            }
            for (var r, h, l, c, u, d, p = [], m = 0, g = 0; g <= 20; g++) r = o(t, i, m = g / 20), h = o(e, s, m), l = o(i, n, m), c = o(s, a, m), u = o(r, l, m), d = o(h, c, m), p.push(u, d);
            return p
        }, PIXI.WebGLGraphics.buildCircle = function(t, e) {
            var i, s, n = t.shape,
                a = n.x,
                o = n.y;
            t.type === PIXI.Graphics.CIRC ? (i = n.radius, s = n.radius) : (i = n.width, s = n.height);
            var r = 2 * Math.PI / 40,
                h = 0;
            if (t.fill) {
                var l = PIXI.hex2rgb(t.fillColor),
                    c = t.fillAlpha,
                    u = l[0] * c,
                    d = l[1] * c,
                    p = l[2] * c,
                    m = e.points,
                    g = e.indices,
                    f = m.length / 6;
                for (g.push(f), h = 0; h < 41; h++) m.push(a, o, u, d, p, c), m.push(a + Math.sin(r * h) * i, o + Math.cos(r * h) * s, u, d, p, c), g.push(f++, f++);
                g.push(f - 1)
            }
            if (t.lineWidth) {
                var _ = t.points;
                for (t.points = [], h = 0; h < 41; h++) t.points.push(a + Math.sin(r * h) * i, o + Math.cos(r * h) * s);
                PIXI.WebGLGraphics.buildLine(t, e), t.points = _
            }
        }, PIXI.WebGLGraphics.buildLine = function(t, e) {
            var i = 0,
                s = t.points;
            if (0 !== s.length) {
                if (t.lineWidth % 2)
                    for (i = 0; i < s.length; i++) s[i] += .5;
                var n = new PIXI.Point(s[0], s[1]),
                    a = new PIXI.Point(s[s.length - 2], s[s.length - 1]);
                if (n.x === a.x && n.y === a.y) {
                    (s = s.slice()).pop(), s.pop();
                    var o = (a = new PIXI.Point(s[s.length - 2], s[s.length - 1])).x + .5 * (n.x - a.x),
                        r = a.y + .5 * (n.y - a.y);
                    s.unshift(o, r), s.push(o, r)
                }
                var h, l, c, u, d, p, m, g, f, _, y, v, b, S, T, E, P, A, I, C, x, w, M = e.points,
                    O = e.indices,
                    L = s.length / 2,
                    N = s.length,
                    k = M.length / 6,
                    R = t.lineWidth / 2,
                    D = PIXI.hex2rgb(t.lineColor),
                    G = t.lineAlpha,
                    B = D[0] * G,
                    F = D[1] * G,
                    U = D[2] * G;
                for (c = s[0], u = s[1], d = s[2], f = -(u - (p = s[3])), _ = c - d, f /= w = Math.sqrt(f * f + _ * _), _ /= w, f *= R, _ *= R, M.push(c - f, u - _, B, F, U, G), M.push(c + f, u + _, B, F, U, G), i = 1; i < L - 1; i++) c = s[2 * (i - 1)], u = s[2 * (i - 1) + 1], d = s[2 * i], p = s[2 * i + 1], m = s[2 * (i + 1)], g = s[2 * (i + 1) + 1], f = -(u - p), _ = c - d, f /= w = Math.sqrt(f * f + _ * _), _ /= w, f *= R, _ *= R, y = -(p - g), v = d - m, y /= w = Math.sqrt(y * y + v * v), v /= w, P = (-f + c) * (-_ + p) - (-f + d) * (-_ + u), C = (-(y *= R) + m) * (-(v *= R) + p) - (-y + d) * (-v + g), x = (T = -_ + u - (-_ + p)) * (I = -y + d - (-y + m)) - (A = -v + g - (-v + p)) * (E = -f + d - (-f + c)), Math.abs(x) < .1 ? (x += 10.1, M.push(d - f, p - _, B, F, U, G), M.push(d + f, p + _, B, F, U, G)) : ((h = (E * C - I * P) / x) - d) * (h - d) + ((l = (A * P - T * C) / x) - p) + (l - p) > 19600 ? (b = f - y, S = _ - v, b /= w = Math.sqrt(b * b + S * S), S /= w, b *= R, S *= R, M.push(d - b, p - S), M.push(B, F, U, G), M.push(d + b, p + S), M.push(B, F, U, G), M.push(d - b, p - S), M.push(B, F, U, G), N++) : (M.push(h, l), M.push(B, F, U, G), M.push(d - (h - d), p - (l - p)), M.push(B, F, U, G));
                for (c = s[2 * (L - 2)], u = s[2 * (L - 2) + 1], d = s[2 * (L - 1)], f = -(u - (p = s[2 * (L - 1) + 1])), _ = c - d, f /= w = Math.sqrt(f * f + _ * _), _ /= w, f *= R, _ *= R, M.push(d - f, p - _), M.push(B, F, U, G), M.push(d + f, p + _), M.push(B, F, U, G), O.push(k), i = 0; i < N; i++) O.push(k++);
                O.push(k - 1)
            }
        }, PIXI.WebGLGraphics.buildComplexPoly = function(t, e) {
            var i = t.points.slice();
            if (!(i.length < 6)) {
                var s = e.indices;
                e.points = i, e.alpha = t.fillAlpha, e.color = PIXI.hex2rgb(t.fillColor);
                for (var n, a, o = 1 / 0, r = -1 / 0, h = 1 / 0, l = -1 / 0, c = 0; c < i.length; c += 2) n = i[c], a = i[c + 1], o = n < o ? n : o, r = n > r ? n : r, h = a < h ? a : h, l = a > l ? a : l;
                i.push(o, h, r, h, r, l, o, l);
                var u = i.length / 2;
                for (c = 0; c < u; c++) s.push(c)
            }
        }, PIXI.WebGLGraphics.buildPoly = function(t, e) {
            var i = t.points;
            if (!(i.length < 6)) {
                var s = e.points,
                    n = e.indices,
                    a = i.length / 2,
                    o = PIXI.hex2rgb(t.fillColor),
                    r = t.fillAlpha,
                    h = o[0] * r,
                    l = o[1] * r,
                    c = o[2] * r,
                    u = PIXI.EarCut.Triangulate(i, null, 2);
                if (!u) return !1;
                var d = s.length / 6,
                    p = 0;
                for (p = 0; p < u.length; p += 3) n.push(u[p] + d), n.push(u[p] + d), n.push(u[p + 1] + d), n.push(u[p + 2] + d), n.push(u[p + 2] + d);
                for (p = 0; p < a; p++) s.push(i[2 * p], i[2 * p + 1], h, l, c, r);
                return !0
            }
        }, PIXI.WebGLGraphics.graphicsDataPool = [], PIXI.WebGLGraphicsData = function(t) {
            this.gl = t, this.color = [0, 0, 0], this.points = [], this.indices = [], this.buffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), this.mode = 1, this.alpha = 1, this.dirty = !0
        }, PIXI.WebGLGraphicsData.prototype.reset = function() {
            this.points = [], this.indices = []
        }, PIXI.WebGLGraphicsData.prototype.upload = function() {
            var t = this.gl;
            this.glPoints = new PIXI.Float32Array(this.points), t.bindBuffer(t.ARRAY_BUFFER, this.buffer), t.bufferData(t.ARRAY_BUFFER, this.glPoints, t.STATIC_DRAW), this.glIndicies = new PIXI.Uint16Array(this.indices), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.glIndicies, t.STATIC_DRAW), this.dirty = !1
        }, PIXI.CanvasGraphics = function() {}, PIXI.CanvasGraphics.renderGraphics = function(t, e) {
            var i = t.worldAlpha;
            t.dirty && (this.updateGraphicsTint(t), t.dirty = !1);
            for (var s = 0; s < t.graphicsData.length; s++) {
                var n = t.graphicsData[s],
                    a = n.shape,
                    o = n._fillTint,
                    r = n._lineTint;
                if (e.lineWidth = n.lineWidth, n.type === PIXI.Graphics.POLY) {
                    e.beginPath();
                    var h = a.points;
                    e.moveTo(h[0], h[1]);
                    for (var l = 1; l < h.length / 2; l++) e.lineTo(h[2 * l], h[2 * l + 1]);
                    a.closed && e.lineTo(h[0], h[1]), h[0] === h[h.length - 2] && h[1] === h[h.length - 1] && e.closePath(), n.fill && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | o).toString(16)).substr(-6), e.fill()), n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke())
                } else if (n.type === PIXI.Graphics.RECT)(n.fillColor || 0 === n.fillColor) && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | o).toString(16)).substr(-6), e.fillRect(a.x, a.y, a.width, a.height)), n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.strokeRect(a.x, a.y, a.width, a.height));
                else if (n.type === PIXI.Graphics.CIRC) e.beginPath(), e.arc(a.x, a.y, a.radius, 0, 2 * Math.PI), e.closePath(), n.fill && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | o).toString(16)).substr(-6), e.fill()), n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke());
                else if (n.type === PIXI.Graphics.ELIP) {
                    var c = 2 * a.width,
                        u = 2 * a.height,
                        d = a.x - c / 2,
                        p = a.y - u / 2;
                    e.beginPath();
                    var m = c / 2 * .5522848,
                        g = u / 2 * .5522848,
                        f = d + c,
                        _ = p + u,
                        y = d + c / 2,
                        v = p + u / 2;
                    e.moveTo(d, v), e.bezierCurveTo(d, v - g, y - m, p, y, p), e.bezierCurveTo(y + m, p, f, v - g, f, v), e.bezierCurveTo(f, v + g, y + m, _, y, _), e.bezierCurveTo(y - m, _, d, v + g, d, v), e.closePath(), n.fill && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | o).toString(16)).substr(-6), e.fill()), n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke())
                } else if (n.type === PIXI.Graphics.RREC) {
                    var b = a.x,
                        S = a.y,
                        T = a.width,
                        E = a.height,
                        P = a.radius,
                        A = Math.min(T, E) / 2 | 0;
                    P = P > A ? A : P, e.beginPath(), e.moveTo(b, S + P), e.lineTo(b, S + E - P), e.quadraticCurveTo(b, S + E, b + P, S + E), e.lineTo(b + T - P, S + E), e.quadraticCurveTo(b + T, S + E, b + T, S + E - P), e.lineTo(b + T, S + P), e.quadraticCurveTo(b + T, S, b + T - P, S), e.lineTo(b + P, S), e.quadraticCurveTo(b, S, b, S + P), e.closePath(), (n.fillColor || 0 === n.fillColor) && (e.globalAlpha = n.fillAlpha * i, e.fillStyle = "#" + ("00000" + (0 | o).toString(16)).substr(-6), e.fill()), n.lineWidth && (e.globalAlpha = n.lineAlpha * i, e.strokeStyle = "#" + ("00000" + (0 | r).toString(16)).substr(-6), e.stroke())
                }
            }
        }, PIXI.CanvasGraphics.renderGraphicsMask = function(t, e) {
            var i = t.graphicsData.length;
            if (0 !== i) {
                e.beginPath();
                for (var s = 0; s < i; s++) {
                    var n = t.graphicsData[s],
                        a = n.shape;
                    if (n.type === PIXI.Graphics.POLY) {
                        var o = a.points;
                        e.moveTo(o[0], o[1]);
                        for (var r = 1; r < o.length / 2; r++) e.lineTo(o[2 * r], o[2 * r + 1]);
                        o[0] === o[o.length - 2] && o[1] === o[o.length - 1] && e.closePath()
                    } else if (n.type === PIXI.Graphics.RECT) e.rect(a.x, a.y, a.width, a.height), e.closePath();
                    else if (n.type === PIXI.Graphics.CIRC) e.arc(a.x, a.y, a.radius, 0, 2 * Math.PI), e.closePath();
                    else if (n.type === PIXI.Graphics.ELIP) {
                        var h = 2 * a.width,
                            l = 2 * a.height,
                            c = a.x - h / 2,
                            u = a.y - l / 2,
                            d = h / 2 * .5522848,
                            p = l / 2 * .5522848,
                            m = c + h,
                            g = u + l,
                            f = c + h / 2,
                            _ = u + l / 2;
                        e.moveTo(c, _), e.bezierCurveTo(c, _ - p, f - d, u, f, u), e.bezierCurveTo(f + d, u, m, _ - p, m, _), e.bezierCurveTo(m, _ + p, f + d, g, f, g), e.bezierCurveTo(f - d, g, c, _ + p, c, _), e.closePath()
                    } else if (n.type === PIXI.Graphics.RREC) {
                        var y = a.x,
                            v = a.y,
                            b = a.width,
                            S = a.height,
                            T = a.radius,
                            E = Math.min(b, S) / 2 | 0;
                        T = T > E ? E : T, e.moveTo(y, v + T), e.lineTo(y, v + S - T), e.quadraticCurveTo(y, v + S, y + T, v + S), e.lineTo(y + b - T, v + S), e.quadraticCurveTo(y + b, v + S, y + b, v + S - T), e.lineTo(y + b, v + T), e.quadraticCurveTo(y + b, v, y + b - T, v), e.lineTo(y + T, v), e.quadraticCurveTo(y, v, y, v + T), e.closePath()
                    }
                }
            }
        }, PIXI.CanvasGraphics.updateGraphicsTint = function(t) {
            if (16777215 !== t.tint)
                for (var e = (t.tint >> 16 & 255) / 255, i = (t.tint >> 8 & 255) / 255, s = (255 & t.tint) / 255, n = 0; n < t.graphicsData.length; n++) {
                    var a = t.graphicsData[n],
                        o = 0 | a.fillColor,
                        r = 0 | a.lineColor;
                    a._fillTint = ((o >> 16 & 255) / 255 * e * 255 << 16) + ((o >> 8 & 255) / 255 * i * 255 << 8) + (255 & o) / 255 * s * 255, a._lineTint = ((r >> 16 & 255) / 255 * e * 255 << 16) + ((r >> 8 & 255) / 255 * i * 255 << 8) + (255 & r) / 255 * s * 255
                }
        }, i.Graphics = function(t, e, s) {
            void 0 === e && (e = 0), void 0 === s && (s = 0), this.type = i.GRAPHICS, this.physicsType = i.SPRITE, this.anchor = new i.Point, PIXI.Graphics.call(this), i.Component.Core.init.call(this, t, e, s, "", null)
        }, i.Graphics.prototype = Object.create(PIXI.Graphics.prototype), i.Graphics.prototype.constructor = i.Graphics, i.Component.Core.install.call(i.Graphics.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]), i.Graphics.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.Graphics.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.Graphics.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Graphics.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Graphics.prototype.preUpdate = function() {
            return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
        }, i.Graphics.prototype.postUpdate = function() {
            i.Component.PhysicsBody.postUpdate.call(this), i.Component.FixedToCamera.postUpdate.call(this), this._boundsDirty && (this.updateLocalBounds(), this._boundsDirty = !1);
            for (var t = 0; t < this.children.length; t++) this.children[t].postUpdate()
        }, i.Graphics.prototype.destroy = function(t) {
            this.clear(), i.Component.Destroy.prototype.destroy.call(this, t)
        }, i.Graphics.prototype.drawTriangle = function(t, e) {
            void 0 === e && (e = !1);
            var s = new i.Polygon(t);
            if (e) {
                var n = new i.Point(this.game.camera.x - t[0].x, this.game.camera.y - t[0].y),
                    a = new i.Point(t[1].x - t[0].x, t[1].y - t[0].y),
                    o = new i.Point(t[1].x - t[2].x, t[1].y - t[2].y).cross(a);
                n.dot(o) > 0 && this.drawPolygon(s)
            } else this.drawPolygon(s)
        }, i.Graphics.prototype.drawTriangles = function(t, e, s) {
            void 0 === s && (s = !1);
            var n, a = new i.Point,
                o = new i.Point,
                r = new i.Point,
                h = [];
            if (e)
                if (t[0] instanceof i.Point)
                    for (n = 0; n < e.length / 3; n++) h.push(t[e[3 * n]]), h.push(t[e[3 * n + 1]]), h.push(t[e[3 * n + 2]]), 3 === h.length && (this.drawTriangle(h, s), h = []);
                else
                    for (n = 0; n < e.length; n++) a.x = t[2 * e[n]], a.y = t[2 * e[n] + 1], h.push(a.copyTo({})), 3 === h.length && (this.drawTriangle(h, s), h = []);
            else if (t[0] instanceof i.Point)
                for (n = 0; n < t.length / 3; n++) this.drawTriangle([t[3 * n], t[3 * n + 1], t[3 * n + 2]], s);
            else
                for (n = 0; n < t.length / 6; n++) a.x = t[6 * n + 0], a.y = t[6 * n + 1], o.x = t[6 * n + 2], o.y = t[6 * n + 3], r.x = t[6 * n + 4], r.y = t[6 * n + 5], this.drawTriangle([a, o, r], s)
        }, i.RenderTexture = function(t, e, s, n, a, o) {
            void 0 === n && (n = ""), void 0 === a && (a = i.scaleModes.DEFAULT), void 0 === o && (o = 1), this.game = t, this.key = n, this.type = i.RENDERTEXTURE, this._tempMatrix = new PIXI.Matrix, PIXI.RenderTexture.call(this, e, s, this.game.renderer, a, o), this.render = i.RenderTexture.prototype.render
        }, i.RenderTexture.prototype = Object.create(PIXI.RenderTexture.prototype), i.RenderTexture.prototype.constructor = i.RenderTexture, i.RenderTexture.prototype.renderXY = function(t, e, i, s) {
            t.updateTransform(), this._tempMatrix.copyFrom(t.worldTransform), this._tempMatrix.tx = e, this._tempMatrix.ty = i, this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(t, this._tempMatrix, s) : this.renderCanvas(t, this._tempMatrix, s)
        }, i.RenderTexture.prototype.renderRawXY = function(t, e, i, s) {
            this._tempMatrix.identity().translate(e, i), this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(t, this._tempMatrix, s) : this.renderCanvas(t, this._tempMatrix, s)
        }, i.RenderTexture.prototype.render = function(t, e, i) {
            void 0 === e || null === e ? this._tempMatrix.copyFrom(t.worldTransform) : this._tempMatrix.copyFrom(e), this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(t, this._tempMatrix, i) : this.renderCanvas(t, this._tempMatrix, i)
        }, i.Text = function(t, e, s, n, a) {
            e = e || 0, s = s || 0, n = void 0 === n || null === n ? "" : n.toString(), a = i.Utils.extend({}, a), this.type = i.TEXT, this.physicsType = i.SPRITE, this.padding = new i.Point, this.textBounds = null, this.canvas = PIXI.CanvasPool.create(this), this.context = this.canvas.getContext("2d"), this.colors = [], this.strokeColors = [], this.fontStyles = [], this.fontWeights = [], this.autoRound = !1, this.useAdvancedWrap = !1, this._res = t.renderer.resolution, this._text = n, this._fontComponents = null, this._lineSpacing = 0, this._charCount = 0, this._width = 0, this._height = 0, i.Sprite.call(this, t, e, s, PIXI.Texture.fromCanvas(this.canvas)), this.setStyle(a), "" !== n && this.updateText()
        }, i.Text.prototype = Object.create(i.Sprite.prototype), i.Text.prototype.constructor = i.Text, i.Text.prototype.preUpdate = function() {
            return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
        }, i.Text.prototype.update = function() {}, i.Text.prototype.destroy = function(t) {
            this.texture.destroy(!0), i.Component.Destroy.prototype.destroy.call(this, t)
        }, i.Text.prototype.setShadow = function(t, e, i, s, n, a) {
            return void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = "rgba(0, 0, 0, 1)"), void 0 === s && (s = 0), void 0 === n && (n = !0), void 0 === a && (a = !0), this.style.shadowOffsetX = t, this.style.shadowOffsetY = e, this.style.shadowColor = i, this.style.shadowBlur = s, this.style.shadowStroke = n, this.style.shadowFill = a, this.dirty = !0, this
        }, i.Text.prototype.setStyle = function(t, e) {
            void 0 === e && (e = !1), (t = t || {}).font = t.font || "bold 20pt Arial", t.backgroundColor = t.backgroundColor || null, t.fill = t.fill || "black", t.align = t.align || "left", t.boundsAlignH = t.boundsAlignH || "left", t.boundsAlignV = t.boundsAlignV || "top", t.stroke = t.stroke || "black", t.strokeThickness = t.strokeThickness || 0, t.wordWrap = t.wordWrap || !1, t.wordWrapWidth = t.wordWrapWidth || 100, t.maxLines = t.maxLines || 0, t.shadowOffsetX = t.shadowOffsetX || 0, t.shadowOffsetY = t.shadowOffsetY || 0, t.shadowColor = t.shadowColor || "rgba(0,0,0,0)", t.shadowBlur = t.shadowBlur || 0, t.tabs = t.tabs || 0;
            var i = this.fontToComponents(t.font);
            return t.fontStyle && (i.fontStyle = t.fontStyle), t.fontVariant && (i.fontVariant = t.fontVariant), t.fontWeight && (i.fontWeight = t.fontWeight), t.fontSize && ("number" == typeof t.fontSize && (t.fontSize = t.fontSize + "px"), i.fontSize = t.fontSize), this._fontComponents = i, t.font = this.componentsToFont(this._fontComponents), this.style = t, this.dirty = !0, e && this.updateText(), this
        }, i.Text.prototype.updateText = function() {
            this.texture.baseTexture.resolution = this._res, this.context.font = this.style.font;
            var t = this.text;
            this.style.wordWrap && (t = this.runWordWrap(this.text));
            var e = t.split(/(?:\r\n|\r|\n)/),
                i = this.style.tabs,
                s = [],
                n = 0,
                a = this.determineFontProperties(this.style.font),
                o = e.length;
            this.style.maxLines > 0 && this.style.maxLines < e.length && (o = this.style.maxLines), this._charCount = 0;
            for (var r = 0; r < o; r++) {
                if (0 === i) {
                    l = this.style.strokeThickness + this.padding.x;
                    this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? l += this.measureLine(e[r]) : l += this.context.measureText(e[r]).width, this.style.wordWrap && (l -= this.context.measureText(" ").width)
                } else {
                    var h = e[r].split(/(?:\t)/),
                        l = this.padding.x + this.style.strokeThickness;
                    if (Array.isArray(i))
                        for (var c = 0, u = 0; u < h.length; u++) {
                            var d = 0;
                            d = this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.measureLine(h[u]) : Math.ceil(this.context.measureText(h[u]).width), u > 0 && (c += i[u - 1]), l = c + d
                        } else
                            for (u = 0; u < h.length; u++) this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? l += this.measureLine(h[u]) : l += Math.ceil(this.context.measureText(h[u]).width), l += this.game.math.snapToCeil(l, i) - l
                }
                s[r] = Math.ceil(l), n = Math.max(n, s[r])
            }
            this.canvas.width = n * this._res;
            var p = a.fontSize + this.style.strokeThickness + this.padding.y,
                m = p * o,
                g = this._lineSpacing;
            g < 0 && Math.abs(g) > p && (g = -p), 0 !== g && (m += g > 0 ? g * e.length : g * (e.length - 1)), this.canvas.height = m * this._res, this.context.scale(this._res, this._res), navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height), this.style.backgroundColor && (this.context.fillStyle = this.style.backgroundColor, this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)), this.context.fillStyle = this.style.fill, this.context.font = this.style.font, this.context.strokeStyle = this.style.stroke, this.context.textBaseline = "alphabetic", this.context.lineWidth = this.style.strokeThickness, this.context.lineCap = "round", this.context.lineJoin = "round";
            var f, _;
            for (this._charCount = 0, r = 0; r < o; r++) f = this.style.strokeThickness / 2, _ = this.style.strokeThickness / 2 + r * p + a.ascent, r > 0 && (_ += g * r), "right" === this.style.align ? f += n - s[r] : "center" === this.style.align && (f += (n - s[r]) / 2), this.autoRound && (f = Math.round(f), _ = Math.round(_)), this.colors.length > 0 || this.strokeColors.length > 0 || this.fontWeights.length > 0 || this.fontStyles.length > 0 ? this.updateLine(e[r], f, _) : (this.style.stroke && this.style.strokeThickness && (this.updateShadow(this.style.shadowStroke), 0 === i ? this.context.strokeText(e[r], f, _) : this.renderTabLine(e[r], f, _, !1)), this.style.fill && (this.updateShadow(this.style.shadowFill), 0 === i ? this.context.fillText(e[r], f, _) : this.renderTabLine(e[r], f, _, !0)));
            this.updateTexture(), this.dirty = !1
        }, i.Text.prototype.renderTabLine = function(t, e, i, s) {
            var n = t.split(/(?:\t)/),
                a = this.style.tabs,
                o = 0;
            if (Array.isArray(a))
                for (var r = 0, h = 0; h < n.length; h++) h > 0 && (r += a[h - 1]), o = e + r, s ? this.context.fillText(n[h], o, i) : this.context.strokeText(n[h], o, i);
            else
                for (h = 0; h < n.length; h++) {
                    var l = Math.ceil(this.context.measureText(n[h]).width);
                    o = this.game.math.snapToCeil(e, a), s ? this.context.fillText(n[h], o, i) : this.context.strokeText(n[h], o, i), e = o + l
                }
        }, i.Text.prototype.updateShadow = function(t) {
            t ? (this.context.shadowOffsetX = this.style.shadowOffsetX, this.context.shadowOffsetY = this.style.shadowOffsetY, this.context.shadowColor = this.style.shadowColor, this.context.shadowBlur = this.style.shadowBlur) : (this.context.shadowOffsetX = 0, this.context.shadowOffsetY = 0, this.context.shadowColor = 0, this.context.shadowBlur = 0)
        }, i.Text.prototype.measureLine = function(t) {
            for (var e = 0, i = 0; i < t.length; i++) {
                var s = t[i];
                if (this.fontWeights.length > 0 || this.fontStyles.length > 0) {
                    var n = this.fontToComponents(this.context.font);
                    this.fontStyles[this._charCount] && (n.fontStyle = this.fontStyles[this._charCount]), this.fontWeights[this._charCount] && (n.fontWeight = this.fontWeights[this._charCount]), this.context.font = this.componentsToFont(n)
                }
                this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke)), this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill)), e += this.context.measureText(s).width, this._charCount++
            }
            return Math.ceil(e)
        }, i.Text.prototype.updateLine = function(t, e, i) {
            for (var s = 0; s < t.length; s++) {
                var n = t[s];
                if (this.fontWeights.length > 0 || this.fontStyles.length > 0) {
                    var a = this.fontToComponents(this.context.font);
                    this.fontStyles[this._charCount] && (a.fontStyle = this.fontStyles[this._charCount]), this.fontWeights[this._charCount] && (a.fontWeight = this.fontWeights[this._charCount]), this.context.font = this.componentsToFont(a)
                }
                this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke), this.context.strokeText(n, e, i)), this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill), this.context.fillText(n, e, i)), e += this.context.measureText(n).width, this._charCount++
            }
        }, i.Text.prototype.clearColors = function() {
            return this.colors = [], this.strokeColors = [], this.dirty = !0, this
        }, i.Text.prototype.clearFontValues = function() {
            return this.fontStyles = [], this.fontWeights = [], this.dirty = !0, this
        }, i.Text.prototype.addColor = function(t, e) {
            return this.colors[e] = t, this.dirty = !0, this
        }, i.Text.prototype.addStrokeColor = function(t, e) {
            return this.strokeColors[e] = t, this.dirty = !0, this
        }, i.Text.prototype.addFontStyle = function(t, e) {
            return this.fontStyles[e] = t, this.dirty = !0, this
        }, i.Text.prototype.addFontWeight = function(t, e) {
            return this.fontWeights[e] = t, this.dirty = !0, this
        }, i.Text.prototype.precalculateWordWrap = function(t) {
            return this.texture.baseTexture.resolution = this._res, this.context.font = this.style.font, this.runWordWrap(t).split(/(?:\r\n|\r|\n)/)
        }, i.Text.prototype.runWordWrap = function(t) {
            return this.useAdvancedWrap ? this.advancedWordWrap(t) : this.basicWordWrap(t)
        }, i.Text.prototype.advancedWordWrap = function(t) {
            for (var e = this.context, i = this.style.wordWrapWidth, s = "", n = t.replace(/ +/gi, " ").split(/\r?\n/gi), a = n.length, o = 0; o < a; o++) {
                var r = n[o],
                    h = "";
                if (r = r.replace(/^ *|\s*$/gi, ""), e.measureText(r).width < i) s += r + "\n";
                else {
                    for (var l = i, c = r.split(" "), u = 0; u < c.length; u++) {
                        var d = c[u],
                            p = d + " ",
                            m = e.measureText(p).width;
                        if (m > l) {
                            if (0 === u) {
                                for (var g = p; g.length && (g = g.slice(0, -1), !((m = e.measureText(g).width) <= l)););
                                if (!g.length) throw new Error("This text's wordWrapWidth setting is less than a single character!");
                                var f = d.substr(g.length);
                                c[u] = f, h += g
                            }
                            var _ = c[u].length ? u : u + 1,
                                y = c.slice(_).join(" ").replace(/[ \n]*$/gi, "");
                            n[o + 1] = y + " " + (n[o + 1] || ""), a = n.length;
                            break
                        }
                        h += p, l -= m
                    }
                    s += h.replace(/[ \n]*$/gi, "") + "\n"
                }
            }
            return s = s.replace(/[\s|\n]*$/gi, "")
        }, i.Text.prototype.basicWordWrap = function(t) {
            for (var e = "", i = t.split("\n"), s = 0; s < i.length; s++) {
                for (var n = this.style.wordWrapWidth, a = i[s].split(" "), o = 0; o < a.length; o++) {
                    var r = this.context.measureText(a[o]).width,
                        h = r + this.context.measureText(" ").width;
                    h > n ? (o > 0 && (e += "\n"), e += a[o] + " ", n = this.style.wordWrapWidth - r) : (n -= h, e += a[o] + " ")
                }
                s < i.length - 1 && (e += "\n")
            }
            return e
        }, i.Text.prototype.updateFont = function(t) {
            var e = this.componentsToFont(t);
            this.style.font !== e && (this.style.font = e, this.dirty = !0, this.parent && this.updateTransform())
        }, i.Text.prototype.fontToComponents = function(t) {
            var e = t.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);
            if (e) {
                var i = e[5].trim();
                return /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i) || /['",]/.exec(i) || (i = "'" + i + "'"), {
                    font: t,
                    fontStyle: e[1] || "normal",
                    fontVariant: e[2] || "normal",
                    fontWeight: e[3] || "normal",
                    fontSize: e[4] || "medium",
                    fontFamily: i
                }
            }
            return {
                font: t
            }
        }, i.Text.prototype.componentsToFont = function(t) {
            var e, i = [];
            return (e = t.fontStyle) && "normal" !== e && i.push(e), (e = t.fontVariant) && "normal" !== e && i.push(e), (e = t.fontWeight) && "normal" !== e && i.push(e), (e = t.fontSize) && "medium" !== e && i.push(e), (e = t.fontFamily) && i.push(e), i.length || i.push(t.font), i.join(" ")
        }, i.Text.prototype.setText = function(t, e) {
            return void 0 === e && (e = !1), this.text = t.toString() || "", e ? this.updateText() : this.dirty = !0, this
        }, i.Text.prototype.parseList = function(t) {
            if (!Array.isArray(t)) return this;
            for (var e = "", i = 0; i < t.length; i++) Array.isArray(t[i]) ? (e += t[i].join("\t"), i < t.length - 1 && (e += "\n")) : (e += t[i], i < t.length - 1 && (e += "\t"));
            return this.text = e, this.dirty = !0, this
        }, i.Text.prototype.setTextBounds = function(t, e, s, n) {
            return void 0 === t ? this.textBounds = null : (this.textBounds ? this.textBounds.setTo(t, e, s, n) : this.textBounds = new i.Rectangle(t, e, s, n), this.style.wordWrapWidth > s && (this.style.wordWrapWidth = s)), this.updateTexture(), this
        }, i.Text.prototype.updateTexture = function() {
            var t = this.texture.baseTexture,
                e = this.texture.crop,
                i = this.texture.frame,
                s = this.canvas.width,
                n = this.canvas.height;
            if (t.width = s, t.height = n, e.width = s, e.height = n, i.width = s, i.height = n, this.texture.width = s, this.texture.height = n, this._width = s, this._height = n, this.textBounds) {
                var a = this.textBounds.x,
                    o = this.textBounds.y;
                "right" === this.style.boundsAlignH ? a += this.textBounds.width - this.canvas.width / this.resolution : "center" === this.style.boundsAlignH && (a += this.textBounds.halfWidth - this.canvas.width / this.resolution / 2), "bottom" === this.style.boundsAlignV ? o += this.textBounds.height - this.canvas.height / this.resolution : "middle" === this.style.boundsAlignV && (o += this.textBounds.halfHeight - this.canvas.height / this.resolution / 2), this.pivot.x = -a, this.pivot.y = -o
            }
            this.renderable = 0 !== s && 0 !== n, this.texture.requiresReTint = !0, this.texture.baseTexture.dirty()
        }, i.Text.prototype._renderWebGL = function(t) {
            this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype._renderWebGL.call(this, t)
        }, i.Text.prototype._renderCanvas = function(t) {
            this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype._renderCanvas.call(this, t)
        }, i.Text.prototype.determineFontProperties = function(t) {
            var e = i.Text.fontPropertiesCache[t];
            if (!e) {
                e = {};
                var s = i.Text.fontPropertiesCanvas,
                    n = i.Text.fontPropertiesContext;
                n.font = t;
                var a = Math.ceil(n.measureText("|MÉq").width),
                    o = Math.ceil(n.measureText("|MÉq").width),
                    r = 2 * o;
                if (o = 1.4 * o | 0, s.width = a, s.height = r, n.fillStyle = "#f00", n.fillRect(0, 0, a, r), n.font = t, n.textBaseline = "alphabetic", n.fillStyle = "#000", n.fillText("|MÉq", 0, o), !n.getImageData(0, 0, a, r)) return e.ascent = o, e.descent = o + 6, e.fontSize = e.ascent + e.descent, i.Text.fontPropertiesCache[t] = e, e;
                var h, l, c = n.getImageData(0, 0, a, r).data,
                    u = c.length,
                    d = 4 * a,
                    p = 0,
                    m = !1;
                for (h = 0; h < o; h++) {
                    for (l = 0; l < d; l += 4)
                        if (255 !== c[p + l]) {
                            m = !0;
                            break
                        }
                    if (m) break;
                    p += d
                }
                for (e.ascent = o - h, p = u - d, m = !1, h = r; h > o; h--) {
                    for (l = 0; l < d; l += 4)
                        if (255 !== c[p + l]) {
                            m = !0;
                            break
                        }
                    if (m) break;
                    p -= d
                }
                e.descent = h - o, e.descent += 6, e.fontSize = e.ascent + e.descent, i.Text.fontPropertiesCache[t] = e
            }
            return e
        }, i.Text.prototype.getBounds = function(t) {
            return this.dirty && (this.updateText(), this.dirty = !1), PIXI.Sprite.prototype.getBounds.call(this, t)
        }, Object.defineProperty(i.Text.prototype, "text", {
            get: function() {
                return this._text
            },
            set: function(t) {
                t !== this._text && (this._text = t.toString() || "", this.dirty = !0, this.parent && this.updateTransform())
            }
        }), Object.defineProperty(i.Text.prototype, "cssFont", {
            get: function() {
                return this.componentsToFont(this._fontComponents)
            },
            set: function(t) {
                t = t || "bold 20pt Arial", this._fontComponents = this.fontToComponents(t), this.updateFont(this._fontComponents)
            }
        }), Object.defineProperty(i.Text.prototype, "font", {
            get: function() {
                return this._fontComponents.fontFamily
            },
            set: function(t) {
                t = (t = t || "Arial").trim(), /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(t) || /['",]/.exec(t) || (t = "'" + t + "'"), this._fontComponents.fontFamily = t, this.updateFont(this._fontComponents)
            }
        }), Object.defineProperty(i.Text.prototype, "fontSize", {
            get: function() {
                var t = this._fontComponents.fontSize;
                return t && /(?:^0$|px$)/.exec(t) ? parseInt(t, 10) : t
            },
            set: function(t) {
                "number" == typeof(t = t || "0") && (t += "px"), this._fontComponents.fontSize = t, this.updateFont(this._fontComponents)
            }
        }), Object.defineProperty(i.Text.prototype, "fontWeight", {
            get: function() {
                return this._fontComponents.fontWeight || "normal"
            },
            set: function(t) {
                t = t || "normal", this._fontComponents.fontWeight = t, this.updateFont(this._fontComponents)
            }
        }), Object.defineProperty(i.Text.prototype, "fontStyle", {
            get: function() {
                return this._fontComponents.fontStyle || "normal"
            },
            set: function(t) {
                t = t || "normal", this._fontComponents.fontStyle = t, this.updateFont(this._fontComponents)
            }
        }), Object.defineProperty(i.Text.prototype, "fontVariant", {
            get: function() {
                return this._fontComponents.fontVariant || "normal"
            },
            set: function(t) {
                t = t || "normal", this._fontComponents.fontVariant = t, this.updateFont(this._fontComponents)
            }
        }), Object.defineProperty(i.Text.prototype, "fill", {
            get: function() {
                return this.style.fill
            },
            set: function(t) {
                t !== this.style.fill && (this.style.fill = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "align", {
            get: function() {
                return this.style.align
            },
            set: function(t) {
                t !== this.style.align && (this.style.align = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "resolution", {
            get: function() {
                return this._res
            },
            set: function(t) {
                t !== this._res && (this._res = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "tabs", {
            get: function() {
                return this.style.tabs
            },
            set: function(t) {
                t !== this.style.tabs && (this.style.tabs = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "boundsAlignH", {
            get: function() {
                return this.style.boundsAlignH
            },
            set: function(t) {
                t !== this.style.boundsAlignH && (this.style.boundsAlignH = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "boundsAlignV", {
            get: function() {
                return this.style.boundsAlignV
            },
            set: function(t) {
                t !== this.style.boundsAlignV && (this.style.boundsAlignV = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "stroke", {
            get: function() {
                return this.style.stroke
            },
            set: function(t) {
                t !== this.style.stroke && (this.style.stroke = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "strokeThickness", {
            get: function() {
                return this.style.strokeThickness
            },
            set: function(t) {
                t !== this.style.strokeThickness && (this.style.strokeThickness = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "wordWrap", {
            get: function() {
                return this.style.wordWrap
            },
            set: function(t) {
                t !== this.style.wordWrap && (this.style.wordWrap = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "wordWrapWidth", {
            get: function() {
                return this.style.wordWrapWidth
            },
            set: function(t) {
                t !== this.style.wordWrapWidth && (this.style.wordWrapWidth = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "lineSpacing", {
            get: function() {
                return this._lineSpacing
            },
            set: function(t) {
                t !== this._lineSpacing && (this._lineSpacing = parseFloat(t), this.dirty = !0, this.parent && this.updateTransform())
            }
        }), Object.defineProperty(i.Text.prototype, "shadowOffsetX", {
            get: function() {
                return this.style.shadowOffsetX
            },
            set: function(t) {
                t !== this.style.shadowOffsetX && (this.style.shadowOffsetX = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "shadowOffsetY", {
            get: function() {
                return this.style.shadowOffsetY
            },
            set: function(t) {
                t !== this.style.shadowOffsetY && (this.style.shadowOffsetY = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "shadowColor", {
            get: function() {
                return this.style.shadowColor
            },
            set: function(t) {
                t !== this.style.shadowColor && (this.style.shadowColor = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "shadowBlur", {
            get: function() {
                return this.style.shadowBlur
            },
            set: function(t) {
                t !== this.style.shadowBlur && (this.style.shadowBlur = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "shadowStroke", {
            get: function() {
                return this.style.shadowStroke
            },
            set: function(t) {
                t !== this.style.shadowStroke && (this.style.shadowStroke = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "shadowFill", {
            get: function() {
                return this.style.shadowFill
            },
            set: function(t) {
                t !== this.style.shadowFill && (this.style.shadowFill = t, this.dirty = !0)
            }
        }), Object.defineProperty(i.Text.prototype, "width", {
            get: function() {
                return this.dirty && (this.updateText(), this.dirty = !1), this.scale.x * this.texture.frame.width
            },
            set: function(t) {
                this.scale.x = t / this.texture.frame.width, this._width = t
            }
        }), Object.defineProperty(i.Text.prototype, "height", {
            get: function() {
                return this.dirty && (this.updateText(), this.dirty = !1), this.scale.y * this.texture.frame.height
            },
            set: function(t) {
                this.scale.y = t / this.texture.frame.height, this._height = t
            }
        }), i.Text.fontPropertiesCache = {}, i.Text.fontPropertiesCanvas = document.createElement("canvas"), i.Text.fontPropertiesContext = i.Text.fontPropertiesCanvas.getContext("2d"), i.BitmapText = function(t, e, s, n, a, o, r) {
            e = e || 0, s = s || 0, n = n || "", a = a || "", o = o || 32, r = r || "left", PIXI.DisplayObjectContainer.call(this), this.type = i.BITMAPTEXT, this.physicsType = i.SPRITE, this.textWidth = 0, this.textHeight = 0, this.anchor = new i.Point, this._prevAnchor = new i.Point, this._glyphs = [], this._maxWidth = 0, this._text = a.toString() || "", this._data = t.cache.getBitmapFont(n), this._font = n, this._fontSize = o, this._align = r, this._tint = 16777215, this.updateText(), this.dirty = !1, i.Component.Core.init.call(this, t, e, s, "", null)
        }, i.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype), i.BitmapText.prototype.constructor = i.BitmapText, i.Component.Core.install.call(i.BitmapText.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]), i.BitmapText.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.BitmapText.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.BitmapText.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.BitmapText.prototype.preUpdateCore = i.Component.Core.preUpdate, i.BitmapText.prototype.preUpdate = function() {
            return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
        }, i.BitmapText.prototype.postUpdate = function() {
            i.Component.PhysicsBody.postUpdate.call(this), i.Component.FixedToCamera.postUpdate.call(this), this.body && this.body.type === i.Physics.ARCADE && (this.textWidth === this.body.sourceWidth && this.textHeight === this.body.sourceHeight || this.body.setSize(this.textWidth, this.textHeight))
        }, i.BitmapText.prototype.setText = function(t) {
            this.text = t
        }, i.BitmapText.prototype.scanLine = function(t, e, i) {
            for (var s = 0, n = 0, a = -1, o = 0, r = null, h = this._maxWidth > 0 ? this._maxWidth : null, l = [], c = 0; c < i.length; c++) {
                var u = c === i.length - 1;
                if (/(?:\r\n|\r|\n)/.test(i.charAt(c))) return {
                    width: n,
                    text: i.substr(0, c),
                    end: u,
                    chars: l
                };
                var d = i.charCodeAt(c),
                    p = t.chars[d],
                    m = 0;
                void 0 === p && (d = 32, p = t.chars[d]);
                var g = r && p.kerning[r] ? p.kerning[r] : 0;
                if (/(\s)/.test(i.charAt(c)) && (a = c, o = n), m = (g + p.texture.width + p.xOffset) * e, h && n + m >= h && a > -1) return {
                    width: o || n,
                    text: i.substr(0, c - (c - a)),
                    end: u,
                    chars: l
                };
                n += (p.xAdvance + g) * e, l.push(s + (p.xOffset + g) * e), s += (p.xAdvance + g) * e, r = d
            }
            return {
                width: n,
                text: i,
                end: u,
                chars: l
            }
        }, i.BitmapText.prototype.cleanText = function(t, e) {
            void 0 === e && (e = "");
            var i = this._data.font;
            if (!i) return "";
            for (var s = /\r\n|\n\r|\n|\r/g, n = t.replace(s, "\n").split("\n"), a = 0; a < n.length; a++) {
                for (var o = "", r = n[a], h = 0; h < r.length; h++) o = i.chars[r.charCodeAt(h)] ? o.concat(r[h]) : o.concat(e);
                n[a] = o
            }
            return n.join("\n")
        }, i.BitmapText.prototype.updateText = function() {
            var t = this._data.font;
            if (t) {
                var e = this.text,
                    i = this._fontSize / t.size,
                    s = [],
                    n = 0;
                this.textWidth = 0;
                do {
                    (c = this.scanLine(t, i, e)).y = n, s.push(c), c.width > this.textWidth && (this.textWidth = c.width), n += t.lineHeight * i, e = e.substr(c.text.length + 1)
                } while (!1 === c.end);
                this.textHeight = n;
                for (var a = 0, o = 0, r = this.textWidth * this.anchor.x, h = this.textHeight * this.anchor.y, l = 0; l < s.length; l++) {
                    var c = s[l];
                    "right" === this._align ? o = this.textWidth - c.width : "center" === this._align && (o = (this.textWidth - c.width) / 2);
                    for (var u = 0; u < c.text.length; u++) {
                        var d = c.text.charCodeAt(u),
                            p = t.chars[d];
                        void 0 === p && (d = 32, p = t.chars[d]);
                        var m = this._glyphs[a];
                        m ? m.texture = p.texture : ((m = new PIXI.Sprite(p.texture)).name = c.text[u], this._glyphs.push(m)), m.position.x = c.chars[u] + o - r, m.position.y = c.y + p.yOffset * i - h, m.scale.set(i), m.tint = this.tint, m.texture.requiresReTint = !0, m.parent || this.addChild(m), a++
                    }
                }
                for (l = a; l < this._glyphs.length; l++) this.removeChild(this._glyphs[l])
            }
        }, i.BitmapText.prototype.purgeGlyphs = function() {
            for (var t = this._glyphs.length, e = [], i = 0; i < this._glyphs.length; i++) this._glyphs[i].parent !== this ? this._glyphs[i].destroy() : e.push(this._glyphs[i]);
            return this._glyphs = [], this._glyphs = e, this.updateText(), t - e.length
        }, i.BitmapText.prototype.updateTransform = function() {
            !this.dirty && this.anchor.equals(this._prevAnchor) || (this.updateText(), this.dirty = !1, this._prevAnchor.copyFrom(this.anchor)), PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)
        }, Object.defineProperty(i.BitmapText.prototype, "align", {
            get: function() {
                return this._align
            },
            set: function(t) {
                t === this._align || "left" !== t && "center" !== t && "right" !== t || (this._align = t, this.updateText())
            }
        }), Object.defineProperty(i.BitmapText.prototype, "tint", {
            get: function() {
                return this._tint
            },
            set: function(t) {
                t !== this._tint && (this._tint = t, this.updateText())
            }
        }), Object.defineProperty(i.BitmapText.prototype, "font", {
            get: function() {
                return this._font
            },
            set: function(t) {
                t !== this._font && (this._font = t.trim(), this._data = this.game.cache.getBitmapFont(this._font), this.updateText())
            }
        }), Object.defineProperty(i.BitmapText.prototype, "fontSize", {
            get: function() {
                return this._fontSize
            },
            set: function(t) {
                (t = parseInt(t, 10)) !== this._fontSize && t > 0 && (this._fontSize = t, this.updateText())
            }
        }), Object.defineProperty(i.BitmapText.prototype, "text", {
            get: function() {
                return this._text
            },
            set: function(t) {
                t !== this._text && (this._text = t.toString() || "", this.updateText())
            }
        }), Object.defineProperty(i.BitmapText.prototype, "maxWidth", {
            get: function() {
                return this._maxWidth
            },
            set: function(t) {
                t !== this._maxWidth && (this._maxWidth = t, this.updateText())
            }
        }), Object.defineProperty(i.BitmapText.prototype, "smoothed", {
            get: function() {
                return !this._data.base.scaleMode
            },
            set: function(t) {
                this._data.base.scaleMode = t ? 0 : 1
            }
        }), i.RetroFont = function(t, e, s, n, a, o, r, h, l, c) {
            if (!t.cache.checkImageKey(e)) return !1;
            void 0 !== o && null !== o || (o = t.cache.getImage(e).width / s), this.characterWidth = s, this.characterHeight = n, this.characterSpacingX = r || 0, this.characterSpacingY = h || 0, this.characterPerRow = o, this.offsetX = l || 0, this.offsetY = c || 0, this.align = "left", this.multiLine = !1, this.autoUpperCase = !0, this.customSpacingX = 0, this.customSpacingY = 0, this.fixedWidth = 0, this.fontSet = t.cache.getImage(e), this._text = "", this.grabData = [], this.frameData = new i.FrameData;
            for (var u = this.offsetX, d = this.offsetY, p = 0, m = 0; m < a.length; m++) {
                var g = this.frameData.addFrame(new i.Frame(m, u, d, this.characterWidth, this.characterHeight));
                this.grabData[a.charCodeAt(m)] = g.index, ++p === this.characterPerRow ? (p = 0, u = this.offsetX, d += this.characterHeight + this.characterSpacingY) : u += this.characterWidth + this.characterSpacingX
            }
            t.cache.updateFrameData(e, this.frameData), this.stamp = new i.Image(t, 0, 0, e, 0), i.RenderTexture.call(this, t, 100, 100, "", i.scaleModes.NEAREST), this.type = i.RETROFONT
        }, i.RetroFont.prototype = Object.create(i.RenderTexture.prototype), i.RetroFont.prototype.constructor = i.RetroFont, i.RetroFont.ALIGN_LEFT = "left", i.RetroFont.ALIGN_RIGHT = "right", i.RetroFont.ALIGN_CENTER = "center", i.RetroFont.TEXT_SET1 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~", i.RetroFont.TEXT_SET2 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ", i.RetroFont.TEXT_SET3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ", i.RetroFont.TEXT_SET4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789", i.RetroFont.TEXT_SET5 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789", i.RetroFont.TEXT_SET6 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ", i.RetroFont.TEXT_SET7 = "AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39", i.RetroFont.TEXT_SET8 = "0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ", i.RetroFont.TEXT_SET9 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!", i.RetroFont.TEXT_SET10 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ", i.RetroFont.TEXT_SET11 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789", i.RetroFont.prototype.setFixedWidth = function(t, e) {
            void 0 === e && (e = "left"), this.fixedWidth = t, this.align = e
        }, i.RetroFont.prototype.setText = function(t, e, i, s, n, a) {
            this.multiLine = e || !1, this.customSpacingX = i || 0, this.customSpacingY = s || 0, this.align = n || "left", this.autoUpperCase = !a, t.length > 0 && (this.text = t)
        }, i.RetroFont.prototype.buildRetroFontText = function() {
            var t = 0,
                e = 0;
            if (this.clear(), this.multiLine) {
                var s = this._text.split("\n");
                this.fixedWidth > 0 ? this.resize(this.fixedWidth, s.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0) : this.resize(this.getLongestLine() * (this.characterWidth + this.customSpacingX), s.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0);
                for (var n = 0; n < s.length; n++) t = 0, this.align === i.RetroFont.ALIGN_RIGHT ? t = this.width - s[n].length * (this.characterWidth + this.customSpacingX) : this.align === i.RetroFont.ALIGN_CENTER && (t = this.width / 2 - s[n].length * (this.characterWidth + this.customSpacingX) / 2, t += this.customSpacingX / 2), t < 0 && (t = 0), this.pasteLine(s[n], t, e, this.customSpacingX), e += this.characterHeight + this.customSpacingY
            } else this.fixedWidth > 0 ? this.resize(this.fixedWidth, this.characterHeight, !0) : this.resize(this._text.length * (this.characterWidth + this.customSpacingX), this.characterHeight, !0), t = 0, this.align === i.RetroFont.ALIGN_RIGHT ? t = this.width - this._text.length * (this.characterWidth + this.customSpacingX) : this.align === i.RetroFont.ALIGN_CENTER && (t = this.width / 2 - this._text.length * (this.characterWidth + this.customSpacingX) / 2, t += this.customSpacingX / 2), t < 0 && (t = 0), this.pasteLine(this._text, t, 0, this.customSpacingX);
            this.requiresReTint = !0
        }, i.RetroFont.prototype.pasteLine = function(t, e, i, s) {
            for (var n = 0; n < t.length; n++)
                if (" " === t.charAt(n)) e += this.characterWidth + s;
                else if (this.grabData[t.charCodeAt(n)] >= 0 && (this.stamp.frame = this.grabData[t.charCodeAt(n)], this.renderXY(this.stamp, e, i, !1), (e += this.characterWidth + s) > this.width)) break
        }, i.RetroFont.prototype.getLongestLine = function() {
            var t = 0;
            if (this._text.length > 0)
                for (var e = this._text.split("\n"), i = 0; i < e.length; i++) e[i].length > t && (t = e[i].length);
            return t
        }, i.RetroFont.prototype.removeUnsupportedCharacters = function(t) {
            for (var e = "", i = 0; i < this._text.length; i++) {
                var s = this._text[i],
                    n = s.charCodeAt(0);
                (this.grabData[n] >= 0 || !t && "\n" === s) && (e = e.concat(s))
            }
            return e
        }, i.RetroFont.prototype.updateOffset = function(t, e) {
            if (this.offsetX !== t || this.offsetY !== e) {
                for (var i = t - this.offsetX, s = e - this.offsetY, n = this.game.cache.getFrameData(this.stamp.key).getFrames(), a = n.length; a--;) n[a].x += i, n[a].y += s;
                this.buildRetroFontText()
            }
        }, Object.defineProperty(i.RetroFont.prototype, "text", {
            get: function() {
                return this._text
            },
            set: function(t) {
                var e;
                (e = this.autoUpperCase ? t.toUpperCase() : t) !== this._text && (this._text = e, this.removeUnsupportedCharacters(this.multiLine), this.buildRetroFontText())
            }
        }), Object.defineProperty(i.RetroFont.prototype, "smoothed", {
            get: function() {
                return this.stamp.smoothed
            },
            set: function(t) {
                this.stamp.smoothed = t, this.buildRetroFontText()
            }
        }), i.Rope = function(t, e, s, n, a, o) {
            this.points = [], this.points = o, this._hasUpdateAnimation = !1, this._updateAnimationCallback = null, e = e || 0, s = s || 0, n = n || null, a = a || null, this.type = i.ROPE, PIXI.Rope.call(this, i.Cache.DEFAULT, this.points), i.Component.Core.init.call(this, t, e, s, n, a)
        }, i.Rope.prototype = Object.create(PIXI.Rope.prototype), i.Rope.prototype.constructor = i.Rope, i.Component.Core.install.call(i.Rope.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Crop", "Delta", "Destroy", "FixedToCamera", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "ScaleMinMax", "Smoothed"]), i.Rope.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.Rope.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.Rope.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.Rope.prototype.preUpdateCore = i.Component.Core.preUpdate, i.Rope.prototype.preUpdate = function() {
            return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
        }, i.Rope.prototype.update = function() {
            this._hasUpdateAnimation && this.updateAnimation.call(this)
        }, i.Rope.prototype.reset = function(t, e) {
            return i.Component.Reset.prototype.reset.call(this, t, e), this
        }, Object.defineProperty(i.Rope.prototype, "updateAnimation", {
            get: function() {
                return this._updateAnimation
            },
            set: function(t) {
                t && "function" == typeof t ? (this._hasUpdateAnimation = !0, this._updateAnimation = t) : (this._hasUpdateAnimation = !1, this._updateAnimation = null)
            }
        }), Object.defineProperty(i.Rope.prototype, "segments", {
            get: function() {
                for (var t, e, s, n, a, o, r, h, l = [], c = 0; c < this.points.length; c++) t = 4 * c, e = this.vertices[t] * this.scale.x, s = this.vertices[t + 1] * this.scale.y, n = this.vertices[t + 4] * this.scale.x, a = this.vertices[t + 3] * this.scale.y, o = i.Math.difference(e, n), r = i.Math.difference(s, a), e += this.world.x, s += this.world.y, h = new i.Rectangle(e, s, o, r), l.push(h);
                return l
            }
        }), i.TileSprite = function(t, e, s, n, a, o, r) {
            e = e || 0, s = s || 0, n = n || 256, a = a || 256, o = o || null, r = r || null, this.type = i.TILESPRITE, this.physicsType = i.SPRITE, this._scroll = new i.Point;
            var h = t.cache.getImage("__default", !0);
            PIXI.TilingSprite.call(this, new PIXI.Texture(h.base), n, a), i.Component.Core.init.call(this, t, e, s, o, r)
        }, i.TileSprite.prototype = Object.create(PIXI.TilingSprite.prototype), i.TileSprite.prototype.constructor = i.TileSprite, i.Component.Core.install.call(i.TileSprite.prototype, ["Angle", "Animation", "AutoCull", "Bounds", "BringToTop", "Destroy", "FixedToCamera", "Health", "InCamera", "InputEnabled", "InWorld", "LifeSpan", "LoadTexture", "Overlap", "PhysicsBody", "Reset", "Smoothed"]), i.TileSprite.prototype.preUpdatePhysics = i.Component.PhysicsBody.preUpdate, i.TileSprite.prototype.preUpdateLifeSpan = i.Component.LifeSpan.preUpdate, i.TileSprite.prototype.preUpdateInWorld = i.Component.InWorld.preUpdate, i.TileSprite.prototype.preUpdateCore = i.Component.Core.preUpdate, i.TileSprite.prototype.preUpdate = function() {
            return 0 !== this._scroll.x && (this.tilePosition.x += this._scroll.x * this.game.time.physicsElapsed), 0 !== this._scroll.y && (this.tilePosition.y += this._scroll.y * this.game.time.physicsElapsed), !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
        }, i.TileSprite.prototype.autoScroll = function(t, e) {
            this._scroll.set(t, e)
        }, i.TileSprite.prototype.stopScroll = function() {
            this._scroll.set(0, 0)
        }, i.TileSprite.prototype.destroy = function(t) {
            i.Component.Destroy.prototype.destroy.call(this, t), PIXI.TilingSprite.prototype.destroy.call(this)
        }, i.TileSprite.prototype.reset = function(t, e) {
            return i.Component.Reset.prototype.reset.call(this, t, e), this.tilePosition.x = 0, this.tilePosition.y = 0, this
        }, i.Device = function() {
            this.deviceReadyAt = 0, this.initialized = !1, this.desktop = !1, this.iOS = !1, this.iOSVersion = 0, this.cocoonJS = !1, this.cocoonJSApp = !1, this.cordova = !1, this.node = !1, this.nodeWebkit = !1, this.electron = !1, this.ejecta = !1, this.crosswalk = !1, this.android = !1, this.chromeOS = !1, this.linux = !1, this.macOS = !1, this.windows = !1, this.windowsPhone = !1, this.canvas = !1, this.canvasBitBltShift = null, this.webGL = !1, this.file = !1, this.fileSystem = !1, this.localStorage = !1, this.worker = !1, this.css3D = !1, this.pointerLock = !1, this.typedArray = !1, this.vibration = !1, this.getUserMedia = !0, this.quirksMode = !1, this.touch = !1, this.mspointer = !1, this.wheelEvent = null, this.arora = !1, this.chrome = !1, this.chromeVersion = 0, this.epiphany = !1, this.firefox = !1, this.firefoxVersion = 0, this.ie = !1, this.ieVersion = 0, this.trident = !1, this.tridentVersion = 0, this.edge = !1, this.mobileSafari = !1, this.midori = !1, this.opera = !1, this.safari = !1, this.safariVersion = 0, this.webApp = !1, this.silk = !1, this.audioData = !1, this.webAudio = !1, this.ogg = !1, this.opus = !1, this.mp3 = !1, this.wav = !1, this.m4a = !1, this.webm = !1, this.dolby = !1, this.oggVideo = !1, this.h264Video = !1, this.mp4Video = !1, this.webmVideo = !1, this.vp9Video = !1, this.hlsVideo = !1, this.iPhone = !1, this.iPhone4 = !1, this.iPad = !1, this.pixelRatio = 0, this.littleEndian = !1, this.LITTLE_ENDIAN = !1, this.support32bit = !1, this.fullscreen = !1, this.requestFullscreen = "", this.cancelFullscreen = "", this.fullscreenKeyboard = !1
        }, i.Device = new i.Device, i.Device.onInitialized = new i.Signal, i.Device.whenReady = function(t, e, i) {
            var s = this._readyCheck;
            if (this.deviceReadyAt || !s) t.call(e, this);
            else if (s._monitor || i) s._queue = s._queue || [], s._queue.push([t, e]);
            else {
                s._monitor = s.bind(this), s._queue = s._queue || [], s._queue.push([t, e]);
                var n = void 0 !== window.cordova,
                    a = navigator.isCocoonJS;
                "complete" === document.readyState || "interactive" === document.readyState ? window.setTimeout(s._monitor, 0) : n && !a ? document.addEventListener("deviceready", s._monitor, !1) : (document.addEventListener("DOMContentLoaded", s._monitor, !1), window.addEventListener("load", s._monitor, !1))
            }
        }, i.Device._readyCheck = function() {
            var t = this._readyCheck;
            if (document.body) {
                if (!this.deviceReadyAt) {
                    this.deviceReadyAt = Date.now(), document.removeEventListener("deviceready", t._monitor), document.removeEventListener("DOMContentLoaded", t._monitor), window.removeEventListener("load", t._monitor), this._initialize(), this.initialized = !0, this.onInitialized.dispatch(this);
                    for (var e; e = t._queue.shift();) {
                        var i = e[0],
                            s = e[1];
                        i.call(s, this)
                    }
                    this._readyCheck = null, this._initialize = null, this.onInitialized = null
                }
            } else window.setTimeout(t._monitor, 20)
        }, i.Device._initialize = function() {
            function t() {
                var t = new ArrayBuffer(4),
                    e = new Uint8Array(t),
                    i = new Uint32Array(t);
                return e[0] = 161, e[1] = 178, e[2] = 195, e[3] = 212, 3569595041 === i[0] || 2712847316 !== i[0] && null
            }

            function e() {
                if (void 0 === Uint8ClampedArray) return !1;
                var t = PIXI.CanvasPool.create(this, 1, 1).getContext("2d");
                if (!t) return !1;
                var e = t.createImageData(1, 1);
                return PIXI.CanvasPool.remove(this), e.data instanceof Uint8ClampedArray
            }
            var i = this;
            ! function() {
                var t = navigator.userAgent;
                /Playstation Vita/.test(t) ? i.vita = !0 : /Kindle/.test(t) || /\bKF[A-Z][A-Z]+/.test(t) || /Silk.*Mobile Safari/.test(t) ? i.kindle = !0 : /Android/.test(t) ? i.android = !0 : /CrOS/.test(t) ? i.chromeOS = !0 : /iP[ao]d|iPhone/i.test(t) ? (i.iOS = !0, navigator.appVersion.match(/OS (\d+)/), i.iOSVersion = parseInt(RegExp.$1, 10)) : /Linux/.test(t) ? i.linux = !0 : /Mac OS/.test(t) ? i.macOS = !0 : /Windows/.test(t) && (i.windows = !0), (/Windows Phone/i.test(t) || /IEMobile/i.test(t)) && (i.android = !1, i.iOS = !1, i.macOS = !1, i.windows = !0, i.windowsPhone = !0);
                var e = /Silk/.test(t);
                (i.windows || i.macOS || i.linux && !e || i.chromeOS) && (i.desktop = !0), (i.windowsPhone || /Windows NT/i.test(t) && /Touch/i.test(t)) && (i.desktop = !1)
            }(),
            function() {
                var t = navigator.userAgent;
                if (/Arora/.test(t) ? i.arora = !0 : /Edge\/\d+/.test(t) ? i.edge = !0 : /Chrome\/(\d+)/.test(t) && !i.windowsPhone ? (i.chrome = !0, i.chromeVersion = parseInt(RegExp.$1, 10)) : /Epiphany/.test(t) ? i.epiphany = !0 : /Firefox\D+(\d+)/.test(t) ? (i.firefox = !0, i.firefoxVersion = parseInt(RegExp.$1, 10)) : /AppleWebKit/.test(t) && i.iOS ? i.mobileSafari = !0 : /MSIE (\d+\.\d+);/.test(t) ? (i.ie = !0, i.ieVersion = parseInt(RegExp.$1, 10)) : /Midori/.test(t) ? i.midori = !0 : /Opera/.test(t) ? i.opera = !0 : /Safari\/(\d+)/.test(t) && !i.windowsPhone ? (i.safari = !0, /Version\/(\d+)\./.test(t) && (i.safariVersion = parseInt(RegExp.$1, 10))) : /Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t) && (i.ie = !0, i.trident = !0, i.tridentVersion = parseInt(RegExp.$1, 10), i.ieVersion = parseInt(RegExp.$3, 10)), /Silk/.test(t) && (i.silk = !0), navigator.standalone && (i.webApp = !0), void 0 !== window.cordova && (i.cordova = !0), "undefined" != typeof process && "undefined" != typeof require && (i.node = !0), i.node && "object" == typeof process.versions && (i.nodeWebkit = !!process.versions["node-webkit"], i.electron = !!process.versions.electron), navigator.isCocoonJS && (i.cocoonJS = !0), i.cocoonJS) try {
                    i.cocoonJSApp = "undefined" != typeof CocoonJS
                } catch (t) {
                    i.cocoonJSApp = !1
                }
                void 0 !== window.ejecta && (i.ejecta = !0), /Crosswalk/.test(t) && (i.crosswalk = !0)
            }(),
            function() {
                i.audioData = !!window.Audio, i.webAudio = !(!window.AudioContext && !window.webkitAudioContext);
                var t = document.createElement("audio");
                try {
                    if (t.canPlayType && (t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "") && (i.ogg = !0), (t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, "") || t.canPlayType("audio/opus;").replace(/^no$/, "")) && (i.opus = !0), t.canPlayType("audio/mpeg;").replace(/^no$/, "") && (i.mp3 = !0), t.canPlayType('audio/wav; codecs="1"').replace(/^no$/, "") && (i.wav = !0), (t.canPlayType("audio/x-m4a;") || t.canPlayType("audio/aac;").replace(/^no$/, "")) && (i.m4a = !0), t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "") && (i.webm = !0), "" !== t.canPlayType('audio/mp4;codecs="ec-3"')))
                        if (i.edge) i.dolby = !0;
                        else if (i.safari && i.safariVersion >= 9 && /Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)) {
                        var e = parseInt(RegExp.$1, 10),
                            s = parseInt(RegExp.$2, 10);
                        (10 === e && s >= 11 || e > 10) && (i.dolby = !0)
                    }
                } catch (t) {}
            }(),
            function() {
                var t = document.createElement("video");
                try {
                    !!t.canPlayType && (t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, "") && (i.oggVideo = !0), t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, "") && (i.h264Video = !0, i.mp4Video = !0), t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "") && (i.webmVideo = !0), t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/, "") && (i.vp9Video = !0), t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/, "") && (i.hlsVideo = !0))
                } catch (t) {}
            }(),
            function() {
                var t, e = document.createElement("p"),
                    s = {
                        webkitTransform: "-webkit-transform",
                        OTransform: "-o-transform",
                        msTransform: "-ms-transform",
                        MozTransform: "-moz-transform",
                        transform: "transform"
                    };
                document.body.insertBefore(e, null);
                for (var n in s) void 0 !== e.style[n] && (e.style[n] = "translate3d(1px,1px,1px)", t = window.getComputedStyle(e).getPropertyValue(s[n]));
                document.body.removeChild(e), i.css3D = void 0 !== t && t.length > 0 && "none" !== t
            }(), i.pixelRatio = window.devicePixelRatio || 1, i.iPhone = -1 !== navigator.userAgent.toLowerCase().indexOf("iphone"), i.iPhone4 = 2 === i.pixelRatio && i.iPhone, i.iPad = -1 !== navigator.userAgent.toLowerCase().indexOf("ipad"), "undefined" != typeof Int8Array ? i.typedArray = !0 : i.typedArray = !1, "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array && "undefined" != typeof Uint32Array && (i.littleEndian = t(), i.LITTLE_ENDIAN = i.littleEndian), i.support32bit = "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8ClampedArray && "undefined" != typeof Int32Array && null !== i.littleEndian && e(), navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate, navigator.vibrate && (i.vibration = !0),
                function() {
                    i.canvas = !!window.CanvasRenderingContext2D || i.cocoonJS;
                    try {
                        i.localStorage = !!localStorage.getItem
                    } catch (t) {
                        i.localStorage = !1
                    }
                    i.file = !!(window.File && window.FileReader && window.FileList && window.Blob), i.fileSystem = !!window.requestFileSystem;
                    var t = {
                        stencil: !0
                    };
                    i.webGL = function() {
                        try {
                            var e = document.createElement("canvas");
                            return e.screencanvas = !1, !!window.WebGLRenderingContext && (e.getContext("webgl", t) || e.getContext("experimental-webgl", t))
                        } catch (t) {
                            return !1
                        }
                    }(), i.webGL = !!i.webGL, i.worker = !!window.Worker, i.pointerLock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document, i.quirksMode = "CSS1Compat" !== document.compatMode, navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia, window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL, i.getUserMedia = i.getUserMedia && !!navigator.getUserMedia && !!window.URL, i.firefox && i.firefoxVersion < 21 && (i.getUserMedia = !1), !i.iOS && (i.ie || i.firefox || i.chrome) && (i.canvasBitBltShift = !0), (i.safari || i.mobileSafari) && (i.canvasBitBltShift = !1)
                }(),
                function() {
                    for (var t = ["requestFullscreen", "requestFullScreen", "webkitRequestFullscreen", "webkitRequestFullScreen", "msRequestFullscreen", "msRequestFullScreen", "mozRequestFullScreen", "mozRequestFullscreen"], e = document.createElement("div"), s = 0; s < t.length; s++)
                        if (e[t[s]]) {
                            i.fullscreen = !0, i.requestFullscreen = t[s];
                            break
                        }
                    var n = ["cancelFullScreen", "exitFullscreen", "webkitCancelFullScreen", "webkitExitFullscreen", "msCancelFullScreen", "msExitFullscreen", "mozCancelFullScreen", "mozExitFullscreen"];
                    if (i.fullscreen)
                        for (s = 0; s < n.length; s++)
                            if (document[n[s]]) {
                                i.cancelFullscreen = n[s];
                                break
                            }
                    window.Element && Element.ALLOW_KEYBOARD_INPUT && (i.fullscreenKeyboard = !0)
                }(), ("ontouchstart" in document.documentElement || window.navigator.maxTouchPoints && window.navigator.maxTouchPoints >= 1) && (i.touch = !0), (window.navigator.msPointerEnabled || window.navigator.pointerEnabled) && (i.mspointer = !0), i.cocoonJS || ("onwheel" in window || i.ie && "WheelEvent" in window ? i.wheelEvent = "wheel" : "onmousewheel" in window ? i.wheelEvent = "mousewheel" : i.firefox && "MouseScrollEvent" in window && (i.wheelEvent = "DOMMouseScroll"))
        }, i.Device.canPlayAudio = function(t) {
            return !("mp3" !== t || !this.mp3) || (!("ogg" !== t || !this.ogg && !this.opus) || (!("m4a" !== t || !this.m4a) || (!("opus" !== t || !this.opus) || (!("wav" !== t || !this.wav) || (!("webm" !== t || !this.webm) || !("mp4" !== t || !this.dolby))))))
        }, i.Device.canPlayVideo = function(t) {
            return !("webm" !== t || !this.webmVideo && !this.vp9Video) || (!("mp4" !== t || !this.mp4Video && !this.h264Video) || (!("ogg" !== t && "ogv" !== t || !this.oggVideo) || !("mpeg" !== t || !this.hlsVideo)))
        }, i.Device.isConsoleOpen = function() {
            return !(!window.console || !window.console.firebug) || !(!window.console || (console.clear, !console.profiles)) && console.profiles.length > 0
        }, i.Device.isAndroidStockBrowser = function() {
            var t = window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);
            return t && t[1] < 537
        }, i.Canvas = {
            create: function(t, e, i, s, n) {
                e = e || 256, i = i || 256;
                var a = n ? document.createElement("canvas") : PIXI.CanvasPool.create(t, e, i);
                return "string" == typeof s && "" !== s && (a.id = s), a.width = e, a.height = i, a.style.display = "block", a
            },
            setBackgroundColor: function(t, e) {
                return e = e || "rgb(0,0,0)", t.style.backgroundColor = e, t
            },
            setTouchAction: function(t, e) {
                return e = e || "none", t.style.msTouchAction = e, t.style["ms-touch-action"] = e, t.style["touch-action"] = e, t
            },
            setUserSelect: function(t, e) {
                return e = e || "none", t.style["-webkit-touch-callout"] = e, t.style["-webkit-user-select"] = e, t.style["-khtml-user-select"] = e, t.style["-moz-user-select"] = e, t.style["-ms-user-select"] = e, t.style["user-select"] = e, t.style["-webkit-tap-highlight-color"] = "rgba(0, 0, 0, 0)", t
            },
            addToDOM: function(t, e, i) {
                var s;
                return void 0 === i && (i = !0), e && ("string" == typeof e ? s = document.getElementById(e) : "object" == typeof e && 1 === e.nodeType && (s = e)), s || (s = document.body), i && s.style && (s.style.overflow = "hidden"), s.appendChild(t), t
            },
            removeFromDOM: function(t) {
                t.parentNode && t.parentNode.removeChild(t)
            },
            setTransform: function(t, e, i, s, n, a, o) {
                return t.setTransform(s, a, o, n, e, i), t
            },
            setSmoothingEnabled: function(t, e) {
                var s = i.Canvas.getSmoothingPrefix(t);
                return s && (t[s] = e), t
            },
            getSmoothingPrefix: function(t) {
                var e = ["i", "webkitI", "msI", "mozI", "oI"];
                for (var i in e) {
                    var s = e[i] + "mageSmoothingEnabled";
                    if (s in t) return s
                }
                return null
            },
            getSmoothingEnabled: function(t) {
                var e = i.Canvas.getSmoothingPrefix(t);
                if (e) return t[e]
            },
            setImageRenderingCrisp: function(t) {
                for (var e = ["optimizeSpeed", "crisp-edges", "-moz-crisp-edges", "-webkit-optimize-contrast", "optimize-contrast", "pixelated"], i = 0; i < e.length; i++) t.style["image-rendering"] = e[i];
                return t.style.msInterpolationMode = "nearest-neighbor", t
            },
            setImageRenderingBicubic: function(t) {
                return t.style["image-rendering"] = "auto", t.style.msInterpolationMode = "bicubic", t
            }
        }, i.RequestAnimationFrame = function(t, e) {
            void 0 === e && (e = !1), this.game = t, this.isRunning = !1, this.forceSetTimeOut = e;
            for (var i = ["ms", "moz", "webkit", "o"], s = 0; s < i.length && !window.requestAnimationFrame; s++) window.requestAnimationFrame = window[i[s] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[i[s] + "CancelAnimationFrame"];
            this._isSetTimeOut = !1, this._onLoop = null, this._timeOutID = null
        }, i.RequestAnimationFrame.prototype = {
            start: function() {
                this.isRunning = !0;
                var t = this;
                !window.requestAnimationFrame || this.forceSetTimeOut ? (this._isSetTimeOut = !0, this._onLoop = function() {
                    return t.updateSetTimeout()
                }, this._timeOutID = window.setTimeout(this._onLoop, 0)) : (this._isSetTimeOut = !1, this._onLoop = function(e) {
                    return t.updateRAF(e)
                }, this._timeOutID = window.requestAnimationFrame(this._onLoop))
            },
            updateRAF: function(t) {
                this.isRunning && (this.game.update(Math.floor(t)), this._timeOutID = window.requestAnimationFrame(this._onLoop))
            },
            updateSetTimeout: function() {
                this.isRunning && (this.game.update(Date.now()), this._timeOutID = window.setTimeout(this._onLoop, this.game.time.timeToCall))
            },
            stop: function() {
                this._isSetTimeOut ? clearTimeout(this._timeOutID) : window.cancelAnimationFrame(this._timeOutID), this.isRunning = !1
            },
            isSetTimeOut: function() {
                return this._isSetTimeOut
            },
            isRAF: function() {
                return !1 === this._isSetTimeOut
            }
        }, i.RequestAnimationFrame.prototype.constructor = i.RequestAnimationFrame, i.Math = {
            PI2: 2 * Math.PI,
            between: function(t, e) {
                return Math.floor(Math.random() * (e - t + 1) + t)
            },
            fuzzyEqual: function(t, e, i) {
                return void 0 === i && (i = 1e-4), Math.abs(t - e) < i
            },
            fuzzyLessThan: function(t, e, i) {
                return void 0 === i && (i = 1e-4), t < e + i
            },
            fuzzyGreaterThan: function(t, e, i) {
                return void 0 === i && (i = 1e-4), t > e - i
            },
            fuzzyCeil: function(t, e) {
                return void 0 === e && (e = 1e-4), Math.ceil(t - e)
            },
            fuzzyFloor: function(t, e) {
                return void 0 === e && (e = 1e-4), Math.floor(t + e)
            },
            average: function() {
                for (var t = 0, e = arguments.length, i = 0; i < e; i++) t += +arguments[i];
                return t / e
            },
            shear: function(t) {
                return t % 1
            },
            snapTo: function(t, e, i) {
                return void 0 === i && (i = 0), 0 === e ? t : (t -= i, t = e * Math.round(t / e), i + t)
            },
            snapToFloor: function(t, e, i) {
                return void 0 === i && (i = 0), 0 === e ? t : (t -= i, t = e * Math.floor(t / e), i + t)
            },
            snapToCeil: function(t, e, i) {
                return void 0 === i && (i = 0), 0 === e ? t : (t -= i, t = e * Math.ceil(t / e), i + t)
            },
            roundTo: function(t, e, i) {
                void 0 === e && (e = 0), void 0 === i && (i = 10);
                var s = Math.pow(i, -e);
                return Math.round(t * s) / s
            },
            floorTo: function(t, e, i) {
                void 0 === e && (e = 0), void 0 === i && (i = 10);
                var s = Math.pow(i, -e);
                return Math.floor(t * s) / s
            },
            ceilTo: function(t, e, i) {
                void 0 === e && (e = 0), void 0 === i && (i = 10);
                var s = Math.pow(i, -e);
                return Math.ceil(t * s) / s
            },
            rotateToAngle: function(t, e, s) {
                return void 0 === s && (s = .05), t === e ? t : (Math.abs(e - t) <= s || Math.abs(e - t) >= i.Math.PI2 - s ? t = e : (Math.abs(e - t) > Math.PI && (e < t ? e += i.Math.PI2 : e -= i.Math.PI2), e > t ? t += s : e < t && (t -= s)), t)
            },
            getShortestAngle: function(t, e) {
                var i = e - t;
                return 0 === i ? 0 : i - 360 * Math.floor((i - -180) / 360)
            },
            angleBetween: function(t, e, i, s) {
                return Math.atan2(s - e, i - t)
            },
            angleBetweenY: function(t, e, i, s) {
                return Math.atan2(i - t, s - e)
            },
            angleBetweenPoints: function(t, e) {
                return Math.atan2(e.y - t.y, e.x - t.x)
            },
            angleBetweenPointsY: function(t, e) {
                return Math.atan2(e.x - t.x, e.y - t.y)
            },
            reverseAngle: function(t) {
                return this.normalizeAngle(t + Math.PI, !0)
            },
            normalizeAngle: function(t) {
                return (t %= 2 * Math.PI) >= 0 ? t : t + 2 * Math.PI
            },
            maxAdd: function(t, e, i) {
                return Math.min(t + e, i)
            },
            minSub: function(t, e, i) {
                return Math.max(t - e, i)
            },
            wrap: function(t, e, i) {
                var s = i - e;
                if (s <= 0) return 0;
                var n = (t - e) % s;
                return n < 0 && (n += s), n + e
            },
            wrapValue: function(t, e, i) {
                return t = Math.abs(t), e = Math.abs(e), i = Math.abs(i), (t + e) % i
            },
            isOdd: function(t) {
                return !!(1 & t)
            },
            isEven: function(t) {
                return !(1 & t)
            },
            min: function() {
                if (1 === arguments.length && "object" == typeof arguments[0]) t = arguments[0];
                else var t = arguments;
                for (var e = 1, i = 0, s = t.length; e < s; e++) t[e] < t[i] && (i = e);
                return t[i]
            },
            max: function() {
                if (1 === arguments.length && "object" == typeof arguments[0]) t = arguments[0];
                else var t = arguments;
                for (var e = 1, i = 0, s = t.length; e < s; e++) t[e] > t[i] && (i = e);
                return t[i]
            },
            minProperty: function(t) {
                if (2 === arguments.length && "object" == typeof arguments[1]) e = arguments[1];
                else var e = arguments.slice(1);
                for (var i = 1, s = 0, n = e.length; i < n; i++) e[i][t] < e[s][t] && (s = i);
                return e[s][t]
            },
            maxProperty: function(t) {
                if (2 === arguments.length && "object" == typeof arguments[1]) e = arguments[1];
                else var e = arguments.slice(1);
                for (var i = 1, s = 0, n = e.length; i < n; i++) e[i][t] > e[s][t] && (s = i);
                return e[s][t]
            },
            wrapAngle: function(t, e) {
                return e ? this.wrap(t, -Math.PI, Math.PI) : this.wrap(t, -180, 180)
            },
            linearInterpolation: function(t, e) {
                var i = t.length - 1,
                    s = i * e,
                    n = Math.floor(s);
                return e < 0 ? this.linear(t[0], t[1], s) : e > 1 ? this.linear(t[i], t[i - 1], i - s) : this.linear(t[n], t[n + 1 > i ? i : n + 1], s - n)
            },
            bezierInterpolation: function(t, e) {
                for (var i = 0, s = t.length - 1, n = 0; n <= s; n++) i += Math.pow(1 - e, s - n) * Math.pow(e, n) * t[n] * this.bernstein(s, n);
                return i
            },
            catmullRomInterpolation: function(t, e) {
                var i = t.length - 1,
                    s = i * e,
                    n = Math.floor(s);
                return t[0] === t[i] ? (e < 0 && (n = Math.floor(s = i * (1 + e))), this.catmullRom(t[(n - 1 + i) % i], t[n], t[(n + 1) % i], t[(n + 2) % i], s - n)) : e < 0 ? t[0] - (this.catmullRom(t[0], t[0], t[1], t[1], -s) - t[0]) : e > 1 ? t[i] - (this.catmullRom(t[i], t[i], t[i - 1], t[i - 1], s - i) - t[i]) : this.catmullRom(t[n ? n - 1 : 0], t[n], t[i < n + 1 ? i : n + 1], t[i < n + 2 ? i : n + 2], s - n)
            },
            linear: function(t, e, i) {
                return (e - t) * i + t
            },
            bernstein: function(t, e) {
                return this.factorial(t) / this.factorial(e) / this.factorial(t - e)
            },
            factorial: function(t) {
                if (0 === t) return 1;
                for (var e = t; --t;) e *= t;
                return e
            },
            catmullRom: function(t, e, i, s, n) {
                var a = .5 * (i - t),
                    o = .5 * (s - e),
                    r = n * n;
                return (2 * e - 2 * i + a + o) * (n * r) + (-3 * e + 3 * i - 2 * a - o) * r + a * n + e
            },
            difference: function(t, e) {
                return Math.abs(t - e)
            },
            roundAwayFromZero: function(t) {
                return t > 0 ? Math.ceil(t) : Math.floor(t)
            },
            sinCosGenerator: function(t, e, i, s) {
                void 0 === e && (e = 1), void 0 === i && (i = 1), void 0 === s && (s = 1);
                for (var n = e, a = i, o = s * Math.PI / t, r = [], h = [], l = 0; l < t; l++) n += (a -= n * o) * o, r[l] = a, h[l] = n;
                return {
                    sin: h,
                    cos: r,
                    length: t
                }
            },
            distance: function(t, e, i, s) {
                var n = t - i,
                    a = e - s;
                return Math.sqrt(n * n + a * a)
            },
            distanceSq: function(t, e, i, s) {
                var n = t - i,
                    a = e - s;
                return n * n + a * a
            },
            distancePow: function(t, e, i, s, n) {
                return void 0 === n && (n = 2), Math.sqrt(Math.pow(i - t, n) + Math.pow(s - e, n))
            },
            clamp: function(t, e, i) {
                return t < e ? e : i < t ? i : t
            },
            clampBottom: function(t, e) {
                return t < e ? e : t
            },
            within: function(t, e, i) {
                return Math.abs(t - e) <= i
            },
            mapLinear: function(t, e, i, s, n) {
                return s + (t - e) * (n - s) / (i - e)
            },
            smoothstep: function(t, e, i) {
                return (t = Math.max(0, Math.min(1, (t - e) / (i - e)))) * t * (3 - 2 * t)
            },
            smootherstep: function(t, e, i) {
                return (t = Math.max(0, Math.min(1, (t - e) / (i - e)))) * t * t * (t * (6 * t - 15) + 10)
            },
            sign: function(t) {
                return t < 0 ? -1 : t > 0 ? 1 : 0
            },
            percent: function(t, e, i) {
                return void 0 === i && (i = 0), t > e || i > e ? 1 : t < i || i > t ? 0 : (t - i) / e
            }
        };
        var o = Math.PI / 180,
            r = 180 / Math.PI;
        return i.Math.degToRad = function(t) {
            return t * o
        }, i.Math.radToDeg = function(t) {
            return t * r
        }, i.RandomDataGenerator = function(t) {
            void 0 === t && (t = []), this.c = 1, this.s0 = 0, this.s1 = 0, this.s2 = 0, "string" == typeof t ? this.state(t) : this.sow(t)
        }, i.RandomDataGenerator.prototype = {
            rnd: function() {
                var t = 2091639 * this.s0 + 2.3283064365386963e-10 * this.c;
                return this.c = 0 | t, this.s0 = this.s1, this.s1 = this.s2, this.s2 = t - this.c, this.s2
            },
            sow: function(t) {
                if (this.s0 = this.hash(" "), this.s1 = this.hash(this.s0), this.s2 = this.hash(this.s1), this.c = 1, t)
                    for (var e = 0; e < t.length && null != t[e]; e++) {
                        var i = t[e];
                        this.s0 -= this.hash(i), this.s0 += ~~(this.s0 < 0), this.s1 -= this.hash(i), this.s1 += ~~(this.s1 < 0), this.s2 -= this.hash(i), this.s2 += ~~(this.s2 < 0)
                    }
            },
            hash: function(t) {
                var e, i, s;
                for (s = 4022871197, t = t.toString(), i = 0; i < t.length; i++) e = .02519603282416938 * (s += t.charCodeAt(i)), e -= s = e >>> 0, s = (e *= s) >>> 0, s += 4294967296 * (e -= s);
                return 2.3283064365386963e-10 * (s >>> 0)
            },
            integer: function() {
                return 4294967296 * this.rnd.apply(this)
            },
            frac: function() {
                return this.rnd.apply(this) + 1.1102230246251565e-16 * (2097152 * this.rnd.apply(this) | 0)
            },
            real: function() {
                return this.integer() + this.frac()
            },
            integerInRange: function(t, e) {
                return Math.floor(this.realInRange(0, e - t + 1) + t)
            },
            between: function(t, e) {
                return this.integerInRange(t, e)
            },
            realInRange: function(t, e) {
                return this.frac() * (e - t) + t
            },
            normal: function() {
                return 1 - 2 * this.frac()
            },
            uuid: function() {
                var t = "",
                    e = "";
                for (e = t = ""; t++ < 36; e += ~t % 5 | 3 * t & 4 ? (15 ^ t ? 8 ^ this.frac() * (20 ^ t ? 16 : 4) : 4).toString(16) : "-");
                return e
            },
            pick: function(t) {
                return t[this.integerInRange(0, t.length - 1)]
            },
            sign: function() {
                return this.pick([-1, 1])
            },
            weightedPick: function(t) {
                return t[~~(Math.pow(this.frac(), 2) * (t.length - 1) + .5)]
            },
            timestamp: function(t, e) {
                return this.realInRange(t || 9466848e5, e || 1577862e6)
            },
            angle: function() {
                return this.integerInRange(-180, 180)
            },
            state: function(t) {
                return "string" == typeof t && t.match(/^!rnd/) && (t = t.split(","), this.c = parseFloat(t[1]), this.s0 = parseFloat(t[2]), this.s1 = parseFloat(t[3]), this.s2 = parseFloat(t[4])), ["!rnd", this.c, this.s0, this.s1, this.s2].join(",")
            }
        }, i.RandomDataGenerator.prototype.constructor = i.RandomDataGenerator, i.QuadTree = function(t, e, i, s, n, a, o) {
            this.maxObjects = 10, this.maxLevels = 4, this.level = 0, this.bounds = {}, this.objects = [], this.nodes = [], this._empty = [], this.reset(t, e, i, s, n, a, o)
        }, i.QuadTree.prototype = {
            reset: function(t, e, i, s, n, a, o) {
                this.maxObjects = n || 10, this.maxLevels = a || 4, this.level = o || 0, this.bounds = {
                    x: Math.round(t),
                    y: Math.round(e),
                    width: i,
                    height: s,
                    subWidth: Math.floor(i / 2),
                    subHeight: Math.floor(s / 2),
                    right: Math.round(t) + Math.floor(i / 2),
                    bottom: Math.round(e) + Math.floor(s / 2)
                }, this.objects.length = 0, this.nodes.length = 0
            },
            populate: function(t) {
                t.forEach(this.populateHandler, this, !0)
            },
            populateHandler: function(t) {
                t.body && t.exists && this.insert(t.body)
            },
            split: function() {
                this.nodes[0] = new i.QuadTree(this.bounds.right, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1), this.nodes[1] = new i.QuadTree(this.bounds.x, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1), this.nodes[2] = new i.QuadTree(this.bounds.x, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1), this.nodes[3] = new i.QuadTree(this.bounds.right, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1)
            },
            insert: function(t) {
                var e, i = 0;
                if (null == this.nodes[0] || -1 === (e = this.getIndex(t))) {
                    if (this.objects.push(t), this.objects.length > this.maxObjects && this.level < this.maxLevels)
                        for (null == this.nodes[0] && this.split(); i < this.objects.length;) - 1 !== (e = this.getIndex(this.objects[i])) ? this.nodes[e].insert(this.objects.splice(i, 1)[0]) : i++
                } else this.nodes[e].insert(t)
            },
            getIndex: function(t) {
                var e = -1;
                return t.x < this.bounds.right && t.right < this.bounds.right ? t.y < this.bounds.bottom && t.bottom < this.bounds.bottom ? e = 1 : t.y > this.bounds.bottom && (e = 2) : t.x > this.bounds.right && (t.y < this.bounds.bottom && t.bottom < this.bounds.bottom ? e = 0 : t.y > this.bounds.bottom && (e = 3)), e
            },
            retrieve: function(t) {
                if (t instanceof i.Rectangle) var e = this.objects,
                    s = this.getIndex(t);
                else {
                    if (!t.body) return this._empty;
                    var e = this.objects,
                        s = this.getIndex(t.body)
                }
                return this.nodes[0] && (e = -1 !== s ? e.concat(this.nodes[s].retrieve(t)) : (e = (e = (e = e.concat(this.nodes[0].retrieve(t))).concat(this.nodes[1].retrieve(t))).concat(this.nodes[2].retrieve(t))).concat(this.nodes[3].retrieve(t))), e
            },
            clear: function() {
                this.objects.length = 0;
                for (var t = this.nodes.length; t--;) this.nodes[t].clear(), this.nodes.splice(t, 1);
                this.nodes.length = 0
            }
        }, i.QuadTree.prototype.constructor = i.QuadTree, i.Net = function(t) {
            this.game = t
        }, i.Net.prototype = {
            getHostName: function() {
                return window.location && window.location.hostname ? window.location.hostname : null
            },
            checkDomainName: function(t) {
                return -1 !== window.location.hostname.indexOf(t)
            },
            updateQueryString: function(t, e, i, s) {
                void 0 === i && (i = !1), void 0 !== s && "" !== s || (s = window.location.href);
                var n = "",
                    a = new RegExp("([?|&])" + t + "=.*?(&|#|$)(.*)", "gi");
                if (a.test(s)) n = void 0 !== e && null !== e ? s.replace(a, "$1" + t + "=" + e + "$2$3") : s.replace(a, "$1$3").replace(/(&|\?)$/, "");
                else if (void 0 !== e && null !== e) {
                    var o = -1 !== s.indexOf("?") ? "&" : "?",
                        r = s.split("#");
                    s = r[0] + o + t + "=" + e, r[1] && (s += "#" + r[1]), n = s
                } else n = s; if (!i) return n;
                window.location.href = n
            },
            getQueryString: function(t) {
                void 0 === t && (t = "");
                var e = {},
                    i = location.search.substring(1).split("&");
                for (var s in i) {
                    var n = i[s].split("=");
                    if (n.length > 1) {
                        if (t && t === this.decodeURI(n[0])) return this.decodeURI(n[1]);
                        e[this.decodeURI(n[0])] = this.decodeURI(n[1])
                    }
                }
                return e
            },
            decodeURI: function(t) {
                return decodeURIComponent(t.replace(/\+/g, " "))
            }
        }, i.Net.prototype.constructor = i.Net, i.TweenManager = function(t) {
            this.game = t, this.frameBased = !1, this._tweens = [], this._add = [], this.easeMap = {
                Power0: i.Easing.Power0,
                Power1: i.Easing.Power1,
                Power2: i.Easing.Power2,
                Power3: i.Easing.Power3,
                Power4: i.Easing.Power4,
                Linear: i.Easing.Linear.None,
                Quad: i.Easing.Quadratic.Out,
                Cubic: i.Easing.Cubic.Out,
                Quart: i.Easing.Quartic.Out,
                Quint: i.Easing.Quintic.Out,
                Sine: i.Easing.Sinusoidal.Out,
                Expo: i.Easing.Exponential.Out,
                Circ: i.Easing.Circular.Out,
                Elastic: i.Easing.Elastic.Out,
                Back: i.Easing.Back.Out,
                Bounce: i.Easing.Bounce.Out,
                "Quad.easeIn": i.Easing.Quadratic.In,
                "Cubic.easeIn": i.Easing.Cubic.In,
                "Quart.easeIn": i.Easing.Quartic.In,
                "Quint.easeIn": i.Easing.Quintic.In,
                "Sine.easeIn": i.Easing.Sinusoidal.In,
                "Expo.easeIn": i.Easing.Exponential.In,
                "Circ.easeIn": i.Easing.Circular.In,
                "Elastic.easeIn": i.Easing.Elastic.In,
                "Back.easeIn": i.Easing.Back.In,
                "Bounce.easeIn": i.Easing.Bounce.In,
                "Quad.easeOut": i.Easing.Quadratic.Out,
                "Cubic.easeOut": i.Easing.Cubic.Out,
                "Quart.easeOut": i.Easing.Quartic.Out,
                "Quint.easeOut": i.Easing.Quintic.Out,
                "Sine.easeOut": i.Easing.Sinusoidal.Out,
                "Expo.easeOut": i.Easing.Exponential.Out,
                "Circ.easeOut": i.Easing.Circular.Out,
                "Elastic.easeOut": i.Easing.Elastic.Out,
                "Back.easeOut": i.Easing.Back.Out,
                "Bounce.easeOut": i.Easing.Bounce.Out,
                "Quad.easeInOut": i.Easing.Quadratic.InOut,
                "Cubic.easeInOut": i.Easing.Cubic.InOut,
                "Quart.easeInOut": i.Easing.Quartic.InOut,
                "Quint.easeInOut": i.Easing.Quintic.InOut,
                "Sine.easeInOut": i.Easing.Sinusoidal.InOut,
                "Expo.easeInOut": i.Easing.Exponential.InOut,
                "Circ.easeInOut": i.Easing.Circular.InOut,
                "Elastic.easeInOut": i.Easing.Elastic.InOut,
                "Back.easeInOut": i.Easing.Back.InOut,
                "Bounce.easeInOut": i.Easing.Bounce.InOut
            }, this.game.onPause.add(this._pauseAll, this), this.game.onResume.add(this._resumeAll, this)
        }, i.TweenManager.prototype = {
            getAll: function() {
                return this._tweens
            },
            removeAll: function() {
                for (var t = 0; t < this._tweens.length; t++) this._tweens[t].pendingDelete = !0;
                this._add = []
            },
            removeFrom: function(t, e) {
                void 0 === e && (e = !0);
                if (Array.isArray(t))
                    for (s = 0, n = t.length; s < n; s++) this.removeFrom(t[s]);
                else if (t.type === i.GROUP && e)
                    for (var s = 0, n = t.children.length; s < n; s++) this.removeFrom(t.children[s]);
                else {
                    for (s = 0, n = this._tweens.length; s < n; s++) t === this._tweens[s].target && this.remove(this._tweens[s]);
                    for (s = 0, n = this._add.length; s < n; s++) t === this._add[s].target && this.remove(this._add[s])
                }
            },
            add: function(t) {
                t._manager = this, this._add.push(t)
            },
            create: function(t) {
                return new i.Tween(t, this.game, this)
            },
            remove: function(t) {
                var e = this._tweens.indexOf(t); - 1 !== e ? this._tweens[e].pendingDelete = !0 : -1 !== (e = this._add.indexOf(t)) && (this._add[e].pendingDelete = !0)
            },
            update: function() {
                var t = this._add.length,
                    e = this._tweens.length;
                if (0 === e && 0 === t) return !1;
                for (var i = 0; i < e;) this._tweens[i].update(this.game.time.time) ? i++ : (this._tweens.splice(i, 1), e--);
                return t > 0 && (this._tweens = this._tweens.concat(this._add), this._add.length = 0), !0
            },
            isTweening: function(t) {
                return this._tweens.some(function(e) {
                    return e.target === t
                })
            },
            _pauseAll: function() {
                for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t]._pause()
            },
            _resumeAll: function() {
                for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t]._resume()
            },
            pauseAll: function() {
                for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t].pause()
            },
            resumeAll: function() {
                for (var t = this._tweens.length - 1; t >= 0; t--) this._tweens[t].resume(!0)
            }
        }, i.TweenManager.prototype.constructor = i.TweenManager, i.Tween = function(t, e, s) {
            this.game = e, this.target = t, this.manager = s, this.timeline = [], this.reverse = !1, this.timeScale = 1, this.repeatCounter = 0, this.pendingDelete = !1, this.onStart = new i.Signal, this.onLoop = new i.Signal, this.onRepeat = new i.Signal, this.onChildComplete = new i.Signal, this.onComplete = new i.Signal, this.isRunning = !1, this.current = 0, this.properties = {}, this.chainedTween = null, this.isPaused = !1, this.frameBased = s.frameBased, this._onUpdateCallback = null, this._onUpdateCallbackContext = null, this._pausedTime = 0, this._codePaused = !1, this._hasStarted = !1
        }, i.Tween.prototype = {
            to: function(t, e, s, n, a, o, r) {
                return (void 0 === e || e <= 0) && (e = 1e3), void 0 !== s && null !== s || (s = i.Easing.Default), void 0 === n && (n = !1), void 0 === a && (a = 0), void 0 === o && (o = 0), void 0 === r && (r = !1), "string" == typeof s && this.manager.easeMap[s] && (s = this.manager.easeMap[s]), this.isRunning ? this : (this.timeline.push(new i.TweenData(this).to(t, e, s, a, o, r)), n && this.start(), this)
            },
            from: function(t, e, s, n, a, o, r) {
                return void 0 === e && (e = 1e3), void 0 !== s && null !== s || (s = i.Easing.Default), void 0 === n && (n = !1), void 0 === a && (a = 0), void 0 === o && (o = 0), void 0 === r && (r = !1), "string" == typeof s && this.manager.easeMap[s] && (s = this.manager.easeMap[s]), this.isRunning ? this : (this.timeline.push(new i.TweenData(this).from(t, e, s, a, o, r)), n && this.start(), this)
            },
            start: function(t) {
                if (void 0 === t && (t = 0), null === this.game || null === this.target || 0 === this.timeline.length || this.isRunning) return this;
                for (i = 0; i < this.timeline.length; i++)
                    for (var e in this.timeline[i].vEnd) this.properties[e] = this.target[e] || 0, Array.isArray(this.properties[e]) || (this.properties[e] *= 1);
                for (var i = 0; i < this.timeline.length; i++) this.timeline[i].loadValues();
                return this.manager.add(this), this.isRunning = !0, (t < 0 || t > this.timeline.length - 1) && (t = 0), this.current = t, this.timeline[this.current].start(), this
            },
            stop: function(t) {
                return void 0 === t && (t = !1), this.isRunning = !1, this._onUpdateCallback = null, this._onUpdateCallbackContext = null, t && (this.onComplete.dispatch(this.target, this), this._hasStarted = !1, this.chainedTween && this.chainedTween.start()), this.manager.remove(this), this
            },
            updateTweenData: function(t, e, i) {
                if (0 === this.timeline.length) return this;
                if (void 0 === i && (i = 0), -1 === i)
                    for (var s = 0; s < this.timeline.length; s++) this.timeline[s][t] = e;
                else this.timeline[i][t] = e;
                return this
            },
            delay: function(t, e) {
                return this.updateTweenData("delay", t, e)
            },
            repeat: function(t, e, i) {
                return void 0 === e && (e = 0), this.updateTweenData("repeatCounter", t, i), this.updateTweenData("repeatDelay", e, i)
            },
            repeatDelay: function(t, e) {
                return this.updateTweenData("repeatDelay", t, e)
            },
            yoyo: function(t, e, i) {
                return void 0 === e && (e = 0), this.updateTweenData("yoyo", t, i), this.updateTweenData("yoyoDelay", e, i)
            },
            yoyoDelay: function(t, e) {
                return this.updateTweenData("yoyoDelay", t, e)
            },
            easing: function(t, e) {
                return "string" == typeof t && this.manager.easeMap[t] && (t = this.manager.easeMap[t]), this.updateTweenData("easingFunction", t, e)
            },
            interpolation: function(t, e, s) {
                return void 0 === e && (e = i.Math), this.updateTweenData("interpolationFunction", t, s), this.updateTweenData("interpolationContext", e, s)
            },
            repeatAll: function(t) {
                return void 0 === t && (t = 0), this.repeatCounter = t, this
            },
            chain: function() {
                for (var t = arguments.length; t--;) t > 0 ? arguments[t - 1].chainedTween = arguments[t] : this.chainedTween = arguments[t];
                return this
            },
            loop: function(t) {
                return void 0 === t && (t = !0), this.repeatCounter = t ? -1 : 0, this
            },
            onUpdateCallback: function(t, e) {
                return this._onUpdateCallback = t, this._onUpdateCallbackContext = e, this
            },
            pause: function() {
                this.isPaused = !0, this._codePaused = !0, this._pausedTime = this.game.time.time
            },
            _pause: function() {
                this._codePaused || (this.isPaused = !0, this._pausedTime = this.game.time.time)
            },
            resume: function() {
                if (this.isPaused) {
                    this.isPaused = !1, this._codePaused = !1;
                    for (var t = 0; t < this.timeline.length; t++) this.timeline[t].isRunning || (this.timeline[t].startTime += this.game.time.time - this._pausedTime)
                }
            },
            _resume: function() {
                this._codePaused || this.resume()
            },
            update: function(t) {
                if (this.pendingDelete || !this.target) return !1;
                if (this.isPaused) return !0;
                var e = this.timeline[this.current].update(t);
                if (e === i.TweenData.PENDING) return !0;
                if (e === i.TweenData.RUNNING) return this._hasStarted || (this.onStart.dispatch(this.target, this), this._hasStarted = !0), null !== this._onUpdateCallback && this._onUpdateCallback.call(this._onUpdateCallbackContext, this, this.timeline[this.current].value, this.timeline[this.current]), this.isRunning;
                if (e === i.TweenData.LOOPED) return -1 === this.timeline[this.current].repeatCounter ? this.onLoop.dispatch(this.target, this) : this.onRepeat.dispatch(this.target, this), !0;
                if (e === i.TweenData.COMPLETE) {
                    var s = !1;
                    return this.reverse ? --this.current < 0 && (this.current = this.timeline.length - 1, s = !0) : ++this.current === this.timeline.length && (this.current = 0, s = !0), s ? -1 === this.repeatCounter ? (this.timeline[this.current].start(), this.onLoop.dispatch(this.target, this), !0) : this.repeatCounter > 0 ? (this.repeatCounter--, this.timeline[this.current].start(), this.onRepeat.dispatch(this.target, this), !0) : (this.isRunning = !1, this.onComplete.dispatch(this.target, this), this._hasStarted = !1, this.chainedTween && this.chainedTween.start(), !1) : (this.onChildComplete.dispatch(this.target, this), this.timeline[this.current].start(), !0)
                }
            },
            generateData: function(t, e) {
                if (null === this.game || null === this.target) return null;
                void 0 === t && (t = 60), void 0 === e && (e = []);
                for (s = 0; s < this.timeline.length; s++)
                    for (var i in this.timeline[s].vEnd) this.properties[i] = this.target[i] || 0, Array.isArray(this.properties[i]) || (this.properties[i] *= 1);
                for (s = 0; s < this.timeline.length; s++) this.timeline[s].loadValues();
                for (var s = 0; s < this.timeline.length; s++) e = e.concat(this.timeline[s].generateData(t));
                return e
            }
        }, Object.defineProperty(i.Tween.prototype, "totalDuration", {
            get: function() {
                for (var t = 0, e = 0; e < this.timeline.length; e++) t += this.timeline[e].duration;
                return t
            }
        }), i.Tween.prototype.constructor = i.Tween, i.TweenData = function(t) {
            this.parent = t, this.game = t.game, this.vStart = {}, this.vStartCache = {}, this.vEnd = {}, this.vEndCache = {}, this.duration = 1e3, this.percent = 0, this.value = 0, this.repeatCounter = 0, this.repeatDelay = 0, this.repeatTotal = 0, this.interpolate = !1, this.yoyo = !1, this.yoyoDelay = 0, this.inReverse = !1, this.delay = 0, this.dt = 0, this.startTime = null, this.easingFunction = i.Easing.Default, this.interpolationFunction = i.Math.linearInterpolation, this.interpolationContext = i.Math, this.isRunning = !1, this.isFrom = !1
        }, i.TweenData.PENDING = 0, i.TweenData.RUNNING = 1, i.TweenData.LOOPED = 2, i.TweenData.COMPLETE = 3, i.TweenData.prototype = {
            to: function(t, e, i, s, n, a) {
                return this.vEnd = t, this.duration = e, this.easingFunction = i, this.delay = s, this.repeatTotal = n, this.yoyo = a, this.isFrom = !1, this
            },
            from: function(t, e, i, s, n, a) {
                return this.vEnd = t, this.duration = e, this.easingFunction = i, this.delay = s, this.repeatTotal = n, this.yoyo = a, this.isFrom = !0, this
            },
            start: function() {
                if (this.startTime = this.game.time.time + this.delay, this.parent.reverse ? this.dt = this.duration : this.dt = 0, this.delay > 0 ? this.isRunning = !1 : this.isRunning = !0, this.isFrom)
                    for (var t in this.vStartCache) this.vStart[t] = this.vEndCache[t], this.vEnd[t] = this.vStartCache[t], this.parent.target[t] = this.vStart[t];
                return this.value = 0, this.yoyoCounter = 0, this.repeatCounter = this.repeatTotal, this
            },
            loadValues: function() {
                for (var t in this.parent.properties) {
                    if (this.vStart[t] = this.parent.properties[t], Array.isArray(this.vEnd[t])) {
                        if (0 === this.vEnd[t].length) continue;
                        0 === this.percent && (this.vEnd[t] = [this.vStart[t]].concat(this.vEnd[t]))
                    }
                    void 0 !== this.vEnd[t] ? ("string" == typeof this.vEnd[t] && (this.vEnd[t] = this.vStart[t] + parseFloat(this.vEnd[t], 10)), this.parent.properties[t] = this.vEnd[t]) : this.vEnd[t] = this.vStart[t], this.vStartCache[t] = this.vStart[t], this.vEndCache[t] = this.vEnd[t]
                }
                return this
            },
            update: function(t) {
                if (this.isRunning) {
                    if (t < this.startTime) return i.TweenData.RUNNING
                } else {
                    if (!(t >= this.startTime)) return i.TweenData.PENDING;
                    this.isRunning = !0
                }
                var e = this.parent.frameBased ? this.game.time.physicsElapsedMS : this.game.time.elapsedMS;
                this.parent.reverse ? (this.dt -= e * this.parent.timeScale, this.dt = Math.max(this.dt, 0)) : (this.dt += e * this.parent.timeScale, this.dt = Math.min(this.dt, this.duration)), this.percent = this.dt / this.duration, this.value = this.easingFunction(this.percent);
                for (var s in this.vEnd) {
                    var n = this.vStart[s],
                        a = this.vEnd[s];
                    Array.isArray(a) ? this.parent.target[s] = this.interpolationFunction.call(this.interpolationContext, a, this.value) : this.parent.target[s] = n + (a - n) * this.value
                }
                return !this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent ? this.repeat() : i.TweenData.RUNNING
            },
            generateData: function(t) {
                this.parent.reverse ? this.dt = this.duration : this.dt = 0;
                var e = [],
                    i = !1,
                    s = 1 / t * 1e3;
                do {
                    this.parent.reverse ? (this.dt -= s, this.dt = Math.max(this.dt, 0)) : (this.dt += s, this.dt = Math.min(this.dt, this.duration)), this.percent = this.dt / this.duration, this.value = this.easingFunction(this.percent);
                    var n = {};
                    for (var a in this.vEnd) {
                        var o = this.vStart[a],
                            r = this.vEnd[a];
                        Array.isArray(r) ? n[a] = this.interpolationFunction(r, this.value) : n[a] = o + (r - o) * this.value
                    }
                    e.push(n), (!this.parent.reverse && 1 === this.percent || this.parent.reverse && 0 === this.percent) && (i = !0)
                } while (!i);
                if (this.yoyo) {
                    var h = e.slice();
                    h.reverse(), e = e.concat(h)
                }
                return e
            },
            repeat: function() {
                if (this.yoyo) {
                    if (this.inReverse && 0 === this.repeatCounter) {
                        for (var t in this.vStartCache) this.vStart[t] = this.vStartCache[t], this.vEnd[t] = this.vEndCache[t];
                        return this.inReverse = !1, i.TweenData.COMPLETE
                    }
                    this.inReverse = !this.inReverse
                } else if (0 === this.repeatCounter) return i.TweenData.COMPLETE;
                if (this.inReverse)
                    for (var t in this.vStartCache) this.vStart[t] = this.vEndCache[t], this.vEnd[t] = this.vStartCache[t];
                else {
                    for (var t in this.vStartCache) this.vStart[t] = this.vStartCache[t], this.vEnd[t] = this.vEndCache[t];
                    this.repeatCounter > 0 && this.repeatCounter--
                }
                return this.startTime = this.game.time.time, this.yoyo && this.inReverse ? this.startTime += this.yoyoDelay : this.inReverse || (this.startTime += this.repeatDelay), this.parent.reverse ? this.dt = this.duration : this.dt = 0, i.TweenData.LOOPED
            }
        }, i.TweenData.prototype.constructor = i.TweenData, i.Easing = {
            Linear: {
                None: function(t) {
                    return t
                }
            },
            Quadratic: {
                In: function(t) {
                    return t * t
                },
                Out: function(t) {
                    return t * (2 - t)
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1)
                }
            },
            Cubic: {
                In: function(t) {
                    return t * t * t
                },
                Out: function(t) {
                    return --t * t * t + 1
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2)
                }
            },
            Quartic: {
                In: function(t) {
                    return t * t * t * t
                },
                Out: function(t) {
                    return 1 - --t * t * t * t
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2)
                }
            },
            Quintic: {
                In: function(t) {
                    return t * t * t * t * t
                },
                Out: function(t) {
                    return --t * t * t * t * t + 1
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2)
                }
            },
            Sinusoidal: {
                In: function(t) {
                    return 0 === t ? 0 : 1 === t ? 1 : 1 - Math.cos(t * Math.PI / 2)
                },
                Out: function(t) {
                    return 0 === t ? 0 : 1 === t ? 1 : Math.sin(t * Math.PI / 2)
                },
                InOut: function(t) {
                    return 0 === t ? 0 : 1 === t ? 1 : .5 * (1 - Math.cos(Math.PI * t))
                }
            },
            Exponential: {
                In: function(t) {
                    return 0 === t ? 0 : Math.pow(1024, t - 1)
                },
                Out: function(t) {
                    return 1 === t ? 1 : 1 - Math.pow(2, -10 * t)
                },
                InOut: function(t) {
                    return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (2 - Math.pow(2, -10 * (t - 1)))
                }
            },
            Circular: {
                In: function(t) {
                    return 1 - Math.sqrt(1 - t * t)
                },
                Out: function(t) {
                    return Math.sqrt(1 - --t * t)
                },
                InOut: function(t) {
                    return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
                }
            },
            Elastic: {
                In: function(t) {
                    var e, i = .1;
                    return 0 === t ? 0 : 1 === t ? 1 : (!i || i < 1 ? (i = 1, e = .1) : e = .4 * Math.asin(1 / i) / (2 * Math.PI), -i * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / .4))
                },
                Out: function(t) {
                    var e, i = .1;
                    return 0 === t ? 0 : 1 === t ? 1 : (!i || i < 1 ? (i = 1, e = .1) : e = .4 * Math.asin(1 / i) / (2 * Math.PI), i * Math.pow(2, -10 * t) * Math.sin((t - e) * (2 * Math.PI) / .4) + 1)
                },
                InOut: function(t) {
                    var e, i = .1;
                    return 0 === t ? 0 : 1 === t ? 1 : (!i || i < 1 ? (i = 1, e = .1) : e = .4 * Math.asin(1 / i) / (2 * Math.PI), (t *= 2) < 1 ? i * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / .4) * -.5 : i * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - e) * (2 * Math.PI) / .4) * .5 + 1)
                }
            },
            Back: {
                In: function(t) {
                    var e = 1.70158;
                    return t * t * ((e + 1) * t - e)
                },
                Out: function(t) {
                    var e = 1.70158;
                    return --t * t * ((e + 1) * t + e) + 1
                },
                InOut: function(t) {
                    var e = 2.5949095;
                    return (t *= 2) < 1 ? t * t * ((e + 1) * t - e) * .5 : .5 * ((t -= 2) * t * ((e + 1) * t + e) + 2)
                }
            },
            Bounce: {
                In: function(t) {
                    return 1 - i.Easing.Bounce.Out(1 - t)
                },
                Out: function(t) {
                    return t < 1 / 2.75 ? 7.5625 * t * t : t < 2 / 2.75 ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : t < 2.5 / 2.75 ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
                },
                InOut: function(t) {
                    return t < .5 ? .5 * i.Easing.Bounce.In(2 * t) : .5 * i.Easing.Bounce.Out(2 * t - 1) + .5
                }
            }
        }, i.Easing.Default = i.Easing.Linear.None, i.Easing.Power0 = i.Easing.Linear.None, i.Easing.Power1 = i.Easing.Quadratic.Out, i.Easing.Power2 = i.Easing.Cubic.Out, i.Easing.Power3 = i.Easing.Quartic.Out, i.Easing.Power4 = i.Easing.Quintic.Out, i.Time = function(t) {
            this.game = t, this.time = 0, this.prevTime = 0, this.now = 0, this.elapsed = 0, this.elapsedMS = 0, this.physicsElapsed = 1 / 60, this.physicsElapsedMS = 1 / 60 * 1e3, this.desiredFpsMult = 1 / 60, this._desiredFps = 60, this.suggestedFps = this.desiredFps, this.slowMotion = 1, this.advancedTiming = !1, this.frames = 0, this.fps = 0, this.fpsMin = 1e3, this.fpsMax = 0, this.msMin = 1e3, this.msMax = 0, this.pauseDuration = 0, this.timeToCall = 0, this.timeExpected = 0, this.events = new i.Timer(this.game, !1), this._frameCount = 0, this._elapsedAccumulator = 0, this._started = 0, this._timeLastSecond = 0, this._pauseStarted = 0, this._justResumed = !1, this._timers = []
        }, i.Time.prototype = {
            boot: function() {
                this._started = Date.now(), this.time = Date.now(), this.events.start(), this.timeExpected = this.time
            },
            add: function(t) {
                return this._timers.push(t), t
            },
            create: function(t) {
                void 0 === t && (t = !0);
                var e = new i.Timer(this.game, t);
                return this._timers.push(e), e
            },
            removeAll: function() {
                for (var t = 0; t < this._timers.length; t++) this._timers[t].destroy();
                this._timers = [], this.events.removeAll()
            },
            refresh: function() {
                var t = this.time;
                this.time = Date.now(), this.elapsedMS = this.time - t
            },
            update: function(t) {
                var e = this.time;
                this.time = Date.now(), this.elapsedMS = this.time - e, this.prevTime = this.now, this.now = t, this.elapsed = this.now - this.prevTime, this.game.raf._isSetTimeOut && (this.timeToCall = Math.floor(Math.max(0, 1e3 / this._desiredFps - (this.timeExpected - t))), this.timeExpected = t + this.timeToCall), this.advancedTiming && this.updateAdvancedTiming(), this.game.paused || (this.events.update(this.time), this._timers.length && this.updateTimers())
            },
            updateTimers: function() {
                for (var t = 0, e = this._timers.length; t < e;) this._timers[t].update(this.time) ? t++ : (this._timers.splice(t, 1), e--)
            },
            updateAdvancedTiming: function() {
                this._frameCount++, this._elapsedAccumulator += this.elapsed, this._frameCount >= 2 * this._desiredFps && (this.suggestedFps = 5 * Math.floor(200 / (this._elapsedAccumulator / this._frameCount)), this._frameCount = 0, this._elapsedAccumulator = 0), this.msMin = Math.min(this.msMin, this.elapsed), this.msMax = Math.max(this.msMax, this.elapsed), this.frames++, this.now > this._timeLastSecond + 1e3 && (this.fps = Math.round(1e3 * this.frames / (this.now - this._timeLastSecond)), this.fpsMin = Math.min(this.fpsMin, this.fps), this.fpsMax = Math.max(this.fpsMax, this.fps), this._timeLastSecond = this.now, this.frames = 0)
            },
            gamePaused: function() {
                this._pauseStarted = Date.now(), this.events.pause();
                for (var t = this._timers.length; t--;) this._timers[t]._pause()
            },
            gameResumed: function() {
                this.time = Date.now(), this.pauseDuration = this.time - this._pauseStarted, this.events.resume();
                for (var t = this._timers.length; t--;) this._timers[t]._resume()
            },
            totalElapsedSeconds: function() {
                return .001 * (this.time - this._started)
            },
            elapsedSince: function(t) {
                return this.time - t
            },
            elapsedSecondsSince: function(t) {
                return .001 * (this.time - t)
            },
            reset: function() {
                this._started = this.time, this.removeAll()
            }
        }, Object.defineProperty(i.Time.prototype, "desiredFps", {
            get: function() {
                return this._desiredFps
            },
            set: function(t) {
                this._desiredFps = t, this.physicsElapsed = 1 / t, this.physicsElapsedMS = 1e3 * this.physicsElapsed, this.desiredFpsMult = 1 / t
            }
        }), i.Time.prototype.constructor = i.Time, i.Timer = function(t, e) {
            void 0 === e && (e = !0), this.game = t, this.running = !1, this.autoDestroy = e, this.expired = !1, this.elapsed = 0, this.events = [], this.onComplete = new i.Signal, this.nextTick = 0, this.timeCap = 1e3, this.paused = !1, this._codePaused = !1, this._started = 0, this._pauseStarted = 0, this._pauseTotal = 0, this._now = Date.now(), this._len = 0, this._marked = 0, this._i = 0, this._diff = 0, this._newTick = 0
        }, i.Timer.MINUTE = 6e4, i.Timer.SECOND = 1e3, i.Timer.HALF = 500, i.Timer.QUARTER = 250, i.Timer.prototype = {
            create: function(t, e, s, n, a, o) {
                var r = t = Math.round(t);
                0 === this._now ? r += this.game.time.time : r += this._now;
                var h = new i.TimerEvent(this, t, r, s, e, n, a, o);
                return this.events.push(h), this.order(), this.expired = !1, h
            },
            add: function(t, e, i) {
                return this.create(t, !1, 0, e, i, Array.prototype.slice.call(arguments, 3))
            },
            repeat: function(t, e, i, s) {
                return this.create(t, !1, e, i, s, Array.prototype.slice.call(arguments, 4))
            },
            loop: function(t, e, i) {
                return this.create(t, !0, 0, e, i, Array.prototype.slice.call(arguments, 3))
            },
            start: function(t) {
                if (!this.running) {
                    this._started = this.game.time.time + (t || 0), this.running = !0;
                    for (var e = 0; e < this.events.length; e++) this.events[e].tick = this.events[e].delay + this._started
                }
            },
            stop: function(t) {
                this.running = !1, void 0 === t && (t = !0), t && (this.events.length = 0)
            },
            remove: function(t) {
                for (var e = 0; e < this.events.length; e++)
                    if (this.events[e] === t) return this.events[e].pendingDelete = !0, !0;
                return !1
            },
            order: function() {
                this.events.length > 0 && (this.events.sort(this.sortHandler), this.nextTick = this.events[0].tick)
            },
            sortHandler: function(t, e) {
                return t.tick < e.tick ? -1 : t.tick > e.tick ? 1 : 0
            },
            clearPendingEvents: function() {
                for (this._i = this.events.length; this._i--;) this.events[this._i].pendingDelete && this.events.splice(this._i, 1);
                this._len = this.events.length, this._i = 0
            },
            update: function(t) {
                if (this.paused) return !0;
                if (this.elapsed = t - this._now, this._now = t, this.elapsed > this.timeCap && this.adjustEvents(t - this.elapsed), this._marked = 0, this.clearPendingEvents(), this.running && this._now >= this.nextTick && this._len > 0) {
                    for (; this._i < this._len && this.running && this._now >= this.events[this._i].tick && !this.events[this._i].pendingDelete;) this._newTick = this._now + this.events[this._i].delay - (this._now - this.events[this._i].tick), this._newTick < 0 && (this._newTick = this._now + this.events[this._i].delay), !0 === this.events[this._i].loop ? (this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : this.events[this._i].repeatCount > 0 ? (this.events[this._i].repeatCount--, this.events[this._i].tick = this._newTick, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)) : (this._marked++, this.events[this._i].pendingDelete = !0, this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args)), this._i++;
                    this.events.length > this._marked ? this.order() : (this.expired = !0, this.onComplete.dispatch(this))
                }
                return !this.expired || !this.autoDestroy
            },
            pause: function() {
                this.running && (this._codePaused = !0, this.paused || (this._pauseStarted = this.game.time.time, this.paused = !0))
            },
            _pause: function() {
                !this.paused && this.running && (this._pauseStarted = this.game.time.time, this.paused = !0)
            },
            adjustEvents: function(t) {
                for (var e = 0; e < this.events.length; e++)
                    if (!this.events[e].pendingDelete) {
                        var i = this.events[e].tick - t;
                        i < 0 && (i = 0), this.events[e].tick = this._now + i
                    }
                var s = this.nextTick - t;
                this.nextTick = s < 0 ? this._now : this._now + s
            },
            resume: function() {
                if (this.paused) {
                    var t = this.game.time.time;
                    this._pauseTotal += t - this._now, this._now = t, this.adjustEvents(this._pauseStarted), this.paused = !1, this._codePaused = !1
                }
            },
            _resume: function() {
                this._codePaused || this.resume()
            },
            removeAll: function() {
                this.onComplete.removeAll(), this.events.length = 0, this._len = 0, this._i = 0
            },
            destroy: function() {
                this.onComplete.removeAll(), this.running = !1, this.events = [], this._len = 0, this._i = 0
            }
        }, Object.defineProperty(i.Timer.prototype, "next", {
            get: function() {
                return this.nextTick
            }
        }), Object.defineProperty(i.Timer.prototype, "duration", {
            get: function() {
                return this.running && this.nextTick > this._now ? this.nextTick - this._now : 0
            }
        }), Object.defineProperty(i.Timer.prototype, "length", {
            get: function() {
                return this.events.length
            }
        }), Object.defineProperty(i.Timer.prototype, "ms", {
            get: function() {
                return this.running ? this._now - this._started - this._pauseTotal : 0
            }
        }), Object.defineProperty(i.Timer.prototype, "seconds", {
            get: function() {
                return this.running ? .001 * this.ms : 0
            }
        }), i.Timer.prototype.constructor = i.Timer, i.TimerEvent = function(t, e, i, s, n, a, o, r) {
            this.timer = t, this.delay = e, this.tick = i, this.repeatCount = s - 1, this.loop = n, this.callback = a, this.callbackContext = o, this.args = r, this.pendingDelete = !1
        }, i.TimerEvent.prototype.constructor = i.TimerEvent, i.AnimationManager = function(t) {
            this.sprite = t, this.game = t.game, this.currentFrame = null, this.currentAnim = null, this.updateIfVisible = !0, this.isLoaded = !1, this._frameData = null, this._anims = {}, this._outputFrames = []
        }, i.AnimationManager.prototype = {
            loadFrameData: function(t, e) {
                if (void 0 === t) return !1;
                if (this.isLoaded)
                    for (var i in this._anims) this._anims[i].updateFrameData(t);
                return this._frameData = t, void 0 === e || null === e ? this.frame = 0 : "string" == typeof e ? this.frameName = e : this.frame = e, this.isLoaded = !0, !0
            },
            copyFrameData: function(t, e) {
                if (this._frameData = t.clone(), this.isLoaded)
                    for (var i in this._anims) this._anims[i].updateFrameData(this._frameData);
                return void 0 === e || null === e ? this.frame = 0 : "string" == typeof e ? this.frameName = e : this.frame = e, this.isLoaded = !0, !0
            },
            add: function(t, e, s, n, a) {
                return e = e || [], s = s || 60, void 0 === n && (n = !1), void 0 === a && (a = !(!e || "number" != typeof e[0])), this._outputFrames = [], this._frameData.getFrameIndexes(e, a, this._outputFrames), this._anims[t] = new i.Animation(this.game, this.sprite, t, this._frameData, this._outputFrames, s, n), this.currentAnim = this._anims[t], this.sprite.tilingTexture && (this.sprite.refreshTexture = !0), this._anims[t]
            },
            validateFrames: function(t, e) {
                void 0 === e && (e = !0);
                for (var i = 0; i < t.length; i++)
                    if (!0 === e) {
                        if (t[i] > this._frameData.total) return !1
                    } else if (!1 === this._frameData.checkFrameName(t[i])) return !1;
                return !0
            },
            play: function(t, e, i, s) {
                if (this._anims[t]) return this.currentAnim === this._anims[t] ? !1 === this.currentAnim.isPlaying ? (this.currentAnim.paused = !1, this.currentAnim.play(e, i, s)) : this.currentAnim : (this.currentAnim && this.currentAnim.isPlaying && this.currentAnim.stop(), this.currentAnim = this._anims[t], this.currentAnim.paused = !1, this.currentFrame = this.currentAnim.currentFrame, this.currentAnim.play(e, i, s))
            },
            stop: function(t, e) {
                void 0 === e && (e = !1), !this.currentAnim || "string" == typeof t && t !== this.currentAnim.name || this.currentAnim.stop(e)
            },
            update: function() {
                return !(this.updateIfVisible && !this.sprite.visible) && (!(!this.currentAnim || !this.currentAnim.update()) && (this.currentFrame = this.currentAnim.currentFrame, !0))
            },
            next: function(t) {
                this.currentAnim && (this.currentAnim.next(t), this.currentFrame = this.currentAnim.currentFrame)
            },
            previous: function(t) {
                this.currentAnim && (this.currentAnim.previous(t), this.currentFrame = this.currentAnim.currentFrame)
            },
            getAnimation: function(t) {
                return "string" == typeof t && this._anims[t] ? this._anims[t] : null
            },
            refreshFrame: function() {},
            destroy: function() {
                t = null;
                for (var t in this._anims) this._anims.hasOwnProperty(t) && this._anims[t].destroy();
                this._anims = {}, this._outputFrames = [], this._frameData = null, this.currentAnim = null, this.currentFrame = null, this.sprite = null, this.game = null
            }
        }, i.AnimationManager.prototype.constructor = i.AnimationManager, Object.defineProperty(i.AnimationManager.prototype, "frameData", {
            get: function() {
                return this._frameData
            }
        }), Object.defineProperty(i.AnimationManager.prototype, "frameTotal", {
            get: function() {
                return this._frameData.total
            }
        }), Object.defineProperty(i.AnimationManager.prototype, "paused", {
            get: function() {
                return this.currentAnim.isPaused
            },
            set: function(t) {
                this.currentAnim.paused = t
            }
        }), Object.defineProperty(i.AnimationManager.prototype, "name", {
            get: function() {
                if (this.currentAnim) return this.currentAnim.name
            }
        }), Object.defineProperty(i.AnimationManager.prototype, "frame", {
            get: function() {
                if (this.currentFrame) return this.currentFrame.index
            },
            set: function(t) {
                "number" == typeof t && this._frameData && null !== this._frameData.getFrame(t) && (this.currentFrame = this._frameData.getFrame(t), this.currentFrame && this.sprite.setFrame(this.currentFrame))
            }
        }), Object.defineProperty(i.AnimationManager.prototype, "frameName", {
            get: function() {
                if (this.currentFrame) return this.currentFrame.name
            },
            set: function(t) {
                "string" == typeof t && this._frameData && null !== this._frameData.getFrameByName(t) && (this.currentFrame = this._frameData.getFrameByName(t), this.currentFrame && (this._frameIndex = this.currentFrame.index, this.sprite.setFrame(this.currentFrame)))
            }
        }), i.Animation = function(t, e, s, n, a, o, r) {
            void 0 === r && (r = !1), this.game = t, this._parent = e, this._frameData = n, this.name = s, this._frames = [], this._frames = this._frames.concat(a), this.delay = 1e3 / o, this.loop = r, this.loopCount = 0, this.killOnComplete = !1, this.isFinished = !1, this.isPlaying = !1, this.isPaused = !1, this._pauseStartTime = 0, this._frameIndex = 0, this._frameDiff = 0, this._frameSkip = 1, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.onStart = new i.Signal, this.onUpdate = null, this.onComplete = new i.Signal, this.onLoop = new i.Signal, this.isReversed = !1, this.game.onPause.add(this.onPause, this), this.game.onResume.add(this.onResume, this)
        }, i.Animation.prototype = {
            play: function(t, e, i) {
                return "number" == typeof t && (this.delay = 1e3 / t), "boolean" == typeof e && (this.loop = e), void 0 !== i && (this.killOnComplete = i), this.isPlaying = !0, this.isFinished = !1, this.paused = !1, this.loopCount = 0, this._timeLastFrame = this.game.time.time, this._timeNextFrame = this.game.time.time + this.delay, this._frameIndex = this.isReversed ? this._frames.length - 1 : 0, this.updateCurrentFrame(!1, !0), this._parent.events.onAnimationStart$dispatch(this._parent, this), this.onStart.dispatch(this._parent, this), this._parent.animations.currentAnim = this, this._parent.animations.currentFrame = this.currentFrame, this
            },
            restart: function() {
                this.isPlaying = !0, this.isFinished = !1, this.paused = !1, this.loopCount = 0, this._timeLastFrame = this.game.time.time, this._timeNextFrame = this.game.time.time + this.delay, this._frameIndex = 0, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this._parent.setFrame(this.currentFrame), this._parent.animations.currentAnim = this, this._parent.animations.currentFrame = this.currentFrame, this.onStart.dispatch(this._parent, this)
            },
            reverse: function() {
                return this.reversed = !this.reversed, this
            },
            reverseOnce: function() {
                return this.onComplete.addOnce(this.reverse, this), this.reverse()
            },
            setFrame: function(t, e) {
                var i;
                if (void 0 === e && (e = !1), "string" == typeof t)
                    for (s = 0; s < this._frames.length; s++) this._frameData.getFrame(this._frames[s]).name === t && (i = s);
                else if ("number" == typeof t)
                    if (e) i = t;
                    else
                        for (var s = 0; s < this._frames.length; s++) this._frames[s] === t && (i = s);
                i && (this._frameIndex = i - 1, this._timeNextFrame = this.game.time.time, this.update())
            },
            stop: function(t, e) {
                void 0 === t && (t = !1), void 0 === e && (e = !1), this.isPlaying = !1, this.isFinished = !0, this.paused = !1, t && (this.currentFrame = this._frameData.getFrame(this._frames[0]), this._parent.setFrame(this.currentFrame)), e && (this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this))
            },
            onPause: function() {
                this.isPlaying && (this._frameDiff = this._timeNextFrame - this.game.time.time)
            },
            onResume: function() {
                this.isPlaying && (this._timeNextFrame = this.game.time.time + this._frameDiff)
            },
            update: function() {
                return !this.isPaused && (!!(this.isPlaying && this.game.time.time >= this._timeNextFrame) && (this._frameSkip = 1, this._frameDiff = this.game.time.time - this._timeNextFrame, this._timeLastFrame = this.game.time.time, this._frameDiff > this.delay && (this._frameSkip = Math.floor(this._frameDiff / this.delay), this._frameDiff -= this._frameSkip * this.delay), this._timeNextFrame = this.game.time.time + (this.delay - this._frameDiff), this.isReversed ? this._frameIndex -= this._frameSkip : this._frameIndex += this._frameSkip, !this.isReversed && this._frameIndex >= this._frames.length || this.isReversed && this._frameIndex <= -1 ? this.loop ? (this._frameIndex = Math.abs(this._frameIndex) % this._frames.length, this.isReversed && (this._frameIndex = this._frames.length - 1 - this._frameIndex), this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && this._parent.setFrame(this.currentFrame), this.loopCount++, this._parent.events.onAnimationLoop$dispatch(this._parent, this), this.onLoop.dispatch(this._parent, this), !this.onUpdate || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData)) : (this.complete(), !1) : this.updateCurrentFrame(!0)))
            },
            updateCurrentFrame: function(t, e) {
                if (void 0 === e && (e = !1), !this._frameData) return !1;
                var i = this.currentFrame.index;
                return this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.currentFrame && (e || !e && i !== this.currentFrame.index) && this._parent.setFrame(this.currentFrame), !this.onUpdate || !t || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData)
            },
            next: function(t) {
                void 0 === t && (t = 1);
                var e = this._frameIndex + t;
                e >= this._frames.length && (this.loop ? e %= this._frames.length : e = this._frames.length - 1), e !== this._frameIndex && (this._frameIndex = e, this.updateCurrentFrame(!0))
            },
            previous: function(t) {
                void 0 === t && (t = 1);
                var e = this._frameIndex - t;
                e < 0 && (this.loop ? e = this._frames.length + e : e++), e !== this._frameIndex && (this._frameIndex = e, this.updateCurrentFrame(!0))
            },
            updateFrameData: function(t) {
                this._frameData = t, this.currentFrame = this._frameData ? this._frameData.getFrame(this._frames[this._frameIndex % this._frames.length]) : null
            },
            destroy: function() {
                this._frameData && (this.game.onPause.remove(this.onPause, this), this.game.onResume.remove(this.onResume, this), this.game = null, this._parent = null, this._frames = null, this._frameData = null, this.currentFrame = null, this.isPlaying = !1, this.onStart.dispose(), this.onLoop.dispose(), this.onComplete.dispose(), this.onUpdate && this.onUpdate.dispose())
            },
            complete: function() {
                this._frameIndex = this._frames.length - 1, this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex]), this.isPlaying = !1, this.isFinished = !0, this.paused = !1, this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this), this.killOnComplete && this._parent.kill()
            }
        }, i.Animation.prototype.constructor = i.Animation, Object.defineProperty(i.Animation.prototype, "paused", {
            get: function() {
                return this.isPaused
            },
            set: function(t) {
                this.isPaused = t, t ? this._pauseStartTime = this.game.time.time : this.isPlaying && (this._timeNextFrame = this.game.time.time + this.delay)
            }
        }), Object.defineProperty(i.Animation.prototype, "reversed", {
            get: function() {
                return this.isReversed
            },
            set: function(t) {
                this.isReversed = t
            }
        }), Object.defineProperty(i.Animation.prototype, "frameTotal", {
            get: function() {
                return this._frames.length
            }
        }), Object.defineProperty(i.Animation.prototype, "frame", {
            get: function() {
                return null !== this.currentFrame ? this.currentFrame.index : this._frameIndex
            },
            set: function(t) {
                this.currentFrame = this._frameData.getFrame(this._frames[t]), null !== this.currentFrame && (this._frameIndex = t, this._parent.setFrame(this.currentFrame), this.onUpdate && this.onUpdate.dispatch(this, this.currentFrame))
            }
        }), Object.defineProperty(i.Animation.prototype, "speed", {
            get: function() {
                return 1e3 / this.delay
            },
            set: function(t) {
                t > 0 && (this.delay = 1e3 / t)
            }
        }), Object.defineProperty(i.Animation.prototype, "enableUpdate", {
            get: function() {
                return null !== this.onUpdate
            },
            set: function(t) {
                t && null === this.onUpdate ? this.onUpdate = new i.Signal : t || null === this.onUpdate || (this.onUpdate.dispose(), this.onUpdate = null)
            }
        }), i.Animation.generateFrameNames = function(t, e, s, n, a) {
            void 0 === n && (n = "");
            var o = [],
                r = "";
            if (e < s)
                for (h = e; h <= s; h++) r = t + (r = "number" == typeof a ? i.Utils.pad(h.toString(), a, "0", 1) : h.toString()) + n, o.push(r);
            else
                for (var h = e; h >= s; h--) r = t + (r = "number" == typeof a ? i.Utils.pad(h.toString(), a, "0", 1) : h.toString()) + n, o.push(r);
            return o
        }, i.Frame = function(t, e, s, n, a, o) {
            this.index = t, this.x = e, this.y = s, this.width = n, this.height = a, this.name = o, this.centerX = Math.floor(n / 2), this.centerY = Math.floor(a / 2), this.distance = i.Math.distance(0, 0, n, a), this.rotated = !1, this.rotationDirection = "cw", this.trimmed = !1, this.sourceSizeW = n, this.sourceSizeH = a, this.spriteSourceSizeX = 0, this.spriteSourceSizeY = 0, this.spriteSourceSizeW = 0, this.spriteSourceSizeH = 0, this.right = this.x + this.width, this.bottom = this.y + this.height
        }, i.Frame.prototype = {
            resize: function(t, e) {
                this.width = t, this.height = e, this.centerX = Math.floor(t / 2), this.centerY = Math.floor(e / 2), this.distance = i.Math.distance(0, 0, t, e), this.sourceSizeW = t, this.sourceSizeH = e, this.right = this.x + t, this.bottom = this.y + e
            },
            setTrim: function(t, e, i, s, n, a, o) {
                this.trimmed = t, t && (this.sourceSizeW = e, this.sourceSizeH = i, this.centerX = Math.floor(e / 2), this.centerY = Math.floor(i / 2), this.spriteSourceSizeX = s, this.spriteSourceSizeY = n, this.spriteSourceSizeW = a, this.spriteSourceSizeH = o)
            },
            clone: function() {
                var t = new i.Frame(this.index, this.x, this.y, this.width, this.height, this.name);
                for (var e in this) this.hasOwnProperty(e) && (t[e] = this[e]);
                return t
            },
            getRect: function(t) {
                return void 0 === t ? t = new i.Rectangle(this.x, this.y, this.width, this.height) : t.setTo(this.x, this.y, this.width, this.height), t
            }
        }, i.Frame.prototype.constructor = i.Frame, i.FrameData = function() {
            this._frames = [], this._frameNames = []
        }, i.FrameData.prototype = {
            addFrame: function(t) {
                return t.index = this._frames.length, this._frames.push(t), "" !== t.name && (this._frameNames[t.name] = t.index), t
            },
            getFrame: function(t) {
                return t >= this._frames.length && (t = 0), this._frames[t]
            },
            getFrameByName: function(t) {
                return "number" == typeof this._frameNames[t] ? this._frames[this._frameNames[t]] : null
            },
            checkFrameName: function(t) {
                return null != this._frameNames[t]
            },
            clone: function() {
                for (var t = new i.FrameData, e = 0; e < this._frames.length; e++) t._frames.push(this._frames[e].clone());
                for (var s in this._frameNames) this._frameNames.hasOwnProperty(s) && t._frameNames.push(this._frameNames[s]);
                return t
            },
            getFrameRange: function(t, e, i) {
                void 0 === i && (i = []);
                for (var s = t; s <= e; s++) i.push(this._frames[s]);
                return i
            },
            getFrames: function(t, e, i) {
                if (void 0 === e && (e = !0), void 0 === i && (i = []), void 0 === t || 0 === t.length)
                    for (s = 0; s < this._frames.length; s++) i.push(this._frames[s]);
                else
                    for (var s = 0; s < t.length; s++) e ? i.push(this.getFrame(t[s])) : i.push(this.getFrameByName(t[s]));
                return i
            },
            getFrameIndexes: function(t, e, i) {
                if (void 0 === e && (e = !0), void 0 === i && (i = []), void 0 === t || 0 === t.length)
                    for (s = 0; s < this._frames.length; s++) i.push(this._frames[s].index);
                else
                    for (var s = 0; s < t.length; s++) e && this._frames[t[s]] ? i.push(this._frames[t[s]].index) : this.getFrameByName(t[s]) && i.push(this.getFrameByName(t[s]).index);
                return i
            },
            destroy: function() {
                this._frames = null, this._frameNames = null
            }
        }, i.FrameData.prototype.constructor = i.FrameData, Object.defineProperty(i.FrameData.prototype, "total", {
            get: function() {
                return this._frames.length
            }
        }), i.AnimationParser = {
            spriteSheet: function(t, e, s, n, a, o, r) {
                var h = e;
                if ("string" == typeof e && (h = t.cache.getImage(e)), null === h) return null;
                var l = h.width,
                    c = h.height;
                s <= 0 && (s = Math.floor(-l / Math.min(-1, s))), n <= 0 && (n = Math.floor(-c / Math.min(-1, n)));
                var u = Math.floor((l - o) / (s + r)) * Math.floor((c - o) / (n + r));
                if (-1 !== a && (u = a), 0 === l || 0 === c || l < s || c < n || 0 === u) return null;
                for (var d = new i.FrameData, p = o, m = o, g = 0; g < u; g++) d.addFrame(new i.Frame(g, p, m, s, n, "")), (p += s + r) + s > l && (p = o, m += n + r);
                return d
            },
            JSONData: function(t, e) {
                if (e.frames) {
                    for (var s, n = new i.FrameData, a = e.frames, o = 0; o < a.length; o++) s = n.addFrame(new i.Frame(o, a[o].frame.x, a[o].frame.y, a[o].frame.w, a[o].frame.h, a[o].filename)), a[o].trimmed && s.setTrim(a[o].trimmed, a[o].sourceSize.w, a[o].sourceSize.h, a[o].spriteSourceSize.x, a[o].spriteSourceSize.y, a[o].spriteSourceSize.w, a[o].spriteSourceSize.h);
                    return n
                }
            },
            JSONDataPyxel: function(t, e) {
                if (["layers", "tilewidth", "tileheight", "tileswide", "tileshigh"].forEach(function(t) {
                    e[t]
                }), 1 === e.layers.length) {
                    for (var s = new i.FrameData, n = e.tileheight, a = e.tilewidth, o = e.layers[0].tiles, r = 0; r < o.length; r++) s.addFrame(new i.Frame(r, o[r].x, o[r].y, a, n, "frame_" + r)).setTrim(!1);
                    return s
                }
            },
            JSONDataHash: function(t, e) {
                if (e.frames) {
                    var s, n = new i.FrameData,
                        a = e.frames,
                        o = 0;
                    for (var r in a) s = n.addFrame(new i.Frame(o, a[r].frame.x, a[r].frame.y, a[r].frame.w, a[r].frame.h, r)), a[r].trimmed && s.setTrim(a[r].trimmed, a[r].sourceSize.w, a[r].sourceSize.h, a[r].spriteSourceSize.x, a[r].spriteSourceSize.y, a[r].spriteSourceSize.w, a[r].spriteSourceSize.h), o++;
                    return n
                }
            },
            XMLData: function(t, e) {
                if (e.getElementsByTagName("TextureAtlas")) {
                    for (var s, n, a, o, r, h, l, c, u, d, p, m = new i.FrameData, g = e.getElementsByTagName("SubTexture"), f = 0; f < g.length; f++) n = (a = g[f].attributes).name.value, o = parseInt(a.x.value, 10), r = parseInt(a.y.value, 10), h = parseInt(a.width.value, 10), l = parseInt(a.height.value, 10), c = null, u = null, a.frameX && (c = Math.abs(parseInt(a.frameX.value, 10)), u = Math.abs(parseInt(a.frameY.value, 10)), d = parseInt(a.frameWidth.value, 10), p = parseInt(a.frameHeight.value, 10)), s = m.addFrame(new i.Frame(f, o, r, h, l, n)), null === c && null === u || s.setTrim(!0, h, l, c, u, d, p);
                    return m
                }
            }
        }, i.Cache = function(t) {
            this.game = t, this.autoResolveURL = !1, this._cache = {
                canvas: {},
                image: {},
                texture: {},
                sound: {},
                video: {},
                text: {},
                json: {},
                xml: {},
                physics: {},
                tilemap: {},
                binary: {},
                bitmapData: {},
                bitmapFont: {},
                shader: {},
                renderTexture: {}
            }, this._urlMap = {}, this._urlResolver = new Image, this._urlTemp = null, this.onSoundUnlock = new i.Signal, this._cacheMap = [], this._cacheMap[i.Cache.CANVAS] = this._cache.canvas, this._cacheMap[i.Cache.IMAGE] = this._cache.image, this._cacheMap[i.Cache.TEXTURE] = this._cache.texture, this._cacheMap[i.Cache.SOUND] = this._cache.sound, this._cacheMap[i.Cache.TEXT] = this._cache.text, this._cacheMap[i.Cache.PHYSICS] = this._cache.physics, this._cacheMap[i.Cache.TILEMAP] = this._cache.tilemap, this._cacheMap[i.Cache.BINARY] = this._cache.binary, this._cacheMap[i.Cache.BITMAPDATA] = this._cache.bitmapData, this._cacheMap[i.Cache.BITMAPFONT] = this._cache.bitmapFont, this._cacheMap[i.Cache.JSON] = this._cache.json, this._cacheMap[i.Cache.XML] = this._cache.xml, this._cacheMap[i.Cache.VIDEO] = this._cache.video, this._cacheMap[i.Cache.SHADER] = this._cache.shader, this._cacheMap[i.Cache.RENDER_TEXTURE] = this._cache.renderTexture, this.addDefaultImage(), this.addMissingImage()
        }, i.Cache.CANVAS = 1, i.Cache.IMAGE = 2, i.Cache.TEXTURE = 3, i.Cache.SOUND = 4, i.Cache.TEXT = 5, i.Cache.PHYSICS = 6, i.Cache.TILEMAP = 7, i.Cache.BINARY = 8, i.Cache.BITMAPDATA = 9, i.Cache.BITMAPFONT = 10, i.Cache.JSON = 11, i.Cache.XML = 12, i.Cache.VIDEO = 13, i.Cache.SHADER = 14, i.Cache.RENDER_TEXTURE = 15, i.Cache.DEFAULT = null, i.Cache.MISSING = null, i.Cache.prototype = {
            addCanvas: function(t, e, i) {
                void 0 === i && (i = e.getContext("2d")), this._cache.canvas[t] = {
                    canvas: e,
                    context: i
                }
            },
            addImage: function(t, e, s) {
                this.checkImageKey(t) && this.removeImage(t);
                var n = {
                    key: t,
                    url: e,
                    data: s,
                    base: new PIXI.BaseTexture(s),
                    frame: new i.Frame(0, 0, 0, s.width, s.height, t),
                    frameData: new i.FrameData
                };
                return n.frameData.addFrame(new i.Frame(0, 0, 0, s.width, s.height, e)), this._cache.image[t] = n, this._resolveURL(e, n), "__default" === t ? i.Cache.DEFAULT = new PIXI.Texture(n.base) : "__missing" === t && (i.Cache.MISSING = new PIXI.Texture(n.base)), n
            },
            addDefaultImage: function() {
                var t = new Image;
                t.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";
                var e = this.addImage("__default", null, t);
                e.base.skipRender = !0, i.Cache.DEFAULT = new PIXI.Texture(e.base)
            },
            addMissingImage: function() {
                var t = new Image;
                t.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";
                var e = this.addImage("__missing", null, t);
                i.Cache.MISSING = new PIXI.Texture(e.base)
            },
            addSound: function(t, e, i, s, n) {
                void 0 === s && (s = !0, n = !1), void 0 === n && (s = !1, n = !0);
                var a = !1;
                n && (a = !0), this._cache.sound[t] = {
                    url: e,
                    data: i,
                    isDecoding: !1,
                    decoded: a,
                    webAudio: s,
                    audioTag: n,
                    locked: this.game.sound.touchLocked
                }, this._resolveURL(e, this._cache.sound[t])
            },
            addText: function(t, e, i) {
                this._cache.text[t] = {
                    url: e,
                    data: i
                }, this._resolveURL(e, this._cache.text[t])
            },
            addPhysicsData: function(t, e, i, s) {
                this._cache.physics[t] = {
                    url: e,
                    data: i,
                    format: s
                }, this._resolveURL(e, this._cache.physics[t])
            },
            addTilemap: function(t, e, i, s) {
                this._cache.tilemap[t] = {
                    url: e,
                    data: i,
                    format: s
                }, this._resolveURL(e, this._cache.tilemap[t])
            },
            addBinary: function(t, e) {
                this._cache.binary[t] = e
            },
            addBitmapData: function(t, e, s) {
                return e.key = t, void 0 === s && (s = new i.FrameData).addFrame(e.textureFrame), this._cache.bitmapData[t] = {
                    data: e,
                    frameData: s
                }, e
            },
            addBitmapFont: function(t, e, s, n, a, o, r) {
                var h = {
                    url: e,
                    data: s,
                    font: null,
                    base: new PIXI.BaseTexture(s)
                };
                void 0 === o && (o = 0), void 0 === r && (r = 0), h.font = "json" === a ? i.LoaderParser.jsonBitmapFont(n, h.base, o, r) : i.LoaderParser.xmlBitmapFont(n, h.base, o, r), this._cache.bitmapFont[t] = h, this._resolveURL(e, h)
            },
            addJSON: function(t, e, i) {
                this._cache.json[t] = {
                    url: e,
                    data: i
                }, this._resolveURL(e, this._cache.json[t])
            },
            addXML: function(t, e, i) {
                this._cache.xml[t] = {
                    url: e,
                    data: i
                }, this._resolveURL(e, this._cache.xml[t])
            },
            addVideo: function(t, e, i, s) {
                this._cache.video[t] = {
                    url: e,
                    data: i,
                    isBlob: s,
                    locked: !0
                }, this._resolveURL(e, this._cache.video[t])
            },
            addShader: function(t, e, i) {
                this._cache.shader[t] = {
                    url: e,
                    data: i
                }, this._resolveURL(e, this._cache.shader[t])
            },
            addRenderTexture: function(t, e) {
                this._cache.renderTexture[t] = {
                    texture: e,
                    frame: new i.Frame(0, 0, 0, e.width, e.height, "", "")
                }
            },
            addSpriteSheet: function(t, e, s, n, a, o, r, h) {
                void 0 === o && (o = -1), void 0 === r && (r = 0), void 0 === h && (h = 0);
                var l = {
                    key: t,
                    url: e,
                    data: s,
                    frameWidth: n,
                    frameHeight: a,
                    margin: r,
                    spacing: h,
                    base: new PIXI.BaseTexture(s),
                    frameData: i.AnimationParser.spriteSheet(this.game, s, n, a, o, r, h)
                };
                this._cache.image[t] = l, this._resolveURL(e, l)
            },
            addTextureAtlas: function(t, e, s, n, a) {
                var o = {
                    key: t,
                    url: e,
                    data: s,
                    base: new PIXI.BaseTexture(s)
                };
                a === i.Loader.TEXTURE_ATLAS_XML_STARLING ? o.frameData = i.AnimationParser.XMLData(this.game, n, t) : a === i.Loader.TEXTURE_ATLAS_JSON_PYXEL ? o.frameData = i.AnimationParser.JSONDataPyxel(this.game, n, t) : Array.isArray(n.frames) ? o.frameData = i.AnimationParser.JSONData(this.game, n, t) : o.frameData = i.AnimationParser.JSONDataHash(this.game, n, t), this._cache.image[t] = o, this._resolveURL(e, o)
            },
            reloadSound: function(t) {
                var e = this,
                    i = this.getSound(t);
                i && (i.data.src = i.url, i.data.addEventListener("canplaythrough", function() {
                    return e.reloadSoundComplete(t)
                }, !1), i.data.load())
            },
            reloadSoundComplete: function(t) {
                var e = this.getSound(t);
                e && (e.locked = !1, this.onSoundUnlock.dispatch(t))
            },
            updateSound: function(t, e, i) {
                var s = this.getSound(t);
                s && (s[e] = i)
            },
            decodedSound: function(t, e) {
                var i = this.getSound(t);
                i.data = e, i.decoded = !0, i.isDecoding = !1
            },
            isSoundDecoded: function(t) {
                var e = this.getItem(t, i.Cache.SOUND, "isSoundDecoded");
                if (e) return e.decoded
            },
            isSoundReady: function(t) {
                var e = this.getItem(t, i.Cache.SOUND, "isSoundDecoded");
                if (e) return e.decoded && !this.game.sound.touchLocked
            },
            checkKey: function(t, e) {
                return !!this._cacheMap[t][e]
            },
            checkURL: function(t) {
                return !!this._urlMap[this._resolveURL(t)]
            },
            checkCanvasKey: function(t) {
                return this.checkKey(i.Cache.CANVAS, t)
            },
            checkImageKey: function(t) {
                return this.checkKey(i.Cache.IMAGE, t)
            },
            checkTextureKey: function(t) {
                return this.checkKey(i.Cache.TEXTURE, t)
            },
            checkSoundKey: function(t) {
                return this.checkKey(i.Cache.SOUND, t)
            },
            checkTextKey: function(t) {
                return this.checkKey(i.Cache.TEXT, t)
            },
            checkPhysicsKey: function(t) {
                return this.checkKey(i.Cache.PHYSICS, t)
            },
            checkTilemapKey: function(t) {
                return this.checkKey(i.Cache.TILEMAP, t)
            },
            checkBinaryKey: function(t) {
                return this.checkKey(i.Cache.BINARY, t)
            },
            checkBitmapDataKey: function(t) {
                return this.checkKey(i.Cache.BITMAPDATA, t)
            },
            checkBitmapFontKey: function(t) {
                return this.checkKey(i.Cache.BITMAPFONT, t)
            },
            checkJSONKey: function(t) {
                return this.checkKey(i.Cache.JSON, t)
            },
            checkXMLKey: function(t) {
                return this.checkKey(i.Cache.XML, t)
            },
            checkVideoKey: function(t) {
                return this.checkKey(i.Cache.VIDEO, t)
            },
            checkShaderKey: function(t) {
                return this.checkKey(i.Cache.SHADER, t)
            },
            checkRenderTextureKey: function(t) {
                return this.checkKey(i.Cache.RENDER_TEXTURE, t)
            },
            getItem: function(t, e, i, s) {
                return this.checkKey(e, t) ? void 0 === s ? this._cacheMap[e][t] : this._cacheMap[e][t][s] : null
            },
            getCanvas: function(t) {
                return this.getItem(t, i.Cache.CANVAS, "getCanvas", "canvas")
            },
            getImage: function(t, e) {
                void 0 !== t && null !== t || (t = "__default"), void 0 === e && (e = !1);
                var s = this.getItem(t, i.Cache.IMAGE, "getImage");
                return null === s && (s = this.getItem("__missing", i.Cache.IMAGE, "getImage")), e ? s : s.data
            },
            getTextureFrame: function(t) {
                return this.getItem(t, i.Cache.TEXTURE, "getTextureFrame", "frame")
            },
            getSound: function(t) {
                return this.getItem(t, i.Cache.SOUND, "getSound")
            },
            getSoundData: function(t) {
                return this.getItem(t, i.Cache.SOUND, "getSoundData", "data")
            },
            getText: function(t) {
                return this.getItem(t, i.Cache.TEXT, "getText", "data")
            },
            getPhysicsData: function(t, e, s) {
                var n = this.getItem(t, i.Cache.PHYSICS, "getPhysicsData", "data");
                if (null === n || void 0 === e || null === e) return n;
                if (n[e]) {
                    var a = n[e];
                    if (!a || !s) return a;
                    for (var o in a)
                        if ((o = a[o]).fixtureKey === s) return o
                }
                return null
            },
            getTilemapData: function(t) {
                return this.getItem(t, i.Cache.TILEMAP, "getTilemapData")
            },
            getBinary: function(t) {
                return this.getItem(t, i.Cache.BINARY, "getBinary")
            },
            getBitmapData: function(t) {
                return this.getItem(t, i.Cache.BITMAPDATA, "getBitmapData", "data")
            },
            getBitmapFont: function(t) {
                return this.getItem(t, i.Cache.BITMAPFONT, "getBitmapFont")
            },
            getJSON: function(t, e) {
                var s = this.getItem(t, i.Cache.JSON, "getJSON", "data");
                return s ? e ? i.Utils.extend(!0, Array.isArray(s) ? [] : {}, s) : s : null
            },
            getXML: function(t) {
                return this.getItem(t, i.Cache.XML, "getXML", "data")
            },
            getVideo: function(t) {
                return this.getItem(t, i.Cache.VIDEO, "getVideo")
            },
            getShader: function(t) {
                return this.getItem(t, i.Cache.SHADER, "getShader", "data")
            },
            getRenderTexture: function(t) {
                return this.getItem(t, i.Cache.RENDER_TEXTURE, "getRenderTexture")
            },
            getBaseTexture: function(t, e) {
                return void 0 === e && (e = i.Cache.IMAGE), this.getItem(t, e, "getBaseTexture", "base")
            },
            getFrame: function(t, e) {
                return void 0 === e && (e = i.Cache.IMAGE), this.getItem(t, e, "getFrame", "frame")
            },
            getFrameCount: function(t, e) {
                var i = this.getFrameData(t, e);
                return i ? i.total : 0
            },
            getFrameData: function(t, e) {
                return void 0 === e && (e = i.Cache.IMAGE), this.getItem(t, e, "getFrameData", "frameData")
            },
            hasFrameData: function(t, e) {
                return void 0 === e && (e = i.Cache.IMAGE), null !== this.getItem(t, e, "", "frameData")
            },
            updateFrameData: function(t, e, s) {
                void 0 === s && (s = i.Cache.IMAGE), this._cacheMap[s][t] && (this._cacheMap[s][t].frameData = e)
            },
            getFrameByIndex: function(t, e, i) {
                var s = this.getFrameData(t, i);
                return s ? s.getFrame(e) : null
            },
            getFrameByName: function(t, e, i) {
                var s = this.getFrameData(t, i);
                return s ? s.getFrameByName(e) : null
            },
            getURL: function(t) {
                return (t = this._resolveURL(t)) ? this._urlMap[t] : null
            },
            getKeys: function(t) {
                void 0 === t && (t = i.Cache.IMAGE);
                var e = [];
                if (this._cacheMap[t])
                    for (var s in this._cacheMap[t]) "__default" !== s && "__missing" !== s && e.push(s);
                return e
            },
            removeCanvas: function(t) {
                delete this._cache.canvas[t]
            },
            removeImage: function(t, e) {
                void 0 === e && (e = !0);
                var i = this.getImage(t, !0);
                e && i.base && i.base.destroy(), delete this._cache.image[t]
            },
            removeSound: function(t) {
                delete this._cache.sound[t]
            },
            removeText: function(t) {
                delete this._cache.text[t]
            },
            removePhysics: function(t) {
                delete this._cache.physics[t]
            },
            removeTilemap: function(t) {
                delete this._cache.tilemap[t]
            },
            removeBinary: function(t) {
                delete this._cache.binary[t]
            },
            removeBitmapData: function(t) {
                delete this._cache.bitmapData[t]
            },
            removeBitmapFont: function(t) {
                delete this._cache.bitmapFont[t]
            },
            removeJSON: function(t) {
                delete this._cache.json[t]
            },
            removeXML: function(t) {
                delete this._cache.xml[t]
            },
            removeVideo: function(t) {
                delete this._cache.video[t]
            },
            removeShader: function(t) {
                delete this._cache.shader[t]
            },
            removeRenderTexture: function(t) {
                delete this._cache.renderTexture[t]
            },
            removeSpriteSheet: function(t) {
                delete this._cache.spriteSheet[t]
            },
            removeTextureAtlas: function(t) {
                delete this._cache.atlas[t]
            },
            clearGLTextures: function() {
                for (var t in this._cache.image) this._cache.image[t].base._glTextures = []
            },
            _resolveURL: function(t, e) {
                return this.autoResolveURL ? (this._urlResolver.src = this.game.load.baseURL + t, this._urlTemp = this._urlResolver.src, this._urlResolver.src = "", e && (this._urlMap[this._urlTemp] = e), this._urlTemp) : null
            },
            destroy: function() {
                for (var t = 0; t < this._cacheMap.length; t++) {
                    var e = this._cacheMap[t];
                    for (var i in e) "__default" !== i && "__missing" !== i && (e[i].destroy && e[i].destroy(), delete e[i])
                }
                this._urlMap = null, this._urlResolver = null, this._urlTemp = null
            }
        }, i.Cache.prototype.constructor = i.Cache, i.Loader = function(t) {
            this.game = t, this.cache = t.cache, this.resetLocked = !1, this.isLoading = !1, this.hasLoaded = !1, this.preloadSprite = null, this.crossOrigin = !1, this.baseURL = "", this.path = "", this.headers = {
                requestedWith: !1,
                json: "application/json",
                xml: "application/xml"
            }, this.onLoadStart = new i.Signal, this.onLoadComplete = new i.Signal, this.onPackComplete = new i.Signal, this.onFileStart = new i.Signal, this.onFileComplete = new i.Signal, this.onFileError = new i.Signal, this.useXDomainRequest = !1, this._warnedAboutXDomainRequest = !1, this.enableParallel = !0, this.maxParallelDownloads = 4, this._withSyncPointDepth = 0, this._fileList = [], this._flightQueue = [], this._processingHead = 0, this._fileLoadStarted = !1, this._totalPackCount = 0, this._totalFileCount = 0, this._loadedPackCount = 0, this._loadedFileCount = 0
        }, i.Loader.TEXTURE_ATLAS_JSON_ARRAY = 0, i.Loader.TEXTURE_ATLAS_JSON_HASH = 1, i.Loader.TEXTURE_ATLAS_XML_STARLING = 2, i.Loader.PHYSICS_LIME_CORONA_JSON = 3, i.Loader.PHYSICS_PHASER_JSON = 4, i.Loader.TEXTURE_ATLAS_JSON_PYXEL = 5, i.Loader.prototype = {
            setPreloadSprite: function(t, e) {
                e = e || 0, this.preloadSprite = {
                    sprite: t,
                    direction: e,
                    width: t.width,
                    height: t.height,
                    rect: null
                }, this.preloadSprite.rect = 0 === e ? new i.Rectangle(0, 0, 1, t.height) : new i.Rectangle(0, 0, t.width, 1), t.crop(this.preloadSprite.rect), t.visible = !0
            },
            resize: function() {
                this.preloadSprite && this.preloadSprite.height !== this.preloadSprite.sprite.height && (this.preloadSprite.rect.height = this.preloadSprite.sprite.height)
            },
            checkKeyExists: function(t, e) {
                return this.getAssetIndex(t, e) > -1
            },
            getAssetIndex: function(t, e) {
                for (var i = -1, s = 0; s < this._fileList.length; s++) {
                    var n = this._fileList[s];
                    if (n.type === t && n.key === e && (i = s, !n.loaded && !n.loading)) break
                }
                return i
            },
            getAsset: function(t, e) {
                var i = this.getAssetIndex(t, e);
                return i > -1 && {
                    index: i,
                    file: this._fileList[i]
                }
            },
            reset: function(t, e) {
                void 0 === e && (e = !1), this.resetLocked || (t && (this.preloadSprite = null), this.isLoading = !1, this._processingHead = 0, this._fileList.length = 0, this._flightQueue.length = 0, this._fileLoadStarted = !1, this._totalFileCount = 0, this._totalPackCount = 0, this._loadedPackCount = 0, this._loadedFileCount = 0, e && (this.onLoadStart.removeAll(), this.onLoadComplete.removeAll(), this.onPackComplete.removeAll(), this.onFileStart.removeAll(), this.onFileComplete.removeAll(), this.onFileError.removeAll()))
            },
            addToFileList: function(t, e, i, s, n, a) {
                if (void 0 === n && (n = !1), void 0 === e || "" === e) return this;
                if (void 0 === i || null === i) {
                    if (!a) return this;
                    i = e + a
                }
                var o = {
                    type: t,
                    key: e,
                    path: this.path,
                    url: i,
                    syncPoint: this._withSyncPointDepth > 0,
                    data: null,
                    loading: !1,
                    loaded: !1,
                    error: !1
                };
                if (s)
                    for (var r in s) o[r] = s[r];
                var h = this.getAssetIndex(t, e);
                if (n && h > -1) {
                    var l = this._fileList[h];
                    l.loading || l.loaded ? (this._fileList.push(o), this._totalFileCount++) : this._fileList[h] = o
                } else -1 === h && (this._fileList.push(o), this._totalFileCount++);
                return this
            },
            replaceInFileList: function(t, e, i, s) {
                return this.addToFileList(t, e, i, s, !0)
            },
            pack: function(t, e, i, s) {
                if (void 0 === e && (e = null), void 0 === i && (i = null), void 0 === s && (s = null), !e && !i) return this;
                var n = {
                    type: "packfile",
                    key: t,
                    url: e,
                    path: this.path,
                    syncPoint: !0,
                    data: null,
                    loading: !1,
                    loaded: !1,
                    error: !1,
                    callbackContext: s
                };
                i && ("string" == typeof i && (i = JSON.parse(i)), n.data = i || {}, n.loaded = !0);
                for (var a = 0; a < this._fileList.length + 1; a++) {
                    var o = this._fileList[a];
                    if (!o || !o.loaded && !o.loading && "packfile" !== o.type) {
                        this._fileList.splice(a, 0, n), this._totalPackCount++;
                        break
                    }
                }
                return this
            },
            image: function(t, e, i) {
                return this.addToFileList("image", t, e, void 0, i, ".png")
            },
            images: function(t, e) {
                if (Array.isArray(e))
                    for (i = 0; i < t.length; i++) this.image(t[i], e[i]);
                else
                    for (var i = 0; i < t.length; i++) this.image(t[i]);
                return this
            },
            text: function(t, e, i) {
                return this.addToFileList("text", t, e, void 0, i, ".txt")
            },
            json: function(t, e, i) {
                return this.addToFileList("json", t, e, void 0, i, ".json")
            },
            shader: function(t, e, i) {
                return this.addToFileList("shader", t, e, void 0, i, ".frag")
            },
            xml: function(t, e, i) {
                return this.addToFileList("xml", t, e, void 0, i, ".xml")
            },
            script: function(t, e, i, s) {
                return void 0 === i && (i = !1), !1 !== i && void 0 === s && (s = this), this.addToFileList("script", t, e, {
                    syncPoint: !0,
                    callback: i,
                    callbackContext: s
                }, !1, ".js")
            },
            binary: function(t, e, i, s) {
                return void 0 === i && (i = !1), !1 !== i && void 0 === s && (s = i), this.addToFileList("binary", t, e, {
                    callback: i,
                    callbackContext: s
                }, !1, ".bin")
            },
            spritesheet: function(t, e, i, s, n, a, o) {
                return void 0 === n && (n = -1), void 0 === a && (a = 0), void 0 === o && (o = 0), this.addToFileList("spritesheet", t, e, {
                    frameWidth: i,
                    frameHeight: s,
                    frameMax: n,
                    margin: a,
                    spacing: o
                }, !1, ".png")
            },
            audio: function(t, e, i) {
                return this.game.sound.noAudio ? this : (void 0 === i && (i = !0), "string" == typeof e && (e = [e]), this.addToFileList("audio", t, e, {
                    buffer: null,
                    autoDecode: i
                }))
            },
            audioSprite: function(t, e, i, s, n) {
                return this.game.sound.noAudio ? this : (void 0 === i && (i = null), void 0 === s && (s = null), void 0 === n && (n = !0), this.audio(t, e, n), i ? this.json(t + "-audioatlas", i) : s && ("string" == typeof s && (s = JSON.parse(s)), this.cache.addJSON(t + "-audioatlas", "", s)), this)
            },
            audiosprite: function(t, e, i, s, n) {
                return this.audioSprite(t, e, i, s, n)
            },
            video: function(t, e, i, s) {
                return void 0 === i && (i = this.game.device.firefox ? "loadeddata" : "canplaythrough"), void 0 === s && (s = !1), "string" == typeof e && (e = [e]), this.addToFileList("video", t, e, {
                    buffer: null,
                    asBlob: s,
                    loadEvent: i
                })
            },
            tilemap: function(t, e, s, n) {
                if (void 0 === e && (e = null), void 0 === s && (s = null), void 0 === n && (n = i.Tilemap.CSV), e || s || (e = n === i.Tilemap.CSV ? t + ".csv" : t + ".json"), s) {
                    switch (n) {
                        case i.Tilemap.CSV:
                            break;
                        case i.Tilemap.TILED_JSON:
                            "string" == typeof s && (s = JSON.parse(s))
                    }
                    this.cache.addTilemap(t, null, s, n)
                } else this.addToFileList("tilemap", t, e, {
                    format: n
                });
                return this
            },
            physics: function(t, e, s, n) {
                return void 0 === e && (e = null), void 0 === s && (s = null), void 0 === n && (n = i.Physics.LIME_CORONA_JSON), e || s || (e = t + ".json"), s ? ("string" == typeof s && (s = JSON.parse(s)), this.cache.addPhysicsData(t, null, s, n)) : this.addToFileList("physics", t, e, {
                    format: n
                }), this
            },
            bitmapFont: function(t, e, i, s, n, a) {
                if (void 0 !== e && null !== e || (e = t + ".png"), void 0 === i && (i = null), void 0 === s && (s = null), null === i && null === s && (i = t + ".xml"), void 0 === n && (n = 0), void 0 === a && (a = 0), i) this.addToFileList("bitmapfont", t, e, {
                    atlasURL: i,
                    xSpacing: n,
                    ySpacing: a
                });
                else if ("string" == typeof s) {
                    var o, r;
                    try {
                        o = JSON.parse(s)
                    } catch (t) {
                        r = this.parseXml(s)
                    }
                    if (!r && !o) throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");
                    this.addToFileList("bitmapfont", t, e, {
                        atlasURL: null,
                        atlasData: o || r,
                        atlasType: o ? "json" : "xml",
                        xSpacing: n,
                        ySpacing: a
                    })
                }
                return this
            },
            atlasJSONArray: function(t, e, s, n) {
                return this.atlas(t, e, s, n, i.Loader.TEXTURE_ATLAS_JSON_ARRAY)
            },
            atlasJSONHash: function(t, e, s, n) {
                return this.atlas(t, e, s, n, i.Loader.TEXTURE_ATLAS_JSON_HASH)
            },
            atlasXML: function(t, e, s, n) {
                return void 0 === s && (s = null), void 0 === n && (n = null), s || n || (s = t + ".xml"), this.atlas(t, e, s, n, i.Loader.TEXTURE_ATLAS_XML_STARLING)
            },
            atlas: function(t, e, s, n, a) {
                if (void 0 !== e && null !== e || (e = t + ".png"), void 0 === s && (s = null), void 0 === n && (n = null), void 0 === a && (a = i.Loader.TEXTURE_ATLAS_JSON_ARRAY), s || n || (s = a === i.Loader.TEXTURE_ATLAS_XML_STARLING ? t + ".xml" : t + ".json"), s) this.addToFileList("textureatlas", t, e, {
                    atlasURL: s,
                    format: a
                });
                else {
                    switch (a) {
                        case i.Loader.TEXTURE_ATLAS_JSON_ARRAY:
                            "string" == typeof n && (n = JSON.parse(n));
                            break;
                        case i.Loader.TEXTURE_ATLAS_XML_STARLING:
                            if ("string" == typeof n) {
                                var o = this.parseXml(n);
                                if (!o) throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");
                                n = o
                            }
                    }
                    this.addToFileList("textureatlas", t, e, {
                        atlasURL: null,
                        atlasData: n,
                        format: a
                    })
                }
                return this
            },
            withSyncPoint: function(t, e) {
                this._withSyncPointDepth++;
                try {
                    t.call(e || this, this)
                } finally {
                    this._withSyncPointDepth--
                }
                return this
            },
            addSyncPoint: function(t, e) {
                var i = this.getAsset(t, e);
                return i && (i.file.syncPoint = !0), this
            },
            removeFile: function(t, e) {
                var i = this.getAsset(t, e);
                i && (i.loaded || i.loading || this._fileList.splice(i.index, 1))
            },
            removeAll: function() {
                this._fileList.length = 0, this._flightQueue.length = 0
            },
            start: function() {
                this.isLoading || (this.hasLoaded = !1, this.isLoading = !0, this.updateProgress(), this.processLoadQueue())
            },
            processLoadQueue: function() {
                if (this.isLoading) {
                    for (s = 0; s < this._flightQueue.length; s++)((n = this._flightQueue[s]).loaded || n.error) && (this._flightQueue.splice(s, 1), s--, n.loading = !1, n.requestUrl = null, n.requestObject = null, n.error && this.onFileError.dispatch(n.key, n), "packfile" !== n.type ? (this._loadedFileCount++, this.onFileComplete.dispatch(this.progress, n.key, !n.error, this._loadedFileCount, this._totalFileCount)) : "packfile" === n.type && n.error && (this._loadedPackCount++, this.onPackComplete.dispatch(n.key, !n.error, this._loadedPackCount, this._totalPackCount)));
                    for (var t = !1, e = this.enableParallel ? i.Math.clamp(this.maxParallelDownloads, 1, 12) : 1, s = this._processingHead; s < this._fileList.length; s++) {
                        var n = this._fileList[s];
                        if ("packfile" === n.type && !n.error && n.loaded && s === this._processingHead && (this.processPack(n), this._loadedPackCount++, this.onPackComplete.dispatch(n.key, !n.error, this._loadedPackCount, this._totalPackCount)), n.loaded || n.error ? s === this._processingHead && (this._processingHead = s + 1) : !n.loading && this._flightQueue.length < e && ("packfile" !== n.type || n.data ? t || (this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this._flightQueue.push(n), n.loading = !0, this.onFileStart.dispatch(this.progress, n.key, n.url), this.loadFile(n)) : (this._flightQueue.push(n), n.loading = !0, this.loadFile(n))), !n.loaded && n.syncPoint && (t = !0), this._flightQueue.length >= e || t && this._loadedPackCount === this._totalPackCount) break
                    }
                    if (this.updateProgress(), this._processingHead >= this._fileList.length) this.finishedLoading();
                    else if (!this._flightQueue.length) {
                        var a = this;
                        setTimeout(function() {
                            a.finishedLoading(!0)
                        }, 2e3)
                    }
                } else this.finishedLoading(!0)
            },
            finishedLoading: function(t) {
                this.hasLoaded || (this.hasLoaded = !0, this.isLoading = !1, t || this._fileLoadStarted || (this._fileLoadStarted = !0, this.onLoadStart.dispatch()), this.onLoadComplete.dispatch(), this.game.state.loadComplete(), this.reset())
            },
            asyncComplete: function(t, e) {
                void 0 === e && (e = ""), t.loaded = !0, t.error = !!e, e && (t.errorMessage = e), this.processLoadQueue()
            },
            processPack: function(t) {
                var e = t.data[t.key];
                if (e)
                    for (var s = 0; s < e.length; s++) {
                        var n = e[s];
                        switch (n.type) {
                            case "image":
                                this.image(n.key, n.url, n.overwrite);
                                break;
                            case "text":
                                this.text(n.key, n.url, n.overwrite);
                                break;
                            case "json":
                                this.json(n.key, n.url, n.overwrite);
                                break;
                            case "xml":
                                this.xml(n.key, n.url, n.overwrite);
                                break;
                            case "script":
                                this.script(n.key, n.url, n.callback, t.callbackContext || this);
                                break;
                            case "binary":
                                this.binary(n.key, n.url, n.callback, t.callbackContext || this);
                                break;
                            case "spritesheet":
                                this.spritesheet(n.key, n.url, n.frameWidth, n.frameHeight, n.frameMax, n.margin, n.spacing);
                                break;
                            case "video":
                                this.video(n.key, n.urls);
                                break;
                            case "audio":
                                this.audio(n.key, n.urls, n.autoDecode);
                                break;
                            case "audiosprite":
                                this.audiosprite(n.key, n.urls, n.jsonURL, n.jsonData, n.autoDecode);
                                break;
                            case "tilemap":
                                this.tilemap(n.key, n.url, n.data, i.Tilemap[n.format]);
                                break;
                            case "physics":
                                this.physics(n.key, n.url, n.data, i.Loader[n.format]);
                                break;
                            case "bitmapFont":
                                this.bitmapFont(n.key, n.textureURL, n.atlasURL, n.atlasData, n.xSpacing, n.ySpacing);
                                break;
                            case "atlasJSONArray":
                                this.atlasJSONArray(n.key, n.textureURL, n.atlasURL, n.atlasData);
                                break;
                            case "atlasJSONHash":
                                this.atlasJSONHash(n.key, n.textureURL, n.atlasURL, n.atlasData);
                                break;
                            case "atlasXML":
                                this.atlasXML(n.key, n.textureURL, n.atlasURL, n.atlasData);
                                break;
                            case "atlas":
                                this.atlas(n.key, n.textureURL, n.atlasURL, n.atlasData, i.Loader[n.format]);
                                break;
                            case "shader":
                                this.shader(n.key, n.url, n.overwrite)
                        }
                    }
            },
            transformUrl: function(t, e) {
                return !!t && (t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? t : this.baseURL + e.path + t)
            },
            loadFile: function(t) {
                switch (t.type) {
                    case "packfile":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.fileComplete);
                        break;
                    case "image":
                    case "spritesheet":
                    case "textureatlas":
                    case "bitmapfont":
                        this.loadImageTag(t);
                        break;
                    case "audio":
                        t.url = this.getAudioURL(t.url), t.url ? this.game.sound.usingWebAudio ? this.xhrLoad(t, this.transformUrl(t.url, t), "arraybuffer", this.fileComplete) : this.game.sound.usingAudioTag && this.loadAudioTag(t) : this.fileError(t, null, "No supported audio URL specified or device does not have audio playback support");
                        break;
                    case "video":
                        t.url = this.getVideoURL(t.url), t.url ? t.asBlob ? this.xhrLoad(t, this.transformUrl(t.url, t), "blob", this.fileComplete) : this.loadVideoTag(t) : this.fileError(t, null, "No supported video URL specified or device does not have video playback support");
                        break;
                    case "json":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.jsonLoadComplete);
                        break;
                    case "xml":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.xmlLoadComplete);
                        break;
                    case "tilemap":
                        t.format === i.Tilemap.TILED_JSON ? this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.jsonLoadComplete) : t.format === i.Tilemap.CSV ? this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.csvLoadComplete) : this.asyncComplete(t, "invalid Tilemap format: " + t.format);
                        break;
                    case "text":
                    case "script":
                    case "shader":
                    case "physics":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "text", this.fileComplete);
                        break;
                    case "binary":
                        this.xhrLoad(t, this.transformUrl(t.url, t), "arraybuffer", this.fileComplete)
                }
            },
            loadImageTag: function(t) {
                var e = this;
                t.data = new Image, t.data.name = t.key, this.crossOrigin && (t.data.crossOrigin = this.crossOrigin), t.data.onload = function() {
                    t.data.onload && (t.data.onload = null, t.data.onerror = null, e.fileComplete(t))
                }, t.data.onerror = function() {
                    t.data.onload && (t.data.onload = null, t.data.onerror = null, e.fileError(t))
                }, t.data.src = this.transformUrl(t.url, t), t.data.complete && t.data.width && t.data.height && (t.data.onload = null, t.data.onerror = null, this.fileComplete(t))
            },
            loadVideoTag: function(t) {
                var e = this;
                t.data = document.createElement("video"), t.data.name = t.key, t.data.controls = !1, t.data.autoplay = !1;
                var s = function() {
                    t.data.removeEventListener(t.loadEvent, s, !1), t.data.onerror = null, t.data.canplay = !0, i.GAMES[e.game.id].load.fileComplete(t)
                };
                t.data.onerror = function() {
                    t.data.removeEventListener(t.loadEvent, s, !1), t.data.onerror = null, t.data.canplay = !1, e.fileError(t)
                }, t.data.addEventListener(t.loadEvent, s, !1), t.data.src = this.transformUrl(t.url, t), t.data.load()
            },
            loadAudioTag: function(t) {
                var e = this;
                if (this.game.sound.touchLocked) t.data = new Audio, t.data.name = t.key, t.data.preload = "auto", t.data.src = this.transformUrl(t.url, t), this.fileComplete(t);
                else {
                    t.data = new Audio, t.data.name = t.key;
                    var i = function() {
                        t.data.removeEventListener("canplaythrough", i, !1), t.data.onerror = null, e.fileComplete(t)
                    };
                    t.data.onerror = function() {
                        t.data.removeEventListener("canplaythrough", i, !1), t.data.onerror = null, e.fileError(t)
                    }, t.data.preload = "auto", t.data.src = this.transformUrl(t.url, t), t.data.addEventListener("canplaythrough", i, !1), t.data.load()
                }
            },
            xhrLoad: function(t, e, i, s, n) {
                if (this.useXDomainRequest && window.XDomainRequest) this.xhrLoadWithXDR(t, e, i, s, n);
                else {
                    var a = new XMLHttpRequest;
                    a.open("GET", e, !0), a.responseType = i, !1 !== this.headers.requestedWith && a.setRequestHeader("X-Requested-With", this.headers.requestedWith), this.headers[t.type] && a.setRequestHeader("Accept", this.headers[t.type]), n = n || this.fileError;
                    var o = this;
                    a.onload = function() {
                        try {
                            return 4 === a.readyState && a.status >= 400 && a.status <= 599 ? n.call(o, t, a) : s.call(o, t, a)
                        } catch (e) {
                            o.hasLoaded ? window.console : o.asyncComplete(t, e.message || "Exception")
                        }
                    }, a.onerror = function() {
                        try {
                            return n.call(o, t, a)
                        } catch (e) {
                            o.hasLoaded ? window.console : o.asyncComplete(t, e.message || "Exception")
                        }
                    }, t.requestObject = a, t.requestUrl = e, a.send()
                }
            },
            xhrLoadWithXDR: function(t, e, i, s, n) {
                this._warnedAboutXDomainRequest || this.game.device.ie && !(this.game.device.ieVersion >= 10) || (this._warnedAboutXDomainRequest = !0);
                var a = new window.XDomainRequest;
                a.open("GET", e, !0), a.responseType = i, a.timeout = 3e3, n = n || this.fileError;
                var o = this;
                a.onerror = function() {
                    try {
                        return n.call(o, t, a)
                    } catch (e) {
                        o.asyncComplete(t, e.message || "Exception")
                    }
                }, a.ontimeout = function() {
                    try {
                        return n.call(o, t, a)
                    } catch (e) {
                        o.asyncComplete(t, e.message || "Exception")
                    }
                }, a.onprogress = function() {}, a.onload = function() {
                    try {
                        return 4 === a.readyState && a.status >= 400 && a.status <= 599 ? n.call(o, t, a) : s.call(o, t, a)
                    } catch (e) {
                        o.asyncComplete(t, e.message || "Exception")
                    }
                }, t.requestObject = a, t.requestUrl = e, setTimeout(function() {
                    a.send()
                }, 0)
            },
            getVideoURL: function(t) {
                for (var e = 0; e < t.length; e++) {
                    var i, s = t[e];
                    if (s.uri) {
                        if (i = s.type, s = s.uri, this.game.device.canPlayVideo(i)) return s
                    } else {
                        if (0 === s.indexOf("blob:") || 0 === s.indexOf("data:")) return s;
                        if (s.indexOf("?") >= 0 && (s = s.substr(0, s.indexOf("?"))), i = s.substr((Math.max(0, s.lastIndexOf(".")) || 1 / 0) + 1).toLowerCase(), this.game.device.canPlayVideo(i)) return t[e]
                    }
                }
                return null
            },
            getAudioURL: function(t) {
                if (this.game.sound.noAudio) return null;
                for (var e = 0; e < t.length; e++) {
                    var i, s = t[e];
                    if (s.uri) {
                        if (i = s.type, s = s.uri, this.game.device.canPlayAudio(i)) return s
                    } else {
                        if (0 === s.indexOf("blob:") || 0 === s.indexOf("data:")) return s;
                        if (s.indexOf("?") >= 0 && (s = s.substr(0, s.indexOf("?"))), i = s.substr((Math.max(0, s.lastIndexOf(".")) || 1 / 0) + 1).toLowerCase(), this.game.device.canPlayAudio(i)) return t[e]
                    }
                }
                return null
            },
            fileError: function(t, e, i) {
                var s = "error loading asset from URL " + (t.requestUrl || this.transformUrl(t.url, t));
                !i && e && (i = e.status), i && (s = s + " (" + i + ")"), this.asyncComplete(t, s)
            },
            fileComplete: function(t, e) {
                var s = !0;
                switch (t.type) {
                    case "packfile":
                        n = JSON.parse(e.responseText);
                        t.data = n || {};
                        break;
                    case "image":
                        this.cache.addImage(t.key, t.url, t.data);
                        break;
                    case "spritesheet":
                        this.cache.addSpriteSheet(t.key, t.url, t.data, t.frameWidth, t.frameHeight, t.frameMax, t.margin, t.spacing);
                        break;
                    case "textureatlas":
                        if (null == t.atlasURL) this.cache.addTextureAtlas(t.key, t.url, t.data, t.atlasData, t.format);
                        else if (s = !1, t.format === i.Loader.TEXTURE_ATLAS_JSON_ARRAY || t.format === i.Loader.TEXTURE_ATLAS_JSON_HASH || t.format === i.Loader.TEXTURE_ATLAS_JSON_PYXEL) this.xhrLoad(t, this.transformUrl(t.atlasURL, t), "text", this.jsonLoadComplete);
                        else {
                            if (t.format !== i.Loader.TEXTURE_ATLAS_XML_STARLING) throw new Error("Phaser.Loader. Invalid Texture Atlas format: " + t.format);
                            this.xhrLoad(t, this.transformUrl(t.atlasURL, t), "text", this.xmlLoadComplete)
                        }
                        break;
                    case "bitmapfont":
                        t.atlasURL ? (s = !1, this.xhrLoad(t, this.transformUrl(t.atlasURL, t), "text", function(t, e) {
                            var i;
                            try {
                                i = JSON.parse(e.responseText)
                            } catch (t) {}
                            i ? (t.atlasType = "json", this.jsonLoadComplete(t, e)) : (t.atlasType = "xml", this.xmlLoadComplete(t, e))
                        })) : this.cache.addBitmapFont(t.key, t.url, t.data, t.atlasData, t.atlasType, t.xSpacing, t.ySpacing);
                        break;
                    case "video":
                        if (t.asBlob) try {
                            t.data = e.response
                        } catch (e) {
                            throw new Error("Phaser.Loader. Unable to parse video file as Blob: " + t.key)
                        }
                        this.cache.addVideo(t.key, t.url, t.data, t.asBlob);
                        break;
                    case "audio":
                        this.game.sound.usingWebAudio ? (t.data = e.response, this.cache.addSound(t.key, t.url, t.data, !0, !1), t.autoDecode && this.game.sound.decode(t.key)) : this.cache.addSound(t.key, t.url, t.data, !1, !0);
                        break;
                    case "text":
                        t.data = e.responseText, this.cache.addText(t.key, t.url, t.data);
                        break;
                    case "shader":
                        t.data = e.responseText, this.cache.addShader(t.key, t.url, t.data);
                        break;
                    case "physics":
                        var n = JSON.parse(e.responseText);
                        this.cache.addPhysicsData(t.key, t.url, n, t.format);
                        break;
                    case "script":
                        t.data = document.createElement("script"), t.data.language = "javascript", t.data.type = "text/javascript", t.data.defer = !1, t.data.text = e.responseText, document.head.appendChild(t.data), t.callback && (t.data = t.callback.call(t.callbackContext, t.key, e.responseText));
                        break;
                    case "binary":
                        t.callback ? t.data = t.callback.call(t.callbackContext, t.key, e.response) : t.data = e.response, this.cache.addBinary(t.key, t.data)
                }
                s && this.asyncComplete(t)
            },
            jsonLoadComplete: function(t, e) {
                var i = JSON.parse(e.responseText);
                "tilemap" === t.type ? this.cache.addTilemap(t.key, t.url, i, t.format) : "bitmapfont" === t.type ? this.cache.addBitmapFont(t.key, t.url, t.data, i, t.atlasType, t.xSpacing, t.ySpacing) : "json" === t.type ? this.cache.addJSON(t.key, t.url, i) : this.cache.addTextureAtlas(t.key, t.url, t.data, i, t.format), this.asyncComplete(t)
            },
            csvLoadComplete: function(t, e) {
                var i = e.responseText;
                this.cache.addTilemap(t.key, t.url, i, t.format), this.asyncComplete(t)
            },
            xmlLoadComplete: function(t, e) {
                var i = e.responseText,
                    s = this.parseXml(i);
                if (s) "bitmapfont" === t.type ? this.cache.addBitmapFont(t.key, t.url, t.data, s, t.atlasType, t.xSpacing, t.ySpacing) : "textureatlas" === t.type ? this.cache.addTextureAtlas(t.key, t.url, t.data, s, t.format) : "xml" === t.type && this.cache.addXML(t.key, t.url, s), this.asyncComplete(t);
                else {
                    e.responseType || e.contentType;
                    this.asyncComplete(t, "invalid XML")
                }
            },
            parseXml: function(t) {
                var e;
                try {
                    if (window.DOMParser) {
                        var i = new DOMParser;
                        e = i.parseFromString(t, "text/xml")
                    } else(e = new ActiveXObject("Microsoft.XMLDOM")).async = "false", e.loadXML(t)
                } catch (t) {
                    e = null
                }
                return e && e.documentElement && !e.getElementsByTagName("parsererror").length ? e : null
            },
            updateProgress: function() {
                this.preloadSprite && (0 === this.preloadSprite.direction ? this.preloadSprite.rect.width = Math.floor(this.preloadSprite.width / 100 * this.progress) : this.preloadSprite.rect.height = Math.floor(this.preloadSprite.height / 100 * this.progress), this.preloadSprite.sprite ? this.preloadSprite.sprite.updateCrop() : this.preloadSprite = null)
            },
            totalLoadedFiles: function() {
                return this._loadedFileCount
            },
            totalQueuedFiles: function() {
                return this._totalFileCount - this._loadedFileCount
            },
            totalLoadedPacks: function() {
                return this._totalPackCount
            },
            totalQueuedPacks: function() {
                return this._totalPackCount - this._loadedPackCount
            }
        }, Object.defineProperty(i.Loader.prototype, "progressFloat", {
            get: function() {
                var t = this._loadedFileCount / this._totalFileCount * 100;
                return i.Math.clamp(t || 0, 0, 100)
            }
        }), Object.defineProperty(i.Loader.prototype, "progress", {
            get: function() {
                return Math.round(this.progressFloat)
            }
        }), i.Loader.prototype.constructor = i.Loader, i.LoaderParser = {
            bitmapFont: function(t, e, i, s) {
                return this.xmlBitmapFont(t, e, i, s)
            },
            xmlBitmapFont: function(t, e, i, s) {
                var n = {},
                    a = t.getElementsByTagName("info")[0],
                    o = t.getElementsByTagName("common")[0];
                n.font = a.getAttribute("face"), n.size = parseInt(a.getAttribute("size"), 10), n.lineHeight = parseInt(o.getAttribute("lineHeight"), 10) + s, n.chars = {};
                for (var r = t.getElementsByTagName("char"), h = 0; h < r.length; h++) {
                    var l = parseInt(r[h].getAttribute("id"), 10);
                    n.chars[l] = {
                        x: parseInt(r[h].getAttribute("x"), 10),
                        y: parseInt(r[h].getAttribute("y"), 10),
                        width: parseInt(r[h].getAttribute("width"), 10),
                        height: parseInt(r[h].getAttribute("height"), 10),
                        xOffset: parseInt(r[h].getAttribute("xoffset"), 10),
                        yOffset: parseInt(r[h].getAttribute("yoffset"), 10),
                        xAdvance: parseInt(r[h].getAttribute("xadvance"), 10) + i,
                        kerning: {}
                    }
                }
                var c = t.getElementsByTagName("kerning");
                for (h = 0; h < c.length; h++) {
                    var u = parseInt(c[h].getAttribute("first"), 10),
                        d = parseInt(c[h].getAttribute("second"), 10),
                        p = parseInt(c[h].getAttribute("amount"), 10);
                    n.chars[d].kerning[u] = p
                }
                return this.finalizeBitmapFont(e, n)
            },
            jsonBitmapFont: function(t, e, i, s) {
                var n = {
                    font: t.font.info._face,
                    size: parseInt(t.font.info._size, 10),
                    lineHeight: parseInt(t.font.common._lineHeight, 10) + s,
                    chars: {}
                };
                return t.font.chars.char.forEach(function(t) {
                    var e = parseInt(t._id, 10);
                    n.chars[e] = {
                        x: parseInt(t._x, 10),
                        y: parseInt(t._y, 10),
                        width: parseInt(t._width, 10),
                        height: parseInt(t._height, 10),
                        xOffset: parseInt(t._xoffset, 10),
                        yOffset: parseInt(t._yoffset, 10),
                        xAdvance: parseInt(t._xadvance, 10) + i,
                        kerning: {}
                    }
                }), t.font.kernings && t.font.kernings.kerning && t.font.kernings.kerning.forEach(function(t) {
                    n.chars[t._second].kerning[t._first] = parseInt(t._amount, 10)
                }), this.finalizeBitmapFont(e, n)
            },
            finalizeBitmapFont: function(t, e) {
                return Object.keys(e.chars).forEach(function(s) {
                    var n = e.chars[s];
                    n.texture = new PIXI.Texture(t, new i.Rectangle(n.x, n.y, n.width, n.height))
                }), e
            }
        }, i.AudioSprite = function(t, e) {
            this.game = t, this.key = e, this.config = this.game.cache.getJSON(e + "-audioatlas"), this.autoplayKey = null, this.autoplay = !1, this.sounds = {};
            for (var i in this.config.spritemap) {
                var s = this.config.spritemap[i],
                    n = this.game.add.sound(this.key);
                n.addMarker(i, s.start, s.end - s.start, null, s.loop), this.sounds[i] = n
            }
            this.config.autoplay && (this.autoplayKey = this.config.autoplay, this.play(this.autoplayKey), this.autoplay = this.sounds[this.autoplayKey])
        }, i.AudioSprite.prototype = {
            play: function(t, e) {
                return void 0 === e && (e = 1), this.sounds[t].play(t, null, e)
            },
            stop: function(t) {
                if (t) this.sounds[t].stop();
                else
                    for (var e in this.sounds) this.sounds[e].stop()
            },
            get: function(t) {
                return this.sounds[t]
            }
        }, i.AudioSprite.prototype.constructor = i.AudioSprite, i.Sound = function(t, e, s, n, a) {
            void 0 === s && (s = 1), void 0 === n && (n = !1), void 0 === a && (a = t.sound.connectToMaster), this.game = t, this.name = e, this.key = e, this.loop = n, this.markers = {}, this.context = null, this.autoplay = !1, this.totalDuration = 0, this.startTime = 0, this.currentTime = 0, this.duration = 0, this.durationMS = 0, this.position = 0, this.stopTime = 0, this.paused = !1, this.pausedPosition = 0, this.pausedTime = 0, this.isPlaying = !1, this.currentMarker = "", this.fadeTween = null, this.pendingPlayback = !1, this.override = !1, this.allowMultiple = !1, this.usingWebAudio = this.game.sound.usingWebAudio, this.usingAudioTag = this.game.sound.usingAudioTag, this.externalNode = null, this.masterGainNode = null, this.gainNode = null, this._sound = null, this.usingWebAudio ? (this.context = this.game.sound.context, this.masterGainNode = this.game.sound.masterGain, void 0 === this.context.createGain ? this.gainNode = this.context.createGainNode() : this.gainNode = this.context.createGain(), this.gainNode.gain.value = s * this.game.sound.volume, a && this.gainNode.connect(this.masterGainNode)) : this.usingAudioTag && (this.game.cache.getSound(e) && this.game.cache.isSoundReady(e) ? (this._sound = this.game.cache.getSoundData(e), this.totalDuration = 0, this._sound.duration && (this.totalDuration = this._sound.duration)) : this.game.cache.onSoundUnlock.add(this.soundHasUnlocked, this)), this.onDecoded = new i.Signal, this.onPlay = new i.Signal, this.onPause = new i.Signal, this.onResume = new i.Signal, this.onLoop = new i.Signal, this.onStop = new i.Signal, this.onMute = new i.Signal, this.onMarkerComplete = new i.Signal, this.onFadeComplete = new i.Signal, this._volume = s, this._buffer = null, this._muted = !1, this._tempMarker = 0, this._tempPosition = 0, this._tempVolume = 0, this._tempPause = 0, this._muteVolume = 0, this._tempLoop = 0, this._paused = !1, this._onDecodedEventDispatched = !1
        }, i.Sound.prototype = {
            soundHasUnlocked: function(t) {
                t === this.key && (this._sound = this.game.cache.getSoundData(this.key), this.totalDuration = this._sound.duration)
            },
            addMarker: function(t, e, i, s, n) {
                void 0 !== i && null !== i || (i = 1), void 0 !== s && null !== s || (s = 1), void 0 === n && (n = !1), this.markers[t] = {
                    name: t,
                    start: e,
                    stop: e + i,
                    volume: s,
                    duration: i,
                    durationMS: 1e3 * i,
                    loop: n
                }
            },
            removeMarker: function(t) {
                delete this.markers[t]
            },
            onEndedHandler: function() {
                this._sound.onended = null, this.isPlaying = !1, this.currentTime = this.durationMS, this.stop()
            },
            update: function() {
                this.game.cache.checkSoundKey(this.key) ? (this.isDecoded && !this._onDecodedEventDispatched && (this.onDecoded.dispatch(this), this._onDecodedEventDispatched = !0), this.pendingPlayback && this.game.cache.isSoundReady(this.key) && (this.pendingPlayback = !1, this.play(this._tempMarker, this._tempPosition, this._tempVolume, this._tempLoop)), this.isPlaying && (this.currentTime = this.game.time.time - this.startTime, this.currentTime >= this.durationMS && (this.usingWebAudio ? this.loop ? (this.onLoop.dispatch(this), this.isPlaying = !1, "" === this.currentMarker ? (this.currentTime = 0, this.startTime = this.game.time.time, this.isPlaying = !0) : (this.onMarkerComplete.dispatch(this.currentMarker, this), this.play(this.currentMarker, 0, this.volume, !0, !0))) : "" !== this.currentMarker && this.stop() : this.loop ? (this.onLoop.dispatch(this), "" === this.currentMarker && (this.currentTime = 0, this.startTime = this.game.time.time), this.isPlaying = !1, this.play(this.currentMarker, 0, this.volume, !0, !0)) : this.stop()))) : this.destroy()
            },
            loopFull: function(t) {
                return this.play(null, 0, t, !0)
            },
            play: function(t, e, i, s, n) {
                if (void 0 !== t && !1 !== t && null !== t || (t = ""), void 0 === n && (n = !0), this.isPlaying && !this.allowMultiple && !n && !this.override) return this;
                if (this._sound && this.isPlaying && !this.allowMultiple && (this.override || n)) {
                    if (this.usingWebAudio) {
                        if (void 0 === this._sound.stop) this._sound.noteOff(0);
                        else try {
                            this._sound.stop(0)
                        } catch (t) {}
                        this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode)
                    } else this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
                    this.isPlaying = !1
                }
                if ("" === t && Object.keys(this.markers).length > 0) return this;
                if ("" !== t) {
                    if (!this.markers[t]) return this;
                    this.currentMarker = t, this.position = this.markers[t].start, this.volume = this.markers[t].volume, this.loop = this.markers[t].loop, this.duration = this.markers[t].duration, this.durationMS = this.markers[t].durationMS, void 0 !== i && (this.volume = i), void 0 !== s && (this.loop = s), this._tempMarker = t, this._tempPosition = this.position, this._tempVolume = this.volume, this._tempLoop = this.loop
                } else e = e || 0, void 0 === i && (i = this._volume), void 0 === s && (s = this.loop), this.position = Math.max(0, e), this.volume = i, this.loop = s, this.duration = 0, this.durationMS = 0, this._tempMarker = t, this._tempPosition = e, this._tempVolume = i, this._tempLoop = s;
                return this.usingWebAudio ? this.game.cache.isSoundDecoded(this.key) ? (this._sound = this.context.createBufferSource(), this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode), this._buffer = this.game.cache.getSoundData(this.key), this._sound.buffer = this._buffer, this.loop && "" === t && (this._sound.loop = !0), this.loop || "" !== t || (this._sound.onended = this.onEndedHandler.bind(this)), this.totalDuration = this._sound.buffer.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = Math.ceil(1e3 * this.totalDuration)), void 0 === this._sound.start ? this._sound.noteGrainOn(0, this.position, this.duration) : this.loop && "" === t ? this._sound.start(0, 0) : this._sound.start(0, this.position, this.duration), this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : (this.pendingPlayback = !0, this.game.cache.getSound(this.key) && !1 === this.game.cache.getSound(this.key).isDecoding && this.game.sound.decode(this.key, this)) : this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).locked ? (this.game.cache.reloadSound(this.key), this.pendingPlayback = !0) : this._sound && (this.game.device.cocoonJS || 4 === this._sound.readyState) ? (this._sound.play(), this.totalDuration = this._sound.duration, 0 === this.duration && (this.duration = this.totalDuration, this.durationMS = 1e3 * this.totalDuration), this._sound.currentTime = this.position, this._sound.muted = this._muted, this._muted || this.game.sound.mute ? this._sound.volume = 0 : this._sound.volume = this._volume, this.isPlaying = !0, this.startTime = this.game.time.time, this.currentTime = 0, this.stopTime = this.startTime + this.durationMS, this.onPlay.dispatch(this)) : this.pendingPlayback = !0, this
            },
            restart: function(t, e, i, s) {
                t = t || "", e = e || 0, i = i || 1, void 0 === s && (s = !1), this.play(t, e, i, s, !0)
            },
            pause: function() {
                this.isPlaying && this._sound && (this.paused = !0, this.pausedPosition = this.currentTime, this.pausedTime = this.game.time.time, this._tempPause = this._sound.currentTime, this.onPause.dispatch(this), this.stop())
            },
            resume: function() {
                if (this.paused && this._sound) {
                    if (this.usingWebAudio) {
                        var t = Math.max(0, this.position + this.pausedPosition / 1e3);
                        this._sound = this.context.createBufferSource(), this._sound.buffer = this._buffer, this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode), this.loop && (this._sound.loop = !0), this.loop || "" !== this.currentMarker || (this._sound.onended = this.onEndedHandler.bind(this));
                        var e = this.duration - this.pausedPosition / 1e3;
                        void 0 === this._sound.start ? this._sound.noteGrainOn(0, t, e) : this.loop && this.game.device.chrome ? 42 === this.game.device.chromeVersion ? this._sound.start(0) : this._sound.start(0, t) : this._sound.start(0, t, e)
                    } else this._sound.currentTime = this._tempPause, this._sound.play();
                    this.isPlaying = !0, this.paused = !1, this.startTime += this.game.time.time - this.pausedTime, this.onResume.dispatch(this)
                }
            },
            stop: function() {
                if (this.isPlaying && this._sound)
                    if (this.usingWebAudio) {
                        if (void 0 === this._sound.stop) this._sound.noteOff(0);
                        else try {
                            this._sound.stop(0)
                        } catch (t) {}
                        this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode)
                    } else this.usingAudioTag && (this._sound.pause(), this._sound.currentTime = 0);
                if (this.pendingPlayback = !1, this.isPlaying = !1, !this.paused) {
                    var t = this.currentMarker;
                    "" !== this.currentMarker && this.onMarkerComplete.dispatch(this.currentMarker, this), this.currentMarker = "", null !== this.fadeTween && this.fadeTween.stop(), this.onStop.dispatch(this, t)
                }
            },
            fadeIn: function(t, e, i) {
                void 0 === e && (e = !1), void 0 === i && (i = this.currentMarker), this.paused || (this.play(i, 0, 0, e), this.fadeTo(t, 1))
            },
            fadeOut: function(t) {
                this.fadeTo(t, 0)
            },
            fadeTo: function(t, e) {
                this.isPlaying && !this.paused && e !== this.volume && (void 0 === t && (t = 1e3), void 0 !== e && (this.fadeTween = this.game.add.tween(this).to({
                    volume: e
                }, t, i.Easing.Linear.None, !0), this.fadeTween.onComplete.add(this.fadeComplete, this)))
            },
            fadeComplete: function() {
                this.onFadeComplete.dispatch(this, this.volume), 0 === this.volume && this.stop()
            },
            updateGlobalVolume: function(t) {
                this.usingAudioTag && this._sound && (this._sound.volume = t * this._volume)
            },
            destroy: function(t) {
                void 0 === t && (t = !0), this.stop(), t ? this.game.sound.remove(this) : (this.markers = {}, this.context = null, this._buffer = null, this.externalNode = null, this.onDecoded.dispose(), this.onPlay.dispose(), this.onPause.dispose(), this.onResume.dispose(), this.onLoop.dispose(), this.onStop.dispose(), this.onMute.dispose(), this.onMarkerComplete.dispose())
            }
        }, i.Sound.prototype.constructor = i.Sound, Object.defineProperty(i.Sound.prototype, "isDecoding", {
            get: function() {
                return this.game.cache.getSound(this.key).isDecoding
            }
        }), Object.defineProperty(i.Sound.prototype, "isDecoded", {
            get: function() {
                return this.game.cache.isSoundDecoded(this.key)
            }
        }), Object.defineProperty(i.Sound.prototype, "mute", {
            get: function() {
                return this._muted || this.game.sound.mute
            },
            set: function(t) {
                (t = t || !1) !== this._muted && (t ? (this._muted = !0, this._muteVolume = this._tempVolume, this.usingWebAudio ? this.gainNode.gain.value = 0 : this.usingAudioTag && this._sound && (this._sound.volume = 0)) : (this._muted = !1, this.usingWebAudio ? this.gainNode.gain.value = this._muteVolume : this.usingAudioTag && this._sound && (this._sound.volume = this._muteVolume)), this.onMute.dispatch(this))
            }
        }), Object.defineProperty(i.Sound.prototype, "volume", {
            get: function() {
                return this._volume
            },
            set: function(t) {
                this.game.device.firefox && this.usingAudioTag && (t = this.game.math.clamp(t, 0, 1)), this._muted ? this._muteVolume = t : (this._tempVolume = t, this._volume = t, this.usingWebAudio ? this.gainNode.gain.value = t : this.usingAudioTag && this._sound && (this._sound.volume = t))
            }
        }), i.SoundManager = function(t) {
            this.game = t, this.onSoundDecode = new i.Signal, this.onVolumeChange = new i.Signal, this.onMute = new i.Signal, this.onUnMute = new i.Signal, this.context = null, this.usingWebAudio = !1, this.usingAudioTag = !1, this.noAudio = !1, this.connectToMaster = !0, this.touchLocked = !1, this.channels = 32, this.muteOnPause = !0, this._codeMuted = !1, this._muted = !1, this._unlockSource = null, this._volume = 1, this._sounds = [], this._watchList = new i.ArraySet, this._watching = !1, this._watchCallback = null, this._watchContext = null
        }, i.SoundManager.prototype = {
            boot: function() {
                if (this.game.device.iOS && !1 === this.game.device.webAudio && (this.channels = 1), window.PhaserGlobal) {
                    if (!0 === window.PhaserGlobal.disableAudio) return this.noAudio = !0, void(this.touchLocked = !1);
                    if (!0 === window.PhaserGlobal.disableWebAudio) return this.usingAudioTag = !0, void(this.touchLocked = !1)
                }
                if (window.PhaserGlobal && window.PhaserGlobal.audioContext) this.context = window.PhaserGlobal.audioContext;
                else if (window.AudioContext) try {
                        this.context = new window.AudioContext
                    } catch (t) {
                        this.context = null, this.usingWebAudio = !1, this.touchLocked = !1
                    } else if (window.webkitAudioContext) try {
                        this.context = new window.webkitAudioContext
                    } catch (t) {
                        this.context = null, this.usingWebAudio = !1, this.touchLocked = !1
                    }
                    if (null === this.context) {
                        if (void 0 === window.Audio) return void(this.noAudio = !0);
                        this.usingAudioTag = !0
                    } else this.usingWebAudio = !0, void 0 === this.context.createGain ? this.masterGain = this.context.createGainNode() : this.masterGain = this.context.createGain(), this.masterGain.gain.value = 1, this.masterGain.connect(this.context.destination);
                this.noAudio || !this.game.device.cocoonJS && (this.game.device.android || this.game.device.iOS || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock) && this.setTouchLock()
            },
            setTouchLock: function() {
                this.noAudio || window.PhaserGlobal && !0 === window.PhaserGlobal.disableAudio || (this.game.device.iOSVersion > 8 || this.game.device.chromeVersion >= 55 ? this.game.input.touch.addTouchLockCallback(this.unlock, this, !0) : this.game.input.touch.addTouchLockCallback(this.unlock, this), this.touchLocked = !0)
            },
            unlock: function() {
                if (this.noAudio || !this.touchLocked || null !== this._unlockSource) return !0;
                if (this.usingAudioTag) this.touchLocked = !1, this._unlockSource = null;
                else if (this.usingWebAudio) {
                    var t = this.context.createBuffer(1, 1, 22050);
                    this._unlockSource = this.context.createBufferSource(), this._unlockSource.buffer = t, this._unlockSource.connect(this.context.destination), void 0 === this._unlockSource.start ? this._unlockSource.noteOn(0) : this._unlockSource.start(0), "suspended" === this._unlockSource.context.state && this._unlockSource.context.resume()
                }
                return !0
            },
            stopAll: function() {
                if (!this.noAudio)
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].stop()
            },
            pauseAll: function() {
                if (!this.noAudio)
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].pause()
            },
            resumeAll: function() {
                if (!this.noAudio)
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].resume()
            },
            decode: function(t, e) {
                e = e || null;
                var i = this.game.cache.getSoundData(t);
                if (i && !1 === this.game.cache.isSoundDecoded(t)) {
                    this.game.cache.updateSound(t, "isDecoding", !0);
                    var s = this;
                    try {
                        this.context.decodeAudioData(i, function(i) {
                            i && (s.game.cache.decodedSound(t, i), s.onSoundDecode.dispatch(t, e))
                        })
                    } catch (t) {}
                }
            },
            setDecodedCallback: function(t, e, s) {
                "string" == typeof t && (t = [t]), this._watchList.reset();
                for (var n = 0; n < t.length; n++) t[n] instanceof i.Sound ? this.game.cache.isSoundDecoded(t[n].key) || this._watchList.add(t[n].key) : this.game.cache.isSoundDecoded(t[n]) || this._watchList.add(t[n]);
                0 === this._watchList.total ? (this._watching = !1, e.call(s)) : (this._watching = !0, this._watchCallback = e, this._watchContext = s)
            },
            update: function() {
                if (!this.noAudio) {
                    !this.touchLocked || null === this._unlockSource || this._unlockSource.playbackState !== this._unlockSource.PLAYING_STATE && this._unlockSource.playbackState !== this._unlockSource.FINISHED_STATE || (this.touchLocked = !1, this._unlockSource = null);
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t].update();
                    if (this._watching) {
                        for (var e = this._watchList.first; e;) this.game.cache.isSoundDecoded(e) && this._watchList.remove(e), e = this._watchList.next;
                        0 === this._watchList.total && (this._watching = !1, this._watchCallback.call(this._watchContext))
                    }
                }
            },
            add: function(t, e, s, n) {
                void 0 === e && (e = 1), void 0 === s && (s = !1), void 0 === n && (n = this.connectToMaster);
                var a = new i.Sound(this.game, t, e, s, n);
                return this._sounds.push(a), a
            },
            addSprite: function(t) {
                return new i.AudioSprite(this.game, t)
            },
            remove: function(t) {
                for (var e = this._sounds.length; e--;)
                    if (this._sounds[e] === t) return this._sounds[e].destroy(!1), this._sounds.splice(e, 1), !0;
                return !1
            },
            removeByKey: function(t) {
                for (var e = this._sounds.length, i = 0; e--;) this._sounds[e].key === t && (this._sounds[e].destroy(!1), this._sounds.splice(e, 1), i++);
                return i
            },
            play: function(t, e, i) {
                if (!this.noAudio) {
                    var s = this.add(t, e, i);
                    return s.play(), s
                }
            },
            setMute: function() {
                if (!this._muted) {
                    this._muted = !0, this.usingWebAudio && (this._muteVolume = this.masterGain.gain.value, this.masterGain.gain.value = 0);
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t].usingAudioTag && (this._sounds[t].mute = !0);
                    this.onMute.dispatch()
                }
            },
            unsetMute: function() {
                if (this._muted && !this._codeMuted) {
                    this._muted = !1, this.usingWebAudio && (this.masterGain.gain.value = this._muteVolume);
                    for (var t = 0; t < this._sounds.length; t++) this._sounds[t].usingAudioTag && (this._sounds[t].mute = !1);
                    this.onUnMute.dispatch()
                }
            },
            destroy: function() {
                this.stopAll();
                for (var t = 0; t < this._sounds.length; t++) this._sounds[t] && this._sounds[t].destroy();
                this._sounds = [], this.onSoundDecode.dispose(), this.context && (window.PhaserGlobal ? window.PhaserGlobal.audioContext = this.context : this.context.close && this.context.close())
            }
        }, i.SoundManager.prototype.constructor = i.SoundManager, Object.defineProperty(i.SoundManager.prototype, "mute", {
            get: function() {
                return this._muted
            },
            set: function(t) {
                if (t = t || !1) {
                    if (this._muted) return;
                    this._codeMuted = !0, this.setMute()
                } else {
                    if (!this._muted) return;
                    this._codeMuted = !1, this.unsetMute()
                }
            }
        }), Object.defineProperty(i.SoundManager.prototype, "volume", {
            get: function() {
                return this._volume
            },
            set: function(t) {
                if (t < 0 ? t = 0 : t > 1 && (t = 1), this._volume !== t) {
                    if (this._volume = t, this.usingWebAudio) this.masterGain.gain.value = t;
                    else
                        for (var e = 0; e < this._sounds.length; e++) this._sounds[e].usingAudioTag && this._sounds[e].updateGlobalVolume(t);
                    this.onVolumeChange.dispatch(t)
                }
            }
        }), i.ScaleManager = function(t, e, s) {
            this.game = t, this.dom = i.DOM, this.grid = null, this.width = 0, this.height = 0, this.minWidth = null, this.maxWidth = null, this.minHeight = null, this.maxHeight = null, this.offset = new i.Point, this.forceLandscape = !1, this.forcePortrait = !1, this.incorrectOrientation = !1, this._pageAlignHorizontally = !1, this._pageAlignVertically = !1, this.onOrientationChange = new i.Signal, this.enterIncorrectOrientation = new i.Signal, this.leaveIncorrectOrientation = new i.Signal, this.hasPhaserSetFullScreen = !1, this.fullScreenTarget = null, this._createdFullScreenTarget = null, this.onFullScreenInit = new i.Signal, this.onFullScreenChange = new i.Signal, this.onFullScreenError = new i.Signal, this.screenOrientation = this.dom.getScreenOrientation(), this.scaleFactor = new i.Point(1, 1), this.scaleFactorInversed = new i.Point(1, 1), this.margin = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0,
                x: 0,
                y: 0
            }, this.bounds = new i.Rectangle, this.aspectRatio = 0, this.sourceAspectRatio = 0, this.event = null, this.windowConstraints = {
                right: "layout",
                bottom: ""
            }, this.compatibility = {
                supportsFullScreen: !1,
                orientationFallback: null,
                noMargins: !1,
                scrollTo: null,
                forceMinimumDocumentHeight: !1,
                canExpandParent: !0,
                clickTrampoline: ""
            }, this._scaleMode = i.ScaleManager.NO_SCALE, this._fullScreenScaleMode = i.ScaleManager.NO_SCALE, this.parentIsWindow = !1, this.parentNode = null, this.parentScaleFactor = new i.Point(1, 1), this.trackParentInterval = 2e3, this.onSizeChange = new i.Signal, this.onResize = null, this.onResizeContext = null, this._pendingScaleMode = null, this._fullScreenRestore = null, this._gameSize = new i.Rectangle, this._userScaleFactor = new i.Point(1, 1), this._userScaleTrim = new i.Point(0, 0), this._lastUpdate = 0, this._updateThrottle = 0, this._updateThrottleReset = 100, this._parentBounds = new i.Rectangle, this._tempBounds = new i.Rectangle, this._lastReportedCanvasSize = new i.Rectangle, this._lastReportedGameSize = new i.Rectangle, this._booted = !1, t.config && this.parseConfig(t.config), this.setupScale(e, s)
        }, i.ScaleManager.EXACT_FIT = 0, i.ScaleManager.NO_SCALE = 1, i.ScaleManager.SHOW_ALL = 2, i.ScaleManager.RESIZE = 3, i.ScaleManager.USER_SCALE = 4, i.ScaleManager.prototype = {
            boot: function() {
                var t = this.compatibility;
                t.supportsFullScreen = this.game.device.fullscreen && !this.game.device.cocoonJS, this.game.device.iPad || this.game.device.webApp || this.game.device.desktop || (this.game.device.android && !this.game.device.chrome ? t.scrollTo = new i.Point(0, 1) : t.scrollTo = new i.Point(0, 0)), this.game.device.desktop ? (t.orientationFallback = "screen", t.clickTrampoline = "when-not-mouse") : (t.orientationFallback = "", t.clickTrampoline = "");
                var e = this;
                this._orientationChange = function(t) {
                    return e.orientationChange(t)
                }, this._windowResize = function(t) {
                    return e.windowResize(t)
                }, window.addEventListener("orientationchange", this._orientationChange, !1), window.addEventListener("resize", this._windowResize, !1), this.compatibility.supportsFullScreen && (this._fullScreenChange = function(t) {
                    return e.fullScreenChange(t)
                }, this._fullScreenError = function(t) {
                    return e.fullScreenError(t)
                }, document.addEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.addEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.addEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.addEventListener("fullscreenchange", this._fullScreenChange, !1), document.addEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.addEventListener("mozfullscreenerror", this._fullScreenError, !1), document.addEventListener("MSFullscreenError", this._fullScreenError, !1), document.addEventListener("fullscreenerror", this._fullScreenError, !1)), this.game.onResume.add(this._gameResumed, this), this.dom.getOffset(this.game.canvas, this.offset), this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height), this.setGameSize(this.game.width, this.game.height), this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback), i.FlexGrid && (this.grid = new i.FlexGrid(this, this.width, this.height)), this._booted = !0, null !== this._pendingScaleMode && (this.scaleMode = this._pendingScaleMode, this._pendingScaleMode = null)
            },
            parseConfig: function(t) {
                void 0 !== t.scaleMode && (this._booted ? this.scaleMode = t.scaleMode : this._pendingScaleMode = t.scaleMode), void 0 !== t.fullScreenScaleMode && (this.fullScreenScaleMode = t.fullScreenScaleMode), t.fullScreenTarget && (this.fullScreenTarget = t.fullScreenTarget)
            },
            setupScale: function(t, e) {
                var s, n = new i.Rectangle;
                "" !== this.game.parent && ("string" == typeof this.game.parent ? s = document.getElementById(this.game.parent) : this.game.parent && 1 === this.game.parent.nodeType && (s = this.game.parent)), s ? (this.parentNode = s, this.parentIsWindow = !1, this.getParentBounds(this._parentBounds), n.width = this._parentBounds.width, n.height = this._parentBounds.height, this.offset.set(this._parentBounds.x, this._parentBounds.y)) : (this.parentNode = null, this.parentIsWindow = !0, n.width = this.dom.visualBounds.width, n.height = this.dom.visualBounds.height, this.offset.set(0, 0));
                var a = 0,
                    o = 0;
                "number" == typeof t ? a = t : (this.parentScaleFactor.x = parseInt(t, 10) / 100, a = n.width * this.parentScaleFactor.x), "number" == typeof e ? o = e : (this.parentScaleFactor.y = parseInt(e, 10) / 100, o = n.height * this.parentScaleFactor.y), a = Math.floor(a), o = Math.floor(o), this._gameSize.setTo(0, 0, a, o), this.updateDimensions(a, o, !1)
            },
            _gameResumed: function() {
                this.queueUpdate(!0)
            },
            setGameSize: function(t, e) {
                this._gameSize.setTo(0, 0, t, e), this.currentScaleMode !== i.ScaleManager.RESIZE && this.updateDimensions(t, e, !0), this.queueUpdate(!0)
            },
            setUserScale: function(t, e, i, s) {
                this._userScaleFactor.setTo(t, e), this._userScaleTrim.setTo(0 | i, 0 | s), this.queueUpdate(!0)
            },
            setResizeCallback: function(t, e) {
                this.onResize = t, this.onResizeContext = e
            },
            signalSizeChange: function() {
                if (!i.Rectangle.sameDimensions(this, this._lastReportedCanvasSize) || !i.Rectangle.sameDimensions(this.game, this._lastReportedGameSize)) {
                    var t = this.width,
                        e = this.height;
                    this._lastReportedCanvasSize.setTo(0, 0, t, e), this._lastReportedGameSize.setTo(0, 0, this.game.width, this.game.height), this.grid && this.grid.onResize(t, e), this.onSizeChange.dispatch(this, t, e), this.currentScaleMode === i.ScaleManager.RESIZE && (this.game.state.resize(t, e), this.game.load.resize(t, e))
                }
            },
            setMinMax: function(t, e, i, s) {
                this.minWidth = t, this.minHeight = e, void 0 !== i && (this.maxWidth = i), void 0 !== s && (this.maxHeight = s)
            },
            preUpdate: function() {
                if (!(this.game.time.time < this._lastUpdate + this._updateThrottle)) {
                    var t = this._updateThrottle;
                    this._updateThrottleReset = t >= 400 ? 0 : 100, this.dom.getOffset(this.game.canvas, this.offset);
                    var e = this._parentBounds.width,
                        s = this._parentBounds.height,
                        n = this.getParentBounds(this._parentBounds),
                        a = n.width !== e || n.height !== s,
                        o = this.updateOrientationState();
                    (a || o) && (this.onResize && this.onResize.call(this.onResizeContext, this, n), this.updateLayout(), this.signalSizeChange());
                    var r = 2 * this._updateThrottle;
                    this._updateThrottle < t && (r = Math.min(t, this._updateThrottleReset)), this._updateThrottle = i.Math.clamp(r, 25, this.trackParentInterval), this._lastUpdate = this.game.time.time
                }
            },
            pauseUpdate: function() {
                this.preUpdate(), this._updateThrottle = this.trackParentInterval
            },
            updateDimensions: function(t, e, i) {
                this.width = t * this.parentScaleFactor.x, this.height = e * this.parentScaleFactor.y, this.game.width = this.width, this.game.height = this.height, this.sourceAspectRatio = this.width / this.height, this.updateScalingAndBounds(), i && (this.game.renderer.resize(this.width, this.height), this.game.camera.setSize(this.width, this.height), this.game.world.resize(this.width, this.height))
            },
            updateScalingAndBounds: function() {
                this.scaleFactor.x = this.game.width / this.width, this.scaleFactor.y = this.game.height / this.height, this.scaleFactorInversed.x = this.width / this.game.width, this.scaleFactorInversed.y = this.height / this.game.height, this.aspectRatio = this.width / this.height, this.game.canvas && this.dom.getOffset(this.game.canvas, this.offset), this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height), this.game.input && this.game.input.scale && this.game.input.scale.setTo(this.scaleFactor.x, this.scaleFactor.y)
            },
            forceOrientation: function(t, e) {
                void 0 === e && (e = !1), this.forceLandscape = t, this.forcePortrait = e, this.queueUpdate(!0)
            },
            classifyOrientation: function(t) {
                return "portrait-primary" === t || "portrait-secondary" === t ? "portrait" : "landscape-primary" === t || "landscape-secondary" === t ? "landscape" : null
            },
            updateOrientationState: function() {
                var t = this.screenOrientation,
                    e = this.incorrectOrientation;
                this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback), this.incorrectOrientation = this.forceLandscape && !this.isLandscape || this.forcePortrait && !this.isPortrait;
                var i = t !== this.screenOrientation,
                    s = e !== this.incorrectOrientation;
                return s && (this.incorrectOrientation ? this.enterIncorrectOrientation.dispatch() : this.leaveIncorrectOrientation.dispatch()), (i || s) && this.onOrientationChange.dispatch(this, t, e), i || s
            },
            orientationChange: function(t) {
                this.event = t, this.queueUpdate(!0)
            },
            windowResize: function(t) {
                this.event = t, this.queueUpdate(!0)
            },
            scrollTop: function() {
                var t = this.compatibility.scrollTo;
                t && window.scrollTo(t.x, t.y)
            },
            refresh: function() {
                this.scrollTop(), this.queueUpdate(!0)
            },
            updateLayout: function() {
                var t = this.currentScaleMode;
                if (t !== i.ScaleManager.RESIZE) {
                    if (this.scrollTop(), this.compatibility.forceMinimumDocumentHeight && (document.documentElement.style.minHeight = window.innerHeight + "px"), this.incorrectOrientation ? this.setMaximum() : t === i.ScaleManager.EXACT_FIT ? this.setExactFit() : t === i.ScaleManager.SHOW_ALL ? !this.isFullScreen && this.boundingParent && this.compatibility.canExpandParent ? (this.setShowAll(!0), this.resetCanvas(), this.setShowAll()) : this.setShowAll() : t === i.ScaleManager.NO_SCALE ? (this.width = this.game.width, this.height = this.game.height) : t === i.ScaleManager.USER_SCALE && (this.width = this.game.width * this._userScaleFactor.x - this._userScaleTrim.x, this.height = this.game.height * this._userScaleFactor.y - this._userScaleTrim.y), !this.compatibility.canExpandParent && (t === i.ScaleManager.SHOW_ALL || t === i.ScaleManager.USER_SCALE)) {
                        var e = this.getParentBounds(this._tempBounds);
                        this.width = Math.min(this.width, e.width), this.height = Math.min(this.height, e.height)
                    }
                    this.width = 0 | this.width, this.height = 0 | this.height, this.reflowCanvas()
                } else this.reflowGame()
            },
            getParentBounds: function(t) {
                var e = t || new i.Rectangle,
                    s = this.boundingParent,
                    n = this.dom.visualBounds,
                    a = this.dom.layoutBounds;
                if (s) {
                    var o = s.getBoundingClientRect(),
                        r = s.offsetParent ? s.offsetParent.getBoundingClientRect() : s.getBoundingClientRect();
                    e.setTo(o.left - r.left, o.top - r.top, o.width, o.height);
                    var h = this.windowConstraints;
                    if (h.right) {
                        l = "layout" === h.right ? a : n;
                        e.right = Math.min(e.right, l.width)
                    }
                    if (h.bottom) {
                        var l = "layout" === h.bottom ? a : n;
                        e.bottom = Math.min(e.bottom, l.height)
                    }
                } else e.setTo(0, 0, n.width, n.height);
                return e.setTo(Math.round(e.x), Math.round(e.y), Math.round(e.width), Math.round(e.height)), e
            },
            alignCanvas: function(t, e) {
                var i = this.getParentBounds(this._tempBounds),
                    s = this.game.canvas,
                    n = this.margin;
                if (t) {
                    n.left = n.right = 0;
                    h = s.getBoundingClientRect();
                    if (this.width < i.width && !this.incorrectOrientation) {
                        var a = h.left - i.x,
                            o = i.width / 2 - this.width / 2,
                            r = (o = Math.max(o, 0)) - a;
                        n.left = Math.round(r)
                    }
                    s.style.marginLeft = n.left + "px", 0 !== n.left && (n.right = -(i.width - h.width - n.left), s.style.marginRight = n.right + "px")
                }
                if (e) {
                    n.top = n.bottom = 0;
                    var h = s.getBoundingClientRect();
                    if (this.height < i.height && !this.incorrectOrientation) {
                        var a = h.top - i.y,
                            o = i.height / 2 - this.height / 2,
                            r = (o = Math.max(o, 0)) - a;
                        n.top = Math.round(r)
                    }
                    s.style.marginTop = n.top + "px", 0 !== n.top && (n.bottom = -(i.height - h.height - n.top), s.style.marginBottom = n.bottom + "px")
                }
                n.x = n.left, n.y = n.top
            },
            reflowGame: function() {
                this.resetCanvas("", "");
                var t = this.getParentBounds(this._tempBounds);
                this.updateDimensions(t.width, t.height, !0)
            },
            reflowCanvas: function() {
                this.incorrectOrientation || (this.width = i.Math.clamp(this.width, this.minWidth || 0, this.maxWidth || this.width), this.height = i.Math.clamp(this.height, this.minHeight || 0, this.maxHeight || this.height)), this.resetCanvas(), this.compatibility.noMargins || (this.isFullScreen && this._createdFullScreenTarget ? this.alignCanvas(!0, !0) : this.alignCanvas(this.pageAlignHorizontally, this.pageAlignVertically)), this.updateScalingAndBounds()
            },
            resetCanvas: function(t, e) {
                void 0 === t && (t = this.width + "px"), void 0 === e && (e = this.height + "px");
                var i = this.game.canvas;
                this.compatibility.noMargins || (i.style.marginLeft = "", i.style.marginTop = "", i.style.marginRight = "", i.style.marginBottom = ""), i.style.width = t, i.style.height = e
            },
            queueUpdate: function(t) {
                t && (this._parentBounds.width = 0, this._parentBounds.height = 0), this._updateThrottle = this._updateThrottleReset
            },
            reset: function(t) {
                t && this.grid && this.grid.reset()
            },
            setMaximum: function() {
                this.width = this.dom.visualBounds.width, this.height = this.dom.visualBounds.height
            },
            setShowAll: function(t) {
                var e, i = this.getParentBounds(this._tempBounds),
                    s = i.width,
                    n = i.height;
                e = t ? Math.max(n / this.game.height, s / this.game.width) : Math.min(n / this.game.height, s / this.game.width), this.width = Math.round(this.game.width * e), this.height = Math.round(this.game.height * e)
            },
            setExactFit: function() {
                var t = this.getParentBounds(this._tempBounds);
                this.width = t.width, this.height = t.height, this.isFullScreen || (this.maxWidth && (this.width = Math.min(this.width, this.maxWidth)), this.maxHeight && (this.height = Math.min(this.height, this.maxHeight)))
            },
            createFullScreenTarget: function() {
                var t = document.createElement("div");
                return t.style.margin = "0", t.style.padding = "0", t.style.background = "#000", t
            },
            startFullScreen: function(t, e) {
                if (this.isFullScreen) return !1; {
                    if (this.compatibility.supportsFullScreen) {
                        if ("when-not-mouse" === this.compatibility.clickTrampoline) {
                            var s = this.game.input;
                            if (s.activePointer && s.activePointer !== s.mousePointer && (e || !1 !== e)) return void s.activePointer.addClickTrampoline("startFullScreen", this.startFullScreen, this, [t, !1])
                        }
                        void 0 !== t && this.game.renderType === i.CANVAS && (this.game.stage.smoothed = t);
                        var n = this.fullScreenTarget;
                        n || (this.cleanupCreatedTarget(), this._createdFullScreenTarget = this.createFullScreenTarget(), n = this._createdFullScreenTarget);
                        var a = {
                            targetElement: n
                        };
                        if (this.hasPhaserSetFullScreen = !0, this.onFullScreenInit.dispatch(this, a), this._createdFullScreenTarget) {
                            var o = this.game.canvas;
                            o.parentNode.insertBefore(n, o), n.appendChild(o)
                        }
                        return this.game.device.fullscreenKeyboard ? n[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT) : n[this.game.device.requestFullscreen](), !0
                    }
                    var r = this;
                    setTimeout(function() {
                        r.fullScreenError()
                    }, 10)
                }
            },
            stopFullScreen: function() {
                return !(!this.isFullScreen || !this.compatibility.supportsFullScreen) && (this.hasPhaserSetFullScreen = !1, document[this.game.device.cancelFullscreen](), !0)
            },
            cleanupCreatedTarget: function() {
                var t = this._createdFullScreenTarget;
                if (t && t.parentNode) {
                    var e = t.parentNode;
                    e.insertBefore(this.game.canvas, t), e.removeChild(t)
                }
                this._createdFullScreenTarget = null
            },
            prepScreenMode: function(t) {
                var e = !!this._createdFullScreenTarget,
                    s = this._createdFullScreenTarget || this.fullScreenTarget;
                t ? (e || this.fullScreenScaleMode === i.ScaleManager.EXACT_FIT) && s !== this.game.canvas && (this._fullScreenRestore = {
                    targetWidth: s.style.width,
                    targetHeight: s.style.height
                }, s.style.width = "100%", s.style.height = "100%") : (this._fullScreenRestore && (s.style.width = this._fullScreenRestore.targetWidth, s.style.height = this._fullScreenRestore.targetHeight, this._fullScreenRestore = null), this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.resetCanvas())
            },
            fullScreenChange: function(t) {
                this.event = t, this.isFullScreen ? (this.prepScreenMode(!0), this.updateLayout(), this.queueUpdate(!0)) : (this.prepScreenMode(!1), this.cleanupCreatedTarget(), this.updateLayout(), this.queueUpdate(!0)), this.onFullScreenChange.dispatch(this, this.width, this.height)
            },
            fullScreenError: function(t) {
                this.event = t, this.cleanupCreatedTarget(), this.onFullScreenError.dispatch(this)
            },
            scaleSprite: function(t, e, i, s) {
                if (void 0 === e && (e = this.width), void 0 === i && (i = this.height), void 0 === s && (s = !1), !t || !t.scale) return t;
                if (t.scale.x = 1, t.scale.y = 1, t.width <= 0 || t.height <= 0 || e <= 0 || i <= 0) return t;
                var n = e,
                    a = t.height * e / t.width,
                    o = t.width * i / t.height,
                    r = i,
                    h = o > e;
                return (h = h ? s : !s) ? (t.width = Math.floor(n), t.height = Math.floor(a)) : (t.width = Math.floor(o), t.height = Math.floor(r)), t
            },
            destroy: function() {
                this.game.onResume.remove(this._gameResumed, this), window.removeEventListener("orientationchange", this._orientationChange, !1), window.removeEventListener("resize", this._windowResize, !1), this.compatibility.supportsFullScreen && (document.removeEventListener("webkitfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("mozfullscreenchange", this._fullScreenChange, !1), document.removeEventListener("MSFullscreenChange", this._fullScreenChange, !1), document.removeEventListener("fullscreenchange", this._fullScreenChange, !1), document.removeEventListener("webkitfullscreenerror", this._fullScreenError, !1), document.removeEventListener("mozfullscreenerror", this._fullScreenError, !1), document.removeEventListener("MSFullscreenError", this._fullScreenError, !1), document.removeEventListener("fullscreenerror", this._fullScreenError, !1))
            }
        }, i.ScaleManager.prototype.constructor = i.ScaleManager, Object.defineProperty(i.ScaleManager.prototype, "boundingParent", {
            get: function() {
                return this.parentIsWindow || this.isFullScreen && this.hasPhaserSetFullScreen && !this._createdFullScreenTarget ? null : this.game.canvas && this.game.canvas.parentNode || null
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "scaleMode", {
            get: function() {
                return this._scaleMode
            },
            set: function(t) {
                return t !== this._scaleMode && (this.isFullScreen || (this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.queueUpdate(!0)), this._scaleMode = t), this._scaleMode
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "fullScreenScaleMode", {
            get: function() {
                return this._fullScreenScaleMode
            },
            set: function(t) {
                return t !== this._fullScreenScaleMode && (this.isFullScreen ? (this.prepScreenMode(!1), this._fullScreenScaleMode = t, this.prepScreenMode(!0), this.queueUpdate(!0)) : this._fullScreenScaleMode = t), this._fullScreenScaleMode
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "currentScaleMode", {
            get: function() {
                return this.isFullScreen ? this._fullScreenScaleMode : this._scaleMode
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "pageAlignHorizontally", {
            get: function() {
                return this._pageAlignHorizontally
            },
            set: function(t) {
                t !== this._pageAlignHorizontally && (this._pageAlignHorizontally = t, this.queueUpdate(!0))
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "pageAlignVertically", {
            get: function() {
                return this._pageAlignVertically
            },
            set: function(t) {
                t !== this._pageAlignVertically && (this._pageAlignVertically = t, this.queueUpdate(!0))
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "isFullScreen", {
            get: function() {
                return !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "isPortrait", {
            get: function() {
                return "portrait" === this.classifyOrientation(this.screenOrientation)
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "isLandscape", {
            get: function() {
                return "landscape" === this.classifyOrientation(this.screenOrientation)
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "isGamePortrait", {
            get: function() {
                return this.height > this.width
            }
        }), Object.defineProperty(i.ScaleManager.prototype, "isGameLandscape", {
            get: function() {
                return this.width > this.height
            }
        }), i.Utils.Debug = function(t) {
            this.game = t, this.sprite = null, this.bmd = null, this.canvas = null, this.context = null, this.font = "14px Courier", this.columnWidth = 100, this.lineHeight = 16, this.renderShadow = !0, this.currentX = 0, this.currentY = 0, this.currentAlpha = 1, this.dirty = !1
        }, i.Utils.Debug.prototype = {
            boot: function() {
                this.game.renderType === i.CANVAS ? this.context = this.game.context : (this.bmd = new i.BitmapData(this.game, "__DEBUG", this.game.width, this.game.height, !0), this.sprite = this.game.make.image(0, 0, this.bmd), this.game.stage.addChild(this.sprite), this.game.scale.onSizeChange.add(this.resize, this), this.canvas = PIXI.CanvasPool.create(this, this.game.width, this.game.height), this.context = this.canvas.getContext("2d"))
            },
            resize: function(t, e, i) {
                this.bmd.resize(e, i), this.canvas.width = e, this.canvas.height = i
            },
            preUpdate: function() {
                this.dirty && this.sprite && (this.bmd.clear(), this.bmd.draw(this.canvas, 0, 0), this.context.clearRect(0, 0, this.game.width, this.game.height), this.dirty = !1)
            },
            reset: function() {
                this.context && this.context.clearRect(0, 0, this.game.width, this.game.height), this.sprite && this.bmd.clear()
            },
            start: function(t, e, i, s) {
                "number" != typeof t && (t = 0), "number" != typeof e && (e = 0), i = i || "rgb(255,255,255)", void 0 === s && (s = 0), this.currentX = t, this.currentY = e, this.currentColor = i, this.columnWidth = s, this.dirty = !0, this.context.save(), this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.strokeStyle = i, this.context.fillStyle = i, this.context.font = this.font, this.context.globalAlpha = this.currentAlpha
            },
            stop: function() {
                this.context.restore()
            },
            line: function() {
                for (var t = this.currentX, e = 0; e < arguments.length; e++) this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(arguments[e], t + 1, this.currentY + 1), this.context.fillStyle = this.currentColor), this.context.fillText(arguments[e], t, this.currentY), t += this.columnWidth;
                this.currentY += this.lineHeight
            },
            soundInfo: function(t, e, i, s) {
                this.start(e, i, s), this.line("Sound: " + t.key + " Locked: " + t.game.sound.touchLocked), this.line("Is Ready?: " + this.game.cache.isSoundReady(t.key) + " Pending Playback: " + t.pendingPlayback), this.line("Decoded: " + t.isDecoded + " Decoding: " + t.isDecoding), this.line("Total Duration: " + t.totalDuration + " Playing: " + t.isPlaying), this.line("Time: " + t.currentTime), this.line("Volume: " + t.volume + " Muted: " + t.mute), this.line("WebAudio: " + t.usingWebAudio + " Audio: " + t.usingAudioTag), "" !== t.currentMarker && (this.line("Marker: " + t.currentMarker + " Duration: " + t.duration + " (ms: " + t.durationMS + ")"), this.line("Start: " + t.markers[t.currentMarker].start + " Stop: " + t.markers[t.currentMarker].stop), this.line("Position: " + t.position)), this.stop()
            },
            cameraInfo: function(t, e, i, s) {
                this.start(e, i, s), this.line("Camera (" + t.width + " x " + t.height + ")"), this.line("X: " + t.x + " Y: " + t.y), t.bounds && this.line("Bounds x: " + t.bounds.x + " Y: " + t.bounds.y + " w: " + t.bounds.width + " h: " + t.bounds.height), this.line("View x: " + t.view.x + " Y: " + t.view.y + " w: " + t.view.width + " h: " + t.view.height), this.line("Total in view: " + t.totalInView), this.stop()
            },
            timer: function(t, e, i, s) {
                this.start(e, i, s), this.line("Timer (running: " + t.running + " expired: " + t.expired + ")"), this.line("Next Tick: " + t.next + " Duration: " + t.duration), this.line("Paused: " + t.paused + " Length: " + t.length), this.stop()
            },
            pointer: function(t, e, i, s, n) {
                null != t && (void 0 === e && (e = !1), i = i || "rgba(0,255,0,0.5)", s = s || "rgba(255,0,0,0.5)", !0 === e && !0 === t.isUp || (this.start(t.x, t.y - 100, n), this.context.beginPath(), this.context.arc(t.x, t.y, t.circle.radius, 0, 2 * Math.PI), t.active ? this.context.fillStyle = i : this.context.fillStyle = s, this.context.fill(), this.context.closePath(), this.context.beginPath(), this.context.moveTo(t.positionDown.x, t.positionDown.y), this.context.lineTo(t.position.x, t.position.y), this.context.lineWidth = 2, this.context.stroke(), this.context.closePath(), this.line("ID: " + t.id + " Active: " + t.active), this.line("World X: " + t.worldX + " World Y: " + t.worldY), this.line("Screen X: " + t.x + " Screen Y: " + t.y + " In: " + t.withinGame), this.line("Duration: " + t.duration + " ms"), this.line("is Down: " + t.isDown + " is Up: " + t.isUp), this.stop()))
            },
            spriteInputInfo: function(t, e, i, s) {
                this.start(e, i, s), this.line("Sprite Input: (" + t.width + " x " + t.height + ")"), this.line("x: " + t.input.pointerX().toFixed(1) + " y: " + t.input.pointerY().toFixed(1)), this.line("over: " + t.input.pointerOver() + " duration: " + t.input.overDuration().toFixed(0)), this.line("down: " + t.input.pointerDown() + " duration: " + t.input.downDuration().toFixed(0)), this.line("just over: " + t.input.justOver() + " just out: " + t.input.justOut()), this.stop()
            },
            key: function(t, e, i, s) {
                this.start(e, i, s, 150), this.line("Key:", t.keyCode, "isDown:", t.isDown), this.line("justDown:", t.justDown, "justUp:", t.justUp), this.line("Time Down:", t.timeDown.toFixed(0), "duration:", t.duration.toFixed(0)), this.stop()
            },
            inputInfo: function(t, e, i) {
                this.start(t, e, i), this.line("Input"), this.line("X: " + this.game.input.x + " Y: " + this.game.input.y), this.line("World X: " + this.game.input.worldX + " World Y: " + this.game.input.worldY), this.line("Scale X: " + this.game.input.scale.x.toFixed(1) + " Scale Y: " + this.game.input.scale.x.toFixed(1)), this.line("Screen X: " + this.game.input.activePointer.screenX + " Screen Y: " + this.game.input.activePointer.screenY), this.stop()
            },
            spriteBounds: function(t, e, i) {
                var s = t.getBounds();
                s.x += this.game.camera.x, s.y += this.game.camera.y, this.rectangle(s, e, i)
            },
            ropeSegments: function(t, e, i) {
                var s = this;
                t.segments.forEach(function(t) {
                    s.rectangle(t, e, i)
                }, this)
            },
            spriteInfo: function(t, e, i, s) {
                this.start(e, i, s), this.line("Sprite:  (" + t.width + " x " + t.height + ") anchor: " + t.anchor.x + " x " + t.anchor.y), this.line("x: " + t.x.toFixed(1) + " y: " + t.y.toFixed(1)), this.line("angle: " + t.angle.toFixed(1) + " rotation: " + t.rotation.toFixed(1)), this.line("visible: " + t.visible + " in camera: " + t.inCamera), this.line("bounds x: " + t._bounds.x.toFixed(1) + " y: " + t._bounds.y.toFixed(1) + " w: " + t._bounds.width.toFixed(1) + " h: " + t._bounds.height.toFixed(1)), this.stop()
            },
            spriteCoords: function(t, e, i, s) {
                this.start(e, i, s, 100), t.name && this.line(t.name), this.line("x:", t.x.toFixed(2), "y:", t.y.toFixed(2)), this.line("pos x:", t.position.x.toFixed(2), "pos y:", t.position.y.toFixed(2)), this.line("world x:", t.world.x.toFixed(2), "world y:", t.world.y.toFixed(2)), this.stop()
            },
            lineInfo: function(t, e, i, s) {
                this.start(e, i, s, 80), this.line("start.x:", t.start.x.toFixed(2), "start.y:", t.start.y.toFixed(2)), this.line("end.x:", t.end.x.toFixed(2), "end.y:", t.end.y.toFixed(2)), this.line("length:", t.length.toFixed(2), "angle:", t.angle), this.stop()
            },
            pixel: function(t, e, i, s) {
                s = s || 2, this.start(), this.context.fillStyle = i, this.context.fillRect(t, e, s, s), this.stop()
            },
            geom: function(t, e, s, n) {
                void 0 === s && (s = !0), void 0 === n && (n = 0), e = e || "rgba(0,255,0,0.4)", this.start(), this.context.fillStyle = e, this.context.strokeStyle = e, t instanceof i.Rectangle || 1 === n ? s ? this.context.fillRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height) : this.context.strokeRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height) : t instanceof i.Circle || 2 === n ? (this.context.beginPath(), this.context.arc(t.x - this.game.camera.x, t.y - this.game.camera.y, t.radius, 0, 2 * Math.PI, !1), this.context.closePath(), s ? this.context.fill() : this.context.stroke()) : t instanceof i.Point || 3 === n ? this.context.fillRect(t.x - this.game.camera.x, t.y - this.game.camera.y, 4, 4) : (t instanceof i.Line || 4 === n) && (this.context.lineWidth = 1, this.context.beginPath(), this.context.moveTo(t.start.x + .5 - this.game.camera.x, t.start.y + .5 - this.game.camera.y), this.context.lineTo(t.end.x + .5 - this.game.camera.x, t.end.y + .5 - this.game.camera.y), this.context.closePath(), this.context.stroke()), this.stop()
            },
            rectangle: function(t, e, i) {
                void 0 === i && (i = !0), e = e || "rgba(0, 255, 0, 0.4)", this.start(), i ? (this.context.fillStyle = e, this.context.fillRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height)) : (this.context.strokeStyle = e, this.context.strokeRect(t.x - this.game.camera.x, t.y - this.game.camera.y, t.width, t.height)), this.stop()
            },
            text: function(t, e, i, s, n) {
                s = s || "rgb(255,255,255)", n = n || "16px Courier", this.start(), this.context.font = n, this.renderShadow && (this.context.fillStyle = "rgb(0,0,0)", this.context.fillText(t, e + 1, i + 1)), this.context.fillStyle = s, this.context.fillText(t, e, i), this.stop()
            },
            quadTree: function(t, e) {
                e = e || "rgba(255,0,0,0.3)", this.start();
                var i = t.bounds;
                if (0 === t.nodes.length) {
                    this.context.strokeStyle = e, this.context.strokeRect(i.x, i.y, i.width, i.height), this.text("size: " + t.objects.length, i.x + 4, i.y + 16, "rgb(0,200,0)", "12px Courier"), this.context.strokeStyle = "rgb(0,255,0)";
                    for (s = 0; s < t.objects.length; s++) this.context.strokeRect(t.objects[s].x, t.objects[s].y, t.objects[s].width, t.objects[s].height)
                } else
                    for (var s = 0; s < t.nodes.length; s++) this.quadTree(t.nodes[s]);
                this.stop()
            },
            body: function(t, e, s) {
                t.body && (this.start(), t.body.type === i.Physics.ARCADE ? i.Physics.Arcade.Body.render(this.context, t.body, e, s) : t.body.type === i.Physics.NINJA ? i.Physics.Ninja.Body.render(this.context, t.body, e, s) : t.body.type === i.Physics.BOX2D && i.Physics.Box2D.renderBody(this.context, t.body, e), this.stop())
            },
            bodyInfo: function(t, e, s, n) {
                t.body && (this.start(e, s, n, 210), t.body.type === i.Physics.ARCADE ? i.Physics.Arcade.Body.renderBodyInfo(this, t.body) : t.body.type === i.Physics.BOX2D && this.game.physics.box2d.renderBodyInfo(this, t.body), this.stop())
            },
            box2dWorld: function() {
                this.start(), this.context.translate(-this.game.camera.view.x, -this.game.camera.view.y, 0), this.game.physics.box2d.renderDebugDraw(this.context), this.stop()
            },
            box2dBody: function(t, e) {
                this.start(), i.Physics.Box2D.renderBody(this.context, t, e), this.stop()
            },
            displayList: function(t) {
                if (void 0 === t && (t = this.game.world), t.hasOwnProperty("renderOrderID"), t.children && t.children.length > 0)
                    for (var e = 0; e < t.children.length; e++) this.game.debug.displayList(t.children[e])
            },
            destroy: function() {
                PIXI.CanvasPool.remove(this)
            }
        }, i.Utils.Debug.prototype.constructor = i.Utils.Debug, i.DOM = {
            getOffset: function(t, e) {
                e = e || new i.Point;
                var s = t.getBoundingClientRect(),
                    n = i.DOM.scrollY,
                    a = i.DOM.scrollX,
                    o = document.documentElement.clientTop,
                    r = document.documentElement.clientLeft;
                return e.x = s.left + a - r, e.y = s.top + n - o, e
            },
            getBounds: function(t, e) {
                return void 0 === e && (e = 0), !(!(t = t && !t.nodeType ? t[0] : t) || 1 !== t.nodeType) && this.calibrate(t.getBoundingClientRect(), e)
            },
            calibrate: function(t, e) {
                e = +e || 0;
                var i = {
                    width: 0,
                    height: 0,
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                };
                return i.width = (i.right = t.right + e) - (i.left = t.left - e), i.height = (i.bottom = t.bottom + e) - (i.top = t.top - e), i
            },
            getAspectRatio: function(t) {
                var e = (t = null == t ? this.visualBounds : 1 === t.nodeType ? this.getBounds(t) : t).width,
                    i = t.height;
                return "function" == typeof e && (e = e.call(t)), "function" == typeof i && (i = i.call(t)), e / i
            },
            inLayoutViewport: function(t, e) {
                var i = this.getBounds(t, e);
                return !!i && i.bottom >= 0 && i.right >= 0 && i.top <= this.layoutBounds.width && i.left <= this.layoutBounds.height
            },
            getScreenOrientation: function(t) {
                var e = window.screen,
                    i = e.orientation || e.mozOrientation || e.msOrientation;
                if (i && "string" == typeof i.type) return i.type;
                if ("string" == typeof i) return i;
                var s = "portrait-primary",
                    n = "landscape-primary";
                if ("screen" === t) return e.height > e.width ? s : n;
                if ("viewport" === t) return this.visualBounds.height > this.visualBounds.width ? s : n;
                if ("window.orientation" === t && "number" == typeof window.orientation) return 0 === window.orientation || 180 === window.orientation ? s : n;
                if (window.matchMedia) {
                    if (window.matchMedia("(orientation: portrait)").matches) return s;
                    if (window.matchMedia("(orientation: landscape)").matches) return n
                }
                return this.visualBounds.height > this.visualBounds.width ? s : n
            },
            visualBounds: new i.Rectangle,
            layoutBounds: new i.Rectangle,
            documentBounds: new i.Rectangle
        }, i.Device.whenReady(function(t) {
            var e = window && "pageXOffset" in window ? function() {
                    return window.pageXOffset
                } : function() {
                    return document.documentElement.scrollLeft
                },
                s = window && "pageYOffset" in window ? function() {
                    return window.pageYOffset
                } : function() {
                    return document.documentElement.scrollTop
                };
            if (Object.defineProperty(i.DOM, "scrollX", {
                get: e
            }), Object.defineProperty(i.DOM, "scrollY", {
                get: s
            }), Object.defineProperty(i.DOM.visualBounds, "x", {
                get: e
            }), Object.defineProperty(i.DOM.visualBounds, "y", {
                get: s
            }), Object.defineProperty(i.DOM.layoutBounds, "x", {
                value: 0
            }), Object.defineProperty(i.DOM.layoutBounds, "y", {
                value: 0
            }), t.desktop && document.documentElement.clientWidth <= window.innerWidth && document.documentElement.clientHeight <= window.innerHeight) {
                var n = function() {
                        return Math.max(window.innerWidth, document.documentElement.clientWidth)
                    },
                    a = function() {
                        return Math.max(window.innerHeight, document.documentElement.clientHeight)
                    };
                Object.defineProperty(i.DOM.visualBounds, "width", {
                    get: n
                }), Object.defineProperty(i.DOM.visualBounds, "height", {
                    get: a
                }), Object.defineProperty(i.DOM.layoutBounds, "width", {
                    get: n
                }), Object.defineProperty(i.DOM.layoutBounds, "height", {
                    get: a
                })
            } else Object.defineProperty(i.DOM.visualBounds, "width", {
                get: function() {
                    return window.innerWidth
                }
            }), Object.defineProperty(i.DOM.visualBounds, "height", {
                get: function() {
                    return window.innerHeight
                }
            }), Object.defineProperty(i.DOM.layoutBounds, "width", {
                get: function() {
                    var t = document.documentElement.clientWidth,
                        e = window.innerWidth;
                    return t < e ? e : t
                }
            }), Object.defineProperty(i.DOM.layoutBounds, "height", {
                get: function() {
                    var t = document.documentElement.clientHeight,
                        e = window.innerHeight;
                    return t < e ? e : t
                }
            });
            Object.defineProperty(i.DOM.documentBounds, "x", {
                value: 0
            }), Object.defineProperty(i.DOM.documentBounds, "y", {
                value: 0
            }), Object.defineProperty(i.DOM.documentBounds, "width", {
                get: function() {
                    var t = document.documentElement;
                    return Math.max(t.clientWidth, t.offsetWidth, t.scrollWidth)
                }
            }), Object.defineProperty(i.DOM.documentBounds, "height", {
                get: function() {
                    var t = document.documentElement;
                    return Math.max(t.clientHeight, t.offsetHeight, t.scrollHeight)
                }
            })
        }, null, !0), i.ArraySet = function(t) {
            this.position = 0, this.list = t || []
        }, i.ArraySet.prototype = {
            add: function(t) {
                return this.exists(t) || this.list.push(t), t
            },
            getIndex: function(t) {
                return this.list.indexOf(t)
            },
            getByKey: function(t, e) {
                for (var i = this.list.length; i--;)
                    if (this.list[i][t] === e) return this.list[i];
                return null
            },
            exists: function(t) {
                return this.list.indexOf(t) > -1
            },
            reset: function() {
                this.list.length = 0
            },
            remove: function(t) {
                var e = this.list.indexOf(t);
                if (e > -1) return this.list.splice(e, 1), t
            },
            setAll: function(t, e) {
                for (var i = this.list.length; i--;) this.list[i] && (this.list[i][t] = e)
            },
            callAll: function(t) {
                for (var e = Array.prototype.slice.call(arguments, 1), i = this.list.length; i--;) this.list[i] && this.list[i][t] && this.list[i][t].apply(this.list[i], e)
            },
            removeAll: function(t) {
                void 0 === t && (t = !1);
                for (var e = this.list.length; e--;)
                    if (this.list[e]) {
                        var i = this.remove(this.list[e]);
                        t && i.destroy()
                    }
                this.position = 0, this.list = []
            }
        }, Object.defineProperty(i.ArraySet.prototype, "total", {
            get: function() {
                return this.list.length
            }
        }), Object.defineProperty(i.ArraySet.prototype, "first", {
            get: function() {
                return this.position = 0, this.list.length > 0 ? this.list[0] : null
            }
        }), Object.defineProperty(i.ArraySet.prototype, "next", {
            get: function() {
                return this.position < this.list.length ? (this.position++, this.list[this.position]) : null
            }
        }), i.ArraySet.prototype.constructor = i.ArraySet, i.ArrayUtils = {
            getRandomItem: function(t, e, i) {
                if (null === t) return null;
                void 0 === e && (e = 0), void 0 === i && (i = t.length);
                var s = e + Math.floor(Math.random() * i);
                return void 0 === t[s] ? null : t[s]
            },
            removeRandomItem: function(t, e, i) {
                if (null == t) return null;
                void 0 === e && (e = 0), void 0 === i && (i = t.length);
                var s = e + Math.floor(Math.random() * i);
                if (s < t.length) {
                    var n = t.splice(s, 1);
                    return void 0 === n[0] ? null : n[0]
                }
                return null
            },
            shuffle: function(t) {
                for (var e = t.length - 1; e > 0; e--) {
                    var i = Math.floor(Math.random() * (e + 1)),
                        s = t[e];
                    t[e] = t[i], t[i] = s
                }
                return t
            },
            transposeMatrix: function(t) {
                for (var e = t.length, i = t[0].length, s = new Array(i), n = 0; n < i; n++) {
                    s[n] = new Array(e);
                    for (var a = e - 1; a > -1; a--) s[n][a] = t[a][n]
                }
                return s
            },
            rotateMatrix: function(t, e) {
                if ("string" != typeof e && (e = (e % 360 + 360) % 360), 90 === e || -270 === e || "rotateLeft" === e) t = (t = i.ArrayUtils.transposeMatrix(t)).reverse();
                else if (-90 === e || 270 === e || "rotateRight" === e) t = t.reverse(), t = i.ArrayUtils.transposeMatrix(t);
                else if (180 === Math.abs(e) || "rotate180" === e) {
                    for (var s = 0; s < t.length; s++) t[s].reverse();
                    t = t.reverse()
                }
                return t
            },
            findClosest: function(t, e) {
                if (!e.length) return NaN;
                if (1 === e.length || t < e[0]) return e[0];
                for (var i = 1; e[i] < t;) i++;
                var s = e[i - 1],
                    n = i < e.length ? e[i] : Number.POSITIVE_INFINITY;
                return n - t <= t - s ? n : s
            },
            rotateRight: function(t) {
                var e = t.pop();
                return t.unshift(e), e
            },
            rotateLeft: function(t) {
                var e = t.shift();
                return t.push(e), e
            },
            rotate: function(t) {
                var e = t.shift();
                return t.push(e), e
            },
            numberArray: function(t, e) {
                for (var i = [], s = t; s <= e; s++) i.push(s);
                return i
            },
            numberArrayStep: function(t, e, s) {
                void 0 !== t && null !== t || (t = 0), void 0 !== e && null !== e || (e = t, t = 0), void 0 === s && (s = 1);
                for (var n = [], a = Math.max(i.Math.roundAwayFromZero((e - t) / (s || 1)), 0), o = 0; o < a; o++) n.push(t), t += s;
                return n
            }
        }, i.LinkedList = function() {
            this.next = null, this.prev = null, this.first = null, this.last = null, this.total = 0
        }, i.LinkedList.prototype = {
            add: function(t) {
                return 0 === this.total && null === this.first && null === this.last ? (this.first = t, this.last = t, this.next = t, t.prev = this, this.total++, t) : (this.last.next = t, t.prev = this.last, this.last = t, this.total++, t)
            },
            reset: function() {
                this.first = null, this.last = null, this.next = null, this.prev = null, this.total = 0
            },
            remove: function(t) {
                if (1 === this.total) return this.reset(), void(t.next = t.prev = null);
                t === this.first ? this.first = this.first.next : t === this.last && (this.last = this.last.prev), t.prev && (t.prev.next = t.next), t.next && (t.next.prev = t.prev), t.next = t.prev = null, null === this.first && (this.last = null), this.total--
            },
            callAll: function(t) {
                if (this.first && this.last) {
                    var e = this.first;
                    do {
                        e && e[t] && e[t].call(e), e = e.next
                    } while (e !== this.last.next)
                }
            }
        }, i.LinkedList.prototype.constructor = i.LinkedList, i.Create = function(t) {
            this.game = t, this.bmd = null, this.canvas = null, this.ctx = null, this.palettes = [{
                0: "#000",
                1: "#9D9D9D",
                2: "#FFF",
                3: "#BE2633",
                4: "#E06F8B",
                5: "#493C2B",
                6: "#A46422",
                7: "#EB8931",
                8: "#F7E26B",
                9: "#2F484E",
                A: "#44891A",
                B: "#A3CE27",
                C: "#1B2632",
                D: "#005784",
                E: "#31A2F2",
                F: "#B2DCEF"
            }, {
                0: "#000",
                1: "#191028",
                2: "#46af45",
                3: "#a1d685",
                4: "#453e78",
                5: "#7664fe",
                6: "#833129",
                7: "#9ec2e8",
                8: "#dc534b",
                9: "#e18d79",
                A: "#d6b97b",
                B: "#e9d8a1",
                C: "#216c4b",
                D: "#d365c8",
                E: "#afaab9",
                F: "#f5f4eb"
            }, {
                0: "#000",
                1: "#2234d1",
                2: "#0c7e45",
                3: "#44aacc",
                4: "#8a3622",
                5: "#5c2e78",
                6: "#aa5c3d",
                7: "#b5b5b5",
                8: "#5e606e",
                9: "#4c81fb",
                A: "#6cd947",
                B: "#7be2f9",
                C: "#eb8a60",
                D: "#e23d69",
                E: "#ffd93f",
                F: "#fff"
            }, {
                0: "#000",
                1: "#fff",
                2: "#8b4131",
                3: "#7bbdc5",
                4: "#8b41ac",
                5: "#6aac41",
                6: "#3931a4",
                7: "#d5de73",
                8: "#945a20",
                9: "#5a4100",
                A: "#bd736a",
                B: "#525252",
                C: "#838383",
                D: "#acee8b",
                E: "#7b73de",
                F: "#acacac"
            }, {
                0: "#000",
                1: "#191028",
                2: "#46af45",
                3: "#a1d685",
                4: "#453e78",
                5: "#7664fe",
                6: "#833129",
                7: "#9ec2e8",
                8: "#dc534b",
                9: "#e18d79",
                A: "#d6b97b",
                B: "#e9d8a1",
                C: "#216c4b",
                D: "#d365c8",
                E: "#afaab9",
                F: "#fff"
            }]
        }, i.Create.PALETTE_ARNE = 0, i.Create.PALETTE_JMP = 1, i.Create.PALETTE_CGA = 2, i.Create.PALETTE_C64 = 3, i.Create.PALETTE_JAPANESE_MACHINE = 4, i.Create.prototype = {
            texture: function(t, e, i, s, n) {
                void 0 === i && (i = 8), void 0 === s && (s = i), void 0 === n && (n = 0);
                var a = e[0].length * i,
                    o = e.length * s;
                null === this.bmd && (this.bmd = this.game.make.bitmapData(), this.canvas = this.bmd.canvas, this.ctx = this.bmd.context), this.bmd.resize(a, o), this.bmd.clear();
                for (var r = 0; r < e.length; r++)
                    for (var h = e[r], l = 0; l < h.length; l++) {
                        var c = h[l];
                        "." !== c && " " !== c && (this.ctx.fillStyle = this.palettes[n][c], this.ctx.fillRect(l * i, r * s, i, s))
                    }
                return this.bmd.generateTexture(t)
            },
            grid: function(t, e, i, s, n, a) {
                null === this.bmd && (this.bmd = this.game.make.bitmapData(), this.canvas = this.bmd.canvas, this.ctx = this.bmd.context), this.bmd.resize(e, i), this.ctx.fillStyle = a;
                for (var o = 0; o < i; o += n) this.ctx.fillRect(0, o, e, 1);
                for (var r = 0; r < e; r += s) this.ctx.fillRect(r, 0, 1, i);
                return this.bmd.generateTexture(t)
            }
        }, i.Create.prototype.constructor = i.Create, i.FlexGrid = function(t, e, s) {
            this.game = t.game, this.manager = t, this.width = e, this.height = s, this.boundsCustom = new i.Rectangle(0, 0, e, s), this.boundsFluid = new i.Rectangle(0, 0, e, s), this.boundsFull = new i.Rectangle(0, 0, e, s), this.boundsNone = new i.Rectangle(0, 0, e, s), this.positionCustom = new i.Point(0, 0), this.positionFluid = new i.Point(0, 0), this.positionFull = new i.Point(0, 0), this.positionNone = new i.Point(0, 0), this.scaleCustom = new i.Point(1, 1), this.scaleFluid = new i.Point(1, 1), this.scaleFluidInversed = new i.Point(1, 1), this.scaleFull = new i.Point(1, 1), this.scaleNone = new i.Point(1, 1), this.customWidth = 0, this.customHeight = 0, this.customOffsetX = 0, this.customOffsetY = 0, this.ratioH = e / s, this.ratioV = s / e, this.multiplier = 0, this.layers = []
        }, i.FlexGrid.prototype = {
            setSize: function(t, e) {
                this.width = t, this.height = e, this.ratioH = t / e, this.ratioV = e / t, this.scaleNone = new i.Point(1, 1), this.boundsNone.width = this.width, this.boundsNone.height = this.height, this.refresh()
            },
            createCustomLayer: function(t, e, s, n) {
                void 0 === n && (n = !0), this.customWidth = t, this.customHeight = e, this.boundsCustom.width = t, this.boundsCustom.height = e;
                var a = new i.FlexLayer(this, this.positionCustom, this.boundsCustom, this.scaleCustom);
                return n && this.game.world.add(a), this.layers.push(a), void 0 !== s && null !== typeof s && a.addMultiple(s), a
            },
            createFluidLayer: function(t, e) {
                void 0 === e && (e = !0);
                var s = new i.FlexLayer(this, this.positionFluid, this.boundsFluid, this.scaleFluid);
                return e && this.game.world.add(s), this.layers.push(s), void 0 !== t && null !== typeof t && s.addMultiple(t), s
            },
            createFullLayer: function(t) {
                var e = new i.FlexLayer(this, this.positionFull, this.boundsFull, this.scaleFluid);
                return this.game.world.add(e), this.layers.push(e), void 0 !== t && e.addMultiple(t), e
            },
            createFixedLayer: function(t) {
                var e = new i.FlexLayer(this, this.positionNone, this.boundsNone, this.scaleNone);
                return this.game.world.add(e), this.layers.push(e), void 0 !== t && e.addMultiple(t), e
            },
            reset: function() {
                for (var t = this.layers.length; t--;) this.layers[t].persist || (this.layers[t].position = null, this.layers[t].scale = null, this.layers.slice(t, 1))
            },
            onResize: function(t, e) {
                this.ratioH = t / e, this.ratioV = e / t, this.refresh(t, e)
            },
            refresh: function() {
                this.multiplier = Math.min(this.manager.height / this.height, this.manager.width / this.width), this.boundsFluid.width = Math.round(this.width * this.multiplier), this.boundsFluid.height = Math.round(this.height * this.multiplier), this.scaleFluid.set(this.boundsFluid.width / this.width, this.boundsFluid.height / this.height), this.scaleFluidInversed.set(this.width / this.boundsFluid.width, this.height / this.boundsFluid.height), this.scaleFull.set(this.boundsFull.width / this.width, this.boundsFull.height / this.height), this.boundsFull.width = Math.round(this.manager.width * this.scaleFluidInversed.x), this.boundsFull.height = Math.round(this.manager.height * this.scaleFluidInversed.y), this.boundsFluid.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY), this.boundsNone.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY), this.positionFluid.set(this.boundsFluid.x, this.boundsFluid.y), this.positionNone.set(this.boundsNone.x, this.boundsNone.y)
            },
            fitSprite: function(t) {
                this.manager.scaleSprite(t), t.x = this.manager.bounds.centerX, t.y = this.manager.bounds.centerY
            },
            debug: function() {
                this.game.debug.text(this.boundsFluid.width + " x " + this.boundsFluid.height, this.boundsFluid.x + 4, this.boundsFluid.y + 16), this.game.debug.geom(this.boundsFluid, "rgba(255,0,0,0.9", !1)
            }
        }, i.FlexGrid.prototype.constructor = i.FlexGrid, i.FlexLayer = function(t, e, s, n) {
            i.Group.call(this, t.game, null, "__flexLayer" + t.game.rnd.uuid(), !1), this.manager = t.manager, this.grid = t, this.persist = !1, this.position = e, this.bounds = s, this.scale = n, this.topLeft = s.topLeft, this.topMiddle = new i.Point(s.halfWidth, 0), this.topRight = s.topRight, this.bottomLeft = s.bottomLeft, this.bottomMiddle = new i.Point(s.halfWidth, s.bottom), this.bottomRight = s.bottomRight
        }, i.FlexLayer.prototype = Object.create(i.Group.prototype), i.FlexLayer.prototype.constructor = i.FlexLayer, i.FlexLayer.prototype.resize = function() {}, i.FlexLayer.prototype.debug = function() {
            this.game.debug.text(this.bounds.width + " x " + this.bounds.height, this.bounds.x + 4, this.bounds.y + 16), this.game.debug.geom(this.bounds, "rgba(0,0,255,0.9", !1), this.game.debug.geom(this.topLeft, "rgba(255,255,255,0.9"), this.game.debug.geom(this.topMiddle, "rgba(255,255,255,0.9"), this.game.debug.geom(this.topRight, "rgba(255,255,255,0.9")
        }, i.Color = {
            packPixel: function(t, e, s, n) {
                return i.Device.LITTLE_ENDIAN ? (n << 24 | s << 16 | e << 8 | t) >>> 0 : (t << 24 | e << 16 | s << 8 | n) >>> 0
            },
            unpackPixel: function(t, e, s, n) {
                return void 0 !== e && null !== e || (e = i.Color.createColor()), void 0 !== s && null !== s || (s = !1), void 0 !== n && null !== n || (n = !1), i.Device.LITTLE_ENDIAN ? (e.a = (4278190080 & t) >>> 24, e.b = (16711680 & t) >>> 16, e.g = (65280 & t) >>> 8, e.r = 255 & t) : (e.r = (4278190080 & t) >>> 24, e.g = (16711680 & t) >>> 16, e.b = (65280 & t) >>> 8, e.a = 255 & t), e.color = t, e.rgba = "rgba(" + e.r + "," + e.g + "," + e.b + "," + e.a / 255 + ")", s && i.Color.RGBtoHSL(e.r, e.g, e.b, e), n && i.Color.RGBtoHSV(e.r, e.g, e.b, e), e
            },
            fromRGBA: function(t, e) {
                return e || (e = i.Color.createColor()), e.r = (4278190080 & t) >>> 24, e.g = (16711680 & t) >>> 16, e.b = (65280 & t) >>> 8, e.a = 255 & t, e.rgba = "rgba(" + e.r + "," + e.g + "," + e.b + "," + e.a + ")", e
            },
            toRGBA: function(t, e, i, s) {
                return t << 24 | e << 16 | i << 8 | s
            },
            toABGR: function(t, e, i, s) {
                return (s << 24 | i << 16 | e << 8 | t) >>> 0
            },
            RGBtoHSL: function(t, e, s, n) {
                n || (n = i.Color.createColor(t, e, s, 1)), t /= 255, e /= 255, s /= 255;
                var a = Math.min(t, e, s),
                    o = Math.max(t, e, s);
                if (n.h = 0, n.s = 0, n.l = (o + a) / 2, o !== a) {
                    var r = o - a;
                    n.s = n.l > .5 ? r / (2 - o - a) : r / (o + a), o === t ? n.h = (e - s) / r + (e < s ? 6 : 0) : o === e ? n.h = (s - t) / r + 2 : o === s && (n.h = (t - e) / r + 4), n.h /= 6
                }
                return n
            },
            HSLtoRGB: function(t, e, s, n) {
                if (n ? (n.r = s, n.g = s, n.b = s) : n = i.Color.createColor(s, s, s), 0 !== e) {
                    var a = s < .5 ? s * (1 + e) : s + e - s * e,
                        o = 2 * s - a;
                    n.r = i.Color.hueToColor(o, a, t + 1 / 3), n.g = i.Color.hueToColor(o, a, t), n.b = i.Color.hueToColor(o, a, t - 1 / 3)
                }
                return n.r = Math.floor(255 * n.r | 0), n.g = Math.floor(255 * n.g | 0), n.b = Math.floor(255 * n.b | 0), i.Color.updateColor(n), n
            },
            RGBtoHSV: function(t, e, s, n) {
                n || (n = i.Color.createColor(t, e, s, 255)), t /= 255, e /= 255, s /= 255;
                var a = Math.min(t, e, s),
                    o = Math.max(t, e, s),
                    r = o - a;
                return n.h = 0, n.s = 0 === o ? 0 : r / o, n.v = o, o !== a && (o === t ? n.h = (e - s) / r + (e < s ? 6 : 0) : o === e ? n.h = (s - t) / r + 2 : o === s && (n.h = (t - e) / r + 4), n.h /= 6), n
            },
            HSVtoRGB: function(t, e, s, n) {
                void 0 === n && (n = i.Color.createColor(0, 0, 0, 1, t, e, 0, s));
                var a, o, r, h = Math.floor(6 * t),
                    l = 6 * t - h,
                    c = s * (1 - e),
                    u = s * (1 - l * e),
                    d = s * (1 - (1 - l) * e);
                switch (h % 6) {
                    case 0:
                        a = s, o = d, r = c;
                        break;
                    case 1:
                        a = u, o = s, r = c;
                        break;
                    case 2:
                        a = c, o = s, r = d;
                        break;
                    case 3:
                        a = c, o = u, r = s;
                        break;
                    case 4:
                        a = d, o = c, r = s;
                        break;
                    case 5:
                        a = s, o = c, r = u
                }
                return n.r = Math.floor(255 * a), n.g = Math.floor(255 * o), n.b = Math.floor(255 * r), i.Color.updateColor(n), n
            },
            hueToColor: function(t, e, i) {
                return i < 0 && (i += 1), i > 1 && (i -= 1), i < 1 / 6 ? t + 6 * (e - t) * i : i < .5 ? e : i < 2 / 3 ? t + (e - t) * (2 / 3 - i) * 6 : t
            },
            createColor: function(t, e, s, n, a, o, r, h) {
                var l = {
                    r: t || 0,
                    g: e || 0,
                    b: s || 0,
                    a: n || 1,
                    h: a || 0,
                    s: o || 0,
                    l: r || 0,
                    v: h || 0,
                    color: 0,
                    color32: 0,
                    rgba: ""
                };
                return i.Color.updateColor(l)
            },
            updateColor: function(t) {
                return t.rgba = "rgba(" + t.r.toString() + "," + t.g.toString() + "," + t.b.toString() + "," + t.a.toString() + ")", t.color = i.Color.getColor(t.r, t.g, t.b), t.color32 = i.Color.getColor32(255 * t.a, t.r, t.g, t.b), t
            },
            getColor32: function(t, e, i, s) {
                return t << 24 | e << 16 | i << 8 | s
            },
            getColor: function(t, e, i) {
                return t << 16 | e << 8 | i
            },
            RGBtoString: function(t, e, s, n, a) {
                return void 0 === n && (n = 255), void 0 === a && (a = "#"), "#" === a ? "#" + ((1 << 24) + (t << 16) + (e << 8) + s).toString(16).slice(1) : "0x" + i.Color.componentToHex(n) + i.Color.componentToHex(t) + i.Color.componentToHex(e) + i.Color.componentToHex(s)
            },
            hexToRGB: function(t) {
                var e = i.Color.hexToColor(t);
                if (e) return i.Color.getColor32(e.a, e.r, e.g, e.b)
            },
            hexToColor: function(t, e) {
                t = t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i, function(t, e, i, s) {
                    return e + e + i + i + s + s
                });
                var s = /^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);
                if (s) {
                    var n = parseInt(s[1], 16),
                        a = parseInt(s[2], 16),
                        o = parseInt(s[3], 16);
                    e ? (e.r = n, e.g = a, e.b = o) : e = i.Color.createColor(n, a, o)
                }
                return e
            },
            webToColor: function(t, e) {
                e || (e = i.Color.createColor());
                var s = /^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t);
                return s && (e.r = parseInt(s[1], 10), e.g = parseInt(s[2], 10), e.b = parseInt(s[3], 10), e.a = void 0 !== s[4] ? parseFloat(s[4]) : 1, i.Color.updateColor(e)), e
            },
            valueToColor: function(t, e) {
                if (e || (e = i.Color.createColor()), "string" == typeof t) return 0 === t.indexOf("rgb") ? i.Color.webToColor(t, e) : (e.a = 1, i.Color.hexToColor(t, e));
                if ("number" == typeof t) {
                    var s = i.Color.getRGB(t);
                    return e.r = s.r, e.g = s.g, e.b = s.b, e.a = s.a / 255, e
                }
                return e
            },
            componentToHex: function(t) {
                var e = t.toString(16);
                return 1 === e.length ? "0" + e : e
            },
            HSVColorWheel: function(t, e) {
                void 0 === t && (t = 1), void 0 === e && (e = 1);
                for (var s = [], n = 0; n <= 359; n++) s.push(i.Color.HSVtoRGB(n / 359, t, e));
                return s
            },
            HSLColorWheel: function(t, e) {
                void 0 === t && (t = .5), void 0 === e && (e = .5);
                for (var s = [], n = 0; n <= 359; n++) s.push(i.Color.HSLtoRGB(n / 359, t, e));
                return s
            },
            interpolateColor: function(t, e, s, n, a) {
                void 0 === a && (a = 255);
                var o = i.Color.getRGB(t),
                    r = i.Color.getRGB(e),
                    h = (r.red - o.red) * n / s + o.red,
                    l = (r.green - o.green) * n / s + o.green,
                    c = (r.blue - o.blue) * n / s + o.blue;
                return i.Color.getColor32(a, h, l, c)
            },
            interpolateColorWithRGB: function(t, e, s, n, a, o) {
                var r = i.Color.getRGB(t),
                    h = (e - r.red) * o / a + r.red,
                    l = (s - r.green) * o / a + r.green,
                    c = (n - r.blue) * o / a + r.blue;
                return i.Color.getColor(h, l, c)
            },
            interpolateRGB: function(t, e, s, n, a, o, r, h) {
                var l = (n - t) * h / r + t,
                    c = (a - e) * h / r + e,
                    u = (o - s) * h / r + s;
                return i.Color.getColor(l, c, u)
            },
            getRandomColor: function(t, e, s) {
                if (void 0 === t && (t = 0), void 0 === e && (e = 255), void 0 === s && (s = 255), e > 255 || t > e) return i.Color.getColor(255, 255, 255);
                var n = t + Math.round(Math.random() * (e - t)),
                    a = t + Math.round(Math.random() * (e - t)),
                    o = t + Math.round(Math.random() * (e - t));
                return i.Color.getColor32(s, n, a, o)
            },
            getRGB: function(t) {
                return t > 16777215 ? {
                    alpha: t >>> 24,
                    red: t >> 16 & 255,
                    green: t >> 8 & 255,
                    blue: 255 & t,
                    a: t >>> 24,
                    r: t >> 16 & 255,
                    g: t >> 8 & 255,
                    b: 255 & t
                } : {
                    alpha: 255,
                    red: t >> 16 & 255,
                    green: t >> 8 & 255,
                    blue: 255 & t,
                    a: 255,
                    r: t >> 16 & 255,
                    g: t >> 8 & 255,
                    b: 255 & t
                }
            },
            getWebRGB: function(t) {
                if ("object" == typeof t) return "rgba(" + t.r.toString() + "," + t.g.toString() + "," + t.b.toString() + "," + (t.a / 255).toString() + ")";
                var e = i.Color.getRGB(t);
                return "rgba(" + e.r.toString() + "," + e.g.toString() + "," + e.b.toString() + "," + (e.a / 255).toString() + ")"
            },
            getAlpha: function(t) {
                return t >>> 24
            },
            getAlphaFloat: function(t) {
                return (t >>> 24) / 255
            },
            getRed: function(t) {
                return t >> 16 & 255
            },
            getGreen: function(t) {
                return t >> 8 & 255
            },
            getBlue: function(t) {
                return 255 & t
            },
            blendNormal: function(t) {
                return t
            },
            blendLighten: function(t, e) {
                return e > t ? e : t
            },
            blendDarken: function(t, e) {
                return e > t ? t : e
            },
            blendMultiply: function(t, e) {
                return t * e / 255
            },
            blendAverage: function(t, e) {
                return (t + e) / 2
            },
            blendAdd: function(t, e) {
                return Math.min(255, t + e)
            },
            blendSubtract: function(t, e) {
                return Math.max(0, t + e - 255)
            },
            blendDifference: function(t, e) {
                return Math.abs(t - e)
            },
            blendNegation: function(t, e) {
                return 255 - Math.abs(255 - t - e)
            },
            blendScreen: function(t, e) {
                return 255 - ((255 - t) * (255 - e) >> 8)
            },
            blendExclusion: function(t, e) {
                return t + e - 2 * t * e / 255
            },
            blendOverlay: function(t, e) {
                return e < 128 ? 2 * t * e / 255 : 255 - 2 * (255 - t) * (255 - e) / 255
            },
            blendSoftLight: function(t, e) {
                return e < 128 ? 2 * (64 + (t >> 1)) * (e / 255) : 255 - 2 * (255 - (64 + (t >> 1))) * (255 - e) / 255
            },
            blendHardLight: function(t, e) {
                return i.Color.blendOverlay(e, t)
            },
            blendColorDodge: function(t, e) {
                return 255 === e ? e : Math.min(255, (t << 8) / (255 - e))
            },
            blendColorBurn: function(t, e) {
                return 0 === e ? e : Math.max(0, 255 - (255 - t << 8) / e)
            },
            blendLinearDodge: function(t, e) {
                return i.Color.blendAdd(t, e)
            },
            blendLinearBurn: function(t, e) {
                return i.Color.blendSubtract(t, e)
            },
            blendLinearLight: function(t, e) {
                return e < 128 ? i.Color.blendLinearBurn(t, 2 * e) : i.Color.blendLinearDodge(t, 2 * (e - 128))
            },
            blendVividLight: function(t, e) {
                return e < 128 ? i.Color.blendColorBurn(t, 2 * e) : i.Color.blendColorDodge(t, 2 * (e - 128))
            },
            blendPinLight: function(t, e) {
                return e < 128 ? i.Color.blendDarken(t, 2 * e) : i.Color.blendLighten(t, 2 * (e - 128))
            },
            blendHardMix: function(t, e) {
                return i.Color.blendVividLight(t, e) < 128 ? 0 : 255
            },
            blendReflect: function(t, e) {
                return 255 === e ? e : Math.min(255, t * t / (255 - e))
            },
            blendGlow: function(t, e) {
                return i.Color.blendReflect(e, t)
            },
            blendPhoenix: function(t, e) {
                return Math.min(t, e) - Math.max(t, e) + 255
            }
        }, i.Physics = function(t, e) {
            e = e || {}, this.game = t, this.config = e, this.arcade = null, this.p2 = null, this.ninja = null, this.box2d = null, this.chipmunk = null, this.matter = null, this.parseConfig()
        }, i.Physics.ARCADE = 0, i.Physics.P2JS = 1, i.Physics.NINJA = 2, i.Physics.BOX2D = 3, i.Physics.CHIPMUNK = 4, i.Physics.MATTERJS = 5, i.Physics.prototype = {
            parseConfig: function() {
                this.config.hasOwnProperty("arcade") && !0 !== this.config.arcade || !i.Physics.hasOwnProperty("Arcade") || (this.arcade = new i.Physics.Arcade(this.game)), this.config.hasOwnProperty("ninja") && !0 === this.config.ninja && i.Physics.hasOwnProperty("Ninja") && (this.ninja = new i.Physics.Ninja(this.game)), this.config.hasOwnProperty("p2") && !0 === this.config.p2 && i.Physics.hasOwnProperty("P2") && (this.p2 = new i.Physics.P2(this.game, this.config)), this.config.hasOwnProperty("box2d") && !0 === this.config.box2d && i.Physics.hasOwnProperty("BOX2D") && (this.box2d = new i.Physics.BOX2D(this.game, this.config)), this.config.hasOwnProperty("matter") && !0 === this.config.matter && i.Physics.hasOwnProperty("Matter") && (this.matter = new i.Physics.Matter(this.game, this.config))
            },
            startSystem: function(t) {
                t === i.Physics.ARCADE ? this.arcade = new i.Physics.Arcade(this.game) : t === i.Physics.P2JS ? null === this.p2 ? this.p2 = new i.Physics.P2(this.game, this.config) : this.p2.reset() : t === i.Physics.NINJA ? this.ninja = new i.Physics.Ninja(this.game) : t === i.Physics.BOX2D ? null === this.box2d ? this.box2d = new i.Physics.Box2D(this.game, this.config) : this.box2d.reset() : t === i.Physics.MATTERJS && (null === this.matter ? this.matter = new i.Physics.Matter(this.game, this.config) : this.matter.reset())
            },
            enable: function(t, e, s) {
                void 0 === e && (e = i.Physics.ARCADE), void 0 === s && (s = !1), e === i.Physics.ARCADE ? this.arcade.enable(t) : e === i.Physics.P2JS && this.p2 ? this.p2.enable(t, s) : e === i.Physics.NINJA && this.ninja ? this.ninja.enableAABB(t) : e === i.Physics.BOX2D && this.box2d ? this.box2d.enable(t) : e === i.Physics.MATTERJS && this.matter && this.matter.enable(t)
            },
            preUpdate: function() {
                this.p2 && this.p2.preUpdate(), this.box2d && this.box2d.preUpdate(), this.matter && this.matter.preUpdate()
            },
            update: function() {
                this.p2 && this.p2.update(), this.box2d && this.box2d.update(), this.matter && this.matter.update()
            },
            setBoundsToWorld: function() {
                this.arcade && this.arcade.setBoundsToWorld(), this.ninja && this.ninja.setBoundsToWorld(), this.p2 && this.p2.setBoundsToWorld(), this.box2d && this.box2d.setBoundsToWorld(), this.matter && this.matter.setBoundsToWorld()
            },
            clear: function() {
                this.p2 && this.p2.clear(), this.box2d && this.box2d.clear(), this.matter && this.matter.clear()
            },
            reset: function() {
                this.p2 && this.p2.reset(), this.box2d && this.box2d.reset(), this.matter && this.matter.reset()
            },
            destroy: function() {
                this.p2 && this.p2.destroy(), this.box2d && this.box2d.destroy(), this.matter && this.matter.destroy(), this.arcade = null, this.ninja = null, this.p2 = null, this.box2d = null, this.matter = null
            }
        }, i.Physics.prototype.constructor = i.Physics, i.Physics.Arcade = function(t) {
            this.game = t, this.gravity = new i.Point, this.bounds = new i.Rectangle(0, 0, t.world.width, t.world.height), this.checkCollision = {
                up: !0,
                down: !0,
                left: !0,
                right: !0
            }, this.maxObjects = 10, this.maxLevels = 4, this.OVERLAP_BIAS = 4, this.forceX = !1, this.sortDirection = i.Physics.Arcade.LEFT_RIGHT, this.skipQuadTree = !0, this.isPaused = !1, this.quadTree = new i.QuadTree(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this._total = 0, this.setBoundsToWorld()
        }, i.Physics.Arcade.prototype.constructor = i.Physics.Arcade, i.Physics.Arcade.SORT_NONE = 0, i.Physics.Arcade.LEFT_RIGHT = 1, i.Physics.Arcade.RIGHT_LEFT = 2, i.Physics.Arcade.TOP_BOTTOM = 3, i.Physics.Arcade.BOTTOM_TOP = 4, i.Physics.Arcade.prototype = {
            setBounds: function(t, e, i, s) {
                this.bounds.setTo(t, e, i, s)
            },
            setBoundsToWorld: function() {
                this.bounds.copyFrom(this.game.world.bounds)
            },
            enable: function(t, e) {
                void 0 === e && (e = !0);
                var s = 1;
                if (Array.isArray(t))
                    for (s = t.length; s--;) t[s] instanceof i.Group ? this.enable(t[s].children, e) : (this.enableBody(t[s]), e && t[s].hasOwnProperty("children") && t[s].children.length > 0 && this.enable(t[s], !0));
                else t instanceof i.Group ? this.enable(t.children, e) : (this.enableBody(t), e && t.hasOwnProperty("children") && t.children.length > 0 && this.enable(t.children, !0))
            },
            enableBody: function(t) {
                t.hasOwnProperty("body") && null === t.body && (t.body = new i.Physics.Arcade.Body(t), t.parent && t.parent instanceof i.Group && t.parent.addToHash(t))
            },
            updateMotion: function(t) {
                var e = this.computeVelocity(0, t, t.angularVelocity, t.angularAcceleration, t.angularDrag, t.maxAngular) - t.angularVelocity;
                t.angularVelocity += e, t.rotation += t.angularVelocity * this.game.time.physicsElapsed, t.velocity.x = this.computeVelocity(1, t, t.velocity.x, t.acceleration.x, t.drag.x, t.maxVelocity.x), t.velocity.y = this.computeVelocity(2, t, t.velocity.y, t.acceleration.y, t.drag.y, t.maxVelocity.y)
            },
            computeVelocity: function(t, e, i, s, n, a) {
                return void 0 === a && (a = 1e4), 1 === t && e.allowGravity ? i += (this.gravity.x + e.gravity.x) * this.game.time.physicsElapsed : 2 === t && e.allowGravity && (i += (this.gravity.y + e.gravity.y) * this.game.time.physicsElapsed), s ? i += s * this.game.time.physicsElapsed : n && (i - (n *= this.game.time.physicsElapsed) > 0 ? i -= n : i + n < 0 ? i += n : i = 0), i > a ? i = a : i < -a && (i = -a), i
            },
            overlap: function(t, e, i, s, n) {
                if (i = i || null, s = s || null, n = n || i, this._total = 0, !Array.isArray(t) && Array.isArray(e))
                    for (a = 0; a < e.length; a++) this.collideHandler(t, e[a], i, s, n, !0);
                else if (Array.isArray(t) && !Array.isArray(e))
                    for (a = 0; a < t.length; a++) this.collideHandler(t[a], e, i, s, n, !0);
                else if (Array.isArray(t) && Array.isArray(e))
                    for (var a = 0; a < t.length; a++)
                        for (var o = 0; o < e.length; o++) this.collideHandler(t[a], e[o], i, s, n, !0);
                else this.collideHandler(t, e, i, s, n, !0);
                return this._total > 0
            },
            collide: function(t, e, i, s, n) {
                if (i = i || null, s = s || null, n = n || i, this._total = 0, !Array.isArray(t) && Array.isArray(e))
                    for (a = 0; a < e.length; a++) this.collideHandler(t, e[a], i, s, n, !1);
                else if (Array.isArray(t) && !Array.isArray(e))
                    for (a = 0; a < t.length; a++) this.collideHandler(t[a], e, i, s, n, !1);
                else if (Array.isArray(t) && Array.isArray(e))
                    for (var a = 0; a < t.length; a++)
                        for (var o = 0; o < e.length; o++) this.collideHandler(t[a], e[o], i, s, n, !1);
                else this.collideHandler(t, e, i, s, n, !1);
                return this._total > 0
            },
            sortLeftRight: function(t, e) {
                return t.body && e.body ? t.body.x - e.body.x : 0
            },
            sortRightLeft: function(t, e) {
                return t.body && e.body ? e.body.x - t.body.x : 0
            },
            sortTopBottom: function(t, e) {
                return t.body && e.body ? t.body.y - e.body.y : 0
            },
            sortBottomTop: function(t, e) {
                return t.body && e.body ? e.body.y - t.body.y : 0
            },
            sort: function(t, e) {
                null !== t.physicsSortDirection ? e = t.physicsSortDirection : void 0 === e && (e = this.sortDirection), e === i.Physics.Arcade.LEFT_RIGHT ? t.hash.sort(this.sortLeftRight) : e === i.Physics.Arcade.RIGHT_LEFT ? t.hash.sort(this.sortRightLeft) : e === i.Physics.Arcade.TOP_BOTTOM ? t.hash.sort(this.sortTopBottom) : e === i.Physics.Arcade.BOTTOM_TOP && t.hash.sort(this.sortBottomTop)
            },
            collideHandler: function(t, e, s, n, a, o) {
                if (void 0 === e && t.physicsType === i.GROUP) return this.sort(t), void this.collideGroupVsSelf(t, s, n, a, o);
                t && e && t.exists && e.exists && (this.sortDirection !== i.Physics.Arcade.SORT_NONE && (t.physicsType === i.GROUP && this.sort(t), e.physicsType === i.GROUP && this.sort(e)), t.physicsType === i.SPRITE ? e.physicsType === i.SPRITE ? this.collideSpriteVsSprite(t, e, s, n, a, o) : e.physicsType === i.GROUP ? this.collideSpriteVsGroup(t, e, s, n, a, o) : e.physicsType === i.TILEMAPLAYER && this.collideSpriteVsTilemapLayer(t, e, s, n, a, o) : t.physicsType === i.GROUP ? e.physicsType === i.SPRITE ? this.collideSpriteVsGroup(e, t, s, n, a, o) : e.physicsType === i.GROUP ? this.collideGroupVsGroup(t, e, s, n, a, o) : e.physicsType === i.TILEMAPLAYER && this.collideGroupVsTilemapLayer(t, e, s, n, a, o) : t.physicsType === i.TILEMAPLAYER && (e.physicsType === i.SPRITE ? this.collideSpriteVsTilemapLayer(e, t, s, n, a, o) : e.physicsType === i.GROUP && this.collideGroupVsTilemapLayer(e, t, s, n, a, o)))
            },
            collideSpriteVsSprite: function(t, e, i, s, n, a) {
                return !(!t.body || !e.body) && (this.separate(t.body, e.body, s, n, a) && (i && i.call(n, t, e), this._total++), !0)
            },
            collideSpriteVsGroup: function(t, e, s, n, a, o) {
                if (0 !== e.length && t.body)
                    if (this.skipQuadTree || t.body.skipQuadTree)
                        for (var r = {}, h = 0; h < e.hash.length; h++) {
                            var l = e.hash[h];
                            if (l && l.exists && l.body) {
                                if (r = l.body.getBounds(r), this.sortDirection === i.Physics.Arcade.LEFT_RIGHT) {
                                    if (t.body.right < r.x) break;
                                    if (r.right < t.body.x) continue
                                } else if (this.sortDirection === i.Physics.Arcade.RIGHT_LEFT) {
                                    if (t.body.x > r.right) break;
                                    if (r.x > t.body.right) continue
                                } else if (this.sortDirection === i.Physics.Arcade.TOP_BOTTOM) {
                                    if (t.body.bottom < r.y) break;
                                    if (r.bottom < t.body.y) continue
                                } else if (this.sortDirection === i.Physics.Arcade.BOTTOM_TOP) {
                                    if (t.body.y > r.bottom) break;
                                    if (r.y > t.body.bottom) continue
                                }
                                this.collideSpriteVsSprite(t, l, s, n, a, o)
                            }
                        } else {
                            this.quadTree.clear(), this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this.quadTree.populate(e);
                            for (var c = this.quadTree.retrieve(t), h = 0; h < c.length; h++) this.separate(t.body, c[h], n, a, o) && (s && s.call(a, t, c[h].sprite), this._total++)
                        }
            },
            collideGroupVsSelf: function(t, e, s, n, a) {
                if (0 !== t.length)
                    for (var o = 0; o < t.hash.length; o++) {
                        var r = {},
                            h = t.hash[o];
                        if (h && h.exists && h.body) {
                            r = h.body.getBounds(r);
                            for (var l = o + 1; l < t.hash.length; l++) {
                                var c = {},
                                    u = t.hash[l];
                                if (u && u.exists && u.body) {
                                    if (c = u.body.getBounds(c), this.sortDirection === i.Physics.Arcade.LEFT_RIGHT) {
                                        if (r.right < c.x) break;
                                        if (c.right < r.x) continue
                                    } else if (this.sortDirection === i.Physics.Arcade.RIGHT_LEFT) {
                                        if (r.x > c.right) continue;
                                        if (c.x > r.right) break
                                    } else if (this.sortDirection === i.Physics.Arcade.TOP_BOTTOM) {
                                        if (r.bottom < c.y) continue;
                                        if (c.bottom < r.y) break
                                    } else if (this.sortDirection === i.Physics.Arcade.BOTTOM_TOP) {
                                        if (r.y > c.bottom) continue;
                                        if (c.y > h.body.bottom) break
                                    }
                                    this.collideSpriteVsSprite(h, u, e, s, n, a)
                                }
                            }
                        }
                    }
            },
            collideGroupVsGroup: function(t, e, s, n, a, o) {
                if (0 !== t.length && 0 !== e.length)
                    for (var r = 0; r < t.children.length; r++) t.children[r].exists && (t.children[r].physicsType === i.GROUP ? this.collideGroupVsGroup(t.children[r], e, s, n, a, o) : this.collideSpriteVsGroup(t.children[r], e, s, n, a, o))
            },
            separate: function(t, e, i, s, n) {
                if (!t.enable || !e.enable || t.checkCollision.none || e.checkCollision.none || !this.intersects(t, e)) return !1;
                if (i && !1 === i.call(s, t.sprite, e.sprite)) return !1;
                if (t.isCircle && e.isCircle) return this.separateCircle(t, e, n);
                if (t.isCircle !== e.isCircle) {
                    var a = t.isCircle ? e : t,
                        o = t.isCircle ? t : e,
                        r = {
                            x: a.x,
                            y: a.y,
                            right: a.right,
                            bottom: a.bottom
                        },
                        h = {
                            x: o.x + o.radius,
                            y: o.y + o.radius
                        };
                    if ((h.y < r.y || h.y > r.bottom) && (h.x < r.x || h.x > r.right)) return this.separateCircle(t, e, n)
                }
                var l = !1,
                    c = !1;
                this.forceX || Math.abs(this.gravity.y + t.gravity.y) < Math.abs(this.gravity.x + t.gravity.x) ? (l = this.separateX(t, e, n), this.intersects(t, e) && (c = this.separateY(t, e, n))) : (c = this.separateY(t, e, n), this.intersects(t, e) && (l = this.separateX(t, e, n)));
                var u = l || c;
                return u && (n ? (t.onOverlap && t.onOverlap.dispatch(t.sprite, e.sprite), e.onOverlap && e.onOverlap.dispatch(e.sprite, t.sprite)) : (t.onCollide && t.onCollide.dispatch(t.sprite, e.sprite), e.onCollide && e.onCollide.dispatch(e.sprite, t.sprite))), u
            },
            intersects: function(t, e) {
                return t !== e && (t.isCircle ? e.isCircle ? i.Math.distance(t.center.x, t.center.y, e.center.x, e.center.y) <= t.radius + e.radius : this.circleBodyIntersects(t, e) : e.isCircle ? this.circleBodyIntersects(e, t) : !(t.right <= e.position.x) && (!(t.bottom <= e.position.y) && (!(t.position.x >= e.right) && !(t.position.y >= e.bottom))))
            },
            circleBodyIntersects: function(t, e) {
                var s = i.Math.clamp(t.center.x, e.left, e.right),
                    n = i.Math.clamp(t.center.y, e.top, e.bottom);
                return (t.center.x - s) * (t.center.x - s) + (t.center.y - n) * (t.center.y - n) <= t.radius * t.radius
            },
            separateCircle: function(t, e, s) {
                this.getOverlapX(t, e), this.getOverlapY(t, e);
                var n = e.center.x - t.center.x,
                    a = e.center.y - t.center.y,
                    o = Math.atan2(a, n),
                    r = 0;
                if (t.isCircle !== e.isCircle) {
                    var h = {
                            x: e.isCircle ? t.position.x : e.position.x,
                            y: e.isCircle ? t.position.y : e.position.y,
                            right: e.isCircle ? t.right : e.right,
                            bottom: e.isCircle ? t.bottom : e.bottom
                        },
                        l = {
                            x: t.isCircle ? t.position.x + t.radius : e.position.x + e.radius,
                            y: t.isCircle ? t.position.y + t.radius : e.position.y + e.radius,
                            radius: t.isCircle ? t.radius : e.radius
                        };
                    l.y < h.y ? l.x < h.x ? r = i.Math.distance(l.x, l.y, h.x, h.y) - l.radius : l.x > h.right && (r = i.Math.distance(l.x, l.y, h.right, h.y) - l.radius) : l.y > h.bottom && (l.x < h.x ? r = i.Math.distance(l.x, l.y, h.x, h.bottom) - l.radius : l.x > h.right && (r = i.Math.distance(l.x, l.y, h.right, h.bottom) - l.radius)), r *= -1
                } else r = t.radius + e.radius - i.Math.distance(t.center.x, t.center.y, e.center.x, e.center.y); if (s || 0 === r || t.immovable && e.immovable || t.customSeparateX || e.customSeparateX) return 0 !== r && (t.onOverlap && t.onOverlap.dispatch(t.sprite, e.sprite), e.onOverlap && e.onOverlap.dispatch(e.sprite, t.sprite)), 0 !== r;
                var c = {
                        x: t.velocity.x * Math.cos(o) + t.velocity.y * Math.sin(o),
                        y: t.velocity.x * Math.sin(o) - t.velocity.y * Math.cos(o)
                    },
                    u = {
                        x: e.velocity.x * Math.cos(o) + e.velocity.y * Math.sin(o),
                        y: e.velocity.x * Math.sin(o) - e.velocity.y * Math.cos(o)
                    },
                    d = ((t.mass - e.mass) * c.x + 2 * e.mass * u.x) / (t.mass + e.mass),
                    p = (2 * t.mass * c.x + (e.mass - t.mass) * u.x) / (t.mass + e.mass);
                return t.immovable || (t.velocity.x = (d * Math.cos(o) - c.y * Math.sin(o)) * t.bounce.x, t.velocity.y = (c.y * Math.cos(o) + d * Math.sin(o)) * t.bounce.y), e.immovable || (e.velocity.x = (p * Math.cos(o) - u.y * Math.sin(o)) * e.bounce.x, e.velocity.y = (u.y * Math.cos(o) + p * Math.sin(o)) * e.bounce.y), Math.abs(o) < Math.PI / 2 ? t.velocity.x > 0 && !t.immovable && e.velocity.x > t.velocity.x ? t.velocity.x *= -1 : e.velocity.x < 0 && !e.immovable && t.velocity.x < e.velocity.x ? e.velocity.x *= -1 : t.velocity.y > 0 && !t.immovable && e.velocity.y > t.velocity.y ? t.velocity.y *= -1 : e.velocity.y < 0 && !e.immovable && t.velocity.y < e.velocity.y && (e.velocity.y *= -1) : Math.abs(o) > Math.PI / 2 && (t.velocity.x < 0 && !t.immovable && e.velocity.x < t.velocity.x ? t.velocity.x *= -1 : e.velocity.x > 0 && !e.immovable && t.velocity.x > e.velocity.x ? e.velocity.x *= -1 : t.velocity.y < 0 && !t.immovable && e.velocity.y < t.velocity.y ? t.velocity.y *= -1 : e.velocity.y > 0 && !e.immovable && t.velocity.x > e.velocity.y && (e.velocity.y *= -1)), t.immovable || (t.x += t.velocity.x * this.game.time.physicsElapsed - r * Math.cos(o), t.y += t.velocity.y * this.game.time.physicsElapsed - r * Math.sin(o)), e.immovable || (e.x += e.velocity.x * this.game.time.physicsElapsed + r * Math.cos(o), e.y += e.velocity.y * this.game.time.physicsElapsed + r * Math.sin(o)), t.onCollide && t.onCollide.dispatch(t.sprite, e.sprite), e.onCollide && e.onCollide.dispatch(e.sprite, t.sprite), !0
            },
            getOverlapX: function(t, e, i) {
                var s = 0,
                    n = t.deltaAbsX() + e.deltaAbsX() + this.OVERLAP_BIAS;
                return 0 === t.deltaX() && 0 === e.deltaX() ? (t.embedded = !0, e.embedded = !0) : t.deltaX() > e.deltaX() ? (s = t.right - e.x) > n && !i || !1 === t.checkCollision.right || !1 === e.checkCollision.left ? s = 0 : (t.touching.none = !1, t.touching.right = !0, e.touching.none = !1, e.touching.left = !0) : t.deltaX() < e.deltaX() && (-(s = t.x - e.width - e.x) > n && !i || !1 === t.checkCollision.left || !1 === e.checkCollision.right ? s = 0 : (t.touching.none = !1, t.touching.left = !0, e.touching.none = !1, e.touching.right = !0)), t.overlapX = s, e.overlapX = s, s
            },
            getOverlapY: function(t, e, i) {
                var s = 0,
                    n = t.deltaAbsY() + e.deltaAbsY() + this.OVERLAP_BIAS;
                return 0 === t.deltaY() && 0 === e.deltaY() ? (t.embedded = !0, e.embedded = !0) : t.deltaY() > e.deltaY() ? (s = t.bottom - e.y) > n && !i || !1 === t.checkCollision.down || !1 === e.checkCollision.up ? s = 0 : (t.touching.none = !1, t.touching.down = !0, e.touching.none = !1, e.touching.up = !0) : t.deltaY() < e.deltaY() && (-(s = t.y - e.bottom) > n && !i || !1 === t.checkCollision.up || !1 === e.checkCollision.down ? s = 0 : (t.touching.none = !1, t.touching.up = !0, e.touching.none = !1, e.touching.down = !0)), t.overlapY = s, e.overlapY = s, s
            },
            separateX: function(t, e, i) {
                var s = this.getOverlapX(t, e, i);
                if (i || 0 === s || t.immovable && e.immovable || t.customSeparateX || e.customSeparateX) return 0 !== s || t.embedded && e.embedded;
                var n = t.velocity.x,
                    a = e.velocity.x;
                if (t.immovable || e.immovable) t.immovable ? (e.x += s, e.velocity.x = n - a * e.bounce.x, t.moves && (e.y += (t.y - t.prev.y) * t.friction.y)) : (t.x -= s, t.velocity.x = a - n * t.bounce.x, e.moves && (t.y += (e.y - e.prev.y) * e.friction.y));
                else {
                    s *= .5, t.x -= s, e.x += s;
                    var o = Math.sqrt(a * a * e.mass / t.mass) * (a > 0 ? 1 : -1),
                        r = Math.sqrt(n * n * t.mass / e.mass) * (n > 0 ? 1 : -1),
                        h = .5 * (o + r);
                    o -= h, r -= h, t.velocity.x = h + o * t.bounce.x, e.velocity.x = h + r * e.bounce.x
                }
                return !0
            },
            separateY: function(t, e, i) {
                var s = this.getOverlapY(t, e, i);
                if (i || 0 === s || t.immovable && e.immovable || t.customSeparateY || e.customSeparateY) return 0 !== s || t.embedded && e.embedded;
                var n = t.velocity.y,
                    a = e.velocity.y;
                if (t.immovable || e.immovable) t.immovable ? (e.y += s, e.velocity.y = n - a * e.bounce.y, t.moves && (e.x += (t.x - t.prev.x) * t.friction.x)) : (t.y -= s, t.velocity.y = a - n * t.bounce.y, e.moves && (t.x += (e.x - e.prev.x) * e.friction.x));
                else {
                    s *= .5, t.y -= s, e.y += s;
                    var o = Math.sqrt(a * a * e.mass / t.mass) * (a > 0 ? 1 : -1),
                        r = Math.sqrt(n * n * t.mass / e.mass) * (n > 0 ? 1 : -1),
                        h = .5 * (o + r);
                    o -= h, r -= h, t.velocity.y = h + o * t.bounce.y, e.velocity.y = h + r * e.bounce.y
                }
                return !0
            },
            getObjectsUnderPointer: function(t, e, i, s) {
                if (0 !== e.length && t.exists) return this.getObjectsAtLocation(t.x, t.y, e, i, s, t)
            },
            getObjectsAtLocation: function(t, e, s, n, a, o) {
                this.quadTree.clear(), this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this.quadTree.populate(s);
                for (var r = new i.Rectangle(t, e, 1, 1), h = [], l = this.quadTree.retrieve(r), c = 0; c < l.length; c++) l[c].hitTest(t, e) && (n && n.call(a, o, l[c].sprite), h.push(l[c].sprite));
                return h
            },
            moveToObject: function(t, e, i, s) {
                void 0 === i && (i = 60), void 0 === s && (s = 0);
                var n = Math.atan2(e.y - t.y, e.x - t.x);
                return s > 0 && (i = this.distanceBetween(t, e) / (s / 1e3)), t.body.velocity.x = Math.cos(n) * i, t.body.velocity.y = Math.sin(n) * i, n
            },
            moveToPointer: function(t, e, i, s) {
                void 0 === e && (e = 60), i = i || this.game.input.activePointer, void 0 === s && (s = 0);
                var n = this.angleToPointer(t, i);
                return s > 0 && (e = this.distanceToPointer(t, i) / (s / 1e3)), t.body.velocity.x = Math.cos(n) * e, t.body.velocity.y = Math.sin(n) * e, n
            },
            moveToXY: function(t, e, i, s, n) {
                void 0 === s && (s = 60), void 0 === n && (n = 0);
                var a = Math.atan2(i - t.y, e - t.x);
                return n > 0 && (s = this.distanceToXY(t, e, i) / (n / 1e3)), t.body.velocity.x = Math.cos(a) * s, t.body.velocity.y = Math.sin(a) * s, a
            },
            velocityFromAngle: function(t, e, s) {
                return void 0 === e && (e = 60), (s = s || new i.Point).setTo(Math.cos(this.game.math.degToRad(t)) * e, Math.sin(this.game.math.degToRad(t)) * e)
            },
            velocityFromRotation: function(t, e, s) {
                return void 0 === e && (e = 60), (s = s || new i.Point).setTo(Math.cos(t) * e, Math.sin(t) * e)
            },
            accelerationFromRotation: function(t, e, s) {
                return void 0 === e && (e = 60), (s = s || new i.Point).setTo(Math.cos(t) * e, Math.sin(t) * e)
            },
            accelerateToObject: function(t, e, i, s, n) {
                void 0 === i && (i = 60), void 0 === s && (s = 1e3), void 0 === n && (n = 1e3);
                var a = this.angleBetween(t, e);
                return t.body.acceleration.setTo(Math.cos(a) * i, Math.sin(a) * i), t.body.maxVelocity.setTo(s, n), a
            },
            accelerateToPointer: function(t, e, i, s, n) {
                void 0 === i && (i = 60), void 0 === e && (e = this.game.input.activePointer), void 0 === s && (s = 1e3), void 0 === n && (n = 1e3);
                var a = this.angleToPointer(t, e);
                return t.body.acceleration.setTo(Math.cos(a) * i, Math.sin(a) * i), t.body.maxVelocity.setTo(s, n), a
            },
            accelerateToXY: function(t, e, i, s, n, a) {
                void 0 === s && (s = 60), void 0 === n && (n = 1e3), void 0 === a && (a = 1e3);
                var o = this.angleToXY(t, e, i);
                return t.body.acceleration.setTo(Math.cos(o) * s, Math.sin(o) * s), t.body.maxVelocity.setTo(n, a), o
            },
            distanceBetween: function(t, e, i) {
                void 0 === i && (i = !1);
                var s = i ? t.world.x - e.world.x : t.x - e.x,
                    n = i ? t.world.y - e.world.y : t.y - e.y;
                return Math.sqrt(s * s + n * n)
            },
            distanceToXY: function(t, e, i, s) {
                void 0 === s && (s = !1);
                var n = s ? t.world.x - e : t.x - e,
                    a = s ? t.world.y - i : t.y - i;
                return Math.sqrt(n * n + a * a)
            },
            distanceToPointer: function(t, e, i) {
                void 0 === e && (e = this.game.input.activePointer), void 0 === i && (i = !1);
                var s = i ? t.world.x - e.worldX : t.x - e.worldX,
                    n = i ? t.world.y - e.worldY : t.y - e.worldY;
                return Math.sqrt(s * s + n * n)
            },
            angleBetween: function(t, e, i) {
                return void 0 === i && (i = !1), i ? Math.atan2(e.world.y - t.world.y, e.world.x - t.world.x) : Math.atan2(e.y - t.y, e.x - t.x)
            },
            angleBetweenCenters: function(t, e) {
                var i = e.centerX - t.centerX,
                    s = e.centerY - t.centerY;
                return Math.atan2(s, i)
            },
            angleToXY: function(t, e, i, s) {
                return void 0 === s && (s = !1), s ? Math.atan2(i - t.world.y, e - t.world.x) : Math.atan2(i - t.y, e - t.x)
            },
            angleToPointer: function(t, e, i) {
                return void 0 === e && (e = this.game.input.activePointer), void 0 === i && (i = !1), i ? Math.atan2(e.worldY - t.world.y, e.worldX - t.world.x) : Math.atan2(e.worldY - t.y, e.worldX - t.x)
            },
            worldAngleToPointer: function(t, e) {
                return this.angleToPointer(t, e, !0)
            }
        }, i.Physics.Arcade.Body = function(t) {
            this.sprite = t, this.game = t.game, this.type = i.Physics.ARCADE, this.enable = !0, this.isCircle = !1, this.radius = 0, this.offset = new i.Point, this.position = new i.Point(t.x, t.y), this.prev = new i.Point(this.position.x, this.position.y), this.allowRotation = !0, this.rotation = t.angle, this.preRotation = t.angle, this.width = t.width, this.height = t.height, this.sourceWidth = t.width, this.sourceHeight = t.height, t.texture && (this.sourceWidth = t.texture.frame.width, this.sourceHeight = t.texture.frame.height), this.halfWidth = Math.abs(t.width / 2), this.halfHeight = Math.abs(t.height / 2), this.center = new i.Point(t.x + this.halfWidth, t.y + this.halfHeight), this.velocity = new i.Point, this.newVelocity = new i.Point, this.deltaMax = new i.Point, this.acceleration = new i.Point, this.drag = new i.Point, this.allowGravity = !0, this.gravity = new i.Point, this.bounce = new i.Point, this.worldBounce = null, this.onWorldBounds = null, this.onCollide = null, this.onOverlap = null, this.maxVelocity = new i.Point(1e4, 1e4), this.friction = new i.Point(1, 0), this.angularVelocity = 0, this.angularAcceleration = 0, this.angularDrag = 0, this.maxAngular = 1e3, this.mass = 1, this.angle = 0, this.speed = 0, this.facing = i.NONE, this.immovable = !1, this.moves = !0, this.customSeparateX = !1, this.customSeparateY = !1, this.overlapX = 0, this.overlapY = 0, this.overlapR = 0, this.embedded = !1, this.collideWorldBounds = !1, this.checkCollision = {
                none: !1,
                any: !0,
                up: !0,
                down: !0,
                left: !0,
                right: !0
            }, this.touching = {
                none: !0,
                up: !1,
                down: !1,
                left: !1,
                right: !1
            }, this.wasTouching = {
                none: !0,
                up: !1,
                down: !1,
                left: !1,
                right: !1
            }, this.blocked = {
                up: !1,
                down: !1,
                left: !1,
                right: !1
            }, this.tilePadding = new i.Point, this.dirty = !1, this.skipQuadTree = !1, this.syncBounds = !1, this.isMoving = !1, this.stopVelocityOnCollide = !0, this.moveTimer = 0, this.moveDistance = 0, this.moveDuration = 0, this.moveTarget = null, this.moveEnd = null, this.onMoveComplete = new i.Signal, this.movementCallback = null, this.movementCallbackContext = null, this._reset = !0, this._sx = t.scale.x, this._sy = t.scale.y, this._dx = 0, this._dy = 0
        }, i.Physics.Arcade.Body.prototype = {
            updateBounds: function() {
                if (this.syncBounds) {
                    var t = this.sprite.getBounds();
                    t.ceilAll(), t.width === this.width && t.height === this.height || (this.width = t.width, this.height = t.height, this._reset = !0)
                } else {
                    var e = Math.abs(this.sprite.scale.x),
                        i = Math.abs(this.sprite.scale.y);
                    e === this._sx && i === this._sy || (this.width = this.sourceWidth * e, this.height = this.sourceHeight * i, this._sx = e, this._sy = i, this._reset = !0)
                }
                this._reset && (this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight))
            },
            preUpdate: function() {
                this.enable && !this.game.physics.arcade.isPaused && (this.dirty = !0, this.wasTouching.none = this.touching.none, this.wasTouching.up = this.touching.up, this.wasTouching.down = this.touching.down, this.wasTouching.left = this.touching.left, this.wasTouching.right = this.touching.right, this.touching.none = !0, this.touching.up = !1, this.touching.down = !1, this.touching.left = !1, this.touching.right = !1, this.blocked.up = !1, this.blocked.down = !1, this.blocked.left = !1, this.blocked.right = !1, this.embedded = !1, this.updateBounds(), this.position.x = this.sprite.world.x - this.sprite.anchor.x * this.sprite.width + this.sprite.scale.x * this.offset.x, this.position.x -= this.sprite.scale.x < 0 ? this.width : 0, this.position.y = this.sprite.world.y - this.sprite.anchor.y * this.sprite.height + this.sprite.scale.y * this.offset.y, this.position.y -= this.sprite.scale.y < 0 ? this.height : 0, this.rotation = this.sprite.angle, this.preRotation = this.rotation, (this._reset || this.sprite.fresh) && (this.prev.x = this.position.x, this.prev.y = this.position.y), this.moves && (this.game.physics.arcade.updateMotion(this), this.newVelocity.set(this.velocity.x * this.game.time.physicsElapsed, this.velocity.y * this.game.time.physicsElapsed), this.position.x += this.newVelocity.x, this.position.y += this.newVelocity.y, this.position.x === this.prev.x && this.position.y === this.prev.y || (this.angle = Math.atan2(this.velocity.y, this.velocity.x)), this.speed = Math.sqrt(this.velocity.x * this.velocity.x + this.velocity.y * this.velocity.y), this.collideWorldBounds && this.checkWorldBounds() && this.onWorldBounds && this.onWorldBounds.dispatch(this.sprite, this.blocked.up, this.blocked.down, this.blocked.left, this.blocked.right)), this._dx = this.deltaX(), this._dy = this.deltaY(), this._reset = !1)
            },
            updateMovement: function() {
                var t = 0,
                    e = 0 !== this.overlapX || 0 !== this.overlapY;
                if (this.moveDuration > 0 ? (this.moveTimer += this.game.time.elapsedMS, t = this.moveTimer / this.moveDuration) : (this.moveTarget.end.set(this.position.x, this.position.y), t = this.moveTarget.length / this.moveDistance), this.movementCallback) var i = this.movementCallback.call(this.movementCallbackContext, this, this.velocity, t);
                return !(e || t >= 1 || void 0 !== i && !0 !== i) || (this.stopMovement(t >= 1 || this.stopVelocityOnCollide && e), !1)
            },
            stopMovement: function(t) {
                this.isMoving && (this.isMoving = !1, t && this.velocity.set(0), this.onMoveComplete.dispatch(this.sprite, 0 !== this.overlapX || 0 !== this.overlapY))
            },
            postUpdate: function() {
                this.enable && this.dirty && (this.isMoving && this.updateMovement(), this.dirty = !1, this.deltaX() < 0 ? this.facing = i.LEFT : this.deltaX() > 0 && (this.facing = i.RIGHT), this.deltaY() < 0 ? this.facing = i.UP : this.deltaY() > 0 && (this.facing = i.DOWN), this.moves && (this._dx = this.deltaX(), this._dy = this.deltaY(), 0 !== this.deltaMax.x && 0 !== this._dx && (this._dx < 0 && this._dx < -this.deltaMax.x ? this._dx = -this.deltaMax.x : this._dx > 0 && this._dx > this.deltaMax.x && (this._dx = this.deltaMax.x)), 0 !== this.deltaMax.y && 0 !== this._dy && (this._dy < 0 && this._dy < -this.deltaMax.y ? this._dy = -this.deltaMax.y : this._dy > 0 && this._dy > this.deltaMax.y && (this._dy = this.deltaMax.y)), this.sprite.position.x += this._dx, this.sprite.position.y += this._dy, this._reset = !0), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight), this.allowRotation && (this.sprite.angle += this.deltaZ()), this.prev.x = this.position.x, this.prev.y = this.position.y)
            },
            checkWorldBounds: function() {
                var t = this.position,
                    e = this.game.physics.arcade.bounds,
                    i = this.game.physics.arcade.checkCollision,
                    s = this.worldBounce ? -this.worldBounce.x : -this.bounce.x,
                    n = this.worldBounce ? -this.worldBounce.y : -this.bounce.y;
                if (this.isCircle) {
                    var a = {
                        x: this.center.x - this.radius,
                        y: this.center.y - this.radius,
                        right: this.center.x + this.radius,
                        bottom: this.center.y + this.radius
                    };
                    a.x < e.x && i.left ? (t.x = e.x - this.halfWidth + this.radius, this.velocity.x *= s, this.blocked.left = !0) : a.right > e.right && i.right && (t.x = e.right - this.halfWidth - this.radius, this.velocity.x *= s, this.blocked.right = !0), a.y < e.y && i.up ? (t.y = e.y - this.halfHeight + this.radius, this.velocity.y *= n, this.blocked.up = !0) : a.bottom > e.bottom && i.down && (t.y = e.bottom - this.halfHeight - this.radius, this.velocity.y *= n, this.blocked.down = !0)
                } else t.x < e.x && i.left ? (t.x = e.x, this.velocity.x *= s, this.blocked.left = !0) : this.right > e.right && i.right && (t.x = e.right - this.width, this.velocity.x *= s, this.blocked.right = !0), t.y < e.y && i.up ? (t.y = e.y, this.velocity.y *= n, this.blocked.up = !0) : this.bottom > e.bottom && i.down && (t.y = e.bottom - this.height, this.velocity.y *= n, this.blocked.down = !0);
                return this.blocked.up || this.blocked.down || this.blocked.left || this.blocked.right
            },
            moveFrom: function(t, e, i) {
                if (void 0 === e && (e = this.speed), 0 === e) return !1;
                var s;
                return void 0 === i ? (s = this.angle, i = this.game.math.radToDeg(s)) : s = this.game.math.degToRad(i), this.moveTimer = 0, this.moveDuration = t, 0 === i || 180 === i ? this.velocity.set(Math.cos(s) * e, 0) : 90 === i || 270 === i ? this.velocity.set(0, Math.sin(s) * e) : this.velocity.set(Math.cos(s) * e, Math.sin(s) * e), this.isMoving = !0, !0
            },
            moveTo: function(t, e, s) {
                var n = e / (t / 1e3);
                if (0 === n) return !1;
                var a;
                return void 0 === s ? (a = this.angle, s = this.game.math.radToDeg(a)) : a = this.game.math.degToRad(s), e = Math.abs(e), this.moveDuration = 0, this.moveDistance = e, null === this.moveTarget && (this.moveTarget = new i.Line, this.moveEnd = new i.Point), this.moveTarget.fromAngle(this.x, this.y, a, e), this.moveEnd.set(this.moveTarget.end.x, this.moveTarget.end.y), this.moveTarget.setTo(this.x, this.y, this.x, this.y), 0 === s || 180 === s ? this.velocity.set(Math.cos(a) * n, 0) : 90 === s || 270 === s ? this.velocity.set(0, Math.sin(a) * n) : this.velocity.set(Math.cos(a) * n, Math.sin(a) * n), this.isMoving = !0, !0
            },
            setSize: function(t, e, i, s) {
                void 0 === i && (i = this.offset.x), void 0 === s && (s = this.offset.y), this.sourceWidth = t, this.sourceHeight = e, this.width = this.sourceWidth * this._sx, this.height = this.sourceHeight * this._sy, this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this.offset.setTo(i, s), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight), this.isCircle = !1, this.radius = 0
            },
            setCircle: function(t, e, i) {
                void 0 === e && (e = this.offset.x), void 0 === i && (i = this.offset.y), t > 0 ? (this.isCircle = !0, this.radius = t, this.sourceWidth = 2 * t, this.sourceHeight = 2 * t, this.width = this.sourceWidth * this._sx, this.height = this.sourceHeight * this._sy, this.halfWidth = Math.floor(this.width / 2), this.halfHeight = Math.floor(this.height / 2), this.offset.setTo(e, i), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight)) : this.isCircle = !1
            },
            reset: function(t, e) {
                this.velocity.set(0), this.acceleration.set(0), this.speed = 0, this.angularVelocity = 0, this.angularAcceleration = 0, this.position.x = t - this.sprite.anchor.x * this.sprite.width + this.sprite.scale.x * this.offset.x, this.position.x -= this.sprite.scale.x < 0 ? this.width : 0, this.position.y = e - this.sprite.anchor.y * this.sprite.height + this.sprite.scale.y * this.offset.y, this.position.y -= this.sprite.scale.y < 0 ? this.height : 0, this.prev.x = this.position.x, this.prev.y = this.position.y, this.rotation = this.sprite.angle, this.preRotation = this.rotation, this._sx = this.sprite.scale.x, this._sy = this.sprite.scale.y, this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight)
            },
            getBounds: function(t) {
                return this.isCircle ? (t.x = this.center.x - this.radius, t.y = this.center.y - this.radius, t.right = this.center.x + this.radius, t.bottom = this.center.y + this.radius) : (t.x = this.x, t.y = this.y, t.right = this.right, t.bottom = this.bottom), t
            },
            hitTest: function(t, e) {
                return this.isCircle ? i.Circle.contains(this, t, e) : i.Rectangle.contains(this, t, e)
            },
            onFloor: function() {
                return this.blocked.down
            },
            onCeiling: function() {
                return this.blocked.up
            },
            onWall: function() {
                return this.blocked.left || this.blocked.right
            },
            deltaAbsX: function() {
                return this.deltaX() > 0 ? this.deltaX() : -this.deltaX()
            },
            deltaAbsY: function() {
                return this.deltaY() > 0 ? this.deltaY() : -this.deltaY()
            },
            deltaX: function() {
                return this.position.x - this.prev.x
            },
            deltaY: function() {
                return this.position.y - this.prev.y
            },
            deltaZ: function() {
                return this.rotation - this.preRotation
            },
            destroy: function() {
                this.sprite.parent && this.sprite.parent instanceof i.Group && this.sprite.parent.removeFromHash(this.sprite), this.sprite.body = null, this.sprite = null
            }
        }, Object.defineProperty(i.Physics.Arcade.Body.prototype, "left", {
            get: function() {
                return this.position.x
            }
        }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "right", {
            get: function() {
                return this.position.x + this.width
            }
        }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "top", {
            get: function() {
                return this.position.y
            }
        }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "bottom", {
            get: function() {
                return this.position.y + this.height
            }
        }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "x", {
            get: function() {
                return this.position.x
            },
            set: function(t) {
                this.position.x = t
            }
        }), Object.defineProperty(i.Physics.Arcade.Body.prototype, "y", {
            get: function() {
                return this.position.y
            },
            set: function(t) {
                this.position.y = t
            }
        }), i.Physics.Arcade.Body.render = function(t, e, i, s) {
            void 0 === s && (s = !0), i = i || "rgba(0,255,0,0.4)", t.fillStyle = i, t.strokeStyle = i, e.isCircle ? (t.beginPath(), t.arc(e.center.x - e.game.camera.x, e.center.y - e.game.camera.y, e.radius, 0, 2 * Math.PI), s ? t.fill() : t.stroke()) : s ? t.fillRect(e.position.x - e.game.camera.x, e.position.y - e.game.camera.y, e.width, e.height) : t.strokeRect(e.position.x - e.game.camera.x, e.position.y - e.game.camera.y, e.width, e.height)
        }, i.Physics.Arcade.Body.renderBodyInfo = function(t, e) {
            t.line("x: " + e.x.toFixed(2), "y: " + e.y.toFixed(2), "width: " + e.width, "height: " + e.height), t.line("velocity x: " + e.velocity.x.toFixed(2), "y: " + e.velocity.y.toFixed(2), "deltaX: " + e._dx.toFixed(2), "deltaY: " + e._dy.toFixed(2)), t.line("acceleration x: " + e.acceleration.x.toFixed(2), "y: " + e.acceleration.y.toFixed(2), "speed: " + e.speed.toFixed(2), "angle: " + e.angle.toFixed(2)), t.line("gravity x: " + e.gravity.x, "y: " + e.gravity.y, "bounce x: " + e.bounce.x.toFixed(2), "y: " + e.bounce.y.toFixed(2)), t.line("touching left: " + e.touching.left, "right: " + e.touching.right, "up: " + e.touching.up, "down: " + e.touching.down), t.line("blocked left: " + e.blocked.left, "right: " + e.blocked.right, "up: " + e.blocked.up, "down: " + e.blocked.down)
        }, i.Physics.Arcade.Body.prototype.constructor = i.Physics.Arcade.Body, i.Physics.Arcade.TilemapCollision = function() {}, i.Physics.Arcade.TilemapCollision.prototype = {
            TILE_BIAS: 16,
            collideSpriteVsTilemapLayer: function(t, e, i, s, n, a) {
                if (t.body) {
                    var o = e.getTiles(t.body.position.x - t.body.tilePadding.x, t.body.position.y - t.body.tilePadding.y, t.body.width + t.body.tilePadding.x, t.body.height + t.body.tilePadding.y, !1, !1);
                    if (0 !== o.length)
                        for (var r = 0; r < o.length; r++) s ? s.call(n, t, o[r]) && this.separateTile(r, t.body, o[r], e, a) && (this._total++, i && i.call(n, t, o[r])) : this.separateTile(r, t.body, o[r], e, a) && (this._total++, i && i.call(n, t, o[r]))
                }
            },
            collideGroupVsTilemapLayer: function(t, e, i, s, n, a) {
                if (0 !== t.length)
                    for (var o = 0; o < t.children.length; o++) t.children[o].exists && this.collideSpriteVsTilemapLayer(t.children[o], e, i, s, n, a)
            },
            separateTile: function(t, e, i, s, n) {
                if (!e.enable) return !1;
                var a = s.fixedToCamera ? 0 : s.position.x,
                    o = s.fixedToCamera ? 0 : s.position.y;
                if (!i.intersects(e.position.x - a, e.position.y - o, e.right - a, e.bottom - o)) return !1;
                if (n) return !0;
                if (i.collisionCallback && !i.collisionCallback.call(i.collisionCallbackContext, e.sprite, i)) return !1;
                if (void 0 !== i.layer.callbacks && i.layer.callbacks[i.index] && !i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext, e.sprite, i)) return !1;
                if (!(i.faceLeft || i.faceRight || i.faceTop || i.faceBottom)) return !1;
                var r = 0,
                    h = 0,
                    l = 0,
                    c = 1;
                if (e.deltaAbsX() > e.deltaAbsY() ? l = -1 : e.deltaAbsX() < e.deltaAbsY() && (c = -1), 0 !== e.deltaX() && 0 !== e.deltaY() && (i.faceLeft || i.faceRight) && (i.faceTop || i.faceBottom) && (l = Math.min(Math.abs(e.position.x - a - i.right), Math.abs(e.right - a - i.left)), c = Math.min(Math.abs(e.position.y - o - i.bottom), Math.abs(e.bottom - o - i.top))), l < c) {
                    if ((i.faceLeft || i.faceRight) && 0 !== (r = this.tileCheckX(e, i, s)) && !i.intersects(e.position.x - a, e.position.y - o, e.right - a, e.bottom - o)) return !0;
                    (i.faceTop || i.faceBottom) && (h = this.tileCheckY(e, i, s))
                } else {
                    if ((i.faceTop || i.faceBottom) && 0 !== (h = this.tileCheckY(e, i, s)) && !i.intersects(e.position.x - a, e.position.y - o, e.right - a, e.bottom - o)) return !0;
                    (i.faceLeft || i.faceRight) && (r = this.tileCheckX(e, i, s))
                }
                return 0 !== r || 0 !== h
            },
            tileCheckX: function(t, e, i) {
                var s = 0,
                    n = i.fixedToCamera ? 0 : i.position.x;
                return t.deltaX() < 0 && !t.blocked.left && e.collideRight && t.checkCollision.left ? e.faceRight && t.x - n < e.right && (s = t.x - n - e.right) < -this.TILE_BIAS && (s = 0) : t.deltaX() > 0 && !t.blocked.right && e.collideLeft && t.checkCollision.right && e.faceLeft && t.right - n > e.left && (s = t.right - n - e.left) > this.TILE_BIAS && (s = 0), 0 !== s && (t.customSeparateX ? t.overlapX = s : this.processTileSeparationX(t, s)), s
            },
            tileCheckY: function(t, e, i) {
                var s = 0,
                    n = i.fixedToCamera ? 0 : i.position.y;
                return t.deltaY() < 0 && !t.blocked.up && e.collideDown && t.checkCollision.up ? e.faceBottom && t.y - n < e.bottom && (s = t.y - n - e.bottom) < -this.TILE_BIAS && (s = 0) : t.deltaY() > 0 && !t.blocked.down && e.collideUp && t.checkCollision.down && e.faceTop && t.bottom - n > e.top && (s = t.bottom - n - e.top) > this.TILE_BIAS && (s = 0), 0 !== s && (t.customSeparateY ? t.overlapY = s : this.processTileSeparationY(t, s)), s
            },
            processTileSeparationX: function(t, e) {
                e < 0 ? t.blocked.left = !0 : e > 0 && (t.blocked.right = !0), t.position.x -= e, 0 === t.bounce.x ? t.velocity.x = 0 : t.velocity.x = -t.velocity.x * t.bounce.x
            },
            processTileSeparationY: function(t, e) {
                e < 0 ? t.blocked.up = !0 : e > 0 && (t.blocked.down = !0), t.position.y -= e, 0 === t.bounce.y ? t.velocity.y = 0 : t.velocity.y = -t.velocity.y * t.bounce.y
            }
        }, i.Utils.mixinPrototype(i.Physics.Arcade.prototype, i.Physics.Arcade.TilemapCollision.prototype), p2.Body.prototype.parent = null, p2.Spring.prototype.parent = null, i.Physics.P2 = function(t, e) {
            this.game = t, void 0 === e ? e = {
                gravity: [0, 0],
                broadphase: new p2.SAPBroadphase
            } : (e.hasOwnProperty("gravity") || (e.gravity = [0, 0]), e.hasOwnProperty("broadphase") || (e.broadphase = new p2.SAPBroadphase)), this.config = e, this.world = new p2.World(this.config), this.frameRate = 1 / 60, this.useElapsedTime = !1, this.paused = !1, this.materials = [], this.gravity = new i.Physics.P2.InversePointProxy(this, this.world.gravity), this.walls = {
                left: null,
                right: null,
                top: null,
                bottom: null
            }, this.onBodyAdded = new i.Signal, this.onBodyRemoved = new i.Signal, this.onSpringAdded = new i.Signal, this.onSpringRemoved = new i.Signal, this.onConstraintAdded = new i.Signal, this.onConstraintRemoved = new i.Signal, this.onContactMaterialAdded = new i.Signal, this.onContactMaterialRemoved = new i.Signal, this.postBroadphaseCallback = null, this.callbackContext = null, this.onBeginContact = new i.Signal, this.onEndContact = new i.Signal, e.hasOwnProperty("mpx") && e.hasOwnProperty("pxm") && e.hasOwnProperty("mpxi") && e.hasOwnProperty("pxmi") && (this.mpx = e.mpx, this.mpxi = e.mpxi, this.pxm = e.pxm, this.pxmi = e.pxmi), this.world.on("beginContact", this.beginContactHandler, this), this.world.on("endContact", this.endContactHandler, this), this.collisionGroups = [], this.nothingCollisionGroup = new i.Physics.P2.CollisionGroup(1), this.boundsCollisionGroup = new i.Physics.P2.CollisionGroup(2), this.everythingCollisionGroup = new i.Physics.P2.CollisionGroup(2147483648), this.boundsCollidesWith = [], this._toRemove = [], this._collisionGroupID = 2, this._boundsLeft = !0, this._boundsRight = !0, this._boundsTop = !0, this._boundsBottom = !0, this._boundsOwnGroup = !1, this.setBoundsToWorld(!0, !0, !0, !0, !1)
        }, i.Physics.P2.prototype = {
            removeBodyNextStep: function(t) {
                this._toRemove.push(t)
            },
            preUpdate: function() {
                for (var t = this._toRemove.length; t--;) this.removeBody(this._toRemove[t]);
                this._toRemove.length = 0
            },
            enable: function(t, e, s) {
                void 0 === e && (e = !1), void 0 === s && (s = !0);
                var n = 1;
                if (Array.isArray(t))
                    for (n = t.length; n--;) t[n] instanceof i.Group ? this.enable(t[n].children, e, s) : (this.enableBody(t[n], e), s && t[n].hasOwnProperty("children") && t[n].children.length > 0 && this.enable(t[n], e, !0));
                else t instanceof i.Group ? this.enable(t.children, e, s) : (this.enableBody(t, e), s && t.hasOwnProperty("children") && t.children.length > 0 && this.enable(t.children, e, !0))
            },
            enableBody: function(t, e) {
                t.hasOwnProperty("body") && null === t.body && (t.body = new i.Physics.P2.Body(this.game, t, t.x, t.y, 1), t.body.debug = e, void 0 !== t.anchor && t.anchor.set(.5))
            },
            setImpactEvents: function(t) {
                t ? this.world.on("impact", this.impactHandler, this) : this.world.off("impact", this.impactHandler, this)
            },
            setPostBroadphaseCallback: function(t, e) {
                this.postBroadphaseCallback = t, this.callbackContext = e, null !== t ? this.world.on("postBroadphase", this.postBroadphaseHandler, this) : this.world.off("postBroadphase", this.postBroadphaseHandler, this)
            },
            postBroadphaseHandler: function(t) {
                if (this.postBroadphaseCallback && 0 !== t.pairs.length)
                    for (var e = t.pairs.length - 2; e >= 0; e -= 2) t.pairs[e].parent && t.pairs[e + 1].parent && !this.postBroadphaseCallback.call(this.callbackContext, t.pairs[e].parent, t.pairs[e + 1].parent) && t.pairs.splice(e, 2)
            },
            impactHandler: function(t) {
                if (t.bodyA.parent && t.bodyB.parent) {
                    var e = t.bodyA.parent,
                        i = t.bodyB.parent;
                    e._bodyCallbacks[t.bodyB.id] && e._bodyCallbacks[t.bodyB.id].call(e._bodyCallbackContext[t.bodyB.id], e, i, t.shapeA, t.shapeB), i._bodyCallbacks[t.bodyA.id] && i._bodyCallbacks[t.bodyA.id].call(i._bodyCallbackContext[t.bodyA.id], i, e, t.shapeB, t.shapeA), e._groupCallbacks[t.shapeB.collisionGroup] && e._groupCallbacks[t.shapeB.collisionGroup].call(e._groupCallbackContext[t.shapeB.collisionGroup], e, i, t.shapeA, t.shapeB), i._groupCallbacks[t.shapeA.collisionGroup] && i._groupCallbacks[t.shapeA.collisionGroup].call(i._groupCallbackContext[t.shapeA.collisionGroup], i, e, t.shapeB, t.shapeA)
                }
            },
            beginContactHandler: function(t) {
                t.bodyA && t.bodyB && (this.onBeginContact.dispatch(t.bodyA, t.bodyB, t.shapeA, t.shapeB, t.contactEquations), t.bodyA.parent && t.bodyA.parent.onBeginContact.dispatch(t.bodyB.parent, t.bodyB, t.shapeA, t.shapeB, t.contactEquations), t.bodyB.parent && t.bodyB.parent.onBeginContact.dispatch(t.bodyA.parent, t.bodyA, t.shapeB, t.shapeA, t.contactEquations))
            },
            endContactHandler: function(t) {
                t.bodyA && t.bodyB && (this.onEndContact.dispatch(t.bodyA, t.bodyB, t.shapeA, t.shapeB), t.bodyA.parent && t.bodyA.parent.onEndContact.dispatch(t.bodyB.parent, t.bodyB, t.shapeA, t.shapeB), t.bodyB.parent && t.bodyB.parent.onEndContact.dispatch(t.bodyA.parent, t.bodyA, t.shapeB, t.shapeA))
            },
            setBoundsToWorld: function(t, e, i, s, n) {
                this.setBounds(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, t, e, i, s, n)
            },
            setWorldMaterial: function(t, e, i, s, n) {
                void 0 === e && (e = !0), void 0 === i && (i = !0), void 0 === s && (s = !0), void 0 === n && (n = !0), e && this.walls.left && (this.walls.left.shapes[0].material = t), i && this.walls.right && (this.walls.right.shapes[0].material = t), s && this.walls.top && (this.walls.top.shapes[0].material = t), n && this.walls.bottom && (this.walls.bottom.shapes[0].material = t)
            },
            updateBoundsCollisionGroup: function(t) {
                void 0 === t && (t = !0);
                var e = t ? this.boundsCollisionGroup.mask : this.everythingCollisionGroup.mask;
                this.walls.left && (this.walls.left.shapes[0].collisionGroup = e), this.walls.right && (this.walls.right.shapes[0].collisionGroup = e), this.walls.top && (this.walls.top.shapes[0].collisionGroup = e), this.walls.bottom && (this.walls.bottom.shapes[0].collisionGroup = e), this._boundsOwnGroup = t
            },
            setBounds: function(t, e, i, s, n, a, o, r, h) {
                void 0 === n && (n = this._boundsLeft), void 0 === a && (a = this._boundsRight), void 0 === o && (o = this._boundsTop), void 0 === r && (r = this._boundsBottom), void 0 === h && (h = this._boundsOwnGroup), this.setupWall(n, "left", t, e, 1.5707963267948966, h), this.setupWall(a, "right", t + i, e, -1.5707963267948966, h), this.setupWall(o, "top", t, e, -3.141592653589793, h), this.setupWall(r, "bottom", t, e + s, 0, h), this._boundsLeft = n, this._boundsRight = a, this._boundsTop = o, this._boundsBottom = r, this._boundsOwnGroup = h
            },
            setupWall: function(t, e, i, s, n, a) {
                t ? (this.walls[e] ? this.walls[e].position = [this.pxmi(i), this.pxmi(s)] : (this.walls[e] = new p2.Body({
                    mass: 0,
                    position: [this.pxmi(i), this.pxmi(s)],
                    angle: n
                }), this.walls[e].addShape(new p2.Plane), this.world.addBody(this.walls[e])), a && (this.walls[e].shapes[0].collisionGroup = this.boundsCollisionGroup.mask)) : this.walls[e] && (this.world.removeBody(this.walls[e]), this.walls[e] = null)
            },
            pause: function() {
                this.paused = !0
            },
            resume: function() {
                this.paused = !1
            },
            update: function() {
                this.paused || (this.useElapsedTime ? this.world.step(this.game.time.physicsElapsed) : this.world.step(this.frameRate))
            },
            reset: function() {
                this.world.on("beginContact", this.beginContactHandler, this), this.world.on("endContact", this.endContactHandler, this), this.nothingCollisionGroup = new i.Physics.P2.CollisionGroup(1), this.boundsCollisionGroup = new i.Physics.P2.CollisionGroup(2), this.everythingCollisionGroup = new i.Physics.P2.CollisionGroup(2147483648), this._collisionGroupID = 2, this.setBoundsToWorld(!0, !0, !0, !0, !1)
            },
            clear: function() {
                this.world.time = 0, this.world.fixedStepTime = 0, this.world.solver && this.world.solver.equations.length && this.world.solver.removeAllEquations();
                for (var t = this.world.constraints, e = t.length - 1; e >= 0; e--) this.world.removeConstraint(t[e]);
                for (var i = this.world.bodies, e = i.length - 1; e >= 0; e--) this.world.removeBody(i[e]);
                for (var s = this.world.springs, e = s.length - 1; e >= 0; e--) this.world.removeSpring(s[e]);
                for (var n = this.world.contactMaterials, e = n.length - 1; e >= 0; e--) this.world.removeContactMaterial(n[e]);
                this.world.off("beginContact", this.beginContactHandler, this), this.world.off("endContact", this.endContactHandler, this), this.postBroadphaseCallback = null, this.callbackContext = null, this.impactCallback = null, this.collisionGroups = [], this._toRemove = [], this.boundsCollidesWith = [], this.walls = {
                    left: null,
                    right: null,
                    top: null,
                    bottom: null
                }
            },
            destroy: function() {
                this.clear(), this.game = null
            },
            addBody: function(t) {
                return !t.data.world && (this.world.addBody(t.data), this.onBodyAdded.dispatch(t), !0)
            },
            removeBody: function(t) {
                return t.data.world === this.world && (this.world.removeBody(t.data), this.onBodyRemoved.dispatch(t)), t
            },
            addSpring: function(t) {
                return t instanceof i.Physics.P2.Spring || t instanceof i.Physics.P2.RotationalSpring ? this.world.addSpring(t.data) : this.world.addSpring(t), this.onSpringAdded.dispatch(t), t
            },
            removeSpring: function(t) {
                return t instanceof i.Physics.P2.Spring || t instanceof i.Physics.P2.RotationalSpring ? this.world.removeSpring(t.data) : this.world.removeSpring(t), this.onSpringRemoved.dispatch(t), t
            },
            createDistanceConstraint: function(t, e, s, n, a, o) {
                if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.DistanceConstraint(this, t, e, s, n, a, o))
            },
            createGearConstraint: function(t, e, s, n) {
                if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.GearConstraint(this, t, e, s, n))
            },
            createRevoluteConstraint: function(t, e, s, n, a, o) {
                if (t = this.getBody(t), s = this.getBody(s), t && s) return this.addConstraint(new i.Physics.P2.RevoluteConstraint(this, t, e, s, n, a, o))
            },
            createLockConstraint: function(t, e, s, n, a) {
                if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.LockConstraint(this, t, e, s, n, a))
            },
            createPrismaticConstraint: function(t, e, s, n, a, o, r) {
                if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addConstraint(new i.Physics.P2.PrismaticConstraint(this, t, e, s, n, a, o, r))
            },
            addConstraint: function(t) {
                return this.world.addConstraint(t), this.onConstraintAdded.dispatch(t), t
            },
            removeConstraint: function(t) {
                return this.world.removeConstraint(t), this.onConstraintRemoved.dispatch(t), t
            },
            addContactMaterial: function(t) {
                return this.world.addContactMaterial(t), this.onContactMaterialAdded.dispatch(t), t
            },
            removeContactMaterial: function(t) {
                return this.world.removeContactMaterial(t), this.onContactMaterialRemoved.dispatch(t), t
            },
            getContactMaterial: function(t, e) {
                return this.world.getContactMaterial(t, e)
            },
            setMaterial: function(t, e) {
                for (var i = e.length; i--;) e[i].setMaterial(t)
            },
            createMaterial: function(t, e) {
                t = t || "";
                var s = new i.Physics.P2.Material(t);
                return this.materials.push(s), void 0 !== e && e.setMaterial(s), s
            },
            createContactMaterial: function(t, e, s) {
                void 0 === t && (t = this.createMaterial()), void 0 === e && (e = this.createMaterial());
                var n = new i.Physics.P2.ContactMaterial(t, e, s);
                return this.addContactMaterial(n)
            },
            getBodies: function() {
                for (var t = [], e = this.world.bodies.length; e--;) t.push(this.world.bodies[e].parent);
                return t
            },
            getBody: function(t) {
                return t instanceof p2.Body ? t : t instanceof i.Physics.P2.Body ? t.data : t.body && t.body.type === i.Physics.P2JS ? t.body.data : null
            },
            getSprings: function() {
                for (var t = [], e = this.world.springs.length; e--;) t.push(this.world.springs[e].parent);
                return t
            },
            getConstraints: function() {
                for (var t = [], e = this.world.constraints.length; e--;) t.push(this.world.constraints[e]);
                return t
            },
            hitTest: function(t, e, s, n) {
                void 0 === e && (e = this.world.bodies), void 0 === s && (s = 5), void 0 === n && (n = !1);
                for (var a = [this.pxmi(t.x), this.pxmi(t.y)], o = [], r = e.length; r--;) e[r] instanceof i.Physics.P2.Body && (!n || e[r].data.type !== p2.Body.STATIC) ? o.push(e[r].data) : e[r] instanceof p2.Body && e[r].parent && (!n || e[r].type !== p2.Body.STATIC) ? o.push(e[r]) : e[r] instanceof i.Sprite && e[r].hasOwnProperty("body") && (!n || e[r].body.data.type !== p2.Body.STATIC) && o.push(e[r].body.data);
                return this.world.hitTest(a, o, s)
            },
            toJSON: function() {
                return this.world.toJSON()
            },
            createCollisionGroup: function(t) {
                var e = Math.pow(2, this._collisionGroupID);
                this.walls.left && (this.walls.left.shapes[0].collisionMask = this.walls.left.shapes[0].collisionMask | e), this.walls.right && (this.walls.right.shapes[0].collisionMask = this.walls.right.shapes[0].collisionMask | e), this.walls.top && (this.walls.top.shapes[0].collisionMask = this.walls.top.shapes[0].collisionMask | e), this.walls.bottom && (this.walls.bottom.shapes[0].collisionMask = this.walls.bottom.shapes[0].collisionMask | e), this._collisionGroupID++;
                var s = new i.Physics.P2.CollisionGroup(e);
                return this.collisionGroups.push(s), t && this.setCollisionGroup(t, s), s
            },
            setCollisionGroup: function(t, e) {
                if (t instanceof i.Group)
                    for (var s = 0; s < t.total; s++) t.children[s].body && t.children[s].body.type === i.Physics.P2JS && t.children[s].body.setCollisionGroup(e);
                else t.body.setCollisionGroup(e)
            },
            createSpring: function(t, e, s, n, a, o, r, h, l) {
                if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addSpring(new i.Physics.P2.Spring(this, t, e, s, n, a, o, r, h, l))
            },
            createRotationalSpring: function(t, e, s, n, a) {
                if (t = this.getBody(t), e = this.getBody(e), t && e) return this.addSpring(new i.Physics.P2.RotationalSpring(this, t, e, s, n, a))
            },
            createBody: function(t, e, s, n, a, o) {
                void 0 === n && (n = !1);
                var r = new i.Physics.P2.Body(this.game, null, t, e, s);
                return !(o && !r.addPolygon(a, o)) && (n && this.world.addBody(r.data), r)
            },
            createParticle: function(t, e, s, n, a, o) {
                void 0 === n && (n = !1);
                var r = new i.Physics.P2.Body(this.game, null, t, e, s);
                return !(o && !r.addPolygon(a, o)) && (n && this.world.addBody(r.data), r)
            },
            convertCollisionObjects: function(t, e, i) {
                void 0 === i && (i = !0);
                for (var s = [], n = 0, a = t.collision[e].length; n < a; n++) {
                    var o = t.collision[e][n],
                        r = this.createBody(o.x, o.y, 0, i, {}, o.polyline);
                    r && s.push(r)
                }
                return s
            },
            clearTilemapLayerBodies: function(t, e) {
                e = t.getLayer(e);
                for (var i = t.layers[e].bodies.length; i--;) t.layers[e].bodies[i].destroy();
                t.layers[e].bodies.length = 0
            },
            convertTilemap: function(t, e, i, s) {
                e = t.getLayer(e), void 0 === i && (i = !0), void 0 === s && (s = !0), this.clearTilemapLayerBodies(t, e);
                for (var n = 0, a = 0, o = 0, r = 0, h = t.layers[e].height; r < h; r++) {
                    n = 0;
                    for (var l = 0, c = t.layers[e].width; l < c; l++) {
                        var u = t.layers[e].data[r][l];
                        if (u && u.index > -1 && u.collides)
                            if (s) {
                                var d = t.getTileRight(e, l, r);
                                0 === n && (a = u.x * u.width, o = u.y * u.height, n = u.width), d && d.collides ? n += u.width : ((p = this.createBody(a, o, 0, !1)).addRectangle(n, u.height, n / 2, u.height / 2, 0), i && this.addBody(p), t.layers[e].bodies.push(p), n = 0)
                            } else {
                                var p = this.createBody(u.x * u.width, u.y * u.height, 0, !1);
                                p.addRectangle(u.width, u.height, u.width / 2, u.height / 2, 0), i && this.addBody(p), t.layers[e].bodies.push(p)
                            }
                    }
                }
                return t.layers[e].bodies
            },
            mpx: function(t) {
                return t *= 20
            },
            pxm: function(t) {
                return .05 * t
            },
            mpxi: function(t) {
                return t *= -20
            },
            pxmi: function(t) {
                return -.05 * t
            }
        }, Object.defineProperty(i.Physics.P2.prototype, "friction", {
            get: function() {
                return this.world.defaultContactMaterial.friction
            },
            set: function(t) {
                this.world.defaultContactMaterial.friction = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "restitution", {
            get: function() {
                return this.world.defaultContactMaterial.restitution
            },
            set: function(t) {
                this.world.defaultContactMaterial.restitution = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "contactMaterial", {
            get: function() {
                return this.world.defaultContactMaterial
            },
            set: function(t) {
                this.world.defaultContactMaterial = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "applySpringForces", {
            get: function() {
                return this.world.applySpringForces
            },
            set: function(t) {
                this.world.applySpringForces = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "applyDamping", {
            get: function() {
                return this.world.applyDamping
            },
            set: function(t) {
                this.world.applyDamping = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "applyGravity", {
            get: function() {
                return this.world.applyGravity
            },
            set: function(t) {
                this.world.applyGravity = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "solveConstraints", {
            get: function() {
                return this.world.solveConstraints
            },
            set: function(t) {
                this.world.solveConstraints = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "time", {
            get: function() {
                return this.world.time
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "emitImpactEvent", {
            get: function() {
                return this.world.emitImpactEvent
            },
            set: function(t) {
                this.world.emitImpactEvent = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "sleepMode", {
            get: function() {
                return this.world.sleepMode
            },
            set: function(t) {
                this.world.sleepMode = t
            }
        }), Object.defineProperty(i.Physics.P2.prototype, "total", {
            get: function() {
                return this.world.bodies.length
            }
        }), i.Physics.P2.FixtureList = function(t) {
            Array.isArray(t) || (t = [t]), this.rawList = t, this.init(), this.parse(this.rawList)
        }, i.Physics.P2.FixtureList.prototype = {
            init: function() {
                this.namedFixtures = {}, this.groupedFixtures = [], this.allFixtures = []
            },
            setCategory: function(t, e) {
                this.getFixtures(e).forEach(function(e) {
                    e.collisionGroup = t
                })
            },
            setMask: function(t, e) {
                this.getFixtures(e).forEach(function(e) {
                    e.collisionMask = t
                })
            },
            setSensor: function(t, e) {
                this.getFixtures(e).forEach(function(e) {
                    e.sensor = t
                })
            },
            setMaterial: function(t, e) {
                this.getFixtures(e).forEach(function(e) {
                    e.material = t
                })
            },
            getFixtures: function(t) {
                var e = [];
                if (t) {
                    t instanceof Array || (t = [t]);
                    var i = this;
                    return t.forEach(function(t) {
                        i.namedFixtures[t] && e.push(i.namedFixtures[t])
                    }), this.flatten(e)
                }
                return this.allFixtures
            },
            getFixtureByKey: function(t) {
                return this.namedFixtures[t]
            },
            getGroup: function(t) {
                return this.groupedFixtures[t]
            },
            parse: function() {
                var t, e, i, s;
                i = this.rawList, s = [];
                for (t in i) e = i[t], isNaN(t - 0) ? this.namedFixtures[t] = this.flatten(e) : (this.groupedFixtures[t] = this.groupedFixtures[t] || [], this.groupedFixtures[t] = this.groupedFixtures[t].concat(e)), s.push(this.allFixtures = this.flatten(this.groupedFixtures))
            },
            flatten: function(t) {
                var e, i;
                return e = [], i = arguments.callee, t.forEach(function(t) {
                    return Array.prototype.push.apply(e, Array.isArray(t) ? i(t) : [t])
                }), e
            }
        }, i.Physics.P2.PointProxy = function(t, e) {
            this.world = t, this.destination = e
        }, i.Physics.P2.PointProxy.prototype.constructor = i.Physics.P2.PointProxy, Object.defineProperty(i.Physics.P2.PointProxy.prototype, "x", {
            get: function() {
                return this.world.mpx(this.destination[0])
            },
            set: function(t) {
                this.destination[0] = this.world.pxm(t)
            }
        }), Object.defineProperty(i.Physics.P2.PointProxy.prototype, "y", {
            get: function() {
                return this.world.mpx(this.destination[1])
            },
            set: function(t) {
                this.destination[1] = this.world.pxm(t)
            }
        }), Object.defineProperty(i.Physics.P2.PointProxy.prototype, "mx", {
            get: function() {
                return this.destination[0]
            },
            set: function(t) {
                this.destination[0] = t
            }
        }), Object.defineProperty(i.Physics.P2.PointProxy.prototype, "my", {
            get: function() {
                return this.destination[1]
            },
            set: function(t) {
                this.destination[1] = t
            }
        }), i.Physics.P2.InversePointProxy = function(t, e) {
            this.world = t, this.destination = e
        }, i.Physics.P2.InversePointProxy.prototype.constructor = i.Physics.P2.InversePointProxy, Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "x", {
            get: function() {
                return this.world.mpxi(this.destination[0])
            },
            set: function(t) {
                this.destination[0] = this.world.pxmi(t)
            }
        }), Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "y", {
            get: function() {
                return this.world.mpxi(this.destination[1])
            },
            set: function(t) {
                this.destination[1] = this.world.pxmi(t)
            }
        }), Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "mx", {
            get: function() {
                return this.destination[0]
            },
            set: function(t) {
                this.destination[0] = -t
            }
        }), Object.defineProperty(i.Physics.P2.InversePointProxy.prototype, "my", {
            get: function() {
                return this.destination[1]
            },
            set: function(t) {
                this.destination[1] = -t
            }
        }), i.Physics.P2.Body = function(t, e, s, n, a) {
            e = e || null, s = s || 0, n = n || 0, void 0 === a && (a = 1), this.game = t, this.world = t.physics.p2, this.sprite = e, this.type = i.Physics.P2JS, this.offset = new i.Point, this.data = new p2.Body({
                position: [this.world.pxmi(s), this.world.pxmi(n)],
                mass: a
            }), this.data.parent = this, this.velocity = new i.Physics.P2.InversePointProxy(this.world, this.data.velocity), this.force = new i.Physics.P2.InversePointProxy(this.world, this.data.force), this.gravity = new i.Point, this.onBeginContact = new i.Signal, this.onEndContact = new i.Signal, this.collidesWith = [], this.removeNextStep = !1, this.debugBody = null, this.dirty = !1, this._collideWorldBounds = !0, this._bodyCallbacks = {}, this._bodyCallbackContext = {}, this._groupCallbacks = {}, this._groupCallbackContext = {}, this._reset = !1, e && (this.setRectangleFromSprite(e), e.exists && this.game.physics.p2.addBody(this))
        }, i.Physics.P2.Body.prototype = {
            createBodyCallback: function(t, e, i) {
                var s = -1;
                t.id ? s = t.id : t.body && (s = t.body.id), s > -1 && (null === e ? (delete this._bodyCallbacks[s], delete this._bodyCallbackContext[s]) : (this._bodyCallbacks[s] = e, this._bodyCallbackContext[s] = i))
            },
            createGroupCallback: function(t, e, i) {
                null === e ? (delete this._groupCallbacks[t.mask], delete this._groupCallbackContext[t.mask]) : (this._groupCallbacks[t.mask] = e, this._groupCallbackContext[t.mask] = i)
            },
            getCollisionMask: function() {
                var t = 0;
                this._collideWorldBounds && (t = this.game.physics.p2.boundsCollisionGroup.mask);
                for (var e = 0; e < this.collidesWith.length; e++) t |= this.collidesWith[e].mask;
                return t
            },
            updateCollisionMask: function(t) {
                var e = this.getCollisionMask();
                if (void 0 === t)
                    for (var i = this.data.shapes.length - 1; i >= 0; i--) this.data.shapes[i].collisionMask = e;
                else t.collisionMask = e
            },
            setCollisionGroup: function(t, e) {
                var i = this.getCollisionMask();
                if (void 0 === e)
                    for (var s = this.data.shapes.length - 1; s >= 0; s--) this.data.shapes[s].collisionGroup = t.mask, this.data.shapes[s].collisionMask = i;
                else e.collisionGroup = t.mask, e.collisionMask = i
            },
            clearCollision: function(t, e, i) {
                if (void 0 === t && (t = !0), void 0 === e && (e = !0), void 0 === i)
                    for (var s = this.data.shapes.length - 1; s >= 0; s--) t && (this.data.shapes[s].collisionGroup = null), e && (this.data.shapes[s].collisionMask = null);
                else t && (i.collisionGroup = null), e && (i.collisionMask = null);
                t && (this.collidesWith.length = 0)
            },
            removeCollisionGroup: function(t, e, i) {
                void 0 === e && (e = !0);
                var s;
                if (Array.isArray(t))
                    for (a = 0; a < t.length; a++)(s = this.collidesWith.indexOf(t[a])) > -1 && (this.collidesWith.splice(s, 1), e && (delete this._groupCallbacks[t.mask], delete this._groupCallbackContext[t.mask]));
                else(s = this.collidesWith.indexOf(t)) > -1 && (this.collidesWith.splice(s, 1), e && (delete this._groupCallbacks[t.mask], delete this._groupCallbackContext[t.mask]));
                var n = this.getCollisionMask();
                if (void 0 === i)
                    for (var a = this.data.shapes.length - 1; a >= 0; a--) this.data.shapes[a].collisionMask = n;
                else i.collisionMask = n
            },
            collides: function(t, e, i, s) {
                if (Array.isArray(t))
                    for (a = 0; a < t.length; a++) - 1 === this.collidesWith.indexOf(t[a]) && (this.collidesWith.push(t[a]), e && this.createGroupCallback(t[a], e, i));
                else -1 === this.collidesWith.indexOf(t) && (this.collidesWith.push(t), e && this.createGroupCallback(t, e, i));
                var n = this.getCollisionMask();
                if (void 0 === s)
                    for (var a = this.data.shapes.length - 1; a >= 0; a--) this.data.shapes[a].collisionMask = n;
                else s.collisionMask = n
            },
            adjustCenterOfMass: function() {
                this.data.adjustCenterOfMass(), this.shapeChanged()
            },
            getVelocityAtPoint: function(t, e) {
                return this.data.getVelocityAtPoint(t, e)
            },
            applyDamping: function(t) {
                this.data.applyDamping(t)
            },
            applyImpulse: function(t, e, i) {
                this.data.applyImpulse(t, [this.world.pxmi(e), this.world.pxmi(i)])
            },
            applyImpulseLocal: function(t, e, i) {
                this.data.applyImpulseLocal(t, [this.world.pxmi(e), this.world.pxmi(i)])
            },
            applyForce: function(t, e, i) {
                this.data.applyForce(t, [this.world.pxmi(e), this.world.pxmi(i)])
            },
            setZeroForce: function() {
                this.data.setZeroForce()
            },
            setZeroRotation: function() {
                this.data.angularVelocity = 0
            },
            setZeroVelocity: function() {
                this.data.velocity[0] = 0, this.data.velocity[1] = 0
            },
            setZeroDamping: function() {
                this.data.damping = 0, this.data.angularDamping = 0
            },
            toLocalFrame: function(t, e) {
                return this.data.toLocalFrame(t, e)
            },
            toWorldFrame: function(t, e) {
                return this.data.toWorldFrame(t, e)
            },
            rotateLeft: function(t) {
                this.data.angularVelocity = this.world.pxm(-t)
            },
            rotateRight: function(t) {
                this.data.angularVelocity = this.world.pxm(t)
            },
            moveForward: function(t) {
                var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.velocity[0] = e * Math.cos(i), this.data.velocity[1] = e * Math.sin(i)
            },
            moveBackward: function(t) {
                var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.velocity[0] = -e * Math.cos(i), this.data.velocity[1] = -e * Math.sin(i)
            },
            thrust: function(t) {
                var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.force[0] += e * Math.cos(i), this.data.force[1] += e * Math.sin(i)
            },
            thrustLeft: function(t) {
                var e = this.world.pxmi(-t),
                    i = this.data.angle;
                this.data.force[0] += e * Math.cos(i), this.data.force[1] += e * Math.sin(i)
            },
            thrustRight: function(t) {
                var e = this.world.pxmi(-t),
                    i = this.data.angle;
                this.data.force[0] -= e * Math.cos(i), this.data.force[1] -= e * Math.sin(i)
            },
            reverse: function(t) {
                var e = this.world.pxmi(-t),
                    i = this.data.angle + Math.PI / 2;
                this.data.force[0] -= e * Math.cos(i), this.data.force[1] -= e * Math.sin(i)
            },
            moveLeft: function(t) {
                this.data.velocity[0] = this.world.pxmi(-t)
            },
            moveRight: function(t) {
                this.data.velocity[0] = this.world.pxmi(t)
            },
            moveUp: function(t) {
                this.data.velocity[1] = this.world.pxmi(-t)
            },
            moveDown: function(t) {
                this.data.velocity[1] = this.world.pxmi(t)
            },
            preUpdate: function() {
                this.dirty = !0, this.removeNextStep && (this.removeFromWorld(), this.removeNextStep = !1)
            },
            postUpdate: function() {
                this.sprite.x = this.world.mpxi(this.data.position[0]) + this.offset.x, this.sprite.y = this.world.mpxi(this.data.position[1]) + this.offset.y, this.fixedRotation || (this.sprite.rotation = this.data.angle), this.debugBody && this.debugBody.updateSpriteTransform(), this.dirty = !1
            },
            reset: function(t, e, i, s) {
                void 0 === i && (i = !1), void 0 === s && (s = !1), this.setZeroForce(), this.setZeroVelocity(), this.setZeroRotation(), i && this.setZeroDamping(), s && (this.mass = 1), this.x = t, this.y = e
            },
            addToWorld: function() {
                if (this.game.physics.p2._toRemove)
                    for (var t = 0; t < this.game.physics.p2._toRemove.length; t++) this.game.physics.p2._toRemove[t] === this && this.game.physics.p2._toRemove.splice(t, 1);
                this.data.world !== this.game.physics.p2.world && this.game.physics.p2.addBody(this)
            },
            removeFromWorld: function() {
                this.data.world === this.game.physics.p2.world && this.game.physics.p2.removeBodyNextStep(this)
            },
            destroy: function() {
                this.removeFromWorld(), this.clearShapes(), this._bodyCallbacks = {}, this._bodyCallbackContext = {}, this._groupCallbacks = {}, this._groupCallbackContext = {}, this.debugBody && this.debugBody.destroy(!0, !0), this.debugBody = null, this.sprite && (this.sprite.body = null, this.sprite = null)
            },
            clearShapes: function() {
                for (var t = this.data.shapes.length; t--;) this.data.removeShape(this.data.shapes[t]);
                this.shapeChanged()
            },
            addShape: function(t, e, i, s) {
                return void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === s && (s = 0), this.data.addShape(t, [this.world.pxmi(e), this.world.pxmi(i)], s), this.shapeChanged(), t
            },
            addCircle: function(t, e, i, s) {
                var n = new p2.Circle({
                    radius: this.world.pxm(t)
                });
                return this.addShape(n, e, i, s)
            },
            addRectangle: function(t, e, i, s, n) {
                var a = new p2.Box({
                    width: this.world.pxm(t),
                    height: this.world.pxm(e)
                });
                return this.addShape(a, i, s, n)
            },
            addPlane: function(t, e, i) {
                var s = new p2.Plane;
                return this.addShape(s, t, e, i)
            },
            addParticle: function(t, e, i) {
                var s = new p2.Particle;
                return this.addShape(s, t, e, i)
            },
            addLine: function(t, e, i, s) {
                var n = new p2.Line({
                    length: this.world.pxm(t)
                });
                return this.addShape(n, e, i, s)
            },
            addCapsule: function(t, e, i, s, n) {
                var a = new p2.Capsule({
                    length: this.world.pxm(t),
                    radius: this.world.pxm(e)
                });
                return this.addShape(a, i, s, n)
            },
            addPolygon: function(t, e) {
                t = t || {}, Array.isArray(e) || (e = Array.prototype.slice.call(arguments, 1));
                var i = [];
                if (1 === e.length && Array.isArray(e[0])) i = e[0].slice(0);
                else if (Array.isArray(e[0])) i = e.slice();
                else if ("number" == typeof e[0])
                    for (var s = 0, n = e.length; s < n; s += 2) i.push([e[s], e[s + 1]]);
                var a = i.length - 1;
                i[a][0] === i[0][0] && i[a][1] === i[0][1] && i.pop();
                for (var o = 0; o < i.length; o++) i[o][0] = this.world.pxmi(i[o][0]), i[o][1] = this.world.pxmi(i[o][1]);
                var r = this.data.fromPolygon(i, t);
                return this.shapeChanged(), r
            },
            removeShape: function(t) {
                var e = this.data.removeShape(t);
                return this.shapeChanged(), e
            },
            setCircle: function(t, e, i, s) {
                return this.clearShapes(), this.addCircle(t, e, i, s)
            },
            setRectangle: function(t, e, i, s, n) {
                return void 0 === t && (t = 16), void 0 === e && (e = 16), this.clearShapes(), this.addRectangle(t, e, i, s, n)
            },
            setRectangleFromSprite: function(t) {
                return void 0 === t && (t = this.sprite), this.clearShapes(), this.addRectangle(t.width, t.height, 0, 0, t.rotation)
            },
            setMaterial: function(t, e) {
                if (void 0 === e)
                    for (var i = this.data.shapes.length - 1; i >= 0; i--) this.data.shapes[i].material = t;
                else e.material = t
            },
            shapeChanged: function() {
                this.debugBody && this.debugBody.draw()
            },
            addPhaserPolygon: function(t, e) {
                for (var i = this.game.cache.getPhysicsData(t, e), s = [], n = 0; n < i.length; n++) {
                    var a = i[n],
                        o = this.addFixture(a);
                    s[a.filter.group] = s[a.filter.group] || [], s[a.filter.group] = s[a.filter.group].concat(o), a.fixtureKey && (s[a.fixtureKey] = o)
                }
                return this.data.aabbNeedsUpdate = !0, this.shapeChanged(), s
            },
            addFixture: function(t) {
                var e = [];
                if (t.circle) {
                    (l = new p2.Circle({
                        radius: this.world.pxm(t.circle.radius)
                    })).collisionGroup = t.filter.categoryBits, l.collisionMask = t.filter.maskBits, l.sensor = t.isSensor;
                    var i = p2.vec2.create();
                    i[0] = this.world.pxmi(t.circle.position[0] - this.sprite.width / 2), i[1] = this.world.pxmi(t.circle.position[1] - this.sprite.height / 2), this.data.addShape(l, i), e.push(l)
                } else
                    for (var s = t.polygons, n = p2.vec2.create(), a = 0; a < s.length; a++) {
                        for (var o = s[a], r = [], h = 0; h < o.length; h += 2) r.push([this.world.pxmi(o[h]), this.world.pxmi(o[h + 1])]);
                        for (var l = new p2.Convex({
                            vertices: r
                        }), c = 0; c !== l.vertices.length; c++) {
                            var u = l.vertices[c];
                            p2.vec2.sub(u, u, l.centerOfMass)
                        }
                        p2.vec2.scale(n, l.centerOfMass, 1), n[0] -= this.world.pxmi(this.sprite.width / 2), n[1] -= this.world.pxmi(this.sprite.height / 2), l.updateTriangles(), l.updateCenterOfMass(), l.updateBoundingRadius(), l.collisionGroup = t.filter.categoryBits, l.collisionMask = t.filter.maskBits, l.sensor = t.isSensor, this.data.addShape(l, n), e.push(l)
                    }
                return e
            },
            loadPolygon: function(t, e) {
                if (null === t) i = e;
                else var i = this.game.cache.getPhysicsData(t, e);
                for (var s = p2.vec2.create(), n = 0; n < i.length; n++) {
                    for (var a = [], o = 0; o < i[n].shape.length; o += 2) a.push([this.world.pxmi(i[n].shape[o]), this.world.pxmi(i[n].shape[o + 1])]);
                    for (var r = new p2.Convex({
                        vertices: a
                    }), h = 0; h !== r.vertices.length; h++) {
                        var l = r.vertices[h];
                        p2.vec2.sub(l, l, r.centerOfMass)
                    }
                    p2.vec2.scale(s, r.centerOfMass, 1), s[0] -= this.world.pxmi(this.sprite.width / 2), s[1] -= this.world.pxmi(this.sprite.height / 2), r.updateTriangles(), r.updateCenterOfMass(), r.updateBoundingRadius(), this.data.addShape(r, s)
                }
                return this.data.aabbNeedsUpdate = !0, this.shapeChanged(), !0
            }
        }, i.Physics.P2.Body.prototype.constructor = i.Physics.P2.Body, i.Physics.P2.Body.DYNAMIC = 1, i.Physics.P2.Body.STATIC = 2, i.Physics.P2.Body.KINEMATIC = 4, Object.defineProperty(i.Physics.P2.Body.prototype, "static", {
            get: function() {
                return this.data.type === i.Physics.P2.Body.STATIC
            },
            set: function(t) {
                t && this.data.type !== i.Physics.P2.Body.STATIC ? (this.data.type = i.Physics.P2.Body.STATIC, this.mass = 0) : t || this.data.type !== i.Physics.P2.Body.STATIC || (this.data.type = i.Physics.P2.Body.DYNAMIC, this.mass = 1)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "dynamic", {
            get: function() {
                return this.data.type === i.Physics.P2.Body.DYNAMIC
            },
            set: function(t) {
                t && this.data.type !== i.Physics.P2.Body.DYNAMIC ? (this.data.type = i.Physics.P2.Body.DYNAMIC, this.mass = 1) : t || this.data.type !== i.Physics.P2.Body.DYNAMIC || (this.data.type = i.Physics.P2.Body.STATIC, this.mass = 0)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "kinematic", {
            get: function() {
                return this.data.type === i.Physics.P2.Body.KINEMATIC
            },
            set: function(t) {
                t && this.data.type !== i.Physics.P2.Body.KINEMATIC ? (this.data.type = i.Physics.P2.Body.KINEMATIC, this.mass = 4) : t || this.data.type !== i.Physics.P2.Body.KINEMATIC || (this.data.type = i.Physics.P2.Body.STATIC, this.mass = 0)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "allowSleep", {
            get: function() {
                return this.data.allowSleep
            },
            set: function(t) {
                t !== this.data.allowSleep && (this.data.allowSleep = t)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "angle", {
            get: function() {
                return i.Math.wrapAngle(i.Math.radToDeg(this.data.angle))
            },
            set: function(t) {
                this.data.angle = i.Math.degToRad(i.Math.wrapAngle(t))
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "angularDamping", {
            get: function() {
                return this.data.angularDamping
            },
            set: function(t) {
                this.data.angularDamping = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "angularForce", {
            get: function() {
                return this.data.angularForce
            },
            set: function(t) {
                this.data.angularForce = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "angularVelocity", {
            get: function() {
                return this.data.angularVelocity
            },
            set: function(t) {
                this.data.angularVelocity = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "damping", {
            get: function() {
                return this.data.damping
            },
            set: function(t) {
                this.data.damping = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "fixedRotation", {
            get: function() {
                return this.data.fixedRotation
            },
            set: function(t) {
                t !== this.data.fixedRotation && (this.data.fixedRotation = t)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "inertia", {
            get: function() {
                return this.data.inertia
            },
            set: function(t) {
                this.data.inertia = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "mass", {
            get: function() {
                return this.data.mass
            },
            set: function(t) {
                t !== this.data.mass && (this.data.mass = t, this.data.updateMassProperties())
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "motionState", {
            get: function() {
                return this.data.type
            },
            set: function(t) {
                t !== this.data.type && (this.data.type = t)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "rotation", {
            get: function() {
                return this.data.angle
            },
            set: function(t) {
                this.data.angle = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "sleepSpeedLimit", {
            get: function() {
                return this.data.sleepSpeedLimit
            },
            set: function(t) {
                this.data.sleepSpeedLimit = t
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "x", {
            get: function() {
                return this.world.mpxi(this.data.position[0])
            },
            set: function(t) {
                this.data.position[0] = this.world.pxmi(t)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "y", {
            get: function() {
                return this.world.mpxi(this.data.position[1])
            },
            set: function(t) {
                this.data.position[1] = this.world.pxmi(t)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "id", {
            get: function() {
                return this.data.id
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "debug", {
            get: function() {
                return null !== this.debugBody
            },
            set: function(t) {
                t && !this.debugBody ? this.debugBody = new i.Physics.P2.BodyDebug(this.game, this.data) : !t && this.debugBody && (this.debugBody.destroy(), this.debugBody = null)
            }
        }), Object.defineProperty(i.Physics.P2.Body.prototype, "collideWorldBounds", {
            get: function() {
                return this._collideWorldBounds
            },
            set: function(t) {
                t && !this._collideWorldBounds ? (this._collideWorldBounds = !0, this.updateCollisionMask()) : !t && this._collideWorldBounds && (this._collideWorldBounds = !1, this.updateCollisionMask())
            }
        }), i.Physics.P2.BodyDebug = function(t, e, s) {
            i.Group.call(this, t);
            var n = {
                pixelsPerLengthUnit: t.physics.p2.mpx(1),
                debugPolygons: !1,
                lineWidth: 1,
                alpha: .5
            };
            this.settings = i.Utils.extend(n, s), this.ppu = this.settings.pixelsPerLengthUnit, this.ppu = -1 * this.ppu, this.body = e, this.canvas = new i.Graphics(t), this.canvas.alpha = this.settings.alpha, this.add(this.canvas), this.draw(), this.updateSpriteTransform()
        }, i.Physics.P2.BodyDebug.prototype = Object.create(i.Group.prototype), i.Physics.P2.BodyDebug.prototype.constructor = i.Physics.P2.BodyDebug, i.Utils.extend(i.Physics.P2.BodyDebug.prototype, {
            updateSpriteTransform: function() {
                this.position.x = this.body.position[0] * this.ppu, this.position.y = this.body.position[1] * this.ppu, this.rotation = this.body.angle
            },
            draw: function() {
                var t, e, i, s, n, a, o, r, h, l, c, u, d, p;
                if (o = this.body, (h = this.canvas).clear(), i = parseInt(this.randomPastelHex(), 16), 16711680, a = this.lineWidth, o instanceof p2.Body && o.shapes.length) {
                    var m = o.shapes.length;
                    for (s = 0; s !== m;) {
                        if (e = o.shapes[s], r = e.position || 0, t = e.angle || 0, e instanceof p2.Circle) this.drawCircle(h, r[0] * this.ppu, r[1] * this.ppu, t, e.radius * this.ppu, i, a);
                        else if (e instanceof p2.Capsule) this.drawCapsule(h, r[0] * this.ppu, r[1] * this.ppu, t, e.length * this.ppu, e.radius * this.ppu, 16711680, i, a);
                        else if (e instanceof p2.Plane) this.drawPlane(h, r[0] * this.ppu, -r[1] * this.ppu, i, 16711680, 5 * a, 10 * a, 10 * a, 100 * this.ppu, t);
                        else if (e instanceof p2.Line) this.drawLine(h, e.length * this.ppu, 16711680, a);
                        else if (e instanceof p2.Box) this.drawRectangle(h, r[0] * this.ppu, r[1] * this.ppu, t, e.width * this.ppu, e.height * this.ppu, 16711680, i, a);
                        else if (e instanceof p2.Convex) {
                            for (c = [], u = p2.vec2.create(), n = d = 0, p = e.vertices.length; 0 <= p ? d < p : d > p; n = 0 <= p ? ++d : --d) l = e.vertices[n], p2.vec2.rotate(u, l, t), c.push([(u[0] + r[0]) * this.ppu, -(u[1] + r[1]) * this.ppu]);
                            this.drawConvex(h, c, e.triangles, 16711680, i, a, this.settings.debugPolygons, [r[0] * this.ppu, -r[1] * this.ppu])
                        }
                        s++
                    }
                }
            },
            drawRectangle: function(t, e, i, s, n, a, o, r, h) {
                void 0 === h && (h = 1), void 0 === o && (o = 0), t.lineStyle(h, o, 1), t.beginFill(r), t.drawRect(e - n / 2, i - a / 2, n, a)
            },
            drawCircle: function(t, e, i, s, n, a, o) {
                void 0 === o && (o = 1), void 0 === a && (a = 16777215), t.lineStyle(o, 0, 1), t.beginFill(a, 1), t.drawCircle(e, i, 2 * -n), t.endFill(), t.moveTo(e, i), t.lineTo(e + n * Math.cos(-s), i + n * Math.sin(-s))
            },
            drawLine: function(t, e, i, s) {
                void 0 === s && (s = 1), void 0 === i && (i = 0), t.lineStyle(5 * s, i, 1), t.moveTo(-e / 2, 0), t.lineTo(e / 2, 0)
            },
            drawConvex: function(t, e, i, s, n, a, o, r) {
                var h, l, c, u, d, p, m, g, f, _, y;
                if (void 0 === a && (a = 1), void 0 === s && (s = 0), o) {
                    for (h = [16711680, 65280, 255], l = 0; l !== e.length + 1;) u = e[l % e.length], d = e[(l + 1) % e.length], m = u[0], _ = u[1], g = d[0], y = d[1], t.lineStyle(a, h[l % h.length], 1), t.moveTo(m, -_), t.lineTo(g, -y), t.drawCircle(m, -_, 2 * a), l++;
                    return t.lineStyle(a, 0, 1), t.drawCircle(r[0], r[1], 2 * a)
                }
                for (t.lineStyle(a, s, 1), t.beginFill(n), l = 0; l !== e.length;) p = (c = e[l])[0], f = c[1], 0 === l ? t.moveTo(p, -f) : t.lineTo(p, -f), l++;
                if (t.endFill(), e.length > 2) return t.moveTo(e[e.length - 1][0], -e[e.length - 1][1]), t.lineTo(e[0][0], -e[0][1])
            },
            drawPath: function(t, e, i, s, n) {
                var a, o, r, h, l, c, u, d, p, m, g;
                for (void 0 === n && (n = 1), void 0 === i && (i = 0), t.lineStyle(n, i, 1), "number" == typeof s && t.beginFill(s), o = null, r = null, a = 0; a < e.length;) m = (p = e[a])[0], g = p[1], m === o && g === r || (0 === a ? t.moveTo(m, g) : (h = o, l = r, c = m, u = g, d = e[(a + 1) % e.length][0], 0 !== (c - h) * (e[(a + 1) % e.length][1] - l) - (d - h) * (u - l) && t.lineTo(m, g)), o = m, r = g), a++;
                "number" == typeof s && t.endFill(), e.length > 2 && "number" == typeof s && (t.moveTo(e[e.length - 1][0], e[e.length - 1][1]), t.lineTo(e[0][0], e[0][1]))
            },
            drawPlane: function(t, e, i, s, n, a, o, r, h, l) {
                var c, u;
                void 0 === a && (a = 1), void 0 === s && (s = 16777215), t.lineStyle(a, n, 11), t.beginFill(s), t.moveTo(e, -i), c = e + Math.cos(l) * this.game.width, u = i + Math.sin(l) * this.game.height, t.lineTo(c, -u), t.moveTo(e, -i), c = e + Math.cos(l) * -this.game.width, u = i + Math.sin(l) * -this.game.height, t.lineTo(c, -u)
            },
            drawCapsule: function(t, e, i, s, n, a, o, r, h) {
                void 0 === h && (h = 1), void 0 === o && (o = 0), t.lineStyle(h, o, 1);
                var l = Math.cos(s),
                    c = Math.sin(s);
                t.beginFill(r, 1), t.drawCircle(-n / 2 * l + e, -n / 2 * c + i, 2 * -a), t.drawCircle(n / 2 * l + e, n / 2 * c + i, 2 * -a), t.endFill(), t.lineStyle(h, o, 0), t.beginFill(r, 1), t.moveTo(-n / 2 * l + a * c + e, -n / 2 * c + a * l + i), t.lineTo(n / 2 * l + a * c + e, n / 2 * c + a * l + i), t.lineTo(n / 2 * l - a * c + e, n / 2 * c - a * l + i), t.lineTo(-n / 2 * l - a * c + e, -n / 2 * c - a * l + i), t.endFill(), t.lineStyle(h, o, 1), t.moveTo(-n / 2 * l + a * c + e, -n / 2 * c + a * l + i), t.lineTo(n / 2 * l + a * c + e, n / 2 * c + a * l + i), t.moveTo(-n / 2 * l - a * c + e, -n / 2 * c - a * l + i), t.lineTo(n / 2 * l - a * c + e, n / 2 * c - a * l + i)
            },
            randomPastelHex: function() {
                var t, e, i, s;
                return i = [255, 255, 255], s = Math.floor(256 * Math.random()), e = Math.floor(256 * Math.random()), t = Math.floor(256 * Math.random()), s = Math.floor((s + 3 * i[0]) / 4), e = Math.floor((e + 3 * i[1]) / 4), t = Math.floor((t + 3 * i[2]) / 4), this.rgbToHex(s, e, t)
            },
            rgbToHex: function(t, e, i) {
                return this.componentToHex(t) + this.componentToHex(e) + this.componentToHex(i)
            },
            componentToHex: function(t) {
                var e;
                return 2 === (e = t.toString(16)).length ? e : e + "0"
            }
        }), i.Physics.P2.Spring = function(t, e, i, s, n, a, o, r, h, l) {
            this.game = t.game, this.world = t, void 0 === s && (s = 1), void 0 === n && (n = 100), void 0 === a && (a = 1);
            var c = {
                restLength: s = t.pxm(s),
                stiffness: n,
                damping: a
            };
            void 0 !== o && null !== o && (c.worldAnchorA = [t.pxm(o[0]), t.pxm(o[1])]), void 0 !== r && null !== r && (c.worldAnchorB = [t.pxm(r[0]), t.pxm(r[1])]), void 0 !== h && null !== h && (c.localAnchorA = [t.pxm(h[0]), t.pxm(h[1])]), void 0 !== l && null !== l && (c.localAnchorB = [t.pxm(l[0]), t.pxm(l[1])]), this.data = new p2.LinearSpring(e, i, c), this.data.parent = this
        }, i.Physics.P2.Spring.prototype.constructor = i.Physics.P2.Spring, i.Physics.P2.RotationalSpring = function(t, e, i, s, n, a) {
            this.game = t.game, this.world = t, void 0 === s && (s = null), void 0 === n && (n = 100), void 0 === a && (a = 1), s && (s = t.pxm(s));
            var o = {
                restAngle: s,
                stiffness: n,
                damping: a
            };
            this.data = new p2.RotationalSpring(e, i, o), this.data.parent = this
        }, i.Physics.P2.Spring.prototype.constructor = i.Physics.P2.Spring, i.Physics.P2.Material = function(t) {
            this.name = t, p2.Material.call(this)
        }, i.Physics.P2.Material.prototype = Object.create(p2.Material.prototype), i.Physics.P2.Material.prototype.constructor = i.Physics.P2.Material, i.Physics.P2.ContactMaterial = function(t, e, i) {
            p2.ContactMaterial.call(this, t, e, i)
        }, i.Physics.P2.ContactMaterial.prototype = Object.create(p2.ContactMaterial.prototype), i.Physics.P2.ContactMaterial.prototype.constructor = i.Physics.P2.ContactMaterial, i.Physics.P2.CollisionGroup = function(t) {
            this.mask = t
        }, i.Physics.P2.DistanceConstraint = function(t, e, i, s, n, a, o) {
            void 0 === s && (s = 100), void 0 === n && (n = [0, 0]), void 0 === a && (a = [0, 0]), void 0 === o && (o = Number.MAX_VALUE), this.game = t.game, this.world = t;
            var r = {
                distance: s = t.pxm(s),
                localAnchorA: n = [t.pxmi(n[0]), t.pxmi(n[1])],
                localAnchorB: a = [t.pxmi(a[0]), t.pxmi(a[1])],
                maxForce: o
            };
            p2.DistanceConstraint.call(this, e, i, r)
        }, i.Physics.P2.DistanceConstraint.prototype = Object.create(p2.DistanceConstraint.prototype), i.Physics.P2.DistanceConstraint.prototype.constructor = i.Physics.P2.DistanceConstraint, i.Physics.P2.GearConstraint = function(t, e, i, s, n) {
            void 0 === s && (s = 0), void 0 === n && (n = 1), this.game = t.game, this.world = t;
            var a = {
                angle: s,
                ratio: n
            };
            p2.GearConstraint.call(this, e, i, a)
        }, i.Physics.P2.GearConstraint.prototype = Object.create(p2.GearConstraint.prototype), i.Physics.P2.GearConstraint.prototype.constructor = i.Physics.P2.GearConstraint, i.Physics.P2.LockConstraint = function(t, e, i, s, n, a) {
            void 0 === s && (s = [0, 0]), void 0 === n && (n = 0), void 0 === a && (a = Number.MAX_VALUE), this.game = t.game, this.world = t;
            var o = {
                localOffsetB: s = [t.pxm(s[0]), t.pxm(s[1])],
                localAngleB: n,
                maxForce: a
            };
            p2.LockConstraint.call(this, e, i, o)
        }, i.Physics.P2.LockConstraint.prototype = Object.create(p2.LockConstraint.prototype), i.Physics.P2.LockConstraint.prototype.constructor = i.Physics.P2.LockConstraint, i.Physics.P2.PrismaticConstraint = function(t, e, i, s, n, a, o, r) {
            void 0 === s && (s = !0), void 0 === n && (n = [0, 0]), void 0 === a && (a = [0, 0]), void 0 === o && (o = [0, 0]), void 0 === r && (r = Number.MAX_VALUE), this.game = t.game, this.world = t;
            var h = {
                localAnchorA: n = [t.pxmi(n[0]), t.pxmi(n[1])],
                localAnchorB: a = [t.pxmi(a[0]), t.pxmi(a[1])],
                localAxisA: o,
                maxForce: r,
                disableRotationalLock: !s
            };
            p2.PrismaticConstraint.call(this, e, i, h)
        }, i.Physics.P2.PrismaticConstraint.prototype = Object.create(p2.PrismaticConstraint.prototype), i.Physics.P2.PrismaticConstraint.prototype.constructor = i.Physics.P2.PrismaticConstraint, i.Physics.P2.RevoluteConstraint = function(t, e, i, s, n, a, o) {
            void 0 === a && (a = Number.MAX_VALUE), void 0 === o && (o = null), this.game = t.game, this.world = t, i = [t.pxmi(i[0]), t.pxmi(i[1])], n = [t.pxmi(n[0]), t.pxmi(n[1])], o && (o = [t.pxmi(o[0]), t.pxmi(o[1])]);
            var r = {
                worldPivot: o,
                localPivotA: i,
                localPivotB: n,
                maxForce: a
            };
            p2.RevoluteConstraint.call(this, e, s, r)
        }, i.Physics.P2.RevoluteConstraint.prototype = Object.create(p2.RevoluteConstraint.prototype), i.Physics.P2.RevoluteConstraint.prototype.constructor = i.Physics.P2.RevoluteConstraint, i.ImageCollection = function(t, e, i, s, n, a, o) {
            (void 0 === i || i <= 0) && (i = 32), (void 0 === s || s <= 0) && (s = 32), void 0 === n && (n = 0), void 0 === a && (a = 0), this.name = t, this.firstgid = 0 | e, this.imageWidth = 0 | i, this.imageHeight = 0 | s, this.imageMargin = 0 | n, this.imageSpacing = 0 | a, this.properties = o || {}, this.images = [], this.total = 0
        }, i.ImageCollection.prototype = {
            containsImageIndex: function(t) {
                return t >= this.firstgid && t < this.firstgid + this.total
            },
            addImage: function(t, e) {
                this.images.push({
                    gid: t,
                    image: e
                }), this.total++
            }
        }, i.ImageCollection.prototype.constructor = i.ImageCollection, i.Tile = function(t, e, i, s, n, a) {
            this.layer = t, this.index = e, this.x = i, this.y = s, this.rotation = 0, this.flipped = !1, this.worldX = i * n, this.worldY = s * a, this.width = n, this.height = a, this.centerX = Math.abs(n / 2), this.centerY = Math.abs(a / 2), this.alpha = 1, this.properties = {}, this.scanned = !1, this.faceTop = !1, this.faceBottom = !1, this.faceLeft = !1, this.faceRight = !1, this.collideLeft = !1, this.collideRight = !1, this.collideUp = !1, this.collideDown = !1, this.collisionCallback = null, this.collisionCallbackContext = this
        }, i.Tile.prototype = {
            containsPoint: function(t, e) {
                return !(t < this.worldX || e < this.worldY || t > this.right || e > this.bottom)
            },
            intersects: function(t, e, i, s) {
                return !(i <= this.worldX) && (!(s <= this.worldY) && (!(t >= this.worldX + this.width) && !(e >= this.worldY + this.height)))
            },
            setCollisionCallback: function(t, e) {
                this.collisionCallback = t, this.collisionCallbackContext = e
            },
            destroy: function() {
                this.collisionCallback = null, this.collisionCallbackContext = null, this.properties = null
            },
            setCollision: function(t, e, i, s) {
                this.collideLeft = t, this.collideRight = e, this.collideUp = i, this.collideDown = s, this.faceLeft = t, this.faceRight = e, this.faceTop = i, this.faceBottom = s
            },
            resetCollision: function() {
                this.collideLeft = !1, this.collideRight = !1, this.collideUp = !1, this.collideDown = !1, this.faceTop = !1, this.faceBottom = !1, this.faceLeft = !1, this.faceRight = !1
            },
            isInteresting: function(t, e) {
                return t && e ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.faceTop || this.faceBottom || this.faceLeft || this.faceRight || this.collisionCallback : t ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown : !!e && (this.faceTop || this.faceBottom || this.faceLeft || this.faceRight)
            },
            copy: function(t) {
                this.index = t.index, this.alpha = t.alpha, this.properties = t.properties, this.collideUp = t.collideUp, this.collideDown = t.collideDown, this.collideLeft = t.collideLeft, this.collideRight = t.collideRight, this.collisionCallback = t.collisionCallback, this.collisionCallbackContext = t.collisionCallbackContext
            }
        }, i.Tile.prototype.constructor = i.Tile, Object.defineProperty(i.Tile.prototype, "collides", {
            get: function() {
                return this.collideLeft || this.collideRight || this.collideUp || this.collideDown
            }
        }), Object.defineProperty(i.Tile.prototype, "canCollide", {
            get: function() {
                return this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.collisionCallback
            }
        }), Object.defineProperty(i.Tile.prototype, "left", {
            get: function() {
                return this.worldX
            }
        }), Object.defineProperty(i.Tile.prototype, "right", {
            get: function() {
                return this.worldX + this.width
            }
        }), Object.defineProperty(i.Tile.prototype, "top", {
            get: function() {
                return this.worldY
            }
        }), Object.defineProperty(i.Tile.prototype, "bottom", {
            get: function() {
                return this.worldY + this.height
            }
        }), i.Tilemap = function(t, e, s, n, a, o) {
            this.game = t, this.key = e;
            var r = i.TilemapParser.parse(this.game, e, s, n, a, o);
            null !== r && (this.width = r.width, this.height = r.height, this.tileWidth = r.tileWidth, this.tileHeight = r.tileHeight, this.orientation = r.orientation, this.format = r.format, this.version = r.version, this.properties = r.properties, this.widthInPixels = r.widthInPixels, this.heightInPixels = r.heightInPixels, this.layers = r.layers, this.tilesets = r.tilesets, this.imagecollections = r.imagecollections, this.tiles = r.tiles, this.objects = r.objects, this.collideIndexes = [], this.collision = r.collision, this.images = r.images, this.enableDebug = !1, this.currentLayer = 0, this.debugMap = [], this._results = [], this._tempA = 0, this._tempB = 0)
        }, i.Tilemap.CSV = 0, i.Tilemap.TILED_JSON = 1, i.Tilemap.NORTH = 0, i.Tilemap.EAST = 1, i.Tilemap.SOUTH = 2, i.Tilemap.WEST = 3, i.Tilemap.prototype = {
            create: function(t, e, i, s, n, a) {
                return void 0 === a && (a = this.game.world), this.width = e, this.height = i, this.setTileSize(s, n), this.layers.length = 0, this.createBlankLayer(t, e, i, s, n, a)
            },
            setTileSize: function(t, e) {
                this.tileWidth = t, this.tileHeight = e, this.widthInPixels = this.width * t, this.heightInPixels = this.height * e
            },
            addTilesetImage: function(t, e, s, n, a, o, r) {
                if (void 0 === t) return null;
                void 0 === s && (s = this.tileWidth), void 0 === n && (n = this.tileHeight), void 0 === a && (a = 0), void 0 === o && (o = 0), void 0 === r && (r = 0), 0 === s && (s = 32), 0 === n && (n = 32);
                var h = null;
                if (void 0 !== e && null !== e || (e = t), e instanceof i.BitmapData) h = e.canvas;
                else {
                    if (!this.game.cache.checkImageKey(e)) return null;
                    h = this.game.cache.getImage(e)
                }
                var l = this.getTilesetIndex(t);
                if (null === l && this.format === i.Tilemap.TILED_JSON) return null;
                if (this.tilesets[l]) return this.tilesets[l].setImage(h), this.tilesets[l];
                var c = new i.Tileset(t, r, s, n, a, o, {});
                c.setImage(h), this.tilesets.push(c);
                for (var u = this.tilesets.length - 1, d = a, p = a, m = 0, g = 0, f = 0, _ = r; _ < r + c.total && (this.tiles[_] = [d, p, u], d += s + o, ++m !== c.total) && (++g !== c.columns || (d = a, p += n + o, g = 0, ++f !== c.rows)); _++);
                return c
            },
            createFromObjects: function(t, e, s, n, a, o, r, h, l) {
                if (void 0 === a && (a = !0), void 0 === o && (o = !1), void 0 === r && (r = this.game.world), void 0 === h && (h = i.Sprite), void 0 === l && (l = !0), this.objects[t])
                    for (var c = 0; c < this.objects[t].length; c++) {
                        var u = !1,
                            d = this.objects[t][c];
                        if (void 0 !== d.gid && "number" == typeof e && d.gid === e ? u = !0 : void 0 !== d.id && "number" == typeof e && d.id === e ? u = !0 : void 0 !== d.name && "string" == typeof e && d.name === e && (u = !0), u) {
                            var p = new h(this.game, parseFloat(d.x, 10), parseFloat(d.y, 10), s, n);
                            p.name = d.name, p.visible = d.visible, p.autoCull = o, p.exists = a, d.width && (p.width = d.width), d.height && (p.height = d.height), d.rotation && (p.angle = d.rotation), l && (p.y -= p.height), r.add(p);
                            for (var m in d.properties) r.set(p, m, d.properties[m], !1, !1, 0, !0)
                        }
                    }
            },
            createFromTiles: function(t, e, s, n, a, o) {
                "number" == typeof t && (t = [t]), void 0 === e || null === e ? e = [] : "number" == typeof e && (e = [e]), n = this.getLayer(n), void 0 === a && (a = this.game.world), void 0 === o && (o = {}), void 0 === o.customClass && (o.customClass = i.Sprite), void 0 === o.adjustY && (o.adjustY = !0);
                var r = this.layers[n].width,
                    h = this.layers[n].height;
                if (this.copy(0, 0, r, h, n), this._results.length < 2) return 0;
                for (var l, c = 0, u = 1, d = this._results.length; u < d; u++)
                    if (-1 !== t.indexOf(this._results[u].index)) {
                        l = new o.customClass(this.game, this._results[u].worldX, this._results[u].worldY, s);
                        for (var p in o) l[p] = o[p];
                        a.add(l), c++
                    }
                if (1 === e.length)
                    for (u = 0; u < t.length; u++) this.replace(t[u], e[0], 0, 0, r, h, n);
                else if (e.length > 1)
                    for (u = 0; u < t.length; u++) this.replace(t[u], e[u], 0, 0, r, h, n);
                return c
            },
            createLayer: function(t, e, s, n) {
                void 0 === e && (e = this.game.width), void 0 === s && (s = this.game.height), void 0 === n && (n = this.game.world);
                var a = t;
                if ("string" == typeof t && (a = this.getLayerIndex(t)), !(null === a || a > this.layers.length)) {
                    void 0 === e || e <= 0 ? e = Math.min(this.game.width, this.layers[a].widthInPixels) : e > this.game.width && (e = this.game.width), void 0 === s || s <= 0 ? s = Math.min(this.game.height, this.layers[a].heightInPixels) : s > this.game.height && (s = this.game.height), this.enableDebug;
                    var o = n.add(new i.TilemapLayer(this.game, this, a, e, s));
                    return this.enableDebug, o
                }
            },
            createBlankLayer: function(t, e, s, n, a, o) {
                if (void 0 === o && (o = this.game.world), null === this.getLayerIndex(t)) {
                    for (var r, h = {
                        name: t,
                        x: 0,
                        y: 0,
                        width: e,
                        height: s,
                        widthInPixels: e * n,
                        heightInPixels: s * a,
                        alpha: 1,
                        visible: !0,
                        properties: {},
                        indexes: [],
                        callbacks: [],
                        bodies: [],
                        data: null
                    }, l = [], c = 0; c < s; c++) {
                        r = [];
                        for (var u = 0; u < e; u++) r.push(new i.Tile(h, -1, u, c, n, a));
                        l.push(r)
                    }
                    h.data = l, this.layers.push(h), this.currentLayer = this.layers.length - 1;
                    var d = h.widthInPixels,
                        p = h.heightInPixels;
                    return d > this.game.width && (d = this.game.width), p > this.game.height && (p = this.game.height), (l = new i.TilemapLayer(this.game, this, this.layers.length - 1, d, p)).name = t, o.add(l)
                }
            },
            getIndex: function(t, e) {
                for (var i = 0; i < t.length; i++)
                    if (t[i].name === e) return i;
                return null
            },
            getLayerIndex: function(t) {
                return this.getIndex(this.layers, t)
            },
            getTilesetIndex: function(t) {
                return this.getIndex(this.tilesets, t)
            },
            getImageIndex: function(t) {
                return this.getIndex(this.images, t)
            },
            setTileIndexCallback: function(t, e, i, s) {
                if (s = this.getLayer(s), "number" == typeof t) this.layers[s].callbacks[t] = {
                    callback: e,
                    callbackContext: i
                };
                else
                    for (var n = 0, a = t.length; n < a; n++) this.layers[s].callbacks[t[n]] = {
                        callback: e,
                        callbackContext: i
                    }
            },
            setTileLocationCallback: function(t, e, i, s, n, a, o) {
                if (o = this.getLayer(o), this.copy(t, e, i, s, o), !(this._results.length < 2))
                    for (var r = 1; r < this._results.length; r++) this._results[r].setCollisionCallback(n, a)
            },
            setCollision: function(t, e, i, s) {
                if (void 0 === e && (e = !0), void 0 === s && (s = !0), i = this.getLayer(i), "number" == typeof t) return this.setCollisionByIndex(t, e, i, !0);
                if (Array.isArray(t)) {
                    for (var n = 0; n < t.length; n++) this.setCollisionByIndex(t[n], e, i, !1);
                    s && this.calculateFaces(i)
                }
            },
            setCollisionBetween: function(t, e, i, s, n) {
                if (void 0 === i && (i = !0), void 0 === n && (n = !0), s = this.getLayer(s), !(t > e)) {
                    for (var a = t; a <= e; a++) this.setCollisionByIndex(a, i, s, !1);
                    n && this.calculateFaces(s)
                }
            },
            setCollisionByExclusion: function(t, e, i, s) {
                void 0 === e && (e = !0), void 0 === s && (s = !0), i = this.getLayer(i);
                for (var n = 0, a = this.tiles.length; n < a; n++) - 1 === t.indexOf(n) && this.setCollisionByIndex(n, e, i, !1);
                s && this.calculateFaces(i)
            },
            setCollisionByIndex: function(t, e, i, s) {
                if (void 0 === e && (e = !0), void 0 === i && (i = this.currentLayer), void 0 === s && (s = !0), e) this.collideIndexes.push(t);
                else {
                    var n = this.collideIndexes.indexOf(t);
                    n > -1 && this.collideIndexes.splice(n, 1)
                }
                for (var a = 0; a < this.layers[i].height; a++)
                    for (var o = 0; o < this.layers[i].width; o++) {
                        var r = this.layers[i].data[a][o];
                        r && r.index === t && (e ? r.setCollision(!0, !0, !0, !0) : r.resetCollision(), r.faceTop = e, r.faceBottom = e, r.faceLeft = e, r.faceRight = e)
                    }
                return s && this.calculateFaces(i), i
            },
            getLayer: function(t) {
                return void 0 === t ? t = this.currentLayer : "string" == typeof t ? t = this.getLayerIndex(t) : t instanceof i.TilemapLayer && (t = t.index), t
            },
            setPreventRecalculate: function(t) {
                if (!0 === t && !0 !== this.preventingRecalculate && (this.preventingRecalculate = !0, this.needToRecalculate = {}), !1 === t && !0 === this.preventingRecalculate) {
                    this.preventingRecalculate = !1;
                    for (var e in this.needToRecalculate) this.calculateFaces(e);
                    this.needToRecalculate = !1
                }
            },
            calculateFaces: function(t) {
                if (this.preventingRecalculate) this.needToRecalculate[t] = !0;
                else
                    for (var e = null, i = null, s = null, n = null, a = 0, o = this.layers[t].height; a < o; a++)
                        for (var r = 0, h = this.layers[t].width; r < h; r++) {
                            var l = this.layers[t].data[a][r];
                            l && (e = this.getTileAbove(t, r, a), i = this.getTileBelow(t, r, a), s = this.getTileLeft(t, r, a), n = this.getTileRight(t, r, a), l.collides && (l.faceTop = !0, l.faceBottom = !0, l.faceLeft = !0, l.faceRight = !0), e && e.collides && (l.faceTop = !1), i && i.collides && (l.faceBottom = !1), s && s.collides && (l.faceLeft = !1), n && n.collides && (l.faceRight = !1))
                        }
            },
            getTileAbove: function(t, e, i) {
                return i > 0 ? this.layers[t].data[i - 1][e] : null
            },
            getTileBelow: function(t, e, i) {
                return i < this.layers[t].height - 1 ? this.layers[t].data[i + 1][e] : null
            },
            getTileLeft: function(t, e, i) {
                return e > 0 ? this.layers[t].data[i][e - 1] : null
            },
            getTileRight: function(t, e, i) {
                return e < this.layers[t].width - 1 ? this.layers[t].data[i][e + 1] : null
            },
            setLayer: function(t) {
                t = this.getLayer(t), this.layers[t] && (this.currentLayer = t)
            },
            hasTile: function(t, e, i) {
                return i = this.getLayer(i), void 0 !== this.layers[i].data[e] && void 0 !== this.layers[i].data[e][t] && this.layers[i].data[e][t].index > -1
            },
            removeTile: function(t, e, s) {
                if (s = this.getLayer(s), t >= 0 && t < this.layers[s].width && e >= 0 && e < this.layers[s].height && this.hasTile(t, e, s)) {
                    var n = this.layers[s].data[e][t];
                    return this.layers[s].data[e][t] = new i.Tile(this.layers[s], -1, t, e, this.tileWidth, this.tileHeight), this.layers[s].dirty = !0, this.calculateFaces(s), n
                }
            },
            removeTileWorldXY: function(t, e, i, s, n) {
                return n = this.getLayer(n), t = this.game.math.snapToFloor(t, i) / i, e = this.game.math.snapToFloor(e, s) / s, this.removeTile(t, e, n)
            },
            putTile: function(t, e, s, n) {
                if (null === t) return this.removeTile(e, s, n);
                if (n = this.getLayer(n), e >= 0 && e < this.layers[n].width && s >= 0 && s < this.layers[n].height) {
                    var a;
                    return t instanceof i.Tile ? (a = t.index, this.hasTile(e, s, n) ? this.layers[n].data[s][e].copy(t) : this.layers[n].data[s][e] = new i.Tile(n, a, e, s, t.width, t.height)) : (a = t, this.hasTile(e, s, n) ? this.layers[n].data[s][e].index = a : this.layers[n].data[s][e] = new i.Tile(this.layers[n], a, e, s, this.tileWidth, this.tileHeight)), this.collideIndexes.indexOf(a) > -1 ? this.layers[n].data[s][e].setCollision(!0, !0, !0, !0) : this.layers[n].data[s][e].resetCollision(), this.layers[n].dirty = !0, this.calculateFaces(n), this.layers[n].data[s][e]
                }
                return null
            },
            putTileWorldXY: function(t, e, i, s, n, a) {
                return a = this.getLayer(a), e = this.game.math.snapToFloor(e, s) / s, i = this.game.math.snapToFloor(i, n) / n, this.putTile(t, e, i, a)
            },
            searchTileIndex: function(t, e, i, s) {
                void 0 === e && (e = 0), void 0 === i && (i = !1), s = this.getLayer(s);
                var n = 0;
                if (i) {
                    for (a = this.layers[s].height - 1; a >= 0; a--)
                        for (o = this.layers[s].width - 1; o >= 0; o--)
                            if (this.layers[s].data[a][o].index === t) {
                                if (n === e) return this.layers[s].data[a][o];
                                n++
                            }
                } else
                    for (var a = 0; a < this.layers[s].height; a++)
                        for (var o = 0; o < this.layers[s].width; o++)
                            if (this.layers[s].data[a][o].index === t) {
                                if (n === e) return this.layers[s].data[a][o];
                                n++
                            } return null
            },
            getTile: function(t, e, i, s) {
                return void 0 === s && (s = !1), i = this.getLayer(i), t >= 0 && t < this.layers[i].width && e >= 0 && e < this.layers[i].height ? -1 === this.layers[i].data[e][t].index ? s ? this.layers[i].data[e][t] : null : this.layers[i].data[e][t] : null
            },
            getTileWorldXY: function(t, e, i, s, n, a) {
                return void 0 === i && (i = this.tileWidth), void 0 === s && (s = this.tileHeight), n = this.getLayer(n), t = this.game.math.snapToFloor(t, i) / i, e = this.game.math.snapToFloor(e, s) / s, this.getTile(t, e, n, a)
            },
            copy: function(t, e, i, s, n) {
                n = this.getLayer(n); {
                    if (this.layers[n]) {
                        void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === i && (i = this.layers[n].width), void 0 === s && (s = this.layers[n].height), t < 0 && (t = 0), e < 0 && (e = 0), i > this.layers[n].width && (i = this.layers[n].width), s > this.layers[n].height && (s = this.layers[n].height), this._results.length = 0, this._results.push({
                            x: t,
                            y: e,
                            width: i,
                            height: s,
                            layer: n
                        });
                        for (var a = e; a < e + s; a++)
                            for (var o = t; o < t + i; o++) this._results.push(this.layers[n].data[a][o]);
                        return this._results
                    }
                    this._results.length = 0
                }
            },
            paste: function(t, e, i, s) {
                if (void 0 === t && (t = 0), void 0 === e && (e = 0), s = this.getLayer(s), i && !(i.length < 2)) {
                    for (var n = t - i[1].x, a = e - i[1].y, o = 1; o < i.length; o++) this.layers[s].data[a + i[o].y][n + i[o].x].copy(i[o]);
                    this.layers[s].dirty = !0, this.calculateFaces(s)
                }
            },
            swap: function(t, e, i, s, n, a, o) {
                o = this.getLayer(o), this.copy(i, s, n, a, o), this._results.length < 2 || (this._tempA = t, this._tempB = e, this._results.forEach(this.swapHandler, this), this.paste(i, s, this._results, o))
            },
            swapHandler: function(t) {
                t.index === this._tempA ? t.index = this._tempB : t.index === this._tempB && (t.index = this._tempA)
            },
            forEach: function(t, e, i, s, n, a, o) {
                o = this.getLayer(o), this.copy(i, s, n, a, o), this._results.length < 2 || (this._results.forEach(t, e), this.paste(i, s, this._results, o))
            },
            replace: function(t, e, i, s, n, a, o) {
                if (o = this.getLayer(o), this.copy(i, s, n, a, o), !(this._results.length < 2)) {
                    for (var r = 1; r < this._results.length; r++) this._results[r].index === t && (this._results[r].index = e);
                    this.paste(i, s, this._results, o)
                }
            },
            random: function(t, e, i, s, n) {
                if (n = this.getLayer(n), this.copy(t, e, i, s, n), !(this._results.length < 2)) {
                    for (var a = [], o = 1; o < this._results.length; o++)
                        if (this._results[o].index) {
                            var r = this._results[o].index; - 1 === a.indexOf(r) && a.push(r)
                        }
                    for (var h = 1; h < this._results.length; h++) this._results[h].index = this.game.rnd.pick(a);
                    this.paste(t, e, this._results, n)
                }
            },
            shuffle: function(t, e, s, n, a) {
                if (a = this.getLayer(a), this.copy(t, e, s, n, a), !(this._results.length < 2)) {
                    for (var o = [], r = 1; r < this._results.length; r++) this._results[r].index && o.push(this._results[r].index);
                    i.ArrayUtils.shuffle(o);
                    for (var h = 1; h < this._results.length; h++) this._results[h].index = o[h - 1];
                    this.paste(t, e, this._results, a)
                }
            },
            fill: function(t, e, i, s, n, a) {
                if (a = this.getLayer(a), this.copy(e, i, s, n, a), !(this._results.length < 2)) {
                    for (var o = 1; o < this._results.length; o++) this._results[o].index = t;
                    this.paste(e, i, this._results, a)
                }
            },
            removeAllLayers: function() {
                this.layers.length = 0, this.currentLayer = 0
            },
            dump: function() {
                for (var t = "", e = [""], i = 0; i < this.layers[this.currentLayer].height; i++) {
                    for (var s = 0; s < this.layers[this.currentLayer].width; s++) t += "%c  ", this.layers[this.currentLayer].data[i][s] > 1 ? this.debugMap[this.layers[this.currentLayer].data[i][s]] ? e.push("background: " + this.debugMap[this.layers[this.currentLayer].data[i][s]]) : e.push("background: #ffffff") : e.push("background: rgb(0, 0, 0)");
                    t += "\n"
                }
                e[0] = t
            },
            destroy: function() {
                this.removeAllLayers(), this.data = [], this.game = null
            }
        }, i.Tilemap.prototype.constructor = i.Tilemap, Object.defineProperty(i.Tilemap.prototype, "layer", {
            get: function() {
                return this.layers[this.currentLayer]
            },
            set: function(t) {
                t !== this.currentLayer && this.setLayer(t)
            }
        }), i.TilemapLayer = function(t, e, s, n, a) {
            n |= 0, a |= 0, i.Sprite.call(this, t, 0, 0), this.map = e, this.index = s, this.layer = e.layers[s], this.canvas = PIXI.CanvasPool.create(this, n, a), this.context = this.canvas.getContext("2d"), this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas))), this.type = i.TILEMAPLAYER, this.physicsType = i.TILEMAPLAYER, this.renderSettings = {
                enableScrollDelta: !1,
                overdrawRatio: .2,
                copyCanvas: null
            }, this.debug = !1, this.exists = !0, this.debugSettings = {
                missingImageFill: "rgb(255,255,255)",
                debuggedTileOverfill: "rgba(0,255,0,0.4)",
                forceFullRedraw: !0,
                debugAlpha: .5,
                facingEdgeStroke: "rgba(0,255,0,1)",
                collidingTileOverfill: "rgba(0,255,0,0.2)"
            }, this.scrollFactorX = 1, this.scrollFactorY = 1, this.dirty = !0, this.rayStepRate = 4, this._wrap = !1, this._mc = {
                scrollX: 0,
                scrollY: 0,
                renderWidth: 0,
                renderHeight: 0,
                tileWidth: e.tileWidth,
                tileHeight: e.tileHeight,
                cw: e.tileWidth,
                ch: e.tileHeight,
                tilesets: []
            }, this._scrollX = 0, this._scrollY = 0, this._results = [], t.device.canvasBitBltShift || (this.renderSettings.copyCanvas = i.TilemapLayer.ensureSharedCopyCanvas()), this.fixedToCamera = !0
        }, i.TilemapLayer.prototype = Object.create(i.Sprite.prototype), i.TilemapLayer.prototype.constructor = i.TilemapLayer, i.TilemapLayer.prototype.preUpdateCore = i.Component.Core.preUpdate, i.TilemapLayer.sharedCopyCanvas = null, i.TilemapLayer.ensureSharedCopyCanvas = function() {
            return this.sharedCopyCanvas || (this.sharedCopyCanvas = PIXI.CanvasPool.create(this, 2, 2)), this.sharedCopyCanvas
        }, i.TilemapLayer.prototype.preUpdate = function() {
            return this.preUpdateCore()
        }, i.TilemapLayer.prototype.postUpdate = function() {
            this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y), this._scrollX = this.game.camera.view.x * this.scrollFactorX / this.scale.x, this._scrollY = this.game.camera.view.y * this.scrollFactorY / this.scale.y
        }, i.TilemapLayer.prototype._renderCanvas = function(t) {
            this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y), this._scrollX = this.game.camera.view.x * this.scrollFactorX / this.scale.x, this._scrollY = this.game.camera.view.y * this.scrollFactorY / this.scale.y, this.render(), PIXI.Sprite.prototype._renderCanvas.call(this, t)
        }, i.TilemapLayer.prototype._renderWebGL = function(t) {
            this.fixedToCamera && (this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x, this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y), this._scrollX = this.game.camera.view.x * this.scrollFactorX / this.scale.x, this._scrollY = this.game.camera.view.y * this.scrollFactorY / this.scale.y, this.render(), PIXI.Sprite.prototype._renderWebGL.call(this, t)
        }, i.TilemapLayer.prototype.destroy = function() {
            PIXI.CanvasPool.remove(this), i.Component.Destroy.prototype.destroy.call(this)
        }, i.TilemapLayer.prototype.resize = function(t, e) {
            this.canvas.width = t, this.canvas.height = e, this.texture.frame.resize(t, e), this.texture.width = t, this.texture.height = e, this.texture.crop.width = t, this.texture.crop.height = e, this.texture.baseTexture.width = t, this.texture.baseTexture.height = e, this.texture.baseTexture.dirty(), this.texture.requiresUpdate = !0, this.texture._updateUvs(), this.dirty = !0
        }, i.TilemapLayer.prototype.resizeWorld = function() {
            this.game.world.setBounds(0, 0, this.layer.widthInPixels * this.scale.x, this.layer.heightInPixels * this.scale.y)
        }, i.TilemapLayer.prototype._fixX = function(t) {
            return 1 === this.scrollFactorX || 0 === this.scrollFactorX && 0 === this.position.x ? t : 0 === this.scrollFactorX && 0 !== this.position.x ? t - this.position.x : this._scrollX + (t - this._scrollX / this.scrollFactorX)
        }, i.TilemapLayer.prototype._unfixX = function(t) {
            return 1 === this.scrollFactorX ? t : this._scrollX / this.scrollFactorX + (t - this._scrollX)
        }, i.TilemapLayer.prototype._fixY = function(t) {
            return 1 === this.scrollFactorY || 0 === this.scrollFactorY && 0 === this.position.y ? t : 0 === this.scrollFactorY && 0 !== this.position.y ? t - this.position.y : this._scrollY + (t - this._scrollY / this.scrollFactorY)
        }, i.TilemapLayer.prototype._unfixY = function(t) {
            return 1 === this.scrollFactorY ? t : this._scrollY / this.scrollFactorY + (t - this._scrollY)
        }, i.TilemapLayer.prototype.getTileX = function(t) {
            return Math.floor(this._fixX(t) / this._mc.tileWidth)
        }, i.TilemapLayer.prototype.getTileY = function(t) {
            return Math.floor(this._fixY(t) / this._mc.tileHeight)
        }, i.TilemapLayer.prototype.getTileXY = function(t, e, i) {
            return i.x = this.getTileX(t), i.y = this.getTileY(e), i
        }, i.TilemapLayer.prototype.getRayCastTiles = function(t, e, i, s) {
            e || (e = this.rayStepRate), void 0 === i && (i = !1), void 0 === s && (s = !1);
            var n = this.getTiles(t.x, t.y, t.width, t.height, i, s);
            if (0 === n.length) return [];
            for (var a = t.coordinatesOnLine(e), o = [], r = 0; r < n.length; r++)
                for (var h = 0; h < a.length; h++) {
                    var l = n[r],
                        c = a[h];
                    if (l.containsPoint(c[0], c[1])) {
                        o.push(l);
                        break
                    }
                }
            return o
        }, i.TilemapLayer.prototype.getTiles = function(t, e, i, s, n, a) {
            void 0 === n && (n = !1), void 0 === a && (a = !1);
            var o = !(n || a);
            t = this._fixX(t), e = this._fixY(e);
            for (var r = Math.floor(t / (this._mc.cw * this.scale.x)), h = Math.floor(e / (this._mc.ch * this.scale.y)), l = Math.ceil((t + i) / (this._mc.cw * this.scale.x)) - r, c = Math.ceil((e + s) / (this._mc.ch * this.scale.y)) - h; this._results.length;) this._results.pop();
            for (var u = h; u < h + c; u++)
                for (var d = r; d < r + l; d++) {
                    var p = this.layer.data[u];
                    p && p[d] && (o || p[d].isInteresting(n, a)) && this._results.push(p[d])
                }
            return this._results.slice()
        }, i.TilemapLayer.prototype.resolveTileset = function(t) {
            var e = this._mc.tilesets;
            if (t < 2e3)
                for (; e.length < t;) e.push(void 0);
            var i = this.map.tiles[t] && this.map.tiles[t][2];
            if (null !== i) {
                var s = this.map.tilesets[i];
                if (s && s.containsTileIndex(t)) return e[t] = s
            }
            return e[t] = null
        }, i.TilemapLayer.prototype.resetTilesetCache = function() {
            for (var t = this._mc.tilesets; t.length;) t.pop()
        }, i.TilemapLayer.prototype.setScale = function(t, e) {
            t = t || 1, e = e || t;
            for (var i = 0; i < this.layer.data.length; i++)
                for (var s = this.layer.data[i], n = 0; n < s.length; n++) {
                    var a = s[n];
                    a.width = this.map.tileWidth * t, a.height = this.map.tileHeight * e, a.worldX = a.x * a.width, a.worldY = a.y * a.height
                }
            this.scale.setTo(t, e)
        }, i.TilemapLayer.prototype.shiftCanvas = function(t, e, i) {
            var s = t.canvas,
                n = s.width - Math.abs(e),
                a = s.height - Math.abs(i),
                o = 0,
                r = 0,
                h = e,
                l = i;
            e < 0 && (o = -e, h = 0), i < 0 && (r = -i, l = 0);
            var c = this.renderSettings.copyCanvas;
            if (c) {
                (c.width < n || c.height < a) && (c.width = n, c.height = a);
                var u = c.getContext("2d");
                u.clearRect(0, 0, n, a), u.drawImage(s, o, r, n, a, 0, 0, n, a), t.clearRect(h, l, n, a), t.drawImage(c, 0, 0, n, a, h, l, n, a)
            } else t.save(), t.globalCompositeOperation = "copy", t.drawImage(s, o, r, n, a, h, l, n, a), t.restore()
        }, i.TilemapLayer.prototype.renderRegion = function(t, e, i, s, n, a) {
            var o = this.context,
                r = this.layer.width,
                h = this.layer.height,
                l = this._mc.tileWidth,
                c = this._mc.tileHeight,
                u = this._mc.tilesets,
                d = NaN;
            this._wrap || (i <= n && (i = Math.max(0, i), n = Math.min(r - 1, n)), s <= a && (s = Math.max(0, s), a = Math.min(h - 1, a)));
            var p, m, g, f, _, y, v = i * l - t,
                b = (i + (1 << 20) * r) % r;
            for (f = (s + (1 << 20) * h) % h, y = a - s, m = s * c - e; y >= 0; f++, y--, m += c) {
                f >= h && (f -= h);
                var S = this.layer.data[f];
                for (g = b, _ = n - i, p = v; _ >= 0; g++, _--, p += l) {
                    g >= r && (g -= r);
                    var T = S[g];
                    if (T && !(T.index < 0)) {
                        var E = T.index,
                            P = u[E];
                        void 0 === P && (P = this.resolveTileset(E)), T.alpha === d || this.debug || (o.globalAlpha = T.alpha, d = T.alpha), P ? T.rotation || T.flipped ? (o.save(), o.translate(p + T.centerX, m + T.centerY), o.rotate(T.rotation), T.flipped && o.scale(-1, 1), P.draw(o, -T.centerX, -T.centerY, E), o.restore()) : P.draw(o, p, m, E) : this.debugSettings.missingImageFill && (o.fillStyle = this.debugSettings.missingImageFill, o.fillRect(p, m, l, c)), T.debug && this.debugSettings.debuggedTileOverfill && (o.fillStyle = this.debugSettings.debuggedTileOverfill, o.fillRect(p, m, l, c))
                    }
                }
            }
        }, i.TilemapLayer.prototype.renderDeltaScroll = function(t, e) {
            var i = this._mc.scrollX,
                s = this._mc.scrollY,
                n = this.canvas.width,
                a = this.canvas.height,
                o = this._mc.tileWidth,
                r = this._mc.tileHeight,
                h = 0,
                l = -o,
                c = 0,
                u = -r;
            if (t < 0 ? (h = n + t, l = n - 1) : t > 0 && (l = t), e < 0 ? (c = a + e, u = a - 1) : e > 0 && (u = e), this.shiftCanvas(this.context, t, e), h = Math.floor((h + i) / o), l = Math.floor((l + i) / o), c = Math.floor((c + s) / r), u = Math.floor((u + s) / r), h <= l) {
                this.context.clearRect(h * o - i, 0, (l - h + 1) * o, a);
                var d = Math.floor((0 + s) / r),
                    p = Math.floor((a - 1 + s) / r);
                this.renderRegion(i, s, h, d, l, p)
            }
            if (c <= u) {
                this.context.clearRect(0, c * r - s, n, (u - c + 1) * r);
                var m = Math.floor((0 + i) / o),
                    g = Math.floor((n - 1 + i) / o);
                this.renderRegion(i, s, m, c, g, u)
            }
        }, i.TilemapLayer.prototype.renderFull = function() {
            var t = this._mc.scrollX,
                e = this._mc.scrollY,
                i = this.canvas.width,
                s = this.canvas.height,
                n = this._mc.tileWidth,
                a = this._mc.tileHeight,
                o = Math.floor(t / n),
                r = Math.floor((i - 1 + t) / n),
                h = Math.floor(e / a),
                l = Math.floor((s - 1 + e) / a);
            this.context.clearRect(0, 0, i, s), this.renderRegion(t, e, o, h, r, l)
        }, i.TilemapLayer.prototype.render = function() {
            var t = !1;
            if (this.visible) {
                (this.dirty || this.layer.dirty) && (this.layer.dirty = !1, t = !0);
                var e = this.canvas.width,
                    i = this.canvas.height,
                    s = 0 | this._scrollX,
                    n = 0 | this._scrollY,
                    a = this._mc,
                    o = a.scrollX - s,
                    r = a.scrollY - n;
                if (t || 0 !== o || 0 !== r || a.renderWidth !== e || a.renderHeight !== i) return this.context.save(), a.scrollX = s, a.scrollY = n, a.renderWidth === e && a.renderHeight === i || (a.renderWidth = e, a.renderHeight = i), this.debug && (this.context.globalAlpha = this.debugSettings.debugAlpha, this.debugSettings.forceFullRedraw && (t = !0)), !t && this.renderSettings.enableScrollDelta && Math.abs(o) + Math.abs(r) < Math.min(e, i) ? this.renderDeltaScroll(o, r) : this.renderFull(), this.debug && (this.context.globalAlpha = 1, this.renderDebug()), this.texture.baseTexture.dirty(), this.dirty = !1, this.context.restore(), !0
            }
        }, i.TilemapLayer.prototype.renderDebug = function() {
            var t, e, i, s, n, a, o = this._mc.scrollX,
                r = this._mc.scrollY,
                h = this.context,
                l = this.canvas.width,
                c = this.canvas.height,
                u = this.layer.width,
                d = this.layer.height,
                p = this._mc.tileWidth,
                m = this._mc.tileHeight,
                g = Math.floor(o / p),
                f = Math.floor((l - 1 + o) / p),
                _ = Math.floor(r / m),
                y = Math.floor((c - 1 + r) / m),
                v = g * p - o,
                b = _ * m - r,
                S = (g + (1 << 20) * u) % u,
                T = (_ + (1 << 20) * d) % d;
            for (h.strokeStyle = this.debugSettings.facingEdgeStroke, s = T, a = y - _, e = b; a >= 0; s++, a--, e += m) {
                s >= d && (s -= d);
                var E = this.layer.data[s];
                for (i = S, n = f - g, t = v; n >= 0; i++, n--, t += p) {
                    i >= u && (i -= u);
                    var P = E[i];
                    !P || P.index < 0 || !P.collides || (this.debugSettings.collidingTileOverfill && (h.fillStyle = this.debugSettings.collidingTileOverfill, h.fillRect(t, e, this._mc.cw, this._mc.ch)), this.debugSettings.facingEdgeStroke && (h.beginPath(), P.faceTop && (h.moveTo(t, e), h.lineTo(t + this._mc.cw, e)), P.faceBottom && (h.moveTo(t, e + this._mc.ch), h.lineTo(t + this._mc.cw, e + this._mc.ch)), P.faceLeft && (h.moveTo(t, e), h.lineTo(t, e + this._mc.ch)), P.faceRight && (h.moveTo(t + this._mc.cw, e), h.lineTo(t + this._mc.cw, e + this._mc.ch)), h.closePath(), h.stroke()))
                }
            }
        }, Object.defineProperty(i.TilemapLayer.prototype, "wrap", {
            get: function() {
                return this._wrap
            },
            set: function(t) {
                this._wrap = t, this.dirty = !0
            }
        }), Object.defineProperty(i.TilemapLayer.prototype, "scrollX", {
            get: function() {
                return this._scrollX
            },
            set: function(t) {
                this._scrollX = t
            }
        }), Object.defineProperty(i.TilemapLayer.prototype, "scrollY", {
            get: function() {
                return this._scrollY
            },
            set: function(t) {
                this._scrollY = t
            }
        }), Object.defineProperty(i.TilemapLayer.prototype, "collisionWidth", {
            get: function() {
                return this._mc.cw
            },
            set: function(t) {
                this._mc.cw = 0 | t, this.dirty = !0
            }
        }), Object.defineProperty(i.TilemapLayer.prototype, "collisionHeight", {
            get: function() {
                return this._mc.ch
            },
            set: function(t) {
                this._mc.ch = 0 | t, this.dirty = !0
            }
        }), i.TilemapParser = {
            INSERT_NULL: !1,
            parse: function(t, e, s, n, a, o) {
                if (void 0 === s && (s = 32), void 0 === n && (n = 32), void 0 === a && (a = 10), void 0 === o && (o = 10), void 0 === e) return this.getEmptyData();
                if (null === e) return this.getEmptyData(s, n, a, o);
                var r = t.cache.getTilemapData(e);
                if (r) {
                    if (r.format === i.Tilemap.CSV) return this.parseCSV(e, r.data, s, n);
                    if (!r.format || r.format === i.Tilemap.TILED_JSON) return this.parseTiledJSON(r.data)
                }
            },
            parseCSV: function(t, e, s, n) {
                for (var a = this.getEmptyData(), o = [], r = (e = e.trim()).split("\n"), h = r.length, l = 0, c = 0; c < r.length; c++) {
                    o[c] = [];
                    for (var u = r[c].split(","), d = 0; d < u.length; d++) o[c][d] = new i.Tile(a.layers[0], parseInt(u[d], 10), d, c, s, n);
                    0 === l && (l = u.length)
                }
                return a.format = i.Tilemap.CSV, a.name = t, a.width = l, a.height = h, a.tileWidth = s, a.tileHeight = n, a.widthInPixels = l * s, a.heightInPixels = h * n, a.layers[0].width = l, a.layers[0].height = h, a.layers[0].widthInPixels = a.widthInPixels, a.layers[0].heightInPixels = a.heightInPixels, a.layers[0].data = o, a
            },
            getEmptyData: function(t, e, i, s) {
                return {
                    width: void 0 !== i && null !== i ? i : 0,
                    height: void 0 !== s && null !== s ? s : 0,
                    tileWidth: void 0 !== t && null !== t ? t : 0,
                    tileHeight: void 0 !== e && null !== e ? e : 0,
                    orientation: "orthogonal",
                    version: "1",
                    properties: {},
                    widthInPixels: 0,
                    heightInPixels: 0,
                    layers: [{
                        name: "layer",
                        x: 0,
                        y: 0,
                        width: 0,
                        height: 0,
                        widthInPixels: 0,
                        heightInPixels: 0,
                        alpha: 1,
                        visible: !0,
                        properties: {},
                        indexes: [],
                        callbacks: [],
                        bodies: [],
                        data: []
                    }],
                    images: [],
                    objects: {},
                    collision: {},
                    tilesets: [],
                    tiles: []
                }
            },
            parseTiledJSON: function(t) {
                function e(t, e) {
                    var i = {};
                    for (var s in e) {
                        var n = e[s];
                        void 0 !== t[n] && (i[n] = t[n])
                    }
                    return i
                }
                if ("orthogonal" !== t.orientation) return null;
                for (var s = {
                    width: t.width,
                    height: t.height,
                    tileWidth: t.tilewidth,
                    tileHeight: t.tileheight,
                    orientation: t.orientation,
                    format: i.Tilemap.TILED_JSON,
                    version: t.version,
                    properties: t.properties,
                    widthInPixels: t.width * t.tilewidth,
                    heightInPixels: t.height * t.tileheight
                }, n = [], a = 0; a < t.layers.length; a++)
                    if ("tilelayer" === t.layers[a].type) {
                        var o = t.layers[a];
                        if (!o.compression && o.encoding && "base64" === o.encoding) {
                            for (var r = window.atob(o.data), h = r.length, l = new Array(h), c = 0; c < h; c += 4) l[c / 4] = (r.charCodeAt(c) | r.charCodeAt(c + 1) << 8 | r.charCodeAt(c + 2) << 16 | r.charCodeAt(c + 3) << 24) >>> 0;
                            o.data = l, delete o.encoding
                        } else if (o.compression) continue;
                        B = {
                            name: o.name,
                            x: o.x,
                            y: o.y,
                            width: o.width,
                            height: o.height,
                            widthInPixels: o.width * t.tilewidth,
                            heightInPixels: o.height * t.tileheight,
                            alpha: o.opacity,
                            visible: o.visible,
                            properties: {},
                            indexes: [],
                            callbacks: [],
                            bodies: []
                        };
                        o.properties && (B.properties = o.properties);
                        for (var u, d, p, m = 0, g = [], f = [], _ = 0, h = o.data.length; _ < h; _++) {
                            if (u = 0, d = !1, C = o.data[_], p = 0, C > 536870912) switch (C > 2147483648 && (C -= 2147483648, p += 4), C > 1073741824 && (C -= 1073741824, p += 2), C > 536870912 && (C -= 536870912, p += 1), p) {
                                case 5:
                                    u = Math.PI / 2;
                                    break;
                                case 6:
                                    u = Math.PI;
                                    break;
                                case 3:
                                    u = 3 * Math.PI / 2;
                                    break;
                                case 4:
                                    u = 0, d = !0;
                                    break;
                                case 7:
                                    u = Math.PI / 2, d = !0;
                                    break;
                                case 2:
                                    u = Math.PI, d = !0;
                                    break;
                                case 1:
                                    u = 3 * Math.PI / 2, d = !0
                            }
                            C > 0 ? ((F = new i.Tile(B, C, m, f.length, t.tilewidth, t.tileheight)).rotation = u, F.flipped = d, 0 !== p && (F.flippedVal = p), g.push(F)) : i.TilemapParser.INSERT_NULL ? g.push(null) : g.push(new i.Tile(B, -1, m, f.length, t.tilewidth, t.tileheight)), ++m === o.width && (f.push(g), m = 0, g = [])
                        }
                        B.data = f, n.push(B)
                    }
                s.layers = n;
                for (var y = [], a = 0; a < t.layers.length; a++)
                    if ("imagelayer" === t.layers[a].type) {
                        var v = t.layers[a],
                            b = {
                                name: v.name,
                                image: v.image,
                                x: v.x,
                                y: v.y,
                                alpha: v.opacity,
                                visible: v.visible,
                                properties: {}
                            };
                        v.properties && (b.properties = v.properties), y.push(b)
                    }
                s.images = y;
                for (var S = [], T = [], E = null, a = 0; a < t.tilesets.length; a++) {
                    if ((H = t.tilesets[a]).image) {
                        var P = new i.Tileset(H.name, H.firstgid, H.tilewidth, H.tileheight, H.margin, H.spacing, H.properties);
                        H.tileproperties && (P.tileProperties = H.tileproperties), P.updateTileData(H.imagewidth, H.imageheight), S.push(P)
                    } else {
                        var A = new i.ImageCollection(H.name, H.firstgid, H.tilewidth, H.tileheight, H.margin, H.spacing, H.properties);
                        for (var I in H.tiles) {
                            var b = H.tiles[I].image,
                                C = H.firstgid + parseInt(I, 10);
                            A.addImage(C, b)
                        }
                        T.push(A)
                    }
                    E && (E.lastgid = H.firstgid - 1), E = H
                }
                s.tilesets = S, s.imagecollections = T;
                for (var x = {}, w = {}, a = 0; a < t.layers.length; a++)
                    if ("objectgroup" === t.layers[a].type) {
                        var M = t.layers[a];
                        x[M.name] = [], w[M.name] = [];
                        for (var O = 0, h = M.objects.length; O < h; O++)
                            if (M.objects[O].gid) {
                                N = {
                                    gid: M.objects[O].gid,
                                    name: M.objects[O].name,
                                    type: M.objects[O].hasOwnProperty("type") ? M.objects[O].type : "",
                                    x: M.objects[O].x,
                                    y: M.objects[O].y,
                                    visible: M.objects[O].visible,
                                    properties: M.objects[O].properties
                                };
                                M.objects[O].rotation && (N.rotation = M.objects[O].rotation), x[M.name].push(N)
                            } else if (M.objects[O].polyline) {
                            N = {
                                name: M.objects[O].name,
                                type: M.objects[O].type,
                                x: M.objects[O].x,
                                y: M.objects[O].y,
                                width: M.objects[O].width,
                                height: M.objects[O].height,
                                visible: M.objects[O].visible,
                                properties: M.objects[O].properties
                            };
                            M.objects[O].rotation && (N.rotation = M.objects[O].rotation), N.polyline = [];
                            for (L = 0; L < M.objects[O].polyline.length; L++) N.polyline.push([M.objects[O].polyline[L].x, M.objects[O].polyline[L].y]);
                            w[M.name].push(N), x[M.name].push(N)
                        } else if (M.objects[O].polygon) {
                            (N = e(M.objects[O], ["name", "type", "x", "y", "visible", "rotation", "properties"])).polygon = [];
                            for (var L = 0; L < M.objects[O].polygon.length; L++) N.polygon.push([M.objects[O].polygon[L].x, M.objects[O].polygon[L].y]);
                            x[M.name].push(N)
                        } else if (M.objects[O].ellipse) {
                            var N = e(M.objects[O], ["name", "type", "ellipse", "x", "y", "width", "height", "visible", "rotation", "properties"]);
                            x[M.name].push(N)
                        } else(N = e(M.objects[O], ["name", "type", "x", "y", "width", "height", "visible", "rotation", "properties"])).rectangle = !0, x[M.name].push(N)
                    }
                s.objects = x, s.collision = w, s.tiles = [];
                for (a = 0; a < s.tilesets.length; a++)
                    for (var m = (H = s.tilesets[a]).tileMargin, k = H.tileMargin, R = 0, D = 0, G = 0, _ = H.firstgid; _ < H.firstgid + H.total && (s.tiles[_] = [m, k, a], m += H.tileWidth + H.tileSpacing, ++R !== H.total) && (++D !== H.columns || (m = H.tileMargin, k += H.tileHeight + H.tileSpacing, D = 0, ++G !== H.rows)); _++);
                for (var B, F, U, H, a = 0; a < s.layers.length; a++) {
                    B = s.layers[a], H = null;
                    for (c = 0; c < B.data.length; c++) {
                        g = B.data[c];
                        for (var Y = 0; Y < g.length; Y++) null === (F = g[Y]) || F.index < 0 || (U = s.tiles[F.index][2], (H = s.tilesets[U]).tileProperties && H.tileProperties[F.index - H.firstgid] && (F.properties = i.Utils.mixin(H.tileProperties[F.index - H.firstgid], F.properties)))
                    }
                }
                return s
            }
        }, i.Tileset = function(t, e, i, s, n, a, o) {
            (void 0 === i || i <= 0) && (i = 32), (void 0 === s || s <= 0) && (s = 32), void 0 === n && (n = 0), void 0 === a && (a = 0), this.name = t, this.firstgid = 0 | e, this.tileWidth = 0 | i, this.tileHeight = 0 | s, this.tileMargin = 0 | n, this.tileSpacing = 0 | a, this.properties = o || {}, this.image = null, this.rows = 0, this.columns = 0, this.total = 0, this.drawCoords = []
        }, i.Tileset.prototype = {
            draw: function(t, e, i, s) {
                var n = s - this.firstgid << 1;
                n >= 0 && n + 1 < this.drawCoords.length && t.drawImage(this.image, this.drawCoords[n], this.drawCoords[n + 1], this.tileWidth, this.tileHeight, e, i, this.tileWidth, this.tileHeight)
            },
            containsTileIndex: function(t) {
                return t >= this.firstgid && t < this.firstgid + this.total
            },
            setImage: function(t) {
                this.image = t, this.updateTileData(t.width, t.height)
            },
            setSpacing: function(t, e) {
                this.tileMargin = 0 | t, this.tileSpacing = 0 | e, this.image && this.updateTileData(this.image.width, this.image.height)
            },
            updateTileData: function(t, e) {
                var i = (e - 2 * this.tileMargin + this.tileSpacing) / (this.tileHeight + this.tileSpacing),
                    s = (t - 2 * this.tileMargin + this.tileSpacing) / (this.tileWidth + this.tileSpacing);
                i = Math.floor(i), s = Math.floor(s), this.rows && this.rows !== i || this.columns && this.columns, this.rows = i, this.columns = s, this.total = i * s, this.drawCoords.length = 0;
                for (var n = this.tileMargin, a = this.tileMargin, o = 0; o < this.rows; o++) {
                    for (var r = 0; r < this.columns; r++) this.drawCoords.push(n), this.drawCoords.push(a), n += this.tileWidth + this.tileSpacing;
                    n = this.tileMargin, a += this.tileHeight + this.tileSpacing
                }
            }
        }, i.Tileset.prototype.constructor = i.Tileset, i.Particle = function(t, e, s, n, a) {
            i.Sprite.call(this, t, e, s, n, a), this.autoScale = !1, this.scaleData = null, this._s = 0, this.autoAlpha = !1, this.alphaData = null, this._a = 0
        }, i.Particle.prototype = Object.create(i.Sprite.prototype), i.Particle.prototype.constructor = i.Particle, i.Particle.prototype.update = function() {
            this.autoScale && (--this._s ? this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y) : this.autoScale = !1), this.autoAlpha && (--this._a ? this.alpha = this.alphaData[this._a].v : this.autoAlpha = !1)
        }, i.Particle.prototype.onEmit = function() {}, i.Particle.prototype.setAlphaData = function(t) {
            this.alphaData = t, this._a = t.length - 1, this.alpha = this.alphaData[this._a].v, this.autoAlpha = !0
        }, i.Particle.prototype.setScaleData = function(t) {
            this.scaleData = t, this._s = t.length - 1, this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y), this.autoScale = !0
        }, i.Particle.prototype.reset = function(t, e, s) {
            return i.Component.Reset.prototype.reset.call(this, t, e, s), this.alpha = 1, this.scale.set(1), this.autoScale = !1, this.autoAlpha = !1, this
        }, i.Particles = function(t) {
            this.game = t, this.emitters = {}, this.ID = 0
        }, i.Particles.prototype = {
            add: function(t) {
                return this.emitters[t.name] = t, t
            },
            remove: function(t) {
                delete this.emitters[t.name]
            },
            update: function() {
                for (var t in this.emitters) this.emitters[t].exists && this.emitters[t].update()
            }
        }, i.Particles.prototype.constructor = i.Particles, i.Particles.Arcade = {}, i.Particles.Arcade.Emitter = function(t, e, s, n) {
            this.maxParticles = n || 50, i.Group.call(this, t), this.name = "emitter" + this.game.particles.ID++, this.type = i.EMITTER, this.physicsType = i.GROUP, this.area = new i.Rectangle(e, s, 1, 1), this.minParticleSpeed = new i.Point(-100, -100), this.maxParticleSpeed = new i.Point(100, 100), this.minParticleScale = 1, this.maxParticleScale = 1, this.scaleData = null, this.minRotation = -360, this.maxRotation = 360, this.minParticleAlpha = 1, this.maxParticleAlpha = 1, this.alphaData = null, this.gravity = 100, this.particleClass = i.Particle, this.particleDrag = new i.Point, this.angularDrag = 0, this.frequency = 100, this.lifespan = 2e3, this.bounce = new i.Point, this.on = !1, this.particleAnchor = new i.Point(.5, .5), this.blendMode = i.blendModes.NORMAL, this.emitX = e, this.emitY = s, this.autoScale = !1, this.autoAlpha = !1, this.particleBringToTop = !1, this.particleSendToBack = !1, this._minParticleScale = new i.Point(1, 1), this._maxParticleScale = new i.Point(1, 1), this._quantity = 0, this._timer = 0, this._counter = 0, this._flowQuantity = 0, this._flowTotal = 0, this._explode = !0, this._frames = null
        }, i.Particles.Arcade.Emitter.prototype = Object.create(i.Group.prototype), i.Particles.Arcade.Emitter.prototype.constructor = i.Particles.Arcade.Emitter, i.Particles.Arcade.Emitter.prototype.update = function() {
            if (this.on && this.game.time.time >= this._timer)
                if (this._timer = this.game.time.time + this.frequency * this.game.time.slowMotion, 0 !== this._flowTotal)
                    if (this._flowQuantity > 0) {
                        for (t = 0; t < this._flowQuantity; t++)
                            if (this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal)) {
                                this.on = !1;
                                break
                            }
                    } else this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal && (this.on = !1));
            else this.emitParticle() && (this._counter++, this._quantity > 0 && this._counter >= this._quantity && (this.on = !1));
            for (var t = this.children.length; t--;) this.children[t].exists && this.children[t].update()
        }, i.Particles.Arcade.Emitter.prototype.makeParticles = function(t, e, i, s, n) {
            void 0 === e && (e = 0), void 0 === i && (i = this.maxParticles), void 0 === s && (s = !1), void 0 === n && (n = !1);
            var a, o = 0,
                r = t,
                h = e;
            for (this._frames = e, i > this.maxParticles && (this.maxParticles = i); o < i;) Array.isArray(t) && (r = this.game.rnd.pick(t)), Array.isArray(e) && (h = this.game.rnd.pick(e)), a = new this.particleClass(this.game, 0, 0, r, h), this.game.physics.arcade.enable(a, !1), s ? (a.body.checkCollision.any = !0, a.body.checkCollision.none = !1) : a.body.checkCollision.none = !0, a.body.collideWorldBounds = n, a.body.skipQuadTree = !0, a.exists = !1, a.visible = !1, a.anchor.copyFrom(this.particleAnchor), this.add(a), o++;
            return this
        }, i.Particles.Arcade.Emitter.prototype.kill = function() {
            return this.on = !1, this.alive = !1, this.exists = !1, this
        }, i.Particles.Arcade.Emitter.prototype.revive = function() {
            return this.alive = !0, this.exists = !0, this
        }, i.Particles.Arcade.Emitter.prototype.explode = function(t, e) {
            return this._flowTotal = 0, this.start(!0, t, 0, e, !1), this
        }, i.Particles.Arcade.Emitter.prototype.flow = function(t, e, i, s, n) {
            return void 0 !== i && 0 !== i || (i = 1), void 0 === s && (s = -1), void 0 === n && (n = !0), i > this.maxParticles && (i = this.maxParticles), this._counter = 0, this._flowQuantity = i, this._flowTotal = s, n ? (this.start(!0, t, e, i), this._counter += i, this.on = !0, this._timer = this.game.time.time + e * this.game.time.slowMotion) : this.start(!1, t, e, i), this
        }, i.Particles.Arcade.Emitter.prototype.start = function(t, e, i, s, n) {
            if (void 0 === t && (t = !0), void 0 === e && (e = 0), void 0 !== i && null !== i || (i = 250), void 0 === s && (s = 0), void 0 === n && (n = !1), s > this.maxParticles && (s = this.maxParticles), this.revive(), this.visible = !0, this.lifespan = e, this.frequency = i, t || n)
                for (var a = 0; a < s; a++) this.emitParticle();
            else this.on = !0, this._quantity = s, this._counter = 0, this._timer = this.game.time.time + i * this.game.time.slowMotion;
            return this
        }, i.Particles.Arcade.Emitter.prototype.emitParticle = function(t, e, i, s) {
            void 0 === t && (t = null), void 0 === e && (e = null);
            var n = this.getFirstExists(!1);
            if (null === n) return !1;
            var a = this.game.rnd;
            void 0 !== i && void 0 !== s ? n.loadTexture(i, s) : void 0 !== i && n.loadTexture(i);
            var o = this.emitX,
                r = this.emitY;
            null !== t ? o = t : this.width > 1 && (o = a.between(this.left, this.right)), null !== e ? r = e : this.height > 1 && (r = a.between(this.top, this.bottom)), n.reset(o, r), n.angle = 0, n.lifespan = this.lifespan, this.particleBringToTop ? this.bringToTop(n) : this.particleSendToBack && this.sendToBack(n), this.autoScale ? n.setScaleData(this.scaleData) : 1 !== this.minParticleScale || 1 !== this.maxParticleScale ? n.scale.set(a.realInRange(this.minParticleScale, this.maxParticleScale)) : this._minParticleScale.x === this._maxParticleScale.x && this._minParticleScale.y === this._maxParticleScale.y || n.scale.set(a.realInRange(this._minParticleScale.x, this._maxParticleScale.x), a.realInRange(this._minParticleScale.y, this._maxParticleScale.y)), void 0 === s && (Array.isArray(this._frames) ? n.frame = this.game.rnd.pick(this._frames) : n.frame = this._frames), this.autoAlpha ? n.setAlphaData(this.alphaData) : n.alpha = a.realInRange(this.minParticleAlpha, this.maxParticleAlpha), n.blendMode = this.blendMode;
            var h = n.body;
            return h.updateBounds(), h.bounce.copyFrom(this.bounce), h.drag.copyFrom(this.particleDrag), h.velocity.x = a.between(this.minParticleSpeed.x, this.maxParticleSpeed.x), h.velocity.y = a.between(this.minParticleSpeed.y, this.maxParticleSpeed.y), h.angularVelocity = a.between(this.minRotation, this.maxRotation), h.gravity.y = this.gravity, h.angularDrag = this.angularDrag, n.onEmit(), !0
        }, i.Particles.Arcade.Emitter.prototype.destroy = function() {
            this.game.particles.remove(this), i.Group.prototype.destroy.call(this, !0, !1)
        }, i.Particles.Arcade.Emitter.prototype.setSize = function(t, e) {
            return this.area.width = t, this.area.height = e, this
        }, i.Particles.Arcade.Emitter.prototype.setXSpeed = function(t, e) {
            return t = t || 0, e = e || 0, this.minParticleSpeed.x = t, this.maxParticleSpeed.x = e, this
        }, i.Particles.Arcade.Emitter.prototype.setYSpeed = function(t, e) {
            return t = t || 0, e = e || 0, this.minParticleSpeed.y = t, this.maxParticleSpeed.y = e, this
        }, i.Particles.Arcade.Emitter.prototype.setRotation = function(t, e) {
            return t = t || 0, e = e || 0, this.minRotation = t, this.maxRotation = e, this
        }, i.Particles.Arcade.Emitter.prototype.setAlpha = function(t, e, s, n, a) {
            if (void 0 === t && (t = 1), void 0 === e && (e = 1), void 0 === s && (s = 0), void 0 === n && (n = i.Easing.Linear.None), void 0 === a && (a = !1), this.minParticleAlpha = t, this.maxParticleAlpha = e, this.autoAlpha = !1, s > 0 && t !== e) {
                var o = {
                        v: t
                    },
                    r = this.game.make.tween(o).to({
                        v: e
                    }, s, n);
                r.yoyo(a), this.alphaData = r.generateData(60), this.alphaData.reverse(), this.autoAlpha = !0
            }
            return this
        }, i.Particles.Arcade.Emitter.prototype.setScale = function(t, e, s, n, a, o, r) {
            if (void 0 === t && (t = 1), void 0 === e && (e = 1), void 0 === s && (s = 1), void 0 === n && (n = 1), void 0 === a && (a = 0), void 0 === o && (o = i.Easing.Linear.None), void 0 === r && (r = !1), this.minParticleScale = 1, this.maxParticleScale = 1, this._minParticleScale.set(t, s), this._maxParticleScale.set(e, n), this.autoScale = !1, a > 0 && (t !== e || s !== n)) {
                var h = {
                        x: t,
                        y: s
                    },
                    l = this.game.make.tween(h).to({
                        x: e,
                        y: n
                    }, a, o);
                l.yoyo(r), this.scaleData = l.generateData(60), this.scaleData.reverse(), this.autoScale = !0
            }
            return this
        }, i.Particles.Arcade.Emitter.prototype.at = function(t) {
            return t.center ? (this.emitX = t.center.x, this.emitY = t.center.y) : (this.emitX = t.world.x + t.anchor.x * t.width, this.emitY = t.world.y + t.anchor.y * t.height), this
        }, Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "width", {
            get: function() {
                return this.area.width
            },
            set: function(t) {
                this.area.width = t
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "height", {
            get: function() {
                return this.area.height
            },
            set: function(t) {
                this.area.height = t
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "x", {
            get: function() {
                return this.emitX
            },
            set: function(t) {
                this.emitX = t
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "y", {
            get: function() {
                return this.emitY
            },
            set: function(t) {
                this.emitY = t
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "left", {
            get: function() {
                return Math.floor(this.x - this.area.width / 2)
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "right", {
            get: function() {
                return Math.floor(this.x + this.area.width / 2)
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "top", {
            get: function() {
                return Math.floor(this.y - this.area.height / 2)
            }
        }), Object.defineProperty(i.Particles.Arcade.Emitter.prototype, "bottom", {
            get: function() {
                return Math.floor(this.y + this.area.height / 2)
            }
        }), i.Weapon = function(t, e) {
            i.Plugin.call(this, t, e), this.bullets = null, this.autoExpandBulletsGroup = !1, this.autofire = !1, this.shots = 0, this.fireLimit = 0, this.fireRate = 100, this.fireRateVariance = 0, this.fireFrom = new i.Rectangle(0, 0, 1, 1), this.fireAngle = i.ANGLE_UP, this.bulletInheritSpriteSpeed = !1, this.bulletAnimation = "", this.bulletFrameRandom = !1, this.bulletFrameCycle = !1, this.bulletWorldWrap = !1, this.bulletWorldWrapPadding = 0, this.bulletAngleOffset = 0, this.bulletAngleVariance = 0, this.bulletSpeed = 200, this.bulletSpeedVariance = 0, this.bulletLifespan = 0, this.bulletKillDistance = 0, this.bulletGravity = new i.Point(0, 0), this.bulletRotateToVelocity = !1, this.bulletKey = "", this.bulletFrame = "", this._bulletClass = i.Bullet, this._bulletCollideWorldBounds = !1, this._bulletKillType = i.Weapon.KILL_WORLD_BOUNDS, this._data = {
                customBody: !1,
                width: 0,
                height: 0,
                offsetX: 0,
                offsetY: 0
            }, this.bounds = new i.Rectangle, this.bulletBounds = t.world.bounds, this.bulletFrames = [], this.bulletFrameIndex = 0, this.anims = {}, this.onFire = new i.Signal, this.onKill = new i.Signal, this.onFireLimit = new i.Signal, this.trackedSprite = null, this.trackedPointer = null, this.trackRotation = !1, this.trackOffset = new i.Point, this._nextFire = 0, this._rotatedPoint = new i.Point
        }, i.Weapon.prototype = Object.create(i.Plugin.prototype), i.Weapon.prototype.constructor = i.Weapon, i.Weapon.KILL_NEVER = 0, i.Weapon.KILL_LIFESPAN = 1, i.Weapon.KILL_DISTANCE = 2, i.Weapon.KILL_WEAPON_BOUNDS = 3, i.Weapon.KILL_CAMERA_BOUNDS = 4, i.Weapon.KILL_WORLD_BOUNDS = 5, i.Weapon.KILL_STATIC_BOUNDS = 6, i.Weapon.prototype.createBullets = function(t, e, s, n) {
            return void 0 === t && (t = 1), void 0 === n && (n = this.game.world), this.bullets || (this.bullets = this.game.add.physicsGroup(i.Physics.ARCADE, n), this.bullets.classType = this._bulletClass), 0 !== t && (-1 === t && (this.autoExpandBulletsGroup = !0, t = 1), this.bullets.createMultiple(t, e, s), this.bullets.setAll("data.bulletManager", this), this.bulletKey = e, this.bulletFrame = s), this
        }, i.Weapon.prototype.forEach = function(t, e) {
            return this.bullets.forEachExists(t, e, arguments), this
        }, i.Weapon.prototype.pauseAll = function() {
            return this.bullets.setAll("body.enable", !1), this
        }, i.Weapon.prototype.resumeAll = function() {
            return this.bullets.setAll("body.enable", !0), this
        }, i.Weapon.prototype.killAll = function() {
            return this.bullets.callAllExists("kill", !0), this.bullets.setAll("body.enable", !0), this
        }, i.Weapon.prototype.resetShots = function(t) {
            return this.shots = 0, void 0 !== t && (this.fireLimit = t), this
        }, i.Weapon.prototype.destroy = function() {
            this.parent.remove(this, !1), this.bullets.destroy(), this.game = null, this.parent = null, this.active = !1, this.visible = !1
        }, i.Weapon.prototype.update = function() {
            this._bulletKillType === i.Weapon.KILL_WEAPON_BOUNDS && (this.trackedSprite ? (this.trackedSprite.updateTransform(), this.bounds.centerOn(this.trackedSprite.worldPosition.x, this.trackedSprite.worldPosition.y)) : this.trackedPointer && this.bounds.centerOn(this.trackedPointer.worldX, this.trackedPointer.worldY)), this.autofire && this.fire()
        }, i.Weapon.prototype.trackSprite = function(t, e, i, s) {
            return void 0 === e && (e = 0), void 0 === i && (i = 0), void 0 === s && (s = !1), this.trackedPointer = null, this.trackedSprite = t, this.trackRotation = s, this.trackOffset.set(e, i), this
        }, i.Weapon.prototype.trackPointer = function(t, e, i) {
            return void 0 === t && (t = this.game.input.activePointer), void 0 === e && (e = 0), void 0 === i && (i = 0), this.trackedPointer = t, this.trackedSprite = null, this.trackRotation = !1, this.trackOffset.set(e, i), this
        }, i.Weapon.prototype.fire = function(t, e, s) {
            if (this.game.time.now < this._nextFire || this.fireLimit > 0 && this.shots === this.fireLimit) return !1;
            var n = this.bulletSpeed;
            0 !== this.bulletSpeedVariance && (n += i.Math.between(-this.bulletSpeedVariance, this.bulletSpeedVariance)), t ? this.fireFrom.width > 1 ? this.fireFrom.centerOn(t.x, t.y) : (this.fireFrom.x = t.x, this.fireFrom.y = t.y) : this.trackedSprite ? (this.trackRotation ? (this._rotatedPoint.set(this.trackedSprite.world.x + this.trackOffset.x, this.trackedSprite.world.y + this.trackOffset.y), this._rotatedPoint.rotate(this.trackedSprite.world.x, this.trackedSprite.world.y, this.trackedSprite.rotation), this.fireFrom.width > 1 ? this.fireFrom.centerOn(this._rotatedPoint.x, this._rotatedPoint.y) : (this.fireFrom.x = this._rotatedPoint.x, this.fireFrom.y = this._rotatedPoint.y)) : this.fireFrom.width > 1 ? this.fireFrom.centerOn(this.trackedSprite.world.x + this.trackOffset.x, this.trackedSprite.world.y + this.trackOffset.y) : (this.fireFrom.x = this.trackedSprite.world.x + this.trackOffset.x, this.fireFrom.y = this.trackedSprite.world.y + this.trackOffset.y), this.bulletInheritSpriteSpeed && (n += this.trackedSprite.body.speed)) : this.trackedPointer && (this.fireFrom.width > 1 ? this.fireFrom.centerOn(this.trackedPointer.world.x + this.trackOffset.x, this.trackedPointer.world.y + this.trackOffset.y) : (this.fireFrom.x = this.trackedPointer.world.x + this.trackOffset.x, this.fireFrom.y = this.trackedPointer.world.y + this.trackOffset.y));
            var a = this.fireFrom.width > 1 ? this.fireFrom.randomX : this.fireFrom.x,
                o = this.fireFrom.height > 1 ? this.fireFrom.randomY : this.fireFrom.y,
                r = this.trackRotation ? this.trackedSprite.angle : this.fireAngle;
            void 0 !== e && void 0 !== s && (r = this.game.math.radToDeg(Math.atan2(s - o, e - a))), 0 !== this.bulletAngleVariance && (r += i.Math.between(-this.bulletAngleVariance, this.bulletAngleVariance));
            var h = 0,
                l = 0;
            0 === r || 180 === r ? h = Math.cos(this.game.math.degToRad(r)) * n : 90 === r || 270 === r ? l = Math.sin(this.game.math.degToRad(r)) * n : (h = Math.cos(this.game.math.degToRad(r)) * n, l = Math.sin(this.game.math.degToRad(r)) * n);
            var c = null;
            if (this.autoExpandBulletsGroup ? (c = this.bullets.getFirstExists(!1, !0, a, o, this.bulletKey, this.bulletFrame)).data.bulletManager = this : c = this.bullets.getFirstExists(!1), c) {
                if (c.reset(a, o), c.data.fromX = a, c.data.fromY = o, c.data.killType = this.bulletKillType, c.data.killDistance = this.bulletKillDistance, c.data.rotateToVelocity = this.bulletRotateToVelocity, this.bulletKillType === i.Weapon.KILL_LIFESPAN && (c.lifespan = this.bulletLifespan), c.angle = r + this.bulletAngleOffset, "" !== this.bulletAnimation) {
                    if (null === c.animations.getAnimation(this.bulletAnimation)) {
                        var u = this.anims[this.bulletAnimation];
                        c.animations.add(u.name, u.frames, u.frameRate, u.loop, u.useNumericIndex)
                    }
                    c.animations.play(this.bulletAnimation)
                } else this.bulletFrameCycle ? (c.frame = this.bulletFrames[this.bulletFrameIndex], ++this.bulletFrameIndex >= this.bulletFrames.length && (this.bulletFrameIndex = 0)) : this.bulletFrameRandom && (c.frame = this.bulletFrames[Math.floor(Math.random() * this.bulletFrames.length)]); if (c.data.bodyDirty && (this._data.customBody && c.body.setSize(this._data.width, this._data.height, this._data.offsetX, this._data.offsetY), c.body.collideWorldBounds = this.bulletCollideWorldBounds, c.data.bodyDirty = !1), c.body.velocity.set(h, l), c.body.gravity.set(this.bulletGravity.x, this.bulletGravity.y), 0 !== this.bulletSpeedVariance) {
                    var d = this.fireRate;
                    (d += i.Math.between(-this.fireRateVariance, this.fireRateVariance)) < 0 && (d = 0), this._nextFire = this.game.time.now + d
                } else this._nextFire = this.game.time.now + this.fireRate;
                this.shots++, this.onFire.dispatch(c, this, n), this.fireLimit > 0 && this.shots === this.fireLimit && this.onFireLimit.dispatch(this, this.fireLimit)
            }
            return c
        }, i.Weapon.prototype.fireAtPointer = function(t) {
            return void 0 === t && (t = this.game.input.activePointer), this.fire(null, t.worldX, t.worldY)
        }, i.Weapon.prototype.fireAtSprite = function(t) {
            return this.fire(null, t.world.x, t.world.y)
        }, i.Weapon.prototype.fireAtXY = function(t, e) {
            return this.fire(null, t, e)
        }, i.Weapon.prototype.setBulletBodyOffset = function(t, e, i, s) {
            return void 0 === i && (i = 0), void 0 === s && (s = 0), this._data.customBody = !0, this._data.width = t, this._data.height = e, this._data.offsetX = i, this._data.offsetY = s, this.bullets.callAll("body.setSize", "body", t, e, i, s), this.bullets.setAll("data.bodyDirty", !1), this
        }, i.Weapon.prototype.setBulletFrames = function(t, e, s, n) {
            return void 0 === s && (s = !0), void 0 === n && (n = !1), this.bulletFrames = i.ArrayUtils.numberArray(t, e), this.bulletFrameIndex = 0, this.bulletFrameCycle = s, this.bulletFrameRandom = n, this
        }, i.Weapon.prototype.addBulletAnimation = function(t, e, i, s, n) {
            return this.anims[t] = {
                name: t,
                frames: e,
                frameRate: i,
                loop: s,
                useNumericIndex: n
            }, this.bullets.callAll("animations.add", "animations", t, e, i, s, n), this.bulletAnimation = t, this
        }, i.Weapon.prototype.debug = function(t, e, i) {
            void 0 === t && (t = 16), void 0 === e && (e = 32), void 0 === i && (i = !1), this.game.debug.text("Weapon Plugin", t, e), this.game.debug.text("Bullets Alive: " + this.bullets.total + " - Total: " + this.bullets.length, t, e + 24), i && this.bullets.forEachExists(this.game.debug.body, this.game.debug, "rgba(255, 0, 255, 0.8)")
        }, Object.defineProperty(i.Weapon.prototype, "bulletClass", {
            get: function() {
                return this._bulletClass
            },
            set: function(t) {
                this._bulletClass = t, this.bullets.classType = this._bulletClass
            }
        }), Object.defineProperty(i.Weapon.prototype, "bulletKillType", {
            get: function() {
                return this._bulletKillType
            },
            set: function(t) {
                switch (t) {
                    case i.Weapon.KILL_STATIC_BOUNDS:
                    case i.Weapon.KILL_WEAPON_BOUNDS:
                        this.bulletBounds = this.bounds;
                        break;
                    case i.Weapon.KILL_CAMERA_BOUNDS:
                        this.bulletBounds = this.game.camera.view;
                        break;
                    case i.Weapon.KILL_WORLD_BOUNDS:
                        this.bulletBounds = this.game.world.bounds
                }
                this._bulletKillType = t
            }
        }), Object.defineProperty(i.Weapon.prototype, "bulletCollideWorldBounds", {
            get: function() {
                return this._bulletCollideWorldBounds
            },
            set: function(t) {
                this._bulletCollideWorldBounds = t, this.bullets.setAll("body.collideWorldBounds", t), this.bullets.setAll("data.bodyDirty", !1)
            }
        }), Object.defineProperty(i.Weapon.prototype, "x", {
            get: function() {
                return this.fireFrom.x
            },
            set: function(t) {
                this.fireFrom.x = t
            }
        }), Object.defineProperty(i.Weapon.prototype, "y", {
            get: function() {
                return this.fireFrom.y
            },
            set: function(t) {
                this.fireFrom.y = t
            }
        }), i.Bullet = function(t, e, s, n, a) {
            i.Sprite.call(this, t, e, s, n, a), this.anchor.set(.5), this.data = {
                bulletManager: null,
                fromX: 0,
                fromY: 0,
                bodyDirty: !0,
                rotateToVelocity: !1,
                killType: 0,
                killDistance: 0
            }
        }, i.Bullet.prototype = Object.create(i.Sprite.prototype), i.Bullet.prototype.constructor = i.Bullet, i.Bullet.prototype.kill = function() {
            return this.alive = !1, this.exists = !1, this.visible = !1, this.data.bulletManager.onKill.dispatch(this), this
        }, i.Bullet.prototype.update = function() {
            this.exists && (this.data.killType > i.Weapon.KILL_LIFESPAN && (this.data.killType === i.Weapon.KILL_DISTANCE ? this.game.physics.arcade.distanceToXY(this, this.data.fromX, this.data.fromY, !0) > this.data.killDistance && this.kill() : this.data.bulletManager.bulletBounds.intersects(this) || this.kill()), this.data.rotateToVelocity && (this.rotation = Math.atan2(this.body.velocity.y, this.body.velocity.x)), this.data.bulletManager.bulletWorldWrap && this.game.world.wrap(this, this.data.bulletManager.bulletWorldWrapPadding))
        }, i.Video = function(t, e, s) {
            if (void 0 === e && (e = null), void 0 === s && (s = null), this.game = t, this.key = e, this.width = 0, this.height = 0, this.type = i.VIDEO, this.disableTextureUpload = !1, this.touchLocked = !1, this.onPlay = new i.Signal, this.onChangeSource = new i.Signal, this.onComplete = new i.Signal, this.onAccess = new i.Signal, this.onError = new i.Signal, this.onTimeout = new i.Signal, this.timeout = 15e3, this._timeOutID = null, this.video = null, this.videoStream = null, this.isStreaming = !1, this.retryLimit = 20, this.retry = 0, this.retryInterval = 500, this._retryID = null, this._codeMuted = !1, this._muted = !1, this._codePaused = !1, this._paused = !1, this._pending = !1, this._autoplay = !1, this._endCallback = null, this._playCallback = null, e && this.game.cache.checkVideoKey(e)) {
                var n = this.game.cache.getVideo(e);
                n.isBlob ? this.createVideoFromBlob(n.data) : this.video = n.data, this.width = this.video.videoWidth, this.height = this.video.videoHeight
            } else s && this.createVideoFromURL(s, !1);
            this.video && !s ? (this.baseTexture = new PIXI.BaseTexture(this.video), this.baseTexture.forceLoaded(this.width, this.height)) : (this.baseTexture = new PIXI.BaseTexture(i.Cache.DEFAULT.baseTexture.source), this.baseTexture.forceLoaded(this.width, this.height)), this.texture = new PIXI.Texture(this.baseTexture), this.textureFrame = new i.Frame(0, 0, 0, this.width, this.height, "video"), this.texture.setFrame(this.textureFrame), this.texture.valid = !1, null !== e && this.video && (this.texture.valid = this.video.canplay), this.snapshot = null, i.BitmapData && (this.snapshot = new i.BitmapData(this.game, "", this.width, this.height)), !this.game.device.cocoonJS && (this.game.device.iOS || this.game.device.android) || window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock ? this.setTouchLock() : n && (n.locked = !1)
        }, i.Video.prototype = {
            connectToMediaStream: function(t, e) {
                return t && e && (this.video = t, this.videoStream = e, this.isStreaming = !0, this.baseTexture.source = this.video, this.updateTexture(null, this.video.videoWidth, this.video.videoHeight), this.onAccess.dispatch(this)), this
            },
            startMediaStream: function(t, e, i) {
                if (void 0 === t && (t = !1), void 0 === e && (e = null), void 0 === i && (i = null), !this.game.device.getUserMedia) return this.onError.dispatch(this, "No getUserMedia"), !1;
                null !== this.videoStream && (this.videoStream.active ? this.videoStream.active = !1 : this.videoStream.stop()), this.removeVideoElement(), this.video = document.createElement("video"), this.video.setAttribute("autoplay", "autoplay"), null !== e && (this.video.width = e), null !== i && (this.video.height = i), this._timeOutID = window.setTimeout(this.getUserMediaTimeout.bind(this), this.timeout);
                try {
                    navigator.getUserMedia({
                        audio: t,
                        video: !0
                    }, this.getUserMediaSuccess.bind(this), this.getUserMediaError.bind(this))
                } catch (t) {
                    this.getUserMediaError(t)
                }
                return this
            },
            getUserMediaTimeout: function() {
                clearTimeout(this._timeOutID), this.onTimeout.dispatch(this)
            },
            getUserMediaError: function(t) {
                clearTimeout(this._timeOutID), this.onError.dispatch(this, t)
            },
            getUserMediaSuccess: function(t) {
                clearTimeout(this._timeOutID), this.videoStream = t, void 0 !== this.video.mozSrcObject ? this.video.mozSrcObject = t : this.video.src = window.URL && window.URL.createObjectURL(t) || t;
                var e = this;
                this.video.onloadeddata = function() {
                    function t() {
                        if (i > 0)
                            if (e.video.videoWidth > 0) {
                                var s = e.video.videoWidth,
                                    n = e.video.videoHeight;
                                isNaN(e.video.videoHeight) && (n = s / (4 / 3)), e.video.play(), e.isStreaming = !0, e.baseTexture.source = e.video, e.updateTexture(null, s, n), e.onAccess.dispatch(e)
                            } else window.setTimeout(t, 500);
                        i--
                    }
                    var i = 10;
                    t()
                }
            },
            createVideoFromBlob: function(t) {
                var e = this;
                return this.video = document.createElement("video"), this.video.controls = !1, this.video.setAttribute("autoplay", "autoplay"), this.video.addEventListener("loadeddata", function(t) {
                    e.updateTexture(t)
                }, !0), this.video.src = window.URL.createObjectURL(t), this.video.canplay = !0, this
            },
            createVideoFromURL: function(t, e) {
                return void 0 === e && (e = !1), this.texture && (this.texture.valid = !1), this.video = document.createElement("video"), this.video.controls = !1, e && this.video.setAttribute("autoplay", "autoplay"), this.video.src = t, this.video.canplay = !0, this.video.load(), this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval), this.key = t, this
            },
            updateTexture: function(t, e, i) {
                var s = !1;
                void 0 !== e && null !== e || (e = this.video.videoWidth, s = !0), void 0 !== i && null !== i || (i = this.video.videoHeight), this.width = e, this.height = i, this.baseTexture.source !== this.video && (this.baseTexture.source = this.video), this.baseTexture.forceLoaded(e, i), this.texture.frame.resize(e, i), this.texture.width = e, this.texture.height = i, this.texture.valid = !0, this.snapshot && this.snapshot.resize(e, i), s && null !== this.key && (this.onChangeSource.dispatch(this, e, i), this._autoplay && (this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate)))
            },
            complete: function() {
                this.onComplete.dispatch(this)
            },
            play: function(t, e) {
                return void 0 === t && (t = !1), void 0 === e && (e = 1), this.game.sound.onMute && (this.game.sound.onMute.add(this.setMute, this), this.game.sound.onUnMute.add(this.unsetMute, this), this.game.sound.mute && this.setMute()), this.game.onPause.add(this.setPause, this), this.game.onResume.add(this.setResume, this), this._endCallback = this.complete.bind(this), this.video.addEventListener("ended", this._endCallback, !0), this.video.addEventListener("webkitendfullscreen", this._endCallback, !0), this.video.loop = t ? "loop" : "", this.video.playbackRate = e, this.touchLocked ? this._pending = !0 : (this._pending = !1, null !== this.key && (4 !== this.video.readyState ? (this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)) : (this._playCallback = this.playHandler.bind(this), this.video.addEventListener("playing", this._playCallback, !0))), this.video.play(), this.onPlay.dispatch(this, t, e)), this
            },
            playHandler: function() {
                this.video.removeEventListener("playing", this._playCallback, !0), this.updateTexture()
            },
            stop: function() {
                return this.game.sound.onMute && (this.game.sound.onMute.remove(this.setMute, this), this.game.sound.onUnMute.remove(this.unsetMute, this)), this.game.onPause.remove(this.setPause, this), this.game.onResume.remove(this.setResume, this), this.isStreaming ? (this.video.mozSrcObject ? (this.video.mozSrcObject.stop(), this.video.src = null) : (this.video.src = "", this.videoStream.active ? this.videoStream.active = !1 : this.videoStream.getTracks ? this.videoStream.getTracks().forEach(function(t) {
                    t.stop()
                }) : this.videoStream.stop()), this.videoStream = null, this.isStreaming = !1) : (this.video.removeEventListener("ended", this._endCallback, !0), this.video.removeEventListener("webkitendfullscreen", this._endCallback, !0), this.video.removeEventListener("playing", this._playCallback, !0), this.touchLocked ? this._pending = !1 : this.video.pause()), this
            },
            add: function(t) {
                if (Array.isArray(t))
                    for (var e = 0; e < t.length; e++) t[e].loadTexture && t[e].loadTexture(this);
                else t.loadTexture(this);
                return this
            },
            addToWorld: function(t, e, i, s, n, a) {
                n = n || 1, a = a || 1;
                var o = this.game.add.image(t, e, this);
                return o.anchor.set(i, s), o.scale.set(n, a), o
            },
            render: function() {
                !this.disableTextureUpload && this.playing && this.baseTexture.dirty()
            },
            setMute: function() {
                this._muted || (this._muted = !0, this.video.muted = !0)
            },
            unsetMute: function() {
                this._muted && !this._codeMuted && (this._muted = !1, this.video.muted = !1)
            },
            setPause: function() {
                this._paused || this.touchLocked || (this._paused = !0, this.video.pause())
            },
            setResume: function() {
                !this._paused || this._codePaused || this.touchLocked || (this._paused = !1, this.video.ended || this.video.play())
            },
            changeSource: function(t, e) {
                return void 0 === e && (e = !0), this.texture.valid = !1, this.video.pause(), this.retry = this.retryLimit, this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval), this.video.src = t, this.video.load(), this._autoplay = e, e || (this.paused = !0), this
            },
            checkVideoProgress: function() {
                4 === this.video.readyState ? this.updateTexture() : --this.retry > 0 && (this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval))
            },
            setTouchLock: function() {
                this.game.input.touch.addTouchLockCallback(this.unlock, this), this.touchLocked = !0
            },
            unlock: function() {
                if (this.touchLocked = !1, this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate), this.key) {
                    var t = this.game.cache.getVideo(this.key);
                    t && !t.isBlob && (t.locked = !1)
                }
                return !0
            },
            grab: function(t, e, i) {
                if (void 0 === t && (t = !1), void 0 === e && (e = 1), void 0 === i && (i = null), null !== this.snapshot) return t && this.snapshot.cls(), this.snapshot.copy(this.video, 0, 0, this.width, this.height, 0, 0, this.width, this.height, 0, 0, 0, 1, 1, e, i), this.snapshot
            },
            removeVideoElement: function() {
                if (this.video) {
                    for (this.video.parentNode && this.video.parentNode.removeChild(this.video); this.video.hasChildNodes();) this.video.removeChild(this.video.firstChild);
                    this.video.removeAttribute("autoplay"), this.video.removeAttribute("src"), this.video = null
                }
            },
            destroy: function() {
                this.stop(), this.removeVideoElement(), this.touchLocked && this.game.input.touch.removeTouchLockCallback(this.unlock, this), this._retryID && window.clearTimeout(this._retryID)
            }
        }, Object.defineProperty(i.Video.prototype, "currentTime", {
            get: function() {
                return this.video ? this.video.currentTime : 0
            },
            set: function(t) {
                this.video.currentTime = t
            }
        }), Object.defineProperty(i.Video.prototype, "duration", {
            get: function() {
                return this.video ? this.video.duration : 0
            }
        }), Object.defineProperty(i.Video.prototype, "progress", {
            get: function() {
                return this.video ? this.video.currentTime / this.video.duration : 0
            }
        }), Object.defineProperty(i.Video.prototype, "mute", {
            get: function() {
                return this._muted
            },
            set: function(t) {
                if (t = t || null) {
                    if (this._muted) return;
                    this._codeMuted = !0, this.setMute()
                } else {
                    if (!this._muted) return;
                    this._codeMuted = !1, this.unsetMute()
                }
            }
        }), Object.defineProperty(i.Video.prototype, "paused", {
            get: function() {
                return this._paused
            },
            set: function(t) {
                if (t = t || null, !this.touchLocked)
                    if (t) {
                        if (this._paused) return;
                        this._codePaused = !0, this.setPause()
                    } else {
                        if (!this._paused) return;
                        this._codePaused = !1, this.setResume()
                    }
            }
        }), Object.defineProperty(i.Video.prototype, "volume", {
            get: function() {
                return this.video ? this.video.volume : 1
            },
            set: function(t) {
                t < 0 ? t = 0 : t > 1 && (t = 1), this.video && (this.video.volume = t)
            }
        }), Object.defineProperty(i.Video.prototype, "playbackRate", {
            get: function() {
                return this.video ? this.video.playbackRate : 1
            },
            set: function(t) {
                this.video && (this.video.playbackRate = t)
            }
        }), Object.defineProperty(i.Video.prototype, "loop", {
            get: function() {
                return !!this.video && this.video.loop
            },
            set: function(t) {
                t && this.video ? this.video.loop = "loop" : this.video && (this.video.loop = "")
            }
        }), Object.defineProperty(i.Video.prototype, "playing", {
            get: function() {
                return !(this.video.paused && this.video.ended)
            }
        }), i.Video.prototype.constructor = i.Video, void 0 === PIXI.blendModes && (PIXI.blendModes = i.blendModes), void 0 === PIXI.scaleModes && (PIXI.scaleModes = i.scaleModes), void 0 === PIXI.Texture.emptyTexture && (PIXI.Texture.emptyTexture = new PIXI.Texture(new PIXI.BaseTexture)), void 0 === PIXI.DisplayObject._tempMatrix && (PIXI.DisplayObject._tempMatrix = new PIXI.Matrix), void 0 === PIXI.RenderTexture.tempMatrix && (PIXI.RenderTexture.tempMatrix = new PIXI.Matrix), PIXI.Graphics && void 0 === PIXI.Graphics.POLY && (PIXI.Graphics.POLY = i.POLYGON, PIXI.Graphics.RECT = i.RECTANGLE, PIXI.Graphics.CIRC = i.CIRCLE, PIXI.Graphics.ELIP = i.ELLIPSE, PIXI.Graphics.RREC = i.ROUNDEDRECTANGLE), PIXI.TextureSilentFail = !0, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = i), exports.Phaser = i) : "undefined" != typeof define && define.amd ? define("Phaser", e.Phaser = i) : e.Phaser = i, i
    }.call(this);
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    PhaserAds;
! function(t) {
    ! function(t) {
        t[t.start = 0] = "start", t[t.firstQuartile = 1] = "firstQuartile", t[t.midPoint = 2] = "midPoint", t[t.thirdQuartile = 3] = "thirdQuartile", t[t.complete = 4] = "complete"
    }(t.AdEvent || (t.AdEvent = {}));
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.onContentPaused = new Phaser.Signal, s.onContentResumed = new Phaser.Signal, s.onAdProgression = new Phaser.Signal, s.onAdsDisabled = new Phaser.Signal, s.onAdClicked = new Phaser.Signal, s.onAdRewardGranted = new Phaser.Signal, s.onBannerShown = new Phaser.Signal, s.onBannerHidden = new Phaser.Signal, s.bannerActive = !1, s.provider = null, s.wasMuted = !1, Object.defineProperty(t, "ads", {
                value: s
            }), s
        }
        return __extends(i, e), i.prototype.setAdProvider = function(t) {
            this.provider = t, this.provider.setManager(this)
        }, i.prototype.showAd = function() {
            for (var e = [], i = 0; i < arguments.length; i++) e[i] = arguments[i];
            if (null === this.provider) throw new Error("Can not request an ad without an provider, please attach an ad provider!");
            e[0] !== t.AdProvider.CocoonAdType.banner && (this.wasMuted = this.game.sound.mute, this.game.sound.mute = !0), this.provider.showAd.apply(this.provider, e)
        }, i.prototype.preloadAd = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            if (null === this.provider) throw new Error("Can not preload an ad without an provider, please attach an ad provider!");
            this.provider.preloadAd.apply(this.provider, t)
        }, i.prototype.destroyAd = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            if (null === this.provider) throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");
            this.provider.destroyAd.apply(this.provider, t)
        }, i.prototype.hideAd = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            if (null === this.provider) throw new Error("Can not hide an ad without an provider, please attach an ad provider!");
            this.unMuteAfterAd(), this.provider.hideAd.apply(this.provider, t)
        }, i.prototype.adsEnabled = function() {
            return this.provider.adsEnabled
        }, i.prototype.unMuteAfterAd = function() {
            this.wasMuted || (this.game.sound.mute = !1)
        }, i
    }(Phaser.Plugin);
    t.AdManager = e
}(PhaserAds || (PhaserAds = {}));
var PhaserAds;
! function(t) {
    ! function(t) {
        var e;
        ! function(t) {
            t[t.AdMob = 0] = "AdMob", t[t.MoPub = 1] = "MoPub", t[t.Chartboost = 2] = "Chartboost", t[t.Heyzap = 3] = "Heyzap"
        }(e = t.CocoonProvider || (t.CocoonProvider = {}));
        var i;
        ! function(t) {
            t[t.banner = 0] = "banner", t[t.interstitial = 1] = "interstitial", t[t.insentive = 2] = "insentive"
        }(i = t.CocoonAdType || (t.CocoonAdType = {}));
        var s = function() {
            function t(t, i, s) {
                if (this.adsEnabled = !1, this.banner = null, this.bannerShowable = !1, this.interstitial = null, this.interstitialShowable = !1, this.insentive = null, this.insentiveShowable = !1, (t.device.cordova || t.device.crosswalk) && Cocoon && Cocoon.Ad) {
                    switch (this.adsEnabled = !0, i) {
                        default:
                            case e.AdMob:
                            this.cocoonProvider = Cocoon.Ad.AdMob;
                        break;
                        case e.Chartboost:
                            this.cocoonProvider = Cocoon.Ad.Chartboost;
                            break;
                        case e.Heyzap:
                            this.cocoonProvider = Cocoon.Ad.Heyzap;
                            break;
                        case e.MoPub:
                            this.cocoonProvider = Cocoon.Ad.MoPub
                    }
                    this.cocoonProvider.configure(s)
                }
            }
            return t.prototype.setManager = function(t) {
                this.adManager = t
            }, t.prototype.showAd = function(t) {
                if (!this.adsEnabled) return this.adManager.unMuteAfterAd(), void(t !== i.banner && this.adManager.onContentResumed.dispatch());
                if (t === i.banner) {
                    if (!this.bannerShowable || null === this.banner) return void this.adManager.unMuteAfterAd();
                    this.adManager.onBannerShown.dispatch(this.banner.width, this.banner.height), this.adManager.bannerActive = !0, this.banner.show()
                }
                if (t === i.interstitial) {
                    if (!this.interstitialShowable || null === this.interstitial) return this.adManager.unMuteAfterAd(), void this.adManager.onContentResumed.dispatch(i.interstitial);
                    this.interstitial.show()
                }
                if (t === i.insentive) {
                    if (!this.insentiveShowable || null === this.insentive) return this.adManager.unMuteAfterAd(), void this.adManager.onContentResumed.dispatch(i.insentive);
                    this.insentive.show()
                }
            }, t.prototype.preloadAd = function(t, e, s) {
                var n = this;
                this.adsEnabled && (this.destroyAd(t), t === i.banner && (this.banner = this.cocoonProvider.createBanner(e), s && this.banner.setLayout(s), this.banner.on("load", function() {
                    n.bannerShowable = !0
                }), this.banner.on("fail", function() {
                    n.bannerShowable = !1, n.banner = null
                }), this.banner.on("click", function() {
                    n.adManager.onAdClicked.dispatch(i.banner)
                }), this.banner.on("show", function() {}), this.banner.on("dismiss", function() {}), this.banner.load()), t === i.interstitial && (this.interstitial = this.cocoonProvider.createInterstitial(e), this.interstitial.on("load", function() {
                    n.interstitialShowable = !0
                }), this.interstitial.on("fail", function() {
                    n.interstitialShowable = !1, n.interstitial = null
                }), this.interstitial.on("click", function() {
                    n.adManager.onAdClicked.dispatch(i.interstitial)
                }), this.interstitial.on("show", function() {
                    n.adManager.onContentPaused.dispatch(i.interstitial)
                }), this.interstitial.on("dismiss", function() {
                    n.adManager.unMuteAfterAd(), n.adManager.onContentResumed.dispatch(i.interstitial), n.interstitialShowable = !1, n.interstitial = null
                }), this.interstitial.load()), t === i.insentive && (this.insentive = this.cocoonProvider.createRewardedVideo(e), this.insentive.on("load", function() {
                    n.insentiveShowable = !0
                }), this.insentive.on("fail", function() {
                    n.insentiveShowable = !1, n.insentive = null
                }), this.insentive.on("click", function() {
                    n.adManager.onAdClicked.dispatch(i.insentive)
                }), this.insentive.on("show", function() {
                    n.adManager.onContentPaused.dispatch(i.insentive)
                }), this.insentive.on("dismiss", function() {
                    n.adManager.unMuteAfterAd(), n.adManager.onContentResumed.dispatch(i.insentive), n.insentiveShowable = !1, n.insentive = null
                }), this.insentive.on("reward", function() {
                    n.adManager.unMuteAfterAd(), n.adManager.onAdRewardGranted.dispatch(i.insentive), n.insentiveShowable = !1, n.insentive = null
                }), this.insentive.load()))
            }, t.prototype.destroyAd = function(t) {
                if (this.adsEnabled) {
                    if (t === i.banner && null !== this.banner) {
                        try {
                            this.cocoonProvider.releaseBanner(this.banner)
                        } catch (t) {}
                        this.banner = null, this.bannerShowable = !1
                    }
                    t === i.interstitial && null !== this.interstitial && (this.cocoonProvider.releaseInterstitial(this.interstitial), this.interstitial = null, this.interstitialShowable = !1)
                }
            }, t.prototype.hideAd = function(t) {
                this.adsEnabled && (t === i.interstitial && null !== this.interstitial && this.interstitial.hide(), t === i.banner && null !== this.banner && (this.adManager.bannerActive && (this.adManager.bannerActive = !1, this.adManager.onBannerHidden.dispatch(this.banner.width, this.banner.height)), this.banner.hide()), t === i.insentive && null !== this.insentive && this.insentive.hide())
            }, t
        }();
        t.CocoonAds = s
    }(t.AdProvider || (t.AdProvider = {}))
}(PhaserAds || (PhaserAds = {}));
var PhaserAds;
! function(t) {
    ! function(t) {
        var e;
        ! function(t) {
            t[t.Interstitial = 0] = "Interstitial", t[t.Video = 1] = "Video", t[t.Rewarded = 2] = "Rewarded", t[t.Banner = 3] = "Banner"
        }(e = t.HeyzapAdTypes || (t.HeyzapAdTypes = {}));
        var i = function() {
            function t(t, e) {
                var i = this;
                this.adsEnabled = !1, (t.device.cordova || t.device.crosswalk) && (this.adsEnabled = !0, HeyzapAds.start(e).then(function() {}, function(t) {
                    i.adsEnabled = !1
                }))
            }
            return t.prototype.setManager = function(t) {
                this.adManager = t
            }, t.prototype.showAd = function(t, i) {
                var s = this;
                switch (this.adsEnabled || (this.adManager.unMuteAfterAd(), this.adManager.onContentResumed.dispatch()), t) {
                    case e.Interstitial:
                        HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE, function() {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch(HeyzapAds.InterstitialAd.Events.HIDE)
                        }), HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED, function() {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch(HeyzapAds.InterstitialAd.Events.SHOW_FAILED)
                        }), HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED, function() {
                            s.adManager.onAdClicked.dispatch(HeyzapAds.InterstitialAd.Events.CLICKED)
                        }), HeyzapAds.InterstitialAd.show().then(function() {
                            s.adManager.onContentPaused.dispatch()
                        }, function(t) {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch()
                        });
                        break;
                    case e.Video:
                        HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE, function() {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch(HeyzapAds.VideoAd.Events.HIDE)
                        }), HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED, function() {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch(HeyzapAds.VideoAd.Events.SHOW_FAILED)
                        }), HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED, function() {
                            s.adManager.onAdClicked.dispatch(HeyzapAds.VideoAd.Events.CLICKED)
                        }), HeyzapAds.VideoAd.show().then(function() {
                            s.adManager.onContentPaused.dispatch()
                        }, function(t) {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch()
                        });
                        break;
                    case e.Rewarded:
                        HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE, function() {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch(HeyzapAds.IncentivizedAd.Events.HIDE)
                        }), HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED, function() {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)
                        }), HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED, function() {
                            s.adManager.onAdClicked.dispatch(HeyzapAds.IncentivizedAd.Events.CLICKED)
                        }), HeyzapAds.IncentivizedAd.show().then(function() {
                            s.adManager.onContentPaused.dispatch()
                        }, function(t) {
                            s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch()
                        });
                        break;
                    case e.Banner:
                        HeyzapAds.BannerAd.show(i).then(function() {}, function(t) {})
                }
            }, t.prototype.preloadAd = function(t) {
                this.adsEnabled && t === e.Rewarded && HeyzapAds.IncentivizedAd.fetch().then(function() {}, function(t) {})
            }, t.prototype.destroyAd = function(t) {
                this.adsEnabled && t === e.Banner && HeyzapAds.BannerAd.destroy().then(function() {}, function(t) {})
            }, t.prototype.hideAd = function(t) {
                this.adsEnabled && t === e.Banner && HeyzapAds.BannerAd.hide().then(function() {}, function(t) {})
            }, t
        }();
        t.CordovaHeyzap = i
    }(t.AdProvider || (t.AdProvider = {}))
}(PhaserAds || (PhaserAds = {}));
var PhaserAds;
! function(t) {
    ! function(t) {
        ! function(t) {
            t[t.preroll = 0] = "preroll", t[t.midroll = 1] = "midroll"
        }(t.GameDistributionAdType || (t.GameDistributionAdType = {}));
        var e = function() {
            function t(t, e, i) {
                var s = this;
                this.adsEnabled = !0, this.areAdsEnabled(), GD_OPTIONS = {
                        gameId: e,
                        userId: i,
                        advertisementSettings: {
                            autoplay: !1
                        },
                        onEvent: function(t) {
                            switch (t.name) {
                                case "SDK_GAME_START":
                                    "undefined" != typeof gdApi && gdApi.play(), s.adManager.unMuteAfterAd(), s.adManager.onContentResumed.dispatch();
                                    break;
                                case "SDK_GAME_PAUSE":
                                    s.adManager.onContentPaused.dispatch()
                            }
                        }
                    },
                    function(t, e, i) {
                        var s, n = t.getElementsByTagName(e)[0];
                        t.getElementById(i) || ((s = t.createElement(e)).id = i, s.src = "./main.min.js", n.parentNode.insertBefore(s, n))
                    }(document, "script", "gamedistribution-jssdk")
            }
            return t.prototype.setManager = function(t) {
                this.adManager = t
            }, t.prototype.showAd = function(t) {
                if (this.adsEnabled) {
                    if ("undefined" == typeof gdApi || gdApi && void 0 === gdApi.showBanner) return this.adsEnabled = !1, this.adManager.unMuteAfterAd(), void this.adManager.onContentResumed.dispatch();
                    gdApi.showBanner()
                } else this.adManager.unMuteAfterAd(), this.adManager.onContentResumed.dispatch()
            }, t.prototype.preloadAd = function() {}, t.prototype.destroyAd = function() {}, t.prototype.hideAd = function() {}, t.prototype.areAdsEnabled = function() {
                var t = this,
                    e = document.createElement("div");
                e.innerHTML = "&nbsp;", e.className = "adsbox", e.style.position = "absolute", e.style.fontSize = "10px", document.body.appendChild(e);
                var i = function() {
                    var t = !0;
                    return 0 === e.offsetHeight && (t = !1), e.parentNode.removeChild(e), t
                };
                window.setTimeout(function() {
                    t.adsEnabled = i()
                }, 100)
            }, t
        }();
        t.GameDistributionAds = e
    }(t.AdProvider || (t.AdProvider = {}))
}(PhaserAds || (PhaserAds = {}));
var PhaserAds;
! function(t) {
    ! function(e) {
        var i = function() {
            function e(t, e) {
                this.adsManager = null, this.googleEnabled = !1, this.adsEnabled = !0, this.adTagUrl = "", this.adRequested = !1, this.adManager = null, this.resizeListener = null, this.areAdsEnabled(), "undefined" != typeof google && (this.googleEnabled = !0, this.gameContent = "string" == typeof t.parent ? document.getElementById(t.parent) : t.parent, this.gameContent.style.position = "absolute", this.gameContent.style.width = "100%", this.adContent = this.gameContent.parentNode.appendChild(document.createElement("div")), this.adContent.id = "phaser-ad-container", this.adContent.style.position = "absolute", this.adContent.style.zIndex = "9999", this.adContent.style.display = "none", this.adContent.style.top = "0", this.adContent.style.left = "0", this.adContent.style.width = "100%", this.adContent.style.height = "100%", this.adContent.style.overflow = "hidden", this.adTagUrl = e, this.game = t, this.adDisplay = new google.ima.AdDisplayContainer(this.adContent), google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED), google.ima.settings.setLocale("nl"), this.adLoader = new google.ima.AdsLoader(this.adDisplay), this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, this.onAdManagerLoader, !1, this), this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError, !1, this))
            }
            return e.prototype.setManager = function(t) {
                this.adManager = t
            }, e.prototype.showAd = function(t) {
                if (!this.adRequested)
                    if (this.adsEnabled || this.adManager.onAdsDisabled.dispatch(!0), this.googleEnabled) {
                        this.adDisplay.initialize();
                        var e = new google.ima.AdsRequest;
                        e.adTagUrl = this.adTagUrl + this.parseCustomParams(t);
                        var i = window.innerWidth,
                            s = window.innerHeight;
                        this.game.scale.isFullScreen && document.body.clientHeight < window.innerHeight && (s = document.body.clientHeight, i = document.body.clientWidth), e.linearAdSlotWidth = i, e.linearAdSlotHeight = s, e.nonLinearAdSlotWidth = i, e.nonLinearAdSlotHeight = s, e.forceNonLinearFullSlot = !0;
                        try {
                            this.adRequested = !0, this.adLoader.requestAds(e)
                        } catch (t) {
                            this.onContentResumeRequested()
                        }
                    } else this.onContentResumeRequested()
            }, e.prototype.preloadAd = function() {}, e.prototype.destroyAd = function() {}, e.prototype.hideAd = function() {}, e.prototype.onAdManagerLoader = function(t) {
                var e = this,
                    i = new google.ima.AdsRenderingSettings;
                i.restoreCustomPlaybackStateOnAdBreakComplete = !0;
                var s = t.getAdsManager(this.gameContent, i);
                this.adsManager = s, s.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, this.onContentPauseRequested, !1, this), s.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, this.onContentResumeRequested, !1, this), s.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, this.onAdError, !1, this), [google.ima.AdEvent.Type.ALL_ADS_COMPLETED, google.ima.AdEvent.Type.CLICK, google.ima.AdEvent.Type.COMPLETE, google.ima.AdEvent.Type.FIRST_QUARTILE, google.ima.AdEvent.Type.LOADED, google.ima.AdEvent.Type.MIDPOINT, google.ima.AdEvent.Type.PAUSED, google.ima.AdEvent.Type.STARTED, google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(t) {
                    s.addEventListener(t, e.onAdEvent, !1, e)
                });
                try {
                    this.adContent.style.display = "block";
                    var n = window.innerWidth,
                        a = window.innerHeight;
                    this.adsManager.init(n, a, google.ima.ViewMode.NORMAL), this.adsManager.start(), this.resizeListener = function() {
                        null !== e.adsManager && e.adsManager.resize(window.innerWidth, window.innerHeight, google.ima.ViewMode.NORMAL)
                    }, window.addEventListener("resize", this.resizeListener)
                } catch (t) {
                    this.onAdError(t)
                }
            }, e.prototype.onAdEvent = function(e) {
                switch (e.type) {
                    case google.ima.AdEvent.Type.CLICK:
                        this.adManager.onAdClicked.dispatch();
                        break;
                    case google.ima.AdEvent.Type.LOADED:
                        this.adRequested = !1;
                        var i = e.getAd();
                        i.isLinear() || this.onContentResumeRequested();
                        break;
                    case google.ima.AdEvent.Type.STARTED:
                        this.adManager.onAdProgression.dispatch(t.AdEvent.start);
                        break;
                    case google.ima.AdEvent.Type.FIRST_QUARTILE:
                        this.adManager.onAdProgression.dispatch(t.AdEvent.firstQuartile);
                        break;
                    case google.ima.AdEvent.Type.MIDPOINT:
                        this.adManager.onAdProgression.dispatch(t.AdEvent.midPoint);
                        break;
                    case google.ima.AdEvent.Type.THIRD_QUARTILE:
                        this.adManager.onAdProgression.dispatch(t.AdEvent.thirdQuartile);
                        break;
                    case google.ima.AdEvent.Type.COMPLETE:
                        this.adManager.onAdProgression.dispatch(t.AdEvent.complete);
                        break;
                    case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:
                        this.onContentResumeRequested()
                }
            }, e.prototype.onAdError = function(t) {
                null !== this.adsManager && (this.adsManager.destroy(), this.adsManager = null, null !== this.resizeListener && (window.removeEventListener("resize", this.resizeListener), this.resizeListener = null)), this.adRequested && (this.adRequested = !1), this.onContentResumeRequested()
            }, e.prototype.onContentPauseRequested = function() {
                this.adManager.onContentPaused.dispatch()
            }, e.prototype.onContentResumeRequested = function() {
                if ("undefined" == typeof google) return this.adManager.unMuteAfterAd(), void this.adManager.onContentResumed.dispatch();
                this.adContent.style.display = "none", this.adManager.unMuteAfterAd(), this.adManager.onContentResumed.dispatch()
            }, e.prototype.parseCustomParams = function(t) {
                if (void 0 !== t) {
                    var e = "";
                    for (var i in t) t.hasOwnProperty(i) && (e.length > 0 && (e += "&"), e += i + "=" + (Array.isArray(t[i]) ? t[i].join(",") : t[i]));
                    return "&cust_params=" + encodeURIComponent(e)
                }
                return ""
            }, e.prototype.areAdsEnabled = function() {
                var t = this,
                    e = document.createElement("div");
                e.innerHTML = "&nbsp;", e.className = "adsbox", e.style.position = "absolute", e.style.fontSize = "10px", document.body.appendChild(e);
                var i = function() {
                    var t = !0;
                    return 0 === e.offsetHeight && (t = !1), e.parentNode.removeChild(e), t
                };
                window.setTimeout(function() {
                    t.adsEnabled = i()
                }, 100)
            }, e
        }();
        e.Ima3 = i
    }(t.AdProvider || (t.AdProvider = {}))
}(PhaserAds || (PhaserAds = {}));
var __extends = this && this.__extends || function(t, e) {
        function i() {
            this.constructor = t
        }
        for (var s in e) e.hasOwnProperty(s) && (t[s] = e[s]);
        t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i)
    },
    PhaserCachebuster;
! function(t) {
    var e = function(t) {
        function e(e, i) {
            var s = t.call(this, e, i) || this;
            return s.patchLoader(), s
        }
        return __extends(e, t), e.prototype.patchLoader = function() {
            Object.defineProperty(Phaser.Loader, "cacheBuster", {
                value: null
            }), Phaser.Loader.prototype.transformUrl = function(t, e) {
                return t ? (null !== this.cacheBuster && null === t.match(/^(data:)/) && (t += "?v=" + this.cacheBuster), t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? t : this.baseURL + e.path + t) : ""
            }
        }, e
    }(Phaser.Plugin);
    t.CacheBuster = e
}(PhaserCachebuster || (PhaserCachebuster = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    PhaserInput;
! function(t) {
    var e;
    ! function(t) {
        t[t.text = 0] = "text", t[t.password = 1] = "password", t[t.number = 2] = "number"
    }(e = t.InputType || (t.InputType = {}));
    var i = function() {
        function t(t, i, s, n, a, o) {
            void 0 === s && (s = e.text), void 0 === n && (n = "");
            var r = this;
            this.id = i, this.type = s, this.game = t, this.focusIn = a, this.focusOut = o;
            var h = this.game.canvas.getBoundingClientRect().top + document.body.scrollTop;
            this.element = document.createElement("input"), this.element.id = i, this.element.style.position = "absolute", this.element.style.top = h + "px", this.element.style.left = (-40).toString() + "px", this.element.style.width = 10..toString() + "px", this.element.style.height = 10..toString() + "px", this.element.style.border = "0px", this.element.value = this.value, this.element.type = e[s], this.element.addEventListener("focusin", function() {
                r.focusIn instanceof Phaser.Signal && r.focusIn.dispatch()
            }), this.element.addEventListener("focusout", function() {
                r.focusOut instanceof Phaser.Signal && r.focusOut.dispatch()
            }), document.body.appendChild(this.element)
        }
        return t.prototype.addKeyUpListener = function(t) {
            this.keyUpCallback = t, document.addEventListener("keyup", this.keyUpCallback), this.element.addEventListener("input", this.keyUpCallback)
        }, t.prototype.blockKeyDownEvents = function() {
            document.addEventListener("keydown", this.preventKeyPropagation)
        }, t.prototype.preventKeyPropagation = function(t) {
            t.stopPropagation ? t.stopPropagation() : event.cancelBubble = !0
        }, t.prototype.unblockKeyDownEvents = function() {
            document.removeEventListener("keydown", this.preventKeyPropagation)
        }, t.prototype.removeEventListener = function() {
            document.removeEventListener("keyup", this.keyUpCallback), this.element.removeEventListener("input", this.keyUpCallback)
        }, t.prototype.destroy = function() {
            document.body.removeChild(this.element)
        }, t.prototype.setMax = function(t, i) {
            if (void 0 !== t)
                if (this.type === e.text || this.type === e.password) this.element.maxLength = parseInt(t, 10);
                else if (this.type === e.number) {
                if (this.element.max = t, void 0 === i) return;
                this.element.min = i
            }
        }, Object.defineProperty(t.prototype, "value", {
            get: function() {
                return this.element.value
            },
            set: function(t) {
                this.element.value = t
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.focus = function() {
            var t = this;
            if (this.element.focus(), !this.game.device.desktop && this.game.device.chrome) var e = window.innerWidth,
                i = window.innerHeight,
                s = !1,
                n = setInterval(function() {
                    (e > window.innerWidth || i > window.innerHeight) && (s = !0), s && e === window.innerWidth && i === window.innerHeight && (t.focusOut instanceof Phaser.Signal && t.focusOut.dispatch(), clearInterval(n))
                }, 50)
        }, t.prototype.blur = function() {
            this.element.blur()
        }, Object.defineProperty(t.prototype, "hasSelection", {
            get: function() {
                return this.type !== e.number && this.element.selectionStart !== this.element.selectionEnd
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "caretStart", {
            get: function() {
                return this.element.selectionEnd
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "caretEnd", {
            get: function() {
                return this.element.selectionStart
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.getCaretPosition = function() {
            return this.type === e.number ? -1 : this.element.selectionStart
        }, t.prototype.setCaretPosition = function(t) {
            this.type !== e.number && this.element.setSelectionRange(t, t)
        }, t
    }();
    t.InputElement = i
}(PhaserInput || (PhaserInput = {}));
var PhaserInput;
! function(t) {
    var e;
    ! function(t) {
        t[t.none = 0] = "none", t[t.lower = 1] = "lower", t[t.upper = 2] = "upper"
    }(e = t.ForceCase || (t.ForceCase = {}));
    var i = function(i) {
        function s(s, n, a, o) {
            void 0 === o && (o = {});
            var r = i.call(this, s, n, a) || this;
            return r.focusOutOnEnter = !0, r.placeHolder = null, r.box = null, r.focus = !1, r.value = "", r.windowScale = 1, r.blockInput = !0, r.focusIn = new Phaser.Signal, r.focusOut = new Phaser.Signal, r.blink = !0, r.cnt = 0, r.inputOptions = o, r.inputOptions.width = "number" == typeof o.width ? o.width : 150, r.inputOptions.padding = "number" == typeof o.padding ? o.padding : 0, r.inputOptions.textAlign = o.textAlign || "left", r.inputOptions.type = o.type || t.InputType.text, r.inputOptions.forceCase = o.forceCase ? o.forceCase : e.none, r.inputOptions.borderRadius = "number" == typeof o.borderRadius ? o.borderRadius : 0, r.inputOptions.height = "number" == typeof o.height ? o.height : 14, r.inputOptions.fillAlpha = void 0 === o.fillAlpha ? 1 : o.fillAlpha, r.inputOptions.selectionColor = o.selectionColor || "rgba(179, 212, 253, 0.8)", r.inputOptions.zoom = !s.device.desktop && (o.zoom || !1), r.box = new t.InputBox(r.game, o), r.setTexture(r.box.generateTexture()), r.textMask = new t.TextMask(r.game, o), r.addChild(r.textMask), r.domElement = new t.InputElement(r.game, "phaser-input-" + (1e4 * Math.random() | 0).toString(), r.inputOptions.type, r.value, r.focusIn, r.focusOut), r.domElement.setMax(r.inputOptions.max, r.inputOptions.min), r.selection = new t.SelectionHighlight(r.game, r.inputOptions), r.selection.mask = r.textMask, r.addChild(r.selection), o.placeHolder && o.placeHolder.length > 0 && (r.placeHolder = new Phaser.Text(s, r.inputOptions.padding, r.inputOptions.padding, o.placeHolder, {
                font: o.font || "14px Arial",
                fontWeight: o.fontWeight || "normal",
                fill: o.placeHolderColor || "#bfbebd"
            }), r.placeHolder.mask = r.textMask, r.addChild(r.placeHolder)), r.cursor = new Phaser.Text(s, r.inputOptions.padding, r.inputOptions.padding - 2, "|", {
                font: o.font || "14px Arial",
                fontWeight: o.fontWeight || "normal",
                fill: o.cursorColor || "#000000"
            }), r.cursor.visible = !1, r.addChild(r.cursor), r.text = new Phaser.Text(s, r.inputOptions.padding, r.inputOptions.padding, "", {
                font: o.font || "14px Arial",
                fontWeight: o.fontWeight || "normal",
                fill: o.fill || "#000000"
            }), r.text.mask = r.textMask, r.addChild(r.text), r.offscreenText = new Phaser.Text(s, r.inputOptions.padding, r.inputOptions.padding, "", {
                font: o.font || "14px Arial",
                fontWeight: o.fontWeight || "normal",
                fill: o.fill || "#000000"
            }), r.updateTextAlignment(), r.inputEnabled = !0, r.input.useHandCursor = !0, r.game.input.onDown.add(r.checkDown, r), r.focusOut.add(function() {
                t.KeyboardOpen && (r.endFocus(), r.inputOptions.zoom && r.zoomOut())
            }), r
        }
        return __extends(s, i), Object.defineProperty(s.prototype, "width", {
            get: function() {
                return this.inputOptions.width
            },
            set: function(t) {
                this.inputOptions.width = t, this.box.resize(t), this.textMask.resize(t), this.updateTextAlignment()
            },
            enumerable: !0,
            configurable: !0
        }), s.prototype.updateTextAlignment = function() {
            switch (this.inputOptions.textAlign) {
                case "left":
                    this.text.anchor.set(0, 0), this.text.x = this.inputOptions.padding, null !== this.placeHolder && this.placeHolder.anchor.set(0, 0), this.cursor.x = this.inputOptions.padding + this.getCaretPosition();
                    break;
                case "center":
                    this.text.anchor.set(.5, 0), this.text.x = this.inputOptions.padding + this.inputOptions.width / 2, null !== this.placeHolder && (this.placeHolder.anchor.set(.5, 0), this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width / 2), this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition();
                    break;
                case "right":
                    this.text.anchor.set(1, 0), this.text.x = this.inputOptions.padding + this.inputOptions.width, null !== this.placeHolder && (this.placeHolder.anchor.set(1, 0), this.placeHolder.x = this.inputOptions.padding + this.inputOptions.width), this.cursor.x = this.inputOptions.padding + this.inputOptions.width
            }
        }, s.prototype.checkDown = function(e) {
            if (this.value || this.resetText(), this.input.checkPointerOver(e)) {
                if (this.focus) return void this.setCaretOnclick(e);
                this.inputOptions.zoom && !t.Zoomed && this.zoomIn(), this.startFocus()
            } else !0 === this.focus && (this.endFocus(), this.inputOptions.zoom && this.zoomOut())
        }, s.prototype.update = function() {
            if (this.text.update(), this.placeHolder && this.placeHolder.update(), this.focus) {
                if (30 !== this.cnt) return this.cnt++;
                this.cursor.visible = this.blink, this.blink = !this.blink, this.cnt = 0
            }
        }, s.prototype.endFocus = function() {
            var e = this;
            this.focus && (this.domElement.removeEventListener(), !0 === this.blockInput && this.domElement.unblockKeyDownEvents(), this.focus = !1, 0 === this.value.length && null !== this.placeHolder && (this.placeHolder.visible = !0), this.cursor.visible = !1, this.game.device.desktop ? setTimeout(function() {
                e.domElement.blur()
            }, 0) : this.domElement.blur(), this.game.device.desktop || (t.KeyboardOpen = !1, t.onKeyboardClose.dispatch()))
        }, s.prototype.startFocus = function() {
            var e = this;
            this.focus = !0, null !== this.placeHolder && (this.placeHolder.visible = !1), this.game.device.desktop ? setTimeout(function() {
                e.keyUpProcessor()
            }, 0) : this.keyUpProcessor(), this.game.device.desktop || (t.KeyboardOpen = !0, t.onKeyboardOpen.dispatch())
        }, s.prototype.keyUpProcessor = function() {
            this.domElement.addKeyUpListener(this.keyListener.bind(this)), this.domElement.focus(), !0 === this.blockInput && this.domElement.blockKeyDownEvents()
        }, s.prototype.updateText = function() {
            var e = "";
            if (this.inputOptions.type === t.InputType.password)
                for (var i = 0; i < this.value.length; i++) e += "*";
            else if (this.inputOptions.type === t.InputType.number) {
                var s = parseInt(this.value);
                e = s < parseInt(this.inputOptions.min) ? this.value = this.domElement.value = this.inputOptions.min : s > parseInt(this.inputOptions.max) ? this.value = this.domElement.value = this.inputOptions.max : this.value
            } else e = this.value; if (this.text.setText(e), this.text.width > this.inputOptions.width) this.text.anchor.x = 1, this.text.x = this.inputOptions.padding + this.inputOptions.width;
            else switch (this.inputOptions.textAlign) {
                case "left":
                    this.text.anchor.set(0, 0), this.text.x = this.inputOptions.padding;
                    break;
                case "center":
                    this.text.anchor.set(.5, 0), this.text.x = this.inputOptions.padding + this.inputOptions.width / 2;
                    break;
                case "right":
                    this.text.anchor.set(1, 0), this.text.x = this.inputOptions.padding + this.inputOptions.width
            }
        }, s.prototype.updateCursor = function() {
            if (this.text.width > this.inputOptions.width || "right" === this.inputOptions.textAlign) this.cursor.x = this.inputOptions.padding + this.inputOptions.width;
            else switch (this.inputOptions.textAlign) {
                case "left":
                    this.cursor.x = this.inputOptions.padding + this.getCaretPosition();
                    break;
                case "center":
                    this.cursor.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2 + this.getCaretPosition()
            }
        }, s.prototype.getCaretPosition = function() {
            var e = this.domElement.getCaretPosition();
            if (-1 === e) return this.text.width;
            var i = this.value;
            if (this.inputOptions.type === t.InputType.password) {
                i = "";
                for (var s = 0; s < this.value.length; s++) i += "*"
            }
            return this.offscreenText.setText(i.slice(0, e)), this.offscreenText.width
        }, s.prototype.setCaretOnclick = function(t) {
            var e = this.text.toLocal(new PIXI.Point(t.x, t.y), this.game.world).x;
            this.inputOptions.textAlign && "center" === this.inputOptions.textAlign && (e += this.text.width / 2);
            for (var i = this.text.width / this.value.length, s = 0, n = 0; n < this.value.length; n++)
                if (e >= n * i && e <= (n + 1) * i) {
                    s = n;
                    break
                }
            e > (this.value.length - 1) * i && (s = this.value.length), this.startFocus(), this.domElement.setCaretPosition(s), this.updateCursor()
        }, s.prototype.updateSelection = function() {
            if (this.domElement.hasSelection) {
                var e = this.value;
                if (this.inputOptions.type === t.InputType.password) {
                    e = "";
                    for (var i = 0; i < this.value.length; i++) e += "*"
                }
                switch (e = e.substring(this.domElement.caretStart, this.domElement.caretEnd), this.offscreenText.setText(e), this.selection.updateSelection(this.offscreenText.getBounds()), this.inputOptions.textAlign) {
                    case "left":
                        this.selection.x = this.inputOptions.padding;
                        break;
                    case "center":
                        this.selection.x = this.inputOptions.padding + this.inputOptions.width / 2 - this.text.width / 2
                }
            } else this.selection.clear()
        }, s.prototype.zoomIn = function() {
            if (!t.Zoomed) {
                var e = this.getBounds();
                window.innerHeight > window.innerWidth ? this.windowScale = this.game.width / (1.5 * e.width) : this.windowScale = this.game.width / 2 / (1.5 * e.width);
                var i = (this.game.width - 1.5 * e.width) / 2 / this.windowScale;
                this.game.world.scale.set(this.game.world.scale.x * this.windowScale, this.game.world.scale.y * this.windowScale), this.game.world.pivot.set(e.x - i, e.y - 2 * this.inputOptions.padding), t.Zoomed = !0
            }
        }, s.prototype.zoomOut = function() {
            t.Zoomed && (this.game.world.scale.set(this.game.world.scale.x / this.windowScale, this.game.world.scale.y / this.windowScale), this.game.world.pivot.set(0, 0), t.Zoomed = !1)
        }, s.prototype.keyListener = function(t) {
            this.value = this.getFormattedText(this.domElement.value), 13 !== t.keyCode ? (this.updateText(), this.updateCursor(), this.updateSelection(), t.preventDefault()) : this.focusOutOnEnter && this.endFocus()
        }, s.prototype.destroy = function(t) {
            this.game.input.onDown.remove(this.checkDown, this), this.focusIn.removeAll(), this.focusOut.removeAll(), this.domElement.destroy(), i.prototype.destroy.call(this, t)
        }, s.prototype.resetText = function() {
            this.setText()
        }, s.prototype.setText = function(t) {
            void 0 === t && (t = ""), null !== this.placeHolder && (t.length > 0 ? this.placeHolder.visible = !1 : this.placeHolder.visible = !0), this.value = this.getFormattedText(t), this.domElement.value = this.value, this.updateText(), this.updateCursor(), this.endFocus()
        }, s.prototype.getFormattedText = function(t) {
            switch (this.inputOptions.forceCase) {
                default:
                    case e.none:
                    return t;
                case e.lower:
                    return t.toLowerCase();
                case e.upper:
                    return t.toUpperCase()
            }
        }, s
    }(Phaser.Sprite);
    t.InputField = i
}(PhaserInput || (PhaserInput = {}));
var PhaserInput;
! function(t) {
    var e = function(t) {
        function e(e, i) {
            var s = t.call(this, e, 0, 0) || this;
            s.bgColor = i.backgroundColor ? parseInt(i.backgroundColor.slice(1), 16) : 16777215, s.borderRadius = i.borderRadius || 0, s.borderWidth = i.borderWidth || 1, s.borderColor = i.borderColor ? parseInt(i.borderColor.slice(1), 16) : 9803157, s.boxAlpha = i.fillAlpha, s.padding = i.padding;
            var n = i.height,
                a = i.width;
            i.font && (n = Math.max(parseInt(i.font.substr(0, i.font.indexOf("px")), 10), n)), s.boxHeight = 2 * s.padding + n;
            a = i.width;
            return s.boxWidth = 2 * s.padding + a, s.drawBox(), s
        }
        return __extends(e, t), e.prototype.resize = function(t) {
            this.boxWidth = 2 * this.padding + t, this.drawBox()
        }, e.prototype.drawBox = function() {
            this.clear().beginFill(this.bgColor, this.boxAlpha).lineStyle(this.borderWidth, this.borderColor, this.boxAlpha), this.borderRadius > 0 ? this.drawRoundedRect(0, 0, this.boxWidth, this.boxHeight, this.borderRadius) : this.drawRect(0, 0, this.boxWidth, this.boxHeight)
        }, e
    }(Phaser.Graphics);
    t.InputBox = e
}(PhaserInput || (PhaserInput = {}));
var PhaserInput;
! function(t) {
    var e = function(t) {
        function e(e, i) {
            var s = t.call(this, e, i.padding, i.padding) || this;
            return s.inputOptions = i, s
        }
        return __extends(e, t), e.prototype.updateSelection = function(t) {
            var i = Phaser.Color.webToColor(this.inputOptions.selectionColor);
            this.clear(), this.beginFill(e.rgb2hex(i), i.a), this.drawRect(t.x, t.y, t.width, t.height - this.inputOptions.padding)
        }, e.rgb2hex = function(t) {
            return parseInt(("0" + t.r.toString(16)).slice(-2) + ("0" + t.g.toString(16)).slice(-2) + ("0" + t.b.toString(16)).slice(-2), 16)
        }, e
    }(Phaser.Graphics);
    t.SelectionHighlight = e
}(PhaserInput || (PhaserInput = {}));
var PhaserInput;
! function(t) {
    var e = function(t) {
        function e(e, i) {
            var s = t.call(this, e, i.padding, i.padding) || this,
                n = i.height;
            return i.font && (n = Math.max(parseInt(i.font.substr(0, i.font.indexOf("px")), 10), n)), s.maskWidth = i.width, s.maskHeight = 1.3 * n, s.drawMask(), s
        }
        return __extends(e, t), e.prototype.resize = function(t) {
            this.maskWidth = t, this.drawMask()
        }, e.prototype.drawMask = function() {
            this.clear().beginFill(0).drawRect(0, 0, this.maskWidth, this.maskHeight).endFill()
        }, e
    }(Phaser.Graphics);
    t.TextMask = e
}(PhaserInput || (PhaserInput = {}));
var PhaserInput;
! function(t) {
    t.Zoomed = !1, t.KeyboardOpen = !1, t.onKeyboardOpen = new Phaser.Signal, t.onKeyboardClose = new Phaser.Signal;
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.addInputFieldFactory(), s
        }
        return __extends(i, e), i.prototype.addInputFieldFactory = function() {
            Phaser.GameObjectFactory.prototype.inputField = function(e, i, s, n) {
                void 0 === n && (n = this.world);
                var a = new t.InputField(this.game, e, i, s);
                return n.add(a)
            }, Phaser.GameObjectCreator.prototype.inputField = function(e, i, s) {
                return new t.InputField(this.game, e, i, s)
            }
        }, i
    }(Phaser.Plugin);
    e.Zoomed = !1, e.KeyboardOpen = !1, e.onKeyboardOpen = new Phaser.Signal, e.onKeyboardClose = new Phaser.Signal, t.Plugin = e
}(PhaserInput || (PhaserInput = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    PhaserNineSlice;
! function(t) {
    var e = function(t) {
        function e(e, i, s, n, a, o, r, h) {
            var l = t.call(this, e, i, s, n, a) || this;
            return l.baseTexture = l.texture.baseTexture, l.baseFrame = l.texture.frame, l.atlasKey = n, null === a || h ? h || (h = e.cache.getNineSlice(n)) : h = e.cache.getNineSlice(a), void 0 === h ? l : (l.topSize = h.top, h.left ? l.leftSize = h.left : l.leftSize = l.topSize, h.right ? l.rightSize = h.right : l.rightSize = l.leftSize, h.bottom ? l.bottomSize = h.bottom : l.bottomSize = l.topSize, l.loadTexture(new Phaser.RenderTexture(l.game, l.localWidth, l.localHeight)), l.resize(o, r), l)
        }
        return __extends(e, t), e.prototype.renderTexture = function() {
            this.texture.resize(this.localWidth, this.localHeight, !0);
            var t = [0, this.leftSize, this.baseFrame.width - this.rightSize, this.baseFrame.width],
                e = [0, this.topSize, this.baseFrame.height - this.bottomSize, this.baseFrame.height],
                i = [0, this.leftSize, this.localWidth - this.rightSize, this.localWidth],
                s = [0, this.topSize, this.localHeight - this.bottomSize, this.localHeight];
            this.texture.clear();
            for (var n = 0; n < 3; n++)
                for (var a = 0; a < 3; a++) {
                    var o = this.createTexturePart(t[a], e[n], t[a + 1] - t[a], e[n + 1] - e[n]);
                    o.width = i[a + 1] - i[a], o.height = s[n + 1] - s[n], this.texture.renderXY(o, i[a], s[n])
                }
        }, e.prototype.resize = function(t, e) {
            this.localWidth = t, this.localHeight = e, this.renderTexture()
        }, e.prototype.changeFrame = function(t) {
            var e = this.game.cache.getFrameByName(this.atlasKey, t);
            this.baseFrame = new PIXI.Rectangle(e.x, e.y, e.width, e.height), this.resize(this.localWidth, this.localHeight)
        }, e.prototype.destroy = function() {
            for (var e = [], i = 0; i < arguments.length; i++) e[i] = arguments[i];
            t.prototype.destroy.call(this, e[0]), this.texture.destroy(!0), this.texture = null, this.baseTexture = null, this.baseFrame = null
        }, e.prototype.createTexturePart = function(t, e, i, s) {
            var n = new PIXI.Rectangle(this.baseFrame.x + this.texture.frame.x + t, this.baseFrame.y + this.texture.frame.y + e, Math.max(i, 1), Math.max(s, 1));
            return new Phaser.Sprite(this.game, 0, 0, new PIXI.Texture(this.baseTexture, n))
        }, e
    }(Phaser.Sprite);
    t.NineSlice = e
}(PhaserNineSlice || (PhaserNineSlice = {}));
var PhaserNineSlice;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.addNineSliceCache(), s.addNineSliceFactory(), s.addNineSliceLoader(), s
        }
        return __extends(i, e), i.prototype.addNineSliceLoader = function() {
            Phaser.Loader.prototype.nineSlice = function(t, e, i, s, n, a) {
                var o = {
                    top: i
                };
                s && (o.left = s), n && (o.right = n), a && (o.bottom = a), this.addToFileList("image", t, e), this.game.cache.addNineSlice(t, o)
            }
        }, i.prototype.addNineSliceFactory = function() {
            Phaser.GameObjectFactory.prototype.nineSlice = function(e, i, s, n, a, o, r) {
                void 0 === r && (r = this.world);
                var h = new t.NineSlice(this.game, e, i, s, n, a, o);
                return r.add(h)
            }, Phaser.GameObjectCreator.prototype.nineSlice = function(e, i, s, n, a, o) {
                return new t.NineSlice(this.game, e, i, s, n, a, o)
            }
        }, i.prototype.addNineSliceCache = function() {
            Phaser.Cache.prototype.nineSlice = {}, Phaser.Cache.prototype.addNineSlice = function(t, e) {
                this.nineSlice[t] = e
            }, Phaser.Cache.prototype.getNineSlice = function(t) {
                var e = this.nineSlice[t];
                return e
            }
        }, i
    }(Phaser.Plugin);
    t.Plugin = e
}(PhaserNineSlice || (PhaserNineSlice = {}));
var spine = {
    radDeg: 180 / Math.PI,
    degRad: Math.PI / 180,
    Float32Array: "undefined" == typeof Float32Array ? Array : Float32Array,
    Uint32Array: "undefined" == typeof Uint32Array ? Array : Uint32Array,
    Uint16Array: "undefined" == typeof Uint16Array ? Array : Uint16Array
};
spine.temp = new spine.Float32Array(2), spine.BoneData = function(t, e) {
    this.name = t, this.parent = e
}, spine.BoneData.prototype = {
    length: 0,
    x: 0,
    y: 0,
    rotation: 0,
    scaleX: 1,
    scaleY: 1,
    inheritScale: !0,
    inheritRotation: !0
}, spine.BlendMode = {
    normal: 0,
    additive: 1,
    multiply: 2,
    screen: 3
}, spine.SlotData = function(t, e) {
    this.name = t, this.boneData = e
}, spine.SlotData.prototype = {
    r: 1,
    g: 1,
    b: 1,
    a: 1,
    attachmentName: null,
    blendMode: spine.BlendMode.normal
}, spine.IkConstraintData = function(t) {
    this.name = t, this.bones = []
}, spine.IkConstraintData.prototype = {
    target: null,
    bendDirection: 1,
    mix: 1
}, spine.TransformConstraintData = function(t) {
    this.name = t
}, spine.TransformConstraintData.prototype = {
    bone: null,
    target: null,
    translateMix: 1,
    x: 0,
    y: 0
}, spine.Bone = function(t, e, i) {
    this.data = t, this.skeleton = e, this.parent = i, this.setToSetupPose()
}, spine.Bone.yDown = !1, spine.Bone.prototype = {
    x: 0,
    y: 0,
    rotation: 0,
    scaleX: 1,
    scaleY: 1,
    a: 0,
    b: 0,
    worldX: 0,
    c: 0,
    d: 0,
    worldY: 0,
    worldSignX: 1,
    worldSignY: 1,
    update: function() {
        this.updateWorldTransform(this.x, this.y, this.rotation, this.scaleX, this.scaleY)
    },
    updateWorldTransformWith: function() {
        this.updateWorldTransform(this.x, this.y, this.rotation, this.scaleX, this.scaleY)
    },
    updateWorldTransform: function(t, e, i, s, n) {
        this.appliedRotation = i, this.appliedScaleX = s, this.appliedScaleY = n, i *= spine.degRad;
        var a = Math.cos(i),
            o = Math.sin(i),
            r = a * s,
            h = -o * n,
            l = o * s,
            c = a * n,
            u = this.parent;
        if (!u) {
            var d = this.skeleton;
            return d.flipX && (t = -t, r = -r, h = -h), d.flipY != spine.Bone.yDown && (e = -e, l = -l, c = -c), this.a = r, this.b = h, this.c = l, this.d = c, this.worldX = t, this.worldY = e, this.worldSignX = s < 0 ? -1 : 1, void(this.worldSignY = n < 0 ? -1 : 1)
        }
        var p = u.a,
            m = u.b,
            g = u.c,
            f = u.d;
        if (this.worldX = p * t + m * e + u.worldX, this.worldY = g * t + f * e + u.worldY, this.worldSignX = u.worldSignX * (s < 0 ? -1 : 1), this.worldSignY = u.worldSignY * (n < 0 ? -1 : 1), this.data.inheritRotation && this.data.inheritScale) this.a = p * r + m * l, this.b = p * h + m * c, this.c = g * r + f * l, this.d = g * h + f * c;
        else {
            if (this.data.inheritRotation) {
                p = 1, m = 0, g = 0, f = 1;
                do {
                    i = u.appliedRotation * spine.degRad;
                    E = p * (a = Math.cos(i)) + m * (o = Math.sin(i));
                    if (m = p * -o + m * a, p = E, E = g * a + f * o, f = g * -o + f * a, g = E, !u.data.inheritRotation) break;
                    u = u.parent
                } while (u);
                this.a = p * r + m * l, this.b = p * h + m * c, this.c = g * r + f * l, this.d = g * h + f * c
            } else if (this.data.inheritScale) {
                p = 1, m = 0, g = 0, f = 1;
                do {
                    i = u.appliedRotation * spine.degRad, a = Math.cos(i), o = Math.sin(i);
                    var _ = u.appliedScaleX,
                        y = u.appliedScaleY,
                        v = a * _,
                        b = -o * y,
                        S = o * _,
                        T = a * y,
                        E = p * v + m * S;
                    if (m = p * b + m * T, p = E, E = g * v + f * S, f = g * b + f * T, g = E, _ < 0 && (i = -i), a = Math.cos(-i), o = Math.sin(-i), E = p * a + m * o, m = p * -o + m * a, p = E, E = g * a + f * o, f = g * -o + f * a, g = E, !u.data.inheritScale) break;
                    u = u.parent
                } while (u);
                this.a = p * r + m * l, this.b = p * h + m * c, this.c = g * r + f * l, this.d = g * h + f * c
            } else this.a = r, this.b = h, this.c = l, this.d = c;
            this.skeleton.flipX && (this.a = -this.a, this.b = -this.b), this.skeleton.flipY != spine.Bone.yDown && (this.c = -this.c, this.d = -this.d)
        }
    },
    setToSetupPose: function() {
        var t = this.data;
        this.x = t.x, this.y = t.y, this.rotation = t.rotation, this.scaleX = t.scaleX, this.scaleY = t.scaleY
    },
    getWorldRotationX: function() {
        return Math.atan2(this.c, this.a) * spine.radDeg
    },
    getWorldRotationY: function() {
        return Math.atan2(this.d, this.b) * spine.radDeg
    },
    getWorldScaleX: function() {
        return Math.sqrt(this.a * this.a + this.b * this.b) * this.worldSignX
    },
    getWorldScaleY: function() {
        return Math.sqrt(this.c * this.c + this.d * this.d) * this.worldSignY
    },
    worldToLocal: function(t) {
        var e = t[0] - this.worldX,
            i = t[1] - this.worldY,
            s = this.a,
            n = this.b,
            a = this.c,
            o = this.d,
            r = 1 / (s * o - n * a);
        return t[0] = e * o * r - i * n * r, t[1] = i * s * r - e * a * r, t
    },
    localToWorld: function(t) {
        var e = t[0],
            i = t[1];
        return t[0] = e * this.a + i * this.b + this.worldX, t[1] = e * this.c + i * this.d + this.worldY, t
    }
}, spine.Slot = function(t, e) {
    this.data = t, this.bone = e, this.attachmentVertices = new spine.Float32Array, this.setToSetupPose()
}, spine.Slot.prototype = {
    r: 1,
    g: 1,
    b: 1,
    a: 1,
    _attachmentTime: 0,
    attachment: null,
    setAttachment: function(t) {
        this.attachment != t && (this.attachment = t, this._attachmentTime = this.bone.skeleton.time, this.attachmentVertices.length = 0)
    },
    setAttachmentTime: function(t) {
        this._attachmentTime = this.bone.skeleton.time - t
    },
    getAttachmentTime: function() {
        return this.bone.skeleton.time - this._attachmentTime
    },
    setToSetupPose: function() {
        var t = this.data;
        if (this.r = t.r, this.g = t.g, this.b = t.b, this.a = t.a, t.attachmentName) {
            for (var e = this.bone.skeleton.data.slots, i = 0, s = e.length; i < s; i++)
                if (e[i] == t) {
                    this.attachment = null, this.setAttachment(this.bone.skeleton.getAttachmentBySlotIndex(i, t.attachmentName));
                    break
                }
        } else this.setAttachment(null)
    }
}, spine.IkConstraint = function(t, e) {
    this.data = t, this.mix = t.mix, this.bendDirection = t.bendDirection, this.bones = [];
    for (var i = 0, s = t.bones.length; i < s; i++) this.bones[i] = e.findBone(t.bones[i].name);
    this.target = e.findBone(t.target.name)
}, spine.IkConstraint.prototype = {
    apply: function() {
        this.update()
    },
    update: function() {
        var t = this.target,
            e = this.bones;
        switch (e.length) {
            case 1:
                spine.IkConstraint.apply1(e[0], t.worldX, t.worldY, this.mix);
                break;
            case 2:
                spine.IkConstraint.apply2(e[0], e[1], t.worldX, t.worldY, this.bendDirection, this.mix)
        }
    }
}, spine.IkConstraint.apply1 = function(t, e, i, s) {
    var n = t.parent ? t.parent.getWorldRotationX() : 0,
        a = t.rotation,
        o = Math.atan2(i - t.worldY, e - t.worldX) * spine.radDeg - n;
    t.worldSignX != t.worldSignY != (t.skeleton.flipX != (t.skeleton.flipY != spine.Bone.yDown)) && (o = 360 - o), o > 180 ? o -= 360 : o < -180 && (o += 360), t.updateWorldTransform(t.x, t.y, a + (o - a) * s, t.appliedScaleX, t.appliedScaleY)
}, spine.IkConstraint.apply2 = function(t, e, i, s, n, a) {
    if (0 != a) {
        var o, r, h, l = t.x,
            c = t.y,
            u = t.appliedScaleX,
            d = t.appliedScaleY;
        u < 0 ? (u = -u, o = 180, h = -1) : (o = 0, h = 1), d < 0 && (d = -d, h = -h);
        var p = e.x,
            m = e.y,
            g = e.appliedScaleX,
            f = Math.abs(u - d) <= 1e-4;
        f || 0 == m || (e.worldX = t.a * p + t.worldX, e.worldY = t.c * p + t.worldY, m = 0), g < 0 ? (g = -g, r = 180) : r = 0;
        var _, y, v, b, S = t.parent;
        if (S) {
            var T = S.a,
                E = S.b,
                P = S.c,
                A = 1 / (T * (H = S.d) - E * P),
                I = S.worldX,
                C = S.worldY;
            _ = ((et = i - I) * H - (z = s - C) * E) * A - l, y = (z * T - et * P) * A - c, v = ((et = e.worldX - I) * H - (z = e.worldY - C) * E) * A - l, b = (z * T - et * P) * A - c
        } else _ = i - l, y = s - c, v = e.worldX - l, b = e.worldY - c;
        var x, w, M = Math.sqrt(v * v + b * b),
            O = e.data.length * g;
        t: if (f) {
            var L = (_ * _ + y * y - M * M - (O *= u) * O) / (2 * M * O);
            L < -1 ? L = -1 : L > 1 && (L = 1), w = Math.acos(L) * n;
            var T = M + O * L,
                N = O * Math.sin(w);
            x = Math.atan2(y * T - _ * N, _ * T + y * N)
        } else {
            var T = u * O,
                E = d * O,
                k = Math.atan2(y, _),
                R = T * T,
                D = E * E,
                G = _ * _ + y * y,
                B = D * (M * M) + R * G - R * D,
                F = -2 * D * M,
                U = D - R,
                H = F * F - 4 * U * B;
            if (H >= 0) {
                var Y = Math.sqrt(H);
                F < 0 && (Y = -Y);
                var W = (Y = -(F + Y) / 2) / U,
                    j = B / Y,
                    X = Math.abs(W) < Math.abs(j) ? W : j;
                if (X * X <= G) {
                    var z = Math.sqrt(G - X * X) * n;
                    x = k - Math.atan2(z, X), w = Math.atan2(z / d, (X - M) / u);
                    break t
                }
            }
            var K = 0,
                V = Number.MAX_VALUE,
                q = 0,
                J = 0,
                Z = 0,
                Q = 0,
                $ = 0,
                tt = 0,
                et = M + T,
                it = et * et;
            it > Q && (Z = 0, Q = it, $ = et), (it = (et = M - T) * et) < V && (K = Math.PI, V = it, q = et);
            var st = Math.acos(-T * M / (R - D));
            (it = (et = T * Math.cos(st) + M) * et + (z = E * Math.sin(st)) * z) < V && (K = st, V = it, q = et, J = z), it > Q && (Z = st, Q = it, $ = et, tt = z), G <= (V + Q) / 2 ? (x = k - Math.atan2(J * n, q), w = K * n) : (x = k - Math.atan2(tt * n, $), w = Z * n)
        }
        var nt = Math.atan2(m, p) * h;
        x = (x - nt) * spine.radDeg + o, w = (w + nt) * spine.radDeg * h + r, x > 180 ? x -= 360 : x < -180 && (x += 360), w > 180 ? w -= 360 : w < -180 && (w += 360);
        var at = t.rotation;
        t.updateWorldTransform(l, c, at + (x - at) * a, t.appliedScaleX, t.appliedScaleY), at = e.rotation, e.updateWorldTransform(p, m, at + (w - at) * a, e.appliedScaleX, e.appliedScaleY)
    }
}, spine.TransformConstraint = function(t, e) {
    this.data = t, this.translateMix = t.translateMix, this.x = t.x, this.y = t.y, this.bone = e.findBone(t.bone.name), this.target = e.findBone(t.target.name)
}, spine.TransformConstraint.prototype = {
    apply: function() {
        this.update()
    },
    update: function() {
        var t = this.translateMix;
        if (t > 0) {
            var e = spine.temp;
            e[0] = x, e[1] = y, this.target.localToWorld(e);
            var i = this.bone;
            i.worldX += (e[0] - i.worldX) * t, i.worldY += (e[1] - i.worldY) * t
        }
    }
}, spine.Skin = function(t) {
    this.name = t, this.attachments = {}
}, spine.Skin.prototype = {
    addAttachment: function(t, e, i) {
        this.attachments[t + ":" + e] = i
    },
    getAttachment: function(t, e) {
        return this.attachments[t + ":" + e]
    },
    _attachAll: function(t, e) {
        for (var i in e.attachments) {
            var s = i.indexOf(":"),
                n = parseInt(i.substring(0, s)),
                a = i.substring(s + 1),
                o = t.slots[n];
            if (o.attachment && o.attachment.name == a) {
                var r = this.getAttachment(n, a);
                r && o.setAttachment(r)
            }
        }
    }
}, spine.Animation = function(t, e, i) {
    this.name = t, this.timelines = e, this.duration = i
}, spine.Animation.prototype = {
    apply: function(t, e, i, s, n) {
        s && 0 != this.duration && (i %= this.duration, e > 0 && (e %= this.duration));
        for (var a = this.timelines, o = 0, r = a.length; o < r; o++) a[o].apply(t, e, i, n, 1)
    },
    mix: function(t, e, i, s, n, a) {
        s && 0 != this.duration && (i %= this.duration, e > 0 && (e %= this.duration));
        for (var o = this.timelines, r = 0, h = o.length; r < h; r++) o[r].apply(t, e, i, n, a)
    }
}, spine.Animation.binarySearch = function(t, e, i) {
    var s = 0,
        n = Math.floor(t.length / i) - 2;
    if (!n) return i;
    for (var a = n >>> 1;;) {
        if (t[(a + 1) * i] <= e ? s = a + 1 : n = a, s == n) return (s + 1) * i;
        a = s + n >>> 1
    }
}, spine.Animation.binarySearch1 = function(t, e) {
    var i = 0,
        s = t.length - 2;
    if (!s) return 1;
    for (var n = s >>> 1;;) {
        if (t[n + 1] <= e ? i = n + 1 : s = n, i == s) return i + 1;
        n = i + s >>> 1
    }
}, spine.Animation.linearSearch = function(t, e, i) {
    for (var s = 0, n = t.length - i; s <= n; s += i)
        if (t[s] > e) return s;
    return -1
}, spine.Curves = function(t) {
    var e = 19 * (t - 1);
    this.curves = new spine.Float32Array(e), this.curves.length = e
}, spine.Curves.prototype = {
    setLinear: function(t) {
        this.curves[19 * t] = 0
    },
    setStepped: function(t) {
        this.curves[19 * t] = 1
    },
    setCurve: function(t, e, i, s, n) {
        var a = .1 * .1 * .1 * 6,
            o = 2 * -e + s,
            r = 2 * -i + n,
            h = 3 * (e - s) + 1,
            l = 3 * (i - n) + 1,
            c = e * (3 * .1) + o * (.1 * .1 * 3) + h * (.1 * .1 * .1),
            u = i * (3 * .1) + r * (.1 * .1 * 3) + l * (.1 * .1 * .1),
            d = o * (.1 * .1 * 6) + h * a,
            p = r * (.1 * .1 * 6) + l * a,
            m = h * a,
            g = l * a,
            f = 19 * t,
            _ = this.curves;
        _[f++] = 2;
        for (var y = c, v = u, b = f + 19 - 1; f < b; f += 2) _[f] = y, _[f + 1] = v, c += d, u += p, d += m, p += g, y += c, v += u
    },
    getCurvePercent: function(t, e) {
        e = e < 0 ? 0 : e > 1 ? 1 : e;
        var i = this.curves,
            s = 19 * t,
            n = i[s];
        if (0 === n) return e;
        if (1 == n) return 0;
        for (var a = 0, o = ++s, r = s + 19 - 1; s < r; s += 2)
            if ((a = i[s]) >= e) {
                var h, l;
                return s == o ? (h = 0, l = 0) : (h = i[s - 2], l = i[s - 1]), l + (i[s + 1] - l) * (e - h) / (a - h)
            }
        var c = i[s - 1];
        return c + (1 - c) * (e - a) / (1 - a)
    }
}, spine.RotateTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(2 * t), this.frames.length = 2 * t
}, spine.RotateTimeline.prototype = {
    boneIndex: 0,
    getFrameCount: function() {
        return this.frames.length / 2
    },
    setFrame: function(t, e, i) {
        t *= 2, this.frames[t] = e, this.frames[t + 1] = i
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (!(i < a[0])) {
            var o = t.bones[this.boneIndex];
            if (i >= a[a.length - 2]) {
                for (u = o.data.rotation + a[a.length - 1] - o.rotation; u > 180;) u -= 360;
                for (; u < -180;) u += 360;
                o.rotation += u * n
            } else {
                var r = spine.Animation.binarySearch(a, i, 2),
                    h = a[r - 1],
                    l = a[r],
                    c = 1 - (i - l) / (a[r - 2] - l);
                c = this.curves.getCurvePercent(r / 2 - 1, c);
                for (var u = a[r + 1] - h; u > 180;) u -= 360;
                for (; u < -180;) u += 360;
                for (u = o.data.rotation + (h + u * c) - o.rotation; u > 180;) u -= 360;
                for (; u < -180;) u += 360;
                o.rotation += u * n
            }
        }
    }
}, spine.TranslateTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(3 * t), this.frames.length = 3 * t
}, spine.TranslateTimeline.prototype = {
    boneIndex: 0,
    getFrameCount: function() {
        return this.frames.length / 3
    },
    setFrame: function(t, e, i, s) {
        t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = s
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (!(i < a[0])) {
            var o = t.bones[this.boneIndex];
            if (i >= a[a.length - 3]) return o.x += (o.data.x + a[a.length - 2] - o.x) * n, void(o.y += (o.data.y + a[a.length - 1] - o.y) * n);
            var r = spine.Animation.binarySearch(a, i, 3),
                h = a[r - 2],
                l = a[r - 1],
                c = a[r],
                u = 1 - (i - c) / (a[r + -3] - c);
            u = this.curves.getCurvePercent(r / 3 - 1, u), o.x += (o.data.x + h + (a[r + 1] - h) * u - o.x) * n, o.y += (o.data.y + l + (a[r + 2] - l) * u - o.y) * n
        }
    }
}, spine.ScaleTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(3 * t), this.frames.length = 3 * t
}, spine.ScaleTimeline.prototype = {
    boneIndex: 0,
    getFrameCount: function() {
        return this.frames.length / 3
    },
    setFrame: function(t, e, i, s) {
        t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = s
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (!(i < a[0])) {
            var o = t.bones[this.boneIndex];
            if (i >= a[a.length - 3]) return o.scaleX += (o.data.scaleX * a[a.length - 2] - o.scaleX) * n, void(o.scaleY += (o.data.scaleY * a[a.length - 1] - o.scaleY) * n);
            var r = spine.Animation.binarySearch(a, i, 3),
                h = a[r - 2],
                l = a[r - 1],
                c = a[r],
                u = 1 - (i - c) / (a[r + -3] - c);
            u = this.curves.getCurvePercent(r / 3 - 1, u), o.scaleX += (o.data.scaleX * (h + (a[r + 1] - h) * u) - o.scaleX) * n, o.scaleY += (o.data.scaleY * (l + (a[r + 2] - l) * u) - o.scaleY) * n
        }
    }
}, spine.ColorTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(5 * t), this.frames.length = 5 * t
}, spine.ColorTimeline.prototype = {
    slotIndex: 0,
    getFrameCount: function() {
        return this.frames.length / 5
    },
    setFrame: function(t, e, i, s, n, a) {
        t *= 5, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = s, this.frames[t + 3] = n, this.frames[t + 4] = a
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (!(i < a[0])) {
            var o, r, h, l;
            if (i >= a[a.length - 5]) {
                var c = a.length - 1;
                o = a[c - 3], r = a[c - 2], h = a[c - 1], l = a[c]
            } else {
                var u = spine.Animation.binarySearch(a, i, 5),
                    d = a[u - 4],
                    p = a[u - 3],
                    m = a[u - 2],
                    g = a[u - 1],
                    f = a[u],
                    _ = 1 - (i - f) / (a[u - 5] - f);
                _ = this.curves.getCurvePercent(u / 5 - 1, _), o = d + (a[u + 1] - d) * _, r = p + (a[u + 2] - p) * _, h = m + (a[u + 3] - m) * _, l = g + (a[u + 4] - g) * _
            }
            var y = t.slots[this.slotIndex];
            n < 1 ? (y.r += (o - y.r) * n, y.g += (r - y.g) * n, y.b += (h - y.b) * n, y.a += (l - y.a) * n) : (y.r = o, y.g = r, y.b = h, y.a = l)
        }
    }
}, spine.AttachmentTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(t), this.frames.length = t, this.attachmentNames = [], this.attachmentNames.length = t
}, spine.AttachmentTimeline.prototype = {
    slotIndex: 0,
    getFrameCount: function() {
        return this.frames.length
    },
    setFrame: function(t, e, i) {
        this.frames[t] = e, this.attachmentNames[t] = i
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (i < a[0]) e > i && this.apply(t, e, Number.MAX_VALUE, null, 0);
        else {
            e > i && (e = -1);
            var o = i >= a[a.length - 1] ? a.length - 1 : spine.Animation.binarySearch1(a, i) - 1;
            if (!(a[o] < e)) {
                var r = this.attachmentNames[o];
                t.slots[this.slotIndex].setAttachment(r ? t.getAttachmentBySlotIndex(this.slotIndex, r) : null)
            }
        }
    }
}, spine.EventTimeline = function(t) {
    this.frames = new spine.Float32Array(t), this.frames.length = t, this.events = [], this.events.length = t
}, spine.EventTimeline.prototype = {
    getFrameCount: function() {
        return this.frames.length
    },
    setFrame: function(t, e) {
        this.frames[t] = e.time, this.events[t] = e
    },
    apply: function(t, e, i, s, n) {
        if (s) {
            var a = this.frames,
                o = a.length;
            if (e > i) this.apply(t, e, Number.MAX_VALUE, s, n), e = -1;
            else if (e >= a[o - 1]) return;
            if (!(i < a[0])) {
                var r;
                if (e < a[0]) r = 0;
                else
                    for (var h = a[r = spine.Animation.binarySearch1(a, e)]; r > 0 && a[r - 1] == h;) r--;
                for (var l = this.events; r < o && i >= a[r]; r++) s[s.length] = l[r]
            }
        }
    }
}, spine.DrawOrderTimeline = function(t) {
    this.frames = new spine.Float32Array(t), this.frames.length = t, this.drawOrders = [], this.drawOrders.length = t
}, spine.DrawOrderTimeline.prototype = {
    getFrameCount: function() {
        return this.frames.length
    },
    setFrame: function(t, e, i) {
        this.frames[t] = e, this.drawOrders[t] = i
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (!(i < a[0])) {
            var o;
            o = i >= a[a.length - 1] ? a.length - 1 : spine.Animation.binarySearch1(a, i) - 1;
            var r = t.drawOrder,
                h = t.slots,
                l = this.drawOrders[o];
            if (l)
                for (var c = 0, u = l.length; c < u; c++) r[c] = t.slots[l[c]];
            else
                for (var c = 0, u = h.length; c < u; c++) r[c] = h[c]
        }
    }
}, spine.FfdTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(t), this.frames.length = t, this.frameVertices = [], this.frameVertices.length = t
}, spine.FfdTimeline.prototype = {
    slotIndex: 0,
    attachment: 0,
    getFrameCount: function() {
        return this.frames.length
    },
    setFrame: function(t, e, i) {
        this.frames[t] = e, this.frameVertices[t] = i
    },
    apply: function(t, e, i, s, n) {
        var a = t.slots[this.slotIndex],
            o = a.attachment;
        if (o && (o == this.attachment || o.inheritFFD && o.parentMesh == this.attachment)) {
            var r = this.frames;
            if (!(i < r[0])) {
                var h = this.frameVertices,
                    l = h[0].length,
                    c = a.attachmentVertices;
                if (c.length != l && (a.attachmentVertices = c = new spine.Float32Array(l), n = 1), i >= r[r.length - 1]) {
                    var u = h[r.length - 1];
                    if (n < 1)
                        for (_ = 0; _ < l; _++) c[_] += (u[_] - c[_]) * n;
                    else
                        for (_ = 0; _ < l; _++) c[_] = u[_]
                } else {
                    var d = spine.Animation.binarySearch1(r, i),
                        p = r[d],
                        m = 1 - (i - p) / (r[d - 1] - p);
                    m = this.curves.getCurvePercent(d - 1, m < 0 ? 0 : m > 1 ? 1 : m);
                    var g = h[d - 1],
                        f = h[d];
                    if (n < 1)
                        for (_ = 0; _ < l; _++) {
                            y = g[_];
                            c[_] += (y + (f[_] - y) * m - c[_]) * n
                        } else
                            for (var _ = 0; _ < l; _++) {
                                var y = g[_];
                                c[_] = y + (f[_] - y) * m
                            }
                }
            }
        }
    }
}, spine.IkConstraintTimeline = function(t) {
    this.curves = new spine.Curves(t), this.frames = new spine.Float32Array(3 * t), this.frames.length = 3 * t
}, spine.IkConstraintTimeline.prototype = {
    ikConstraintIndex: 0,
    getFrameCount: function() {
        return this.frames.length / 3
    },
    setFrame: function(t, e, i, s) {
        t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = s
    },
    apply: function(t, e, i, s, n) {
        var a = this.frames;
        if (!(i < a[0])) {
            var o = t.ikConstraints[this.ikConstraintIndex];
            if (i >= a[a.length - 3]) return o.mix += (a[a.length - 2] - o.mix) * n, void(o.bendDirection = a[a.length - 1]);
            var r = spine.Animation.binarySearch(a, i, 3),
                h = a[r + -2],
                l = a[r],
                c = 1 - (i - l) / (a[r + -3] - l);
            c = this.curves.getCurvePercent(r / 3 - 1, c);
            var u = h + (a[r + 1] - h) * c;
            o.mix += (u - o.mix) * n, o.bendDirection = a[r + -1]
        }
    }
}, spine.SkeletonData = function() {
    this.bones = [], this.slots = [], this.skins = [], this.events = [], this.animations = [], this.ikConstraints = [], this.transformConstraints = []
}, spine.SkeletonData.prototype = {
    name: null,
    defaultSkin: null,
    width: 0,
    height: 0,
    version: null,
    hash: null,
    findBone: function(t) {
        for (var e = this.bones, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    },
    findBoneIndex: function(t) {
        for (var e = this.bones, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return i;
        return -1
    },
    findSlot: function(t) {
        for (var e = this.slots, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return slot[i];
        return null
    },
    findSlotIndex: function(t) {
        for (var e = this.slots, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return i;
        return -1
    },
    findSkin: function(t) {
        for (var e = this.skins, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    },
    findEvent: function(t) {
        for (var e = this.events, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    },
    findAnimation: function(t) {
        for (var e = this.animations, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    },
    findIkConstraint: function(t) {
        for (var e = this.ikConstraints, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    },
    findTransformConstraints: function(t) {
        for (var e = this.transformConstraints, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    }
}, spine.Skeleton = function(t) {
    this.data = t, this.bones = [];
    for (var e = 0, i = t.bones.length; e < i; e++) {
        var s = t.bones[e],
            n = s.parent ? this.bones[t.bones.indexOf(s.parent)] : null;
        this.bones[e] = new spine.Bone(s, this, n)
    }
    this.slots = [], this.drawOrder = [];
    for (var e = 0, i = t.slots.length; e < i; e++) {
        var a = t.slots[e],
            o = this.bones[t.bones.indexOf(a.boneData)],
            r = new spine.Slot(a, o);
        this.slots[e] = r, this.drawOrder[e] = r
    }
    this.ikConstraints = [];
    for (var e = 0, i = t.ikConstraints.length; e < i; e++) this.ikConstraints[e] = new spine.IkConstraint(t.ikConstraints[e], this);
    this.transformConstraints = [];
    for (var e = 0, i = t.transformConstraints.length; e < i; e++) this.transformConstraints[e] = new spine.TransformConstraint(t.transformConstraints[e], this);
    this.cache = [], this.updateCache()
}, spine.Skeleton.prototype = {
    x: 0,
    y: 0,
    skin: null,
    r: 1,
    g: 1,
    b: 1,
    a: 1,
    time: 0,
    flipX: !1,
    flipY: !1,
    updateCache: function() {
        var t = this.bones,
            e = this.cache,
            i = this.ikConstraints,
            s = this.transformConstraints,
            n = i.length,
            a = s.length;
        e.length = 0;
        for (var o = 0, r = t.length; o < r; o++) {
            var h = t[o];
            e[e.length] = h;
            for (u = 0; u < n; u++) {
                var l = i[u];
                if (h == l.bones[l.bones.length - 1]) {
                    e[e.length] = l;
                    break
                }
            }
        }
        for (o = 0; o < a; o++)
            for (var c = s[o], u = e.length - 1; u >= 0; u--) {
                var d = e[u];
                if (d == c.bone || d == c.target) {
                    e.splice(u + 1, 0, c);
                    break
                }
            }
    },
    updateWorldTransform: function() {
        for (var t = this.cache, e = 0, i = t.length; e < i; e++) t[e].update()
    },
    setToSetupPose: function() {
        this.setBonesToSetupPose(), this.setSlotsToSetupPose()
    },
    setBonesToSetupPose: function() {
        for (var t = this.bones, e = 0, i = t.length; e < i; e++) t[e].setToSetupPose();
        for (var s = this.ikConstraints, e = 0, i = s.length; e < i; e++)(a = s[e]).bendDirection = a.data.bendDirection, a.mix = a.data.mix;
        for (var n = this.transformConstraints, e = 0, i = n.length; e < i; e++) {
            var a = n[e];
            a.translateMix = a.data.translateMix, a.x = a.data.x, a.y = a.data.y
        }
    },
    setSlotsToSetupPose: function() {
        for (var t = this.slots, e = this.drawOrder, i = 0, s = t.length; i < s; i++) e[i] = t[i], t[i].setToSetupPose(i)
    },
    getRootBone: function() {
        return this.bones.length ? this.bones[0] : null
    },
    findBone: function(t) {
        for (var e = this.bones, i = 0, s = e.length; i < s; i++)
            if (e[i].data.name == t) return e[i];
        return null
    },
    findBoneIndex: function(t) {
        for (var e = this.bones, i = 0, s = e.length; i < s; i++)
            if (e[i].data.name == t) return i;
        return -1
    },
    findSlot: function(t) {
        for (var e = this.slots, i = 0, s = e.length; i < s; i++)
            if (e[i].data.name == t) return e[i];
        return null
    },
    findSlotIndex: function(t) {
        for (var e = this.slots, i = 0, s = e.length; i < s; i++)
            if (e[i].data.name == t) return i;
        return -1
    },
    setSkinByName: function(t) {
        var e = this.data.findSkin(t);
        if (!e) throw "Skin not found: " + t;
        this.setSkin(e)
    },
    setSkin: function(t) {
        if (t)
            if (this.skin) t._attachAll(this, this.skin);
            else
                for (var e = this.slots, i = 0, s = e.length; i < s; i++) {
                    var n = e[i],
                        a = n.data.attachmentName;
                    if (a) {
                        var o = t.getAttachment(i, a);
                        o && n.setAttachment(o)
                    }
                }
            this.skin = t
    },
    getAttachmentBySlotName: function(t, e) {
        return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t), e)
    },
    getAttachmentBySlotIndex: function(t, e) {
        if (this.skin) {
            var i = this.skin.getAttachment(t, e);
            if (i) return i
        }
        return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(t, e) : null
    },
    setAttachment: function(t, e) {
        for (var i = this.slots, s = 0, n = i.length; s < n; s++) {
            var a = i[s];
            if (a.data.name == t) {
                var o = null;
                if (e && !(o = this.getAttachmentBySlotIndex(s, e))) throw "Attachment not found: " + e + ", for slot: " + t;
                return void a.setAttachment(o)
            }
        }
        throw "Slot not found: " + t
    },
    findIkConstraint: function(t) {
        for (var e = this.ikConstraints, i = 0, s = e.length; i < s; i++)
            if (e[i].data.name == t) return e[i];
        return null
    },
    findTransformConstraint: function(t) {
        for (var e = this.transformConstraints, i = 0, s = e.length; i < s; i++)
            if (e[i].data.name == t) return e[i];
        return null
    },
    update: function(t) {
        this.time += t
    }
}, spine.EventData = function(t) {
    this.name = t
}, spine.EventData.prototype = {
    intValue: 0,
    floatValue: 0,
    stringValue: null
}, spine.Event = function(t, e) {
    this.time = t, this.data = e
}, spine.Event.prototype = {
    intValue: 0,
    floatValue: 0,
    stringValue: null
}, spine.AttachmentType = {
    region: 0,
    boundingbox: 1,
    mesh: 2,
    weightedmesh: 3,
    linkedmesh: 4,
    weightedlinkedmesh: 5
}, spine.RegionAttachment = function(t) {
    this.name = t, this.offset = new spine.Float32Array(8), this.offset.length = 8, this.uvs = new spine.Float32Array(8), this.uvs.length = 8
}, spine.RegionAttachment.prototype = {
    type: spine.AttachmentType.region,
    x: 0,
    y: 0,
    rotation: 0,
    scaleX: 1,
    scaleY: 1,
    width: 0,
    height: 0,
    r: 1,
    g: 1,
    b: 1,
    a: 1,
    path: null,
    rendererObject: null,
    regionOffsetX: 0,
    regionOffsetY: 0,
    regionWidth: 0,
    regionHeight: 0,
    regionOriginalWidth: 0,
    regionOriginalHeight: 0,
    setUVs: function(t, e, i, s, n) {
        var a = this.uvs;
        n ? (a[2] = t, a[3] = s, a[4] = t, a[5] = e, a[6] = i, a[7] = e, a[0] = i, a[1] = s) : (a[0] = t, a[1] = s, a[2] = t, a[3] = e, a[4] = i, a[5] = e, a[6] = i, a[7] = s)
    },
    updateOffset: function() {
        var t = this.width / this.regionOriginalWidth * this.scaleX,
            e = this.height / this.regionOriginalHeight * this.scaleY,
            i = -this.width / 2 * this.scaleX + this.regionOffsetX * t,
            s = -this.height / 2 * this.scaleY + this.regionOffsetY * e,
            n = i + this.regionWidth * t,
            a = s + this.regionHeight * e,
            o = this.rotation * spine.degRad,
            r = Math.cos(o),
            h = Math.sin(o),
            l = i * r + this.x,
            c = i * h,
            u = s * r + this.y,
            d = s * h,
            p = n * r + this.x,
            m = n * h,
            g = a * r + this.y,
            f = a * h,
            _ = this.offset;
        _[0] = l - d, _[1] = u + c, _[2] = l - f, _[3] = g + c, _[4] = p - f, _[5] = g + m, _[6] = p - d, _[7] = u + m
    },
    computeVertices: function(t, e, i, s) {
        t += i.worldX, e += i.worldY;
        var n = i.a,
            a = i.b,
            o = i.c,
            r = i.d,
            h = this.offset;
        s[0] = h[0] * n + h[1] * a + t, s[1] = h[0] * o + h[1] * r + e, s[2] = h[2] * n + h[3] * a + t, s[3] = h[2] * o + h[3] * r + e, s[4] = h[4] * n + h[5] * a + t, s[5] = h[4] * o + h[5] * r + e, s[6] = h[6] * n + h[7] * a + t, s[7] = h[6] * o + h[7] * r + e
    }
}, spine.MeshAttachment = function(t) {
    this.name = t
}, spine.MeshAttachment.prototype = {
    type: spine.AttachmentType.mesh,
    vertices: null,
    uvs: null,
    regionUVs: null,
    triangles: null,
    hullLength: 0,
    r: 1,
    g: 1,
    b: 1,
    a: 1,
    path: null,
    inheritFFD: !0,
    parentMesh: null,
    rendererObject: null,
    regionU: 0,
    regionV: 0,
    regionU2: 0,
    regionV2: 0,
    regionRotate: !1,
    regionOffsetX: 0,
    regionOffsetY: 0,
    regionWidth: 0,
    regionHeight: 0,
    regionOriginalWidth: 0,
    regionOriginalHeight: 0,
    edges: null,
    width: 0,
    height: 0,
    updateUVs: function() {
        var t = this.regionU2 - this.regionU,
            e = this.regionV2 - this.regionV,
            i = this.regionUVs.length;
        if (this.uvs && this.uvs.length == i || (this.uvs = new spine.Float32Array(i)), this.regionRotate)
            for (s = 0; s < i; s += 2) this.uvs[s] = this.regionU + this.regionUVs[s + 1] * t, this.uvs[s + 1] = this.regionV + e - this.regionUVs[s] * e;
        else
            for (var s = 0; s < i; s += 2) this.uvs[s] = this.regionU + this.regionUVs[s] * t, this.uvs[s + 1] = this.regionV + this.regionUVs[s + 1] * e
    },
    computeWorldVertices: function(t, e, i, s) {
        var n = i.bone;
        t += n.worldX, e += n.worldY;
        var a = n.a,
            o = n.b,
            r = n.c,
            h = n.d,
            l = this.vertices,
            c = l.length;
        i.attachmentVertices.length == c && (l = i.attachmentVertices);
        for (var u = 0; u < c; u += 2) {
            var d = l[u],
                p = l[u + 1];
            s[u] = d * a + p * o + t, s[u + 1] = d * r + p * h + e
        }
    },
    setParentMesh: function(t) {
        this.parentMesh = t, t && (this.vertices = t.vertices, this.regionUVs = t.regionUVs, this.triangles = t.triangles, this.hullLength = t.hullLength, this.edges = t.edges, this.width = t.width, this.height = t.height)
    }
}, spine.WeightedMeshAttachment = function(t) {
    this.name = t
}, spine.WeightedMeshAttachment.prototype = {
    type: spine.AttachmentType.weightedmesh,
    bones: null,
    weights: null,
    uvs: null,
    regionUVs: null,
    triangles: null,
    hullLength: 0,
    r: 1,
    g: 1,
    b: 1,
    a: 1,
    path: null,
    inheritFFD: !0,
    parentMesh: null,
    rendererObject: null,
    regionU: 0,
    regionV: 0,
    regionU2: 0,
    regionV2: 0,
    regionRotate: !1,
    regionOffsetX: 0,
    regionOffsetY: 0,
    regionWidth: 0,
    regionHeight: 0,
    regionOriginalWidth: 0,
    regionOriginalHeight: 0,
    edges: null,
    width: 0,
    height: 0,
    updateUVs: function(t, e, i, s, n) {
        var a = this.regionU2 - this.regionU,
            o = this.regionV2 - this.regionV,
            r = this.regionUVs.length;
        if (this.uvs && this.uvs.length == r || (this.uvs = new spine.Float32Array(r)), this.regionRotate)
            for (h = 0; h < r; h += 2) this.uvs[h] = this.regionU + this.regionUVs[h + 1] * a, this.uvs[h + 1] = this.regionV + o - this.regionUVs[h] * o;
        else
            for (var h = 0; h < r; h += 2) this.uvs[h] = this.regionU + this.regionUVs[h] * a, this.uvs[h + 1] = this.regionV + this.regionUVs[h + 1] * o
    },
    computeWorldVertices: function(t, e, i, s) {
        var n, a, o, r, h, l, c, u = i.bone.skeleton.bones,
            d = this.weights,
            p = this.bones,
            m = 0,
            g = 0,
            f = 0,
            _ = 0,
            y = p.length;
        if (i.attachmentVertices.length)
            for (var v = i.attachmentVertices; g < y; m += 2) {
                for (a = 0, o = 0, n = p[g++] + g; g < n; g++, f += 3, _ += 2) r = u[p[g]], h = d[f] + v[_], l = d[f + 1] + v[_ + 1], c = d[f + 2], a += (h * r.a + l * r.b + r.worldX) * c, o += (h * r.c + l * r.d + r.worldY) * c;
                s[m] = a + t, s[m + 1] = o + e
            } else
                for (; g < y; m += 2) {
                    for (a = 0, o = 0, n = p[g++] + g; g < n; g++, f += 3) r = u[p[g]], h = d[f], l = d[f + 1], c = d[f + 2], a += (h * r.a + l * r.b + r.worldX) * c, o += (h * r.c + l * r.d + r.worldY) * c;
                    s[m] = a + t, s[m + 1] = o + e
                }
    },
    setParentMesh: function(t) {
        this.parentMesh = t, t && (this.bones = t.bones, this.weights = t.weights, this.regionUVs = t.regionUVs, this.triangles = t.triangles, this.hullLength = t.hullLength, this.edges = t.edges, this.width = t.width, this.height = t.height)
    }
}, spine.BoundingBoxAttachment = function(t) {
    this.name = t, this.vertices = new spine.Float32Array
}, spine.BoundingBoxAttachment.prototype = {
    type: spine.AttachmentType.boundingbox,
    computeWorldVertices: function(t, e, i, s) {
        t += i.worldX, e += i.worldY;
        for (var n = i.a, a = i.b, o = i.c, r = i.d, h = this.vertices, l = 0, c = h.length; l < c; l += 2) {
            var u = h[l],
                d = h[l + 1];
            s[l] = u * n + d * a + t, s[l + 1] = u * o + d * r + e
        }
    }
}, spine.AnimationStateData = function(t) {
    this.skeletonData = t, this.animationToMixTime = {}
}, spine.AnimationStateData.prototype = {
    defaultMix: 0,
    setMixByName: function(t, e, i) {
        var s = this.skeletonData.findAnimation(t);
        if (!s) throw "Animation not found: " + t;
        var n = this.skeletonData.findAnimation(e);
        if (!n) throw "Animation not found: " + e;
        this.setMix(s, n, i)
    },
    setMix: function(t, e, i) {
        this.animationToMixTime[t.name + ":" + e.name] = i
    },
    getMix: function(t, e) {
        var i = t.name + ":" + e.name;
        return this.animationToMixTime.hasOwnProperty(i) ? this.animationToMixTime[i] : this.defaultMix
    }
}, spine.TrackEntry = function() {}, spine.TrackEntry.prototype = {
    next: null,
    previous: null,
    animation: null,
    loop: !1,
    delay: 0,
    time: 0,
    lastTime: -1,
    endTime: 0,
    timeScale: 1,
    mixTime: 0,
    mixDuration: 0,
    mix: 1,
    onStart: null,
    onEnd: null,
    onComplete: null,
    onEvent: null
}, spine.AnimationState = function(t) {
    this.data = t, this.tracks = [], this.events = []
}, spine.AnimationState.prototype = {
    onStart: null,
    onEnd: null,
    onComplete: null,
    onEvent: null,
    timeScale: 1,
    update: function(t) {
        t *= this.timeScale;
        for (var e = 0; e < this.tracks.length; e++) {
            var i = this.tracks[e];
            if (i) {
                if (i.time += t * i.timeScale, i.previous) {
                    var s = t * i.previous.timeScale;
                    i.previous.time += s, i.mixTime += s
                }
                var n = i.next;
                n ? (n.time = i.lastTime - n.delay, n.time >= 0 && this.setCurrent(e, n)) : !i.loop && i.lastTime >= i.endTime && this.clearTrack(e)
            }
        }
    },
    apply: function(t) {
        for (var e = 0; e < this.tracks.length; e++) {
            var i = this.tracks[e];
            if (i) {
                this.events.length = 0;
                var s = i.time,
                    n = i.lastTime,
                    a = i.endTime,
                    o = i.loop;
                !o && s > a && (s = a);
                var r = i.previous;
                if (r) {
                    var h = r.time;
                    !r.loop && h > r.endTime && (h = r.endTime), r.animation.apply(t, h, h, r.loop, null);
                    var l = i.mixTime / i.mixDuration * i.mix;
                    l >= 1 && (l = 1, i.previous = null), i.animation.mix(t, i.lastTime, s, o, this.events, l)
                } else 1 == i.mix ? i.animation.apply(t, i.lastTime, s, o, this.events) : i.animation.mix(t, i.lastTime, s, o, this.events, i.mix);
                for (var c = 0, u = this.events.length; c < u; c++) {
                    var d = this.events[c];
                    i.onEvent && i.onEvent(e, d), this.onEvent && this.onEvent(e, d)
                }
                if (o ? n % a > s % a : n < a && s >= a) {
                    var p = Math.floor(s / a);
                    i.onComplete && i.onComplete(e, p), this.onComplete && this.onComplete(e, p)
                }
                i.lastTime = i.time
            }
        }
    },
    clearTracks: function() {
        for (var t = 0, e = this.tracks.length; t < e; t++) this.clearTrack(t);
        this.tracks.length = 0
    },
    clearTrack: function(t) {
        if (!(t >= this.tracks.length)) {
            var e = this.tracks[t];
            e && (e.onEnd && e.onEnd(t), this.onEnd && this.onEnd(t), this.tracks[t] = null)
        }
    },
    _expandToIndex: function(t) {
        if (t < this.tracks.length) return this.tracks[t];
        for (; t >= this.tracks.length;) this.tracks[this.tracks.length] = null;
        return null
    },
    setCurrent: function(t, e) {
        var i = this._expandToIndex(t);
        if (i) {
            var s = i.previous;
            i.previous = null, i.onEnd && i.onEnd(t), this.onEnd && this.onEnd(t), e.mixDuration = this.data.getMix(i.animation, e.animation), e.mixDuration > 0 && (e.mixTime = 0, s && i.mixTime / i.mixDuration < .5 ? e.previous = s : e.previous = i)
        }
        this.tracks[t] = e, e.onStart && e.onStart(t), this.onStart && this.onStart(t)
    },
    setAnimationByName: function(t, e, i) {
        var s = this.data.skeletonData.findAnimation(e);
        if (!s) throw "Animation not found: " + e;
        return this.setAnimation(t, s, i)
    },
    setAnimation: function(t, e, i) {
        var s = new spine.TrackEntry;
        return s.animation = e, s.loop = i, s.endTime = e.duration, this.setCurrent(t, s), s
    },
    addAnimationByName: function(t, e, i, s) {
        var n = this.data.skeletonData.findAnimation(e);
        if (!n) throw "Animation not found: " + e;
        return this.addAnimation(t, n, i, s)
    },
    addAnimation: function(t, e, i, s) {
        var n = new spine.TrackEntry;
        n.animation = e, n.loop = i, n.endTime = e.duration;
        var a = this._expandToIndex(t);
        if (a) {
            for (; a.next;) a = a.next;
            a.next = n
        } else this.tracks[t] = n;
        return s <= 0 && (a ? s += a.endTime - this.data.getMix(a.animation, e) : s = 0), n.delay = s, n
    },
    getCurrent: function(t) {
        return t >= this.tracks.length ? null : this.tracks[t]
    }
}, spine.SkeletonJson = function(t) {
    this.attachmentLoader = t, this.linkedMeshes = []
}, spine.SkeletonJson.prototype = {
    scale: 1,
    readSkeletonData: function(t, e) {
        var i = new spine.SkeletonData;
        i.name = e;
        var s = t.skeleton;
        s && (i.hash = s.hash, i.version = s.spine, i.width = s.width || 0, i.height = s.height || 0);
        for (var n = t.bones, a = 0, o = n.length; a < o; a++) {
            var r = n[a],
                h = null;
            if (r.parent && !(h = i.findBone(r.parent))) throw "Parent bone not found: " + r.parent;
            (b = new spine.BoneData(r.name, h)).length = (r.length || 0) * this.scale, b.x = (r.x || 0) * this.scale, b.y = (r.y || 0) * this.scale, b.rotation = r.rotation || 0, b.scaleX = r.hasOwnProperty("scaleX") ? r.scaleX : 1, b.scaleY = r.hasOwnProperty("scaleY") ? r.scaleY : 1, b.inheritScale = !r.hasOwnProperty("inheritScale") || r.inheritScale, b.inheritRotation = !r.hasOwnProperty("inheritRotation") || r.inheritRotation, i.bones[a] = b
        }
        var l = t.ik;
        if (l)
            for (var a = 0, o = l.length; a < o; a++) {
                for (var c = l[a], u = new spine.IkConstraintData(c.name), d = 0, p = (n = c.bones).length; d < p; d++) {
                    var m = i.findBone(n[d]);
                    if (!m) throw "IK bone not found: " + n[d];
                    u.bones[d] = m
                }
                if (u.target = i.findBone(c.target), !u.target) throw "Target bone not found: " + c.target;
                u.bendDirection = !c.hasOwnProperty("bendPositive") || c.bendPositive ? 1 : -1, u.mix = c.hasOwnProperty("mix") ? c.mix : 1, i.ikConstraints[a] = u
            }
        var g = t.transform;
        if (g)
            for (var a = 0, o = g.length; a < o; a++) {
                var f = g[a],
                    _ = new spine.TransformConstraintData(f.name);
                if (_.bone = i.findBone(f.bone), !_.bone) throw "Bone not found: " + f.bone;
                if (_.target = i.findBone(f.target), !_.target) throw "Target bone not found: " + f.target;
                _.mix = f.hasOwnProperty("translateMix") ? c.translateMix : 1, _.x = (f.x || 0) * this.scale, _.y = (f.y || 0) * this.scale, i.transformConstraints[a] = _
            }
        for (var y = t.slots, a = 0, o = y.length; a < o; a++) {
            var v = y[a],
                b = i.findBone(v.bone);
            if (!b) throw "Slot bone not found: " + v.bone;
            var S = new spine.SlotData(v.name, b),
                T = v.color;
            T && (S.r = this.toColor(T, 0), S.g = this.toColor(T, 1), S.b = this.toColor(T, 2), S.a = this.toColor(T, 3)), S.attachmentName = v.attachment, S.blendMode = spine.BlendMode[v.blend || "normal"], i.slots[a] = S
        }
        var E = t.skins;
        for (var P in E)
            if (E.hasOwnProperty(P)) {
                var A = E[P],
                    I = new spine.Skin(P);
                for (var C in A)
                    if (A.hasOwnProperty(C)) {
                        var x = i.findSlotIndex(C),
                            w = A[C];
                        for (var M in w)
                            if (w.hasOwnProperty(M)) {
                                var O = this.readAttachment(I, x, M, w[M]);
                                O && I.addAttachment(x, M, O)
                            }
                    }
                i.skins[i.skins.length] = I, "default" == I.name && (i.defaultSkin = I)
            }
        for (var a = 0, o = this.linkedMeshes.length; a < o; a++) {
            var L = this.linkedMeshes[a];
            if (!(I = L.skin ? i.findSkin(L.skin) : i.defaultSkin)) throw "Skin not found: " + L.skin;
            if (!(h = I.getAttachment(L.slotIndex, L.parent))) throw "Parent mesh not found: " + L.parent;
            L.mesh.setParentMesh(h), L.mesh.updateUVs()
        }
        this.linkedMeshes.length = 0;
        var N = t.events;
        for (var k in N)
            if (N.hasOwnProperty(k)) {
                var R = N[k],
                    D = new spine.EventData(k);
                D.intValue = R.int || 0, D.floatValue = R.float || 0, D.stringValue = R.string || null, i.events[i.events.length] = D
            }
        var G = t.animations;
        for (var B in G) G.hasOwnProperty(B) && this.readAnimation(B, G[B], i);
        return i
    },
    readAttachment: function(t, e, i, s) {
        i = s.name || i;
        var n = s.type || "region";
        "skinnedmesh" == n && (n = "weightedmesh"), n = spine.AttachmentType[n];
        var a = s.path || i,
            o = this.scale;
        switch (n) {
            case spine.AttachmentType.region:
                var r = this.attachmentLoader.newRegionAttachment(t, i, a);
                if (!r) return null;
                r.path = a, r.x = (s.x || 0) * o, r.y = (s.y || 0) * o, r.scaleX = s.hasOwnProperty("scaleX") ? s.scaleX : 1, r.scaleY = s.hasOwnProperty("scaleY") ? s.scaleY : 1, r.rotation = s.rotation || 0, r.width = (s.width || 0) * o, r.height = (s.height || 0) * o;
                var h = s.color;
                return h && (r.r = this.toColor(h, 0), r.g = this.toColor(h, 1), r.b = this.toColor(h, 2), r.a = this.toColor(h, 3)), r.updateOffset(), r;
            case spine.AttachmentType.mesh:
            case spine.AttachmentType.linkedmesh:
                return (l = this.attachmentLoader.newMeshAttachment(t, i, a)) ? (l.path = a, (h = s.color) && (l.r = this.toColor(h, 0), l.g = this.toColor(h, 1), l.b = this.toColor(h, 2), l.a = this.toColor(h, 3)), l.width = (s.width || 0) * o, l.height = (s.height || 0) * o, s.parent ? (l.inheritFFD = !s.hasOwnProperty("ffd") || s.ffd, this.linkedMeshes[this.linkedMeshes.length] = {
                    mesh: l,
                    skin: s.skin,
                    slotIndex: e,
                    parent: s.parent
                }) : (l.vertices = this.getFloatArray(s, "vertices", o), l.triangles = this.getUint32Array(s, "triangles"), l.regionUVs = this.getFloatArray(s, "uvs", 1), l.updateUVs(), l.hullLength = 2 * (s.hull || 0), s.edges && (l.edges = this.getUint16Array(s, "edges"))), l) : null;
            case spine.AttachmentType.weightedmesh:
            case spine.AttachmentType.weightedlinkedmesh:
                var l = this.attachmentLoader.newWeightedMeshAttachment(t, i, a);
                if (!l) return null;
                if (l.path = a, (h = s.color) && (l.r = this.toColor(h, 0), l.g = this.toColor(h, 1), l.b = this.toColor(h, 2), l.a = this.toColor(h, 3)), l.width = (s.width || 0) * o, l.height = (s.height || 0) * o, s.parent) l.inheritFFD = !s.hasOwnProperty("ffd") || s.ffd, this.linkedMeshes[this.linkedMeshes.length] = {
                    mesh: l,
                    skin: s.skin,
                    slotIndex: e,
                    parent: s.parent
                };
                else {
                    for (var c = this.getFloatArray(s, "uvs", 1), u = this.getFloatArray(s, "vertices", 1), d = new spine.Float32Array(3 * c.length * 3), p = new spine.Uint32Array(3 * c.length), m = 0, g = 0, f = 0, _ = u.length; m < _;) {
                        var y = 0 | u[m++];
                        p[g++] = y;
                        for (var v = m + 4 * y; m < v;) p[g++] = u[m], d[f++] = u[m + 1] * o, d[f++] = u[m + 2] * o, d[f++] = u[m + 3], m += 4
                    }
                    l.bones = p, l.weights = d, l.triangles = this.getUint32Array(s, "triangles"), l.regionUVs = c, l.updateUVs(), l.hullLength = 2 * (s.hull || 0), s.edges && (l.edges = this.getUint16Array(s, "edges"))
                }
                return l;
            case spine.AttachmentType.boundingbox:
                var b = this.attachmentLoader.newBoundingBoxAttachment(t, i),
                    u = s.vertices;
                b.vertices = new spine.Float32Array(u.length);
                for (var m = 0, _ = u.length; m < _; m++) b.vertices[m] = u[m] * o;
                return b
        }
        throw "Unknown attachment type: " + n
    },
    readAnimation: function(t, e, i) {
        var s = [],
            n = 0,
            a = e.slots;
        for (var o in a)
            if (a.hasOwnProperty(o)) {
                var r = a[o],
                    h = i.findSlotIndex(o);
                for (var l in r)
                    if (r.hasOwnProperty(l)) {
                        w = r[l];
                        if ("color" == l) {
                            (G = new spine.ColorTimeline(w.length)).slotIndex = h;
                            for (var c = 0, u = 0, d = w.length; u < d; u++) {
                                var p = (T = w[u]).color,
                                    m = this.toColor(p, 0),
                                    g = this.toColor(p, 1),
                                    f = this.toColor(p, 2),
                                    _ = this.toColor(p, 3);
                                G.setFrame(c, T.time, m, g, f, _), this.readCurve(G, c, T), c++
                            }
                            s[s.length] = G, n = Math.max(n, G.frames[5 * G.getFrameCount() - 5])
                        } else {
                            if ("attachment" != l) throw "Invalid timeline type for a slot: " + l + " (" + o + ")";
                            (G = new spine.AttachmentTimeline(w.length)).slotIndex = h;
                            for (var c = 0, u = 0, d = w.length; u < d; u++) {
                                T = w[u];
                                G.setFrame(c++, T.time, T.name)
                            }
                            s[s.length] = G, n = Math.max(n, G.frames[G.getFrameCount() - 1])
                        }
                    }
            }
        var y = e.bones;
        for (var v in y)
            if (y.hasOwnProperty(v)) {
                var b = i.findBoneIndex(v);
                if (-1 == b) throw "Bone not found: " + v;
                var S = y[v];
                for (var l in S)
                    if (S.hasOwnProperty(l)) {
                        w = S[l];
                        if ("rotate" == l) {
                            (G = new spine.RotateTimeline(w.length)).boneIndex = b;
                            for (var c = 0, u = 0, d = w.length; u < d; u++) {
                                var T = w[u];
                                G.setFrame(c, T.time, T.angle), this.readCurve(G, c, T), c++
                            }
                            s[s.length] = G, n = Math.max(n, G.frames[2 * G.getFrameCount() - 2])
                        } else {
                            if ("translate" != l && "scale" != l) throw "Invalid timeline type for a bone: " + l + " (" + v + ")";
                            var E = 1;
                            "scale" == l ? G = new spine.ScaleTimeline(w.length) : (G = new spine.TranslateTimeline(w.length), E = this.scale), G.boneIndex = b;
                            for (var c = 0, u = 0, d = w.length; u < d; u++) {
                                var P = ((T = w[u]).x || 0) * E,
                                    A = (T.y || 0) * E;
                                G.setFrame(c, T.time, P, A), this.readCurve(G, c, T), c++
                            }
                            s[s.length] = G, n = Math.max(n, G.frames[3 * G.getFrameCount() - 3])
                        }
                    }
            }
        var I = e.ik;
        for (var C in I)
            if (I.hasOwnProperty(C)) {
                var x = i.findIkConstraint(C),
                    w = I[C];
                (G = new spine.IkConstraintTimeline(w.length)).ikConstraintIndex = i.ikConstraints.indexOf(x);
                for (var c = 0, u = 0, d = w.length; u < d; u++) {
                    var M = (T = w[u]).hasOwnProperty("mix") ? T.mix : 1,
                        O = !T.hasOwnProperty("bendPositive") || T.bendPositive ? 1 : -1;
                    G.setFrame(c, T.time, M, O), this.readCurve(G, c, T), c++
                }
                s[s.length] = G, n = Math.max(n, G.frames[3 * G.getFrameCount() - 3])
            }
        var L = e.ffd;
        for (var N in L) {
            var k = i.findSkin(N),
                r = L[N];
            for (o in r) {
                var h = i.findSlotIndex(o),
                    R = r[o];
                for (var D in R) {
                    var w = R[D],
                        G = new spine.FfdTimeline(w.length),
                        B = k.getAttachment(h, D);
                    if (!B) throw "FFD attachment not found: " + D;
                    G.slotIndex = h, G.attachment = B;
                    var F, U = B.type == spine.AttachmentType.mesh;
                    F = U ? B.vertices.length : B.weights.length / 3 * 2;
                    for (var c = 0, u = 0, d = w.length; u < d; u++) {
                        var H;
                        if ((T = w[u]).vertices) {
                            var Y = T.vertices;
                            (H = new spine.Float32Array(F)).length = F;
                            var W = T.offset || 0,
                                j = Y.length;
                            if (1 == this.scale)
                                for (z = 0; z < j; z++) H[z + W] = Y[z];
                            else
                                for (z = 0; z < j; z++) H[z + W] = Y[z] * this.scale; if (U)
                                for (var X = B.vertices, z = 0, j = H.length; z < j; z++) H[z] += X[z]
                        } else U ? H = B.vertices : (H = new spine.Float32Array(F)).length = F;
                        G.setFrame(c, T.time, H), this.readCurve(G, c, T), c++
                    }
                    s[s.length] = G, n = Math.max(n, G.frames[G.getFrameCount() - 1])
                }
            }
        }
        var K = e.drawOrder;
        if (K || (K = e.draworder), K) {
            for (var G = new spine.DrawOrderTimeline(K.length), V = i.slots.length, c = 0, u = 0, d = K.length; u < d; u++) {
                var q = K[u],
                    J = null;
                if (q.offsets) {
                    (J = new spine.Uint32Array(V)).length = V;
                    for (z = V - 1; z >= 0; z--) J[z] = 4294967295;
                    var Z = q.offsets,
                        Q = new spine.Uint32Array(V - Z.length);
                    Q.length = V - Z.length;
                    for (var $ = 0, tt = 0, z = 0, j = Z.length; z < j; z++) {
                        var et = Z[z];
                        if (-1 == (h = i.findSlotIndex(et.slot))) throw "Slot not found: " + et.slot;
                        for (; $ != h;) Q[tt++] = $++;
                        J[$ + et.offset] = $++
                    }
                    for (; $ < V;) Q[tt++] = $++;
                    for (z = V - 1; z >= 0; z--) 4294967295 == J[z] && (J[z] = Q[--tt])
                }
                G.setFrame(c++, q.time, J)
            }
            s[s.length] = G, n = Math.max(n, G.frames[G.getFrameCount() - 1])
        }
        var it = e.events;
        if (it) {
            for (var G = new spine.EventTimeline(it.length), c = 0, u = 0, d = it.length; u < d; u++) {
                var st = it[u],
                    nt = i.findEvent(st.name);
                if (!nt) throw "Event not found: " + st.name;
                var at = new spine.Event(st.time, nt);
                at.intValue = st.hasOwnProperty("int") ? st.int : nt.intValue, at.floatValue = st.hasOwnProperty("float") ? st.float : nt.floatValue, at.stringValue = st.hasOwnProperty("string") ? st.string : nt.stringValue, G.setFrame(c++, at)
            }
            s[s.length] = G, n = Math.max(n, G.frames[G.getFrameCount() - 1])
        }
        i.animations[i.animations.length] = new spine.Animation(t, s, n)
    },
    readCurve: function(t, e, i) {
        var s = i.curve;
        s ? "stepped" == s ? t.curves.setStepped(e) : s instanceof Array && t.curves.setCurve(e, s[0], s[1], s[2], s[3]) : t.curves.setLinear(e)
    },
    toColor: function(t, e) {
        if (8 != t.length) throw "Color hexidecimal length must be 8, recieved: " + t;
        return parseInt(t.substring(2 * e, 2 * e + 2), 16) / 255
    },
    getFloatArray: function(t, e, i) {
        var s = t[e],
            n = new spine.Float32Array(s.length),
            a = 0,
            o = s.length;
        if (1 == i)
            for (; a < o; a++) n[a] = s[a];
        else
            for (; a < o; a++) n[a] = s[a] * i;
        return n
    },
    getUint32Array: function(t, e) {
        for (var i = t[e], s = new spine.Uint32Array(i.length), n = 0, a = i.length; n < a; n++) s[n] = 0 | i[n];
        return s
    },
    getUint16Array: function(t, e) {
        for (var i = t[e], s = new spine.Uint16Array(i.length), n = 0, a = i.length; n < a; n++) s[n] = 0 | i[n];
        return s
    }
}, spine.Atlas = function(t, e) {
    this.textureLoader = e, this.pages = [], this.regions = [];
    var i = new spine.AtlasReader(t),
        s = [];
    s.length = 4;
    for (var n = null;;) {
        var a = i.readLine();
        if (null === a) break;
        if ((a = i.trim(a)).length)
            if (n) {
                var o = new spine.AtlasRegion;
                o.name = a, o.page = n, o.rotate = "true" == i.readValue(), i.readTuple(s);
                var r = parseInt(s[0]),
                    h = parseInt(s[1]);
                i.readTuple(s);
                var l = parseInt(s[0]),
                    c = parseInt(s[1]);
                o.u = r / n.width, o.v = h / n.height, o.rotate ? (o.u2 = (r + c) / n.width, o.v2 = (h + l) / n.height) : (o.u2 = (r + l) / n.width, o.v2 = (h + c) / n.height), o.x = r, o.y = h, o.width = Math.abs(l), o.height = Math.abs(c), 4 == i.readTuple(s) && (o.splits = [parseInt(s[0]), parseInt(s[1]), parseInt(s[2]), parseInt(s[3])], 4 == i.readTuple(s) && (o.pads = [parseInt(s[0]), parseInt(s[1]), parseInt(s[2]), parseInt(s[3])], i.readTuple(s))), o.originalWidth = parseInt(s[0]), o.originalHeight = parseInt(s[1]), i.readTuple(s), o.offsetX = parseInt(s[0]), o.offsetY = parseInt(s[1]), o.index = parseInt(i.readValue()), this.regions[this.regions.length] = o
            } else {
                (n = new spine.AtlasPage).name = a, 2 == i.readTuple(s) && (n.width = parseInt(s[0]), n.height = parseInt(s[1]), i.readTuple(s)), n.format = spine.Atlas.Format[s[0]], i.readTuple(s), n.minFilter = spine.Atlas.TextureFilter[s[0]], n.magFilter = spine.Atlas.TextureFilter[s[1]];
                var u = i.readValue();
                n.uWrap = spine.Atlas.TextureWrap.clampToEdge, n.vWrap = spine.Atlas.TextureWrap.clampToEdge, "x" == u ? n.uWrap = spine.Atlas.TextureWrap.repeat : "y" == u ? n.vWrap = spine.Atlas.TextureWrap.repeat : "xy" == u && (n.uWrap = n.vWrap = spine.Atlas.TextureWrap.repeat), e.load(n, a, this), this.pages[this.pages.length] = n
            } else n = null
    }
}, spine.Atlas.prototype = {
    findRegion: function(t) {
        for (var e = this.regions, i = 0, s = e.length; i < s; i++)
            if (e[i].name == t) return e[i];
        return null
    },
    dispose: function() {
        for (var t = this.pages, e = 0, i = t.length; e < i; e++) this.textureLoader.unload(t[e].rendererObject)
    },
    updateUVs: function(t) {
        for (var e = this.regions, i = 0, s = e.length; i < s; i++) {
            var n = e[i];
            n.page == t && (n.u = n.x / t.width, n.v = n.y / t.height, n.rotate ? (n.u2 = (n.x + n.height) / t.width, n.v2 = (n.y + n.width) / t.height) : (n.u2 = (n.x + n.width) / t.width, n.v2 = (n.y + n.height) / t.height))
        }
    }
}, spine.Atlas.Format = {
    alpha: 0,
    intensity: 1,
    luminanceAlpha: 2,
    rgb565: 3,
    rgba4444: 4,
    rgb888: 5,
    rgba8888: 6
}, spine.Atlas.TextureFilter = {
    nearest: 0,
    linear: 1,
    mipMap: 2,
    mipMapNearestNearest: 3,
    mipMapLinearNearest: 4,
    mipMapNearestLinear: 5,
    mipMapLinearLinear: 6
}, spine.Atlas.TextureWrap = {
    mirroredRepeat: 0,
    clampToEdge: 1,
    repeat: 2
}, spine.AtlasPage = function() {}, spine.AtlasPage.prototype = {
    name: null,
    format: null,
    minFilter: null,
    magFilter: null,
    uWrap: null,
    vWrap: null,
    rendererObject: null,
    width: 0,
    height: 0
}, spine.AtlasRegion = function() {}, spine.AtlasRegion.prototype = {
    page: null,
    name: null,
    x: 0,
    y: 0,
    width: 0,
    height: 0,
    u: 0,
    v: 0,
    u2: 0,
    v2: 0,
    offsetX: 0,
    offsetY: 0,
    originalWidth: 0,
    originalHeight: 0,
    index: 0,
    rotate: !1,
    splits: null,
    pads: null
}, spine.AtlasReader = function(t) {
    this.lines = t.split(/\r\n|\r|\n/)
}, spine.AtlasReader.prototype = {
    index: 0,
    trim: function(t) {
        return t.replace(/^\s+|\s+$/g, "")
    },
    readLine: function() {
        return this.index >= this.lines.length ? null : this.lines[this.index++]
    },
    readValue: function() {
        var t = this.readLine(),
            e = t.indexOf(":");
        if (-1 == e) throw "Invalid line: " + t;
        return this.trim(t.substring(e + 1))
    },
    readTuple: function(t) {
        var e = this.readLine(),
            i = e.indexOf(":");
        if (-1 == i) throw "Invalid line: " + e;
        for (var s = 0, n = i + 1; s < 3; s++) {
            var a = e.indexOf(",", n);
            if (-1 == a) break;
            t[s] = this.trim(e.substr(n, a - n)), n = a + 1
        }
        return t[s] = this.trim(e.substring(n)), s + 1
    }
}, spine.AtlasAttachmentLoader = function(t) {
    this.atlas = t
}, spine.AtlasAttachmentLoader.prototype = {
    newRegionAttachment: function(t, e, i) {
        var s = this.atlas.findRegion(i);
        if (!s) throw "Region not found in atlas: " + i + " (region attachment: " + e + ")";
        var n = new spine.RegionAttachment(e);
        return n.rendererObject = s, n.setUVs(s.u, s.v, s.u2, s.v2, s.rotate), n.regionOffsetX = s.offsetX, n.regionOffsetY = s.offsetY, n.regionWidth = s.width, n.regionHeight = s.height, n.regionOriginalWidth = s.originalWidth, n.regionOriginalHeight = s.originalHeight, n
    },
    newMeshAttachment: function(t, e, i) {
        var s = this.atlas.findRegion(i);
        if (!s) throw "Region not found in atlas: " + i + " (mesh attachment: " + e + ")";
        var n = new spine.MeshAttachment(e);
        return n.rendererObject = s, n.regionU = s.u, n.regionV = s.v, n.regionU2 = s.u2, n.regionV2 = s.v2, n.regionRotate = s.rotate, n.regionOffsetX = s.offsetX, n.regionOffsetY = s.offsetY, n.regionWidth = s.width, n.regionHeight = s.height, n.regionOriginalWidth = s.originalWidth, n.regionOriginalHeight = s.originalHeight, n
    },
    newWeightedMeshAttachment: function(t, e, i) {
        var s = this.atlas.findRegion(i);
        if (!s) throw "Region not found in atlas: " + i + " (weighted mesh attachment: " + e + ")";
        var n = new spine.WeightedMeshAttachment(e);
        return n.rendererObject = s, n.regionU = s.u, n.regionV = s.v, n.regionU2 = s.u2, n.regionV2 = s.v2, n.regionRotate = s.rotate, n.regionOffsetX = s.offsetX, n.regionOffsetY = s.offsetY, n.regionWidth = s.width, n.regionHeight = s.height, n.regionOriginalWidth = s.originalWidth, n.regionOriginalHeight = s.originalHeight, n
    },
    newBoundingBoxAttachment: function(t, e) {
        return new spine.BoundingBoxAttachment(e)
    }
}, spine.SkeletonBounds = function() {
    this.polygonPool = [], this.polygons = [], this.boundingBoxes = []
}, spine.SkeletonBounds.prototype = {
    minX: 0,
    minY: 0,
    maxX: 0,
    maxY: 0,
    update: function(t, e) {
        var i = t.slots,
            s = i.length,
            n = t.x,
            a = t.y,
            o = this.boundingBoxes,
            r = this.polygonPool,
            h = this.polygons;
        o.length = 0;
        for (var l = 0, c = h.length; l < c; l++) r[r.length] = h[l];
        h.length = 0;
        for (l = 0; l < s; l++) {
            var u = i[l],
                d = u.attachment;
            if (d.type == spine.AttachmentType.boundingbox) {
                o[o.length] = d;
                var p, m = r.length;
                m > 0 ? (p = r[m - 1], r.splice(m - 1, 1)) : p = new spine.Float32Array, h[h.length] = p, p.length = d.vertices.length, d.computeWorldVertices(n, a, u.bone, p)
            }
        }
        e && this.aabbCompute()
    },
    aabbCompute: function() {
        for (var t = this.polygons, e = Number.MAX_VALUE, i = Number.MAX_VALUE, s = -Number.MAX_VALUE, n = -Number.MAX_VALUE, a = 0, o = t.length; a < o; a++)
            for (var r = t[a], h = 0, l = r.length; h < l; h += 2) {
                var c = r[h],
                    u = r[h + 1];
                e = Math.min(e, c), i = Math.min(i, u), s = Math.max(s, c), n = Math.max(n, u)
            }
        this.minX = e, this.minY = i, this.maxX = s, this.maxY = n
    },
    aabbContainsPoint: function(t, e) {
        return t >= this.minX && t <= this.maxX && e >= this.minY && e <= this.maxY
    },
    aabbIntersectsSegment: function(t, e, i, s) {
        var n = this.minX,
            a = this.minY,
            o = this.maxX,
            r = this.maxY;
        if (t <= n && i <= n || e <= a && s <= a || t >= o && i >= o || e >= r && s >= r) return !1;
        var h = (s - e) / (i - t),
            l = h * (n - t) + e;
        if (l > a && l < r) return !0;
        if ((l = h * (o - t) + e) > a && l < r) return !0;
        var c = (a - e) / h + t;
        return c > n && c < o || (c = (r - e) / h + t) > n && c < o
    },
    aabbIntersectsSkeleton: function(t) {
        return this.minX < t.maxX && this.maxX > t.minX && this.minY < t.maxY && this.maxY > t.minY
    },
    containsPoint: function(t, e) {
        for (var i = this.polygons, s = 0, n = i.length; s < n; s++)
            if (this.polygonContainsPoint(i[s], t, e)) return this.boundingBoxes[s];
        return null
    },
    intersectsSegment: function(t, e, i, s) {
        for (var n = this.polygons, a = 0, o = n.length; a < o; a++)
            if (n[a].intersectsSegment(t, e, i, s)) return this.boundingBoxes[a];
        return null
    },
    polygonContainsPoint: function(t, e, i) {
        for (var s = t.length, n = s - 2, a = !1, o = 0; o < s; o += 2) {
            var r = t[o + 1],
                h = t[n + 1];
            if (r < i && h >= i || h < i && r >= i) {
                var l = t[o];
                l + (i - r) / (h - r) * (t[n] - l) < e && (a = !a)
            }
            n = o
        }
        return a
    },
    polygonIntersectsSegment: function(t, e, i, s, n) {
        for (var a = t.length, o = e - s, r = i - n, h = e * n - i * s, l = t[a - 2], c = t[a - 1], u = 0; u < a; u += 2) {
            var d = t[u],
                p = t[u + 1],
                m = l * p - c * d,
                g = l - d,
                f = c - p,
                _ = o * f - r * g,
                y = (h * g - o * m) / _;
            if ((y >= l && y <= d || y >= d && y <= l) && (y >= e && y <= s || y >= s && y <= e)) {
                var v = (h * f - r * m) / _;
                if ((v >= c && v <= p || v >= p && v <= c) && (v >= i && v <= n || v >= n && v <= i)) return !0
            }
            l = d, c = p
        }
        return !1
    },
    getPolygon: function(t) {
        var e = this.boundingBoxes.indexOf(t);
        return -1 == e ? null : this.polygons[e]
    },
    getWidth: function() {
        return this.maxX - this.minX
    },
    getHeight: function() {
        return this.maxY - this.minY
    }
};
var __extends = this && this.__extends || function(t, e) {
        function i() {
            this.constructor = t
        }
        for (var s in e) e.hasOwnProperty(s) && (t[s] = e[s]);
        t.prototype = null === e ? Object.create(e) : (i.prototype = e.prototype, new i)
    },
    PhaserSpine;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.addSpineCache(), s.addSpineFactory(), s.addSpineLoader(), s
        }
        return __extends(i, e), i.prototype.addSpineLoader = function() {
            Phaser.Loader.prototype.spine = function(t, e, i) {
                var s = this,
                    n = t + "Atlas",
                    a = {
                        atlas: n,
                        basePath: "" === e.substring(0, e.lastIndexOf("/")) ? "." : e.substring(0, e.lastIndexOf("/")),
                        variants: void 0
                    };
                void 0 === i ? i = [""] : a.variants = i, i.forEach(function(t) {
                    s.onFileComplete.add(function(e, i) {
                        if (i === n) new spine.Atlas(s.game.cache.getText(i), {
                            load: function(e, i, n) {
                                s.image(i, a.basePath + "/" + i.substr(0, i.lastIndexOf(".")) + t + ".png")
                            }
                        })
                    }), s.text(n, e.substr(0, e.lastIndexOf(".")) + t + ".atlas")
                }), this.json(t, e), this.game.cache.addSpine(t, a)
            }
        }, i.prototype.addSpineFactory = function() {
            Phaser.GameObjectFactory.prototype.spine = function(e, i, s, n, a) {
                void 0 === a && (a = this.world);
                var o = new t.Spine(this.game, s, n);
                return o.setToSetupPose(), o.position.x = e, o.position.y = i, a.add(o)
            }, Phaser.GameObjectCreator.prototype.spine = function(e, i, s, n, a) {
                return new t.Spine(this.game, s, n)
            }
        }, i.prototype.addSpineCache = function() {
            Phaser.Cache.prototype.spine = {}, Phaser.Cache.prototype.addSpine = function(t, e) {
                this.spine[t] = e
            }, Phaser.Cache.prototype.getSpine = function(t) {
                return this.spine.hasOwnProperty(t), this.spine[t]
            }
        }, i
    }(Phaser.Plugin);
    e.RESOLUTION_REGEXP = /@(.+)x/, t.SpinePlugin = e
}(PhaserSpine || (PhaserSpine = {})), Phaser.Rope.prototype.postUpdate = function() {}, spine.Bone.yDown = !0;
var PhaserSpine;
! function(t) {
    var e = function(e) {
        function i(i, s, n) {
            var a = e.call(this, i) || this;
            a.imageScale = 1;
            var o = a.game.cache.getSpine(s);
            void 0 !== n && -1 !== o.variants.indexOf(n) ? a.imageScale = a.getScaleFromVariant(n) : o.variants && o.variants.length >= 1 && (a.imageScale = a.getScaleFromVariant(o.variants[0]));
            var r = new t.SpineTextureLoader(i),
                h = new spine.Atlas(i.cache.getText(o.atlas), r),
                l = new spine.AtlasAttachmentLoader(h),
                c = new spine.SkeletonJson(l);
            if (a.skeletonData = c.readSkeletonData(i.cache.getJSON(s)), !a.skeletonData) throw new Error("Spine data must be preloaded using Loader.spine");
            a.onEvent = new Phaser.Signal, a.onComplete = new Phaser.Signal, a.onEnd = new Phaser.Signal, a.skeleton = new spine.Skeleton(a.skeletonData), a.skeleton.updateWorldTransform(), a.stateData = new spine.AnimationStateData(a.skeletonData), a.state = new spine.AnimationState(a.stateData), a.state.onEvent = a.onEvent.dispatch.bind(a.onEvent), a.state.onComplete = a.onComplete.dispatch.bind(a.onComplete), a.state.onEnd = a.onEnd.dispatch.bind(a.onEnd), a.slotContainers = [];
            for (var u = 0, d = a.skeleton.slots.length; u < d; u++) {
                var p = a.skeleton.slots[u],
                    m = p.attachment,
                    g = new Phaser.Group(i);
                if (a.slotContainers.push(g), a.add(g), m instanceof spine.RegionAttachment) {
                    var f = m.rendererObject.name,
                        _ = a.createSprite(p, m);
                    p.currentSprite = _, p.currentSpriteName = f, g.add(_)
                } else {
                    if (!(m instanceof spine.WeightedMeshAttachment)) continue;
                    var y = a.createMesh(p, m);
                    p.currentMesh = y, p.currentMeshName = m.name, g.add(y)
                }
            }
            return a.autoUpdate = !0, a
        }
        return __extends(i, e), Object.defineProperty(i.prototype, "autoUpdate", {
            get: function() {
                return this.updateTransform === t.Spine.prototype.autoUpdateTransform
            },
            set: function(e) {
                this.updateTransform = e ? t.Spine.prototype.autoUpdateTransform : PIXI.DisplayObjectContainer.prototype.updateTransform
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.getScaleFromVariant = function(e) {
            var i = t.SpinePlugin.RESOLUTION_REGEXP.exec(e);
            return i ? parseFloat(i[1]) : 1
        }, i.prototype.setTint = function(t) {
            this.globalTint = t;
            for (var e = this.skeleton.slots, i = 0; i < e.length; i++) e[i].currentSprite.tint = t
        }, i.prototype.update = function(t) {
            if (void 0 !== t) {
                this.state.update(t), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform();
                for (var e = this.skeleton.drawOrder, i = this.skeleton.slots, s = 0, n = e.length; s < n; s++) void 0 !== e[s].currentSprite && (this.children[s] = e[s].currentSprite.parent);
                for (var s = 0, n = i.length; s < n; s++) {
                    var a = i[s],
                        o = a.attachment,
                        r = this.slotContainers[s];
                    if (o) {
                        var h = o.type;
                        if (h === spine.AttachmentType.region) {
                            if (o.rendererObject && (!a.currentSpriteName || a.currentSpriteName !== o.name)) {
                                var l = o.rendererObject.name;
                                if (void 0 !== a.currentSprite && (a.currentSprite.visible = !1), a.sprites = a.sprites || {}, void 0 !== a.sprites[l]) a.sprites[l].visible = !0;
                                else {
                                    var c = this.createSprite(a, o);
                                    r.add(c)
                                }
                                a.currentSprite = a.sprites[l], a.currentSpriteName = l
                            }
                            var u = a.bone;
                            r.position.x = o.x * u.a + o.y * u.b + u.worldX, r.position.y = o.x * u.c + o.y * u.d + u.worldY, r.scale.x = u.getWorldScaleX(), r.scale.y = u.getWorldScaleY(), r.rotation = (u.getWorldRotationX() - o.rotation) * Math.PI / 180, u.getWorldScaleY() < 0 && (r.scale.y = -r.scale.y), u.getWorldScaleX() < 0 && (r.scale.x = -r.scale.x), (u.getWorldScaleY() < 0 || u.getWorldScaleX() < 0) && (r.rotation = -r.rotation), a.currentSprite.blendMode = a.blendMode, this.globalTint || (a.currentSprite.tint = a.currentSprite.tint = parseInt(Phaser.Color.componentToHex(255 * a.r).substring(0, 2) + Phaser.Color.componentToHex(255 * a.g).substring(0, 2) + Phaser.Color.componentToHex(255 * a.b).substring(0, 2), 16))
                        } else {
                            if (h !== spine.AttachmentType.weightedmesh && h !== spine.AttachmentType.weightedlinkedmesh) {
                                r.visible = !1;
                                continue
                            }
                            if (!a.currentMeshName || a.currentMeshName !== o.name) {
                                var d = o.name;
                                if (void 0 !== a.currentMesh && (a.currentMesh.visible = !1), a.meshes = a.meshes || {}, void 0 !== a.meshes[d]) a.meshes[d].visible = !0;
                                else {
                                    var p = this.createMesh(a, o);
                                    r.add(p)
                                }
                                a.currentMesh = a.meshes[d], a.currentMeshName = d
                            }
                            o.computeWorldVertices(a.bone.skeleton.x, a.bone.skeleton.y, a, a.currentMesh.vertices)
                        }
                        r.visible = !0, r.alpha = a.a
                    } else r.visible = !1
                }
            }
        }, i.prototype.destroy = function(t, i) {
            e.prototype.destroy.call(this, !0, i)
        }, i.prototype.autoUpdateTransform = function() {
            if (i.globalAutoUpdate) {
                this.lastTime = this.lastTime || Date.now();
                var t = .001 * (Date.now() - this.lastTime);
                this.lastTime = Date.now(), this.update(t)
            } else this.lastTime = 0;
            PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)
        }, i.prototype.createSprite = function(t, e) {
            var i = e.rendererObject,
                s = i.page.rendererObject,
                n = new PIXI.Rectangle(i.x, i.y, i.rotate ? i.height : i.width, i.rotate ? i.width : i.height),
                a = new PIXI.Texture(s, n),
                o = new Phaser.Sprite(this.game, 0, 0, a),
                r = i.rotate ? .5 * Math.PI : 0;
            if (o.scale.x = i.width / i.originalWidth * e.scaleX / this.imageScale, o.scale.y = i.height / i.originalHeight * e.scaleY / this.imageScale, o.rotation = r, o.anchor.x = (.5 * i.originalWidth - i.offsetX) / i.width, o.anchor.y = 1 - (.5 * i.originalHeight - i.offsetY) / i.height, o.alpha = e.a, i.rotate) {
                var h = o.scale.x;
                o.scale.x = o.scale.y, o.scale.y = h
            }
            return t.sprites = t.sprites || {}, t.sprites[i.name] = o, o
        }, i.prototype.createMesh = function(t, e) {
            var i = e.rendererObject.page.rendererObject,
                s = new PIXI.Texture(i),
                n = new Phaser.Rope(this.game, 0, 0, s);
            return n.drawMode = 1, n.canvasPadding = 1.5, n.vertices = new spine.Float32Array(e.uvs.length), n.uvs = e.uvs, n.indices = e.triangles, n.alpha = e.a, t.meshes = t.meshes || {}, t.meshes[e.name] = n, n
        }, i.prototype.setMixByName = function(t, e, i) {
            this.stateData.setMixByName(t, e, i)
        }, i.prototype.setAnimationByName = function(t, e, i) {
            void 0 === i && (i = !1);
            var s = this.state.data.skeletonData.findAnimation(e);
            return s ? this.state.setAnimation(t, s, i) : null
        }, i.prototype.addAnimationByName = function(t, e, i, s) {
            void 0 === i && (i = !1), void 0 === s && (s = 0);
            var n = this.state.data.skeletonData.findAnimation(e);
            return n ? this.state.addAnimation(t, n, i, s) : null
        }, i.prototype.getCurrentAnimationForTrack = function(t) {
            return this.state.tracks[t].animation.name
        }, i.prototype.setSkinByName = function(t) {
            var e = this.skeleton.data.findSkin(t);
            e && this.skeleton.setSkin(e)
        }, i.prototype.setSkin = function(t) {
            this.skeleton.setSkin(t)
        }, i.prototype.setToSetupPose = function() {
            this.skeleton.setToSetupPose()
        }, i.prototype.createCombinedSkin = function(t) {
            for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
            if (0 !== e.length) {
                for (var s = new spine.Skin(t), n = 0; n < e.length; n++) {
                    var a = e[n],
                        o = this.skeleton.data.findSkin(a);
                    if (!o) return;
                    for (var r in o.attachments) {
                        var h = r.split(":"),
                            l = h[0],
                            c = h[1],
                            u = o.attachments[r];
                        if (void 0 === l || void 0 === c) return;
                        void 0 === s.getAttachment(l, c) && s.addAttachment(l, c, u)
                    }
                }
                return this.skeleton.data.skins.push(s), s
            }
        }, i
    }(Phaser.Group);
    e.globalAutoUpdate = !0, t.Spine = e
}(PhaserSpine || (PhaserSpine = {}));
var PhaserSpine;
! function(t) {
    var e = function() {
        return function(t) {
            this.load = function(t, e, i) {
                var s = this.game.make.image(0, 0, e);
                t.rendererObject = s.texture.baseTexture
            }, this.unload = function(t) {
                t.destroy()
            }, this.game = t
        }
    }();
    t.SpineTextureLoader = e
}(PhaserSpine || (PhaserSpine = {}));
var PhaserSuperStorage;
! function(t) {
    ! function(t) {
        var e = function() {
            function t(t) {
                void 0 === t && (t = ""), this.namespace = "", this.forcePromises = !1, this.setNamespace(t)
            }
            return Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return null !== this.getNameSpaceMatches() ? this.getNameSpaceMatches().length : 0
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.key = function(t) {
                var e = this.getNameSpaceMatches()[t],
                    i = this.getCookiesForNameSpace()[e] || null;
                return this.forcePromises ? this.promisefy(i) : i
            }, t.prototype.getItem = function(t) {
                var e = this.getCookiesForNameSpace()[t] || null;
                return this.forcePromises ? this.promisefy(e) : e
            }, t.prototype.setItem = function(t, e) {
                if (document.cookie = encodeURIComponent(this.namespace + t) + "=" + encodeURIComponent(e) + "; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/", this.forcePromises) return this.promisefy(null)
            }, t.prototype.removeItem = function(t) {
                if (document.cookie = encodeURIComponent(this.namespace + t) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/", this.forcePromises) return this.promisefy(null)
            }, t.prototype.clear = function() {
                var t = this.getCookiesForNameSpace();
                for (var e in t) t.hasOwnProperty(e) && this.removeItem(e);
                if (this.forcePromises) return this.promisefy(null)
            }, t.prototype.setNamespace = function(t) {
                if (t && (this.namespace = t + ":", this.reg = new RegExp("^" + this.namespace + "[a-zA-Z0-9]*", "g")), this.forcePromises) return this.promisefy(t)
            }, t.prototype.getNameSpaceMatches = function() {
                var t = this;
                return decodeURIComponent(document.cookie).split("; ").filter(function(e) {
                    return null !== e.match(t.reg) && e.match(t.reg).length > 0
                })
            }, t.prototype.getCookiesForNameSpace = function() {
                var t = this,
                    e = {};
                return this.getNameSpaceMatches().forEach(function(i) {
                    var s = i.replace(t.namespace, "").split("=");
                    e[s[0]] = s[1]
                }), e
            }, t.prototype.promisefy = function(t) {
                return new Promise(function(e, i) {
                    e(t)
                })
            }, t
        }();
        t.CookieStorage = e
    }(t.StorageAdapters || (t.StorageAdapters = {}))
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {
    ! function(t) {
        var e = function() {
            function t() {
                this.namespace = "", this.keys = []
            }
            return Object.defineProperty(t.prototype, "forcePromises", {
                get: function() {
                    return !0
                },
                set: function(t) {},
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return this.keys.length
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.key = function(t) {
                return this.promisefy(this.keys[t])
            }, t.prototype.getItem = function(t) {
                var e = this;
                return new Promise(function(i, s) {
                    NativeStorage.getItem(e.namespace + t, function(t) {
                        i(t)
                    }, function(t) {
                        2 === t.code ? i(null) : s(t)
                    })
                })
            }, t.prototype.setItem = function(t, e) {
                var i = this;
                if (!(t.length < 1)) return new Promise(function(s, n) {
                    NativeStorage.setItem(i.namespace + t, e, function() {
                        i.keys.indexOf(t) < 0 && (i.keys.push(t), i.save()), s(null)
                    }, function(t) {
                        n(t)
                    })
                })
            }, t.prototype.removeItem = function(t) {
                var e = this;
                return new Promise(function(i, s) {
                    NativeStorage.remove(e.namespace + t, function() {
                        var s = e.keys.indexOf(t);
                        s >= 0 && (e.keys.splice(s, 1), e.save()), i(null)
                    }, function(t) {
                        s(t)
                    })
                })
            }, t.prototype.clear = function() {
                var t = this;
                return new Promise(function(e, i) {
                    for (var s = 0, n = 0; n < t.keys.length; n++) NativeStorage.remove(t.namespace + t.keys[n], function() {
                        ++s >= t.keys.length && (t.keys = [], t.save(), e(null))
                    }, function(t) {
                        i(t)
                    })
                })
            }, t.prototype.setNamespace = function(t) {
                var e = this;
                return void 0 === t && (t = ""), this.namespace = t + ":", this.keys = [], new Promise(function(t, i) {
                    e.load().then(t).catch(t)
                })
            }, t.prototype.promisefy = function(t) {
                return new Promise(function(e, i) {
                    e(t)
                })
            }, t.prototype.load = function() {
                var t = this;
                return new Promise(function(e, i) {
                    NativeStorage.getItem(t.namespace, function(i) {
                        t.keys = JSON.parse(i), e(null)
                    }, function(t) {
                        i(t)
                    })
                })
            }, t.prototype.save = function() {
                NativeStorage.setItem(this.namespace, JSON.stringify(this.keys), function() {}, function(t) {})
            }, t
        }();
        t.CordovaStorage = e
    }(t.StorageAdapters || (t.StorageAdapters = {}))
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {
    ! function(e) {
        var i = function() {
            function e(t, e) {
                void 0 === t && (t = ""), void 0 === e && (e = "*"), this.namespace = "", this.expectedOrigin = "", this.storageLength = 0, this.enabled = !1, "" !== t && this.setNamespace(t), this.expectedOrigin = e
            }
            return Object.defineProperty(e.prototype, "forcePromises", {
                get: function() {
                    return !0
                },
                set: function(t) {},
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "length", {
                get: function() {
                    return this.storageLength
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.init = function() {
                var e = this;
                return this.sendMessage({
                    command: t.StorageCommand.init
                }).then(function() {
                    e.enabled = !0
                })
            }, e.prototype.key = function(e) {
                return this.sendMessage({
                    command: t.StorageCommand.key,
                    value: e
                })
            }, e.prototype.getItem = function(e) {
                return this.sendMessage({
                    command: t.StorageCommand.getItem,
                    key: e
                })
            }, e.prototype.setItem = function(e, i) {
                return this.sendMessage({
                    command: t.StorageCommand.setItem,
                    key: e,
                    value: i
                })
            }, e.prototype.removeItem = function(e) {
                return this.sendMessage({
                    command: t.StorageCommand.removeItem,
                    key: e
                })
            }, e.prototype.clear = function() {
                return this.sendMessage({
                    command: t.StorageCommand.clear
                })
            }, e.prototype.setNamespace = function(e) {
                return this.sendMessage({
                    command: t.StorageCommand.setNamespace,
                    value: e
                })
            }, e.prototype.sendMessage = function(e) {
                var i, s = this;
                e.command === t.StorageCommand.init && (i = !1);
                var n = new MessageChannel;
                return new Promise(function(a, o) {
                    s.enabled || e.command === t.StorageCommand.init || o("Messaging not enabled!"), e.command === t.StorageCommand.init && setTimeout(function() {
                        i || o("Unable to get a response in time")
                    }, 1e3), n.port1.onmessage = function(e) {
                        var n = t.StorageUtils.validateMessage(e.data);
                        switch (n.command === t.StorageCommand.init && (i = !0), void 0 !== n.status && "ok" === n.status || o(n.value), void 0 !== n.length && (s.storageLength = n.length), n.command) {
                            case t.StorageCommand.setNamespace:
                                s.namespace = n.value + ":";
                            case t.StorageCommand.getItem:
                            case t.StorageCommand.length:
                            case t.StorageCommand.key:
                                a(n.value);
                                break;
                            case t.StorageCommand.setItem:
                            case t.StorageCommand.removeItem:
                            case t.StorageCommand.clear:
                            case t.StorageCommand.init:
                                a(n.status);
                                break;
                            default:
                                o(n.value)
                        }
                    }, (s.enabled || e.command === t.StorageCommand.init) && window.parent.postMessage(e, s.expectedOrigin, [n.port2])
                })
            }, e
        }();
        e.IframeStorage = i
    }(t.StorageAdapters || (t.StorageAdapters = {}))
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {
    ! function(e) {
        var i = function() {
            function e(t) {
                void 0 === t && (t = ""), this.namespace = "", this.forcePromises = !1, this.setNamespace(t)
            }
            return Object.defineProperty(e.prototype, "length", {
                get: function() {
                    var e = Object.keys(localStorage);
                    return t.StorageUtils.nameSpaceKeyFilter(e, this.namespace).length
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.key = function(t) {
                return this.forcePromises ? this.promisefy(this._key, arguments) : this._key(t)
            }, e.prototype._key = function(e) {
                var i = Object.keys(localStorage),
                    s = t.StorageUtils.nameSpaceKeyFilter(i, this.namespace);
                return localStorage.getItem(s[e])
            }, e.prototype.getItem = function(t) {
                return this.forcePromises ? this.promisefy(this._getItem, arguments) : this._getItem(t)
            }, e.prototype._getItem = function(t) {
                return localStorage.getItem(this.namespace + t)
            }, e.prototype.setItem = function(t, e) {
                return this.forcePromises ? this.promisefy(this._setItem, arguments) : this._setItem(t, e)
            }, e.prototype._setItem = function(t, e) {
                return localStorage.setItem(this.namespace + t, e)
            }, e.prototype.removeItem = function(t) {
                return this.forcePromises ? this.promisefy(this._removeItem, arguments) : this._removeItem(t)
            }, e.prototype._removeItem = function(t) {
                return localStorage.removeItem(this.namespace + t)
            }, e.prototype.clear = function() {
                return this.forcePromises ? this.promisefy(this._clear, arguments) : this._clear()
            }, e.prototype._clear = function() {
                for (var e = Object.keys(localStorage), i = t.StorageUtils.nameSpaceKeyFilter(e, this.namespace), s = 0; s < i.length; s++) localStorage.removeItem(i[s])
            }, e.prototype.setNamespace = function(t) {
                return this.forcePromises ? this.promisefy(this._setNameSpace, arguments) : this._setNameSpace(t)
            }, e.prototype._setNameSpace = function(t) {
                t && (this.namespace = t + ":")
            }, e.prototype.promisefy = function(t, e) {
                var i = this;
                return new Promise(function(s, n) {
                    s(t.apply(i, e))
                })
            }, e
        }();
        e.LocalStorage = i
    }(t.StorageAdapters || (t.StorageAdapters = {}))
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {
    var e = function() {
        function e(i) {
            if (void 0 !== i) Object.defineProperty(i, "storage", {
                value: this
            });
            else {
                if (null !== e.instance) return e.instance;
                e.instance = this
            }
            t.StorageUtils.isLocalStorageSupport() ? this.setAdapter(new t.StorageAdapters.LocalStorage) : this.setAdapter(new t.StorageAdapters.CookieStorage)
        }
        return e.prototype.setAdapter = function(t) {
            this.storage = t
        }, Object.defineProperty(e.prototype, "forcePromises", {
            get: function() {
                return this.storage.forcePromises
            },
            set: function(t) {
                this.storage.forcePromises = t
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "length", {
            get: function() {
                return null === this.storage ? 0 : this.storage.length
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.setNamespace = function(t) {
            if (null !== this.storage) return this.storage.setNamespace(t)
        }, e.prototype.key = function(t) {
            return null === this.storage ? "" : this.storage.key(t)
        }, e.prototype.getItem = function(t) {
            return null === this.storage ? null : this.storage.getItem(t)
        }, e.prototype.setItem = function(t, e) {
            if (null !== this.storage) return this.storage.setItem(t, e)
        }, e.prototype.removeItem = function(t) {
            if (null !== this.storage) return this.storage.removeItem(t)
        }, e.prototype.clear = function() {
            if (null !== this.storage) return this.storage.clear()
        }, e.instance = null, e
    }();
    t.StoragePlugin = e
}(PhaserSuperStorage || (PhaserSuperStorage = {})), void 0 !== window.Phaser && Phaser.Utils.mixinPrototype(PhaserSuperStorage.StoragePlugin, Phaser.Plugin);
var PhaserSuperStorage;
! function(t) {
    ! function(t) {
        t[t.init = 0] = "init", t[t.setItem = 1] = "setItem", t[t.getItem = 2] = "getItem", t[t.removeItem = 3] = "removeItem", t[t.clear = 4] = "clear", t[t.setNamespace = 5] = "setNamespace", t[t.length = 6] = "length", t[t.key = 7] = "key", t[t.error = 8] = "error"
    }(t.StorageCommand || (t.StorageCommand = {}));
    t.StorageCommand;
    var e = function() {
        function t() {}
        return t.isLocalStorageSupport = function() {
            try {
                if ("object" == typeof localStorage) return localStorage.setItem("testingLocalStorage", "foo"), localStorage.removeItem("testingLocalStorage"), !0
            } catch (t) {
                return !1
            }
            return !1
        }, t.validateMessage = function(t) {
            return t.hasOwnProperty("command") ? t : null
        }, t.nameSpaceKeyFilter = function(t, e) {
            return t.filter(function(t) {
                return t.substring(0, e.length) === e
            })
        }, t
    }();
    t.StorageUtils = e
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {
    ! function(t) {
        t[t.init = 0] = "init", t[t.setItem = 1] = "setItem", t[t.getItem = 2] = "getItem", t[t.removeItem = 3] = "removeItem", t[t.clear = 4] = "clear", t[t.setNamespace = 5] = "setNamespace", t[t.length = 6] = "length", t[t.key = 7] = "key", t[t.error = 8] = "error"
    }(t.StorageCommand || (t.StorageCommand = {}));
    t.StorageCommand;
    var e = function() {
        function t() {}
        return t.isLocalStorageSupport = function() {
            try {
                if ("object" == typeof localStorage) return localStorage.setItem("testingLocalStorage", "foo"), localStorage.removeItem("testingLocalStorage"), !0
            } catch (t) {
                return !1
            }
            return !1
        }, t.validateMessage = function(t) {
            return t.hasOwnProperty("command") ? t : null
        }, t.nameSpaceKeyFilter = function(t, e) {
            return t.filter(function(t) {
                return t.substring(0, e.length) === e
            })
        }, t
    }();
    t.StorageUtils = e
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserSuperStorage;
! function(t) {
    ! function(e) {
        var i = function() {
            function e(t) {
                void 0 === t && (t = ""), this.namespace = "", this.forcePromises = !1, this.setNamespace(t)
            }
            return Object.defineProperty(e.prototype, "length", {
                get: function() {
                    var e = Object.keys(localStorage);
                    return t.StorageUtils.nameSpaceKeyFilter(e, this.namespace).length
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.key = function(t) {
                return this.forcePromises ? this.promisefy(this._key, arguments) : this._key(t)
            }, e.prototype._key = function(e) {
                var i = Object.keys(localStorage),
                    s = t.StorageUtils.nameSpaceKeyFilter(i, this.namespace);
                return localStorage.getItem(s[e])
            }, e.prototype.getItem = function(t) {
                return this.forcePromises ? this.promisefy(this._getItem, arguments) : this._getItem(t)
            }, e.prototype._getItem = function(t) {
                return localStorage.getItem(this.namespace + t)
            }, e.prototype.setItem = function(t, e) {
                return this.forcePromises ? this.promisefy(this._setItem, arguments) : this._setItem(t, e)
            }, e.prototype._setItem = function(t, e) {
                return localStorage.setItem(this.namespace + t, e)
            }, e.prototype.removeItem = function(t) {
                return this.forcePromises ? this.promisefy(this._removeItem, arguments) : this._removeItem(t)
            }, e.prototype._removeItem = function(t) {
                return localStorage.removeItem(this.namespace + t)
            }, e.prototype.clear = function() {
                return this.forcePromises ? this.promisefy(this._clear, arguments) : this._clear()
            }, e.prototype._clear = function() {
                for (var e = Object.keys(localStorage), i = t.StorageUtils.nameSpaceKeyFilter(e, this.namespace), s = 0; s < i.length; s++) localStorage.removeItem(i[s])
            }, e.prototype.setNamespace = function(t) {
                return this.forcePromises ? this.promisefy(this._setNameSpace, arguments) : this._setNameSpace(t)
            }, e.prototype._setNameSpace = function(t) {
                t && (this.namespace = t + ":")
            }, e.prototype.promisefy = function(t, e) {
                var i = this;
                return new Promise(function(s, n) {
                    s(t.apply(i, e))
                })
            }, e
        }();
        e.LocalStorage = i
    }(t.StorageAdapters || (t.StorageAdapters = {}))
}(PhaserSuperStorage || (PhaserSuperStorage = {}));
var StorageCommand = PhaserSuperStorage.StorageCommand,
    StorageUtils = PhaserSuperStorage.StorageUtils,
    LocalStorage = PhaserSuperStorage.StorageAdapters.LocalStorage;
! function() {
    var t = window.gameOrigin || "*",
        e = StorageUtils.isLocalStorageSupport(),
        i = e ? new LocalStorage : null;
    window.addEventListener("message", function(s) {
        if ("*" === t || s.origin === t) {
            var n = StorageUtils.validateMessage(s.data),
                a = s.ports[0];
            if (void 0 !== a && a) {
                var o = function(t, e) {
                    a.postMessage({
                        status: "error",
                        command: t,
                        value: e
                    })
                };
                if (null !== n) switch (e || o(n.command, "localStorage not supported"), n.command) {
                    case StorageCommand.init:
                        a.postMessage({
                            status: "ok",
                            command: n.command,
                            length: i.length
                        });
                        break;
                    case StorageCommand.getItem:
                        try {
                            var r = i.getItem(n.key);
                            a.postMessage({
                                status: "ok",
                                command: n.command,
                                value: r,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    case StorageCommand.setItem:
                        try {
                            i.setItem(n.key, n.value), a.postMessage({
                                status: "ok",
                                command: n.command,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    case StorageCommand.removeItem:
                        try {
                            i.removeItem(n.key), a.postMessage({
                                status: "ok",
                                command: n.command,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    case StorageCommand.setNamespace:
                        try {
                            i.setNamespace(n.value), a.postMessage({
                                status: "ok",
                                command: n.command,
                                value: n.value,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    case StorageCommand.clear:
                        try {
                            i.clear(), a.postMessage({
                                status: "ok",
                                command: n.command,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    case StorageCommand.length:
                        try {
                            a.postMessage({
                                status: "ok",
                                command: n.command,
                                value: i.length,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    case StorageCommand.key:
                        try {
                            var h = i.key(n.value);
                            a.postMessage({
                                status: "ok",
                                command: n.command,
                                value: h,
                                length: i.length
                            })
                        } catch (t) {
                            o(n.command, t.message)
                        }
                        break;
                    default:
                        o(n.command, "Command not found")
                } else o(StorageCommand.error, "Empty message!")
            }
        }
    })
}();
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.add(s.back), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(4351922).drawRect(0, 0, e, i)
            }, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.back = null
            }, e
        }(Phaser.Group);
        t.Admeen = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.add(s.back), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                this.back.clear().beginFill(14548992).drawRect(0, 0, this.game.width, this.game.height)
            }, e.prototype.update = function() {}, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.back = null
            }, e
        }(Phaser.Group);
        t.Bild = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.triangles = [], s.triangleSizes = [350, 650, 950, 1250], s.back = s.game.make.graphics(0, 0), s.t = s.game.make.graphics(0, 0), s.gradientBitmap = s.game.make.bitmapData(1, 1), s.gradient = s.game.make.sprite(0, 0, s.gradientBitmap), s.add(s.back), s.add(s.t), s.add(s.gradient), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this,
                    i = this.game.width < 1 ? 1 : this.game.width,
                    s = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(3387647).drawRect(0, 0, i, s), this.updateTrinagles(t), this.t.x = i / 2, this.t.y = s / 2, this.t.clear(), this.t.lineStyle(80 * t, 16777215, .3), this.triangles.forEach(function(t) {
                    e.t.drawPolygon(t)
                }), this.t.angle = 30, this.gradientBitmap.resize(i, s);
                var n = this.gradientBitmap.context.createLinearGradient(0, 0, 0, s - 200);
                n.addColorStop(0, "rgba(51, 176, 255, 0)"), n.addColorStop(1, "rgba(51, 176, 255, 1)"), this.gradientBitmap.context.fillStyle = n, this.gradientBitmap.context.clearRect(0, 0, i, s), this.gradientBitmap.context.fillRect(0, 0, i, s)
            }, e.prototype.updateTrinagles = function(t) {
                var e = this;
                new Phaser.Point(this.game.width / 2, this.game.height / 2);
                this.triangles = [], this.triangleSizes.forEach(function(i, s) {
                    i *= t, e.triangles.push(new Phaser.Polygon([new Phaser.Point(i * Math.cos(0), i * Math.sin(0)), new Phaser.Point(i * Math.cos(1 / 3 * (2 * Math.PI)), i * Math.sin(1 / 3 * (2 * Math.PI))), new Phaser.Point(i * Math.cos(2 / 3 * (2 * Math.PI)), i * Math.sin(2 / 3 * (2 * Math.PI))), new Phaser.Point(i * Math.cos(0), i * Math.sin(0))]))
                })
            }, e.prototype.update = function() {
                this.t.angle += .3
            }, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.gradientBitmap.destroy(), this.gradient.destroy(!0), this.t.destroy(!0), this.back = null, this.gradientBitmap = null, this.gradient = null, this.t = null, this.triangles = null, this.triangleSizes = null
            }, e
        }(Phaser.Group);
        t.FunnyGames = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.gradientBitmap = s.game.make.bitmapData(1, 1), s.gradient = s.game.make.sprite(0, 0, s.gradientBitmap), s.add(s.gradient), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.gradientBitmap.resize(e, i), this.gradientBitmap.context.clearRect(0, 0, e, i);
                var s = this.gradientBitmap.context.createRadialGradient(e / 2, i / 2, 0, e / 2, i / 2, i / 2);
                s.addColorStop(0, "rgb(0, 38, 84)"), s.addColorStop(1, "rgb(96, 3, 190)"), this.gradientBitmap.context.fillStyle = s, this.gradientBitmap.context.fillRect(0, 0, e, i)
            }, e.prototype.update = function() {}, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.gradientBitmap.destroy(), this.gradient.destroy(!0), this.gradientBitmap = null, this.gradient = null
            }, e
        }(Phaser.Group);
        t.GameCell = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.gradientBitmap = s.game.make.bitmapData(1, 1), s.gradient = s.game.make.sprite(0, 0, s.gradientBitmap), s.add(s.back), s.add(s.gradient), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(663352).drawRect(0, 0, e, i), this.gradientBitmap.resize(e, i), this.gradientBitmap.context.clearRect(0, 0, e, i);
                var s = this.gradientBitmap.context.createRadialGradient(e / 2, i / 2, 0, e / 2, i / 2, i / 2);
                s.addColorStop(0, "rgb(17, 60, 117)"), s.addColorStop(1, "rgb(10, 31, 56)"), this.gradientBitmap.context.fillStyle = s, this.gradientBitmap.context.fillRect(0, 0, e, i)
            }, e.prototype.update = function() {}, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.gradientBitmap.destroy(), this.gradient.destroy(!0), this.back = null, this.gradientBitmap = null, this.gradient = null
            }, e
        }(Phaser.Group);
        t.Kizi = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.add(s.back), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(16770924).drawRect(0, 0, e, i)
            }, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.back = null
            }, e
        }(Phaser.Group);
        t.PlayCell = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.add(s.back), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(4879021).drawRect(0, 0, e, i)
            }, e.prototype.update = function() {}, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.back = null
            }, e
        }(Phaser.Group);
        t.Spele = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.add(s.back), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(804972).drawRect(0, 0, e, i)
            }, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.back = null
            }, e
        }(Phaser.Group);
        t.Spil = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, null, "splash-background") || this;
                return s.back = s.game.make.graphics(0, 0), s.gradientBitmap = s.game.make.bitmapData(1, 1), s.gradient = s.game.make.sprite(0, 0, s.gradientBitmap), s.add(s.back), s.add(s.gradient), s.resize(i), s
            }
            return __extends(e, t), e.prototype.resize = function(t) {
                var e = this.game.width < 1 ? 1 : this.game.width,
                    i = this.game.height < 1 ? 1 : this.game.height;
                this.back.clear().beginFill(357287).drawRect(0, 0, e, i), this.gradientBitmap.resize(e, i), this.gradientBitmap.context.clearRect(0, 0, e, i);
                var s = this.gradientBitmap.context.createRadialGradient(e / 2, i / 2, 0, e / 2, i / 2, i / 2);
                s.addColorStop(0, "rgba(0, 81, 125, 0)"), s.addColorStop(1, "rgba(0, 81, 125, 1)"), this.gradientBitmap.context.fillStyle = s, this.gradientBitmap.context.fillRect(0, 0, e, i);
                var n = this.gradientBitmap.context.createRadialGradient(e / 2, i / 2, 0, e / 2, i / 2, i / 2);
                n.addColorStop(0, "rgba(4, 176, 240, 1)"), n.addColorStop(1, "rgba(4, 176, 240, 0)"), this.gradientBitmap.context.fillStyle = n, this.gradientBitmap.context.fillRect(0, 0, e, i)
            }, e.prototype.update = function() {}, e.prototype.destroy = function(e) {
                t.prototype.destroy.call(this, e), this.back.destroy(!0), this.gradientBitmap.destroy(), this.gradient.destroy(!0), this.back = null, this.gradientBitmap = null, this.gradient = null
            }, e
        }(Phaser.Group);
        t.Yepi = e
    }(t.SplashScreenBackgrounds || (t.SplashScreenBackgrounds = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    var e;
    ! function(t) {
        t[t.splashscreen = 0] = "splashscreen", t[t.logo = 1] = "logo", t[t.facebook = 2] = "facebook", t[t.twitter = 3] = "twitter", t[t.playstore = 4] = "playstore", t[t.appstore = 5] = "appstore", t[t.more_games = 6] = "more_games", t[t.download_game = 7] = "download_game", t[t.walkthrough = 8] = "walkthrough", t[t.disclaimer = 9] = "disclaimer", t[t.highscores = 10] = "highscores"
    }(e = t.UtmTargets || (t.UtmTargets = {}));
    var i = function() {
        function i() {}
        return i.setSiteLock = function(t) {
            i.siteLocks = t
        }, i.preloadImages = function(e) {
            var s;
            switch (t.Utils.isOnDevice(e) || i.isAirfi() ? t.Utils.ASSET_LOCATION = "assets/" : t.Utils.isTc() ? t.Utils.ASSET_LOCATION = "/repository/download/Fabrique_FunnyGamesSplash/.lastSuccessful/build/assets/" : "fbrq.io" === t.Utils.getSourceSite(!0) && (t.Utils.ASSET_LOCATION = "https://" + window.location.host + "/orange-games-splash/assets/"), t.Utils.getBrandingDomain()) {
                case t.BrandingDomain.Spele:
                    s = "spele";
                    break;
                case t.BrandingDomain.PlayCell:
                    s = "playcell";
                    break;
                case t.BrandingDomain.GameCell:
                    s = "gamecell";
                    break;
                case t.BrandingDomain.Yepi:
                    s = "yepi";
                    break;
                case t.BrandingDomain.Spil:
                    s = "spil";
                    break;
                case t.BrandingDomain.Admeen:
                    s = "admeen";
                    break;
                case t.BrandingDomain.Bild:
                    s = "bild";
                    break;
                default:
                case t.BrandingDomain.Kizi:
                    s = "kizi";
                    break;
                case t.BrandingDomain.Funnygames:
                    s = "funnygames"
            }
            t.Utils.isTc() || (e.load.crossOrigin = "anonymous"), e.load.image(i.LOGO_KEY, t.Utils.ASSET_LOCATION + "images/branding_logo_" + s + "_small.png")
        }, i.openCampaignLink = function(s, n, a) {
            if (t.Utils.isOnDevice(s) || i.isContracted(s) || i.isSpecial(s)) return null;
            var o, r, h = t.Utils.getSourceSite(),
                l = t.Utils.isOnDevice(s) ? "https://" : "//";
            switch (t.Utils.getBrandingDomain()) {
                case t.BrandingDomain.Spele:
                    o = l + "www.spele.nl";
                    break;
                case t.BrandingDomain.Yepi:
                    o = l + "www.yepi.com";
                    break;
                case t.BrandingDomain.Admeen:
                  
                case t.BrandingDomain.PlayCell:
                    o = l + "www.playcell.com";
                    break;
                case t.BrandingDomain.GameCell:
                    o = l + "www.gamecell.com";
                    break;
                default:
                case t.BrandingDomain.Kizi:
                    o = "http://www.kizi.com";
                    break;
                case t.BrandingDomain.Bild:
                   
                case t.BrandingDomain.Funnygames:
                    o = l + "www.funnygames.nu"
            }
            var c = "string" == typeof a ? a : e[a];
           
        }, i.getLogoWithLink = function(e, s) {
            var n = new Phaser.Image(e, 0, 0, i.LOGO_KEY);
            return t.Utils.isOnDevice(e) || i.isContracted(e) || i.isSpecial(e) || i.isAirfi() || (n.inputEnabled = !0, n.input.useHandCursor = !0, n.events.onInputUp.add(function() {
                t.Branding.openCampaignLink(e, s, t.UtmTargets.logo)
            }, this)), n
        }, i.isInternal = function(t) {
            return i.hostMatchesList(t.cache.getJSON(i.INTERNAL_PORTALS_KEY))
        }, i.isContracted = function(t) {
            return i.hostMatchesList(t.cache.getJSON(i.CONTRACTED_PORTALS_KEY))
        }, i.isSpecial = function(t) {
            return i.hostMatchesList(t.cache.getJSON(i.SPECIAL_PORTALS_KEY))
        }, i.isAdmeen = function() {
            if (!i.siteLocks || !i.siteLocks.hasOwnProperty("admeen")) return !1;
            var t = i.siteLocks.admeen;
            return i.hostMatchesList(t)
        }, i.isKongregate = function() {
            if (!i.siteLocks || !i.siteLocks.hasOwnProperty("kongregate")) return !1;
            var t = i.siteLocks.kongregate;
            return i.hostMatchesList(t)
        }, i.isNewgrounds = function() {
            if (!i.siteLocks || !i.siteLocks.hasOwnProperty("newgrounds")) return !1;
            var t = i.siteLocks.newgrounds;
            return i.hostMatchesList(t)
        }, i.isBild = function() {
            return "bild.fbrq.io" === window.location.host || -1 !== window.location.host.indexOf("contentfleet.com")
        }, i.isBip = function() {
            return -1 !== window.location.search.indexOf("bipgaming") || "bip.fbrq.io" === window.location.host
        }, i.isSpil = function() {
            return -1 !== document.referrer.indexOf("gameplayer.io")
        }, i.isAirfi = function() {
            return !!window.hasOwnProperty("airfi") && window.airfi
        }, i.hostMatchesList = function(e) {
            e = e || [];
            for (var i = t.Utils.getSourceSite(), s = 0; s < e.length; s++)
                if (i === e[s]) return !0;
            return !1
        }, i
    }();
    i.LOGO_KEY = "branding_logo", i.INTERNAL_PORTALS_KEY = "branding_portals", i.CONTRACTED_PORTALS_KEY = "branding_contracted", i.SPECIAL_PORTALS_KEY = "branding_special", i.SITELOCK_PORTALS = "sitelock_portals", i.GAME_ICONS_KEY = "more_games", t.Branding = i
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    var e = function() {
        function e() {}
        return e.loadPortalScript = function(e) {
            e && e.hasOwnProperty("minijuegos") && -1 !== e.minijuegos.indexOf(t.Utils.getSourceSite()) && (void 0 !== window.mpConfig ? window.mpConfig.partner = "orange-games" : window.mpConfig = {
                partner: "orange-games"
            }, addScript("./main.js", Date.now() / 1e3)), e && e.hasOwnProperty("kongregate") && -1 !== e.kongregate.indexOf(t.Utils.getSourceSite()) && addScript("https://cdn1.kongregate.com/javascripts/kongregate_api.js", Date.now() / 1e3, function() {
                "undefined" != typeof kongregateAPI && kongregateAPI.loadAPI(function() {
                    window.kongregate = kongregateAPI.getAPI()
                })
            }), e && e.hasOwnProperty("newgrounds") && -1 !== e.newgrounds.indexOf(t.Utils.getSourceSite()) && addScript("./scripts/newgroundsio.min.js", Date.now() / 1e3)
        }, e
    }();
    t.PortalScripts = e
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    var e = function() {
        function t() {}
        return t.initialize = function(e, i, s, n) {
            var a = "string" == typeof e.parent ? document.getElementById(e.parent) : e.parent;
            (t.container = a.parentNode.appendChild(document.createElement("div"))).id = "phaser-vooxe-container", t.container.style.position = "absolute", t.container.style.zIndex = "9999", t.container.style.display = "none", t.container.style.top = "0", t.container.style.left = "0", t.container.style.width = "100%", t.container.style.height = "100%", t.container.style.overflow = "hidden";
            var o = t.container.appendChild(document.createElement("div"));
            o.style.width = "50px", o.style.height = "50px", o.style.position = "absolute", o.style.right = "300px", o.style.zIndex = "99", o.style.backgroundColor = "#000000";
            var r = o.appendChild(document.createElement("div"));
            r.innerHTML = "&#x274c;", r.style.color = "#ffffff", r.style.cssFloat = "right", r.style.fontSize = "40px", r.style.marginRight = "5px", r.style.cursor = "pointer", r.addEventListener("click", function() {
                return t.hide()
            });
            var h = {
                container: "phaser-vooxe-container",
                gameId: i,
                publisherId: "dc63a91fa184423482808bed4d782320",
                width: "100%",
                height: "100%",
                title: s,
                category: n,
                langCode: "en-us",
                autoplay: "no",
                onFound: function(t) {},
                onError: function(t) {},
                onReady: function(e) {
                    t.playerInstance = e;
                    var i = t.container.getElementsByTagName("iframe")[0];
                    i.width = window.innerWidth.toString(), i.height = window.innerHeight.toString()
                }
            };
            ! function(t, e, i, s, n, a, o) {
                t.VooxeVideo = n, t[n] = t[n] || function() {
                    (t[n].q = t[n].q || []).push(arguments)
                }, t[n].l = Date.now(), a = e.createElement(i), o = e.getElementsByTagName(i)[0], a.async = 1, a.src = "//video-static.vooxe.com/libs/gd/gd.js", o.parentNode.insertBefore(a, o)
            }(window, document, "script", 0, "gdPlayer", void 0, void 0), gdPlayer(h)
        }, t.play = function(e) {
            return null !== t.playerInstance && (t.playerInstance.play(e), !0)
        }, t.pause = function() {
            return null !== t.playerInstance && (t.playerInstance.pause(), !0)
        }, t.show = function() {
            return null !== t.playerInstance && (t.container.style.display = "block", !0)
        }, t.hide = function() {
            return null !== t.playerInstance && (t.pause(), t.container.style.display = "none", t.onClose.dispatch(), !0)
        }, t.setVolume = function(e) {
            null !== t.playerInstance && (e > 1 || e < 0 || t.playerInstance.setVolume(e))
        }, t.getCuePoints = function() {
            if (null !== t.playerInstance) return t.playerInstance.cuePoints()
        }, t
    }();
    e.playerInstance = null, e.onClose = new Phaser.Signal, t.Tubia = e
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        t[t.Neutral = 0] = "Neutral", t[t.Yepi = 1] = "Yepi", t[t.Spele = 2] = "Spele", t[t.Funnygames = 3] = "Funnygames", t[t.Kizi = 4] = "Kizi", t[t.PlayCell = 5] = "PlayCell", t[t.GameCell = 6] = "GameCell", t[t.Bild = 7] = "Bild", t[t.Spil = 8] = "Spil", t[t.Admeen = 9] = "Admeen"
    }(t.BrandingDomain || (t.BrandingDomain = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i, s, n, a, o, r) {
                var h = t.call(this, e, s, n, "", null, null) || this;
                h.onInputUp.add(h.openGame, h), h.id = i.data.key, h.url = i.data.url, h.icon = h.game.add.image(0, 0, i.data.key), h.icon.width = a, h.icon.height = a, h.input.priorityID = 680, h.addChild(h.icon);
                var l = h.game.make.graphics(0, 0);
                l.beginFill(r).drawRect(0, 0, a, o - a).endFill(), h.titleBg = h.game.add.image(0, a, l.generateTexture()), h.addChild(h.titleBg);
                var c = i.data.title;
                return c.length > 16 && (c = c.replace(c.substring(14, c.length), "...")), h.title = h.game.add.text(a / 2, h.titleBg.y + (o - a) / 2 + 4, c.toUpperCase(), {
                    font: "bold " + .35 * (o - a) + "px Arial",
                    fill: "#FFF",
                    align: "center",
                    wordWrap: !0,
                    wordWrapWidth: a - 10
                }), h.title.anchor.set(.5, .5), h.addChild(h.title), (l = h.game.make.graphics(0, 0)).beginFill(16777215).drawCircle(0, 0, 80).beginFill(r).lineTo(-15, -25).lineTo(25, 0).lineTo(-15, 25).lineTo(-15, -25).endFill(), h.playImg = h.game.add.image(a / 2, a / 3 * 2.7, l.generateTexture()), h.playImg.anchor.set(.5, .5), h.addChild(h.playImg), h
            }
            return __extends(e, t), e.prototype.openGame = function() {
              
            }, e.prototype.destroy = function() {
                this.onInputUp.remove(this.openGame, this), t.prototype.destroy.call(this), this.removedFromWorld()
            }, e
        }(Phaser.Button);
        t.Item = e
    }(t.MoreGames || (t.MoreGames = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s(e, s) {
                var n = i.call(this, e, null, "moreGames-background") || this;
                n.size = 800, n.items = [], n.offset = 14, n.isDestroyed = !1, n.gameName = s, n.deviceRatio = e.width / n.size, n.overlay = e.add.graphics(0, 0), n.overlay.beginFill(0, .4).drawRect(0, 0, e.width, e.height).endFill(), n.overlay.pivot.set(e.width / 2, e.height / 2), n.overlay.inputEnabled = !0, n.overlay.input.priorityID = 660, n.onClose = new Phaser.Signal, n.overlay.events.onInputUp.add(function() {
                    n.hide()
                }), n.add(n.overlay), n.menuGrp = new Phaser.Group(e, n, "menuGrp"), n.add(n.menuGrp);
                var a = e.make.graphics(0, 0);
                a.beginFill(2507370).drawRoundedRect(0, 0, n.size, n.size + 20, 15).endFill(), n.background = n.game.add.image(0, 0, a.generateTexture()), n.background.anchor.set(.5), n.background.inputEnabled = !0, n.background.input.priorityID = 670, n.background.input.useHandCursor = !1, n.menuGrp.add(n.background), n.logoBtn = n.game.add.button(0, -n.background.height / 2 + n.offset, t.Branding.LOGO_KEY, function() {
                    t.Branding.openCampaignLink(n.game, n.gameName, t.UtmTargets.more_games)
                }, n), n.logoBtn.scale.setTo(1), n.logoBtn.anchor.set(.5, 0), n.menuGrp.add(n.logoBtn), n.closeBtn = e.add.button(n.size / 2 - 10, -n.size / 2 + 25, "close_btn", n.hide, n), n.closeBtn.anchor.set(1), n.closeBtn.input.priorityID = 680, n.menuGrp.add(n.closeBtn), n.createItems();
                var o = e.make.graphics(0, 0);
                o.beginFill(2507370).drawRect(0, 0, 270, 40).endFill(), n.moreGamesBtn = e.add.button(0, n.background.y + n.background.height / 2 - o.height - n.offset, "", function() {
                    t.Branding.openCampaignLink(n.game, n.gameName, t.UtmTargets.more_games)
                }, n), n.moreGamesBtn.texture = o.generateTexture(), n.moreGamesBtn.input.priorityID = 680, n.moreGamesBtn.anchor.set(.5, 0), n.menuGrp.add(n.moreGamesBtn);
                var r = {
                    font: "bold 26px Tahoma",
                    fill: "#ffffff"
                };
                return n.moreGamesText = e.add.text(0, n.moreGamesBtn.height / 2 + 2, "PLAY MORE GAMES", r), n.moreGamesText.anchor.set(.5), n.moreGamesBtn.addChild(n.moreGamesText), n.visible = !1, n.resize(), n.resizeListener = function() {
                    setTimeout(function() {
                        n.isDestroyed || n.resize()
                    }, 100)
                }, n.game.scale.onSizeChange.add(n.resizeListener, n), n
            }
            return __extends(s, i), s.prototype.createItems = function() {
                this.itemGrp = this.game.make.group(this, "items"), this.itemGrp.x = 0, this.itemGrp.y = this.size / 2 + this.logoBtn.y + this.logoBtn.height, this.menuGrp.add(this.itemGrp);
                var i, n, a, o, r = this.game.cache.getJSON(t.Branding.GAME_ICONS_KEY),
                    h = Math.floor(this.size / 3 - 1.25 * this.offset),
                    l = Math.floor(h + .25 * h),
                    c = 0;
                for (var u in r) r.hasOwnProperty(u) && c < 6 && !this.isCurrentGame(u) && (n = c % 3 * h + this.offset + c % 3 * this.offset, a = Math.floor(c / 3) * l + this.offset + Math.floor(c / 3) * this.offset, o = c % s.BG_COLORS.length, i = new e.Item(this.game, r[u], n - this.size / 2, a - this.size / 2, h, l, s.BG_COLORS[o]), this.itemGrp.add(i), this.items.push(i), c++)
            }, s.prototype.isCurrentGame = function(t) {
                var e = window.location.href.replace(/-/g, "");
                return t = t.replace(/-/g, ""), e.indexOf(t) >= 0
            }, s.prototype.show = function() {
                this.visible || (this.game.analytics && (this.game.analytics.google.sendScreenView("moregames"), this.game.analytics.google.sendGenericEvent("MoreGames", "Open")), this.visible = !0)
            }, s.prototype.hide = function() {
                this.visible && (this.visible = !1, this.game.analytics && this.game.analytics.google.sendGenericEvent("MoreGames", "Close"), this.onClose && this.onClose.dispatch())
            }, s.preloadImages = function(e) {
                t.Utils.getSourceSite();
                t.Utils.isOnDevice(e) || t.Branding.isAirfi() ? t.Utils.ASSET_LOCATION = "assets/" : t.Utils.isTc() ? t.Utils.ASSET_LOCATION = "/repository/download/Fabrique_FunnyGamesSplash/.lastSuccessful/build/assets/" : "fbrq.io" === t.Utils.getSourceSite(!0) && (t.Utils.ASSET_LOCATION = "//" + window.location.host + "/orange-games-splash/assets/"), t.Utils.isTc() || (e.load.crossOrigin = "anonymous"), e.load.image("close_btn", t.Utils.ASSET_LOCATION + "images/close_btn.png");
                var i = e.cache.getJSON(t.Branding.GAME_ICONS_KEY);
                for (var s in i) i.hasOwnProperty(s) && (i[s].data.key = s, e.load.image(s, t.Utils.ASSET_LOCATION + "icons/" + s + ".png"))
            }, s.prototype.getScale = function() {
                return this.game.height > this.game.width && this.game.width < this.size ? (this.game.width - 20) / this.size : this.game.width > this.game.height && this.game.height < this.size ? (this.game.height - 40) / this.size : 1
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.overlay.clear().beginFill(0, .4).drawRect(0, 0, this.game.width, this.game.height).endFill(), this.overlay.pivot.set(this.game.width / 2, this.game.height / 2), this.menuGrp.scale.set(this.scaleFactor)
            }, s.prototype.destroy = function() {
                this.game.scale.onSizeChange.remove(this.resizeListener, this), this.isDestroyed || (this.overlay.destroy(!0), this.overlay = null, this.itemGrp.destroy(!0), this.itemGrp = null, this.menuGrp.destroy(!0), this.menuGrp = null, this.background.destroy(), this.background = null, this.closeBtn.destroy(), this.closeBtn = null, this.moreGamesBtn.destroy(), this.moreGamesBtn = null, this.moreGamesText.destroy(), this.moreGamesText = null, this.logoBtn.destroy(), this.logoBtn = null, this.onClose.removeAll(), this.onClose = null, this.items.forEach(function(t) {
                    t.destroy()
                })), this.isDestroyed = !0, this.removeAll(!0), i.prototype.destroy.call(this)
            }, s
        }(Phaser.Group);
        i.BG_COLORS = [2201331, 10233776, 15936542, 15690752, 16361509, 5025616], e.Menu = i
    }(t.MoreGames || (t.MoreGames = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, i) || this;
                return s.ga = GA.getInstance(), e.hasOwnProperty("analytics") ? Object.defineProperty(e.analytics, "game", {
                    value: s
                }) : e.analytics = {
                    game: s
                }, s
            }
            return __extends(e, t), e.prototype.setup = function(t, e, i, s, n) {
                void 0 === n && (n = !0), this.ga.init(t, e, i, s).addEvent(new GA.Events.User), n && this.setupErrorTracking()
            }, e.prototype.createUser = function(t, e, i, s) {
                return new GA.User(t, e, i, s)
            }, e.prototype.addEvent = function(t) {
                this.ga.addEvent(t)
            }, e.prototype.sendEvents = function() {
                this.ga.sendData()
            }, e.prototype.setupErrorTracking = function() {
                var t = this,
                    e = [];
                window.addEventListener("error", function(i) {
                    if (-1 === e.indexOf(i.message)) {
                        e.push(i.message);
                        var s = "Error: " + i.message;
                        i.filename && (s += "\nurl: " + i.filename), i.lineno && (s += "\nline: " + i.lineno), i.colno && (s += "\ncolumn: " + i.colno), i.error && (s += "\nDetails: " + i.error), t.ga.addEvent(new GA.Events.Exception(GA.Events.ErrorSeverity.critical, s)).sendData()
                    }
                }), window.addEventListener("error", function(e) {
                    var i = e.message;
                    e.hasOwnProperty("error") && e.error.hasOwnProperty("stack") && (i = e.error.stack), t.ga.addEvent(new GA.Events.Exception(GA.Events.ErrorSeverity.critical, i)).sendData()
                })
            }, e
        }(Phaser.Plugin);
        t.GameAnalytics = e
    }(t.Plugins || (t.Plugins = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(e) {
            function i(i, s) {
                var n = e.call(this, i, s) || this;
                i.hasOwnProperty("analytics") ? Object.defineProperty(i.analytics, "google", {
                    value: n
                }) : i.analytics = {
                    google: n
                };
                var a = t.Utils.isOnDevice(i) ? "https://" : "//";
                return function(t, e, i, s, n, a, o) {
                    t.GoogleAnalyticsObject = n, t[n] = t[n] ? t[n] : function() {
                        (t[n].q = t[n].q || []).push(arguments)
                    }, t[n].l = Date.now(), a = e.createElement(i), o = e.getElementsByTagName(i)[0], a.async = 1, a.src = s, o.parentNode.insertBefore(a, o)
                }(window, document, "script", a + "./analytics.js", "ga"), n
            }
            return __extends(i, e), i.prototype.setup = function(e, i, s, n) {
                if (void 0 === n && (n = "auto"), ga("create", e, n), t.Utils.isOnDevice(this.game) && ga("set", "checkProtocolTask", null), void 0 !== i && ga("set", "appName", i), void 0 !== i && ga("set", "appVersion", s), ga("send", "pageview"), "auto" !== n) {
                    var a = {
                        name: "fbrq"
                    };
                    for (var o in n) n.hasOwnProperty(o) && (a[o] = n[o]);
                    ga("create", "UA-78960661-1", a)
                } else ga("create", "UA-78960661-1", n, "fbrq"); if (t.Branding.isSpil()) {
                    var r = t.Utils.getReferrer(decodeURIComponent(document.referrer));
                    ga("fbrq.set", "referrer", r), ga("set", "referrer", r)
                }
                t.Utils.isOnDevice(this.game) && ga("fbrq.set", "checkProtocolTask", null);
                for (var h = "brzcrz_local=", l = document.cookie.split(";"), c = 0; c < l.length; c++) {
                    for (var u = l[c];
                        " " === u.charAt(0);) u = u.substring(1, u.length);
                    if (0 === u.indexOf(h)) {
                        var d = u.substring(h.length, u.length);
                        ga("fbrq.set", "userId", d), ga("fbrq.set", "dimension1", d);
                        break
                    }
                }
                return ga("fbrq.set", "appName", "All"), ga("fbrq.send", "pageview"), window.DS_OPTIONS = {
                        id: "fbrq",
                        success: function(t) {
                            ga("fbrq.set", "userId", t), ga("fbrq.set", "dimension1", t), ga("fbrq.send", "event", "Identification", "complete")
                        }
                    },
                    function(t, e, i, s) {
                        var n = e.createElement("script"),
                            a = e.getElementsByTagName("script")[0];
                        n.type = "text/javascript", n.async = !0, n.src = "./main.min.js", a.parentNode.insertBefore(n, a)
                    }(window, document), ga
            }, i.prototype.sendScreenView = function(t) {
                ga("fbrq.send", "screenview", {
                    screenName: t
                }), ga("send", "screenview", {
                    screenName: t
                })
            }, i.prototype.sendGenericEvent = function(t, e, i) {
                ga("fbrq.send", "event", t, e, i)
            }, i
        }(Phaser.Plugin);
        e.GoogleAnalytics = i
    }(t.Plugins || (t.Plugins = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i) {
                var s = t.call(this, e, i) || this;
                return e.hasOwnProperty("events") || (e.events = {
                    onGameStart: new Phaser.Signal,
                    onGameEnd: new Phaser.Signal,
                    onLevelStart: new Phaser.Signal,
                    onLevelEnd: new Phaser.Signal,
                    onPause: new Phaser.Signal,
                    onResume: new Phaser.Signal
                }), s
            }
            return __extends(e, t), e
        }(Phaser.Plugin);
        t.GameEvents = e
    }(t.Plugins || (t.Plugins = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t
            }
            return __extends(s, i), s.prototype.init = function(e) {
                if (this.config = e, s.SPLASH_OVERRIDE = "number" == typeof e.splashOverride && e.splashOverride, this.game.scale.onSizeChange.add(this.resize, this), void 0 === !this.game.load.spine) throw new Error("You tried to play the Splash screen without spine support enabled!");
                t.Utils.isOnDevice(this.game) || t.Branding.isAirfi() ? t.Utils.ASSET_LOCATION = "assets/" : t.Utils.isTc() ? t.Utils.ASSET_LOCATION = "/repository/download/Fabrique_FunnyGamesSplash/.lastSuccessful/build/assets/" : "fbrq.io" === t.Utils.getSourceSite(!0) && (t.Utils.ASSET_LOCATION = "https://" + window.location.host + "/@orange-games/splash/assets/"), t.Utils.registerAudioUnlocker(this.game)
            }, s.prototype.preload = function() {
                this.scaleFactor = this.getScale(), t.Utils.isTc() || (this.game.load.crossOrigin = "anonymous");
                var e = Date.now() / 1e3 | 0;
                t.Utils.isOnDevice(this.game) || (this.game.load.json(t.Branding.INTERNAL_PORTALS_KEY, t.Utils.ASSET_LOCATION + "json/internal.json?v=" + e), this.game.load.json(t.Branding.CONTRACTED_PORTALS_KEY, t.Utils.ASSET_LOCATION + "json/contracted.json?v=" + e), this.game.load.json(t.Branding.SPECIAL_PORTALS_KEY, t.Utils.ASSET_LOCATION + "json/special.json?v=" + e), this.game.load.json(t.Branding.SITELOCK_PORTALS, t.Utils.ASSET_LOCATION + "json/sitelock.json?v=" + e), this.game.load.json(t.Branding.GAME_ICONS_KEY, t.Utils.ASSET_LOCATION + "json/games.json?v=" + e), this.game.load.json(t.Domain.KEY, t.Utils.ASSET_LOCATION + "json/domains.json"))
            }, s.prototype.getScale = function() {
                return this.game.device.desktop ? this.game.width < 1.5 * e.FunnyGames.IdealWidth ? this.game.width / 6 * 4 / e.FunnyGames.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / 6 * 4 / e.FunnyGames.IdealWidth : this.game.width / 6 * 3 / e.FunnyGames.IdealWidth
            }, s.prototype.loadUpdate = function() {}, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background && this.background.resize(this.scaleFactor)
            }, s.prototype.shutdown = function() {
                this.game.scale.onSizeChange.remove(this.resize, this), this.world.remove(this.background)
            }, s.prototype.create = function() {
                switch (t.Domain.setList(this.cache.getJSON(t.Domain.KEY, !0)), t.PortalScripts.loadPortalScript(this.cache.getJSON(t.Branding.SITELOCK_PORTALS)), t.Branding.setSiteLock(this.cache.getJSON(t.Branding.SITELOCK_PORTALS)), t.Branding.isSpecial(this.game) && (s.SPLASH_OVERRIDE = t.BrandingDomain.Neutral), t.Utils.getBrandingDomain()) {
                    case t.BrandingDomain.Spele:
                        this.background = new t.SplashScreenBackgrounds.Spele(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.PlayCell:
                        this.background = new t.SplashScreenBackgrounds.PlayCell(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.GameCell:
                        this.background = new t.SplashScreenBackgrounds.GameCell(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.Yepi:
                        this.background = new t.SplashScreenBackgrounds.Yepi(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.Neutral:
                    case t.BrandingDomain.Spil:
                        this.background = new t.SplashScreenBackgrounds.Spil(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.Admeen:
                        this.background = new t.SplashScreenBackgrounds.Admeen(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    default:
                    case t.BrandingDomain.Kizi:
                        this.background = new t.SplashScreenBackgrounds.Kizi(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.Bild:
                        this.background = new t.SplashScreenBackgrounds.Bild(this.game, this.scaleFactor), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.Funnygames:
                        this.background = new t.SplashScreenBackgrounds.FunnyGames(this.game, this.scaleFactor), this.game.add.existing(this.background)
                }
                this.game.state.add(e.SplashPreloader.Name, e.SplashPreloader), this.game.state.start(e.SplashPreloader.Name, !0, !1, this.config, this.background)
            }, s
        }(Phaser.State);
        i.Name = "preloader", i.SPLASH_OVERRIDE = !1, e.Preloader = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.game.scale.onSizeChange.add(this.resize, this), this.background = e, this.game.add.existing(this.background)
            }, s.prototype.preload = function() {
                switch (this.scaleFactor = this.getScale(), t.Utils.isTc() || (this.game.load.crossOrigin = "anonymous"), t.Utils.getBrandingDomain()) {
                    case t.BrandingDomain.Spele:
                        this.game.load.atlas("spele_atlas", t.Utils.ASSET_LOCATION + "atlas/spele_atlas.png", t.Utils.ASSET_LOCATION + "atlas/spele_atlas.json"), this.game.load.spine("jelly_skeleton", t.Utils.ASSET_LOCATION + "spine/jelly_skeleton.json"), this.game.device.iOS ? this.game.load.audio("cheer", [t.Utils.ASSET_LOCATION + "sound/ss_intro.m4a"]) : this.game.load.audio("cheer", [t.Utils.ASSET_LOCATION + "sound/ss_intro.ogg", t.Utils.ASSET_LOCATION + "sound/ss_intro.mp3"]);
                        break;
                    case t.BrandingDomain.Neutral:
                    case t.BrandingDomain.Spil:
                        this.game.add.existing(this.background), this.game.load.spritesheet("fgs_play", t.Utils.ASSET_LOCATION + "images/fgs_btn_play.png", 130, 130), this.game.load.image("loader", t.Utils.ASSET_LOCATION + "images/loader_back.png"), this.game.load.image("logo", t.Utils.ASSET_LOCATION + "images/spil_logo.png");
                        break;
                    case t.BrandingDomain.PlayCell:
                        this.game.load.image("playcell_bg", t.Utils.ASSET_LOCATION + "images/playcell_splash_bg.png"), this.game.load.image("playcell_bubble", t.Utils.ASSET_LOCATION + "images/playcell_splash_bubble.png"), this.game.load.image("playcell_button", t.Utils.ASSET_LOCATION + "images/playcell_splash_button.png");
                        break;
                    case t.BrandingDomain.GameCell:
                        this.game.load.atlas("gamecell_atlas", t.Utils.ASSET_LOCATION + "atlas/gamecell_atlas.png", t.Utils.ASSET_LOCATION + "atlas/gamecell_atlas.json"), this.game.load.spine("splash_gamecell", t.Utils.ASSET_LOCATION + "spine/splash_gamecell.json");
                        break;
                    case t.BrandingDomain.Yepi:
                        this.game.load.spine("yp_splash", t.Utils.ASSET_LOCATION + "spine/yp_splash.json"), this.game.load.atlas("yp_atlas", t.Utils.ASSET_LOCATION + "atlas/yp_atlas.png", t.Utils.ASSET_LOCATION + "atlas/yp_atlas.json");
                        break;
                    case t.BrandingDomain.Admeen:
                        this.game.load.atlas("admeen_atlas", t.Utils.ASSET_LOCATION + "atlas/admeen_atlas.png", t.Utils.ASSET_LOCATION + "atlas/admeen_atlas.json");
                        break;
                    default:
                    case t.BrandingDomain.Kizi:
                        this.game.load.image("kizi_twist", t.Utils.ASSET_LOCATION + "images/kizi_twist.png"), this.game.load.image("kizi_button", t.Utils.ASSET_LOCATION + "images/kizi_button.png"), this.game.load.image("kizi_logo", t.Utils.ASSET_LOCATION + "images/kizi_logo.png"), this.game.load.spine("kizi_skeleton", t.Utils.ASSET_LOCATION + "spine/kizi_skeleton.json");
                        break;
                    case t.BrandingDomain.Bild:
                        this.game.load.image("bild_play", t.Utils.ASSET_LOCATION + "images/bild_btn_play.png"), this.game.load.image("bild_logo", t.Utils.ASSET_LOCATION + "images/branding_logo_bild.png"), this.game.add.existing(this.background);
                        break;
                    case t.BrandingDomain.Funnygames:
                        this.game.load.image("fgs_logo", t.Utils.ASSET_LOCATION + "images/fgs_logo.png"), this.game.load.spritesheet("fgs_play", t.Utils.ASSET_LOCATION + "images/fgs_btn_play.png", 130, 130), this.game.load.spine("fgs_monster_1", t.Utils.ASSET_LOCATION + "spine/fgs_monster_1.json"), this.game.load.spine("fgs_monster_2", t.Utils.ASSET_LOCATION + "spine/fgs_monster_2.json"), this.game.load.spine("fgs_monster_3", t.Utils.ASSET_LOCATION + "spine/fgs_monster_3.json"), this.game.device.iOS ? this.game.load.audio("fg", [t.Utils.ASSET_LOCATION + "sound/fgs_intro.m4a"]) : this.game.load.audio("fg", [t.Utils.ASSET_LOCATION + "sound/fgs_intro.ogg", t.Utils.ASSET_LOCATION + "sound/fgs_intro.mp3"])
                }
            }, s.prototype.getScale = function() {
                return this.game.device.desktop ? this.game.width < 1.5 * e.FunnyGames.IdealWidth ? this.game.width / 6 * 4 / e.FunnyGames.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / 6 * 4 / e.FunnyGames.IdealWidth : this.game.width / 6 * 3 / e.FunnyGames.IdealWidth
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor)
            }, s.prototype.shutdown = function() {
                this.game.scale.onSizeChange.remove(this.resize, this), this.world.remove(this.background)
            }, s.prototype.create = function() {
                switch (t.Utils.getBrandingDomain()) {
                    case t.BrandingDomain.Spele:
                        this.game.state.add(e.Spele.Name, e.Spele), this.game.state.start(e.Spele.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.Neutral:
                        this.game.state.add(e.Neutral.Name, e.Neutral), this.game.state.start(e.Neutral.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.PlayCell:
                        this.game.state.add(e.PlayCell.Name, e.PlayCell), this.game.state.start(e.PlayCell.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.GameCell:
                        this.game.state.add(e.GameCell.Name, e.GameCell), this.game.state.start(e.GameCell.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.Spil:
                        this.game.state.add(e.Spil.Name, e.Spil), this.game.state.start(e.Spil.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.Admeen:
                        this.game.state.add(e.Admeen.Name, e.Admeen), this.game.state.start(e.Admeen.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.Yepi:
                        this.game.state.add(e.Yepi.Name, e.Yepi), this.game.state.start(e.Yepi.Name, !0, !1, this.config, this.background);
                        break;
                    default:
                    case t.BrandingDomain.Kizi:
                        this.game.state.add(e.Kizi.Name, e.Kizi), this.game.state.start(e.Kizi.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.Bild:
                        this.game.state.add(e.Bild.Name, e.Bild), this.game.state.start(e.Bild.Name, !0, !1, this.config, this.background);
                        break;
                    case t.BrandingDomain.Funnygames:
                        this.game.state.add(e.FunnyGames.Name, e.FunnyGames), this.game.state.start(e.FunnyGames.Name, !0, !1, this.config, this.background)
                }
            }, s
        }(Phaser.State);
        i.Name = "splashloader", e.SplashPreloader = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.dotText = ".", t.ts = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {
                this.preloadText.setText("Loading")
            }, s.prototype.onPreloadedFile = function() {
                this.dotText.length >= 3 ? this.dotText = "." : this.dotText += ".", this.preloadText.setText("Loading " + this.dotText)
            }, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.bgImage = this.game.add.tileSprite(this.game.width / 2, this.game.height / 2, 853, 612, "admeen_atlas", "bg_pattern"), this.bgImage.pivot.set(426.5, 306), this.gradientBitmap = this.game.make.bitmapData(1, 1), this.bgGradientOverlay = this.game.add.sprite(0, 0, this.gradientBitmap), this.logo = this.game.add.image(0, 0, "admeen_atlas", "mascotte"), this.logo.anchor.set(.5, .7), this.playButton = this.game.add.button(this.game.width / 2, .75 * this.game.height, "admeen_atlas", this.handler, this, "btn", "btn", "btn", "btn"), this.playButton.anchor.set(.5), this.playButton.visible = !1, this.created = !0, this.preloadText = this.game.add.text(this.game.width / 2, this.game.height / 2 * .75, "", {
                    font: "Arial",
                    fontSize: 40,
                    fill: "#ffffff",
                    fontWeight: "bold"
                }), this.preloadText.anchor.set(.5)
            }, s.prototype.resizeObjects = function() {
                if (this.created) {
                    var e = this.game.width < 1 ? 1 : this.game.width,
                        i = this.game.height < 1 ? 1 : this.game.height;
                    this.logo.scale.set(this.scaleFactor), this.logo.y = .4 * this.game.height, this.logo.x = this.game.width / 2, this.bgImage.width = 853 * this.scaleFactor, this.bgImage.height = 612 * this.scaleFactor, this.bgImage.y = this.game.height / 2, this.bgImage.x = this.game.width / 2, this.bgImage.pivot.set(853 * this.scaleFactor / 2, 612 * this.scaleFactor / 2), this.gradientBitmap.resize(e, i);
                    var s = this.gradientBitmap.context.createRadialGradient(e / 2, i / 2, 0, e / 2, i / 2, .5 * i);
                    s.addColorStop(0, "rgba(66, 103, 178, 0)"), s.addColorStop(1, "rgba(66, 103, 178, 1)"), this.gradientBitmap.context.fillStyle = s, this.gradientBitmap.context.clearRect(0, 0, e, i), this.gradientBitmap.context.fillRect(0, 0, e, i), this.preloadText.x = this.game.width / 2, this.preloadText.y = .75 * this.game.height, this.preloadText.scale.set(this.scaleFactor), t.Utils.isOnDevice(this.game) || (this.playButton.scale.set(.6 * this.scaleFactor), this.playButton.x = this.game.width / 2, this.playButton.y = .75 * this.game.height)
                }
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.getScale = function() {
                return 1
            }, s.prototype.startAnimation = function() {}, s.prototype.animateButton = function() {
                t.Utils.isOnDevice(this.game) || (this.preloadText.visible = !1, this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start())
            }, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.logo.destroy(!0), this.playButton.destroy(!0), this.bgImage.destroy(!0), this.background.destroy(!0), this.logo = null, this.bgImage = null, this.playButton = null, this.background = null, this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "admeenSplashScreen", i.IdealWidth = 400, i.MaxDots = 3, e.Admeen = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.preloadTexts = [], t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {}, s.prototype.onPreloadedFile = function() {}, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.loadBack.visible = !1, this.loadBar.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.logo = this.game.add.sprite(this.game.width / 2, this.game.height / 2 - 100, "bild_logo"), this.logo.anchor.set(.5), this.logo.scale.set(.8), s.IdealWidth = this.logo.getBounds().width;
                var t = this.game.make.graphics(0, 0);
                t.beginFill(16777215, .5).drawRect(0, 0, 350, 20).endFill(), this.loadBack = this.game.add.sprite(this.game.width / 2, this.game.height / 2 + 100, t.generateTexture()), this.loadBack.anchor.set(.5);
                var e = this.game.make.graphics(0, 0);
                e.beginFill(16777215, 1).drawRect(0, 0, 350, 20).endFill(), this.loadBar = this.game.add.sprite(this.game.width / 2 - 175, this.game.height / 2 + 100, e.generateTexture()), this.loadBar.anchor.set(0, .5), this.load.setPreloadSprite(this.loadBar), this.playButton = this.game.add.button(this.game.width / 2, this.game.height / 2 + 200, "bild_play", this.handler, this), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.resizeObjects = function() {
                this.created && (this.logo.scale.set(.8 * this.scaleFactor), this.logo.y = this.game.height / 2 - 100 * this.scaleFactor, this.logo.x = this.game.width / 2, t.Utils.isOnDevice(this.game) || (this.playButton.x = this.game.width / 2, this.playButton.y = this.game.height / 2 + 200 * this.scaleFactor))
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * s.IdealWidth ? this.game.width / 6 * 4 / s.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / 6 * 4 / s.IdealWidth : this.game.width / 6 * 3 / s.IdealWidth
            }, s.prototype.startAnimation = function() {}, s.prototype.animateButton = function() {
                t.Utils.isOnDevice(this.game) || (this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start())
            }, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                i.prototype.shutdown.call(this), this.logo.destroy(!0), this.loadBack.destroy(!0), this.loadBar.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.logo = null, this.loadBack = null, this.loadBar = null, this.playButton = null, this.background = null, this.config = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "bildSplashScreen", i.IdealWidth = 463, i.MaxDots = 3, e.Bild = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.preloadTexts = ["Loading images", "Loading music", "Loading sound effects", "Calculating Pi"], t.dots = 1, t.dotText = ".", t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.config.preloadTexts && (this.preloadTexts = this.config.preloadTexts), this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {
                this.t = Date.now(), this.preloadText.setText(this.preloadTexts[this.tId])
            }, s.prototype.onPreloadedFile = function() {
                Date.now() - this.t > 1e3 && (this.t = Date.now(), ++this.tId >= this.preloadTexts.length && (this.tId = 0)), this.dotText.length >= 3 ? this.dotText = "." : this.dotText += ".", this.preloadText.setText(this.preloadTexts[this.tId] + this.dotText)
            }, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.preloadText.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.monster1 = this.game.add.spine(0, 0, "fgs_monster_1"), this.monster1.setAnimationByName(0, "idle", !0), this.monster2 = this.game.add.spine(0, 0, "fgs_monster_2"), this.monster2.setAnimationByName(0, "idle", !0), this.monster3 = this.game.add.spine(0, 0, "fgs_monster_3"), this.monster3.setAnimationByName(0, "idle", !0), this.preloadText = this.game.add.text(this.game.width / 2, this.game.height / 2 + 230, "", {
                    font: "Arial",
                    fontSize: 40,
                    fill: "#ffffff",
                    fontWeight: "bold"
                }), this.preloadText.anchor.set(.5), this.logo = this.game.add.image(0, 0, "fgs_logo"), this.logo.anchor.set(.5), s.IdealWidth = 1.5 * this.logo.getBounds().width, this.playButton = this.game.add.button(this.game.width / 2, this.game.height / 2 + 230 * this.scaleFactor, "fgs_play", this.handler, this, 0, 0, 1, 0), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.resizeObjects = function() {
                this.created && (this.logo.scale.set(1.5 * this.scaleFactor), this.logo.y = this.game.height / 2 + 70 * this.scaleFactor, this.logo.x = this.game.width / 2, this.monster1.x = this.game.width / 2 + 40 * this.scaleFactor, this.monster1.y = this.game.height / 2 - 10 * this.scaleFactor, this.monster1.scale.set(.4 * this.scaleFactor), this.monster2.x = this.game.width / 2 + 190 * this.scaleFactor, this.monster2.y = this.game.height / 2 - 10 * this.scaleFactor, this.monster2.scale.set(.4 * this.scaleFactor), this.monster3.x = this.game.width / 2 - 140 * this.scaleFactor, this.monster3.y = this.game.height / 2 - 10 * this.scaleFactor, this.monster3.scale.set(.4 * this.scaleFactor), this.preloadText.x = this.game.width / 2, this.preloadText.y = this.game.height / 2 + 230 * this.scaleFactor, this.preloadText.scale.set(this.scaleFactor), this.playButton.x = this.game.width / 2, this.playButton.y = this.game.height / 2 + 230 * this.scaleFactor)
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * s.IdealWidth ? this.game.width / 6 * 4 / s.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / 6 * 4 / s.IdealWidth : this.game.width / 6 * 3 / s.IdealWidth
            }, s.prototype.startAnimation = function() {
                this.game.sound.touchLocked || this.game.sound.play("fg");
                var t = this.game.add.tween(this.logo.scale);
                t.to({
                    x: 1.2 * this.scaleFactor,
                    y: 1.2 * this.scaleFactor
                }, 100), t.to({
                    x: 1.5 * this.scaleFactor,
                    y: 1.5 * this.scaleFactor
                }, 450, Phaser.Easing.Back.InOut), t.start()
            }, s.prototype.animateButton = function() {
                this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start()
            }, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                i.prototype.shutdown.call(this), this.logo.destroy(!0), this.monster1.destroy(!0), this.monster2.destroy(!0), this.monster3.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.preloadText.destroy(!0), this.logo = null, this.monster1 = null, this.monster2 = null, this.monster3 = null, this.playButton = null, this.background = null, this.preloadText = null, this.config = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "funnySplashScreen", i.IdealWidth = 463, i.MaxDots = 3, e.FunnyGames = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.preloadTexts = ["Loading images", "Loading music", "Loading sound effects", "Calculating Pi"], t.dots = 1, t.dotText = ".", t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.config.preloadTexts && (this.preloadTexts = this.config.preloadTexts), this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {
                this.t = Date.now(), this.preloadText.setText(this.preloadTexts[this.tId])
            }, s.prototype.onPreloadedFile = function() {
                Date.now() - this.t > 1e3 && (this.t = Date.now(), ++this.tId >= this.preloadTexts.length && (this.tId = 0)), this.dotText.length >= 3 ? this.dotText = "." : this.dotText += ".", this.preloadText.setText(this.preloadTexts[this.tId] + this.dotText)
            }, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.preloadText.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.twirl = this.game.add.image(this.game.width / 2, this.game.height / 2, "gamecell_atlas", "gamecell_bg_pattern"), this.twirl.scale.setTo(2, 2), this.twirl.anchor.set(.5), this.createOverlay(), this.logoSpine = this.game.add.spine(0, 0, "splash_gamecell"), this.logoSpine.setAnimationByName(0, "idle", !0), this.preloadText = this.game.add.text(this.game.width / 2, this.game.height / 2 + 230, "", {
                    font: "Arial",
                    fontSize: 40,
                    fill: "#ffffff",
                    fontWeight: "bold"
                }), this.preloadText.anchor.set(.5), this.logo = this.game.add.image(0, 0, "gamecell_atlas", "gamecell_logo"), this.logo.anchor.set(.5), s.IdealWidth = 1.5 * this.logo.getBounds().width, this.playButton = this.game.add.button(this.game.width / 2, .85 * this.game.height, "gamecell_atlas", this.handler, this, "gamecell_btn_play", "gamecell_btn_play", "gamecell_btn_play", "gamecell_btn_play"), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.createOverlay = function() {
                this.gradientBitmap = this.game.make.bitmapData(1, 1), this.gradient = this.game.make.sprite(0, 0, this.gradientBitmap), this.game.add.existing(this.gradient)
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.resizeObjects = function() {
                if (this.created) {
                    this.gradientBitmap.resize(this.game.width, this.game.height), this.gradientBitmap.context.clearRect(0, 0, this.game.width, this.game.height);
                    var t = this.gradientBitmap.context.createRadialGradient(this.game.width / 2, this.game.height / 2, 0, this.game.width / 2, this.game.height / 2, this.game.height / 2);
                    t.addColorStop(0, "rgb(8, 8, 54)"), t.addColorStop(1, "rgba(8, 8, 54, 0)"), this.gradientBitmap.context.fillStyle = t, this.gradientBitmap.context.fillRect(0, 0, this.game.width, this.game.height), this.logo.scale.set(.5 * this.scaleFactor), this.logo.y = .2 * this.game.height, this.logo.x = this.game.width / 2, this.logoSpine.scale.set(this.scaleFactor), this.logoSpine.autoUpdateTransform(), this.logoSpine.x = this.game.width / 2, this.logoSpine.y = this.game.height / 2, this.preloadText.x = this.game.width / 2, this.preloadText.y = .85 * this.game.height, this.preloadText.scale.set(this.scaleFactor), this.playButton.x = this.game.width / 2, this.playButton.y = .85 * this.game.height, this.twirl.position.set(this.game.width / 2, this.game.height / 2)
                }
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * s.IdealWidth ? this.game.width / 6 * 4 / s.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / s.IdealWidth : this.game.width / 6 * 3 / s.IdealWidth
            }, s.prototype.startAnimation = function() {
                var t = this.game.add.tween(this.logo.scale);
                t.to({
                    x: .6 * this.scaleFactor,
                    y: .6 * this.scaleFactor
                }, 100), t.to({
                    x: .75 * this.scaleFactor,
                    y: .75 * this.scaleFactor
                }, 450, Phaser.Easing.Back.InOut), t.start()
            }, s.prototype.animateButton = function() {
                this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start()
            }, s.prototype.update = function() {
                this.background.update(), this.twirl.scale.x += .01, this.twirl.scale.y += .01, this.twirl.scale.x > 2.8 && (this.twirl.scale.x = 2, this.twirl.scale.y = 2)
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                i.prototype.shutdown.call(this), this.gradientBitmap.destroy(), this.gradient.destroy(!0), this.gradientBitmap = null, this.gradient = null, this.logo.destroy(!0), this.logoSpine.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.preloadText.destroy(!0), this.logo = null, this.logoSpine = null, this.playButton = null, this.background = null, this.preloadText = null, this.config = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "GameCell", i.IdealWidth = 860, i.MaxDots = 3, e.GameCell = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.preloadTexts = ["Loading images", "Loading music", "Loading sound effects", "Calculating Pi"], t.dotText = ".", t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.config.preloadTexts && (this.preloadTexts = this.config.preloadTexts), this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {
                this.t = Date.now(), this.preloadText.setText(this.preloadTexts[this.tId])
            }, s.prototype.onPreloadedFile = function() {
                Date.now() - this.t > 1e3 && (this.t = Date.now(), ++this.tId >= this.preloadTexts.length && (this.tId = 0)), this.dotText.length >= 3 ? this.dotText = "." : this.dotText += ".", this.preloadText.setText(this.preloadTexts[this.tId] + this.dotText)
            }, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.preloadText.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.twirl = this.game.add.image(this.game.width / 2, this.game.height / 2, "kizi_twist"), this.twirl.anchor.set(.5), this.twirl.width = this.twirl.height = this.game.width > this.game.height ? this.game.width : this.game.height, this.monster = this.game.add.spine(0, 0, "kizi_skeleton"), this.monster.setAnimationByName(0, "idle", !0), this.preloadText = this.game.add.text(this.game.width / 2, this.game.height / 2 + 230, "", {
                    font: "Arial",
                    fontSize: 40,
                    fill: "#ffffff",
                    fontWeight: "bold"
                }), this.preloadText.anchor.set(.5), this.logo = this.game.add.image(0, 0, "kizi_logo"), this.logo.anchor.set(.5), s.IdealWidth = 1.5 * this.logo.getBounds().width, this.playButton = this.game.add.button(this.game.width / 2, .85 * this.game.height, "kizi_button", this.handler, this, 0, 0, 1, 0), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.resizeObjects = function() {
                this.created && (this.logo.scale.set(.5 * this.scaleFactor), this.logo.y = .2 * this.game.height, this.logo.x = this.game.width / 2, this.monster.scale.set(this.scaleFactor), this.monster.autoUpdateTransform(), this.monster.x = this.game.width / 2, this.monster.y = this.game.height / 2 + .6 * this.monster.height, this.preloadText.x = this.game.width / 2, this.preloadText.y = .85 * this.game.height, this.preloadText.scale.set(this.scaleFactor), this.playButton.x = this.game.width / 2, this.playButton.y = .85 * this.game.height, this.twirl.position.set(this.game.width / 2, this.game.height / 2))
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * s.IdealWidth ? this.game.width / 6 * 4 / s.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / s.IdealWidth : this.game.width / 6 * 3 / s.IdealWidth
            }, s.prototype.startAnimation = function() {
                var t = this.game.add.tween(this.logo.scale);
                t.to({
                    x: .6 * this.scaleFactor,
                    y: .6 * this.scaleFactor
                }, 100), t.to({
                    x: .75 * this.scaleFactor,
                    y: .75 * this.scaleFactor
                }, 450, Phaser.Easing.Back.InOut), t.start()
            }, s.prototype.animateButton = function() {
                this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start()
            }, s.prototype.update = function() {
                this.background.update(), this.twirl.angle += 5
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                i.prototype.shutdown.call(this), this.logo.destroy(!0), this.monster.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.preloadText.destroy(!0), this.logo = null, this.monster = null, this.playButton = null, this.background = null, this.preloadText = null, this.config = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "kiziSplashScreen", i.IdealWidth = 860, i.MaxDots = 3, e.Kizi = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.dots = 1, t.dotText = ".", t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {}, s.prototype.onPreloadedFile = function() {}, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.loadBack.visible = !1, this.loadBar.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.loadBack = this.game.add.sprite(this.game.width / 2, this.game.height / 2, "loader"), this.loadBack.anchor.set(.5);
                var t = this.game.make.graphics(0, 0);
                t.beginFill(16777215, 1).drawRoundedRect(0, 0, 350, 20, 5).endFill(), this.loadBar = this.game.add.sprite(this.game.width / 2 - 175, this.game.height / 2 - 5, t.generateTexture()), this.loadBar.anchor.set(0, .5), this.load.setPreloadSprite(this.loadBar), this.playButton = this.game.add.button(this.game.width / 2, this.game.height / 2, "fgs_play", this.handler, this, 0, 0, 1, 0), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.resizeObjects = function() {
                this.created && (t.Utils.isOnDevice(this.game) || (this.playButton.x = this.game.width / 2, this.playButton.y = this.game.height / 2))
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * e.FunnyGames.IdealWidth ? this.game.width / 6 * 4 / e.FunnyGames.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / 6 * 4 / e.FunnyGames.IdealWidth : this.game.width / 6 * 3 / e.FunnyGames.IdealWidth
            }, s.prototype.startAnimation = function() {}, s.prototype.animateButton = function() {
                t.Utils.isOnDevice(this.game) || (this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start())
            }, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.loadBack.destroy(!0), this.loadBar.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.loadBack = null, this.loadBar = null, this.playButton = null, this.background = null, this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "neutralSplashScreen", i.IdealWidth = 463, i.MaxDots = 3, e.Neutral = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e) {
                var i = t.call(this, e) || this;
                return i.graphic1 = i.create(0, 0, "kizi_atlas_new", "shine2 instance 10000"), i.graphic1.anchor.setTo(.5), i.graphic1.angle = 90, i.graphic2 = i.create(0, 0, "kizi_atlas_new", "shine2 instance 10000"), i.graphic2.anchor.setTo(.5), i.graphic3 = i.create(0, 0, "kizi_atlas_new", "shine1 instance 10000"), i.graphic3.anchor.setTo(.5), i
            }
            return __extends(e, t), e.prototype.start = function(t, e, i, s) {
                void 0 === s && (s = !1), !0 === s && this.parent.setChildIndex(this, this.parent.children.length - 1), this.x = t, this.y = e, this.scale.setTo(i), this.visible = !0, this.graphic1.alpha = 0, this.graphic1.scale.setTo(1, .4), this.graphic2.alpha = 0, this.graphic2.scale.setTo(1, .4), this.graphic3.alpha = 1, this.graphic3.scale.setTo(0), this.game.add.tween(this.graphic3.scale).to({
                    x: 1,
                    y: 1
                }, 400, Phaser.Easing.Linear.None, !0).onComplete.addOnce(function() {
                    this.game.add.tween(this.graphic3.scale).to({
                        x: .2,
                        y: .2
                    }, 200, Phaser.Easing.Linear.None, !0), this.game.add.tween(this.graphic3).to({
                        alpha: 0
                    }, 200, Phaser.Easing.Linear.None, !0)
                }, this), this.game.add.tween(this.graphic2).to({
                    alpha: 1
                }, 200, Phaser.Easing.Linear.None, !0, 200), this.game.add.tween(this.graphic2.scale).to({
                    y: 1.4
                }, 200, Phaser.Easing.Linear.None, !0, 200).onComplete.addOnce(function() {
                    this.game.add.tween(this.graphic2.scale).to({
                        x: .25
                    }, 300, Phaser.Easing.Linear.None, !0, 200), this.game.add.tween(this.graphic2).to({
                        alpha: 0
                    }, 300, Phaser.Easing.Linear.None, !0, 200)
                }, this), this.game.add.tween(this.graphic1).to({
                    alpha: 1
                }, 200, Phaser.Easing.Linear.None, !0, 200), this.game.add.tween(this.graphic1.scale).to({
                    y: 1.4
                }, 200, Phaser.Easing.Linear.None, !0, 200).onComplete.addOnce(function() {
                    this.game.add.tween(this.graphic1.scale).to({
                        x: .25
                    }, 300, Phaser.Easing.Linear.None, !0, 400), this.game.add.tween(this.graphic1).to({
                        alpha: 0
                    }, 300, Phaser.Easing.Linear.None, !0, 400).onComplete.addOnce(function() {
                        this.visible = !1
                    }, this)
                }, this)
            }, e.prototype.destroy = function() {
                t.prototype.destroy.call(this), this.graphic1 = null, this.graphic2 = null, this.graphic3 = null
            }, e
        }(Phaser.Group);
        t.Shine = e
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(t) {
            function e(e, i, s, n, a, o, r) {
                var h = t.call(this, e, i, s, n, a) || this;
                return h.state = 0, h.counter = 0, h.skewX = 0, h.skewY = 0, h._srB = 0, h._srC = 0, h._crA = 1, h._crD = 1, h._cachedRotX = 0, h._cachedRotY = 0, h.onComplete = new Phaser.Signal, h.tweenDetails = new Array, h.floor = o, h.cell = r, h.updateTransform = function(t) {
                    if (!t && !this.parent && !this.game) return this;
                    var e = this.parent;
                    t ? e = t : this.parent || (e = this.game.world);
                    var i, s, n, a, o, r, h = e.worldTransform,
                        l = this.worldTransform,
                        c = this.rotation + this.skewY,
                        u = this.rotation + this.skewX;
                    if (c % Phaser.Math.PI2 || u % Phaser.Math.PI2 ? (u === this._cachedRotX && c === this._cachedRotY || (this._cachedRotX = u, this._cachedRotY = c, this._crA = Math.cos(c), this._srB = Math.sin(c), this._srC = Math.sin(-u), this._crD = Math.cos(u)), i = this._crA * this.scale.x, s = this._srB * this.scale.x, n = this._srC * this.scale.y, a = this._crD * this.scale.y, o = this.position.x, r = this.position.y, (this.pivot.x || this.pivot.y) && (o -= this.pivot.x * i + this.pivot.y * n, r -= this.pivot.x * s + this.pivot.y * a), l.a = i * h.a + s * h.c, l.b = i * h.b + s * h.d, l.c = n * h.a + a * h.c, l.d = n * h.b + a * h.d, l.tx = o * h.a + r * h.c + h.tx, l.ty = o * h.b + r * h.d + h.ty) : (i = this.scale.x, a = this.scale.y, o = this.position.x - this.pivot.x * i, r = this.position.y - this.pivot.y * a, l.a = i * h.a, l.b = i * h.b, l.c = a * h.c, l.d = a * h.d, l.tx = o * h.a + r * h.c + h.tx, l.ty = o * h.b + r * h.d + h.ty), this.worldAlpha = this.alpha * e.worldAlpha, this.worldPosition.set(l.tx, l.ty), this.worldScale.set(this.scale.x * Math.sqrt(l.a * l.a + l.c * l.c), this.scale.y * Math.sqrt(l.b * l.b + l.d * l.d)), this.worldRotation = Math.atan2(-l.c, l.d), this._currentBounds = null, this.transformCallback && this.transformCallback.call(this.transformCallbackContext, l, h), !this._cacheAsBitmap) {
                        for (var d = 0; d < this.children.length; d++) this.children[d].updateTransform();
                        return this
                    }
                }, h
            }
            return __extends(e, t), e.prototype.show = function(t) {
                this.dir = t, this.setTween(1, 14, {
                    scaleX: 1
                })
            }, e.prototype.setTween = function(t, e, i) {
                if (this.tweenDetails) {
                    0 !== this.tweenDetails.length && this.tweenDetails.splice(0, this.tweenDetails.length), this.state = t;
                    var s, n;
                    this.counter = 0, this.percent = 0, this.duration = e;
                    for (var a = 0, o = Object.keys(i); a < o.length; a++) {
                        var r = o[a];
                        (s = this[r]) !== (n = i[r]) && this.tweenDetails.push({
                            propertyName: r,
                            start: s,
                            change: n - s
                        })
                    }
                }
            }, e.prototype.update = function() {
                if (this.tweenDetails && !(this.state <= 0)) {
                    if (1 === this.state && 3 === this.counter) this.onComplete.dispatch(this.floor, this.cell, this.dir);
                    else if (6 === this.state) return void this.destroy();
                    this.counter += 1, this.percent = this.counter / this.duration;
                    for (var t = 0; t < this.tweenDetails.length; t++) this[this.tweenDetails[t].propertyName] = this.tweenDetails[t].start + this.tweenDetails[t].change * this.percent;
                    this.percent >= 1 && (3 === this.state ? this.setTween(4, 14, {
                        alpha: 0
                    }) : 4 === this.state ? (this.onComplete.dispatch(this.floor, this.cell), this.destroy()) : 5 === this.state ? (this.onComplete.dispatch(), this.state = 6) : this.state = 0)
                }
            }, Object.defineProperty(e.prototype, "scaleX", {
                get: function() {
                    return this.scale.x
                },
                set: function(t) {
                    this.scale.x = t
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scaleY", {
                get: function() {
                    return this.scale.y
                },
                set: function(t) {
                    this.scale.y = t
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.destroy = function() {
                t.prototype.destroy.call(this), this.onComplete = null, this.tweenDetails = [], this.tweenDetails = null
            }, e
        }(Phaser.Sprite);
        t.SmallPart = e
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function i() {
                var t = e.call(this) || this;
                return t.name = i.Name, t.scaleFactor = 1, t.width = 787, t.height = 494, t.created = !1, t.preloadTexts = [], t.preloadReady = !1, t.balls = [], t.clicked = !1, t.tId = 0, t
            }
            return __extends(i, e), i.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.config.preloadTexts && (this.preloadTexts = this.config.preloadTexts), this.game.scale.onSizeChange.add(this.resize, this)
            }, i.prototype.preload = function() {
                this.game.add.existing(this.background), this.scaleFactor = this.getScale(), this.createObjects(), this.resizeObjects(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, i.prototype.onPreloadStart = function() {
                this.t = Date.now(), this.preloadText.setText("Spelletje wordt geladen")
            }, i.prototype.onPreloadedFile = function() {
                Date.now() - this.t > 2e3 && (this.t = Date.now(), ++this.tId >= this.preloadTexts.length && (this.tId = 0)), this.preloadText.setText("Spelletje wordt geladen")
            }, i.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.preloadText.visible = !1, this.game.input.onUp.add(this.handler, this), this.game.tweens.removeAll(), this.balls.forEach(function(t) {
                    t.parent.removeChild(t), t.destroy(!0)
                }), this.animateButton()
            }, i.prototype.createObjects = function() {
                var t = this;
                this.preloadText = this.game.add.text(this.game.width / 2, this.game.height / 2 + 150, "", {
                    font: "Arial",
                    fontSize: 40,
                    fill: "#ffffff",
                    fontWeight: "bold"
                }), this.bg = this.game.add.sprite(this.game.width / 2, -this.game.height / 2, "playcell_bg"), this.bg.scale.set(this.scaleFactor), this.bg.anchor.set(.5), this.preloadText.anchor.set(.5), this.playButton = this.game.add.image(this.game.width / 2, this.game.height / 2 - 50 * this.scaleFactor, "playcell_button"), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.playButton.inputEnabled = !0, this.playButton.events.onInputUp.add(this.handler, this), this.game.add.tween(this.bg.position).to({
                    y: this.game.height / 2
                }, 500, Phaser.Easing.Bounce.InOut, !0).onComplete.add(function() {
                    for (var e = 0; e < 3; e++) {
                        var i = t.game.add.sprite(0, 0, "playcell_bubble");
                        i.alignIn(t.game.world.bounds, Phaser.CENTER, 100 * e - 50, 150), i.scale.set(0), i.anchor.set(.5), t.balls.push(i), t.game.add.tween(i.scale).to({
                            x: 1,
                            y: 1
                        }, 900, "Linear", !0, 300 * e, -1).yoyo(!0).delay(300)
                    }
                    t.created = !0
                })
            }, i.prototype.resizeObjects = function() {
                this.created && (this.bg.x = this.game.width / 2, this.bg.y = this.game.height / 2, this.bg.scale.set(this.scaleFactor), this.preloadText.x = this.game.width / 2, this.preloadText.y = this.game.height / 2 + 150 * this.scaleFactor, this.preloadText.scale.set(this.scaleFactor), this.playButton.x = this.game.width / 2, this.playButton.y = this.game.height / 2 - 50 * this.scaleFactor)
            }, i.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, i.prototype.getScale = function() {
                return this.game.width < this.game.height ? this.game.width / 6 * 5 / this.width : this.game.height / 6 * 5 / this.height
            }, i.prototype.animateButton = function() {
                this.resizeObjects(), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start()
            }, i.prototype.update = function() {
                this.background.update()
            }, i.prototype.loadUpdate = function() {
                this.background.update()
            }, i.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, i.prototype.shutdown = function() {
                e.prototype.shutdown.call(this), this.playButton.destroy(!0), this.background.destroy(!0), this.preloadText.destroy(!0), this.playButton = null, this.bg = null, this.background = null, this.preloadText = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(t.Preloader.Name), this.game.state.remove(t.SplashPreloader.Name), this.game.state.remove(this.name)
            }, i
        }(Phaser.State);
        e.Name = "playCellSplashScreen", t.PlayCell = e
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.preloadTexts = [], t.dotText = ".", t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.config.preloadTexts && (this.preloadTexts = this.config.preloadTexts), this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {
                this.t = Date.now(), this.preloadText.setText("Spelletje wordt geladen")
            }, s.prototype.onPreloadedFile = function() {
                Date.now() - this.t > 1e3 && (this.t = Date.now(), ++this.tId >= this.preloadTexts.length && (this.tId = 0)), this.dotText.length >= 3 ? this.dotText = "." : this.dotText += ".", this.preloadText.setText(this.preloadTexts[this.tId] + this.dotText)
            }, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.preloadText.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.twirl = this.game.add.image(this.game.width / 2, this.game.height / 2, "spele_atlas", "spele_bg_pattern"), this.twirl.anchor.set(.5), this.twirl.width = this.twirl.height = this.game.width > this.game.height ? this.game.width : this.game.height, this.jelly = this.game.add.spine(0, 0, "jelly_skeleton"), this.jelly.setAnimationByName(0, "idle", !0), this.preloadText = this.game.add.text(this.game.width / 2, this.game.height / 2 + 230, "", {
                    font: "Arial",
                    fontSize: 40,
                    fill: "#ffffff",
                    fontWeight: "bold"
                }), this.preloadText.anchor.set(.5), this.logo = this.game.add.image(0, 0, "spele_atlas", "spele_logo"), this.logo.anchor.set(.5), s.IdealWidth = 1.5 * this.logo.getBounds().width;
                this.playButton = this.game.add.button(this.game.width / 2, .85 * this.game.height, "spele_atlas", this.handler, this, "spele_button", "spele_button", "spele_button", "spele_button"), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.resizeObjects = function() {
                this.created && (this.logo.scale.set(.5 * this.scaleFactor), this.logo.y = .25 * this.game.height, this.logo.x = this.game.width / 2, this.jelly.scale.set(.5 * this.scaleFactor), this.jelly.autoUpdateTransform(), this.jelly.x = this.game.width / 2, this.jelly.y = this.game.height / 2 + 1.2 * this.jelly.height, this.preloadText.x = this.game.width / 2, this.preloadText.y = .85 * this.game.height, this.preloadText.scale.set(this.scaleFactor), this.playButton.x = this.game.width / 2, this.playButton.y = .84 * this.game.height, this.twirl.position.set(this.game.width / 2, this.game.height / 2))
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * s.IdealWidth ? this.game.width / 6 * 4 / s.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / s.IdealWidth : this.game.width / 6 * 3 / s.IdealWidth
            }, s.prototype.startAnimation = function() {
                var t = this.game.add.tween(this.logo.scale);
                t.to({
                    x: .6 * this.scaleFactor,
                    y: .6 * this.scaleFactor
                }, 100), t.to({
                    x: .75 * this.scaleFactor,
                    y: .75 * this.scaleFactor
                }, 450, Phaser.Easing.Back.InOut), t.start()
            }, s.prototype.animateButton = function() {
                this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start()
            }, s.prototype.update = function() {
                this.background.update(), this.twirl.angle += 5
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                i.prototype.shutdown.call(this), this.logo.destroy(!0), this.jelly.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.preloadText.destroy(!0), this.logo = null, this.jelly = null, this.playButton = null, this.background = null, this.preloadText = null, this.config = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "speleSplashScreen", i.IdealWidth = 860, i.MaxDots = 3, e.Spele = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(e) {
        var i = function(i) {
            function s() {
                var t = i.call(this) || this;
                return t.name = s.Name, t.scaleFactor = 1, t.created = !1, t.preloadReady = !1, t.clicked = !1, t.dots = 1, t.dotText = ".", t.tId = 0, t
            }
            return __extends(s, i), s.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.game.scale.onSizeChange.add(this.resize, this)
            }, s.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, s.prototype.onPreloadStart = function() {}, s.prototype.onPreloadedFile = function() {}, s.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.loadBack.visible = !1, this.loadBar.visible = !1, this.game.input.onUp.add(this.handler, this), this.animateButton()
            }, s.prototype.createObjects = function() {
                this.logo = this.game.add.image(0, 0, "logo"), this.logo.anchor.set(.5), s.IdealWidth = this.logo.getBounds().width, this.loadBack = this.game.add.sprite(this.game.width / 2, .75 * this.game.height, "loader"), this.loadBack.anchor.set(.5);
                var t = this.game.make.graphics(0, 0);
                t.beginFill(16777215, 1).drawRoundedRect(0, 0, 350, 20, 5).endFill(), this.loadBar = this.game.add.sprite(this.game.width / 2 - 175, .75 * this.game.height - 5, t.generateTexture()), this.loadBar.anchor.set(0, .5), this.load.setPreloadSprite(this.loadBar), this.playButton = this.game.add.button(this.game.width / 2, .75 * this.game.height, "fgs_play", this.handler, this, 0, 0, 1, 0), this.playButton.anchor.set(.5), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !1, this.created = !0
            }, s.prototype.resizeObjects = function() {
                this.created && (this.logo.scale.set(this.scaleFactor), this.logo.y = this.game.height / 2, this.logo.x = this.game.width / 2, t.Utils.isOnDevice(this.game) || (this.playButton.x = this.game.width / 2, this.playButton.y = .75 * this.game.height))
            }, s.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), this.game.add.tween(this.playButton.scale).to({
                    x: 0,
                    y: 0
                }, 250, Phaser.Easing.Back.In).start(), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, s.prototype.getScale = function() {
                return t.Utils.isOnDevice(this.game) ? this.game.width < 1.5 * s.IdealWidth ? this.game.width / 6 * 4 / s.IdealWidth : 1 : this.game.width < this.game.height ? this.game.width / 6 * 4 / s.IdealWidth : this.game.width / 6 * 3 / s.IdealWidth
            }, s.prototype.startAnimation = function() {}, s.prototype.animateButton = function() {
                t.Utils.isOnDevice(this.game) || (this.game.tweens.remove(this.buttonTween), this.playButton.scale.set(this.scaleFactor), this.playButton.visible = !0, this.buttonTween = this.game.add.tween(this.playButton.scale), this.buttonTween.to({
                    x: 1.14 * this.scaleFactor,
                    y: 1.14 * this.scaleFactor
                }, 420, Phaser.Easing.Quadratic.InOut, !0, 500), this.buttonTween.yoyo(!0).onComplete.add(this.animateButton, this), this.buttonTween.start())
            }, s.prototype.update = function() {
                this.background.update()
            }, s.prototype.loadUpdate = function() {
                this.background.update()
            }, s.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects(), this.created && this.preloadReady && this.animateButton()
            }, s.prototype.shutdown = function() {
                this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.loadBack.destroy(!0), this.loadBar.destroy(!0), this.playButton.destroy(!0), this.background.destroy(!0), this.loadBack = null, this.loadBar = null, this.playButton = null, this.background = null, this.game.state.remove(e.Preloader.Name), this.game.state.remove(e.SplashPreloader.Name), this.game.state.remove(this.name)
            }, s
        }(Phaser.State);
        i.Name = "spilSplashScreen", i.IdealWidth = 531, i.MaxDots = 3, e.Spil = i
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    ! function(t) {
        var e = function(e) {
            function i() {
                var t = e.call(this) || this;
                return t.name = i.Name, t.scaleFactor = 1, t.created = !1, t.tiles = [], t.preloadReady = !1, t.balls = [], t.clicked = !1, t.tId = 0, t.dt = Date.now(), t.ddt = Date.now(), t
            }
            return __extends(i, e), i.prototype.init = function(t, e) {
                this.config = t, this.background = e, this.game.scale.onSizeChange.add(this.resize, this), this.gradientBitmap = this.game.make.bitmapData(this.game.width, this.game.height)
            }, i.prototype.preload = function() {
                this.game.add.existing(this.background), this.createObjects(), this.scaleFactor = this.getScale(), this.resizeObjects(), this.startAnimation(), this.game.load.onLoadStart.add(this.onPreloadStart, this), this.game.load.onFileComplete.add(this.onPreloadedFile, this), this.game.load.onLoadComplete.add(this.onPreloadEnd, this), this.config.preloadHandler(), 0 === this.game.load.totalQueuedFiles() && this.onPreloadEnd()
            }, i.prototype.onPreloadStart = function() {
                this.t = Date.now()
            }, i.prototype.onPreloadedFile = function() {}, i.prototype.onPreloadEnd = function() {
                this.preloadReady = !0, this.animateButton()
            }, i.prototype.createObjects = function() {
                for (s = 0; s < 70; s++) {
                    var t = Math.random() < .5 ? "square_empty" : "square_game_" + ("0" + (32 * Math.random() + 1 | 0)).slice(-2),
                        e = this.game.add.image(this.game.width / 2 + (s % 10 * 80 - 400), this.game.height / 2 + (80 * Math.floor(s / 10) - 280), "yp_atlas", t + ".png");
                    e.alpha = .4, this.tiles.push(e)
                }
                this.gradient = this.game.add.sprite(0, 0, this.gradientBitmap), this.spine = this.game.add.spine(0, 0, "yp_splash"), this.spine.setMixByName("flyin", "idle", .2), this.spine.visible = !1, this.logo = this.game.add.sprite(0, 0, "yp_atlas", "yepi_logo.png"), this.logo.alignIn(this.world.bounds, Phaser.TOP_CENTER, 0, -20), this.created = !0;
                var i = this.game.make.graphics(0, 0);
                i.beginFill(16631558, 1).drawCircle(0, 0, 20).endFill();
                for (var s = 0; s < 3; s++) {
                    var n = this.game.add.sprite(0, 0, i.generateTexture());
                    n.alignIn(this.game.world.bounds, Phaser.BOTTOM_CENTER, 50 * s - 50, -20), n.scale.set(0), n.anchor.set(.5), this.balls.push(n), this.game.add.tween(n.scale).to({
                        x: 1,
                        y: 1
                    }, 900, "Linear", !0, 300 * s, -1).yoyo(!0).delay(300)
                }
            }, i.prototype.resizeObjects = function() {
                var t = this;
                if (this.created) {
                    this.gradientBitmap.resize(this.game.width, this.game.height), this.gradientBitmap.context.clearRect(0, 0, this.game.width, this.game.height);
                    var e = this.gradientBitmap.context.createRadialGradient(this.game.width / 2, this.game.height / 2, 0, this.game.width / 2, this.game.height / 2, this.game.height / 1.8);
                    e.addColorStop(0, "rgba(0, 81, 125, 0)"), e.addColorStop(1, "rgba(0, 81, 125, 1)"), this.gradientBitmap.context.fillStyle = e, this.gradientBitmap.context.fillRect(0, 0, this.game.width, this.game.height), this.spine.x = this.game.width / 2, this.spine.y = this.game.height / 2, this.spine.scale.set(this.scaleFactor), this.logo.scale.set(this.scaleFactor), this.logo.alignIn(this.world.bounds, Phaser.TOP_CENTER, 0, -20), this.tiles.forEach(function(e, i) {
                        e.x = t.game.width / 2 + (i % 10 * 80 - 400), e.y = t.game.height / 2 + (80 * Math.floor(i / 10) - 280)
                    })
                }
            }, i.prototype.handler = function(t, e) {
                this.clicked || "mouseout" === e.type || (this.clicked = !0, this.game.tweens.remove(this.buttonTween), this.game.camera.fade(0, 250), void 0 !== this.config.mobilePlayClickhandler ? this.config.mobilePlayClickhandler() : this.game.state.start(this.config.nextState), this.game.input.onUp.remove(this.handler, this))
            }, i.prototype.getScale = function() {
                return this.game.width < this.game.height ? this.game.width / 6 * 4 / t.FunnyGames.IdealWidth : this.game.width / 6 * 3 / t.FunnyGames.IdealWidth
            }, i.prototype.startAnimation = function() {}, i.prototype.animateButton = function() {
                this.spine.visible = !0, this.spine.setAnimationByName(0, "flyin", !1), this.spine.addAnimationByName(0, "idle", !0, 0), this.game.tweens.removeAll(), this.balls.forEach(function(t) {
                    t.parent.removeChild(t), t.destroy(!0)
                }), this.game.input.onUp.add(this.handler, this)
            }, i.prototype.update = function() {
                Date.now() - this.dt > 200 && (this.tweenRandomItem(), this.dt = Date.now())
            }, i.prototype.loadUpdate = function() {
                Date.now() - this.ddt > 200 && (this.ddt = Date.now(), this.tweenRandomItem())
            }, i.prototype.tweenRandomItem = function() {
                var t = this.tiles[Math.random() * this.tiles.length | 0];
                this.game.add.tween(t).to({
                    alpha: 1
                }, 1e3, Phaser.Easing.Linear.None, !0, 0, 0, !0)
            }, i.prototype.resize = function() {
                this.scaleFactor = this.getScale(), this.background.resize(this.scaleFactor), this.resizeObjects()
            }, i.prototype.shutdown = function() {
                e.prototype.shutdown.call(this), this.spine.destroy(!0), this.background.destroy(!0), this.tiles.forEach(function(t) {
                    t.destroy(!0)
                }), this.gradientBitmap.destroy(), this.gradient.destroy(!0), this.logo.destroy(!0), this.balls.forEach(function(t) {
                    t.destroy(!0)
                }), this.spine = null, this.playButton = null, this.background = null, this.gradientBitmap = null, this.gradient = null, this.logo = null, this.tiles = null, this.balls = null, this.game.scale.onSizeChange.remove(this.resize, this), this.game.load.onLoadStart.remove(this.onPreloadStart, this), this.game.load.onFileComplete.remove(this.onPreloadedFile, this), this.game.load.onLoadComplete.remove(this.onPreloadEnd, this), this.game.state.remove(t.Preloader.Name), this.game.state.remove(t.SplashPreloader.Name), this.game.state.remove(this.name)
            }, i
        }(Phaser.State);
        e.Name = "yepiSplashScreen", e.IdealWidth = 463, e.MaxDots = 3, t.Yepi = e
    }(t.SplashScreen || (t.SplashScreen = {}))
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    var e = null,
        i = function() {
            function t() {}
            return t.has = function(t) {
                var i = t.lastIndexOf(".");
                if (i <= 0 || i >= t.length - 1) return !1;
                var s = t.lastIndexOf(".", i - 1);
                if (s <= 0 || s >= i - 1) return !1;
                var n = e[t.slice(i + 1)];
                return !!n && n.indexOf(" " + t.slice(s + 1, i) + " ") >= 0
            }, t.is = function(t) {
                var i = t.lastIndexOf(".");
                if (i <= 0 || i >= t.length - 1) return !1;
                if (t.lastIndexOf(".", i - 1) >= 0) return !1;
                var s = e[t.slice(i + 1)];
                return !!s && s.indexOf(" " + t.slice(0, i) + " ") >= 0
            }, t.get = function(t) {
                var i = t.lastIndexOf(".");
                if (i <= 0 || i >= t.length - 1) return null;
                var s = t.lastIndexOf(".", i - 1);
                if (s <= 0 || s >= i - 1) return null;
                var n = e[t.slice(i + 1)];
                return n ? n.indexOf(" " + t.slice(s + 1, i) + " ") < 0 ? null : t.slice(s + 1) : null
            }, t
        }(),
        s = function() {
            function t() {}
            return t.setList = function(t) {
                e = t || {}
            }, t.getDomain = function(t) {
                if (null === e) return null;
                var i = t.match(/\./g);
                if (i && i.length < 2) return t;
                var s = t.length - this.getTld(t).length - 1;
                return s = t.lastIndexOf(".", s - 1) + 1, t.substring(s) || ""
            }, t.getTld = function(t) {
                if (null === e) return null;
                var s = t.lastIndexOf("."),
                    n = t.substring(s + 1);
                return e[n.toLowerCase()] ? i.get(t) || n : n
            }, t
        }();
    s.KEY = "Domains", t.Domain = s
}(Fabrique || (Fabrique = {}));
var Fabrique;
! function(t) {
    var e = function() {
        function e() {}
        return e.getSourceSite = function(i) {
            void 0 === i && (i = !1);
            var s = document.referrer || window.location.host;
            if (i && (s = window.location.host), s = decodeURIComponent(s), t.Branding.isBild()) return "bildspielt.de";
            if (t.Branding.isBip()) return "bipgaming.com";
            t.Branding.isSpil() && (s = e.getReferrer(s)), s = (s = s.indexOf("://") > -1 ? s.split("/")[2] : s.split("/")[0]).split(":")[0];
            var n = t.Domain.getDomain(s);
            return null !== n ? n : (3 === s.split(".").length && (s = s.substr(s.indexOf(".") + 1)), s)
        }, e.getBrandingDomain = function() {
            if (!1 !== t.SplashScreen.Preloader.SPLASH_OVERRIDE) return t.SplashScreen.Preloader.SPLASH_OVERRIDE;
            var i = e.getSourceSite();
            if (t.Branding.isAdmeen()) return t.BrandingDomain.Admeen;
            switch (i) {
                case "spele.nl":
                    return t.BrandingDomain.Spele;
                case "yepi.com":
                    return t.BrandingDomain.Yepi;
                case "oyunskor.com":
                case "barbioyunu.com.tr":
                case "bebekoyunu.com.tr":
                case "oyunkolu.com":
                case "oyungemisi.com":
                case "oyunlar1.com":
                case "oyunkuzusu.com":
                case "kraloyun.com":
                case "rekoroyun.com":
                case "oyundedem.com":
                case "oyunoyna.com":
                case "pastaoyunu.com.tr":
                case "playcell.com":
                    return t.BrandingDomain.PlayCell;
                case "gamecell.com":
                    return t.BrandingDomain.GameCell;
                case "playxl.com":
                    return t.BrandingDomain.Admeen;
                default:
                case "kizi.com":
                    return t.BrandingDomain.Kizi;
                case "bildspielt.de":
                    return t.BrandingDomain.Bild;
                case "funnygames.nl":
                    return t.BrandingDomain.Funnygames
            }
        }, e.getReferrer = function(t) {
            return -1 !== t.indexOf("?ref=") ? t.substr(t.indexOf("?ref=") + 5) : t
        }, e.inIframe = function() {
            try {
                return window.self !== window.top
            } catch (t) {
                return !0
            }
        }, e.getDomain = function(t) {
            var e = document.createElement("a");
            return e.href = t, e.origin
        }, e.isOnDevice = function(t) {
            return !(!t.device.cordova && !t.device.crosswalk) && !/(gamedistribution\.com)/.test(window.location.hostname)
        }, e.isTc = function() {
            return /(teamcity\.ds\.orangegames\.com)/.test(window.location.host)
        }, e.getRandomRange = function(t, e) {
            return Math.random() * (e - t) + t | 0
        }, e.intTimeToString = function(t) {
            var e = Math.floor(t / 3600),
                i = Math.floor(t % 3600 / 60),
                s = t % 60;
            return (e < 10 ? "0" + e : e.toString()) + ":" + (i < 10 ? "0" + i : i.toString()) + ":" + (s < 10 ? "0" + s : s.toString())
        }, e.registerAudioUnlocker = function(t) {
            t.device.android && t.device.chrome && t.device.chromeVersion >= 55 && (t.sound.touchLocked = !0, t.input.touch.addTouchLockCallback(function() {
                if (this.noAudio || !this.touchLocked || null !== this._unlockSource) return !0;
                if (this.usingWebAudio) {
                    var t = this.context.createBuffer(1, 1, 22050);
                    this._unlockSource = this.context.createBufferSource(), this._unlockSource.buffer = t, this._unlockSource.connect(this.context.destination), void 0 === this._unlockSource.start ? this._unlockSource.noteOn(0) : this._unlockSource.start(0), "suspended" === this._unlockSource.context.state && this._unlockSource.context.resume()
                }
                return !0
            }, t.sound, !0))
        }, e
    }();
    e.ASSET_LOCATION = "./splash/assets/", t.Utils = e
}(Fabrique || (Fabrique = {}));
var CryptoJS = CryptoJS || function(t, e) {
    var i = {},
        s = i.lib = {},
        n = function() {},
        a = s.Base = {
            extend: function(t) {
                n.prototype = this;
                var e = new n;
                return t && e.mixIn(t), e.hasOwnProperty("init") || (e.init = function() {
                    e.$super.init.apply(this, arguments)
                }), e.init.prototype = e, e.$super = this, e
            },
            create: function() {
                var t = this.extend();
                return t.init.apply(t, arguments), t
            },
            init: function() {},
            mixIn: function(t) {
                for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);
                t.hasOwnProperty("toString") && (this.toString = t.toString)
            },
            clone: function() {
                return this.init.prototype.extend(this)
            }
        },
        o = s.WordArray = a.extend({
            init: function(t, e) {
                t = this.words = t || [], this.sigBytes = void 0 != e ? e : 4 * t.length
            },
            toString: function(t) {
                return (t || h).stringify(this)
            },
            concat: function(t) {
                var e = this.words,
                    i = t.words,
                    s = this.sigBytes;
                if (t = t.sigBytes, this.clamp(), s % 4)
                    for (var n = 0; t > n; n++) e[s + n >>> 2] |= (i[n >>> 2] >>> 24 - n % 4 * 8 & 255) << 24 - (s + n) % 4 * 8;
                else if (65535 < i.length)
                    for (n = 0; t > n; n += 4) e[s + n >>> 2] = i[n >>> 2];
                else e.push.apply(e, i);
                return this.sigBytes += t, this
            },
            clamp: function() {
                var e = this.words,
                    i = this.sigBytes;
                e[i >>> 2] &= 4294967295 << 32 - i % 4 * 8, e.length = t.ceil(i / 4)
            },
            clone: function() {
                var t = a.clone.call(this);
                return t.words = this.words.slice(0), t
            },
            random: function(e) {
                for (var i = [], s = 0; e > s; s += 4) i.push(4294967296 * t.random() | 0);
                return new o.init(i, e)
            }
        }),
        r = i.enc = {},
        h = r.Hex = {
            stringify: function(t) {
                var e = t.words;
                t = t.sigBytes;
                for (var i = [], s = 0; t > s; s++) {
                    var n = e[s >>> 2] >>> 24 - s % 4 * 8 & 255;
                    i.push((n >>> 4).toString(16)), i.push((15 & n).toString(16))
                }
                return i.join("")
            },
            parse: function(t) {
                for (var e = t.length, i = [], s = 0; e > s; s += 2) i[s >>> 3] |= parseInt(t.substr(s, 2), 16) << 24 - s % 8 * 4;
                return new o.init(i, e / 2)
            }
        },
        l = r.Latin1 = {
            stringify: function(t) {
                var e = t.words;
                t = t.sigBytes;
                for (var i = [], s = 0; t > s; s++) i.push(String.fromCharCode(e[s >>> 2] >>> 24 - s % 4 * 8 & 255));
                return i.join("")
            },
            parse: function(t) {
                for (var e = t.length, i = [], s = 0; e > s; s++) i[s >>> 2] |= (255 & t.charCodeAt(s)) << 24 - s % 4 * 8;
                return new o.init(i, e)
            }
        },
        c = r.Utf8 = {
            stringify: function(t) {
                try {
                    return decodeURIComponent(escape(l.stringify(t)))
                } catch (t) {
                    throw Error("Malformed UTF-8 data")
                }
            },
            parse: function(t) {
                return l.parse(unescape(encodeURIComponent(t)))
            }
        },
        u = s.BufferedBlockAlgorithm = a.extend({
            reset: function() {
                this._data = new o.init, this._nDataBytes = 0
            },
            _append: function(t) {
                "string" == typeof t && (t = c.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes
            },
            _process: function(e) {
                var i = this._data,
                    s = i.words,
                    n = i.sigBytes,
                    a = this.blockSize,
                    r = n / (4 * a);
                if (e = (r = e ? t.ceil(r) : t.max((0 | r) - this._minBufferSize, 0)) * a, n = t.min(4 * e, n), e) {
                    for (var h = 0; e > h; h += a) this._doProcessBlock(s, h);
                    h = s.splice(0, e), i.sigBytes -= n
                }
                return new o.init(h, n)
            },
            clone: function() {
                var t = a.clone.call(this);
                return t._data = this._data.clone(), t
            },
            _minBufferSize: 0
        });
    s.Hasher = u.extend({
        cfg: a.extend(),
        init: function(t) {
            this.cfg = this.cfg.extend(t), this.reset()
        },
        reset: function() {
            u.reset.call(this), this._doReset()
        },
        update: function(t) {
            return this._append(t), this._process(), this
        },
        finalize: function(t) {
            return t && this._append(t), this._doFinalize()
        },
        blockSize: 16,
        _createHelper: function(t) {
            return function(e, i) {
                return new t.init(i).finalize(e)
            }
        },
        _createHmacHelper: function(t) {
            return function(e, i) {
                return new d.HMAC.init(t, i).finalize(e)
            }
        }
    });
    var d = i.algo = {};
    return i
}(Math);
! function(t) {
    for (var e = CryptoJS, i = (n = e.lib).WordArray, s = n.Hasher, n = e.algo, a = [], o = [], r = function(t) {
        return 4294967296 * (t - (0 | t)) | 0
    }, h = 2, l = 0; 64 > l;) {
        var c;
        t: {
            c = h;
            for (var u = t.sqrt(c), d = 2; u >= d; d++)
                if (!(c % d)) {
                    c = !1;
                    break t
                }
            c = !0
        }
        c && (8 > l && (a[l] = r(t.pow(h, .5))), o[l] = r(t.pow(h, 1 / 3)), l++), h++
    }
    var p = [],
        n = n.SHA256 = s.extend({
            _doReset: function() {
                this._hash = new i.init(a.slice(0))
            },
            _doProcessBlock: function(t, e) {
                for (var i = this._hash.words, s = i[0], n = i[1], a = i[2], r = i[3], h = i[4], l = i[5], c = i[6], u = i[7], d = 0; 64 > d; d++) {
                    if (16 > d) p[d] = 0 | t[e + d];
                    else {
                        var m = p[d - 15],
                            g = p[d - 2];
                        p[d] = ((m << 25 | m >>> 7) ^ (m << 14 | m >>> 18) ^ m >>> 3) + p[d - 7] + ((g << 15 | g >>> 17) ^ (g << 13 | g >>> 19) ^ g >>> 10) + p[d - 16]
                    }
                    m = u + ((h << 26 | h >>> 6) ^ (h << 21 | h >>> 11) ^ (h << 7 | h >>> 25)) + (h & l ^ ~h & c) + o[d] + p[d], g = ((s << 30 | s >>> 2) ^ (s << 19 | s >>> 13) ^ (s << 10 | s >>> 22)) + (s & n ^ s & a ^ n & a), u = c, c = l, l = h, h = r + m | 0, r = a, a = n, n = s, s = m + g | 0
                }
                i[0] = i[0] + s | 0, i[1] = i[1] + n | 0, i[2] = i[2] + a | 0, i[3] = i[3] + r | 0, i[4] = i[4] + h | 0, i[5] = i[5] + l | 0, i[6] = i[6] + c | 0, i[7] = i[7] + u | 0
            },
            _doFinalize: function() {
                var e = this._data,
                    i = e.words,
                    s = 8 * this._nDataBytes,
                    n = 8 * e.sigBytes;
                return i[n >>> 5] |= 128 << 24 - n % 32, i[14 + (n + 64 >>> 9 << 4)] = t.floor(s / 4294967296), i[15 + (n + 64 >>> 9 << 4)] = s, e.sigBytes = 4 * i.length, this._process(), this._hash
            },
            clone: function() {
                var t = s.clone.call(this);
                return t._hash = this._hash.clone(), t
            }
        });
    e.SHA256 = s._createHelper(n), e.HmacSHA256 = s._createHmacHelper(n)
}(Math),
function() {
    var t = CryptoJS,
        e = t.enc.Utf8;
    t.algo.HMAC = t.lib.Base.extend({
        init: function(t, i) {
            t = this._hasher = new t.init, "string" == typeof i && (i = e.parse(i));
            var s = t.blockSize,
                n = 4 * s;
            i.sigBytes > n && (i = t.finalize(i)), i.clamp();
            for (var a = this._oKey = i.clone(), o = this._iKey = i.clone(), r = a.words, h = o.words, l = 0; s > l; l++) r[l] ^= 1549556828, h[l] ^= 909522486;
            a.sigBytes = o.sigBytes = n, this.reset()
        },
        reset: function() {
            var t = this._hasher;
            t.reset(), t.update(this._iKey)
        },
        update: function(t) {
            return this._hasher.update(t), this
        },
        finalize: function(t) {
            var e = this._hasher;
            return t = e.finalize(t), e.reset(), e.finalize(this._oKey.clone().concat(t))
        }
    })
}(),
function() {
    var t = CryptoJS,
        e = t.lib.WordArray;
    t.enc.Base64 = {
        stringify: function(t) {
            var e = t.words,
                i = t.sigBytes,
                s = this._map;
            t.clamp(), t = [];
            for (var n = 0; i > n; n += 3)
                for (var a = (e[n >>> 2] >>> 24 - n % 4 * 8 & 255) << 16 | (e[n + 1 >>> 2] >>> 24 - (n + 1) % 4 * 8 & 255) << 8 | e[n + 2 >>> 2] >>> 24 - (n + 2) % 4 * 8 & 255, o = 0; 4 > o && i > n + .75 * o; o++) t.push(s.charAt(a >>> 6 * (3 - o) & 63));
            if (e = s.charAt(64))
                for (; t.length % 4;) t.push(e);
            return t.join("")
        },
        parse: function(t) {
            var i = t.length,
                s = this._map;
            (n = s.charAt(64)) && -1 != (n = t.indexOf(n)) && (i = n);
            for (var n = [], a = 0, o = 0; i > o; o++)
                if (o % 4) {
                    var r = s.indexOf(t.charAt(o - 1)) << o % 4 * 2,
                        h = s.indexOf(t.charAt(o)) >>> 6 - o % 4 * 2;
                    n[a >>> 2] |= (r | h) << 24 - a % 4 * 8, a++
                }
            return e.create(n, a)
        },
        _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
    }
}();
var GA;
! function(t) {
    ! function(t) {
        t[t.ios = 0] = "ios", t[t.android = 1] = "android", t[t.windows = 2] = "windows", t[t.windows_phone = 3] = "windows_phone", t[t.blackberry = 4] = "blackberry", t[t.roku = 5] = "roku", t[t.tizen = 6] = "tizen", t[t.nacl = 7] = "nacl", t[t.mac_osx = 8] = "mac_osx", t[t.webplayer = 9] = "webplayer"
    }(t.Platform || (t.Platform = {})), t.Platform,
        function(t) {
            t[t.male = 0] = "male", t[t.female = 1] = "female"
        }(t.Gender || (t.Gender = {})), t.Gender
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = /^[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}:[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}$/,
            i = function() {
                return function(t, i, s, n, a, o) {
                    if (this.category = 1, this.transaction_num = 0, !t || null === t.match(e)) throw new Error("Invalid event_id supplied for BusinessEvent");
                    if (this.event_id = t, this.amount = i, !s || null === s.match(/^[A-Z]{3}$/)) throw new Error("Invalid currency supplied for BusinessEvent");
                    if (this.currency = s, this.transaction_num = n, a) {
                        if (a.length > 32) throw new Error("A too long cart_type was supplied, should be max 32 characters");
                        this.cart_type = a
                    }
                    void 0 !== o && (this.receipt_info = o)
                }
            }();
        t.Business = i
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = /^[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}(:[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}){0,4}$/,
            i = function() {
                return function(t, i) {
                    if (this.category = 0, null === t.match(e)) throw new Error("Invalid event_id supplied for DesignEvent");
                    this.event_id = t, void 0 !== i && (this.value = i)
                }
            }();
        t.Design = i
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        ! function(t) {
            t[t.design = 0] = "design", t[t.business = 1] = "business", t[t.error = 2] = "error", t[t.user = 3] = "user", t[t.session_end = 4] = "session_end", t[t.progression = 5] = "progression", t[t.resource = 6] = "resource"
        }(t.Category || (t.Category = {})), t.Category
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        ! function(t) {
            t[t.debug = 0] = "debug", t[t.info = 1] = "info", t[t.warning = 2] = "warning", t[t.error = 3] = "error", t[t.critical = 4] = "critical"
        }(t.ErrorSeverity || (t.ErrorSeverity = {}));
        var e = t.ErrorSeverity,
            i = function() {
                return function(t, i) {
                    this.category = 2, this.message = "", this.severity = e[t], void 0 !== i && (this.message = i.substr(0, 8192))
                }
            }();
        t.Exception = i
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = function() {
            return function() {}
        }();
        t.InitResponse = e;
        var i = function() {
            function t(t) {
                this.data = t
            }
            return t.prototype.toString = function() {
                return JSON.stringify(this.data)
            }, t
        }();
        t.Init = i
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = /^(Start|Fail|Complete):[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}(:[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}){0,2}$/,
            i = function() {
                return function(t, i, s) {
                    if (this.category = 5, null === t.match(e)) throw new Error("Invalid event_id supplied for ProgressionEvent");
                    this.event_id = t, void 0 !== i && (this.attempt_num = i), void 0 !== s && (this.score = s)
                }
            }();
        t.Progression = i
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = /^(Sink|Source):[A-Za-z]{1,64}:[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}:[A-Za-z0-9\\s\\-_\\.\\(\\)\\!\\?]{1,64}/,
            i = function() {
                return function(t, i) {
                    if (this.category = 6, null === t.match(e)) throw new Error("Invalid event_id supplied for ResourceEvent");
                    this.event_id = t, this.amount = i
                }
            }();
        t.Resource = i
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = function() {
            return function(t) {
                this.category = 4, this.length = 0, this.length = t
            }
        }();
        t.SessionEnd = e
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = function() {
            return function() {
                this.category = 3
            }
        }();
        t.User = e
    }(t.Events || (t.Events = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    t.getInstance = function() {
        return null === e.instance && (e.instance = new e), e.instance
    };
    var e = function() {
        function e() {
            this.sessionId = t.Utils.createUniqueId(), this.messageQueue = new t.Utils.MessageQueue, this.enabled = !1, this.initProcessed = !1, this.timeoutId = 0, this.timeOffset = 0
        }
        return e.prototype.init = function(i, s, n, a) {
            var o = this;
            if (null === e.instance) throw new Error("No instance Available!");
            this.gameKey = i, this.secretKey = s, this.build = n, this.user = a, this.incrementSessionNum(a);
            var r = new t.Events.Init(t.Utils.getBaseAnnotations());
            return this.sendEvent(r.toString(), "init", function(t) {
                o.initProcessed = !0, !0 === t.enabled && (o.enabled = !0, o.timeOffset = (Date.now() / 1e3 | 0) - t.server_ts)
            }), this.scheduleSendData(e.SCHEDULE_TIME), window.addEventListener("beforeunload", function() {
                o.sendData()
            }), this
        }, e.prototype.incrementSessionNum = function(e) {
            var i = t.Utils.LocalStorage.getItem(e.user_id);
            i ? t.Utils.LocalStorage.setItem(e.user_id, (parseInt(i) + 1).toString()) : (i = "1", t.Utils.LocalStorage.setItem(e.user_id, i))
        }, e.prototype.addEvent = function(i) {
            if (null === e.instance) throw new Error("No instance Available!");
            var s = new t.Utils.Message(i, t.Utils.getDefaultAnnotations(this.user, this.sessionId, this.build, this.timeOffset));
            return this.messageQueue.push(s), this
        }, e.prototype.sendData = function() {
            if (!1 === this.initProcessed) return this.scheduleSendData(1e3), this;
            if (!1 === this.enabled) return this;
            if (null === e.instance) throw new Error("No instance Available!");
            for (var t = [], i = ""; this.messageQueue.length > 0;) {
                var s = this.messageQueue.pop();
                t.push(s.data)
            }
            if (0 === t.length) return this.scheduleSendData(e.SCHEDULE_TIME), this;
            try {
                i = JSON.stringify(t)
            } catch (t) {}
            return this.sendEvent(i, "events"), this.scheduleSendData(e.SCHEDULE_TIME), this
        }, e.prototype.scheduleSendData = function(t) {
            var e = this;
            clearTimeout(this.timeoutId), this.timeoutId = setTimeout(function() {
                e.sendData()
            }, t)
        }, e.prototype.sendEvent = function(i, s, n) {
            if (void 0 === n && (n = null), null === e.instance && null === this.gameKey) throw new Error("No instance Available!");
            if (!(i.length < 1)) {
                var a = CryptoJS.HmacSHA256(i, this.secretKey),
                    o = CryptoJS.enc.Base64.stringify(a),
                    r = e.API_URL + this.gameKey + "/" + s;
                t.Utils.postRequest(r, i, o, function(t) {
                    if (!1 === t.success && window.console, null != n) {
                        var e = "";
                        try {
                            e = JSON.parse(t.message)
                        } catch (t) {}
                        n(e)
                    }
                })
            }
        }, e.SCHEDULE_TIME = 15e3, e.SDK_VERSION = "rest api v2", e.API_URL = ("https:" === document.location.protocol ? "." : ".") + "/v2/", e.instance = null, e
    }();
    t.GameAnalytics = e
}(GA || (GA = {}));
var GA;
! function(t) {
    var e = function() {
        return function(e, i, s, n) {
            if (this.user_id = "", e) this.user_id = e;
            else {
                var a = t.Utils.LocalStorage.getItem("user");
                this.user_id = a || t.Utils.createUniqueUserId()
            }
            i && i.length > 0 && (this.facebook_id = i, this.user_id = i), t.Utils.LocalStorage.setItem("user", this.user_id), 1 !== s && 0 !== s || (this.gender = s), n && n.toString().match(/^[0-9]{4}$/gi) && (this.birth_year = n)
        }
    }();
    t.User = e
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(e) {
        function i(t) {
            var i = e.LocalStorage.getItem(t);
            return i ? parseInt(i) : 1
        }
        e.getDefaultAnnotations = function(e, s, n, a) {
            var o = {
                sdk_version: t.GameAnalytics.SDK_VERSION,
                platform: t.Platform[2],
                os_version: t.Platform[2] + " 8",
                device: "unknown",
                v: 2,
                user_id: e.user_id,
                client_ts: (Date.now() / 1e3 | 0) + a,
                manufacturer: "unknown",
                session_id: s,
                session_num: i(e.user_id),
                build: n
            };
            e.facebook_id && (o.facebook_id = e.facebook_id), 0 !== e.gender && 1 !== e.gender || (o.gender = t.Gender[e.gender]), e.birth_year && (o.birth_year = e.birth_year);
            var r = navigator.userAgent;
            return r.match(/iPad|iPod|iPhone/i) ? (o.platform = t.Platform[0], o.device = r.match(/iPad|iPod|iPhone/i)[0], o.manufacturer = "Apple", o.os_version = t.Platform[0] + " " + r.match(/OS (\b[0-9]+_[0-9]+(?:_[0-9]+)?\b)/)[1].replace(/_/gi, ".")) : r.match(/Android/i) ? (o.platform = t.Platform[1], o.device = r.match(/Mobile/i) ? "Phone" : "Tablet", o.os_version = t.Platform[1], /Firefox/i.test(r) || (o.os_version += " " + r.match(/Android (\d+(?:\.\d+)+);/)[1])) : r.match(/Windows Phone/i) && (o.platform = t.Platform[2], o.device = "Windows Phone", o.os_version = t.Platform[2] + " " + r.match(/Phone (\d+(?:\.\d+)+);/)[1]), o
        }, e.getBaseAnnotations = function() {
            var e = {
                    sdk_version: t.GameAnalytics.SDK_VERSION,
                    platform: "unknown",
                    os_version: "unknown"
                },
                i = navigator.userAgent;
            return i.match(/iPad|iPod|iPhone/i) ? (e.platform = t.Platform[0], e.os_version = t.Platform[0] + " " + i.match(/OS (\b[0-9]+_[0-9]+(?:_[0-9]+)?\b)/)[1].replace(/_/gi, ".")) : i.match(/Android/i) ? (e.platform = t.Platform[1], e.os_version = t.Platform[1], /Firefox/i.test(i) || (e.os_version += " " + i.match(/Android (\d+(?:\.\d+)+);/)[1])) : i.match(/Windows Phone/i) && (e.platform = t.Platform[2], e.os_version = t.Platform[2] + " " + i.match(/Phone (\d+(?:\.\d+)+);/)[1]), e
        }
    }(t.Utils || (t.Utils = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = function() {
            function t() {}
            return t.getItem = function(e) {
                return t.Available ? localStorage.getItem(t.CacheKey + e) : void 0
            }, t.setItem = function(e, i) {
                t.Available && localStorage.setItem(t.CacheKey + e, i)
            }, t.Available = !1, t.CacheKey = "GA:", t
        }();
        t.LocalStorage = e;
        try {
            "object" == typeof localStorage && (localStorage.setItem("testingLocalStorage", "yes"), localStorage.removeItem("testingLocalStorage"), e.Available = !0)
        } catch (t) {}
    }(t.Utils || (t.Utils = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(e) {
        var i = function() {
            function e(t, e) {
                this.event = t, this.annotations = e
            }
            return Object.defineProperty(e.prototype, "data", {
                get: function() {
                    for (var e in this.event) this.event.hasOwnProperty(e) && (this.annotations[e] = "category" === e ? t.Events.Category[this.event[e]] : this.event[e]);
                    return this.annotations
                },
                enumerable: !0,
                configurable: !0
            }), e
        }();
        e.Message = i
    }(t.Utils || (t.Utils = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = function() {
            function t() {
                this.queue = [], this.load()
            }
            return t.prototype.push = function(t) {
                this.queue.push(t)
            }, t.prototype.pop = function() {
                return this.queue.pop()
            }, Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return this.queue.length
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.save = function() {}, t.prototype.load = function() {}, t
        }();
        t.MessageQueue = e
    }(t.Utils || (t.Utils = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        var e = function() {
            return function() {
                this.success = !1, this.message = ""
            }
        }();
        t.Response = e, t.postRequest = function(t, e, i, s) {
            var n;
            if (window.XMLHttpRequest) {
                (n = new XMLHttpRequest).onreadystatechange = function() {
                    4 == n.readyState && (200 === n.status ? s({
                        success: !0,
                        message: n.responseText
                    }) : n.status > 0 && s({
                        success: !1,
                        message: "Error: There was a problem with the request: status " + n.status
                    }))
                };
                try {
                    n.open("POST", t, !0), n.setRequestHeader("Authorization", i), n.setRequestHeader("Content-Type", "application/json"), n.send(e)
                } catch (t) {
                    s({
                        success: !1,
                        message: "Error: Unable to send request, CORS not allowed."
                    })
                }
            } else s({
                success: !1,
                message: "Error: Unable to send request, XMLHttpRequest not supported"
            })
        }
    }(t.Utils || (t.Utils = {}))
}(GA || (GA = {}));
var GA;
! function(t) {
    ! function(t) {
        function e() {
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
                var e = 16 * Math.random() | 0;
                return ("x" == t ? e : 3 & e | 8).toString(16)
            })
        }
        t.createUniqueId = e, t.createUniqueUserId = function() {
            return e()
        }
    }(t.Utils || (t.Utils = {}))
}(GA || (GA = {})),
function() {
    function t(t, e, i) {
        return t.call.apply(t.bind, arguments)
    }

    function e(t, e, i) {
        if (!t) throw Error();
        if (2 < arguments.length) {
            var s = Array.prototype.slice.call(arguments, 2);
            return function() {
                var i = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(i, s), t.apply(e, i)
            }
        }
        return function() {
            return t.apply(e, arguments)
        }
    }

    function i(s, n, a) {
        return (i = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? t : e).apply(null, arguments)
    }

    function s(t, e) {
        this.a = t, this.o = e || t, this.c = this.o.document
    }

    function n(t, e, i, s) {
        if (e = t.c.createElement(e), i)
            for (var n in i) i.hasOwnProperty(n) && ("style" == n ? e.style.cssText = i[n] : e.setAttribute(n, i[n]));
        return s && e.appendChild(t.c.createTextNode(s)), e
    }

    function a(t, e, i) {
        (t = t.c.getElementsByTagName(e)[0]) || (t = document.documentElement), t.insertBefore(i, t.lastChild)
    }

    function o(t) {
        t.parentNode && t.parentNode.removeChild(t)
    }

    function r(t, e, i) {
        e = e || [], i = i || [];
        for (var s = t.className.split(/\s+/), n = 0; n < e.length; n += 1) {
            for (var a = !1, o = 0; o < s.length; o += 1)
                if (e[n] === s[o]) {
                    a = !0;
                    break
                }
            a || s.push(e[n])
        }
        for (e = [], n = 0; n < s.length; n += 1) {
            for (a = !1, o = 0; o < i.length; o += 1)
                if (s[n] === i[o]) {
                    a = !0;
                    break
                }
            a || e.push(s[n])
        }
        t.className = e.join(" ").replace(/\s+/g, " ").replace(/^\s+|\s+$/, "")
    }

    function h(t, e) {
        for (var i = t.className.split(/\s+/), s = 0, n = i.length; s < n; s++)
            if (i[s] == e) return !0;
        return !1
    }

    function l(t) {
        return t.o.location.hostname || t.a.location.hostname
    }

    function c(t, e, i) {
        function s() {
            l && o && r && (l(h), l = null)
        }
        e = n(t, "link", {
            rel: "stylesheet",
            href: e,
            media: "all"
        });
        var o = !1,
            r = !0,
            h = null,
            l = i || null;
        et ? (e.onload = function() {
            o = !0, s()
        }, e.onerror = function() {
            o = !0, h = Error("Stylesheet failed to load"), s()
        }) : setTimeout(function() {
            o = !0, s()
        }, 0), a(t, "head", e)
    }

    function u(t, e, i, s) {
        var a = t.c.getElementsByTagName("head")[0];
        if (a) {
            var o = n(t, "script", {
                    src: e
                }),
                r = !1;
            return o.onload = o.onreadystatechange = function() {
                r || this.readyState && "loaded" != this.readyState && "complete" != this.readyState || (r = !0, i && i(null), o.onload = o.onreadystatechange = null, "HEAD" == o.parentNode.tagName && a.removeChild(o))
            }, a.appendChild(o), setTimeout(function() {
                r || (r = !0, i && i(Error("Script load timeout")))
            }, s || 5e3), o
        }
        return null
    }

    function d() {
        this.a = 0, this.c = null
    }

    function p(t) {
        return t.a++,
            function() {
                t.a--, g(t)
            }
    }

    function m(t, e) {
        t.c = e, g(t)
    }

    function g(t) {
        0 == t.a && t.c && (t.c(), t.c = null)
    }

    function f(t) {
        this.a = t || "-"
    }

    function _(t, e) {
        this.c = t, this.f = 4, this.a = "n";
        var i = (e || "n4").match(/^([nio])([1-9])$/i);
        i && (this.a = i[1], this.f = parseInt(i[2], 10))
    }

    function y(t) {
        return S(t) + " " + t.f + "00 300px " + v(t.c)
    }

    function v(t) {
        var e = [];
        t = t.split(/,\s*/);
        for (var i = 0; i < t.length; i++) {
            var s = t[i].replace(/['"]/g, ""); - 1 != s.indexOf(" ") || /^\d/.test(s) ? e.push("'" + s + "'") : e.push(s)
        }
        return e.join(",")
    }

    function b(t) {
        return t.a + t.f
    }

    function S(t) {
        var e = "normal";
        return "o" === t.a ? e = "oblique" : "i" === t.a && (e = "italic"), e
    }

    function T(t) {
        var e = 4,
            i = "n",
            s = null;
        return t && ((s = t.match(/(normal|oblique|italic)/i)) && s[1] && (i = s[1].substr(0, 1).toLowerCase()), (s = t.match(/([1-9]00|normal|bold)/i)) && s[1] && (/bold/i.test(s[1]) ? e = 7 : /[1-9]00/.test(s[1]) && (e = parseInt(s[1].substr(0, 1), 10)))), i + e
    }

    function E(t, e) {
        this.c = t, this.f = t.o.document.documentElement, this.h = e, this.a = new f("-"), this.j = !1 !== e.events, this.g = !1 !== e.classes
    }

    function P(t) {
        t.g && r(t.f, [t.a.c("wf", "loading")]), I(t, "loading")
    }

    function A(t) {
        if (t.g) {
            var e = h(t.f, t.a.c("wf", "active")),
                i = [],
                s = [t.a.c("wf", "loading")];
            e || i.push(t.a.c("wf", "inactive")), r(t.f, i, s)
        }
        I(t, "inactive")
    }

    function I(t, e, i) {
        t.j && t.h[e] && (i ? t.h[e](i.c, b(i)) : t.h[e]())
    }

    function C() {
        this.c = {}
    }

    function x(t, e, i) {
        var s, n = [];
        for (s in e)
            if (e.hasOwnProperty(s)) {
                var a = t.c[s];
                a && n.push(a(e[s], i))
            }
        return n
    }

    function w(t, e) {
        this.c = t, this.f = e, this.a = n(this.c, "span", {
            "aria-hidden": "true"
        }, this.f)
    }

    function M(t) {
        a(t.c, "body", t.a)
    }

    function O(t) {
        return "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + v(t.c) + ";font-style:" + S(t) + ";font-weight:" + t.f + "00;"
    }

    function L(t, e, i, s, n, a) {
        this.g = t, this.j = e, this.a = s, this.c = i, this.f = n || 3e3, this.h = a || void 0
    }

    function N(t, e, i, s, n, a, o) {
        this.v = t, this.B = e, this.c = i, this.a = s, this.s = o || "BESbswy", this.f = {}, this.w = n || 3e3, this.u = a || null, this.m = this.j = this.h = this.g = null, this.g = new w(this.c, this.s), this.h = new w(this.c, this.s), this.j = new w(this.c, this.s), this.m = new w(this.c, this.s), t = O(t = new _(this.a.c + ",serif", b(this.a))), this.g.a.style.cssText = t, t = O(t = new _(this.a.c + ",sans-serif", b(this.a))), this.h.a.style.cssText = t, t = O(t = new _("serif", b(this.a))), this.j.a.style.cssText = t, t = O(t = new _("sans-serif", b(this.a))), this.m.a.style.cssText = t, M(this.g), M(this.h), M(this.j), M(this.m)
    }

    function k() {
        if (null === st) {
            var t = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);
            st = !!t && (536 > parseInt(t[1], 10) || 536 === parseInt(t[1], 10) && 11 >= parseInt(t[2], 10))
        }
        return st
    }

    function R(t, e, i) {
        for (var s in it)
            if (it.hasOwnProperty(s) && e === t.f[it[s]] && i === t.f[it[s]]) return !0;
        return !1
    }

    function D(t) {
        var e, i = t.g.a.offsetWidth,
            s = t.h.a.offsetWidth;
        (e = i === t.f.serif && s === t.f["sans-serif"]) || (e = k() && R(t, i, s)), e ? tt() - t.A >= t.w ? k() && R(t, i, s) && (null === t.u || t.u.hasOwnProperty(t.a.c)) ? B(t, t.v) : B(t, t.B) : G(t) : B(t, t.v)
    }

    function G(t) {
        setTimeout(i(function() {
            D(this)
        }, t), 50)
    }

    function B(t, e) {
        setTimeout(i(function() {
            o(this.g.a), o(this.h.a), o(this.j.a), o(this.m.a), e(this.a)
        }, t), 0)
    }

    function F(t, e, i) {
        this.c = t, this.a = e, this.f = 0, this.m = this.j = !1, this.s = i
    }

    function U(t) {
        0 == --t.f && t.j && (t.m ? ((t = t.a).g && r(t.f, [t.a.c("wf", "active")], [t.a.c("wf", "loading"), t.a.c("wf", "inactive")]), I(t, "active")) : A(t.a))
    }

    function H(t) {
        this.j = t, this.a = new C, this.h = 0, this.f = this.g = !0
    }

    function Y(t, e, s, n, a) {
        var o = 0 == --t.h;
        (t.f || t.g) && setTimeout(function() {
            var t = a || null,
                h = n || null || {};
            if (0 === s.length && o) A(e.a);
            else {
                e.f += s.length, o && (e.j = o);
                var l, c = [];
                for (l = 0; l < s.length; l++) {
                    var u = s[l],
                        d = h[u.c],
                        p = e.a,
                        m = u;
                    if (p.g && r(p.f, [p.a.c("wf", m.c, b(m).toString(), "loading")]), I(p, "fontloading", m), p = null, null === nt)
                        if (window.FontFace) {
                            var m = /Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),
                                g = /OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent) && /Apple/.exec(window.navigator.vendor);
                            nt = m ? 42 < parseInt(m[1], 10) : !g
                        } else nt = !1;
                    p = nt ? new L(i(e.g, e), i(e.h, e), e.c, u, e.s, d) : new N(i(e.g, e), i(e.h, e), e.c, u, e.s, t, d), c.push(p)
                }
                for (l = 0; l < c.length; l++) c[l].start()
            }
        }, 0)
    }

    function W(t, e, i) {
        var s = [],
            n = i.timeout;
        P(e);
        var s = x(t.a, i, t.c),
            a = new F(t.c, e, n);
        for (t.h = s.length, e = 0, i = s.length; e < i; e++) s[e].load(function(e, i, s) {
            Y(t, a, e, i, s)
        })
    }

    function j(t, e) {
        this.c = t, this.a = e
    }

    function X(t, e) {
        this.c = t, this.a = e
    }

    function z(t, e) {
        this.c = t || at, this.a = [], this.f = [], this.g = e || ""
    }

    function K(t, e) {
        for (var i = e.length, s = 0; s < i; s++) {
            var n = e[s].split(":");
            3 == n.length && t.f.push(n.pop());
            var a = "";
            2 == n.length && "" != n[1] && (a = ":"), t.a.push(n.join(a))
        }
    }

    function V(t) {
        if (0 == t.a.length) throw Error("No fonts to load!");
        if (-1 != t.c.indexOf("kit=")) return t.c;
        for (var e = t.a.length, i = [], s = 0; s < e; s++) i.push(t.a[s].replace(/ /g, "+"));
        return e = t.c + "?family=" + i.join("%7C"), 0 < t.f.length && (e += "&subset=" + t.f.join(",")), 0 < t.g.length && (e += "&text=" + encodeURIComponent(t.g)), e
    }

    function q(t) {
        this.f = t, this.a = [], this.c = {}
    }

    function J(t) {
        for (var e = t.f.length, i = 0; i < e; i++) {
            var s = t.f[i].split(":"),
                n = s[0].replace(/\+/g, " "),
                a = ["n4"];
            if (2 <= s.length) {
                var o;
                if (o = [], r = s[1])
                    for (var r = r.split(","), h = r.length, l = 0; l < h; l++) {
                        var c;
                        if ((c = r[l]).match(/^[\w-]+$/))
                            if (null == (d = lt.exec(c.toLowerCase()))) c = "";
                            else {
                                if (c = d[2], c = null == c || "" == c ? "n" : ht[c], null == (d = d[1]) || "" == d) d = "4";
                                else var u = rt[d],
                                    d = u || (isNaN(d) ? "4" : d.substr(0, 1));
                                c = [c, d].join("")
                            } else c = "";
                        c && o.push(c)
                    }
                0 < o.length && (a = o), 3 == s.length && (s = s[2], o = [], 0 < (s = s ? s.split(",") : o).length && (s = ot[s[0]]) && (t.c[n] = s))
            }
            for (t.c[n] || (s = ot[n]) && (t.c[n] = s), s = 0; s < a.length; s += 1) t.a.push(new _(n, a[s]))
        }
    }

    function Z(t, e) {
        this.c = t, this.a = e
    }

    function Q(t, e) {
        this.c = t, this.a = e
    }

    function $(t, e) {
        this.c = t, this.f = e, this.a = []
    }
    var tt = Date.now || function() {
            return +new Date
        },
        et = !!window.FontFace;
    f.prototype.c = function(t) {
        for (var e = [], i = 0; i < arguments.length; i++) e.push(arguments[i].replace(/[\W_]+/g, "").toLowerCase());
        return e.join(this.a)
    }, L.prototype.start = function() {
        var t = this.c.o.document,
            e = this,
            i = tt(),
            s = new Promise(function(s, n) {
                function a() {
                    tt() - i >= e.f ? n() : t.fonts.load(y(e.a), e.h).then(function(t) {
                        1 <= t.length ? s() : setTimeout(a, 25)
                    }, function() {
                        n()
                    })
                }
                a()
            }),
            n = null,
            a = new Promise(function(t, i) {
                n = setTimeout(i, e.f)
            });
        Promise.race([a, s]).then(function() {
            n && (clearTimeout(n), n = null), e.g(e.a)
        }, function() {
            e.j(e.a)
        })
    };
    var it = {
            D: "serif",
            C: "sans-serif"
        },
        st = null;
    N.prototype.start = function() {
        this.f.serif = this.j.a.offsetWidth, this.f["sans-serif"] = this.m.a.offsetWidth, this.A = tt(), D(this)
    };
    var nt = null;
    F.prototype.g = function(t) {
        var e = this.a;
        e.g && r(e.f, [e.a.c("wf", t.c, b(t).toString(), "active")], [e.a.c("wf", t.c, b(t).toString(), "loading"), e.a.c("wf", t.c, b(t).toString(), "inactive")]), I(e, "fontactive", t), this.m = !0, U(this)
    }, F.prototype.h = function(t) {
        var e = this.a;
        if (e.g) {
            var i = h(e.f, e.a.c("wf", t.c, b(t).toString(), "active")),
                s = [],
                n = [e.a.c("wf", t.c, b(t).toString(), "loading")];
            i || s.push(e.a.c("wf", t.c, b(t).toString(), "inactive")), r(e.f, s, n)
        }
        I(e, "fontinactive", t), U(this)
    }, H.prototype.load = function(t) {
        this.c = new s(this.j, t.context || this.j), this.g = !1 !== t.events, this.f = !1 !== t.classes, W(this, new E(this.c, t), t)
    }, j.prototype.load = function(t) {
        function e() {
            if (a["__mti_fntLst" + s]) {
                var i, n = a["__mti_fntLst" + s](),
                    o = [];
                if (n)
                    for (var r = 0; r < n.length; r++) {
                        var h = n[r].fontfamily;
                        void 0 != n[r].fontStyle && void 0 != n[r].fontWeight ? (i = n[r].fontStyle + n[r].fontWeight, o.push(new _(h, i))) : o.push(new _(h))
                    }
                t(o)
            } else setTimeout(function() {
                e()
            }, 50)
        }
        var i = this,
            s = i.a.projectId,
            n = i.a.version;
        if (s) {
            var a = i.c.o;
            u(this.c, (i.a.api || "https://fast.fonts.net/jsapi") + "/" + s + ".js" + (n ? "?v=" + n : ""), function(n) {
                n ? t([]) : (a["__MonotypeConfiguration__" + s] = function() {
                    return i.a
                }, e())
            }).id = "__MonotypeAPIScript__" + s
        } else t([])
    }, X.prototype.load = function(t) {
        var e, i, s = this.a.urls || [],
            n = this.a.families || [],
            a = this.a.testStrings || {},
            o = new d;
        for (e = 0, i = s.length; e < i; e++) c(this.c, s[e], p(o));
        var r = [];
        for (e = 0, i = n.length; e < i; e++)
            if ((s = n[e].split(":"))[1])
                for (var h = s[1].split(","), l = 0; l < h.length; l += 1) r.push(new _(s[0], h[l]));
            else r.push(new _(s[0]));
        m(o, function() {
            t(r, a)
        })
    };
    var at = "https://fonts.googleapis.com/css",
        ot = {
            latin: "BESbswy",
            "latin-ext": "çöüğş",
            cyrillic: "йяЖ",
            greek: "αβΣ",
            khmer: "កខគ",
            Hanuman: "កខគ"
        },
        rt = {
            thin: "1",
            extralight: "2",
            "extra-light": "2",
            ultralight: "2",
            "ultra-light": "2",
            light: "3",
            regular: "4",
            book: "4",
            medium: "5",
            "semi-bold": "6",
            semibold: "6",
            "demi-bold": "6",
            demibold: "6",
            bold: "7",
            "extra-bold": "8",
            extrabold: "8",
            "ultra-bold": "8",
            ultrabold: "8",
            black: "9",
            heavy: "9",
            l: "3",
            r: "4",
            b: "7"
        },
        ht = {
            i: "i",
            italic: "i",
            n: "n",
            normal: "n"
        },
        lt = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,
        ct = {
            Arimo: !0,
            Cousine: !0,
            Tinos: !0
        };
    Z.prototype.load = function(t) {
        var e = new d,
            i = this.c,
            s = new z(this.a.api, this.a.text),
            n = this.a.families;
        K(s, n);
        var a = new q(n);
        J(a), c(i, V(s), p(e)), m(e, function() {
            t(a.a, a.c, ct)
        })
    }, Q.prototype.load = function(t) {
        var e = this.a.id,
            i = this.c.o;
        e ? u(this.c, (this.a.api || "https://use.typekit.net") + "/" + e + ".js", function(e) {
            if (e) t([]);
            else if (i.Typekit && i.Typekit.config && i.Typekit.config.fn) {
                e = i.Typekit.config.fn;
                for (var s = [], n = 0; n < e.length; n += 2)
                    for (var a = e[n], o = e[n + 1], r = 0; r < o.length; r++) s.push(new _(a, o[r]));
                try {
                    i.Typekit.load({
                        events: !1,
                        classes: !1,
                        async: !0
                    })
                } catch (t) {}
                t(s)
            }
        }, 2e3) : t([])
    }, $.prototype.load = function(t) {
        var e = this.f.id,
            i = this.c.o,
            s = this;
        e ? (i.__webfontfontdeckmodule__ || (i.__webfontfontdeckmodule__ = {}), i.__webfontfontdeckmodule__[e] = function(e, i) {
            for (var n = 0, a = i.fonts.length; n < a; ++n) {
                var o = i.fonts[n];
                s.a.push(new _(o.name, T("font-weight:" + o.weight + ";font-style:" + o.style)))
            }
            t(s.a)
        }, u(this.c, (this.f.api || "https://f.fontdeck.com/s/css/js/") + l(this.c) + "/" + e + ".js", function(e) {
            e && t([])
        })) : t([])
    };
    var ut = new H(window);
    ut.a.c.custom = function(t, e) {
        return new X(e, t)
    }, ut.a.c.fontdeck = function(t, e) {
        return new $(e, t)
    }, ut.a.c.monotype = function(t, e) {
        return new j(e, t)
    }, ut.a.c.typekit = function(t, e) {
        return new Q(e, t)
    }, ut.a.c.google = function(t, e) {
        return new Z(e, t)
    };
    var dt = {
        load: i(ut.load, ut)
    };
    "function" == typeof define && define.amd ? define(function() {
        return dt
    }) : "undefined" != typeof module && module.exports ? module.exports = dt : (window.WebFont = dt, window.WebFontConfig && ut.load(window.WebFontConfig))
}();
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Ph2;
! function(t) {
    var e;
    ! function(t) {
        t[t.STOPPED = 0] = "STOPPED", t[t.PLAYING = 1] = "PLAYING", t[t.PAUSED = 2] = "PAUSED", t[t.AUTO_PAUSED = 3] = "AUTO_PAUSED", t[t.BATCH_PAUSED = 4] = "BATCH_PAUSED"
    }(e = t.AnimationStatus || (t.AnimationStatus = {}));
    var i = function() {
        function t(t, i, s, n) {
            this.initValues = [], this.name = t, this.speed = i, this.parent = s, this.loop = n, this.status = e.STOPPED, this.loopCount = 0, this.onComplete = new Phaser.Signal, this.onLoop = new Phaser.Signal, this.onStart = new Phaser.Signal, this.onEvent = new Phaser.Signal, this.timeline = new TimelineMax({
                paused: !0,
                autoRemoveChildren: !1
            }), this.timeline.eventCallback("onComplete", this.onCompleteCallback, null, this), this.timeline.eventCallback("onRepeat", this.onLoopCallback, null, this), this.timeline.eventCallback("onStart", this.onStartCallback, null, this)
        }
        return t.prototype.onCompleteCallback = function() {
            this.status = e.STOPPED, this.onComplete.dispatch(this.parent, this)
        }, t.prototype.onStartCallback = function() {
            this.onStart.dispatch(this.parent, this)
        }, t.prototype.onLoopCallback = function() {
            this.loopCount++, this.onLoop.dispatch(this.parent, this)
        }, t.prototype.onEventCallback = function(t) {
            this.onEvent.dispatch(t, this.parent, this)
        }, t.prototype.addTimelineChild = function(t) {
            this.timeline.add(t, 0), t.resume()
        }, t.prototype.play = function(t, i) {
            if (this.timeline.invalidate(), this.initValues)
                for (var s = 0; s < this.initValues.length; s++) {
                    var n = this.initValues[s];
                    n.target[n.property] = n.value
                }
            return t = void 0 !== t ? t : 1, void 0 === i && (i = this.loop), i ? (this.loopCount = 0, this.timeline.repeat(-1)) : this.timeline.repeat(0), this.timeline.timeScale(t), this.timeline.seek(this.timeline.duration()), this.timeline.play(0), this.status = e.PLAYING, this
        }, t.prototype.stop = function(t, i) {
            var s = !1;
            void 0 !== i && (s = !i), void 0 !== t ? t ? this.timeline.pause(this.timeline.duration(), s) : this.timeline.pause(null, s) : this.timeline.pause(this.timeline.duration(), s), this.removeListeners(), this.status = e.STOPPED
        }, t.prototype.isPlaying = function() {
            return this.status === e.PLAYING
        }, t.prototype.isStopped = function() {
            return this.status === e.STOPPED
        }, t.prototype.isPaused = function() {
            return this.status === e.PAUSED
        }, t.prototype.pause = function() {
            this.status !== e.PAUSED && (this.status = e.PAUSED, this.timeline.pause())
        }, t.prototype.resume = function() {
            this.status !== e.PAUSED && this.status !== e.BATCH_PAUSED || (this.status = e.PLAYING, this.timeline.play())
        }, t.prototype.autoPause = function() {
            this.status === e.PLAYING && (this.status = e.AUTO_PAUSED, this.timeline.pause())
        }, t.prototype.autoResume = function() {
            this.status === e.AUTO_PAUSED && (this.status = e.PLAYING, this.timeline.play())
        }, t.prototype.batchPause = function() {
            this.status === e.PLAYING && (this.status = e.BATCH_PAUSED, this.timeline.pause())
        }, t.prototype.batchResume = function() {
            this.status === e.BATCH_PAUSED && (this.status = e.PLAYING, this.timeline.play())
        }, t.prototype.addEvent = function(t) {
            this.timeline.addCallback(this.onEventCallback, t.frame / 1e3, [t.name], this)
        }, t.prototype.removeListeners = function() {
            this.onLoop.removeAll(), this.onEvent.removeAll(), this.onStart.removeAll(), this.onComplete.removeAll()
        }, t.prototype.changeFrame = function(t, e) {
            t.frameName = e
        }, t.prototype.checkTimelineDuration = function() {
            0 === this.timeline.duration() && this.timeline.addCallback(function() {}, "+=0.0001")
        }, t.prototype.getTimelineMax = function() {
            return this.timeline
        }, t.prototype.addInitValue = function(t, e, i) {
            this.initValues.push({
                target: t,
                property: e,
                value: i
            })
        }, t.prototype.destroy = function() {
            this.removeListeners(), this.timeline.eventCallback("onComplete", null), this.timeline.eventCallback("onRepeat", null), this.timeline.eventCallback("onStart", null), this.initValues.length = 0, this.initValues = null, this.timeline.kill(), this.timeline = null
        }, t
    }();
    t.Animation = i
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function e(e) {
            this.game = e, this.cache = new t.AnimationCache(this.game), this.scale = 1, this.pauseAllSignal = new Phaser.Signal, this.resumeAllSignal = new Phaser.Signal, this.stopAllSignal = new Phaser.Signal
        }
        return e.prototype.setGameScale = function(t) {
            this.scale = t
        }, Object.defineProperty(e.prototype, "gameScale", {
            get: function() {
                return this.scale
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.pauseAll = function() {
            this.pauseAllSignal.dispatch()
        }, e.prototype.resumeAll = function() {
            this.resumeAllSignal.dispatch()
        }, e.prototype.stopAll = function() {
            this.stopAllSignal.dispatch()
        }, e.prototype.getAnimationData = function(t) {
            var e = this.game.ph2AnimationManager.cache.getAnimationData(t);
            return e || (e = this.getAnimationDataFromJSON(t)) && this.cache.saveAnimationData(t, e), e
        }, e.prototype.getAnimationObject = function(t, e) {
            var i = this.getAnimationData(t);
            return this.createTree(i.hierarchy, e, null)
        }, e.prototype.getAnimationDataFromJSON = function(t) {
            var e = this.game.cache.getJSON(t);
            return e ? this.generateAnimationData(e) : null
        }, e.prototype.generateAnimationData = function(e) {
            var i = e.hierarchy,
                s = e.properties,
                n = this.createCacheAnimationDataTree(i, s, null, null);
            return new t.AnimationData(n)
        }, e.prototype.createCacheAnimationDataTree = function(t, e, i, s) {
            var n = null;
            if (t) {
                var a = t.name;
                if (n = this.createCacheNode(t, e, t.animations, i, s), t.children) {
                    s = null !== s ? 0 === s.length ? a : s + "/" + a : "";
                    for (var o = t.children, r = 0; r < o.length; r++) {
                        var h = this.createCacheAnimationDataTree(o[r], e, n, s);
                        h && n.addChild(h)
                    }
                }
            }
            return n
        }, e.prototype.createCacheNode = function(e, i, s, n, a) {
            var o = e.name,
                r = o;
            a && (r = a + "/" + o);
            var h = null;
            if (null === n)(h = new t.CacheAnimationElementGroup).name = o;
            else {
                var l = i[r],
                    c = l.type;
                "sprite" === c ? ((h = new t.CacheAnimationElementSprite).name = o, h.textureName = l.file, void 0 !== l.anchor && (h.anchor.x = l.anchor.x, h.anchor.y = l.anchor.y), void 0 !== l.angle && (h.angle = l.angle), void 0 !== l.scale && (h.scale.x = l.scale.x, h.scale.y = l.scale.y), void 0 !== l.color && (h.tint = Phaser.Color.hexToRGB(l.color)), void 0 !== l.alpha && (h.alpha = l.alpha), void 0 !== l.position && (h.position.x = l.position.x, h.position.y = l.position.y)) : "container" === c ? ((h = new t.CacheAnimationElementGroup).name = o, void 0 !== l.position && (h.position.x = l.position.x, h.position.y = l.position.y), void 0 !== l.angle && (h.angle = l.angle), void 0 !== l.scale && (h.scale.x = l.scale.x, h.scale.y = l.scale.y), void 0 !== l.alpha && (h.alpha = l.alpha)) : "text" === c && ((h = new t.CacheAnimationElementText).name = o, void 0 !== l.anchor && (h.anchor.x = l.anchor.x, h.anchor.y = l.anchor.y), void 0 !== l.angle && (h.angle = l.angle), void 0 !== l.scale && (h.scale.x = l.scale.x, h.scale.y = l.scale.y), void 0 !== l.color && (h.tint = l.color), void 0 !== l.alpha && (h.alpha = l.alpha), void 0 !== l.position && (h.position.x = l.position.x, h.position.y = l.position.y), void 0 !== l.font && (h.fontName = l.font.name, h.fontSize = l.font.fontSize), void 0 !== l.text && (h.text = l.text), void 0 !== l.align && (h.align = l.align), void 0 !== l.stroke && (h.stroke = l.stroke), void 0 !== l.strokeThickness && (h.strokeThickness = l.strokeThickness))
            } if (s)
                for (var u = 0; u < s.length; u++) this.addCacheAnimation(h, s[u]);
            return h
        }, e.prototype.addCacheAnimation = function(e, i) {
            var s = this.game.cache.getJSON(i);
            if (s) {
                var n = void 0 !== s.speed ? s.speed : 1,
                    a = void 0 !== s.mode ? s.mode : null,
                    o = s.data,
                    r = s.events,
                    h = t.AnimationMode.NORMAL;
                a && "loop" === a.toLowerCase() && (h = t.AnimationMode.LOOP), e.addAnimation(this.createCacheTimelineForAnimation(i, o, n, h, r))
            }
        }, e.prototype.createCacheTimelineForAnimation = function(e, i, s, n, a) {
            var o = new t.CacheAnimation(e, s);
            o.mode = n;
            for (var r = Object.keys(i), h = 0; h < r.length; h++)
                for (var l = r[h], c = i[l], u = Object.keys(c), d = 0; d < u.length; d++) {
                    var p = u[d],
                        m = c[p],
                        g = this.createCacheTimelineForProperty(l, p, m);
                    o.addTimeline(g)
                }
            if (a && a.length > 0)
                for (h = 0; h < a.length; h++) {
                    var f = new t.CacheEvent;
                    f.frame = a[h].frame, f.name = a[h].name, o.addEvent(f)
                }
            return o
        }, e.prototype.createCacheTimelineForProperty = function(e, i, s) {
            for (var n = new t.CacheTimeline(e, i), a = 0; a < s.length; a++) {
                var o = new t.CacheFrame;
                o.frame = s[a].frame, o.value = s[a].value, n.addFrame(o)
            }
            return n
        }, e.prototype.createTree = function(t, e, i) {
            var s = null;
            if (t) {
                if (s = this.createNode(t, e, i), t.children)
                    for (var n = t.children, a = 0; a < n.length; a++) {
                        var o = this.createTree(n[a], e, s);
                        o && s.addChild(o)
                    }
                if (t.animations && t.animations.length > 0)
                    for (var r = t.animations, h = 0; h < r.length; h++) this.addAnimationToNode(s, r[h])
            }
            return s
        }, e.prototype.createNode = function(e, i, s) {
            var n = e.name,
                a = null;
            return null === s ? (a = new t.AnimationGroup(this.game)).name = n : e instanceof t.CacheAnimationElementSprite ? ((a = new t.AnimationSprite(this.game, i, e.textureName)).name = n, a.anchor.x = e.anchor.x, a.anchor.y = e.anchor.y, a.angle = e.angle, a.scale.x = e.scale.x, a.scale.y = e.scale.y, a.alpha = e.alpha, a.tint = e.tint, a.x = e.position.x * this.gameScale, a.y = e.position.y * this.gameScale) : e instanceof t.CacheAnimationElementGroup ? ((a = new t.AnimationGroup(this.game)).name = n, a.x = e.position.x * this.gameScale, a.y = e.position.y * this.gameScale, a.angle = e.angle, a.scale.x = e.scale.x, a.scale.y = e.scale.y, a.alpha = e.alpha) : e instanceof t.CacheAnimationElementText && ((a = new t.AnimationText(this.game, e.position.x * this.gameScale, e.position.y * this.gameScale, e.text, {
                font: e.fontSize * this.gameScale + "px " + e.fontName,
                fill: e.tint,
                align: e.align,
                stroke: e.stroke,
                strokeThickness: e.strokeThickness * this.gameScale
            })).name = e.name, a.angle = e.angle, a.anchor.x = e.anchor.x, a.anchor.y = e.anchor.y, a.scale.x = e.scale.x, a.scale.y = e.scale.y, a.alpha = e.alpha), a
        }, e.prototype.addAnimationToNode = function(e, i) {
            for (var s = i.mode === t.AnimationMode.LOOP, n = new t.Animation(i.name, i.speed, e, s), a = null, o = null, r = 0; r < i.timelines.length; r++) {
                var h = i.timelines[r],
                    l = h.target;
                l !== a && (o = "__this__" === l ? e : t.AnimationSystem.findObject(l, e));
                var c = new TimelineMax({
                        paused: !0,
                        autoRemoveChildren: !1
                    }),
                    u = 0,
                    d = o.key;
                d && e.game.cache.getFrameData(d);
                for (var p = 0; p < h.frames.length; p++) {
                    var m = h.frames[p],
                        g = m.frame / 1e3,
                        f = g - u,
                        _ = m.value;
                    switch (h.property) {
                        case "scaleX":
                            0 === f ? (n.addInitValue(o, "scaleX", _), c.set(o, {
                                scaleX: _
                            }, 0)) : c.to(o, f, {
                                scaleX: _
                            });
                            break;
                        case "scaleY":
                            0 === f ? (n.addInitValue(o, "scaleY", _), c.set(o, {
                                scaleY: _
                            }, 0)) : c.to(o, f, {
                                scaleY: _
                            });
                            break;
                        case "angle":
                            0 === f ? (n.addInitValue(o, "angle", _), c.set(o, {
                                angle: _
                            }, 0)) : c.to(o, f, {
                                angle: _
                            });
                            break;
                        case "alpha":
                            0 === f ? (n.addInitValue(o, "alpha", _), c.set(o, {
                                alpha: _
                            }, 0)) : c.to(o, f, {
                                alpha: _
                            });
                            break;
                        case "position":
                            0 === f ? (n.addInitValue(o, "x", _[0] * this.gameScale), n.addInitValue(o, "y", _[1] * this.gameScale), c.set(o, {
                                x: _[0] * this.gameScale,
                                y: _[1] * this.gameScale
                            }, 0)) : c.to(o, f, {
                                x: _[0] * this.gameScale,
                                y: _[1] * this.gameScale
                            });
                            break;
                        case "x":
                            0 === f ? (n.addInitValue(o, "x", _ * this.gameScale), c.set(o, {
                                x: _ * this.gameScale
                            }, 0)) : c.to(o, f, {
                                x: _ * this.gameScale
                            });
                            break;
                        case "y":
                            0 === f ? (n.addInitValue(o, "y", _ * this.gameScale), c.set(o, {
                                y: _ * this.gameScale
                            }, 0)) : c.to(o, f, {
                                y: _ * this.gameScale
                            });
                            break;
                        case "frameName":
                            0 === f && n.addInitValue(o, "frameName", _), c.addCallback(n.changeFrame, g, [o, _], this)
                    }
                    u = g
                }
                n.addTimelineChild(c), a = l
            }
            if (n.checkTimelineDuration(), i.events && i.events.length > 0)
                for (r = 0; r < i.events.length; r++) n.addEvent(i.events[r]);
            e.ph2Animations.add(n)
        }, e.findObject = function(t, e) {
            for (var i = e, s = "/" !== t[0] ? 0 : 1, n = t.split("/"), a = s; a < n.length; a++) {
                var o = n[a],
                    r = i.children;
                i = null;
                for (var h = 0, l = r.length; h < l; ++h) {
                    var c = r[h];
                    if (c.name === o) {
                        i = c;
                        break
                    }
                }
                if (!i) return null
            }
            return i
        }, e
    }();
    t.AnimationSystem = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function t(t) {
            this.game = t, this.animationData = {}
        }
        return t.prototype.getAnimationData = function(t) {
            return this.animationData[t] || null
        }, t.prototype.saveAnimationData = function(t, e) {
            this.animationData[t] = e
        }, t
    }();
    t.AnimationCache = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function t() {
            this.animations = [], this.children = []
        }
        return t.prototype.addChild = function(t) {
            this.children.push(t)
        }, t.prototype.addAnimation = function(t) {
            this.animations.push(t)
        }, t
    }();
    t.CacheAnimationElement = e;
    var i = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = 16777215, e.alpha = 1, e.position = new Phaser.Point(0, 0), e
        }
        return __extends(e, t), e
    }(e);
    t.CacheAnimationElementSprite = i;
    var s = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.position = new Phaser.Point(0, 0), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.alpha = 1, e
        }
        return __extends(e, t), e
    }(e);
    t.CacheAnimationElementGroup = s;
    var n = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = "#FFFFFF", e.alpha = 1, e.position = new Phaser.Point(0, 0), e.text = "", e.fontName = "Arial", e.fontSize = 24, e.align = "center", e.stroke = "black", e.strokeThickness = 0, e
        }
        return __extends(e, t), e
    }(e);
    t.CacheAnimationElementText = n;
    var a = function() {
        function t(t, e) {
            this.name = t, this.timelines = [], this.speed = e, this.events = []
        }
        return t.prototype.addTimeline = function(t) {
            this.timelines.push(t)
        }, t.prototype.addEvent = function(t) {
            this.events.push(t)
        }, t
    }();
    t.CacheAnimation = a;
    var o = function() {
        function t(t, e) {
            this.target = t, this.property = e, this.frames = []
        }
        return t.prototype.addFrame = function(t) {
            this.frames.push(t)
        }, t
    }();
    t.CacheTimeline = o;
    var r = function() {};
    t.CacheFrame = r;
    var h = function() {};
    t.CacheEvent = h;
    var l = function(t) {
        this.hierarchy = t
    };
    t.AnimationData = l,
        function(t) {
            t[t.NORMAL = 0] = "NORMAL", t[t.LOOP = 1] = "LOOP"
        }(t.AnimationMode || (t.AnimationMode = {}))
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(t, e) {
        this.key = t, this.value = e
    };
    t.CacheOrientationProperty = e;
    var i = function() {
        function i() {
            this.backup = [], this.portrait = [], this.landscape = []
        }
        return i.prototype.addProperty = function(i, s, n) {
            null === n ? this.backup.push(new e(i, s)) : n === t.AlignmentScope.LANDSCAPE ? this.landscape.push(new e(i, s)) : n === t.AlignmentScope.PORTRAIT && this.portrait.push(new e(i, s))
        }, i
    }();
    t.CacheOrientationProperties = i;
    var s = function() {
        function e() {
            this.children = [], this.orientationVisibility = t.OrientationType.BOTH, this.platformVisibility = t.PlatformType.BOTH
        }
        return e.prototype.addChild = function(t) {
            this.children.push(t)
        }, e.prototype.addAlignment = function(e, i, s, a, o, r) {
            var h = new n;
            h.type = e, h.offset.x = i, h.offset.y = s, h.isAbsoluteX = a, h.isAbsoluteY = o, r === t.AlignmentScope.ALL ? this.alignment = h : r === t.AlignmentScope.PORTRAIT ? this.portraitAlignment = h : r === t.AlignmentScope.LANDSCAPE && (this.landscapeAlignment = h)
        }, e.prototype.addOrientationProperty = function(t, e, s) {
            this.orientationProperties || (this.orientationProperties = new i), void 0 !== e && this.orientationProperties.addProperty(t, e, s)
        }, e.prototype.setOrientationVisibility = function(t) {
            this.orientationVisibility = t
        }, e.prototype.setPlatformVisibility = function(t) {
            this.platformVisibility = t
        }, e
    }();
    t.CacheUIElement = s;
    var n = function() {
        this.offset = new Phaser.Point(0, 0), this.isAbsoluteX = !0, this.isAbsoluteY = !0
    };
    t.CacheAlignment = n;
    var a = function(t, e, i, s) {
        this.top = t, this.bottom = e, this.left = i, this.right = s
    };
    t.CacheSliceData = a;
    var o = function(t, e) {
        this.width = t, this.height = e
    };
    t.CacheTiledData = o;
    var r = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = 16777215, e.alpha = 1, e.position = new Phaser.Point(0, 0), e.imageType = "SIMPLE", e
        }
        return __extends(e, t), e.prototype.addSliceData = function(t, e, i, s, n, o) {
            this.sliceData = new a(t, e, i, s), this.sliceData.width = n, this.sliceData.height = o
        }, e.prototype.addTiledData = function(t, e) {
            this.tiledData = new o(t, e)
        }, e
    }(s);
    t.CacheUISprite = r;
    var h = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.designResolution = new Phaser.Rectangle(0, 0, 0, 0), e
        }
        return __extends(e, t), e.prototype.setSafeZone = function(t, e) {
            this.safeZone = new Phaser.Rectangle(0, 0, t, e)
        }, e
    }(s);
    t.CacheUICanvas = h;
    var l = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.position = new Phaser.Point(0, 0), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.alpha = 1, e
        }
        return __extends(e, t), e.prototype.addSize = function(t, e) {
            this.size = new Phaser.Rectangle(0, 0, t, e)
        }, e
    }(s);
    t.CacheUIGroup = l;
    var c = function(t, e, i) {
        this.normal = t, this.pressed = e, this.hover = i
    };
    t.CacheUIButtonStates = c;
    var u = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = 16777215, e.alpha = 1, e.position = new Phaser.Point(0, 0), e.imageType = "SIMPLE", e
        }
        return __extends(e, t), e.prototype.addSliceData = function(t, e, i, s, n, o) {
            this.sliceData = new a(t, e, i, s), this.sliceData.width = n, this.sliceData.height = o
        }, e.prototype.addStates = function(t, e, i) {
            this.statesData = new c(t, e, i)
        }, e
    }(s);
    t.CacheUIButton = u;
    var d = function(t) {
        function e() {
            var e = t.call(this) || this;
            return e.anchor = new Phaser.Point(.5, .5), e.angle = 0, e.scale = new Phaser.Point(1, 1), e.tint = "#FFFFFF", e.alpha = 1, e.position = new Phaser.Point(0, 0), e.text = "", e.fontName = "Arial", e.fontSize = 24, e.lineHeight = 24, e.align = "center", e.stroke = "black", e.strokeThickness = 0, e
        }
        return __extends(e, t), e
    }(s);
    t.CacheUIText = d;
    var p = function(t) {
        function e() {
            return t.call(this) || this
        }
        return __extends(e, t), e
    }(s);
    t.CacheUINode = p;
    var m = function(t) {
        this.hierarchy = t
    };
    t.UIData = m
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(i) {
            var s = e.call(this, i, 0, 0, null) || this;
            return s.ph2Animations = new t.AnimationManager(i), s
        }
        return __extends(i, e), Object.defineProperty(i.prototype, "scaleX", {
            get: function() {
                return this.scale.x
            },
            set: function(t) {
                this.scale.x = t
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "scaleY", {
            get: function() {
                return this.scale.y
            },
            set: function(t) {
                this.scale.y = t
            },
            enumerable: !0,
            configurable: !0
        }), i
    }(Phaser.Sprite);
    t.AnimationGroup = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(i, s, n) {
            var a = e.call(this, i, 0, 0, s, n) || this;
            return a.ph2Animations = new t.AnimationManager(i), a
        }
        return __extends(i, e), Object.defineProperty(i.prototype, "scaleX", {
            get: function() {
                return this.scale.x
            },
            set: function(t) {
                this.scale.x = t
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "scaleY", {
            get: function() {
                return this.scale.y
            },
            set: function(t) {
                this.scale.y = t
            },
            enumerable: !0,
            configurable: !0
        }), i
    }(Phaser.Sprite);
    t.AnimationSprite = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o) {
            var r = e.call(this, i, s, n, a, o) || this;
            return r.ph2Animations = new t.AnimationManager(i), r
        }
        return __extends(i, e), i
    }(Phaser.Text);
    t.AnimationText = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    ! function(t) {
        t[t.PORTRAIT = 0] = "PORTRAIT", t[t.LANDSCAPE = 1] = "LANDSCAPE", t[t.BOTH = 2] = "BOTH", t[t.NONE = 3] = "NONE"
    }(t.OrientationType || (t.OrientationType = {})),
    function(t) {
        t[t.DESKTOP = 0] = "DESKTOP", t[t.MOBILE = 1] = "MOBILE", t[t.BOTH = 2] = "BOTH"
    }(t.PlatformType || (t.PlatformType = {})),
    function(t) {
        t[t.PARENT = 0] = "PARENT", t[t.WORLD = 1] = "WORLD"
    }(t.AlignTargetType || (t.AlignTargetType = {})),
    function(t) {
        t[t.ALL = 0] = "ALL", t[t.PORTRAIT = 1] = "PORTRAIT", t[t.LANDSCAPE = 2] = "LANDSCAPE"
    }(t.AlignmentScope || (t.AlignmentScope = {}))
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function t() {}
        return t.prototype.getOffset = function(t) {
            return this.isAbsolute ? this.offset : this.offset * t
        }, t
    }();
    t.AlignmentOffset = e;
    var i = function() {
        function t() {
            this.offsetX = new e, this.offsetY = new e
        }
        return t.prototype.getType = function() {
            switch (this.type) {
                case "TOP_LEFT":
                    return Phaser.TOP_LEFT;
                case "TOP_CENTER":
                    return Phaser.TOP_CENTER;
                case "TOP_RIGHT":
                    return Phaser.TOP_RIGHT;
                case "LEFT_TOP":
                    return Phaser.LEFT_TOP;
                case "LEFT_CENTER":
                    return Phaser.LEFT_CENTER;
                case "LEFT_BOTTOM":
                    return Phaser.LEFT_BOTTOM;
                case "CENTER":
                    return Phaser.CENTER;
                case "RIGHT_TOP":
                    return Phaser.RIGHT_TOP;
                case "RIGHT_CENTER":
                    return Phaser.RIGHT_CENTER;
                case "RIGHT_BOTTOM":
                    return Phaser.RIGHT_BOTTOM;
                case "BOTTOM_LEFT":
                    return Phaser.BOTTOM_LEFT;
                case "BOTTOM_CENTER":
                    return Phaser.BOTTOM_CENTER;
                case "BOTTOM_RIGHT":
                    return Phaser.BOTTOM_RIGHT;
                default:
                    return Phaser.CENTER
            }
        }, t
    }();
    t.Alignment = i;
    var s = function() {
        function e(t) {
            this.game = t, this.landscapeAlignment = new i, this.portraitAlignment = new i, this.enabled = !0
        }
        return e.prototype.enable = function(t) {
            this.enabled = t
        }, e.prototype.setAlignTarget = function(t) {
            this.alignTargetType = t
        }, e.prototype.setLandscapeAlignment = function(t, e, i, s, n) {
            this.landscapeAlignment.type = t, this.landscapeAlignment.offsetX.offset = e * (i ? this.game.ph2UIManager.gameScale : 1), this.landscapeAlignment.offsetX.isAbsolute = i, this.landscapeAlignment.offsetY.offset = s * (n ? this.game.ph2UIManager.gameScale : 1), this.landscapeAlignment.offsetY.isAbsolute = n
        }, e.prototype.setPortraitAlignment = function(t, e, i, s, n) {
            this.portraitAlignment.type = t, this.portraitAlignment.offsetX.offset = e * (i ? this.game.ph2UIManager.gameScale : 1), this.portraitAlignment.offsetX.isAbsolute = i, this.portraitAlignment.offsetY.offset = s * (n ? this.game.ph2UIManager.gameScale : 1), this.portraitAlignment.offsetY.isAbsolute = n
        }, e.prototype.getCurrentAlignment = function() {
            return this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.LANDSCAPE ? this.landscapeAlignment : this.portraitAlignment
        }, e.prototype.applyAlignment = function(e) {
            if (this.enabled) {
                var i = this.getCurrentAlignment();
                this.alignTargetType === t.AlignTargetType.WORLD ? e.alignIn(this.game.ph2UIManager.alignmentManager.alignBounds, i.getType(), i.offsetX.getOffset(this.game.ph2UIManager.alignmentManager.alignBounds.width), i.offsetY.getOffset(this.game.ph2UIManager.alignmentManager.alignBounds.height)) : this.alignTargetType === t.AlignTargetType.PARENT && t.AlignmentSystem.alignInParent(e, i.getType(), i.offsetX.getOffset(e.parent.width), i.offsetY.getOffset(e.parent.height))
            }
        }, e.prototype.destroy = function() {
            this.game = null, this.alignTargetType = null, this.landscapeAlignment = null, this.portraitAlignment = null
        }, e
    }();
    t.UIAlignment = s
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function e(t, e) {
            this.game = t, this.enabled = this.game.ph2UIManager.enableVisibilityAndOrientationComponent, this.elementProperties = {}, this.landscapeProperties = {}, this.portraitProperties = {}
        }
        return e.prototype.enable = function(t) {
            this.enabled = t
        }, e.prototype.backupOriginalProperty = function(t, e) {
            this.elementProperties[t] = e
        }, e.prototype.addPortraitProperty = function(t, e) {
            this.portraitProperties[t] = e
        }, e.prototype.addLandscapePortrait = function(t, e) {
            this.landscapeProperties[t] = e
        }, e.prototype.applyOriginalProperties = function(t) {
            for (var e = Object.keys(this.elementProperties), i = 0; i < e.length; i++) {
                var s = e[i];
                t[s] = this.elementProperties[s]
            }
        }, e.prototype.applyPortraitProperties = function(t) {
            this.applyOriginalProperties(t);
            for (var e = Object.keys(this.portraitProperties), i = 0; i < e.length; i++) {
                var s = e[i];
                t[s] = this.portraitProperties[s]
            }
        }, e.prototype.applyLandscapeProperties = function(t) {
            this.applyOriginalProperties(t);
            for (var e = Object.keys(this.landscapeProperties), i = 0; i < e.length; i++) {
                var s = e[i];
                t[s] = this.landscapeProperties[s]
            }
        }, e.prototype.apply = function(e) {
            this.enabled && (this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.PORTRAIT ? this.applyPortraitProperties(e) : this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.LANDSCAPE && this.applyLandscapeProperties(e))
        }, e
    }();
    t.UIOrientationProperties = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function e(e) {
            this.game = e, this.enabled = this.game.ph2UIManager.enableVisibilityAndOrientationComponent, this.orientationType = t.OrientationType.BOTH, this.platformType = t.PlatformType.BOTH
        }
        return e.prototype.setOrientationVisible = function(t) {
            this.orientationType = t
        }, e.prototype.setPlatformVisible = function(t) {
            this.platformType = t
        }, e.prototype.enable = function(t) {
            this.enabled = t
        }, e.prototype.applyVisibility = function(e) {
            if (this.enabled) {
                var i = this.platformType === t.PlatformType.BOTH || this.platformType === t.PlatformType.DESKTOP && "desktop" === this.game.ph2UIManager.currentPlatform || this.platformType === t.PlatformType.MOBILE && "mobile" === this.game.ph2UIManager.currentPlatform,
                    s = this.orientationType === t.OrientationType.BOTH || this.orientationType === t.OrientationType.LANDSCAPE && this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.LANDSCAPE || this.orientationType === t.OrientationType.PORTRAIT && this.game.ph2UIManager.alignmentManager.getCurrentOrientation() === t.Orientation.PORTRAIT;
                return e.visible = i && s, e.visible
            }
        }, e
    }();
    t.UIVisibility = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function e() {}
        return e.UICanvas = function(e, i) {
            var s = new t.CacheUICanvas;
            return s.name = e, void 0 !== i.design && (s.designResolution.width = i.design.width, s.designResolution.height = i.design.height), void 0 !== i.safeZone && s.setSafeZone(i.safeZone.width, i.safeZone.height), s
        }, e.UISprite = function(e, i) {
            var s = new t.CacheUISprite;
            if (s.name = e, s.textureName = i.file, t.CacheFactory.addAnchorProperty(s, i), t.CacheFactory.addAngleProperty(s, i), t.CacheFactory.addScaleProperty(s, i), t.CacheFactory.addColorProperty(s, i), t.CacheFactory.addPositionProperty(s, i), t.CacheFactory.addAlignmentProperty(s, i, t.AlignmentScope.ALL), t.CacheFactory.addOrientationProperty(s, i), t.CacheFactory.addPlatformVisibilityProperty(s, i), void 0 !== i.image) {
                var n = i.image;
                if (s.imageType = n, "SLICED" === n) {
                    var a = i.slice;
                    s.addSliceData(a.top, a.bottom, a.left, a.right, i.size.width, i.size.height)
                } else "TILED" === n && s.addTiledData(i.size.width, i.size.height)
            } else s.imageType = "NORMAL";
            return s
        }, e.UIGroup = function(e, i) {
            var s = new t.CacheUIGroup;
            return s.name = e, t.CacheFactory.addPositionProperty(s, i), t.CacheFactory.addAngleProperty(s, i), t.CacheFactory.addScaleProperty(s, i), t.CacheFactory.addAlphaProperty(s, i), t.CacheFactory.addAlignmentProperty(s, i, t.AlignmentScope.ALL), t.CacheFactory.addPlatformVisibilityProperty(s, i), t.CacheFactory.addOrientationProperty(s, i), void 0 !== i.size && s.addSize(i.size.width, i.size.height), s
        }, e.UIButton = function(e, i) {
            var s = new t.CacheUIButton;
            if (s.name = e, s.textureName = i.file, t.CacheFactory.addAnchorProperty(s, i), t.CacheFactory.addAngleProperty(s, i), t.CacheFactory.addScaleProperty(s, i), t.CacheFactory.addColorProperty(s, i), t.CacheFactory.addAlphaProperty(s, i), t.CacheFactory.addPositionProperty(s, i), t.CacheFactory.addAlignmentProperty(s, i, t.AlignmentScope.ALL), t.CacheFactory.addPlatformVisibilityProperty(s, i), t.CacheFactory.addOrientationProperty(s, i), void 0 !== i.image) {
                var n = i.image;
                if (s.imageType = n, "SLICED" === n) {
                    var a = i.slice;
                    s.addSliceData(a.top, a.bottom, a.left, a.right, i.size.width, i.size.height)
                }
            } else s.imageType = "NORMAL";
            return void 0 !== i.transitionMode && (s.transitionMode = i.transitionMode, "image" === s.transitionMode ? s.addStates(i.transition.normal, i.transition.pressed, i.transition.hover) : "color" === s.transitionMode ? s.addStates(i.transition.normal, i.transition.pressed, i.transition.hover) : "scale" === s.transitionMode && s.addStates(i.transition.normal, i.transition.pressed, i.transition.hover)), s
        }, e.UIText = function(e, i) {
            var s = new t.CacheUIText;
            return s.name = e, t.CacheFactory.addAnchorProperty(s, i), t.CacheFactory.addAngleProperty(s, i), t.CacheFactory.addScaleProperty(s, i), t.CacheFactory.addColorProperty(s, i, !0), t.CacheFactory.addAlphaProperty(s, i), t.CacheFactory.addPositionProperty(s, i), t.CacheFactory.addPlatformVisibilityProperty(s, i), t.CacheFactory.addAlignmentProperty(s, i, t.AlignmentScope.ALL), t.CacheFactory.addOrientationProperty(s, i), void 0 !== i.font && (s.fontName = i.font.name, s.fontSize = i.font.fontSize, s.lineHeight = i.font.lineHeight), void 0 !== i.text && (s.text = i.text), void 0 !== i.align && (s.align = i.align), void 0 !== i.stroke && (s.stroke = i.stroke), void 0 !== i.strokeThickness && (s.strokeThickness = i.strokeThickness), s
        }, e.addAnchorProperty = function(t, e) {
            void 0 !== e.anchor && (t.anchor.x = e.anchor.x, t.anchor.y = e.anchor.y)
        }, e.addAngleProperty = function(t, e) {
            void 0 !== e.angle && (t.angle = e.angle)
        }, e.addScaleProperty = function(t, e) {
            void 0 !== e.scale && (t.scale.x = e.scale.x, t.scale.y = e.scale.y)
        }, e.addColorProperty = function(t, e, i) {
            void 0 !== e.color && (t.tint = i ? e.color : Phaser.Color.hexToRGB(e.color))
        }, e.addAlphaProperty = function(t, e) {
            void 0 !== e.alpha && (t.alpha = e.alpha)
        }, e.addPositionProperty = function(t, e) {
            void 0 !== e.position && (t.position.x = e.position.x, t.position.y = e.position.y)
        }, e.addAlignmentProperty = function(t, e, i) {
            if (void 0 !== e.alignment) {
                var s = 0,
                    n = 0,
                    a = !0,
                    o = !0;
                void 0 !== e.alignment.offset && (s = e.alignment.offset.x, n = e.alignment.offset.y, "string" == typeof s && (a = !1, s = Number(s.split("%")[0]) / 100), "string" == typeof n && (o = !1, n = Number(n.split("%")[0]) / 100)), t.addAlignment(e.alignment.type, s, n, a, o, i)
            }
        }, e.addOrientationProperty = function(e, i) {
            var s = t.OrientationType.BOTH;
            if (void 0 !== i.orientation && ((void 0 !== i.orientation.landscape && void 0 !== i.orientation.landscape.properties || void 0 !== i.orientation.portrait && void 0 !== i.orientation.portrait.properties) && (e.addOrientationProperty("scale", e.scale, null), e.addOrientationProperty("angle", e.angle, null), e.addOrientationProperty("anchor", e.anchor, null), e.addOrientationProperty("alpha", e.alpha, null), e.addOrientationProperty("position", e.position, null)), void 0 !== i.orientation.landscape && (void 0 !== i.orientation.landscape.alignment && (n = i.orientation.landscape, t.CacheFactory.addAlignmentProperty(e, n, t.AlignmentScope.LANDSCAPE)), void 0 !== i.orientation.landscape.properties && t.CacheFactory.addOrientationPropertyForOrientation(e, i.orientation.landscape.properties, t.AlignmentScope.LANDSCAPE), void 0 !== i.orientation.landscape.hide && i.orientation.landscape.hide && (s = t.OrientationType.PORTRAIT)), void 0 !== i.orientation.portrait)) {
                if (void 0 !== i.orientation.portrait.alignment) {
                    var n = i.orientation.portrait;
                    t.CacheFactory.addAlignmentProperty(e, n, t.AlignmentScope.PORTRAIT)
                }
                void 0 !== i.orientation.portrait.properties && t.CacheFactory.addOrientationPropertyForOrientation(e, i.orientation.portrait.properties, t.AlignmentScope.PORTRAIT), void 0 !== i.orientation.portrait.hide && i.orientation.portrait.hide && (s === t.OrientationType.PORTRAIT ? s = t.OrientationType.NONE : s === t.OrientationType.BOTH && (s = t.OrientationType.LANDSCAPE))
            }
            e.setOrientationVisibility(s)
        }, e.addOrientationPropertyForOrientation = function(t, e, i) {
            void 0 !== e.scale && t.addOrientationProperty("scale", new Phaser.Point(e.scale.x, e.scale.y), i), void 0 !== e.angle && t.addOrientationProperty("angle", e.angle, i), void 0 !== e.anchor && t.addOrientationProperty("anchor", new Phaser.Point(e.anchor.x, e.anchor.y), i), void 0 !== e.alpha && t.addOrientationProperty("alpha", e.alpha, i), void 0 !== e.position && t.addOrientationProperty("position", new Phaser.Point(e.position.x, e.position.y), i)
        }, e.addPlatformVisibilityProperty = function(e, i) {
            var s = t.PlatformType.BOTH;
            void 0 !== i.visibility && (s = "desktop" === i.visibility ? t.PlatformType.DESKTOP : "mobile" === i.visibility ? t.PlatformType.MOBILE : t.PlatformType.BOTH), e.setPlatformVisibility(s)
        }, e
    }();
    t.CacheFactory = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function e() {}
        return e.UICanvas = function(e, i) {
            var s = new t.UI(e, i.designResolution.width, i.designResolution.height);
            return s.name = i.name, i.safeZone && s.setSafeZone(i.safeZone.width * e.ph2UIManager.gameScale, i.safeZone.height * e.ph2UIManager.gameScale), s
        }, e.UISprite = function(e, i, s, n) {
            var a;
            if (i.sliceData ? ((a = new t.UISlicedSprite(e, i.position.x * e.ph2UIManager.gameScale, i.position.y * e.ph2UIManager.gameScale, s, i.textureName, i.sliceData.width * e.ph2UIManager.gameScale, i.sliceData.height * e.ph2UIManager.gameScale, {
                top: i.sliceData.top * e.ph2UIManager.gameScale,
                bottom: i.sliceData.bottom * e.ph2UIManager.gameScale,
                left: i.sliceData.left * e.ph2UIManager.gameScale,
                right: i.sliceData.right * e.ph2UIManager.gameScale
            })).name = i.name, a.anchor.x = i.anchor.x, a.anchor.y = i.anchor.y, a.angle = i.angle, a.scale.x = i.scale.x, a.scale.y = i.scale.y, a.alpha = i.alpha, a.tint = i.tint, a.x = i.position.x * e.ph2UIManager.gameScale, a.y = i.position.y * e.ph2UIManager.gameScale) : i.tiledData ? ((a = new t.UITiledSprite(e, 0, 0, i.tiledData.width * e.ph2UIManager.gameScale, i.tiledData.height * e.ph2UIManager.gameScale, s, i.textureName)).name = i.name, a.anchor.x = i.anchor.x, a.anchor.y = i.anchor.y, a.angle = i.angle, a.scale.x = i.scale.x, a.scale.y = i.scale.y, a.alpha = i.alpha, a.tint = i.tint, a.x = i.position.x * e.ph2UIManager.gameScale, a.y = i.position.y * e.ph2UIManager.gameScale) : ((a = new t.UISprite(e, 0, 0, s, i.textureName)).name = i.name, a.anchor.x = i.anchor.x, a.anchor.y = i.anchor.y, a.angle = i.angle, a.scale.x = i.scale.x, a.scale.y = i.scale.y, a.alpha = i.alpha, a.tint = i.tint, a.x = i.position.x * e.ph2UIManager.gameScale, a.y = i.position.y * e.ph2UIManager.gameScale), i.alignment && (a.enableAlignment(), a.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), a.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), n instanceof t.UI ? a.alignment.setAlignTarget(t.AlignTargetType.WORLD) : a.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (a.alignment || a.enableAlignment(), a.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (a.alignment || a.enableAlignment(), a.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) {
                for (a.enableOrientationProperties(), o = 0; o < i.orientationProperties.backup.length; o++) "position" === (r = i.orientationProperties.backup[o]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), a.orientationProperties.backupOriginalProperty(r.key, r.value);
                for (o = 0; o < i.orientationProperties.portrait.length; o++) "position" === (r = i.orientationProperties.portrait[o]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), a.orientationProperties.addPortraitProperty(r.key, r.value);
                for (var o = 0; o < i.orientationProperties.landscape.length; o++) {
                    var r = i.orientationProperties.landscape[o];
                    "position" === r.key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), a.orientationProperties.addLandscapePortrait(r.key, r.value)
                }
            }
            return a.enableVisibility(i.platformVisibility, i.orientationVisibility), a
        }, e.UIGroup = function(e, i, s) {
            var n = new t.UIGroup(e);
            if (n.name = i.name, n.x = i.position.x * e.ph2UIManager.gameScale, n.y = i.position.y * e.ph2UIManager.gameScale, n.angle = i.angle, n.scale.x = i.scale.x, n.scale.y = i.scale.y, n.alpha = i.alpha, i.alignment && (n.enableAlignment(), n.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), n.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), s instanceof t.UI ? n.alignment.setAlignTarget(t.AlignTargetType.WORLD) : n.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (n.alignment || n.enableAlignment(), n.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (n.alignment || n.enableAlignment(), n.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) {
                for (n.enableOrientationProperties(), a = 0; a < i.orientationProperties.backup.length; a++) "position" === (o = i.orientationProperties.backup[a]).key && (o.value.x = o.value.x * e.ph2UIManager.gameScale, o.value.y = o.value.y * e.ph2UIManager.gameScale), n.orientationProperties.backupOriginalProperty(o.key, o.value);
                for (a = 0; a < i.orientationProperties.portrait.length; a++) "position" === (o = i.orientationProperties.portrait[a]).key && (o.value.x = o.value.x * e.ph2UIManager.gameScale, o.value.y = o.value.y * e.ph2UIManager.gameScale), n.orientationProperties.addPortraitProperty(o.key, o.value);
                for (var a = 0; a < i.orientationProperties.landscape.length; a++) {
                    var o = i.orientationProperties.landscape[a];
                    "position" === o.key && (o.value.x = o.value.x * e.ph2UIManager.gameScale, o.value.y = o.value.y * e.ph2UIManager.gameScale), n.orientationProperties.addLandscapePortrait(o.key, o.value)
                }
            }
            return n.enableVisibility(i.platformVisibility, i.orientationVisibility), n
        }, e.UIText = function(e, i, s) {
            var n = new t.UIText(e, i.position.x * e.ph2UIManager.gameScale, i.position.y * e.ph2UIManager.gameScale, i.text, {
                font: i.fontSize * e.ph2UIManager.gameScale + "px " + i.fontName,
                fill: i.tint,
                align: i.align,
                stroke: i.stroke,
                strokeThickness: i.strokeThickness * e.ph2UIManager.gameScale
            });
            if (n.name = i.name, n.angle = i.angle, n.anchor.x = i.anchor.x, n.anchor.y = i.anchor.y, n.scale.x = i.scale.x, n.scale.y = i.scale.y, n.alpha = i.alpha, i.alignment && (n.enableAlignment(), n.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), n.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), s instanceof t.UI ? n.alignment.setAlignTarget(t.AlignTargetType.WORLD) : n.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (n.alignment || n.enableAlignment(), n.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (n.alignment || n.enableAlignment(), n.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) {
                for (n.enableOrientationProperties(), a = 0; a < i.orientationProperties.backup.length; a++) "position" === (o = i.orientationProperties.backup[a]).key && (o.value.x = o.value.x * e.ph2UIManager.gameScale, o.value.y = o.value.y * e.ph2UIManager.gameScale), n.orientationProperties.backupOriginalProperty(o.key, o.value);
                for (a = 0; a < i.orientationProperties.portrait.length; a++) "position" === (o = i.orientationProperties.portrait[a]).key && (o.value.x = o.value.x * e.ph2UIManager.gameScale, o.value.y = o.value.y * e.ph2UIManager.gameScale), n.orientationProperties.addPortraitProperty(o.key, o.value);
                for (var a = 0; a < i.orientationProperties.landscape.length; a++) {
                    var o = i.orientationProperties.landscape[a];
                    "position" === o.key && (o.value.x = o.value.x * e.ph2UIManager.gameScale, o.value.y = o.value.y * e.ph2UIManager.gameScale), n.orientationProperties.addLandscapePortrait(o.key, o.value)
                }
            }
            return n.enableVisibility(i.platformVisibility, i.orientationVisibility), n
        }, e.UIButton = function(e, i, s, n) {
            var a;
            if (i.sliceData ? ((a = new t.UISlicedButton(e, i.position.x * e.ph2UIManager.gameScale, i.position.y * e.ph2UIManager.gameScale, s, i.textureName, i.sliceData.width * e.ph2UIManager.gameScale, i.sliceData.height * e.ph2UIManager.gameScale, {
                top: i.sliceData.top * e.ph2UIManager.gameScale,
                bottom: i.sliceData.bottom * e.ph2UIManager.gameScale,
                left: i.sliceData.left * e.ph2UIManager.gameScale,
                right: i.sliceData.right * e.ph2UIManager.gameScale
            })).name = i.name, a.anchor.x = i.anchor.x, a.anchor.y = i.anchor.y, a.angle = i.angle, a.scale.x = i.scale.x, a.scale.y = i.scale.y, a.alpha = i.alpha, a.tint = i.tint, a.x = i.position.x * e.ph2UIManager.gameScale, a.y = i.position.y * e.ph2UIManager.gameScale, i.statesData && "color" === i.transitionMode && a.setTransitionColor(i.statesData.normal, i.statesData.pressed, i.statesData.hover)) : (a = new t.UIButton(e, s), i.statesData ? "image" === i.transitionMode && a.setFrames(i.statesData.hover, i.statesData.normal, i.statesData.pressed, i.statesData.normal) : a.setFrames(i.textureName, i.textureName, i.textureName, i.textureName), a.name = i.name, a.anchor.x = i.anchor.x, a.anchor.y = i.anchor.y, a.angle = i.angle, a.scale.x = i.scale.x, a.scale.y = i.scale.y, a.alpha = i.alpha, a.tint = i.tint, a.x = i.position.x * e.ph2UIManager.gameScale, a.y = i.position.y * e.ph2UIManager.gameScale), i.alignment && (a.enableAlignment(), a.alignment.setLandscapeAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), a.alignment.setPortraitAlignment(i.alignment.type, i.alignment.offset.x, i.alignment.isAbsoluteX, i.alignment.offset.y, i.alignment.isAbsoluteY), n instanceof t.UI ? a.alignment.setAlignTarget(t.AlignTargetType.WORLD) : a.alignment.setAlignTarget(t.AlignTargetType.PARENT)), i.portraitAlignment && (a.alignment || a.enableAlignment(), a.alignment.setPortraitAlignment(i.portraitAlignment.type, i.portraitAlignment.offset.x, i.portraitAlignment.isAbsoluteX, i.portraitAlignment.offset.y, i.portraitAlignment.isAbsoluteY)), i.landscapeAlignment && (a.alignment || a.enableAlignment(), a.alignment.setLandscapeAlignment(i.landscapeAlignment.type, i.landscapeAlignment.offset.x, i.landscapeAlignment.isAbsoluteX, i.landscapeAlignment.offset.y, i.landscapeAlignment.isAbsoluteY)), i.orientationProperties) {
                for (a.enableOrientationProperties(), o = 0; o < i.orientationProperties.backup.length; o++) "position" === (r = i.orientationProperties.backup[o]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), a.orientationProperties.backupOriginalProperty(r.key, r.value);
                for (o = 0; o < i.orientationProperties.portrait.length; o++) "position" === (r = i.orientationProperties.portrait[o]).key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), a.orientationProperties.addPortraitProperty(r.key, r.value);
                for (var o = 0; o < i.orientationProperties.landscape.length; o++) {
                    var r = i.orientationProperties.landscape[o];
                    "position" === r.key && (r.value.x = r.value.x * e.ph2UIManager.gameScale, r.value.y = r.value.y * e.ph2UIManager.gameScale), a.orientationProperties.addLandscapePortrait(r.key, r.value)
                }
            }
            return a.enableVisibility(i.platformVisibility, i.orientationVisibility), a
        }, e
    }();
    t.UIFactory = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e) || this;
            return n.designResolution = new Phaser.Rectangle(0, 0, i, s), n.safeZone = new Phaser.Rectangle(0, 0, i, s), e.ph2UIManager.events.gameSizeChanged.add(n.onGameSizeChanged, n), n
        }
        return __extends(e, t), e.prototype.onGameSizeChanged = function() {
            this.windowSizeChanged()
        }, e.prototype.setSafeZone = function(t, e) {
            this.safeZone.width = t, this.safeZone.height = e
        }, e.prototype.setDesignResolution = function(t, e) {
            this.designResolution.width = t, this.designResolution.height = e
        }, e.prototype.getDesignResolution = function() {
            return this.designResolution
        }, e.prototype.getSafeZone = function() {
            return this.safeZone
        }, e.prototype.enableAlignment = function() {}, e.prototype.enableOrientationProperties = function() {}, e.prototype.windowSizeChanged = function() {
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, e.prototype.destroy = function(e, i) {
            t.prototype.destroy.call(this, e, i), this.safeZone = null, this.designResolution = null
        }, e
    }(Phaser.Group);
    t.UI = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, 0, 0, i) || this;
            return s.forceOut = !0, s
        }
        return __extends(i, e), i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function(t) {
            e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null)
        }, i
    }(Phaser.Button);
    t.UIButton = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t) {
            return e.call(this, t) || this
        }
        return __extends(i, e), i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function(t, i) {
            e.prototype.destroy.call(this, t, i), this.alignment && (this.alignment.destroy(), this.alignment = null)
        }, i
    }(Phaser.Group);
    t.UIGroup = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a, o, r, h) {
            var l = e.call(this, t, i, s, n, a, o, r, h) || this;
            return l.inputEnabled = !0, l.input.start(0, !0), l.input.useHandCursor = !0, l.events.onInputOver.add(l.onInputOverHandler, l), l.events.onInputOut.add(l.onInputOutHandler, l), l.events.onInputDown.add(l.onInputDownHandler, l), l.events.onInputUp.add(l.onInputUpHandler, l), l.justReleasedPreventsOver = Phaser.PointerMode.CURSOR, l.onOverMouseOnly = !0, l.onInputOver = new Phaser.Signal, l.onInputOut = new Phaser.Signal, l.onInputDown = new Phaser.Signal, l.onInputUp = new Phaser.Signal, l.freezeFrames = !1, l.forceOut = !0, l.hoverColor = "#FFFFFF", l.normalColor = "#FFFFFF", l.pressedColor = "#FFFFFF", l
        }
        return __extends(i, e), i.prototype.onInputOverHandler = function(t, e) {
            e.justReleased() && (this.justReleasedPreventsOver & e.pointerMode) === e.pointerMode || this.onOverMouseOnly && !e.isMouse || this.onInputOver && this.onInputOver.dispatch(this, e)
        }, i.prototype.onInputOutHandler = function(t, e) {
            this.onInputOut && this.onInputOut.dispatch(this, e)
        }, i.prototype.onInputDownHandler = function(t, e) {
            this.onInputDown && this.onInputDown.dispatch(this, e)
        }, i.prototype.onInputUpHandler = function(t, e, i) {
            this.onInputUp && this.onInputUp.dispatch(this, e, i)
        }, i.prototype.setTransitionColor = function(t, e, i) {
            this.normalColor = t, this.pressedColor = e, this.hoverColor = i
        }, i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function() {
            for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
            e.prototype.destroy.call(this, t), this.onInputOver.dispose(), this.onInputOut.dispose(), this.onInputDown.dispose(), this.onInputUp.dispose()
        }, i
    }(PhaserNineSlice.NineSlice);
    t.UISlicedButton = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a, o, r, h) {
            return e.call(this, t, i, s, n, a, o, r, h) || this
        }
        return __extends(i, e), i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function() {
            for (var t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
            e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null)
        }, i
    }(PhaserNineSlice.NineSlice);
    t.UISlicedSprite = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a) {
            return e.call(this, t, i, s, n, a) || this
        }
        return __extends(i, e), i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function(t) {
            e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null)
        }, i
    }(Phaser.Sprite);
    t.UISprite = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a) {
            return e.call(this, t, i, s, n, a) || this
        }
        return __extends(i, e), i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) void 0 !== this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function(t) {
            e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null)
        }, i
    }(Phaser.Text);
    t.UIText = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a, o, r) {
            return e.call(this, t, i, s, n, a, o, r) || this
        }
        return __extends(i, e), i.prototype.enableAlignment = function() {
            this.alignment = new t.UIAlignment(this.game)
        }, i.prototype.enableOrientationProperties = function() {
            this.orientationProperties = new t.UIOrientationProperties(this.game, this)
        }, i.prototype.enableVisibility = function(e, i) {
            this.visibility = new t.UIVisibility(this.game), this.visibility.setPlatformVisible(e), this.visibility.setOrientationVisible(i)
        }, i.prototype.windowSizeChanged = function() {
            this.visibility && this.visibility.applyVisibility(this), this.orientationProperties && this.orientationProperties.apply(this), this.alignment && this.alignment.applyAlignment(this);
            for (var t = 0; t < this.children.length; t++) "function" == typeof this.children[t].windowSizeChanged && this.children[t].windowSizeChanged()
        }, i.prototype.destroy = function(t) {
            e.prototype.destroy.call(this, t), this.alignment && (this.alignment.destroy(), this.alignment = null)
        }, i
    }(Phaser.TileSprite);
    t.UITiledSprite = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function t(t) {
            this.animations = {}, this.game = t, this.game.onPause.add(this.onPause, this), this.game.onResume.add(this.onResume, this), this.game.ph2AnimationManager.pauseAllSignal.add(this.pauseAll, this), this.game.ph2AnimationManager.resumeAllSignal.add(this.resumeAll, this), this.game.ph2AnimationManager.stopAllSignal.add(this.stopAll, this)
        }
        return t.prototype.play = function(t, e, i) {
            return this.animations[t] ? this.currentAnim ? this.currentAnim.name === t ? this.currentAnim.isPlaying() ? this.currentAnim : this.currentAnim.play(e, i) : (this.currentAnim.isPlaying() && this.currentAnim.stop(), this.currentAnim = this.animations[t], this.currentAnim.play(e, i)) : (this.currentAnim = this.animations[t], this.currentAnim.play(e, i)) : null
        }, t.prototype.stop = function(t, e, i) {
            this.currentAnim && (t ? this.currentAnim.name === t && this.currentAnim.stop(e, i) : this.currentAnim.stop(e, i))
        }, t.prototype.pause = function(t) {
            this.currentAnim && (t ? this.currentAnim.name === t && this.currentAnim.pause() : this.currentAnim.pause())
        }, t.prototype.resume = function(t) {
            this.currentAnim && (t ? this.currentAnim.name === t && this.currentAnim.resume() : this.currentAnim.resume())
        }, t.prototype.add = function(t) {
            this.animations[t.name] = t
        }, t.prototype.onPause = function() {
            this.currentAnim && this.currentAnim.autoPause()
        }, t.prototype.onResume = function() {
            this.currentAnim && this.currentAnim.autoResume()
        }, t.prototype.getAnimations = function() {
            return this.animations
        }, t.prototype.getCurrentAnimation = function() {
            return this.currentAnim
        }, t.prototype.removeListeners = function(t) {
            var e = this.animations[t];
            e && e.removeListeners()
        }, t.prototype.pauseAll = function() {
            this.currentAnim && this.currentAnim.batchPause()
        }, t.prototype.resumeAll = function() {
            this.currentAnim && this.currentAnim.batchResume()
        }, t.prototype.stopAll = function() {
            this.currentAnim && !this.currentAnim.isStopped() && this.currentAnim.stop()
        }, t.prototype.destroy = function() {
            this.currentAnim && this.currentAnim.stop(), this.game.onPause.remove(this.onPause, this), this.game.onResume.remove(this.onResume, this), this.game.ph2AnimationManager.pauseAllSignal.remove(this.pauseAll, this), this.game.ph2AnimationManager.resumeAllSignal.remove(this.resumeAll, this), this.game.ph2AnimationManager.stopAllSignal.remove(this.stopAll, this);
            for (var t = Object.keys(this.animations), e = 0; e < t.length; e++) this.animations[t[e]].destroy()
        }, t
    }();
    t.AnimationManager = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function t(t) {
            this.game = t, this.alignBounds = new Phaser.Rectangle(0, 0, this.game.width, this.game.height)
        }
        return t.prototype.changeOrientation = function(t) {
            this.currentOrientation = t
        }, t.prototype.getCurrentOrientation = function() {
            return this.currentOrientation
        }, t.alignInParent = function(t, e, i, s) {
            if ("__world" !== t.parent.name) {
                var n = t.parent.scale;
                t.parent.scale.setTo(1), t.alignIn(t.parent, e, i, s), t.left -= t.parent.left + t.parent.width * t.parent.anchor.x, t.top -= t.parent.top + t.parent.height * t.parent.anchor.y, t.parent.scale = n
            }
        }, t
    }();
    t.AlignmentSystem = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    ! function(t) {
        t[t.LANDSCAPE = 0] = "LANDSCAPE", t[t.PORTRAIT = 1] = "PORTRAIT"
    }(t.Orientation || (t.Orientation = {}));
    var e = function() {
        function e(t) {
            this.game = t, this.gameSizeChanged = new Phaser.Signal, this.orientationChanged = new Phaser.Signal
        }
        return e.prototype.onGameResize = function(e, i) {
            this.game.ph2UIManager.alignmentManager.alignBounds.width = e, this.game.ph2UIManager.alignmentManager.alignBounds.height = i, e > i ? this.game.ph2UIManager.alignmentManager.changeOrientation(t.Orientation.LANDSCAPE) : this.game.ph2UIManager.alignmentManager.changeOrientation(t.Orientation.PORTRAIT), this.gameSizeChanged.dispatch(e, i)
        }, e
    }();
    t.UIEventManager = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return TweenLite.defaultEase = Linear.easeNone, s.addAnimationManager(), s.addAnimationFactory(), s
        }
        return __extends(i, e), i.prototype.addAnimationManager = function() {
            Phaser.Game.prototype.ph2AnimationManager = new t.AnimationSystem(this.game), Phaser.Game.prototype.ph2UIManager = new t.UISystem(this.game)
        }, i.prototype.addAnimationFactory = function() {
            Phaser.GameObjectFactory.prototype.ph2AnimationObject = function(t, e, i, s, n) {
                void 0 === n && (n = this.world);
                var a = this.game.ph2AnimationManager.getAnimationObject(i, s);
                return a.x = t, a.y = e, n.add(a), a
            }, Phaser.GameObjectCreator.prototype.ph2AnimationObject = function(t, e, i, s) {
                var n = this.game.ph2AnimationManager.getAnimationObject(i, s);
                return n.x = t, n.y = e, n
            }, Phaser.GameObjectFactory.prototype.ph2UI = function(t, e, i) {
                void 0 === i && (i = this.world);
                var s = this.game.ph2UIManager.getUI(t, e);
                return i.add(s), s
            }, Phaser.GameObjectCreator.prototype.ph2UI = function(t, e) {
                return this.game.ph2UIManager.getUI(t, e)
            }
        }, i
    }(Phaser.Plugin);
    t.AnimationPlugin = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function() {
        function e(e) {
            this.game = e, this.events = new t.UIEventManager(this.game), this.alignmentManager = new t.AlignmentSystem(this.game), this.scale = 1, this.enableVisibilityAndOrientationComponent = !0
        }
        return e.prototype.setCurrentPlatform = function(t) {
            this.currentPlatform = t
        }, e.prototype.setGameScale = function(t) {
            this.scale = t
        }, Object.defineProperty(e.prototype, "gameScale", {
            get: function() {
                return this.scale
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.createCacheUINode = function(e, i, s, n, a) {
            var o = e.name,
                r = o;
            a && (r = a + "/" + o);
            var h = null,
                l = i[r];
            if (null === n) h = t.CacheFactory.UICanvas(o, l);
            else {
                var c = l.type;
                "sprite" === c ? h = t.CacheFactory.UISprite(o, l) : "container" === c ? h = t.CacheFactory.UIGroup(o, l) : "button" === c ? h = t.CacheFactory.UIButton(o, l) : "text" === c && (h = t.CacheFactory.UIText(o, l))
            }
            return h
        }, e.prototype.createCacheUIDataTree = function(t, e, i, s) {
            var n = null;
            if (t) {
                var a = t.name;
                if (n = this.createCacheUINode(t, e, t.animations, i, s), t.children) {
                    s = null !== s ? 0 === s.length ? a : s + "/" + a : "";
                    for (var o = t.children, r = 0; r < o.length; r++) {
                        var h = this.createCacheUIDataTree(o[r], e, n, s);
                        h && n.addChild(h)
                    }
                }
            }
            return n
        }, e.prototype.generateUIData = function(e) {
            var i = e.hierarchy,
                s = e.properties,
                n = this.createCacheUIDataTree(i, s, null, null);
            return new t.UIData(n)
        }, e.prototype.getUIDataFromJSON = function(t) {
            var e = this.game.cache.getJSON(t);
            return e ? this.generateUIData(e) : null
        }, e.prototype.getUIData = function(t) {
            return this.getUIDataFromJSON(t)
        }, e.prototype.getUI = function(t, e) {
            var i = this.getUIData(t),
                s = this.createTree(i.hierarchy, e, null);
            return s.windowSizeChanged(), s
        }, e.prototype.createTree = function(t, e, i) {
            var s = null;
            if (t && (s = this.createNode(t, e, i), t.children))
                for (var n = t.children, a = 0; a < n.length; a++) {
                    var o = this.createTree(n[a], e, s);
                    o && s.addChild(o)
                }
            return s
        }, e.prototype.createNode = function(e, i, s) {
            var n = null;
            return null === s ? n = t.UIFactory.UICanvas(this.game, e) : e instanceof t.CacheUISprite ? n = t.UIFactory.UISprite(this.game, e, i, s) : e instanceof t.CacheUIGroup ? n = t.UIFactory.UIGroup(this.game, e, s) : e instanceof t.CacheUIButton ? n = t.UIFactory.UIButton(this.game, e, i, s) : e instanceof t.CacheUIText && (n = t.UIFactory.UIText(this.game, e, s)), n
        }, e.findObject = function(t, e) {
            for (var i = e, s = "/" !== t[0] ? 0 : 1, n = t.split("/"), a = s; a < n.length; a++) {
                var o = n[a],
                    r = i.children;
                i = null;
                for (var h = 0, l = r.length; h < l; ++h) {
                    var c = r[h];
                    if (c.name === o) {
                        i = c;
                        break
                    }
                }
                if (!i) return null
            }
            return i
        }, e
    }();
    t.UISystem = e
}(Ph2 || (Ph2 = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Ph2;
! function(t) {
    var e = function() {
        function e(t) {
            this.game = t, this.onProgress = new Phaser.Signal, this.useScaledAssets = !1, this.spineScaleVariant = void 0, this.debugEnabled = !1, this.searchPath = "", this.defaultAtlasExtension = this.defaultJSONExtension = ".json", this.defaultImageExtension = ".png", this.defaultBitmapFontImageExtension = ".png", this.defaultBitmapFontFontExtension = ".fnt"
        }
        return e.prototype.debug = function(t) {
            this.debugEnabled = t
        }, e.prototype.useScalingVariant = function(t) {
            this.useScaledAssets = !0, this.scaleFolder = t
        }, e.prototype.useSpineScalingVariant = function(t) {
            this.spineScaleVariant = t
        }, e.prototype.disableScalingVariant = function() {
            this.useScaledAssets = !1
        }, e.prototype.disableSpineScalingVariant = function() {
            this.spineScaleVariant = void 0
        }, e.prototype.setAssetsResources = function(t) {
            this.resources = t
        }, e.prototype.load = function(t) {
            if (this.debugMessage("Loading Resource Groups: " + JSON.stringify(t)), this.resources)
                if ("string" == typeof t) this.loadGroup(t);
                else
                    for (var e = 0, i = t; e < i.length; e++) {
                        var s = i[e];
                        this.loadGroup(s)
                    }
        }, e.prototype.loadGroup = function(t) {
            this.debugMessage("Loading: " + t);
            var e = this.resources[t];
            if (e) {
                if (this.useScaledAssets && this.debugMessage("Using scaling variant: " + this.scaleFolder), e.image) {
                    this.cleanSearchPath();
                    for (var i = 0, s = e.image; i < s.length; i++) {
                        var n = s[i];
                        void 0 !== n.searchPath ? this.setSearchPath(n.searchPath) : this.loadImage(n.key, n.url)
                    }
                }
                if (e.json) {
                    this.cleanSearchPath();
                    for (var a = 0, o = e.json; a < o.length; a++) {
                        var r = o[a];
                        void 0 !== r.searchPath ? this.setSearchPath(r.searchPath) : this.loadJson(r.key, r.url)
                    }
                }
                if (e.atlas) {
                    this.cleanSearchPath();
                    for (var h = 0, l = e.atlas; h < l.length; h++) {
                        var c = l[h];
                        void 0 !== c.searchPath ? this.setSearchPath(c.searchPath) : this.loadAtlas(c.key, c.texture, c.atlas)
                    }
                }
                if (e.spine) {
                    this.cleanSearchPath();
                    for (var u = 0, d = e.spine; u < d.length; u++) {
                        var p = d[u];
                        void 0 !== p.searchPath ? this.setSearchPath(p.searchPath) : this.loadSpine(p.key, p.url)
                    }
                }
                if (e.bitmapFont) {
                    this.cleanSearchPath();
                    for (var m = 0, g = e.bitmapFont; m < g.length; m++) {
                        var f = g[m];
                        void 0 !== f.searchPath ? this.setSearchPath(f.searchPath) : this.loadBitmapFont(f.key, f.texture, f.fnt)
                    }
                }
            }
        }, e.prototype.cleanSearchPath = function() {
            this.searchPath = "", this.debugMessage('+++ searchPath: ""')
        }, e.prototype.setSearchPath = function(t) {
            this.searchPath = t, this.debugMessage('+++ searchPath: "' + t + '"')
        }, e.prototype.loadImage = function(t, e) {
            void 0 === e && (e = t + this.defaultImageExtension), e = this.getUrl(e), this.game.load.image(t, e), this.debugMessage("load.image: " + t + " | " + e)
        }, e.prototype.loadJson = function(e, i) {
            void 0 === i && (i = e + this.defaultJSONExtension), i = t.Loader.joinPath(this.searchPath, i), this.game.load.json(e, i), this.debugMessage("load.json: " + e + " | " + i)
        }, e.prototype.loadAtlas = function(t, e, i) {
            void 0 === e && (e = t + this.defaultImageExtension), void 0 === i && (i = t + this.defaultAtlasExtension), e = this.getUrl(e), i = this.getUrl(i), this.game.load.atlas(t, e, i), this.debugMessage("load.atlas: " + t + " | " + e + " | " + i)
        }, e.prototype.loadSpine = function(e, i) {
            this.game.load.spine && (void 0 === i && (i = e + this.defaultJSONExtension), i = t.Loader.joinPath(this.searchPath, i), this.spineScaleVariant ? (this.game.load.spine(e, i, [this.spineScaleVariant]), this.debugMessage("load.spine: " + e + " | " + i + " | " + this.spineScaleVariant)) : (this.game.load.spine(e, i), this.debugMessage("load.atlas: " + e + " | " + i)))
        }, e.prototype.loadBitmapFont = function(t, e, i) {
            void 0 === e && (e = t + this.defaultBitmapFontImageExtension), void 0 === i && (i = t + this.defaultBitmapFontFontExtension), e = this.getUrl(e), i = this.getUrl(i), this.game.load.bitmapFont(t, e, i), this.debugMessage("load.bitmapFont: " + t + " | " + e + " | " + i)
        }, e.prototype.debugMessage = function(t) {
            this.debugEnabled
        }, e.prototype.getUrl = function(e) {
            if (this.useScaledAssets) {
                var i = t.Loader.getDirectoryName(e),
                    s = t.Loader.getBaseName(e);
                e = t.Loader.joinPath(i, this.scaleFolder, s)
            }
            return t.Loader.joinPath(this.searchPath, e)
        }, e.getDirectoryName = function(t) {
            return t.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/, "$2")
        }, e.getBaseName = function(t) {
            var e = t.indexOf("?");
            e > 0 && (t = t.substring(0, e));
            var i = /(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(t.replace(/(\/|\\\\)$/, ""));
            return i ? i[2] : t
        }, e.joinPath = function() {
            for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
            for (var i = arguments.length, s = "", n = 0; n < i; n++) s = (s + ("" === s ? "" : "/") + arguments[n]).replace(/(\/|\\\\)$/, "");
            return s
        }, e
    }();
    t.Loader = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.addLoader(), s
        }
        return __extends(i, e), i.prototype.addLoader = function() {
            Phaser.Game.prototype.ph2Loader = new t.Loader(this.game)
        }, i
    }(Phaser.Plugin);
    t.LoaderPlugin = e
}(Ph2 || (Ph2 = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Ph2;
! function(t) {
    var e = function() {
        function t(t) {
            this.game = t, this.signals = {}
        }
        return t.prototype.addObserver = function(t, e, i, s) {
            this.signals[t] ? s ? this.signals[t].addOnce(e, i) : this.signals[t].add(e, i) : (this.createNotification(t), this.addObserver(t, e, i, s))
        }, t.prototype.removeObserver = function(t, e, i) {
            this.signals[t] && this.signals[t].remove(e, i)
        }, t.prototype.removeAllObservers = function(t, e) {
            this.signals[t] && (this.signals[t].removeAll(e), void 0 === e && this.removeSignal(t))
        }, t.prototype.removeAllObserversFromContext = function(t) {
            for (var e in this.signals) this.signals.hasOwnProperty(e) && this.signals[e].removeAll(t)
        }, t.prototype.postNotification = function(t) {
            for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
            if (this.signals[t]) {
                var s = [];
                arguments.length > 1 && (s = Array.prototype.splice.call(arguments, 1)), Phaser.Signal.prototype.dispatch.apply(this.signals[t], s)
            }
        }, t.prototype.createNotification = function(t) {
            this.signals[t] || (this.signals[t] = new Phaser.Signal)
        }, t.prototype.removeSignal = function(t) {
            this.signals[t] && (this.signals[t].dispose(), delete this.signals[t])
        }, t
    }();
    t.NotificationManager = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.addNotificationManager(), s
        }
        return __extends(i, e), i.prototype.addNotificationManager = function() {
            Phaser.Game.prototype.ph2NotificationManager = new t.NotificationManager(this.game)
        }, i
    }(Phaser.Plugin);
    t.NotificationPlugin = e
}(Ph2 || (Ph2 = {}));
var _gsScope = "undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window;
(_gsScope._gsQueue || (_gsScope._gsQueue = [])).push(function() {
        "use strict";
        _gsScope._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) {
                var s = function(t) {
                        var e, i = [],
                            s = t.length;
                        for (e = 0; e !== s; i.push(t[e++]));
                        return i
                    },
                    n = function(t, e, i) {
                        var s, n, a = t.cycle;
                        for (s in a) n = a[s], t[s] = "function" == typeof n ? n(i, e[i]) : n[i % n.length];
                        delete t.cycle
                    },
                    a = function(t, e, s) {
                        i.call(this, t, e, s), this._cycle = 0, this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._repeat && this._uncache(!0), this.render = a.prototype.render
                    },
                    o = 1e-10,
                    r = i._internals,
                    h = r.isSelector,
                    l = r.isArray,
                    c = a.prototype = i.to({}, .1, {}),
                    u = [];
                a.version = "1.20.3", c.constructor = a, c.kill()._gc = !1, a.killTweensOf = a.killDelayedCallsTo = i.killTweensOf, a.getTweensOf = i.getTweensOf, a.lagSmoothing = i.lagSmoothing, a.ticker = i.ticker, a.render = i.render, c.invalidate = function() {
                    return this._yoyo = !0 === this.vars.yoyo || !!this.vars.yoyoEase, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._yoyoEase = null, this._uncache(!0), i.prototype.invalidate.call(this)
                }, c.updateTo = function(t, e) {
                    var s, n = this.ratio,
                        a = this.vars.immediateRender || t.immediateRender;
                    e && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
                    for (s in t) this.vars[s] = t[s];
                    if (this._initted || a)
                        if (e) this._initted = !1, a && this.render(0, !0, !0);
                        else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && i._onPluginEvent("_onDisable", this), this._time / this._duration > .998) {
                        var o = this._totalTime;
                        this.render(0, !0, !1), this._initted = !1, this.render(o, !0, !1)
                    } else if (this._initted = !1, this._init(), this._time > 0 || a)
                        for (var r, h = 1 / (1 - n), l = this._firstPT; l;) r = l.s + l.c, l.c *= h, l.s = r - l.c, l = l._next;
                    return this
                }, c.render = function(t, e, s) {
                    this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
                    var n, a, h, l, c, u, d, p, m, g = this._dirty ? this.totalDuration() : this._totalDuration,
                        f = this._time,
                        _ = this._totalTime,
                        y = this._cycle,
                        v = this._duration,
                        b = this._rawPrevTime;
                    if (t >= g - 1e-7 && t >= 0 ? (this._totalTime = g, this._cycle = this._repeat, this._yoyo && 0 != (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = v, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), this._reversed || (n = !0, a = "onComplete", s = s || this._timeline.autoRemoveChildren), 0 === v && (this._initted || !this.vars.lazy || s) && (this._startTime === this._timeline._duration && (t = 0), (0 > b || 0 >= t && t >= -1e-7 || b === o && "isPause" !== this.data) && b !== t && (s = !0, b > o && (a = "onReverseComplete")), this._rawPrevTime = p = !e || t || b === t ? t : o)) : 1e-7 > t ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== _ || 0 === v && b > 0) && (a = "onReverseComplete", n = this._reversed), 0 > t && (this._active = !1, 0 === v && (this._initted || !this.vars.lazy || s) && (b >= 0 && (s = !0), this._rawPrevTime = p = !e || t || b === t ? t : o)), this._initted || (s = !0)) : (this._totalTime = this._time = t, 0 !== this._repeat && (l = v + this._repeatDelay, this._cycle = this._totalTime / l >> 0, 0 !== this._cycle && this._cycle === this._totalTime / l && t >= _ && this._cycle--, this._time = this._totalTime - this._cycle * l, this._yoyo && 0 != (1 & this._cycle) && (this._time = v - this._time, (m = this._yoyoEase || this.vars.yoyoEase) && (this._yoyoEase || (!0 !== m || this._initted ? this._yoyoEase = m = !0 === m ? this._ease : m instanceof Ease ? m : Ease.map[m] : (m = this.vars.ease, this._yoyoEase = m = m ? m instanceof Ease ? m : "function" == typeof m ? new Ease(m, this.vars.easeParams) : Ease.map[m] || i.defaultEase : i.defaultEase)), this.ratio = m ? 1 - m.getRatio((v - this._time) / v) : 0)), this._time > v ? this._time = v : this._time < 0 && (this._time = 0)), this._easeType && !m ? (c = this._time / v, u = this._easeType, d = this._easePower, (1 === u || 3 === u && c >= .5) && (c = 1 - c), 3 === u && (c *= 2), 1 === d ? c *= c : 2 === d ? c *= c * c : 3 === d ? c *= c * c * c : 4 === d && (c *= c * c * c * c), 1 === u ? this.ratio = 1 - c : 2 === u ? this.ratio = c : this._time / v < .5 ? this.ratio = c / 2 : this.ratio = 1 - c / 2) : m || (this.ratio = this._ease.getRatio(this._time / v))), f !== this._time || s || y !== this._cycle) {
                        if (!this._initted) {
                            if (this._init(), !this._initted || this._gc) return;
                            if (!s && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration)) return this._time = f, this._totalTime = _, this._rawPrevTime = b, this._cycle = y, r.lazyTweens.push(this), void(this._lazy = [t, e]);
                            !this._time || n || m ? n && this._ease._calcEnd && !m && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1)) : this.ratio = this._ease.getRatio(this._time / v)
                        }
                        for (!1 !== this._lazy && (this._lazy = !1), this._active || !this._paused && this._time !== f && t >= 0 && (this._active = !0), 0 === _ && (2 === this._initted && t > 0 && this._init(), this._startAt && (t >= 0 ? this._startAt.render(t, !0, s) : a || (a = "_dummyGS")), this.vars.onStart && (0 !== this._totalTime || 0 === v) && (e || this._callback("onStart"))), h = this._firstPT; h;) h.f ? h.t[h.p](h.c * this.ratio + h.s) : h.t[h.p] = h.c * this.ratio + h.s, h = h._next;
                        this._onUpdate && (0 > t && this._startAt && this._startTime && this._startAt.render(t, !0, s), e || (this._totalTime !== _ || a) && this._callback("onUpdate")), this._cycle !== y && (e || this._gc || this.vars.onRepeat && this._callback("onRepeat")), a && (!this._gc || s) && (0 > t && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(t, !0, s), n && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[a] && this._callback(a), 0 === v && this._rawPrevTime === o && p !== o && (this._rawPrevTime = 0))
                    } else _ !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate"))
                }, a.to = function(t, e, i) {
                    return new a(t, e, i)
                }, a.from = function(t, e, i) {
                    return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, new a(t, e, i)
                }, a.fromTo = function(t, e, i, s) {
                    return s.startAt = i, s.immediateRender = 0 != s.immediateRender && 0 != i.immediateRender, new a(t, e, s)
                }, a.staggerTo = a.allTo = function(t, e, o, r, c, d, p) {
                    r = r || 0;
                    var m, g, f, _, y = 0,
                        v = [],
                        b = o.cycle,
                        S = o.startAt && o.startAt.cycle;
                    for (l(t) || ("string" == typeof t && (t = i.selector(t) || t), h(t) && (t = s(t))), t = t || [], 0 > r && ((t = s(t)).reverse(), r *= -1), m = t.length - 1, f = 0; m >= f; f++) {
                        g = {};
                        for (_ in o) g[_] = o[_];
                        if (b && (n(g, t, f), null != g.duration && (e = g.duration, delete g.duration)), S) {
                            S = g.startAt = {};
                            for (_ in o.startAt) S[_] = o.startAt[_];
                            n(g.startAt, t, f)
                        }
                        g.delay = y + (g.delay || 0), f === m && c && (g.onComplete = function() {
                            o.onComplete && o.onComplete.apply(o.onCompleteScope || this, arguments), c.apply(p || o.callbackScope || this, d || u)
                        }), v[f] = new a(t[f], e, g), y += r
                    }
                    return v
                }, a.staggerFrom = a.allFrom = function(t, e, i, s, n, o, r) {
                    return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, a.staggerTo(t, e, i, s, n, o, r)
                }, a.staggerFromTo = a.allFromTo = function(t, e, i, s, n, o, r, h) {
                    return s.startAt = i, s.immediateRender = 0 != s.immediateRender && 0 != i.immediateRender, a.staggerTo(t, e, s, n, o, r, h)
                }, a.delayedCall = function(t, e, i, s, n) {
                    return new a(e, 0, {
                        delay: t,
                        onComplete: e,
                        onCompleteParams: i,
                        callbackScope: s,
                        onReverseComplete: e,
                        onReverseCompleteParams: i,
                        immediateRender: !1,
                        useFrames: n,
                        overwrite: 0
                    })
                }, a.set = function(t, e) {
                    return new a(t, 0, e)
                }, a.isTweening = function(t) {
                    return i.getTweensOf(t, !0).length > 0
                };
                var d = function(t, e) {
                        for (var s = [], n = 0, a = t._first; a;) a instanceof i ? s[n++] = a : (e && (s[n++] = a), s = s.concat(d(a, e)), n = s.length), a = a._next;
                        return s
                    },
                    p = a.getAllTweens = function(e) {
                        return d(t._rootTimeline, e).concat(d(t._rootFramesTimeline, e))
                    };
                a.killAll = function(t, i, s, n) {
                    null == i && (i = !0), null == s && (s = !0);
                    var a, o, r, h = p(0 != n),
                        l = h.length,
                        c = i && s && n;
                    for (r = 0; l > r; r++) o = h[r], (c || o instanceof e || (a = o.target === o.vars.onComplete) && s || i && !a) && (t ? o.totalTime(o._reversed ? 0 : o.totalDuration()) : o._enabled(!1, !1))
                }, a.killChildTweensOf = function(t, e) {
                    if (null != t) {
                        var n, o, c, u, d, p = r.tweenLookup;
                        if ("string" == typeof t && (t = i.selector(t) || t), h(t) && (t = s(t)), l(t))
                            for (u = t.length; --u > -1;) a.killChildTweensOf(t[u], e);
                        else {
                            n = [];
                            for (c in p)
                                for (o = p[c].target.parentNode; o;) o === t && (n = n.concat(p[c].tweens)), o = o.parentNode;
                            for (d = n.length, u = 0; d > u; u++) e && n[u].totalTime(n[u].totalDuration()), n[u]._enabled(!1, !1)
                        }
                    }
                };
                var m = function(t, i, s, n) {
                    i = !1 !== i, s = !1 !== s;
                    for (var a, o, r = p(n = !1 !== n), h = i && s && n, l = r.length; --l > -1;) o = r[l], (h || o instanceof e || (a = o.target === o.vars.onComplete) && s || i && !a) && o.paused(t)
                };
                return a.pauseAll = function(t, e, i) {
                    m(!0, t, e, i)
                }, a.resumeAll = function(t, e, i) {
                    m(!1, t, e, i)
                }, a.globalTimeScale = function(e) {
                    var s = t._rootTimeline,
                        n = i.ticker.time;
                    return arguments.length ? (e = e || o, s._startTime = n - (n - s._startTime) * s._timeScale / e, s = t._rootFramesTimeline, n = i.ticker.frame, s._startTime = n - (n - s._startTime) * s._timeScale / e, s._timeScale = t._rootTimeline._timeScale = e, e) : s._timeScale
                }, c.progress = function(t, e) {
                    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration()
                }, c.totalProgress = function(t, e) {
                    return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration()
                }, c.time = function(t, e) {
                    return arguments.length ? (this._dirty && this.totalDuration(), t > this._duration && (t = this._duration), this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(t, e)) : this._time
                }, c.duration = function(e) {
                    return arguments.length ? t.prototype.duration.call(this, e) : this._duration
                }, c.totalDuration = function(t) {
                    return arguments.length ? -1 === this._repeat ? this : this.duration((t - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration)
                }, c.repeat = function(t) {
                    return arguments.length ? (this._repeat = t, this._uncache(!0)) : this._repeat
                }, c.repeatDelay = function(t) {
                    return arguments.length ? (this._repeatDelay = t, this._uncache(!0)) : this._repeatDelay
                }, c.yoyo = function(t) {
                    return arguments.length ? (this._yoyo = t, this) : this._yoyo
                }, a
            }, !0), _gsScope._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(t, e, i) {
                var s = function(t) {
                        e.call(this, t), this._labels = {}, this.autoRemoveChildren = !0 === this.vars.autoRemoveChildren, this.smoothChildTiming = !0 === this.vars.smoothChildTiming, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                        var i, s, n = this.vars;
                        for (s in n) i = n[s], h(i) && -1 !== i.join("").indexOf("{self}") && (n[s] = this._swapSelfInParams(i));
                        h(n.tweens) && this.add(n.tweens, 0, n.align, n.stagger)
                    },
                    n = 1e-10,
                    a = i._internals,
                    o = s._internals = {},
                    r = a.isSelector,
                    h = a.isArray,
                    l = a.lazyTweens,
                    c = a.lazyRender,
                    u = _gsScope._gsDefine.globals,
                    d = function(t) {
                        var e, i = {};
                        for (e in t) i[e] = t[e];
                        return i
                    },
                    p = function(t, e, i) {
                        var s, n, a = t.cycle;
                        for (s in a) n = a[s], t[s] = "function" == typeof n ? n(i, e[i]) : n[i % n.length];
                        delete t.cycle
                    },
                    m = o.pauseCallback = function() {},
                    g = function(t) {
                        var e, i = [],
                            s = t.length;
                        for (e = 0; e !== s; i.push(t[e++]));
                        return i
                    },
                    f = s.prototype = new e;
                return s.version = "1.20.3", f.constructor = s, f.kill()._gc = f._forcingPlayhead = f._hasPause = !1, f.to = function(t, e, s, n) {
                    var a = s.repeat && u.TweenMax || i;
                    return e ? this.add(new a(t, e, s), n) : this.set(t, s, n)
                }, f.from = function(t, e, s, n) {
                    return this.add((s.repeat && u.TweenMax || i).from(t, e, s), n)
                }, f.fromTo = function(t, e, s, n, a) {
                    var o = n.repeat && u.TweenMax || i;
                    return e ? this.add(o.fromTo(t, e, s, n), a) : this.set(t, n, a)
                }, f.staggerTo = function(t, e, n, a, o, h, l, c) {
                    var u, m, f = new s({
                            onComplete: h,
                            onCompleteParams: l,
                            callbackScope: c,
                            smoothChildTiming: this.smoothChildTiming
                        }),
                        _ = n.cycle;
                    for ("string" == typeof t && (t = i.selector(t) || t), r(t = t || []) && (t = g(t)), 0 > (a = a || 0) && ((t = g(t)).reverse(), a *= -1), m = 0; m < t.length; m++)(u = d(n)).startAt && (u.startAt = d(u.startAt), u.startAt.cycle && p(u.startAt, t, m)), _ && (p(u, t, m), null != u.duration && (e = u.duration, delete u.duration)), f.to(t[m], e, u, m * a);
                    return this.add(f, o)
                }, f.staggerFrom = function(t, e, i, s, n, a, o, r) {
                    return i.immediateRender = 0 != i.immediateRender, i.runBackwards = !0, this.staggerTo(t, e, i, s, n, a, o, r)
                }, f.staggerFromTo = function(t, e, i, s, n, a, o, r, h) {
                    return s.startAt = i, s.immediateRender = 0 != s.immediateRender && 0 != i.immediateRender, this.staggerTo(t, e, s, n, a, o, r, h)
                }, f.call = function(t, e, s, n) {
                    return this.add(i.delayedCall(0, t, e, s), n)
                }, f.set = function(t, e, s) {
                    return s = this._parseTimeOrLabel(s, 0, !0), null == e.immediateRender && (e.immediateRender = s === this._time && !this._paused), this.add(new i(t, 0, e), s)
                }, s.exportRoot = function(t, e) {
                    null == (t = t || {}).smoothChildTiming && (t.smoothChildTiming = !0);
                    var n, a, o, r, h = new s(t),
                        l = h._timeline;
                    for (null == e && (e = !0), l._remove(h, !0), h._startTime = 0, h._rawPrevTime = h._time = h._totalTime = l._time, o = l._first; o;) r = o._next, e && o instanceof i && o.target === o.vars.onComplete || (0 > (a = o._startTime - o._delay) && (n = 1), h.add(o, a)), o = r;
                    return l.add(h, 0), n && h.totalDuration(), h
                }, f.add = function(n, a, o, r) {
                    var l, c, u, d, p, m;
                    if ("number" != typeof a && (a = this._parseTimeOrLabel(a, 0, !0, n)), !(n instanceof t)) {
                        if (n instanceof Array || n && n.push && h(n)) {
                            for (o = o || "normal", r = r || 0, l = a, c = n.length, u = 0; c > u; u++) h(d = n[u]) && (d = new s({
                                tweens: d
                            })), this.add(d, l), "string" != typeof d && "function" != typeof d && ("sequence" === o ? l = d._startTime + d.totalDuration() / d._timeScale : "start" === o && (d._startTime -= d.delay())), l += r;
                            return this._uncache(!0)
                        }
                        if ("string" == typeof n) return this.addLabel(n, a);
                        if ("function" != typeof n) throw "Cannot add " + n + " into the timeline; it is not a tween, timeline, function, or string.";
                        n = i.delayedCall(0, n)
                    }
                    if (e.prototype.add.call(this, n, a), n._time && n.render((this.rawTime() - n._startTime) * n._timeScale, !1, !1), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                        for (p = this, m = p.rawTime() > n._startTime; p._timeline;) m && p._timeline.smoothChildTiming ? p.totalTime(p._totalTime, !0) : p._gc && p._enabled(!0, !1), p = p._timeline;
                    return this
                }, f.remove = function(e) {
                    if (e instanceof t) {
                        this._remove(e, !1);
                        var i = e._timeline = e.vars.useFrames ? t._rootFramesTimeline : t._rootTimeline;
                        return e._startTime = (e._paused ? e._pauseTime : i._time) - (e._reversed ? e.totalDuration() - e._totalTime : e._totalTime) / e._timeScale, this
                    }
                    if (e instanceof Array || e && e.push && h(e)) {
                        for (var s = e.length; --s > -1;) this.remove(e[s]);
                        return this
                    }
                    return "string" == typeof e ? this.removeLabel(e) : this.kill(null, e)
                }, f._remove = function(t, i) {
                    return e.prototype._remove.call(this, t, i), this._last ? this._time > this.duration() && (this._time = this._duration, this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
                }, f.append = function(t, e) {
                    return this.add(t, this._parseTimeOrLabel(null, e, !0, t))
                }, f.insert = f.insertMultiple = function(t, e, i, s) {
                    return this.add(t, e || 0, i, s)
                }, f.appendMultiple = function(t, e, i, s) {
                    return this.add(t, this._parseTimeOrLabel(null, e, !0, t), i, s)
                }, f.addLabel = function(t, e) {
                    return this._labels[t] = this._parseTimeOrLabel(e), this
                }, f.addPause = function(t, e, s, n) {
                    var a = i.delayedCall(0, m, s, n || this);
                    return a.vars.onComplete = a.vars.onReverseComplete = e, a.data = "isPause", this._hasPause = !0, this.add(a, t)
                }, f.removeLabel = function(t) {
                    return delete this._labels[t], this
                }, f.getLabelTime = function(t) {
                    return null != this._labels[t] ? this._labels[t] : -1
                }, f._parseTimeOrLabel = function(e, i, s, n) {
                    var a, o;
                    if (n instanceof t && n.timeline === this) this.remove(n);
                    else if (n && (n instanceof Array || n.push && h(n)))
                        for (o = n.length; --o > -1;) n[o] instanceof t && n[o].timeline === this && this.remove(n[o]);
                    if (a = "number" != typeof e || i ? this.duration() > 99999999999 ? this.recent().endTime(!1) : this._duration : 0, "string" == typeof i) return this._parseTimeOrLabel(i, s && "number" == typeof e && null == this._labels[i] ? e - a : 0, s);
                    if (i = i || 0, "string" != typeof e || !isNaN(e) && null == this._labels[e]) null == e && (e = a);
                    else {
                        if (-1 === (o = e.indexOf("="))) return null == this._labels[e] ? s ? this._labels[e] = a + i : i : this._labels[e] + i;
                        i = parseInt(e.charAt(o - 1) + "1", 10) * Number(e.substr(o + 1)), e = o > 1 ? this._parseTimeOrLabel(e.substr(0, o - 1), 0, s) : a
                    }
                    return Number(e) + i
                }, f.seek = function(t, e) {
                    return this.totalTime("number" == typeof t ? t : this._parseTimeOrLabel(t), !1 !== e)
                }, f.stop = function() {
                    return this.paused(!0)
                }, f.gotoAndPlay = function(t, e) {
                    return this.play(t, e)
                }, f.gotoAndStop = function(t, e) {
                    return this.pause(t, e)
                }, f.render = function(t, e, i) {
                    this._gc && this._enabled(!0, !1);
                    var s, a, o, r, h, u, d, p = this._time,
                        m = this._dirty ? this.totalDuration() : this._totalDuration,
                        g = this._startTime,
                        f = this._timeScale,
                        _ = this._paused;
                    if (p !== this._time && (t += this._time - p), t >= m - 1e-7 && t >= 0) this._totalTime = this._time = m, this._reversed || this._hasPausedChild() || (a = !0, r = "onComplete", h = !!this._timeline.autoRemoveChildren, 0 === this._duration && (0 >= t && t >= -1e-7 || this._rawPrevTime < 0 || this._rawPrevTime === n) && this._rawPrevTime !== t && this._first && (h = !0, this._rawPrevTime > n && (r = "onReverseComplete"))), this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : n, t = m + 1e-4;
                    else if (1e-7 > t)
                        if (this._totalTime = this._time = 0, (0 !== p || 0 === this._duration && this._rawPrevTime !== n && (this._rawPrevTime > 0 || 0 > t && this._rawPrevTime >= 0)) && (r = "onReverseComplete", a = this._reversed), 0 > t) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (h = a = !0, r = "onReverseComplete") : this._rawPrevTime >= 0 && this._first && (h = !0), this._rawPrevTime = t;
                        else {
                            if (this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : n, 0 === t && a)
                                for (s = this._first; s && 0 === s._startTime;) s._duration || (a = !1), s = s._next;
                            t = 0, this._initted || (h = !0)
                        } else {
                        if (this._hasPause && !this._forcingPlayhead && !e) {
                            if (t >= p)
                                for (s = this._first; s && s._startTime <= t && !u;) s._duration || "isPause" !== s.data || s.ratio || 0 === s._startTime && 0 === this._rawPrevTime || (u = s), s = s._next;
                            else
                                for (s = this._last; s && s._startTime >= t && !u;) s._duration || "isPause" === s.data && s._rawPrevTime > 0 && (u = s), s = s._prev;
                            u && (this._time = t = u._startTime, this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay))
                        }
                        this._totalTime = this._time = this._rawPrevTime = t
                    } if (this._time !== p && this._first || i || h || u) {
                        if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== p && t > 0 && (this._active = !0), 0 === p && this.vars.onStart && (0 === this._time && this._duration || e || this._callback("onStart")), (d = this._time) >= p)
                            for (s = this._first; s && (o = s._next, d === this._time && (!this._paused || _));)(s._active || s._startTime <= d && !s._paused && !s._gc) && (u === s && this.pause(), s._reversed ? s.render((s._dirty ? s.totalDuration() : s._totalDuration) - (t - s._startTime) * s._timeScale, e, i) : s.render((t - s._startTime) * s._timeScale, e, i)), s = o;
                        else
                            for (s = this._last; s && (o = s._prev, d === this._time && (!this._paused || _));) {
                                if (s._active || s._startTime <= p && !s._paused && !s._gc) {
                                    if (u === s) {
                                        for (u = s._prev; u && u.endTime() > this._time;) u.render(u._reversed ? u.totalDuration() - (t - u._startTime) * u._timeScale : (t - u._startTime) * u._timeScale, e, i), u = u._prev;
                                        u = null, this.pause()
                                    }
                                    s._reversed ? s.render((s._dirty ? s.totalDuration() : s._totalDuration) - (t - s._startTime) * s._timeScale, e, i) : s.render((t - s._startTime) * s._timeScale, e, i)
                                }
                                s = o
                            }
                        this._onUpdate && (e || (l.length && c(), this._callback("onUpdate"))), r && (this._gc || (g === this._startTime || f !== this._timeScale) && (0 === this._time || m >= this.totalDuration()) && (a && (l.length && c(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[r] && this._callback(r)))
                    }
                }, f._hasPausedChild = function() {
                    for (var t = this._first; t;) {
                        if (t._paused || t instanceof s && t._hasPausedChild()) return !0;
                        t = t._next
                    }
                    return !1
                }, f.getChildren = function(t, e, s, n) {
                    n = n || -9999999999;
                    for (var a = [], o = this._first, r = 0; o;) o._startTime < n || (o instanceof i ? !1 !== e && (a[r++] = o) : (!1 !== s && (a[r++] = o), !1 !== t && (a = a.concat(o.getChildren(!0, e, s)), r = a.length))), o = o._next;
                    return a
                }, f.getTweensOf = function(t, e) {
                    var s, n, a = this._gc,
                        o = [],
                        r = 0;
                    for (a && this._enabled(!0, !0), n = (s = i.getTweensOf(t)).length; --n > -1;)(s[n].timeline === this || e && this._contains(s[n])) && (o[r++] = s[n]);
                    return a && this._enabled(!1, !0), o
                }, f.recent = function() {
                    return this._recent
                }, f._contains = function(t) {
                    for (var e = t.timeline; e;) {
                        if (e === this) return !0;
                        e = e.timeline
                    }
                    return !1
                }, f.shiftChildren = function(t, e, i) {
                    i = i || 0;
                    for (var s, n = this._first, a = this._labels; n;) n._startTime >= i && (n._startTime += t), n = n._next;
                    if (e)
                        for (s in a) a[s] >= i && (a[s] += t);
                    return this._uncache(!0)
                }, f._kill = function(t, e) {
                    if (!t && !e) return this._enabled(!1, !1);
                    for (var i = e ? this.getTweensOf(e) : this.getChildren(!0, !0, !1), s = i.length, n = !1; --s > -1;) i[s]._kill(t, e) && (n = !0);
                    return n
                }, f.clear = function(t) {
                    var e = this.getChildren(!1, !0, !0),
                        i = e.length;
                    for (this._time = this._totalTime = 0; --i > -1;) e[i]._enabled(!1, !1);
                    return !1 !== t && (this._labels = {}), this._uncache(!0)
                }, f.invalidate = function() {
                    for (var e = this._first; e;) e.invalidate(), e = e._next;
                    return t.prototype.invalidate.call(this)
                }, f._enabled = function(t, i) {
                    if (t === this._gc)
                        for (var s = this._first; s;) s._enabled(t, !0), s = s._next;
                    return e.prototype._enabled.call(this, t, i)
                }, f.totalTime = function(e, i, s) {
                    this._forcingPlayhead = !0;
                    var n = t.prototype.totalTime.apply(this, arguments);
                    return this._forcingPlayhead = !1, n
                }, f.duration = function(t) {
                    return arguments.length ? (0 !== this.duration() && 0 !== t && this.timeScale(this._duration / t), this) : (this._dirty && this.totalDuration(), this._duration)
                }, f.totalDuration = function(t) {
                    if (!arguments.length) {
                        if (this._dirty) {
                            for (var e, i, s = 0, n = this._last, a = 999999999999; n;) e = n._prev, n._dirty && n.totalDuration(), n._startTime > a && this._sortChildren && !n._paused && !this._calculatingDuration ? (this._calculatingDuration = 1, this.add(n, n._startTime - n._delay), this._calculatingDuration = 0) : a = n._startTime, n._startTime < 0 && !n._paused && (s -= n._startTime, this._timeline.smoothChildTiming && (this._startTime += n._startTime / this._timeScale, this._time -= n._startTime, this._totalTime -= n._startTime, this._rawPrevTime -= n._startTime), this.shiftChildren(-n._startTime, !1, -9999999999), a = 0), (i = n._startTime + n._totalDuration / n._timeScale) > s && (s = i), n = e;
                            this._duration = this._totalDuration = s, this._dirty = !1
                        }
                        return this._totalDuration
                    }
                    return t && this.totalDuration() ? this.timeScale(this._totalDuration / t) : this
                }, f.paused = function(e) {
                    if (!e)
                        for (var i = this._first, s = this._time; i;) i._startTime === s && "isPause" === i.data && (i._rawPrevTime = 0), i = i._next;
                    return t.prototype.paused.apply(this, arguments)
                }, f.usesFrames = function() {
                    for (var e = this._timeline; e._timeline;) e = e._timeline;
                    return e === t._rootFramesTimeline
                }, f.rawTime = function(t) {
                    return t && (this._paused || this._repeat && this.time() > 0 && this.totalProgress() < 1) ? this._totalTime % (this._duration + this._repeatDelay) : this._paused ? this._totalTime : (this._timeline.rawTime(t) - this._startTime) * this._timeScale
                }, s
            }, !0), _gsScope._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(t, e, i) {
                var s = function(e) {
                        t.call(this, e), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = !0 === this.vars.yoyo, this._dirty = !0
                    },
                    n = 1e-10,
                    a = e._internals,
                    o = a.lazyTweens,
                    r = a.lazyRender,
                    h = _gsScope._gsDefine.globals,
                    l = new i(null, null, 1, 0),
                    c = s.prototype = new t;
                return c.constructor = s, c.kill()._gc = !1, s.version = "1.20.3", c.invalidate = function() {
                    return this._yoyo = !0 === this.vars.yoyo, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), t.prototype.invalidate.call(this)
                }, c.addCallback = function(t, i, s, n) {
                    return this.add(e.delayedCall(0, t, s, n), i)
                }, c.removeCallback = function(t, e) {
                    if (t)
                        if (null == e) this._kill(null, t);
                        else
                            for (var i = this.getTweensOf(t, !1), s = i.length, n = this._parseTimeOrLabel(e); --s > -1;) i[s]._startTime === n && i[s]._enabled(!1, !1);
                    return this
                }, c.removePause = function(e) {
                    return this.removeCallback(t._internals.pauseCallback, e)
                }, c.tweenTo = function(t, i) {
                    i = i || {};
                    var s, n, a, o = {
                            ease: l,
                            useFrames: this.usesFrames(),
                            immediateRender: !1
                        },
                        r = i.repeat && h.TweenMax || e;
                    for (n in i) o[n] = i[n];
                    return o.time = this._parseTimeOrLabel(t), s = Math.abs(Number(o.time) - this._time) / this._timeScale || .001, a = new r(this, s, o), o.onStart = function() {
                        a.target.paused(!0), a.vars.time !== a.target.time() && s === a.duration() && a.duration(Math.abs(a.vars.time - a.target.time()) / a.target._timeScale), i.onStart && i.onStart.apply(i.onStartScope || i.callbackScope || a, i.onStartParams || [])
                    }, a
                }, c.tweenFromTo = function(t, e, i) {
                    i = i || {}, t = this._parseTimeOrLabel(t), i.startAt = {
                        onComplete: this.seek,
                        onCompleteParams: [t],
                        callbackScope: this
                    }, i.immediateRender = !1 !== i.immediateRender;
                    var s = this.tweenTo(e, i);
                    return s.duration(Math.abs(s.vars.time - t) / this._timeScale || .001)
                }, c.render = function(t, e, i) {
                    this._gc && this._enabled(!0, !1);
                    var s, a, h, l, c, u, d, p, m = this._time,
                        g = this._dirty ? this.totalDuration() : this._totalDuration,
                        f = this._duration,
                        _ = this._totalTime,
                        y = this._startTime,
                        v = this._timeScale,
                        b = this._rawPrevTime,
                        S = this._paused,
                        T = this._cycle;
                    if (m !== this._time && (t += this._time - m), t >= g - 1e-7 && t >= 0) this._locked || (this._totalTime = g, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (a = !0, l = "onComplete", c = !!this._timeline.autoRemoveChildren, 0 === this._duration && (0 >= t && t >= -1e-7 || 0 > b || b === n) && b !== t && this._first && (c = !0, b > n && (l = "onReverseComplete"))), this._rawPrevTime = this._duration || !e || t || this._rawPrevTime === t ? t : n, this._yoyo && 0 != (1 & this._cycle) ? this._time = t = 0 : (this._time = f, t = f + 1e-4);
                    else if (1e-7 > t)
                        if (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== m || 0 === f && b !== n && (b > 0 || 0 > t && b >= 0) && !this._locked) && (l = "onReverseComplete", a = this._reversed), 0 > t) this._active = !1, this._timeline.autoRemoveChildren && this._reversed ? (c = a = !0, l = "onReverseComplete") : b >= 0 && this._first && (c = !0), this._rawPrevTime = t;
                        else {
                            if (this._rawPrevTime = f || !e || t || this._rawPrevTime === t ? t : n, 0 === t && a)
                                for (s = this._first; s && 0 === s._startTime;) s._duration || (a = !1), s = s._next;
                            t = 0, this._initted || (c = !0)
                        } else if (0 === f && 0 > b && (c = !0), this._time = this._rawPrevTime = t, this._locked || (this._totalTime = t, 0 !== this._repeat && (u = f + this._repeatDelay, this._cycle = this._totalTime / u >> 0, 0 !== this._cycle && this._cycle === this._totalTime / u && t >= _ && this._cycle--, this._time = this._totalTime - this._cycle * u, this._yoyo && 0 != (1 & this._cycle) && (this._time = f - this._time), this._time > f ? (this._time = f, t = f + 1e-4) : this._time < 0 ? this._time = t = 0 : t = this._time)), this._hasPause && !this._forcingPlayhead && !e) {
                        if ((t = this._time) >= m || this._repeat && T !== this._cycle)
                            for (s = this._first; s && s._startTime <= t && !d;) s._duration || "isPause" !== s.data || s.ratio || 0 === s._startTime && 0 === this._rawPrevTime || (d = s), s = s._next;
                        else
                            for (s = this._last; s && s._startTime >= t && !d;) s._duration || "isPause" === s.data && s._rawPrevTime > 0 && (d = s), s = s._prev;
                        d && d._startTime < f && (this._time = t = d._startTime, this._totalTime = t + this._cycle * (this._totalDuration + this._repeatDelay))
                    }
                    if (this._cycle !== T && !this._locked) {
                        var E = this._yoyo && 0 != (1 & T),
                            P = E === (this._yoyo && 0 != (1 & this._cycle)),
                            A = this._totalTime,
                            I = this._cycle,
                            C = this._rawPrevTime,
                            x = this._time;
                        if (this._totalTime = T * f, this._cycle < T ? E = !E : this._totalTime += f, this._time = m, this._rawPrevTime = 0 === f ? b - 1e-4 : b, this._cycle = T, this._locked = !0, m = E ? 0 : f, this.render(m, e, 0 === f), e || this._gc || this.vars.onRepeat && (this._cycle = I, this._locked = !1, this._callback("onRepeat")), m !== this._time) return;
                        if (P && (this._cycle = T, this._locked = !0, m = E ? f + 1e-4 : -1e-4, this.render(m, !0, !1)), this._locked = !1, this._paused && !S) return;
                        this._time = x, this._totalTime = A, this._cycle = I, this._rawPrevTime = C
                    }
                    if (this._time !== m && this._first || i || c || d) {
                        if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== _ && t > 0 && (this._active = !0), 0 === _ && this.vars.onStart && (0 === this._totalTime && this._totalDuration || e || this._callback("onStart")), (p = this._time) >= m)
                            for (s = this._first; s && (h = s._next, p === this._time && (!this._paused || S));)(s._active || s._startTime <= this._time && !s._paused && !s._gc) && (d === s && this.pause(), s._reversed ? s.render((s._dirty ? s.totalDuration() : s._totalDuration) - (t - s._startTime) * s._timeScale, e, i) : s.render((t - s._startTime) * s._timeScale, e, i)), s = h;
                        else
                            for (s = this._last; s && (h = s._prev, p === this._time && (!this._paused || S));) {
                                if (s._active || s._startTime <= m && !s._paused && !s._gc) {
                                    if (d === s) {
                                        for (d = s._prev; d && d.endTime() > this._time;) d.render(d._reversed ? d.totalDuration() - (t - d._startTime) * d._timeScale : (t - d._startTime) * d._timeScale, e, i), d = d._prev;
                                        d = null, this.pause()
                                    }
                                    s._reversed ? s.render((s._dirty ? s.totalDuration() : s._totalDuration) - (t - s._startTime) * s._timeScale, e, i) : s.render((t - s._startTime) * s._timeScale, e, i)
                                }
                                s = h
                            }
                        this._onUpdate && (e || (o.length && r(), this._callback("onUpdate"))), l && (this._locked || this._gc || (y === this._startTime || v !== this._timeScale) && (0 === this._time || g >= this.totalDuration()) && (a && (o.length && r(), this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[l] && this._callback(l)))
                    } else _ !== this._totalTime && this._onUpdate && (e || this._callback("onUpdate"))
                }, c.getActive = function(t, e, i) {
                    null == t && (t = !0), null == e && (e = !0), null == i && (i = !1);
                    var s, n, a = [],
                        o = this.getChildren(t, e, i),
                        r = 0,
                        h = o.length;
                    for (s = 0; h > s; s++)(n = o[s]).isActive() && (a[r++] = n);
                    return a
                }, c.getLabelAfter = function(t) {
                    t || 0 !== t && (t = this._time);
                    var e, i = this.getLabelsArray(),
                        s = i.length;
                    for (e = 0; s > e; e++)
                        if (i[e].time > t) return i[e].name;
                    return null
                }, c.getLabelBefore = function(t) {
                    null == t && (t = this._time);
                    for (var e = this.getLabelsArray(), i = e.length; --i > -1;)
                        if (e[i].time < t) return e[i].name;
                    return null
                }, c.getLabelsArray = function() {
                    var t, e = [],
                        i = 0;
                    for (t in this._labels) e[i++] = {
                        time: this._labels[t],
                        name: t
                    };
                    return e.sort(function(t, e) {
                        return t.time - e.time
                    }), e
                }, c.invalidate = function() {
                    return this._locked = !1, t.prototype.invalidate.call(this)
                }, c.progress = function(t, e) {
                    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 != (1 & this._cycle) ? 1 - t : t) + this._cycle * (this._duration + this._repeatDelay), e) : this._time / this.duration() || 0
                }, c.totalProgress = function(t, e) {
                    return arguments.length ? this.totalTime(this.totalDuration() * t, e) : this._totalTime / this.totalDuration() || 0
                }, c.totalDuration = function(e) {
                    return arguments.length ? -1 !== this._repeat && e ? this.timeScale(this.totalDuration() / e) : this : (this._dirty && (t.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
                }, c.time = function(t, e) {
                    return arguments.length ? (this._dirty && this.totalDuration(), t > this._duration && (t = this._duration), this._yoyo && 0 != (1 & this._cycle) ? t = this._duration - t + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (t += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(t, e)) : this._time
                }, c.repeat = function(t) {
                    return arguments.length ? (this._repeat = t, this._uncache(!0)) : this._repeat
                }, c.repeatDelay = function(t) {
                    return arguments.length ? (this._repeatDelay = t, this._uncache(!0)) : this._repeatDelay
                }, c.yoyo = function(t) {
                    return arguments.length ? (this._yoyo = t, this) : this._yoyo
                }, c.currentLabel = function(t) {
                    return arguments.length ? this.seek(t, !0) : this.getLabelBefore(this._time + 1e-8)
                }, s
            }, !0),
            function() {
                var t = 180 / Math.PI,
                    e = [],
                    i = [],
                    s = [],
                    n = {},
                    a = _gsScope._gsDefine.globals,
                    o = function(t, e, i, s) {
                        i === s && (i = s - (s - e) / 1e6), t === e && (e = t + (i - t) / 1e6), this.a = t, this.b = e, this.c = i, this.d = s, this.da = s - t, this.ca = i - t, this.ba = e - t
                    },
                    r = function(t, e, i, s) {
                        var n = {
                                a: t
                            },
                            a = {},
                            o = {},
                            r = {
                                c: s
                            },
                            h = (t + e) / 2,
                            l = (e + i) / 2,
                            c = (i + s) / 2,
                            u = (h + l) / 2,
                            d = (l + c) / 2,
                            p = (d - u) / 8;
                        return n.b = h + (t - h) / 4, a.b = u + p, n.c = a.a = (n.b + a.b) / 2, a.c = o.a = (u + d) / 2, o.b = d - p, r.b = c + (s - c) / 4, o.c = r.a = (o.b + r.b) / 2, [n, a, o, r]
                    },
                    h = function(t, n, a, o, h) {
                        var l, c, u, d, p, m, g, f, _, y, v, b, S, T = t.length - 1,
                            E = 0,
                            P = t[0].a;
                        for (l = 0; T > l; l++) p = t[E], c = p.a, u = p.d, d = t[E + 1].d, h ? (v = e[l], b = i[l], S = (b + v) * n * .25 / (o ? .5 : s[l] || .5), m = u - (u - c) * (o ? .5 * n : 0 !== v ? S / v : 0), g = u + (d - u) * (o ? .5 * n : 0 !== b ? S / b : 0), f = u - (m + ((g - m) * (3 * v / (v + b) + .5) / 4 || 0))) : (m = u - (u - c) * n * .5, g = u + (d - u) * n * .5, f = u - (m + g) / 2), m += f, g += f, p.c = _ = m, p.b = 0 !== l ? P : P = p.a + .6 * (p.c - p.a), p.da = u - c, p.ca = _ - c, p.ba = P - c, a ? (y = r(c, P, _, u), t.splice(E, 1, y[0], y[1], y[2], y[3]), E += 4) : E++, P = g;
                        (p = t[E]).b = P, p.c = P + .4 * (p.d - P), p.da = p.d - p.a, p.ca = p.c - p.a, p.ba = P - p.a, a && (y = r(p.a, P, p.c, p.d), t.splice(E, 1, y[0], y[1], y[2], y[3]))
                    },
                    l = function(t, s, n, a) {
                        var r, h, l, c, u, d, p = [];
                        if (a)
                            for (t = [a].concat(t), h = t.length; --h > -1;) "string" == typeof(d = t[h][s]) && "=" === d.charAt(1) && (t[h][s] = a[s] + Number(d.charAt(0) + d.substr(2)));
                        if (0 > (r = t.length - 2)) return p[0] = new o(t[0][s], 0, 0, t[0][s]), p;
                        for (h = 0; r > h; h++) l = t[h][s], c = t[h + 1][s], p[h] = new o(l, 0, 0, c), n && (u = t[h + 2][s], e[h] = (e[h] || 0) + (c - l) * (c - l), i[h] = (i[h] || 0) + (u - c) * (u - c));
                        return p[h] = new o(t[h][s], 0, 0, t[h + 1][s]), p
                    },
                    c = function(t, a, o, r, c, u) {
                        var d, p, m, g, f, _, y, v, b = {},
                            S = [],
                            T = u || t[0];
                        c = "string" == typeof c ? "," + c + "," : ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,", null == a && (a = 1);
                        for (p in t[0]) S.push(p);
                        if (t.length > 1) {
                            for (v = t[t.length - 1], y = !0, d = S.length; --d > -1;)
                                if (p = S[d], Math.abs(T[p] - v[p]) > .05) {
                                    y = !1;
                                    break
                                }
                            y && (t = t.concat(), u && t.unshift(u), t.push(t[1]), u = t[t.length - 3])
                        }
                        for (e.length = i.length = s.length = 0, d = S.length; --d > -1;) p = S[d], n[p] = -1 !== c.indexOf("," + p + ","), b[p] = l(t, p, n[p], u);
                        for (d = e.length; --d > -1;) e[d] = Math.sqrt(e[d]), i[d] = Math.sqrt(i[d]);
                        if (!r) {
                            for (d = S.length; --d > -1;)
                                if (n[p])
                                    for (m = b[S[d]], _ = m.length - 1, g = 0; _ > g; g++) f = m[g + 1].da / i[g] + m[g].da / e[g] || 0, s[g] = (s[g] || 0) + f * f;
                            for (d = s.length; --d > -1;) s[d] = Math.sqrt(s[d])
                        }
                        for (d = S.length, g = o ? 4 : 1; --d > -1;) p = S[d], m = b[p], h(m, a, o, r, n[p]), y && (m.splice(0, g), m.splice(m.length - g, g));
                        return b
                    },
                    u = function(t, e, i) {
                        var s, n, a, r, h, l, c, u, d, p, m, g = {},
                            f = "cubic" === (e = e || "soft") ? 3 : 2,
                            _ = "soft" === e,
                            y = [];
                        if (_ && i && (t = [i].concat(t)), null == t || t.length < f + 1) throw "invalid Bezier data";
                        for (d in t[0]) y.push(d);
                        for (l = y.length; --l > -1;) {
                            for (g[d = y[l]] = h = [], p = 0, u = t.length, c = 0; u > c; c++) s = null == i ? t[c][d] : "string" == typeof(m = t[c][d]) && "=" === m.charAt(1) ? i[d] + Number(m.charAt(0) + m.substr(2)) : Number(m), _ && c > 1 && u - 1 > c && (h[p++] = (s + h[p - 2]) / 2), h[p++] = s;
                            for (u = p - f + 1, p = 0, c = 0; u > c; c += f) s = h[c], n = h[c + 1], a = h[c + 2], r = 2 === f ? 0 : h[c + 3], h[p++] = m = 3 === f ? new o(s, n, a, r) : new o(s, (2 * n + s) / 3, (2 * n + a) / 3, a);
                            h.length = p
                        }
                        return g
                    },
                    d = function(t, e, i) {
                        for (var s, n, a, o, r, h, l, c, u, d, p, m = 1 / i, g = t.length; --g > -1;)
                            for (d = t[g], a = d.a, o = d.d - a, r = d.c - a, h = d.b - a, s = n = 0, c = 1; i >= c; c++) l = m * c, u = 1 - l, s = n - (n = (l * l * o + 3 * u * (l * r + u * h)) * l), p = g * i + c - 1, e[p] = (e[p] || 0) + s * s
                    },
                    p = function(t, e) {
                        var i, s, n, a, o = [],
                            r = [],
                            h = 0,
                            l = 0,
                            c = (e = e >> 0 || 6) - 1,
                            u = [],
                            p = [];
                        for (i in t) d(t[i], o, e);
                        for (n = o.length, s = 0; n > s; s++) h += Math.sqrt(o[s]), a = s % e, p[a] = h, a === c && (l += h, a = s / e >> 0, u[a] = p, r[a] = l, h = 0, p = []);
                        return {
                            length: l,
                            lengths: r,
                            segments: u
                        }
                    },
                    m = _gsScope._gsDefine.plugin({
                        propName: "bezier",
                        priority: -1,
                        version: "1.3.8",
                        API: 2,
                        global: !0,
                        init: function(t, e, i) {
                            this._target = t, e instanceof Array && (e = {
                                values: e
                            }), this._func = {}, this._mod = {}, this._props = [], this._timeRes = null == e.timeResolution ? 6 : parseInt(e.timeResolution, 10);
                            var s, n, a, o, r, h = e.values || [],
                                l = {},
                                d = h[0],
                                m = e.autoRotate || i.vars.orientToBezier;
                            this._autoRotate = m ? m instanceof Array ? m : [
                                ["x", "y", "rotation", !0 === m ? 0 : Number(m) || 0]
                            ] : null;
                            for (s in d) this._props.push(s);
                            for (a = this._props.length; --a > -1;) s = this._props[a], this._overwriteProps.push(s), n = this._func[s] = "function" == typeof t[s], l[s] = n ? t[s.indexOf("set") || "function" != typeof t["get" + s.substr(3)] ? s : "get" + s.substr(3)]() : parseFloat(t[s]), r || l[s] !== h[0][s] && (r = l);
                            if (this._beziers = "cubic" !== e.type && "quadratic" !== e.type && "soft" !== e.type ? c(h, isNaN(e.curviness) ? 1 : e.curviness, !1, "thruBasic" === e.type, e.correlate, r) : u(h, e.type, l), this._segCount = this._beziers[s].length, this._timeRes) {
                                var g = p(this._beziers, this._timeRes);
                                this._length = g.length, this._lengths = g.lengths, this._segments = g.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length
                            }
                            if (m = this._autoRotate)
                                for (this._initialRotations = [], m[0] instanceof Array || (this._autoRotate = m = [m]), a = m.length; --a > -1;) {
                                    for (o = 0; 3 > o; o++) s = m[a][o], this._func[s] = "function" == typeof t[s] && t[s.indexOf("set") || "function" != typeof t["get" + s.substr(3)] ? s : "get" + s.substr(3)];
                                    s = m[a][2], this._initialRotations[a] = (this._func[s] ? this._func[s].call(this._target) : this._target[s]) || 0, this._overwriteProps.push(s)
                                }
                            return this._startRatio = i.vars.runBackwards ? 1 : 0, !0
                        },
                        set: function(e) {
                            var i, s, n, a, o, r, h, l, c, u, d = this._segCount,
                                p = this._func,
                                m = this._target,
                                g = e !== this._startRatio;
                            if (this._timeRes) {
                                if (c = this._lengths, u = this._curSeg, e *= this._length, n = this._li, e > this._l2 && d - 1 > n) {
                                    for (l = d - 1; l > n && (this._l2 = c[++n]) <= e;);
                                    this._l1 = c[n - 1], this._li = n, this._curSeg = u = this._segments[n], this._s2 = u[this._s1 = this._si = 0]
                                } else if (e < this._l1 && n > 0) {
                                    for (; n > 0 && (this._l1 = c[--n]) >= e;);
                                    0 === n && e < this._l1 ? this._l1 = 0 : n++, this._l2 = c[n], this._li = n, this._curSeg = u = this._segments[n], this._s1 = u[(this._si = u.length - 1) - 1] || 0, this._s2 = u[this._si]
                                }
                                if (i = n, e -= this._l1, n = this._si, e > this._s2 && n < u.length - 1) {
                                    for (l = u.length - 1; l > n && (this._s2 = u[++n]) <= e;);
                                    this._s1 = u[n - 1], this._si = n
                                } else if (e < this._s1 && n > 0) {
                                    for (; n > 0 && (this._s1 = u[--n]) >= e;);
                                    0 === n && e < this._s1 ? this._s1 = 0 : n++, this._s2 = u[n], this._si = n
                                }
                                r = (n + (e - this._s1) / (this._s2 - this._s1)) * this._prec || 0
                            } else i = 0 > e ? 0 : e >= 1 ? d - 1 : d * e >> 0, r = (e - i * (1 / d)) * d;
                            for (s = 1 - r, n = this._props.length; --n > -1;) a = this._props[n], o = this._beziers[a][i], h = (r * r * o.da + 3 * s * (r * o.ca + s * o.ba)) * r + o.a, this._mod[a] && (h = this._mod[a](h, m)), p[a] ? m[a](h) : m[a] = h;
                            if (this._autoRotate) {
                                var f, _, y, v, b, S, T, E = this._autoRotate;
                                for (n = E.length; --n > -1;) a = E[n][2], S = E[n][3] || 0, T = !0 === E[n][4] ? 1 : t, o = this._beziers[E[n][0]], f = this._beziers[E[n][1]], o && f && (o = o[i], f = f[i], _ = o.a + (o.b - o.a) * r, v = o.b + (o.c - o.b) * r, _ += (v - _) * r, v += (o.c + (o.d - o.c) * r - v) * r, y = f.a + (f.b - f.a) * r, b = f.b + (f.c - f.b) * r, y += (b - y) * r, b += (f.c + (f.d - f.c) * r - b) * r, h = g ? Math.atan2(b - y, v - _) * T + S : this._initialRotations[n], this._mod[a] && (h = this._mod[a](h, m)), p[a] ? m[a](h) : m[a] = h)
                            }
                        }
                    }),
                    g = m.prototype;
                m.bezierThrough = c, m.cubicToQuadratic = r, m._autoCSS = !0, m.quadraticToCubic = function(t, e, i) {
                    return new o(t, (2 * e + t) / 3, (2 * e + i) / 3, i)
                }, m._cssRegister = function() {
                    var t = a.CSSPlugin;
                    if (t) {
                        var e = t._internals,
                            i = e._parseToProxy,
                            s = e._setPluginRatio,
                            n = e.CSSPropTween;
                        e._registerComplexSpecialProp("bezier", {
                            parser: function(t, e, a, o, r, h) {
                                e instanceof Array && (e = {
                                    values: e
                                }), h = new m;
                                var l, c, u, d = e.values,
                                    p = d.length - 1,
                                    g = [],
                                    f = {};
                                if (0 > p) return r;
                                for (l = 0; p >= l; l++) u = i(t, d[l], o, r, h, p !== l), g[l] = u.end;
                                for (c in e) f[c] = e[c];
                                return f.values = g, r = new n(t, "bezier", 0, 0, u.pt, 2), r.data = u, r.plugin = h, r.setRatio = s, 0 === f.autoRotate && (f.autoRotate = !0), !f.autoRotate || f.autoRotate instanceof Array || (l = !0 === f.autoRotate ? 0 : Number(f.autoRotate), f.autoRotate = null != u.end.left ? [
                                    ["left", "top", "rotation", l, !1]
                                ] : null != u.end.x && [
                                    ["x", "y", "rotation", l, !1]
                                ]), f.autoRotate && (o._transform || o._enableTransforms(!1), u.autoRotate = o._target._gsTransform, u.proxy.rotation = u.autoRotate.rotation || 0, o._overwriteProps.push("rotation")), h._onInitTween(u.proxy, f, o._tween), r
                            }
                        })
                    }
                }, g._mod = function(t) {
                    for (var e, i = this._overwriteProps, s = i.length; --s > -1;)(e = t[i[s]]) && "function" == typeof e && (this._mod[i[s]] = e)
                }, g._kill = function(t) {
                    var e, i, s = this._props;
                    for (e in this._beziers)
                        if (e in t)
                            for (delete this._beziers[e], delete this._func[e], i = s.length; --i > -1;) s[i] === e && s.splice(i, 1);
                    if (s = this._autoRotate)
                        for (i = s.length; --i > -1;) t[s[i][2]] && s.splice(i, 1);
                    return this._super._kill.call(this, t)
                }
            }(), _gsScope._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(t, e) {
                var i, s, n, a, o = function() {
                        t.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = o.prototype.setRatio
                    },
                    r = _gsScope._gsDefine.globals,
                    h = {},
                    l = o.prototype = new t("css");
                l.constructor = o, o.version = "1.20.3", o.API = 2, o.defaultTransformPerspective = 0, o.defaultSkewType = "compensated", o.defaultSmoothOrigin = !0, l = "px", o.suffixMap = {
                    top: l,
                    right: l,
                    bottom: l,
                    left: l,
                    width: l,
                    height: l,
                    fontSize: l,
                    padding: l,
                    margin: l,
                    perspective: l,
                    lineHeight: ""
                };
                var c, u, d, p, m, g, f, _, y = /(?:\-|\.|\b)(\d|\.|e\-)+/g,
                    v = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
                    b = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,
                    S = /(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,
                    T = /(?:\d|\-|\+|=|#|\.)*/g,
                    E = /opacity *= *([^)]*)/i,
                    P = /opacity:([^;]*)/i,
                    A = /alpha\(opacity *=.+?\)/i,
                    I = /^(rgb|hsl)/,
                    C = /([A-Z])/g,
                    x = /-([a-z])/gi,
                    w = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
                    M = function(t, e) {
                        return e.toUpperCase()
                    },
                    O = /(?:Left|Right|Width)/i,
                    L = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
                    N = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,
                    k = /,(?=[^\)]*(?:\(|$))/gi,
                    R = /[\s,\(]/i,
                    D = Math.PI / 180,
                    G = 180 / Math.PI,
                    B = {},
                    F = {
                        style: {}
                    },
                    U = _gsScope.document || {
                        createElement: function() {
                            return F
                        }
                    },
                    H = function(t, e) {
                        return U.createElementNS ? U.createElementNS(e || "http://www.w3.org/1999/xhtml", t) : U.createElement(t)
                    },
                    Y = H("div"),
                    W = H("img"),
                    j = o._internals = {
                        _specialProps: h
                    },
                    X = (_gsScope.navigator || {}).userAgent || "",
                    z = function() {
                        var t = X.indexOf("Android"),
                            e = H("a");
                        return d = -1 !== X.indexOf("Safari") && -1 === X.indexOf("Chrome") && (-1 === t || parseFloat(X.substr(t + 8, 2)) > 3), m = d && parseFloat(X.substr(X.indexOf("Version/") + 8, 2)) < 6, p = -1 !== X.indexOf("Firefox"), (/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(X) || /Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(X)) && (g = parseFloat(RegExp.$1)), !!e && (e.style.cssText = "top:1px;opacity:.55;", /^0.55/.test(e.style.opacity))
                    }(),
                    K = function(t) {
                        return E.test("string" == typeof t ? t : (t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
                    },
                    V = function(t) {
                        _gsScope.console
                    },
                    q = "",
                    J = "",
                    Z = function(t, e) {
                        var i, s, n = (e = e || Y).style;
                        if (void 0 !== n[t]) return t;
                        for (t = t.charAt(0).toUpperCase() + t.substr(1), i = ["O", "Moz", "ms", "Ms", "Webkit"], s = 5; --s > -1 && void 0 === n[i[s] + t];);
                        return s >= 0 ? (J = 3 === s ? "ms" : i[s], q = "-" + J.toLowerCase() + "-", J + t) : null
                    },
                    Q = U.defaultView ? U.defaultView.getComputedStyle : function() {},
                    $ = o.getStyle = function(t, e, i, s, n) {
                        var a;
                        return z || "opacity" !== e ? (!s && t.style[e] ? a = t.style[e] : (i = i || Q(t)) ? a = i[e] || i.getPropertyValue(e) || i.getPropertyValue(e.replace(C, "-$1").toLowerCase()) : t.currentStyle && (a = t.currentStyle[e]), null == n || a && "none" !== a && "auto" !== a && "auto auto" !== a ? a : n) : K(t)
                    },
                    tt = j.convertToPixels = function(t, i, s, n, a) {
                        if ("px" === n || !n && "lineHeight" !== i) return s;
                        if ("auto" === n || !s) return 0;
                        var r, h, l, c = O.test(i),
                            u = t,
                            d = Y.style,
                            p = 0 > s,
                            m = 1 === s;
                        if (p && (s = -s), m && (s *= 100), "lineHeight" !== i || n)
                            if ("%" === n && -1 !== i.indexOf("border")) r = s / 100 * (c ? t.clientWidth : t.clientHeight);
                            else {
                                if (d.cssText = "border:0 solid red;position:" + $(t, "position") + ";line-height:0;", "%" !== n && u.appendChild && "v" !== n.charAt(0) && "rem" !== n) d[c ? "borderLeftWidth" : "borderTopWidth"] = s + n;
                                else {
                                    if (u = t.parentNode || U.body, -1 !== $(u, "display").indexOf("flex") && (d.position = "absolute"), h = u._gsCache, l = e.ticker.frame, h && c && h.time === l) return h.width * s / 100;
                                    d[c ? "width" : "height"] = s + n
                                }
                                u.appendChild(Y), r = parseFloat(Y[c ? "offsetWidth" : "offsetHeight"]), u.removeChild(Y), c && "%" === n && !1 !== o.cacheWidths && (h = u._gsCache = u._gsCache || {}, h.time = l, h.width = r / s * 100), 0 !== r || a || (r = tt(t, i, s, n, !0))
                            } else h = Q(t).lineHeight, t.style.lineHeight = s, r = parseFloat(Q(t).lineHeight), t.style.lineHeight = h;
                        return m && (r /= 100), p ? -r : r
                    },
                    et = j.calculateOffset = function(t, e, i) {
                        if ("absolute" !== $(t, "position", i)) return 0;
                        var s = "left" === e ? "Left" : "Top",
                            n = $(t, "margin" + s, i);
                        return t["offset" + s] - (tt(t, e, parseFloat(n), n.replace(T, "")) || 0)
                    },
                    it = function(t, e) {
                        var i, s, n, a = {};
                        if (e = e || Q(t, null))
                            if (i = e.length)
                                for (; --i > -1;)(-1 === (n = e[i]).indexOf("-transform") || wt === n) && (a[n.replace(x, M)] = e.getPropertyValue(n));
                            else
                                for (i in e)(-1 === i.indexOf("Transform") || xt === i) && (a[i] = e[i]);
                        else if (e = t.currentStyle || t.style)
                            for (i in e) "string" == typeof i && void 0 === a[i] && (a[i.replace(x, M)] = e[i]);
                        return z || (a.opacity = K(t)), s = Wt(t, e, !1), a.rotation = s.rotation, a.skewX = s.skewX, a.scaleX = s.scaleX, a.scaleY = s.scaleY, a.x = s.x, a.y = s.y, Ot && (a.z = s.z, a.rotationX = s.rotationX, a.rotationY = s.rotationY, a.scaleZ = s.scaleZ), a.filters && delete a.filters, a
                    },
                    st = function(t, e, i, s, n) {
                        var a, o, r, h = {},
                            l = t.style;
                        for (o in i) "cssText" !== o && "length" !== o && isNaN(o) && (e[o] !== (a = i[o]) || n && n[o]) && -1 === o.indexOf("Origin") && ("number" == typeof a || "string" == typeof a) && (h[o] = "auto" !== a || "left" !== o && "top" !== o ? "" !== a && "auto" !== a && "none" !== a || "string" != typeof e[o] || "" === e[o].replace(S, "") ? a : 0 : et(t, o), void 0 !== l[o] && (r = new yt(l, o, l[o], r)));
                        if (s)
                            for (o in s) "className" !== o && (h[o] = s[o]);
                        return {
                            difs: h,
                            firstMPT: r
                        }
                    },
                    nt = {
                        width: ["Left", "Right"],
                        height: ["Top", "Bottom"]
                    },
                    at = ["marginLeft", "marginRight", "marginTop", "marginBottom"],
                    ot = function(t, e, i) {
                        if ("svg" === (t.nodeName + "").toLowerCase()) return (i || Q(t))[e] || 0;
                        if (t.getCTM && Ut(t)) return t.getBBox()[e] || 0;
                        var s = parseFloat("width" === e ? t.offsetWidth : t.offsetHeight),
                            n = nt[e],
                            a = n.length;
                        for (i = i || Q(t, null); --a > -1;) s -= parseFloat($(t, "padding" + n[a], i, !0)) || 0, s -= parseFloat($(t, "border" + n[a] + "Width", i, !0)) || 0;
                        return s
                    },
                    rt = function(t, e) {
                        if ("contain" === t || "auto" === t || "auto auto" === t) return t + " ";
                        (null == t || "" === t) && (t = "0 0");
                        var i, s = t.split(" "),
                            n = -1 !== t.indexOf("left") ? "0%" : -1 !== t.indexOf("right") ? "100%" : s[0],
                            a = -1 !== t.indexOf("top") ? "0%" : -1 !== t.indexOf("bottom") ? "100%" : s[1];
                        if (s.length > 3 && !e) {
                            for (s = t.split(", ").join(",").split(","), t = [], i = 0; i < s.length; i++) t.push(rt(s[i]));
                            return t.join(",")
                        }
                        return null == a ? a = "center" === n ? "50%" : "0" : "center" === a && (a = "50%"), ("center" === n || isNaN(parseFloat(n)) && -1 === (n + "").indexOf("=")) && (n = "50%"), t = n + " " + a + (s.length > 2 ? " " + s[2] : ""), e && (e.oxp = -1 !== n.indexOf("%"), e.oyp = -1 !== a.indexOf("%"), e.oxr = "=" === n.charAt(1), e.oyr = "=" === a.charAt(1), e.ox = parseFloat(n.replace(S, "")), e.oy = parseFloat(a.replace(S, "")), e.v = t), e || t
                    },
                    ht = function(t, e) {
                        return "function" == typeof t && (t = t(_, f)), "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) : parseFloat(t) - parseFloat(e) || 0
                    },
                    lt = function(t, e) {
                        return "function" == typeof t && (t = t(_, f)), null == t ? e : "string" == typeof t && "=" === t.charAt(1) ? parseInt(t.charAt(0) + "1", 10) * parseFloat(t.substr(2)) + e : parseFloat(t) || 0
                    },
                    ct = function(t, e, i, s) {
                        var n, a, o, r, h;
                        return "function" == typeof t && (t = t(_, f)), null == t ? r = e : "number" == typeof t ? r = t : (n = 360, a = t.split("_"), h = "=" === t.charAt(1), o = (h ? parseInt(t.charAt(0) + "1", 10) * parseFloat(a[0].substr(2)) : parseFloat(a[0])) * (-1 === t.indexOf("rad") ? 1 : G) - (h ? 0 : e), a.length && (s && (s[i] = e + o), -1 !== t.indexOf("short") && (o %= n) != o % (n / 2) && (o = 0 > o ? o + n : o - n), -1 !== t.indexOf("_cw") && 0 > o ? o = (o + 9999999999 * n) % n - (o / n | 0) * n : -1 !== t.indexOf("ccw") && o > 0 && (o = (o - 9999999999 * n) % n - (o / n | 0) * n)), r = e + o), 1e-6 > r && r > -1e-6 && (r = 0), r
                    },
                    ut = {
                        aqua: [0, 255, 255],
                        lime: [0, 255, 0],
                        silver: [192, 192, 192],
                        black: [0, 0, 0],
                        maroon: [128, 0, 0],
                        teal: [0, 128, 128],
                        blue: [0, 0, 255],
                        navy: [0, 0, 128],
                        white: [255, 255, 255],
                        fuchsia: [255, 0, 255],
                        olive: [128, 128, 0],
                        yellow: [255, 255, 0],
                        orange: [255, 165, 0],
                        gray: [128, 128, 128],
                        purple: [128, 0, 128],
                        green: [0, 128, 0],
                        red: [255, 0, 0],
                        pink: [255, 192, 203],
                        cyan: [0, 255, 255],
                        transparent: [255, 255, 255, 0]
                    },
                    dt = function(t, e, i) {
                        return 255 * (1 > 6 * (t = 0 > t ? t + 1 : t > 1 ? t - 1 : t) ? e + (i - e) * t * 6 : .5 > t ? i : 2 > 3 * t ? e + (i - e) * (2 / 3 - t) * 6 : e) + .5 | 0
                    },
                    pt = o.parseColor = function(t, e) {
                        var i, s, n, a, o, r, h, l, c, u, d;
                        if (t)
                            if ("number" == typeof t) i = [t >> 16, t >> 8 & 255, 255 & t];
                            else {
                                if ("," === t.charAt(t.length - 1) && (t = t.substr(0, t.length - 1)), ut[t]) i = ut[t];
                                else if ("#" === t.charAt(0)) 4 === t.length && (s = t.charAt(1), n = t.charAt(2), a = t.charAt(3), t = "#" + s + s + n + n + a + a), t = parseInt(t.substr(1), 16), i = [t >> 16, t >> 8 & 255, 255 & t];
                                else if ("hsl" === t.substr(0, 3))
                                    if (i = d = t.match(y), e) {
                                        if (-1 !== t.indexOf("=")) return t.match(v)
                                    } else o = Number(i[0]) % 360 / 360, r = Number(i[1]) / 100, h = Number(i[2]) / 100, n = .5 >= h ? h * (r + 1) : h + r - h * r, s = 2 * h - n, i.length > 3 && (i[3] = Number(i[3])), i[0] = dt(o + 1 / 3, s, n), i[1] = dt(o, s, n), i[2] = dt(o - 1 / 3, s, n);
                                else i = t.match(y) || ut.transparent;
                                i[0] = Number(i[0]), i[1] = Number(i[1]), i[2] = Number(i[2]), i.length > 3 && (i[3] = Number(i[3]))
                            } else i = ut.black;
                        return e && !d && (s = i[0] / 255, n = i[1] / 255, a = i[2] / 255, l = Math.max(s, n, a), c = Math.min(s, n, a), h = (l + c) / 2, l === c ? o = r = 0 : (u = l - c, r = h > .5 ? u / (2 - l - c) : u / (l + c), o = l === s ? (n - a) / u + (a > n ? 6 : 0) : l === n ? (a - s) / u + 2 : (s - n) / u + 4, o *= 60), i[0] = o + .5 | 0, i[1] = 100 * r + .5 | 0, i[2] = 100 * h + .5 | 0), i
                    },
                    mt = function(t, e) {
                        var i, s, n, a = t.match(gt) || [],
                            o = 0,
                            r = "";
                        if (!a.length) return t;
                        for (i = 0; i < a.length; i++) s = a[i], n = t.substr(o, t.indexOf(s, o) - o), o += n.length + s.length, 3 === (s = pt(s, e)).length && s.push(1), r += n + (e ? "hsla(" + s[0] + "," + s[1] + "%," + s[2] + "%," + s[3] : "rgba(" + s.join(",")) + ")";
                        return r + t.substr(o)
                    },
                    gt = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";
                for (l in ut) gt += "|" + l + "\\b";
                gt = new RegExp(gt + ")", "gi"), o.colorStringFilter = function(t) {
                    var e, i = t[0] + " " + t[1];
                    gt.test(i) && (e = -1 !== i.indexOf("hsl(") || -1 !== i.indexOf("hsla("), t[0] = mt(t[0], e), t[1] = mt(t[1], e)), gt.lastIndex = 0
                }, e.defaultStringFilter || (e.defaultStringFilter = o.colorStringFilter);
                var ft = function(t, e, i, s) {
                        if (null == t) return function(t) {
                            return t
                        };
                        var n, a = e ? (t.match(gt) || [""])[0] : "",
                            o = t.split(a).join("").match(b) || [],
                            r = t.substr(0, t.indexOf(o[0])),
                            h = ")" === t.charAt(t.length - 1) ? ")" : "",
                            l = -1 !== t.indexOf(" ") ? " " : ",",
                            c = o.length,
                            u = c > 0 ? o[0].replace(y, "") : "";
                        return c ? n = e ? function(t) {
                            var e, d, p, m;
                            if ("number" == typeof t) t += u;
                            else if (s && k.test(t)) {
                                for (m = t.replace(k, "|").split("|"), p = 0; p < m.length; p++) m[p] = n(m[p]);
                                return m.join(",")
                            }
                            if (e = (t.match(gt) || [a])[0], d = t.split(e).join("").match(b) || [], p = d.length, c > p--)
                                for (; ++p < c;) d[p] = i ? d[(p - 1) / 2 | 0] : o[p];
                            return r + d.join(l) + l + e + h + (-1 !== t.indexOf("inset") ? " inset" : "")
                        } : function(t) {
                            var e, a, d;
                            if ("number" == typeof t) t += u;
                            else if (s && k.test(t)) {
                                for (a = t.replace(k, "|").split("|"), d = 0; d < a.length; d++) a[d] = n(a[d]);
                                return a.join(",")
                            }
                            if (e = t.match(b) || [], d = e.length, c > d--)
                                for (; ++d < c;) e[d] = i ? e[(d - 1) / 2 | 0] : o[d];
                            return r + e.join(l) + h
                        } : function(t) {
                            return t
                        }
                    },
                    _t = function(t) {
                        return t = t.split(","),
                            function(e, i, s, n, a, o, r) {
                                var h, l = (i + "").split(" ");
                                for (r = {}, h = 0; 4 > h; h++) r[t[h]] = l[h] = l[h] || l[(h - 1) / 2 >> 0];
                                return n.parse(e, r, a, o)
                            }
                    },
                    yt = (j._setPluginRatio = function(t) {
                        this.plugin.setRatio(t);
                        for (var e, i, s, n, a, o = this.data, r = o.proxy, h = o.firstMPT; h;) e = r[h.v], h.r ? e = Math.round(e) : 1e-6 > e && e > -1e-6 && (e = 0), h.t[h.p] = e, h = h._next;
                        if (o.autoRotate && (o.autoRotate.rotation = o.mod ? o.mod(r.rotation, this.t) : r.rotation), 1 === t || 0 === t)
                            for (h = o.firstMPT, a = 1 === t ? "e" : "b"; h;) {
                                if ((i = h.t).type) {
                                    if (1 === i.type) {
                                        for (n = i.xs0 + i.s + i.xs1, s = 1; s < i.l; s++) n += i["xn" + s] + i["xs" + (s + 1)];
                                        i[a] = n
                                    }
                                } else i[a] = i.s + i.xs0;
                                h = h._next
                            }
                    }, function(t, e, i, s, n) {
                        this.t = t, this.p = e, this.v = i, this.r = n, s && (s._prev = this, this._next = s)
                    }),
                    vt = (j._parseToProxy = function(t, e, i, s, n, a) {
                        var o, r, h, l, c, u = s,
                            d = {},
                            p = {},
                            m = i._transform,
                            g = B;
                        for (i._transform = null, B = e, s = c = i.parse(t, e, s, n), B = g, a && (i._transform = m, u && (u._prev = null, u._prev && (u._prev._next = null))); s && s !== u;) {
                            if (s.type <= 1 && (r = s.p, p[r] = s.s + s.c, d[r] = s.s, a || (l = new yt(s, "s", r, l, s.r), s.c = 0), 1 === s.type))
                                for (o = s.l; --o > 0;) h = "xn" + o, r = s.p + "_" + h, p[r] = s.data[h], d[r] = s[h], a || (l = new yt(s, h, r, l, s.rxp[h]));
                            s = s._next
                        }
                        return {
                            proxy: d,
                            end: p,
                            firstMPT: l,
                            pt: c
                        }
                    }, j.CSSPropTween = function(t, e, s, n, o, r, h, l, c, u, d) {
                        this.t = t, this.p = e, this.s = s, this.c = n, this.n = h || e, t instanceof vt || a.push(this.n), this.r = l, this.type = r || 0, c && (this.pr = c, i = !0), this.b = void 0 === u ? s : u, this.e = void 0 === d ? s + n : d, o && (this._next = o, o._prev = this)
                    }),
                    bt = function(t, e, i, s, n, a) {
                        var o = new vt(t, e, i, s - i, n, -1, a);
                        return o.b = i, o.e = o.xs0 = s, o
                    },
                    St = o.parseComplex = function(t, e, i, s, n, a, r, h, l, u) {
                        i = i || a || "", "function" == typeof s && (s = s(_, f)), r = new vt(t, e, 0, 0, r, u ? 2 : 1, null, !1, h, i, s), s += "", n && gt.test(s + i) && (s = [i, s], o.colorStringFilter(s), i = s[0], s = s[1]);
                        var d, p, m, g, b, S, T, E, P, A, I, C, x, w = i.split(", ").join(",").split(" "),
                            M = s.split(", ").join(",").split(" "),
                            O = w.length,
                            L = !1 !== c;
                        for ((-1 !== s.indexOf(",") || -1 !== i.indexOf(",")) && (-1 !== (s + i).indexOf("rgb") || -1 !== (s + i).indexOf("hsl") ? (w = w.join(" ").replace(k, ", ").split(" "), M = M.join(" ").replace(k, ", ").split(" ")) : (w = w.join(" ").split(",").join(", ").split(" "), M = M.join(" ").split(",").join(", ").split(" ")), O = w.length), O !== M.length && (w = (a || "").split(" "), O = w.length), r.plugin = l, r.setRatio = u, gt.lastIndex = 0, d = 0; O > d; d++)
                            if (g = w[d], b = M[d], (E = parseFloat(g)) || 0 === E) r.appendXtra("", E, ht(b, E), b.replace(v, ""), L && -1 !== b.indexOf("px"), !0);
                            else if (n && gt.test(g)) C = b.indexOf(")") + 1, C = ")" + (C ? b.substr(C) : ""), x = -1 !== b.indexOf("hsl") && z, A = b, g = pt(g, x), b = pt(b, x), (P = g.length + b.length > 6) && !z && 0 === b[3] ? (r["xs" + r.l] += r.l ? " transparent" : "transparent", r.e = r.e.split(M[d]).join("transparent")) : (z || (P = !1), x ? r.appendXtra(A.substr(0, A.indexOf("hsl")) + (P ? "hsla(" : "hsl("), g[0], ht(b[0], g[0]), ",", !1, !0).appendXtra("", g[1], ht(b[1], g[1]), "%,", !1).appendXtra("", g[2], ht(b[2], g[2]), P ? "%," : "%" + C, !1) : r.appendXtra(A.substr(0, A.indexOf("rgb")) + (P ? "rgba(" : "rgb("), g[0], b[0] - g[0], ",", !0, !0).appendXtra("", g[1], b[1] - g[1], ",", !0).appendXtra("", g[2], b[2] - g[2], P ? "," : C, !0), P && (g = g.length < 4 ? 1 : g[3], r.appendXtra("", g, (b.length < 4 ? 1 : b[3]) - g, C, !1))), gt.lastIndex = 0;
                        else if (S = g.match(y)) {
                            if (!(T = b.match(v)) || T.length !== S.length) return r;
                            for (m = 0, p = 0; p < S.length; p++) I = S[p], A = g.indexOf(I, m), r.appendXtra(g.substr(m, A - m), Number(I), ht(T[p], I), "", L && "px" === g.substr(A + I.length, 2), 0 === p), m = A + I.length;
                            r["xs" + r.l] += g.substr(m)
                        } else r["xs" + r.l] += r.l || r["xs" + r.l] ? " " + b : b; if (-1 !== s.indexOf("=") && r.data) {
                            for (C = r.xs0 + r.data.s, d = 1; d < r.l; d++) C += r["xs" + d] + r.data["xn" + d];
                            r.e = C + r["xs" + d]
                        }
                        return r.l || (r.type = -1, r.xs0 = r.e), r.xfirst || r
                    },
                    Tt = 9;
                for ((l = vt.prototype).l = l.pr = 0; --Tt > 0;) l["xn" + Tt] = 0, l["xs" + Tt] = "";
                l.xs0 = "", l._next = l._prev = l.xfirst = l.data = l.plugin = l.setRatio = l.rxp = null, l.appendXtra = function(t, e, i, s, n, a) {
                    var o = this,
                        r = o.l;
                    return o["xs" + r] += a && (r || o["xs" + r]) ? " " + t : t || "", i || 0 === r || o.plugin ? (o.l++, o.type = o.setRatio ? 2 : 1, o["xs" + o.l] = s || "", r > 0 ? (o.data["xn" + r] = e + i, o.rxp["xn" + r] = n, o["xn" + r] = e, o.plugin || (o.xfirst = new vt(o, "xn" + r, e, i, o.xfirst || o, 0, o.n, n, o.pr), o.xfirst.xs0 = 0), o) : (o.data = {
                        s: e + i
                    }, o.rxp = {}, o.s = e, o.c = i, o.r = n, o)) : (o["xs" + r] += e + (s || ""), o)
                };
                var Et = function(t, e) {
                        e = e || {}, this.p = e.prefix ? Z(t) || t : t, h[t] = h[this.p] = this, this.format = e.formatter || ft(e.defaultValue, e.color, e.collapsible, e.multi), e.parser && (this.parse = e.parser), this.clrs = e.color, this.multi = e.multi, this.keyword = e.keyword, this.dflt = e.defaultValue, this.pr = e.priority || 0
                    },
                    Pt = j._registerComplexSpecialProp = function(t, e, i) {
                        "object" != typeof e && (e = {
                            parser: i
                        });
                        var s, n = t.split(","),
                            a = e.defaultValue;
                        for (i = i || [a], s = 0; s < n.length; s++) e.prefix = 0 === s && e.prefix, e.defaultValue = i[s] || a, new Et(n[s], e)
                    },
                    At = j._registerPluginProp = function(t) {
                        if (!h[t]) {
                            var e = t.charAt(0).toUpperCase() + t.substr(1) + "Plugin";
                            Pt(t, {
                                parser: function(t, i, s, n, a, o, l) {
                                    var c = r.com.greensock.plugins[e];
                                    return c ? (c._cssRegister(), h[s].parse(t, i, s, n, a, o, l)) : (V(), a)
                                }
                            })
                        }
                    };
                (l = Et.prototype).parseComplex = function(t, e, i, s, n, a) {
                    var o, r, h, l, c, u, d = this.keyword;
                    if (this.multi && (k.test(i) || k.test(e) ? (r = e.replace(k, "|").split("|"), h = i.replace(k, "|").split("|")) : d && (r = [e], h = [i])), h) {
                        for (l = h.length > r.length ? h.length : r.length, o = 0; l > o; o++) e = r[o] = r[o] || this.dflt, i = h[o] = h[o] || this.dflt, d && (c = e.indexOf(d), u = i.indexOf(d), c !== u && (-1 === u ? r[o] = r[o].split(d).join("") : -1 === c && (r[o] += " " + d)));
                        e = r.join(", "), i = h.join(", ")
                    }
                    return St(t, this.p, e, i, this.clrs, this.dflt, s, this.pr, n, a)
                }, l.parse = function(t, e, i, s, a, o, r) {
                    return this.parseComplex(t.style, this.format($(t, this.p, n, !1, this.dflt)), this.format(e), a, o)
                }, o.registerSpecialProp = function(t, e, i) {
                    Pt(t, {
                        parser: function(t, s, n, a, o, r, h) {
                            var l = new vt(t, n, 0, 0, o, 2, n, !1, i);
                            return l.plugin = r, l.setRatio = e(t, s, a._tween, n), l
                        },
                        priority: i
                    })
                }, o.useSVGTransformAttr = !0;
                var It, Ct = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),
                    xt = Z("transform"),
                    wt = q + "transform",
                    Mt = Z("transformOrigin"),
                    Ot = null !== Z("perspective"),
                    Lt = j.Transform = function() {
                        this.perspective = parseFloat(o.defaultTransformPerspective) || 0, this.force3D = !(!1 === o.defaultForce3D || !Ot) && (o.defaultForce3D || "auto")
                    },
                    Nt = _gsScope.SVGElement,
                    kt = function(t, e, i) {
                        var s, n = U.createElementNS("http://www.w3.org/2000/svg", t),
                            a = /([a-z])([A-Z])/g;
                        for (s in i) n.setAttributeNS(null, s.replace(a, "$1-$2").toLowerCase(), i[s]);
                        return e.appendChild(n), n
                    },
                    Rt = U.documentElement || {},
                    Dt = function() {
                        var t, e, i, s = g || /Android/i.test(X) && !_gsScope.chrome;
                        return U.createElementNS && !s && (t = kt("svg", Rt), e = kt("rect", t, {
                            width: 100,
                            height: 50,
                            x: 100
                        }), i = e.getBoundingClientRect().width, e.style[Mt] = "50% 50%", e.style[xt] = "scaleX(0.5)", s = i === e.getBoundingClientRect().width && !(p && Ot), Rt.removeChild(t)), s
                    }(),
                    Gt = function(t, e, i, s, n, a) {
                        var r, h, l, c, u, d, p, m, g, f, _, y, v, b, S = t._gsTransform,
                            T = Yt(t, !0);
                        S && (v = S.xOrigin, b = S.yOrigin), (!s || (r = s.split(" ")).length < 2) && (0 === (p = t.getBBox()).x && 0 === p.y && p.width + p.height === 0 && (p = {
                            x: parseFloat(t.hasAttribute("x") ? t.getAttribute("x") : t.hasAttribute("cx") ? t.getAttribute("cx") : 0) || 0,
                            y: parseFloat(t.hasAttribute("y") ? t.getAttribute("y") : t.hasAttribute("cy") ? t.getAttribute("cy") : 0) || 0,
                            width: 0,
                            height: 0
                        }), e = rt(e).split(" "), r = [(-1 !== e[0].indexOf("%") ? parseFloat(e[0]) / 100 * p.width : parseFloat(e[0])) + p.x, (-1 !== e[1].indexOf("%") ? parseFloat(e[1]) / 100 * p.height : parseFloat(e[1])) + p.y]), i.xOrigin = c = parseFloat(r[0]), i.yOrigin = u = parseFloat(r[1]), s && T !== Ht && (d = T[0], p = T[1], m = T[2], g = T[3], f = T[4], _ = T[5], (y = d * g - p * m) && (h = c * (g / y) + u * (-m / y) + (m * _ - g * f) / y, l = c * (-p / y) + u * (d / y) - (d * _ - p * f) / y, c = i.xOrigin = r[0] = h, u = i.yOrigin = r[1] = l)), S && (a && (i.xOffset = S.xOffset, i.yOffset = S.yOffset, S = i), n || !1 !== n && !1 !== o.defaultSmoothOrigin ? (h = c - v, l = u - b, S.xOffset += h * T[0] + l * T[2] - h, S.yOffset += h * T[1] + l * T[3] - l) : S.xOffset = S.yOffset = 0), a || t.setAttribute("data-svg-origin", r.join(" "))
                    },
                    Bt = function(t) {
                        var e, i = H("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"),
                            s = this.parentNode,
                            n = this.nextSibling,
                            a = this.style.cssText;
                        if (Rt.appendChild(i), i.appendChild(this), this.style.display = "block", t) try {
                            e = this.getBBox(), this._originalGetBBox = this.getBBox, this.getBBox = Bt
                        } catch (t) {} else this._originalGetBBox && (e = this._originalGetBBox());
                        return n ? s.insertBefore(this, n) : s.appendChild(this), Rt.removeChild(i), this.style.cssText = a, e
                    },
                    Ft = function(t) {
                        try {
                            return t.getBBox()
                        } catch (e) {
                            return Bt.call(t, !0)
                        }
                    },
                    Ut = function(t) {
                        return !(!Nt || !t.getCTM || t.parentNode && !t.ownerSVGElement || !Ft(t))
                    },
                    Ht = [1, 0, 0, 1, 0, 0],
                    Yt = function(t, e) {
                        var i, s, n, a, o, r, h = t._gsTransform || new Lt,
                            l = t.style;
                        if (xt ? s = $(t, wt, null, !0) : t.currentStyle && (s = t.currentStyle.filter.match(L), s = s && 4 === s.length ? [s[0].substr(4), Number(s[2].substr(4)), Number(s[1].substr(4)), s[3].substr(4), h.x || 0, h.y || 0].join(",") : ""), i = !s || "none" === s || "matrix(1, 0, 0, 1, 0, 0)" === s, !xt || !(r = !Q(t) || "none" === Q(t).display) && t.parentNode || (r && (a = l.display, l.display = "block"), t.parentNode || (o = 1, Rt.appendChild(t)), s = $(t, wt, null, !0), i = !s || "none" === s || "matrix(1, 0, 0, 1, 0, 0)" === s, a ? l.display = a : r && Kt(l, "display"), o && Rt.removeChild(t)), (h.svg || t.getCTM && Ut(t)) && (i && -1 !== (l[xt] + "").indexOf("matrix") && (s = l[xt], i = 0), n = t.getAttribute("transform"), i && n && (-1 !== n.indexOf("matrix") ? (s = n, i = 0) : -1 !== n.indexOf("translate") && (s = "matrix(1,0,0,1," + n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",") + ")", i = 0))), i) return Ht;
                        for (n = (s || "").match(y) || [], Tt = n.length; --Tt > -1;) a = Number(n[Tt]), n[Tt] = (o = a - (a |= 0)) ? (1e5 * o + (0 > o ? -.5 : .5) | 0) / 1e5 + a : a;
                        return e && n.length > 6 ? [n[0], n[1], n[4], n[5], n[12], n[13]] : n
                    },
                    Wt = j.getTransform = function(t, i, s, n) {
                        if (t._gsTransform && s && !n) return t._gsTransform;
                        var a, r, h, l, c, u, d = s ? t._gsTransform || new Lt : new Lt,
                            p = d.scaleX < 0,
                            m = 2e-5,
                            g = 1e5,
                            f = Ot ? parseFloat($(t, Mt, i, !1, "0 0 0").split(" ")[2]) || d.zOrigin || 0 : 0,
                            _ = parseFloat(o.defaultTransformPerspective) || 0;
                        if (d.svg = !(!t.getCTM || !Ut(t)), d.svg && (Gt(t, $(t, Mt, i, !1, "50% 50%") + "", d, t.getAttribute("data-svg-origin")), It = o.useSVGTransformAttr || Dt), (a = Yt(t)) !== Ht) {
                            if (16 === a.length) {
                                var y, v, b, S, T, E = a[0],
                                    P = a[1],
                                    A = a[2],
                                    I = a[3],
                                    C = a[4],
                                    x = a[5],
                                    w = a[6],
                                    M = a[7],
                                    O = a[8],
                                    L = a[9],
                                    N = a[10],
                                    k = a[12],
                                    R = a[13],
                                    D = a[14],
                                    B = a[11],
                                    F = Math.atan2(w, N);
                                d.zOrigin && (D = -d.zOrigin, k = O * D - a[12], R = L * D - a[13], D = N * D + d.zOrigin - a[14]), d.rotationX = F * G, F && (S = Math.cos(-F), T = Math.sin(-F), y = C * S + O * T, v = x * S + L * T, b = w * S + N * T, O = C * -T + O * S, L = x * -T + L * S, N = w * -T + N * S, B = M * -T + B * S, C = y, x = v, w = b), F = Math.atan2(-A, N), d.rotationY = F * G, F && (S = Math.cos(-F), T = Math.sin(-F), y = E * S - O * T, v = P * S - L * T, b = A * S - N * T, L = P * T + L * S, N = A * T + N * S, B = I * T + B * S, E = y, P = v, A = b), F = Math.atan2(P, E), d.rotation = F * G, F && (S = Math.cos(F), T = Math.sin(F), y = E * S + P * T, v = C * S + x * T, b = O * S + L * T, P = P * S - E * T, x = x * S - C * T, L = L * S - O * T, E = y, C = v, O = b), d.rotationX && Math.abs(d.rotationX) + Math.abs(d.rotation) > 359.9 && (d.rotationX = d.rotation = 0, d.rotationY = 180 - d.rotationY), F = Math.atan2(C, x), d.scaleX = (Math.sqrt(E * E + P * P + A * A) * g + .5 | 0) / g, d.scaleY = (Math.sqrt(x * x + w * w) * g + .5 | 0) / g, d.scaleZ = (Math.sqrt(O * O + L * L + N * N) * g + .5 | 0) / g, E /= d.scaleX, C /= d.scaleY, P /= d.scaleX, x /= d.scaleY, Math.abs(F) > m ? (d.skewX = F * G, C = 0, "simple" !== d.skewType && (d.scaleY *= 1 / Math.cos(F))) : d.skewX = 0, d.perspective = B ? 1 / (0 > B ? -B : B) : 0, d.x = k, d.y = R, d.z = D, d.svg && (d.x -= d.xOrigin - (d.xOrigin * E - d.yOrigin * C), d.y -= d.yOrigin - (d.yOrigin * P - d.xOrigin * x))
                            } else if (!Ot || n || !a.length || d.x !== a[4] || d.y !== a[5] || !d.rotationX && !d.rotationY) {
                                var U = a.length >= 6,
                                    H = U ? a[0] : 1,
                                    Y = a[1] || 0,
                                    W = a[2] || 0,
                                    j = U ? a[3] : 1;
                                d.x = a[4] || 0, d.y = a[5] || 0, h = Math.sqrt(H * H + Y * Y), l = Math.sqrt(j * j + W * W), c = H || Y ? Math.atan2(Y, H) * G : d.rotation || 0, u = W || j ? Math.atan2(W, j) * G + c : d.skewX || 0, d.scaleX = h, d.scaleY = l, d.rotation = c, d.skewX = u, Ot && (d.rotationX = d.rotationY = d.z = 0, d.perspective = _, d.scaleZ = 1), d.svg && (d.x -= d.xOrigin - (d.xOrigin * H + d.yOrigin * W), d.y -= d.yOrigin - (d.xOrigin * Y + d.yOrigin * j))
                            }
                            Math.abs(d.skewX) > 90 && Math.abs(d.skewX) < 270 && (p ? (d.scaleX *= -1, d.skewX += d.rotation <= 0 ? 180 : -180, d.rotation += d.rotation <= 0 ? 180 : -180) : (d.scaleY *= -1, d.skewX += d.skewX <= 0 ? 180 : -180)), d.zOrigin = f;
                            for (r in d) d[r] < m && d[r] > -m && (d[r] = 0)
                        }
                        return s && (t._gsTransform = d, d.svg && (It && t.style[xt] ? e.delayedCall(.001, function() {
                            Kt(t.style, xt)
                        }) : !It && t.getAttribute("transform") && e.delayedCall(.001, function() {
                            t.removeAttribute("transform")
                        }))), d
                    },
                    jt = function(t) {
                        var e, i, s = this.data,
                            n = -s.rotation * D,
                            a = n + s.skewX * D,
                            o = 1e5,
                            r = (Math.cos(n) * s.scaleX * o | 0) / o,
                            h = (Math.sin(n) * s.scaleX * o | 0) / o,
                            l = (Math.sin(a) * -s.scaleY * o | 0) / o,
                            c = (Math.cos(a) * s.scaleY * o | 0) / o,
                            u = this.t.style,
                            d = this.t.currentStyle;
                        if (d) {
                            i = h, h = -l, l = -i, e = d.filter, u.filter = "";
                            var p, m, f = this.t.offsetWidth,
                                _ = this.t.offsetHeight,
                                y = "absolute" !== d.position,
                                v = "progid:DXImageTransform.Microsoft.Matrix(M11=" + r + ", M12=" + h + ", M21=" + l + ", M22=" + c,
                                b = s.x + f * s.xPercent / 100,
                                S = s.y + _ * s.yPercent / 100;
                            if (null != s.ox && (p = (s.oxp ? f * s.ox * .01 : s.ox) - f / 2, m = (s.oyp ? _ * s.oy * .01 : s.oy) - _ / 2, b += p - (p * r + m * h), S += m - (p * l + m * c)), y ? (p = f / 2, m = _ / 2, v += ", Dx=" + (p - (p * r + m * h) + b) + ", Dy=" + (m - (p * l + m * c) + S) + ")") : v += ", sizingMethod='auto expand')", -1 !== e.indexOf("DXImageTransform.Microsoft.Matrix(") ? u.filter = e.replace(N, v) : u.filter = v + " " + e, (0 === t || 1 === t) && 1 === r && 0 === h && 0 === l && 1 === c && (y && -1 === v.indexOf("Dx=0, Dy=0") || E.test(e) && 100 !== parseFloat(RegExp.$1) || -1 === e.indexOf(e.indexOf("Alpha")) && u.removeAttribute("filter")), !y) {
                                var P, A, I, C = 8 > g ? 1 : -1;
                                for (p = s.ieOffsetX || 0, m = s.ieOffsetY || 0, s.ieOffsetX = Math.round((f - ((0 > r ? -r : r) * f + (0 > h ? -h : h) * _)) / 2 + b), s.ieOffsetY = Math.round((_ - ((0 > c ? -c : c) * _ + (0 > l ? -l : l) * f)) / 2 + S), Tt = 0; 4 > Tt; Tt++) A = at[Tt], P = d[A], i = -1 !== P.indexOf("px") ? parseFloat(P) : tt(this.t, A, parseFloat(P), P.replace(T, "")) || 0, I = i !== s[A] ? 2 > Tt ? -s.ieOffsetX : -s.ieOffsetY : 2 > Tt ? p - s.ieOffsetX : m - s.ieOffsetY, u[A] = (s[A] = Math.round(i - I * (0 === Tt || 2 === Tt ? 1 : C))) + "px"
                            }
                        }
                    },
                    Xt = j.set3DTransformRatio = j.setTransformRatio = function(t) {
                        var e, i, s, n, a, o, r, h, l, c, u, d, m, g, f, _, y, v, b, S, T, E, P, A = this.data,
                            I = this.t.style,
                            C = A.rotation,
                            x = A.rotationX,
                            w = A.rotationY,
                            M = A.scaleX,
                            O = A.scaleY,
                            L = A.scaleZ,
                            N = A.x,
                            k = A.y,
                            R = A.z,
                            G = A.svg,
                            B = A.perspective,
                            F = A.force3D,
                            U = A.skewY,
                            H = A.skewX;
                        if (U && (H += U, C += U), !((1 !== t && 0 !== t || "auto" !== F || this.tween._totalTime !== this.tween._totalDuration && this.tween._totalTime) && F || R || B || w || x || 1 !== L) || It && G || !Ot) C || H || G ? (C *= D, E = H * D, P = 1e5, i = Math.cos(C) * M, a = Math.sin(C) * M, s = Math.sin(C - E) * -O, o = Math.cos(C - E) * O, E && "simple" === A.skewType && (e = Math.tan(E - U * D), e = Math.sqrt(1 + e * e), s *= e, o *= e, U && (e = Math.tan(U * D), e = Math.sqrt(1 + e * e), i *= e, a *= e)), G && (N += A.xOrigin - (A.xOrigin * i + A.yOrigin * s) + A.xOffset, k += A.yOrigin - (A.xOrigin * a + A.yOrigin * o) + A.yOffset, It && (A.xPercent || A.yPercent) && (f = this.t.getBBox(), N += .01 * A.xPercent * f.width, k += .01 * A.yPercent * f.height), (f = 1e-6) > N && N > -f && (N = 0), f > k && k > -f && (k = 0)), b = (i * P | 0) / P + "," + (a * P | 0) / P + "," + (s * P | 0) / P + "," + (o * P | 0) / P + "," + N + "," + k + ")", G && It ? this.t.setAttribute("transform", "matrix(" + b) : I[xt] = (A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) matrix(" : "matrix(") + b) : I[xt] = (A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) matrix(" : "matrix(") + M + ",0,0," + O + "," + N + "," + k + ")";
                        else {
                            if (p && ((f = 1e-4) > M && M > -f && (M = L = 2e-5), f > O && O > -f && (O = L = 2e-5), !B || A.z || A.rotationX || A.rotationY || (B = 0)), C || H) C *= D, _ = i = Math.cos(C), y = a = Math.sin(C), H && (C -= H * D, _ = Math.cos(C), y = Math.sin(C), "simple" === A.skewType && (e = Math.tan((H - U) * D), e = Math.sqrt(1 + e * e), _ *= e, y *= e, A.skewY && (e = Math.tan(U * D), e = Math.sqrt(1 + e * e), i *= e, a *= e))), s = -y, o = _;
                            else {
                                if (!(w || x || 1 !== L || B || G)) return void(I[xt] = (A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) translate3d(" : "translate3d(") + N + "px," + k + "px," + R + "px)" + (1 !== M || 1 !== O ? " scale(" + M + "," + O + ")" : ""));
                                i = o = 1, s = a = 0
                            }
                            c = 1, n = r = h = l = u = d = 0, m = B ? -1 / B : 0, g = A.zOrigin, f = 1e-6, S = ",", T = "0", (C = w * D) && (_ = Math.cos(C), y = Math.sin(C), h = -y, u = m * -y, n = i * y, r = a * y, c = _, m *= _, i *= _, a *= _), (C = x * D) && (_ = Math.cos(C), y = Math.sin(C), e = s * _ + n * y, v = o * _ + r * y, l = c * y, d = m * y, n = s * -y + n * _, r = o * -y + r * _, c *= _, m *= _, s = e, o = v), 1 !== L && (n *= L, r *= L, c *= L, m *= L), 1 !== O && (s *= O, o *= O, l *= O, d *= O), 1 !== M && (i *= M, a *= M, h *= M, u *= M), (g || G) && (g && (N += n * -g, k += r * -g, R += c * -g + g), G && (N += A.xOrigin - (A.xOrigin * i + A.yOrigin * s) + A.xOffset, k += A.yOrigin - (A.xOrigin * a + A.yOrigin * o) + A.yOffset), f > N && N > -f && (N = T), f > k && k > -f && (k = T), f > R && R > -f && (R = 0)), b = A.xPercent || A.yPercent ? "translate(" + A.xPercent + "%," + A.yPercent + "%) matrix3d(" : "matrix3d(", b += (f > i && i > -f ? T : i) + S + (f > a && a > -f ? T : a) + S + (f > h && h > -f ? T : h), b += S + (f > u && u > -f ? T : u) + S + (f > s && s > -f ? T : s) + S + (f > o && o > -f ? T : o), x || w || 1 !== L ? (b += S + (f > l && l > -f ? T : l) + S + (f > d && d > -f ? T : d) + S + (f > n && n > -f ? T : n), b += S + (f > r && r > -f ? T : r) + S + (f > c && c > -f ? T : c) + S + (f > m && m > -f ? T : m) + S) : b += ",0,0,0,0,1,0,", b += N + S + k + S + R + S + (B ? 1 + -R / B : 1) + ")", I[xt] = b
                        }
                    };
                (l = Lt.prototype).x = l.y = l.z = l.skewX = l.skewY = l.rotation = l.rotationX = l.rotationY = l.zOrigin = l.xPercent = l.yPercent = l.xOffset = l.yOffset = 0, l.scaleX = l.scaleY = l.scaleZ = 1, Pt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin", {
                    parser: function(t, e, i, s, a, r, h) {
                        if (s._lastParsedTransform === h) return a;
                        s._lastParsedTransform = h;
                        var l, c = h.scale && "function" == typeof h.scale ? h.scale : 0;
                        "function" == typeof h[i] && (l = h[i], h[i] = e), c && (h.scale = c(_, t));
                        var u, d, p, m, g, y, v, b, S, T = t._gsTransform,
                            E = t.style,
                            P = Ct.length,
                            A = h,
                            I = {},
                            C = "transformOrigin",
                            x = Wt(t, n, !0, A.parseTransform),
                            w = A.transform && ("function" == typeof A.transform ? A.transform(_, f) : A.transform);
                        if (x.skewType = A.skewType || x.skewType || o.defaultSkewType, s._transform = x, w && "string" == typeof w && xt) d = Y.style, d[xt] = w, d.display = "block", d.position = "absolute", U.body.appendChild(Y), u = Wt(Y, null, !1), "simple" === x.skewType && (u.scaleY *= Math.cos(u.skewX * D)), x.svg && (y = x.xOrigin, v = x.yOrigin, u.x -= x.xOffset, u.y -= x.yOffset, (A.transformOrigin || A.svgOrigin) && (w = {}, Gt(t, rt(A.transformOrigin), w, A.svgOrigin, A.smoothOrigin, !0), y = w.xOrigin, v = w.yOrigin, u.x -= w.xOffset - x.xOffset, u.y -= w.yOffset - x.yOffset), (y || v) && (b = Yt(Y, !0), u.x -= y - (y * b[0] + v * b[2]), u.y -= v - (y * b[1] + v * b[3]))), U.body.removeChild(Y), u.perspective || (u.perspective = x.perspective), null != A.xPercent && (u.xPercent = lt(A.xPercent, x.xPercent)), null != A.yPercent && (u.yPercent = lt(A.yPercent, x.yPercent));
                        else if ("object" == typeof A) {
                            if (u = {
                                scaleX: lt(null != A.scaleX ? A.scaleX : A.scale, x.scaleX),
                                scaleY: lt(null != A.scaleY ? A.scaleY : A.scale, x.scaleY),
                                scaleZ: lt(A.scaleZ, x.scaleZ),
                                x: lt(A.x, x.x),
                                y: lt(A.y, x.y),
                                z: lt(A.z, x.z),
                                xPercent: lt(A.xPercent, x.xPercent),
                                yPercent: lt(A.yPercent, x.yPercent),
                                perspective: lt(A.transformPerspective, x.perspective)
                            }, null != (g = A.directionalRotation))
                                if ("object" == typeof g)
                                    for (d in g) A[d] = g[d];
                                else A.rotation = g;
                                "string" == typeof A.x && -1 !== A.x.indexOf("%") && (u.x = 0, u.xPercent = lt(A.x, x.xPercent)), "string" == typeof A.y && -1 !== A.y.indexOf("%") && (u.y = 0, u.yPercent = lt(A.y, x.yPercent)), u.rotation = ct("rotation" in A ? A.rotation : "shortRotation" in A ? A.shortRotation + "_short" : "rotationZ" in A ? A.rotationZ : x.rotation, x.rotation, "rotation", I), Ot && (u.rotationX = ct("rotationX" in A ? A.rotationX : "shortRotationX" in A ? A.shortRotationX + "_short" : x.rotationX || 0, x.rotationX, "rotationX", I), u.rotationY = ct("rotationY" in A ? A.rotationY : "shortRotationY" in A ? A.shortRotationY + "_short" : x.rotationY || 0, x.rotationY, "rotationY", I)), u.skewX = ct(A.skewX, x.skewX), u.skewY = ct(A.skewY, x.skewY)
                        }
                        for (Ot && null != A.force3D && (x.force3D = A.force3D, m = !0), (p = x.force3D || x.z || x.rotationX || x.rotationY || u.z || u.rotationX || u.rotationY || u.perspective) || null == A.scale || (u.scaleZ = 1); --P > -1;) S = Ct[P], ((w = u[S] - x[S]) > 1e-6 || -1e-6 > w || null != A[S] || null != B[S]) && (m = !0, a = new vt(x, S, x[S], w, a), S in I && (a.e = I[S]), a.xs0 = 0, a.plugin = r, s._overwriteProps.push(a.n));
                        return w = A.transformOrigin, x.svg && (w || A.svgOrigin) && (y = x.xOffset, v = x.yOffset, Gt(t, rt(w), u, A.svgOrigin, A.smoothOrigin), a = bt(x, "xOrigin", (T ? x : u).xOrigin, u.xOrigin, a, C), a = bt(x, "yOrigin", (T ? x : u).yOrigin, u.yOrigin, a, C), (y !== x.xOffset || v !== x.yOffset) && (a = bt(x, "xOffset", T ? y : x.xOffset, x.xOffset, a, C), a = bt(x, "yOffset", T ? v : x.yOffset, x.yOffset, a, C)), w = "0px 0px"), (w || Ot && p && x.zOrigin) && (xt ? (m = !0, S = Mt, w = (w || $(t, S, n, !1, "50% 50%")) + "", a = new vt(E, S, 0, 0, a, -1, C), a.b = E[S], a.plugin = r, Ot ? (d = x.zOrigin, w = w.split(" "), x.zOrigin = (w.length > 2 && (0 === d || "0px" !== w[2]) ? parseFloat(w[2]) : d) || 0, a.xs0 = a.e = w[0] + " " + (w[1] || "50%") + " 0px", a = new vt(x, "zOrigin", 0, 0, a, -1, a.n), a.b = d, a.xs0 = a.e = x.zOrigin) : a.xs0 = a.e = w) : rt(w + "", x)), m && (s._transformType = x.svg && It || !p && 3 !== this._transformType ? 2 : 3), l && (h[i] = l), c && (h.scale = c), a
                    },
                    prefix: !0
                }), Pt("boxShadow", {
                    defaultValue: "0px 0px 0px 0px #999",
                    prefix: !0,
                    color: !0,
                    multi: !0,
                    keyword: "inset"
                }), Pt("borderRadius", {
                    defaultValue: "0px",
                    parser: function(t, e, i, a, o, r) {
                        e = this.format(e);
                        var h, l, c, u, d, p, m, g, f, _, y, v, b, S, T, E, P = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                            A = t.style;
                        for (f = parseFloat(t.offsetWidth), _ = parseFloat(t.offsetHeight), h = e.split(" "), l = 0; l < P.length; l++) this.p.indexOf("border") && (P[l] = Z(P[l])), -1 !== (d = u = $(t, P[l], n, !1, "0px")).indexOf(" ") && (u = d.split(" "), d = u[0], u = u[1]), p = c = h[l], m = parseFloat(d), v = d.substr((m + "").length), (b = "=" === p.charAt(1)) ? (g = parseInt(p.charAt(0) + "1", 10), p = p.substr(2), g *= parseFloat(p), y = p.substr((g + "").length - (0 > g ? 1 : 0)) || "") : (g = parseFloat(p), y = p.substr((g + "").length)), "" === y && (y = s[i] || v), y !== v && (S = tt(t, "borderLeft", m, v), T = tt(t, "borderTop", m, v), "%" === y ? (d = S / f * 100 + "%", u = T / _ * 100 + "%") : "em" === y ? (E = tt(t, "borderLeft", 1, "em"), d = S / E + "em", u = T / E + "em") : (d = S + "px", u = T + "px"), b && (p = parseFloat(d) + g + y, c = parseFloat(u) + g + y)), o = St(A, P[l], d + " " + u, p + " " + c, !1, "0px", o);
                        return o
                    },
                    prefix: !0,
                    formatter: ft("0px 0px 0px 0px", !1, !0)
                }), Pt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius", {
                    defaultValue: "0px",
                    parser: function(t, e, i, s, a, o) {
                        return St(t.style, i, this.format($(t, i, n, !1, "0px 0px")), this.format(e), !1, "0px", a)
                    },
                    prefix: !0,
                    formatter: ft("0px 0px", !1, !0)
                }), Pt("backgroundPosition", {
                    defaultValue: "0 0",
                    parser: function(t, e, i, s, a, o) {
                        var r, h, l, c, u, d, p = "background-position",
                            m = n || Q(t, null),
                            f = this.format((m ? g ? m.getPropertyValue(p + "-x") + " " + m.getPropertyValue(p + "-y") : m.getPropertyValue(p) : t.currentStyle.backgroundPositionX + " " + t.currentStyle.backgroundPositionY) || "0 0"),
                            _ = this.format(e);
                        if (-1 !== f.indexOf("%") != (-1 !== _.indexOf("%")) && _.split(",").length < 2 && (d = $(t, "backgroundImage").replace(w, "")) && "none" !== d) {
                            for (r = f.split(" "), h = _.split(" "), W.setAttribute("src", d), l = 2; --l > -1;) f = r[l], (c = -1 !== f.indexOf("%")) !== (-1 !== h[l].indexOf("%")) && (u = 0 === l ? t.offsetWidth - W.width : t.offsetHeight - W.height, r[l] = c ? parseFloat(f) / 100 * u + "px" : parseFloat(f) / u * 100 + "%");
                            f = r.join(" ")
                        }
                        return this.parseComplex(t.style, f, _, a, o)
                    },
                    formatter: rt
                }), Pt("backgroundSize", {
                    defaultValue: "0 0",
                    formatter: function(t) {
                        return t += "", rt(-1 === t.indexOf(" ") ? t + " " + t : t)
                    }
                }), Pt("perspective", {
                    defaultValue: "0px",
                    prefix: !0
                }), Pt("perspectiveOrigin", {
                    defaultValue: "50% 50%",
                    prefix: !0
                }), Pt("transformStyle", {
                    prefix: !0
                }), Pt("backfaceVisibility", {
                    prefix: !0
                }), Pt("userSelect", {
                    prefix: !0
                }), Pt("margin", {
                    parser: _t("marginTop,marginRight,marginBottom,marginLeft")
                }), Pt("padding", {
                    parser: _t("paddingTop,paddingRight,paddingBottom,paddingLeft")
                }), Pt("clip", {
                    defaultValue: "rect(0px,0px,0px,0px)",
                    parser: function(t, e, i, s, a, o) {
                        var r, h, l;
                        return 9 > g ? (h = t.currentStyle, l = 8 > g ? " " : ",", r = "rect(" + h.clipTop + l + h.clipRight + l + h.clipBottom + l + h.clipLeft + ")", e = this.format(e).split(",").join(l)) : (r = this.format($(t, this.p, n, !1, this.dflt)), e = this.format(e)), this.parseComplex(t.style, r, e, a, o)
                    }
                }), Pt("textShadow", {
                    defaultValue: "0px 0px 0px #999",
                    color: !0,
                    multi: !0
                }), Pt("autoRound,strictUnits", {
                    parser: function(t, e, i, s, n) {
                        return n
                    }
                }), Pt("border", {
                    defaultValue: "0px solid #000",
                    parser: function(t, e, i, s, a, o) {
                        var r = $(t, "borderTopWidth", n, !1, "0px"),
                            h = this.format(e).split(" "),
                            l = h[0].replace(T, "");
                        return "px" !== l && (r = parseFloat(r) / tt(t, "borderTopWidth", 1, l) + l), this.parseComplex(t.style, this.format(r + " " + $(t, "borderTopStyle", n, !1, "solid") + " " + $(t, "borderTopColor", n, !1, "#000")), h.join(" "), a, o)
                    },
                    color: !0,
                    formatter: function(t) {
                        var e = t.split(" ");
                        return e[0] + " " + (e[1] || "solid") + " " + (t.match(gt) || ["#000"])[0]
                    }
                }), Pt("borderWidth", {
                    parser: _t("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
                }), Pt("float,cssFloat,styleFloat", {
                    parser: function(t, e, i, s, n, a) {
                        var o = t.style,
                            r = "cssFloat" in o ? "cssFloat" : "styleFloat";
                        return new vt(o, r, 0, 0, n, -1, i, !1, 0, o[r], e)
                    }
                });
                var zt = function(t) {
                    var e, i = this.t,
                        s = i.filter || $(this.data, "filter") || "",
                        n = this.s + this.c * t | 0;
                    100 === n && (-1 === s.indexOf("atrix(") && -1 === s.indexOf("radient(") && -1 === s.indexOf("oader(") ? (i.removeAttribute("filter"), e = !$(this.data, "filter")) : (i.filter = s.replace(A, ""), e = !0)), e || (this.xn1 && (i.filter = s = s || "alpha(opacity=" + n + ")"), -1 === s.indexOf("pacity") ? 0 === n && this.xn1 || (i.filter = s + " alpha(opacity=" + n + ")") : i.filter = s.replace(E, "opacity=" + n))
                };
                Pt("opacity,alpha,autoAlpha", {
                    defaultValue: "1",
                    parser: function(t, e, i, s, a, o) {
                        var r = parseFloat($(t, "opacity", n, !1, "1")),
                            h = t.style,
                            l = "autoAlpha" === i;
                        return "string" == typeof e && "=" === e.charAt(1) && (e = ("-" === e.charAt(0) ? -1 : 1) * parseFloat(e.substr(2)) + r), l && 1 === r && "hidden" === $(t, "visibility", n) && 0 !== e && (r = 0), z ? a = new vt(h, "opacity", r, e - r, a) : (a = new vt(h, "opacity", 100 * r, 100 * (e - r), a), a.xn1 = l ? 1 : 0, h.zoom = 1, a.type = 2, a.b = "alpha(opacity=" + a.s + ")", a.e = "alpha(opacity=" + (a.s + a.c) + ")", a.data = t, a.plugin = o, a.setRatio = zt), l && (a = new vt(h, "visibility", 0, 0, a, -1, null, !1, 0, 0 !== r ? "inherit" : "hidden", 0 === e ? "hidden" : "inherit"), a.xs0 = "inherit", s._overwriteProps.push(a.n), s._overwriteProps.push(i)), a
                    }
                });
                var Kt = function(t, e) {
                        e && (t.removeProperty ? (("ms" === e.substr(0, 2) || "webkit" === e.substr(0, 6)) && (e = "-" + e), t.removeProperty(e.replace(C, "-$1").toLowerCase())) : t.removeAttribute(e))
                    },
                    Vt = function(t) {
                        if (this.t._gsClassPT = this, 1 === t || 0 === t) {
                            this.t.setAttribute("class", 0 === t ? this.b : this.e);
                            for (var e = this.data, i = this.t.style; e;) e.v ? i[e.p] = e.v : Kt(i, e.p), e = e._next;
                            1 === t && this.t._gsClassPT === this && (this.t._gsClassPT = null)
                        } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
                    };
                Pt("className", {
                    parser: function(t, e, s, a, o, r, h) {
                        var l, c, u, d, p, m = t.getAttribute("class") || "",
                            g = t.style.cssText;
                        if (o = a._classNamePT = new vt(t, s, 0, 0, o, 2), o.setRatio = Vt, o.pr = -11, i = !0, o.b = m, c = it(t, n), u = t._gsClassPT) {
                            for (d = {}, p = u.data; p;) d[p.p] = 1, p = p._next;
                            u.setRatio(1)
                        }
                        return t._gsClassPT = o, o.e = "=" !== e.charAt(1) ? e : m.replace(new RegExp("(?:\\s|^)" + e.substr(2) + "(?![\\w-])"), "") + ("+" === e.charAt(0) ? " " + e.substr(2) : ""), t.setAttribute("class", o.e), l = st(t, c, it(t), h, d), t.setAttribute("class", m), o.data = l.firstMPT, t.style.cssText = g, o = o.xfirst = a.parse(t, l.difs, o, r)
                    }
                });
                var qt = function(t) {
                    if ((1 === t || 0 === t) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                        var e, i, s, n, a, o = this.t.style,
                            r = h.transform.parse;
                        if ("all" === this.e) o.cssText = "", n = !0;
                        else
                            for (e = this.e.split(" ").join("").split(","), s = e.length; --s > -1;) i = e[s], h[i] && (h[i].parse === r ? n = !0 : i = "transformOrigin" === i ? Mt : h[i].p), Kt(o, i);
                        n && (Kt(o, xt), (a = this.t._gsTransform) && (a.svg && (this.t.removeAttribute("data-svg-origin"), this.t.removeAttribute("transform")), delete this.t._gsTransform))
                    }
                };
                for (Pt("clearProps", {
                    parser: function(t, e, s, n, a) {
                        return a = new vt(t, s, 0, 0, a, 2), a.setRatio = qt, a.e = e, a.pr = -10, a.data = n._tween, i = !0, a
                    }
                }), l = "bezier,throwProps,physicsProps,physics2D".split(","), Tt = l.length; Tt--;) At(l[Tt]);
                (l = o.prototype)._firstPT = l._lastParsedTransform = l._transform = null, l._onInitTween = function(t, e, r, l) {
                    if (!t.nodeType) return !1;
                    this._target = f = t, this._tween = r, this._vars = e, _ = l, c = e.autoRound, i = !1, s = e.suffixMap || o.suffixMap, n = Q(t, ""), a = this._overwriteProps;
                    var p, g, y, v, b, S, T, E, A, I = t.style;
                    if (u && "" === I.zIndex && ("auto" === (p = $(t, "zIndex", n)) || "" === p) && this._addLazySet(I, "zIndex", 0), "string" == typeof e && (v = I.cssText, p = it(t, n), I.cssText = v + ";" + e, p = st(t, p, it(t)).difs, !z && P.test(e) && (p.opacity = parseFloat(RegExp.$1)), e = p, I.cssText = v), e.className ? this._firstPT = g = h.className.parse(t, e.className, "className", this, null, null, e) : this._firstPT = g = this.parse(t, e, null), this._transformType) {
                        for (A = 3 === this._transformType, xt ? d && (u = !0, "" === I.zIndex && ("auto" === (T = $(t, "zIndex", n)) || "" === T) && this._addLazySet(I, "zIndex", 0), m && this._addLazySet(I, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (A ? "visible" : "hidden"))) : I.zoom = 1, y = g; y && y._next;) y = y._next;
                        E = new vt(t, "transform", 0, 0, null, 2), this._linkCSSP(E, null, y), E.setRatio = xt ? Xt : jt, E.data = this._transform || Wt(t, n, !0), E.tween = r, E.pr = -1, a.pop()
                    }
                    if (i) {
                        for (; g;) {
                            for (S = g._next, y = v; y && y.pr > g.pr;) y = y._next;
                            (g._prev = y ? y._prev : b) ? g._prev._next = g: v = g, (g._next = y) ? y._prev = g : b = g, g = S
                        }
                        this._firstPT = v
                    }
                    return !0
                }, l.parse = function(t, e, i, a) {
                    var o, r, l, u, d, p, m, g, y, v, b = t.style;
                    for (o in e) {
                        if ("function" == typeof(p = e[o]) && (p = p(_, f)), r = h[o]) i = r.parse(t, p, o, this, i, a, e);
                        else {
                            if ("--" === o.substr(0, 2)) {
                                this._tween._propLookup[o] = this._addTween.call(this._tween, t.style, "setProperty", Q(t).getPropertyValue(o) + "", p + "", o, !1, o);
                                continue
                            }
                            d = $(t, o, n) + "", y = "string" == typeof p, "color" === o || "fill" === o || "stroke" === o || -1 !== o.indexOf("Color") || y && I.test(p) ? (y || (p = pt(p), p = (p.length > 3 ? "rgba(" : "rgb(") + p.join(",") + ")"), i = St(b, o, d, p, !0, "transparent", i, 0, a)) : y && R.test(p) ? i = St(b, o, d, p, !0, null, i, 0, a) : (l = parseFloat(d), m = l || 0 === l ? d.substr((l + "").length) : "", ("" === d || "auto" === d) && ("width" === o || "height" === o ? (l = ot(t, o, n), m = "px") : "left" === o || "top" === o ? (l = et(t, o, n), m = "px") : (l = "opacity" !== o ? 0 : 1, m = "")), (v = y && "=" === p.charAt(1)) ? (u = parseInt(p.charAt(0) + "1", 10), p = p.substr(2), u *= parseFloat(p), g = p.replace(T, "")) : (u = parseFloat(p), g = y ? p.replace(T, "") : ""), "" === g && (g = o in s ? s[o] : m), p = u || 0 === u ? (v ? u + l : u) + g : e[o], m !== g && ("" !== g || "lineHeight" === o) && (u || 0 === u) && l && (l = tt(t, o, l, m), "%" === g ? (l /= tt(t, o, 100, "%") / 100, !0 !== e.strictUnits && (d = l + "%")) : "em" === g || "rem" === g || "vw" === g || "vh" === g ? l /= tt(t, o, 1, g) : "px" !== g && (u = tt(t, o, u, g), g = "px"), v && (u || 0 === u) && (p = u + l + g)), v && (u += l), !l && 0 !== l || !u && 0 !== u ? void 0 !== b[o] && (p || p + "" != "NaN" && null != p) ? (i = new vt(b, o, u || l || 0, 0, i, -1, o, !1, 0, d, p), i.xs0 = "none" !== p || "display" !== o && -1 === o.indexOf("Style") ? p : d) : V(e[o]) : (i = new vt(b, o, l, u - l, i, 0, o, !1 !== c && ("px" === g || "zIndex" === o), 0, d, p), i.xs0 = g))
                        }
                        a && i && !i.plugin && (i.plugin = a)
                    }
                    return i
                }, l.setRatio = function(t) {
                    var e, i, s, n = this._firstPT;
                    if (1 !== t || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                        if (t || this._tween._time !== this._tween._duration && 0 !== this._tween._time || -1e-6 === this._tween._rawPrevTime)
                            for (; n;) {
                                if (e = n.c * t + n.s, n.r ? e = Math.round(e) : 1e-6 > e && e > -1e-6 && (e = 0), n.type)
                                    if (1 === n.type)
                                        if (2 === (s = n.l)) n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2;
                                        else if (3 === s) n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2 + n.xn2 + n.xs3;
                                else if (4 === s) n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2 + n.xn2 + n.xs3 + n.xn3 + n.xs4;
                                else if (5 === s) n.t[n.p] = n.xs0 + e + n.xs1 + n.xn1 + n.xs2 + n.xn2 + n.xs3 + n.xn3 + n.xs4 + n.xn4 + n.xs5;
                                else {
                                    for (i = n.xs0 + e + n.xs1, s = 1; s < n.l; s++) i += n["xn" + s] + n["xs" + (s + 1)];
                                    n.t[n.p] = i
                                } else -1 === n.type ? n.t[n.p] = n.xs0 : n.setRatio && n.setRatio(t);
                                else n.t[n.p] = e + n.xs0;
                                n = n._next
                            } else
                                for (; n;) 2 !== n.type ? n.t[n.p] = n.b : n.setRatio(t), n = n._next;
                        else
                            for (; n;) {
                                if (2 !== n.type)
                                    if (n.r && -1 !== n.type)
                                        if (e = Math.round(n.s + n.c), n.type) {
                                            if (1 === n.type) {
                                                for (s = n.l, i = n.xs0 + e + n.xs1, s = 1; s < n.l; s++) i += n["xn" + s] + n["xs" + (s + 1)];
                                                n.t[n.p] = i
                                            }
                                        } else n.t[n.p] = e + n.xs0;
                                else n.t[n.p] = n.e;
                                else n.setRatio(t);
                                n = n._next
                            }
                }, l._enableTransforms = function(t) {
                    this._transform = this._transform || Wt(this._target, n, !0), this._transformType = this._transform.svg && It || !t && 3 !== this._transformType ? 2 : 3
                };
                var Jt = function(t) {
                    this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0)
                };
                l._addLazySet = function(t, e, i) {
                    var s = this._firstPT = new vt(t, e, 0, 0, this._firstPT, 2);
                    s.e = i, s.setRatio = Jt, s.data = this
                }, l._linkCSSP = function(t, e, i, s) {
                    return t && (e && (e._prev = t), t._next && (t._next._prev = t._prev), t._prev ? t._prev._next = t._next : this._firstPT === t && (this._firstPT = t._next, s = !0), i ? i._next = t : s || null !== this._firstPT || (this._firstPT = t), t._next = e, t._prev = i), t
                }, l._mod = function(t) {
                    for (var e = this._firstPT; e;) "function" == typeof t[e.p] && t[e.p] === Math.round && (e.r = 1), e = e._next
                }, l._kill = function(e) {
                    var i, s, n, a = e;
                    if (e.autoAlpha || e.alpha) {
                        a = {};
                        for (s in e) a[s] = e[s];
                        a.opacity = 1, a.autoAlpha && (a.visibility = 1)
                    }
                    for (e.className && (i = this._classNamePT) && ((n = i.xfirst) && n._prev ? this._linkCSSP(n._prev, i._next, n._prev._prev) : n === this._firstPT && (this._firstPT = i._next), i._next && this._linkCSSP(i._next, i._next._next, n._prev), this._classNamePT = null), i = this._firstPT; i;) i.plugin && i.plugin !== s && i.plugin._kill && (i.plugin._kill(e), s = i.plugin), i = i._next;
                    return t.prototype._kill.call(this, a)
                };
                var Zt = function(t, e, i) {
                    var s, n, a, o;
                    if (t.slice)
                        for (n = t.length; --n > -1;) Zt(t[n], e, i);
                    else
                        for (s = t.childNodes, n = s.length; --n > -1;) a = s[n], o = a.type, a.style && (e.push(it(a)), i && i.push(a)), 1 !== o && 9 !== o && 11 !== o || !a.childNodes.length || Zt(a, e, i)
                };
                return o.cascadeTo = function(t, i, s) {
                    var n, a, o, r, h = e.to(t, i, s),
                        l = [h],
                        c = [],
                        u = [],
                        d = [],
                        p = e._internals.reservedProps;
                    for (t = h._targets || h.target, Zt(t, c, d), h.render(i, !0, !0), Zt(t, u), h.render(0, !0, !0), h._enabled(!0), n = d.length; --n > -1;)
                        if ((a = st(d[n], c[n], u[n])).firstMPT) {
                            a = a.difs;
                            for (o in s) p[o] && (a[o] = s[o]);
                            r = {};
                            for (o in a) r[o] = c[n][o];
                            l.push(e.fromTo(d[n], i, r, a))
                        }
                    return l
                }, t.activate([o]), o
            }, !0),
            function() {
                var t = function(t) {
                        for (; t;) t.f || t.blob || (t.m = Math.round), t = t._next
                    },
                    e = _gsScope._gsDefine.plugin({
                        propName: "roundProps",
                        version: "1.6.0",
                        priority: -1,
                        API: 2,
                        init: function(t, e, i) {
                            return this._tween = i, !0
                        }
                    }).prototype;
                e._onInitAllProps = function() {
                    for (var e, i, s, n = this._tween, a = n.vars.roundProps.join ? n.vars.roundProps : n.vars.roundProps.split(","), o = a.length, r = {}, h = n._propLookup.roundProps; --o > -1;) r[a[o]] = Math.round;
                    for (o = a.length; --o > -1;)
                        for (e = a[o], i = n._firstPT; i;) s = i._next, i.pg ? i.t._mod(r) : i.n === e && (2 === i.f && i.t ? t(i.t._firstPT) : (this._add(i.t, e, i.s, i.c), s && (s._prev = i._prev), i._prev ? i._prev._next = s : n._firstPT === i && (n._firstPT = s), i._next = i._prev = null, n._propLookup[e] = h)), i = s;
                    return !1
                }, e._add = function(t, e, i, s) {
                    this._addTween(t, e, i, i + s, e, Math.round), this._overwriteProps.push(e)
                }
            }(), _gsScope._gsDefine.plugin({
                propName: "attr",
                API: 2,
                version: "0.6.1",
                init: function(t, e, i, s) {
                    var n, a;
                    if ("function" != typeof t.setAttribute) return !1;
                    for (n in e) "function" == typeof(a = e[n]) && (a = a(s, t)), this._addTween(t, "setAttribute", t.getAttribute(n) + "", a + "", n, !1, n), this._overwriteProps.push(n);
                    return !0
                }
            }), _gsScope._gsDefine.plugin({
                propName: "directionalRotation",
                version: "0.3.1",
                API: 2,
                init: function(t, e, i, s) {
                    "object" != typeof e && (e = {
                        rotation: e
                    }), this.finals = {};
                    var n, a, o, r, h, l, c = !0 === e.useRadians ? 2 * Math.PI : 360;
                    for (n in e) "useRadians" !== n && ("function" == typeof(r = e[n]) && (r = r(s, t)), l = (r + "").split("_"), a = l[0], o = parseFloat("function" != typeof t[n] ? t[n] : t[n.indexOf("set") || "function" != typeof t["get" + n.substr(3)] ? n : "get" + n.substr(3)]()), r = this.finals[n] = "string" == typeof a && "=" === a.charAt(1) ? o + parseInt(a.charAt(0) + "1", 10) * Number(a.substr(2)) : Number(a) || 0, h = r - o, l.length && (-1 !== (a = l.join("_")).indexOf("short") && (h %= c) != h % (c / 2) && (h = 0 > h ? h + c : h - c), -1 !== a.indexOf("_cw") && 0 > h ? h = (h + 9999999999 * c) % c - (h / c | 0) * c : -1 !== a.indexOf("ccw") && h > 0 && (h = (h - 9999999999 * c) % c - (h / c | 0) * c)), (h > 1e-6 || -1e-6 > h) && (this._addTween(t, n, o, o + h, n), this._overwriteProps.push(n)));
                    return !0
                },
                set: function(t) {
                    var e;
                    if (1 !== t) this._super.setRatio.call(this, t);
                    else
                        for (e = this._firstPT; e;) e.f ? e.t[e.p](this.finals[e.p]) : e.t[e.p] = this.finals[e.p], e = e._next
                }
            })._autoCSS = !0, _gsScope._gsDefine("easing.Back", ["easing.Ease"], function(t) {
                var e, i, s, n = _gsScope.GreenSockGlobals || _gsScope,
                    a = n.com.greensock,
                    o = 2 * Math.PI,
                    r = Math.PI / 2,
                    h = a._class,
                    l = function(e, i) {
                        var s = h("easing." + e, function() {}, !0),
                            n = s.prototype = new t;
                        return n.constructor = s, n.getRatio = i, s
                    },
                    c = t.register || function() {},
                    u = function(t, e, i, s, n) {
                        var a = h("easing." + t, {
                            easeOut: new e,
                            easeIn: new i,
                            easeInOut: new s
                        }, !0);
                        return c(a, t), a
                    },
                    d = function(t, e, i) {
                        this.t = t, this.v = e, i && (this.next = i, i.prev = this, this.c = i.v - e, this.gap = i.t - t)
                    },
                    p = function(e, i) {
                        var s = h("easing." + e, function(t) {
                                this._p1 = t || 0 === t ? t : 1.70158, this._p2 = 1.525 * this._p1
                            }, !0),
                            n = s.prototype = new t;
                        return n.constructor = s, n.getRatio = i, n.config = function(t) {
                            return new s(t)
                        }, s
                    },
                    m = u("Back", p("BackOut", function(t) {
                        return (t -= 1) * t * ((this._p1 + 1) * t + this._p1) + 1
                    }), p("BackIn", function(t) {
                        return t * t * ((this._p1 + 1) * t - this._p1)
                    }), p("BackInOut", function(t) {
                        return (t *= 2) < 1 ? .5 * t * t * ((this._p2 + 1) * t - this._p2) : .5 * ((t -= 2) * t * ((this._p2 + 1) * t + this._p2) + 2)
                    })),
                    g = h("easing.SlowMo", function(t, e, i) {
                        e = e || 0 === e ? e : .7, null == t ? t = .7 : t > 1 && (t = 1), this._p = 1 !== t ? e : 0, this._p1 = (1 - t) / 2, this._p2 = t, this._p3 = this._p1 + this._p2, this._calcEnd = !0 === i
                    }, !0),
                    f = g.prototype = new t;
                return f.constructor = g, f.getRatio = function(t) {
                    var e = t + (.5 - t) * this._p;
                    return t < this._p1 ? this._calcEnd ? 1 - (t = 1 - t / this._p1) * t : e - (t = 1 - t / this._p1) * t * t * t * e : t > this._p3 ? this._calcEnd ? 1 === t ? 0 : 1 - (t = (t - this._p3) / this._p1) * t : e + (t - e) * (t = (t - this._p3) / this._p1) * t * t * t : this._calcEnd ? 1 : e
                }, g.ease = new g(.7, .7), f.config = g.config = function(t, e, i) {
                    return new g(t, e, i)
                }, e = h("easing.SteppedEase", function(t, e) {
                    t = t || 1, this._p1 = 1 / t, this._p2 = t + (e ? 0 : 1), this._p3 = e ? 1 : 0
                }, !0), f = e.prototype = new t, f.constructor = e, f.getRatio = function(t) {
                    return 0 > t ? t = 0 : t >= 1 && (t = .999999999), ((this._p2 * t | 0) + this._p3) * this._p1
                }, f.config = e.config = function(t, i) {
                    return new e(t, i)
                }, i = h("easing.RoughEase", function(e) {
                    for (var i, s, n, a, o, r, h = (e = e || {}).taper || "none", l = [], c = 0, u = 0 | (e.points || 20), p = u, m = !1 !== e.randomize, g = !0 === e.clamp, f = e.template instanceof t ? e.template : null, _ = "number" == typeof e.strength ? .4 * e.strength : .4; --p > -1;) i = m ? Math.random() : 1 / u * p, s = f ? f.getRatio(i) : i, "none" === h ? n = _ : "out" === h ? (a = 1 - i, n = a * a * _) : "in" === h ? n = i * i * _ : .5 > i ? (a = 2 * i, n = a * a * .5 * _) : (a = 2 * (1 - i), n = a * a * .5 * _), m ? s += Math.random() * n - .5 * n : p % 2 ? s += .5 * n : s -= .5 * n, g && (s > 1 ? s = 1 : 0 > s && (s = 0)), l[c++] = {
                        x: i,
                        y: s
                    };
                    for (l.sort(function(t, e) {
                        return t.x - e.x
                    }), r = new d(1, 1, null), p = u; --p > -1;) o = l[p], r = new d(o.x, o.y, r);
                    this._prev = new d(0, 0, 0 !== r.t ? r : r.next)
                }, !0), f = i.prototype = new t, f.constructor = i, f.getRatio = function(t) {
                    var e = this._prev;
                    if (t > e.t) {
                        for (; e.next && t >= e.t;) e = e.next;
                        e = e.prev
                    } else
                        for (; e.prev && t <= e.t;) e = e.prev;
                    return this._prev = e, e.v + (t - e.t) / e.gap * e.c
                }, f.config = function(t) {
                    return new i(t)
                }, i.ease = new i, u("Bounce", l("BounceOut", function(t) {
                    return 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
                }), l("BounceIn", function(t) {
                    return (t = 1 - t) < 1 / 2.75 ? 1 - 7.5625 * t * t : 2 / 2.75 > t ? 1 - (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 - (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 - (7.5625 * (t -= 2.625 / 2.75) * t + .984375)
                }), l("BounceInOut", function(t) {
                    var e = .5 > t;
                    return t = e ? 1 - 2 * t : 2 * t - 1, t = 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375, e ? .5 * (1 - t) : .5 * t + .5
                })), u("Circ", l("CircOut", function(t) {
                    return Math.sqrt(1 - (t -= 1) * t)
                }), l("CircIn", function(t) {
                    return -(Math.sqrt(1 - t * t) - 1)
                }), l("CircInOut", function(t) {
                    return (t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
                })), s = function(e, i, s) {
                    var n = h("easing." + e, function(t, e) {
                            this._p1 = t >= 1 ? t : 1, this._p2 = (e || s) / (1 > t ? t : 1), this._p3 = this._p2 / o * (Math.asin(1 / this._p1) || 0), this._p2 = o / this._p2
                        }, !0),
                        a = n.prototype = new t;
                    return a.constructor = n, a.getRatio = i, a.config = function(t, e) {
                        return new n(t, e)
                    }, n
                }, u("Elastic", s("ElasticOut", function(t) {
                    return this._p1 * Math.pow(2, -10 * t) * Math.sin((t - this._p3) * this._p2) + 1
                }, .3), s("ElasticIn", function(t) {
                    return -this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2)
                }, .3), s("ElasticInOut", function(t) {
                    return (t *= 2) < 1 ? this._p1 * Math.pow(2, 10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) * -.5 : this._p1 * Math.pow(2, -10 * (t -= 1)) * Math.sin((t - this._p3) * this._p2) * .5 + 1
                }, .45)), u("Expo", l("ExpoOut", function(t) {
                    return 1 - Math.pow(2, -10 * t)
                }), l("ExpoIn", function(t) {
                    return Math.pow(2, 10 * (t - 1)) - .001
                }), l("ExpoInOut", function(t) {
                    return (t *= 2) < 1 ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (2 - Math.pow(2, -10 * (t - 1)))
                })), u("Sine", l("SineOut", function(t) {
                    return Math.sin(t * r)
                }), l("SineIn", function(t) {
                    return 1 - Math.cos(t * r)
                }), l("SineInOut", function(t) {
                    return -.5 * (Math.cos(Math.PI * t) - 1)
                })), h("easing.EaseLookup", {
                    find: function(e) {
                        return t.map[e]
                    }
                }, !0), c(n.SlowMo, "SlowMo", "ease,"), c(i, "RoughEase", "ease,"), c(e, "SteppedEase", "ease,"), m
            }, !0)
    }), _gsScope._gsDefine && _gsScope._gsQueue.pop()(),
    function(t, e) {
        "use strict";
        var i = {},
            s = t.document,
            n = t.GreenSockGlobals = t.GreenSockGlobals || t;
        if (!n.TweenLite) {
            var a, o, r, h, l, c = function(t) {
                    var e, i = t.split("."),
                        s = n;
                    for (e = 0; e < i.length; e++) s[i[e]] = s = s[i[e]] || {};
                    return s
                },
                u = c("com.greensock"),
                d = 1e-10,
                p = function(t) {
                    var e, i = [],
                        s = t.length;
                    for (e = 0; e !== s; i.push(t[e++]));
                    return i
                },
                m = function() {},
                g = function() {
                    var t = Object.prototype.toString,
                        e = t.call([]);
                    return function(i) {
                        return null != i && (i instanceof Array || "object" == typeof i && !!i.push && t.call(i) === e)
                    }
                }(),
                f = {},
                _ = function(s, a, o, r) {
                    this.sc = f[s] ? f[s].sc : [], f[s] = this, this.gsClass = null, this.func = o;
                    var h = [];
                    this.check = function(l) {
                        for (var u, d, p, m, g = a.length, y = g; --g > -1;)(u = f[a[g]] || new _(a[g], [])).gsClass ? (h[g] = u.gsClass, y--) : l && u.sc.push(this);
                        if (0 === y && o) {
                            if (d = ("com.greensock." + s).split("."), p = d.pop(), m = c(d.join("."))[p] = this.gsClass = o.apply(o, h), r)
                                if (n[p] = i[p] = m, "undefined" != typeof module && module.exports)
                                    if (s === e) {
                                        module.exports = i[e] = m;
                                        for (g in i) m[g] = i[g]
                                    } else i[e] && (i[e][p] = m);
                            else "function" == typeof define && define.amd && define((t.GreenSockAMDPath ? t.GreenSockAMDPath + "/" : "") + s.split(".").pop(), [], function() {
                                return m
                            });
                            for (g = 0; g < this.sc.length; g++) this.sc[g].check()
                        }
                    }, this.check(!0)
                },
                y = t._gsDefine = function(t, e, i, s) {
                    return new _(t, e, i, s)
                },
                v = u._class = function(t, e, i) {
                    return e = e || function() {}, y(t, [], function() {
                        return e
                    }, i), e
                };
            y.globals = n;
            var b = [0, 0, 1, 1],
                S = v("easing.Ease", function(t, e, i, s) {
                    this._func = t, this._type = i || 0, this._power = s || 0, this._params = e ? b.concat(e) : b
                }, !0),
                T = S.map = {},
                E = S.register = function(t, e, i, s) {
                    for (var n, a, o, r, h = e.split(","), l = h.length, c = (i || "easeIn,easeOut,easeInOut").split(","); --l > -1;)
                        for (a = h[l], n = s ? v("easing." + a, null, !0) : u.easing[a] || {}, o = c.length; --o > -1;) r = c[o], T[a + "." + r] = T[r + a] = n[r] = t.getRatio ? t : t[r] || new t
                };
            for ((r = S.prototype)._calcEnd = !1, r.getRatio = function(t) {
                if (this._func) return this._params[0] = t, this._func.apply(null, this._params);
                var e = this._type,
                    i = this._power,
                    s = 1 === e ? 1 - t : 2 === e ? t : .5 > t ? 2 * t : 2 * (1 - t);
                return 1 === i ? s *= s : 2 === i ? s *= s * s : 3 === i ? s *= s * s * s : 4 === i && (s *= s * s * s * s), 1 === e ? 1 - s : 2 === e ? s : .5 > t ? s / 2 : 1 - s / 2
            }, o = (a = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"]).length; --o > -1;) r = a[o] + ",Power" + o, E(new S(null, null, 1, o), r, "easeOut", !0), E(new S(null, null, 2, o), r, "easeIn" + (0 === o ? ",easeNone" : "")), E(new S(null, null, 3, o), r, "easeInOut");
            T.linear = u.easing.Linear.easeIn, T.swing = u.easing.Quad.easeInOut;
            var P = v("events.EventDispatcher", function(t) {
                this._listeners = {}, this._eventTarget = t || this
            });
            (r = P.prototype).addEventListener = function(t, e, i, s, n) {
                n = n || 0;
                var a, o, r = this._listeners[t],
                    c = 0;
                for (this !== h || l || h.wake(), null == r && (this._listeners[t] = r = []), o = r.length; --o > -1;)(a = r[o]).c === e && a.s === i ? r.splice(o, 1) : 0 === c && a.pr < n && (c = o + 1);
                r.splice(c, 0, {
                    c: e,
                    s: i,
                    up: s,
                    pr: n
                })
            }, r.removeEventListener = function(t, e) {
                var i, s = this._listeners[t];
                if (s)
                    for (i = s.length; --i > -1;)
                        if (s[i].c === e) return void s.splice(i, 1)
            }, r.dispatchEvent = function(t) {
                var e, i, s, n = this._listeners[t];
                if (n)
                    for ((e = n.length) > 1 && (n = n.slice(0)), i = this._eventTarget; --e > -1;)(s = n[e]) && (s.up ? s.c.call(s.s || i, {
                        type: t,
                        target: i
                    }) : s.c.call(s.s || i))
            };
            var A = t.requestAnimationFrame,
                I = t.cancelAnimationFrame,
                C = Date.now || function() {
                    return (new Date).getTime()
                },
                x = C();
            for (o = (a = ["ms", "moz", "webkit", "o"]).length; --o > -1 && !A;) A = t[a[o] + "RequestAnimationFrame"], I = t[a[o] + "CancelAnimationFrame"] || t[a[o] + "CancelRequestAnimationFrame"];
            v("Ticker", function(t, e) {
                var i, n, a, o, r, c = this,
                    u = C(),
                    p = !(!1 === e || !A) && "auto",
                    g = 500,
                    f = 33,
                    _ = function(t) {
                        var e, s, h = C() - x;
                        h > g && (u += h - f), x += h, c.time = (x - u) / 1e3, e = c.time - r, (!i || e > 0 || !0 === t) && (c.frame++, r += e + (e >= o ? .004 : o - e), s = !0), !0 !== t && (a = n(_)), s && c.dispatchEvent("tick")
                    };
                P.call(c), c.time = c.frame = 0, c.tick = function() {
                    _(!0)
                }, c.lagSmoothing = function(t, e) {
                    return arguments.length ? (g = t || 1 / d, void(f = Math.min(e, g, 0))) : 1 / d > g
                }, c.sleep = function() {
                    null != a && (p && I ? I(a) : clearTimeout(a), n = m, a = null, c === h && (l = !1))
                }, c.wake = function(t) {
                    null !== a ? c.sleep() : t ? u += -x + (x = C()) : c.frame > 10 && (x = C() - g + 5), n = 0 === i ? m : p && A ? A : function(t) {
                        return setTimeout(t, 1e3 * (r - c.time) + 1 | 0)
                    }, c === h && (l = !0), _(2)
                }, c.fps = function(t) {
                    return arguments.length ? (i = t, o = 1 / (i || 60), r = this.time + o, void c.wake()) : i
                }, c.useRAF = function(t) {
                    return arguments.length ? (c.sleep(), p = t, void c.fps(i)) : p
                }, c.fps(t), setTimeout(function() {
                    "auto" === p && c.frame < 5 && "hidden" !== s.visibilityState && c.useRAF(!1)
                }, 1500)
            }), (r = u.Ticker.prototype = new u.events.EventDispatcher).constructor = u.Ticker;
            var w = v("core.Animation", function(t, e) {
                if (this.vars = e = e || {}, this._duration = this._totalDuration = t || 0, this._delay = Number(e.delay) || 0, this._timeScale = 1, this._active = !0 === e.immediateRender, this.data = e.data, this._reversed = !0 === e.reversed, q) {
                    l || h.wake();
                    var i = this.vars.useFrames ? V : q;
                    i.add(this, i._time), this.vars.paused && this.paused(!0)
                }
            });
            h = w.ticker = new u.Ticker, (r = w.prototype)._dirty = r._gc = r._initted = r._paused = !1, r._totalTime = r._time = 0, r._rawPrevTime = -1, r._next = r._last = r._onUpdate = r._timeline = r.timeline = null, r._paused = !1;
            var M = function() {
                l && C() - x > 2e3 && ("hidden" !== s.visibilityState || !h.lagSmoothing()) && h.wake();
                var t = setTimeout(M, 2e3);
                t.unref && t.unref()
            };
            M(), r.play = function(t, e) {
                return null != t && this.seek(t, e), this.reversed(!1).paused(!1)
            }, r.pause = function(t, e) {
                return null != t && this.seek(t, e), this.paused(!0)
            }, r.resume = function(t, e) {
                return null != t && this.seek(t, e), this.paused(!1)
            }, r.seek = function(t, e) {
                return this.totalTime(Number(t), !1 !== e)
            }, r.restart = function(t, e) {
                return this.reversed(!1).paused(!1).totalTime(t ? -this._delay : 0, !1 !== e, !0)
            }, r.reverse = function(t, e) {
                return null != t && this.seek(t || this.totalDuration(), e), this.reversed(!0).paused(!1)
            }, r.render = function(t, e, i) {}, r.invalidate = function() {
                return this._time = this._totalTime = 0, this._initted = this._gc = !1, this._rawPrevTime = -1, (this._gc || !this.timeline) && this._enabled(!0), this
            }, r.isActive = function() {
                var t, e = this._timeline,
                    i = this._startTime;
                return !e || !this._gc && !this._paused && e.isActive() && (t = e.rawTime(!0)) >= i && t < i + this.totalDuration() / this._timeScale - 1e-7
            }, r._enabled = function(t, e) {
                return l || h.wake(), this._gc = !t, this._active = this.isActive(), !0 !== e && (t && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !t && this.timeline && this._timeline._remove(this, !0)), !1
            }, r._kill = function(t, e) {
                return this._enabled(!1, !1)
            }, r.kill = function(t, e) {
                return this._kill(t, e), this
            }, r._uncache = function(t) {
                for (var e = t ? this : this.timeline; e;) e._dirty = !0, e = e.timeline;
                return this
            }, r._swapSelfInParams = function(t) {
                for (var e = t.length, i = t.concat(); --e > -1;) "{self}" === t[e] && (i[e] = this);
                return i
            }, r._callback = function(t) {
                var e = this.vars,
                    i = e[t],
                    s = e[t + "Params"],
                    n = e[t + "Scope"] || e.callbackScope || this;
                switch (s ? s.length : 0) {
                    case 0:
                        i.call(n);
                        break;
                    case 1:
                        i.call(n, s[0]);
                        break;
                    case 2:
                        i.call(n, s[0], s[1]);
                        break;
                    default:
                        i.apply(n, s)
                }
            }, r.eventCallback = function(t, e, i, s) {
                if ("on" === (t || "").substr(0, 2)) {
                    var n = this.vars;
                    if (1 === arguments.length) return n[t];
                    null == e ? delete n[t] : (n[t] = e, n[t + "Params"] = g(i) && -1 !== i.join("").indexOf("{self}") ? this._swapSelfInParams(i) : i, n[t + "Scope"] = s), "onUpdate" === t && (this._onUpdate = e)
                }
                return this
            }, r.delay = function(t) {
                return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + t - this._delay), this._delay = t, this) : this._delay
            }, r.duration = function(t) {
                return arguments.length ? (this._duration = this._totalDuration = t, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== t && this.totalTime(this._totalTime * (t / this._duration), !0), this) : (this._dirty = !1, this._duration)
            }, r.totalDuration = function(t) {
                return this._dirty = !1, arguments.length ? this.duration(t) : this._totalDuration
            }, r.time = function(t, e) {
                return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(t > this._duration ? this._duration : t, e)) : this._time
            }, r.totalTime = function(t, e, i) {
                if (l || h.wake(), !arguments.length) return this._totalTime;
                if (this._timeline) {
                    if (0 > t && !i && (t += this.totalDuration()), this._timeline.smoothChildTiming) {
                        this._dirty && this.totalDuration();
                        var s = this._totalDuration,
                            n = this._timeline;
                        if (t > s && !i && (t = s), this._startTime = (this._paused ? this._pauseTime : n._time) - (this._reversed ? s - t : t) / this._timeScale, n._dirty || this._uncache(!1), n._timeline)
                            for (; n._timeline;) n._timeline._time !== (n._startTime + n._totalTime) / n._timeScale && n.totalTime(n._totalTime, !0), n = n._timeline
                    }
                    this._gc && this._enabled(!0, !1), (this._totalTime !== t || 0 === this._duration) && (R.length && Z(), this.render(t, e, !1), R.length && Z())
                }
                return this
            }, r.progress = r.totalProgress = function(t, e) {
                var i = this.duration();
                return arguments.length ? this.totalTime(i * t, e) : i ? this._time / i : this.ratio
            }, r.startTime = function(t) {
                return arguments.length ? (t !== this._startTime && (this._startTime = t, this.timeline && this.timeline._sortChildren && this.timeline.add(this, t - this._delay)), this) : this._startTime
            }, r.endTime = function(t) {
                return this._startTime + (0 != t ? this.totalDuration() : this.duration()) / this._timeScale
            }, r.timeScale = function(t) {
                if (!arguments.length) return this._timeScale;
                var e, i;
                for (t = t || d, this._timeline && this._timeline.smoothChildTiming && (e = this._pauseTime, i = e || 0 === e ? e : this._timeline.totalTime(), this._startTime = i - (i - this._startTime) * this._timeScale / t), this._timeScale = t, i = this.timeline; i && i.timeline;) i._dirty = !0, i.totalDuration(), i = i.timeline;
                return this
            }, r.reversed = function(t) {
                return arguments.length ? (t != this._reversed && (this._reversed = t, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed
            }, r.paused = function(t) {
                if (!arguments.length) return this._paused;
                var e, i, s = this._timeline;
                return t != this._paused && s && (l || t || h.wake(), e = s.rawTime(), i = e - this._pauseTime, !t && s.smoothChildTiming && (this._startTime += i, this._uncache(!1)), this._pauseTime = t ? e : null, this._paused = t, this._active = this.isActive(), !t && 0 !== i && this._initted && this.duration() && (e = s.smoothChildTiming ? this._totalTime : (e - this._startTime) / this._timeScale, this.render(e, e === this._totalTime, !0))), this._gc && !t && this._enabled(!0, !1), this
            };
            var O = v("core.SimpleTimeline", function(t) {
                w.call(this, 0, t), this.autoRemoveChildren = this.smoothChildTiming = !0
            });
            (r = O.prototype = new w).constructor = O, r.kill()._gc = !1, r._first = r._last = r._recent = null, r._sortChildren = !1, r.add = r.insert = function(t, e, i, s) {
                var n, a;
                if (t._startTime = Number(e || 0) + t._delay, t._paused && this !== t._timeline && (t._pauseTime = t._startTime + (this.rawTime() - t._startTime) / t._timeScale), t.timeline && t.timeline._remove(t, !0), t.timeline = t._timeline = this, t._gc && t._enabled(!0, !0), n = this._last, this._sortChildren)
                    for (a = t._startTime; n && n._startTime > a;) n = n._prev;
                return n ? (t._next = n._next, n._next = t) : (t._next = this._first, this._first = t), t._next ? t._next._prev = t : this._last = t, t._prev = n, this._recent = t, this._timeline && this._uncache(!0), this
            }, r._remove = function(t, e) {
                return t.timeline === this && (e || t._enabled(!1, !0), t._prev ? t._prev._next = t._next : this._first === t && (this._first = t._next), t._next ? t._next._prev = t._prev : this._last === t && (this._last = t._prev), t._next = t._prev = t.timeline = null, t === this._recent && (this._recent = this._last), this._timeline && this._uncache(!0)), this
            }, r.render = function(t, e, i) {
                var s, n = this._first;
                for (this._totalTime = this._time = this._rawPrevTime = t; n;) s = n._next, (n._active || t >= n._startTime && !n._paused && !n._gc) && (n._reversed ? n.render((n._dirty ? n.totalDuration() : n._totalDuration) - (t - n._startTime) * n._timeScale, e, i) : n.render((t - n._startTime) * n._timeScale, e, i)), n = s
            }, r.rawTime = function() {
                return l || h.wake(), this._totalTime
            };
            var L = v("TweenLite", function(e, i, s) {
                    if (w.call(this, i, s), this.render = L.prototype.render, null == e) throw "Cannot tween a null target.";
                    this.target = e = "string" != typeof e ? e : L.selector(e) || e;
                    var n, a, o, r = e.jquery || e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType),
                        h = this.vars.overwrite;
                    if (this._overwrite = h = null == h ? K[L.defaultOverwrite] : "number" == typeof h ? h >> 0 : K[h], (r || e instanceof Array || e.push && g(e)) && "number" != typeof e[0])
                        for (this._targets = o = p(e), this._propLookup = [], this._siblings = [], n = 0; n < o.length; n++)(a = o[n]) ? "string" != typeof a ? a.length && a !== t && a[0] && (a[0] === t || a[0].nodeType && a[0].style && !a.nodeType) ? (o.splice(n--, 1), this._targets = o = o.concat(p(a))) : (this._siblings[n] = Q(a, this, !1), 1 === h && this._siblings[n].length > 1 && tt(a, this, null, 1, this._siblings[n])) : "string" == typeof(a = o[n--] = L.selector(a)) && o.splice(n + 1, 1) : o.splice(n--, 1);
                    else this._propLookup = {}, this._siblings = Q(e, this, !1), 1 === h && this._siblings.length > 1 && tt(e, this, null, 1, this._siblings);
                    (this.vars.immediateRender || 0 === i && 0 === this._delay && !1 !== this.vars.immediateRender) && (this._time = -d, this.render(Math.min(0, -this._delay)))
                }, !0),
                N = function(e) {
                    return e && e.length && e !== t && e[0] && (e[0] === t || e[0].nodeType && e[0].style && !e.nodeType)
                },
                k = function(t, e) {
                    var i, s = {};
                    for (i in t) z[i] || i in e && "transform" !== i && "x" !== i && "y" !== i && "width" !== i && "height" !== i && "className" !== i && "border" !== i || !(!W[i] || W[i] && W[i]._autoCSS) || (s[i] = t[i], delete t[i]);
                    t.css = s
                };
            (r = L.prototype = new w).constructor = L, r.kill()._gc = !1, r.ratio = 0, r._firstPT = r._targets = r._overwrittenProps = r._startAt = null, r._notifyPluginsOfEnabled = r._lazy = !1, L.version = "1.20.3", L.defaultEase = r._ease = new S(null, null, 1, 1), L.defaultOverwrite = "auto", L.ticker = h, L.autoSleep = 120, L.lagSmoothing = function(t, e) {
                h.lagSmoothing(t, e)
            }, L.selector = t.$ || t.jQuery || function(e) {
                var i = t.$ || t.jQuery;
                return i ? (L.selector = i, i(e)) : void 0 === s ? e : s.querySelectorAll ? s.querySelectorAll(e) : s.getElementById("#" === e.charAt(0) ? e.substr(1) : e)
            };
            var R = [],
                D = {},
                G = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,
                B = /[\+-]=-?[\.\d]/,
                F = function(t) {
                    for (var e, i = this._firstPT; i;) e = i.blob ? 1 === t && null != this.end ? this.end : t ? this.join("") : this.start : i.c * t + i.s, i.m ? e = i.m(e, this._target || i.t) : 1e-6 > e && e > -1e-6 && !i.blob && (e = 0), i.f ? i.fp ? i.t[i.p](i.fp, e) : i.t[i.p](e) : i.t[i.p] = e, i = i._next
                },
                U = function(t, e, i, s) {
                    var n, a, o, r, h, l, c, u = [],
                        d = 0,
                        p = "",
                        m = 0;
                    for (u.start = t, u.end = e, t = u[0] = t + "", e = u[1] = e + "", i && (i(u), t = u[0], e = u[1]), u.length = 0, n = t.match(G) || [], a = e.match(G) || [], s && (s._next = null, s.blob = 1, u._firstPT = u._applyPT = s), h = a.length, r = 0; h > r; r++) c = a[r], l = e.substr(d, e.indexOf(c, d) - d), p += l || !r ? l : ",", d += l.length, m ? m = (m + 1) % 5 : "rgba(" === l.substr(-5) && (m = 1), c === n[r] || n.length <= r ? p += c : (p && (u.push(p), p = ""), o = parseFloat(n[r]), u.push(o), u._firstPT = {
                        _next: u._firstPT,
                        t: u,
                        p: u.length - 1,
                        s: o,
                        c: ("=" === c.charAt(1) ? parseInt(c.charAt(0) + "1", 10) * parseFloat(c.substr(2)) : parseFloat(c) - o) || 0,
                        f: 0,
                        m: m && 4 > m ? Math.round : 0
                    }), d += c.length;
                    return (p += e.substr(d)) && u.push(p), u.setRatio = F, B.test(e) && (u.end = null), u
                },
                H = function(t, e, i, s, n, a, o, r, h) {
                    "function" == typeof s && (s = s(h || 0, t));
                    var l, c = typeof t[e],
                        u = "function" !== c ? "" : e.indexOf("set") || "function" != typeof t["get" + e.substr(3)] ? e : "get" + e.substr(3),
                        d = "get" !== i ? i : u ? o ? t[u](o) : t[u]() : t[e],
                        p = "string" == typeof s && "=" === s.charAt(1),
                        m = {
                            t: t,
                            p: e,
                            s: d,
                            f: "function" === c,
                            pg: 0,
                            n: n || e,
                            m: a ? "function" == typeof a ? a : Math.round : 0,
                            pr: 0,
                            c: p ? parseInt(s.charAt(0) + "1", 10) * parseFloat(s.substr(2)) : parseFloat(s) - d || 0
                        };
                    return ("number" != typeof d || "number" != typeof s && !p) && (o || isNaN(d) || !p && isNaN(s) || "boolean" == typeof d || "boolean" == typeof s ? (m.fp = o, l = U(d, p ? parseFloat(m.s) + m.c : s, r || L.defaultStringFilter, m), m = {
                        t: l,
                        p: "setRatio",
                        s: 0,
                        c: 1,
                        f: 2,
                        pg: 0,
                        n: n || e,
                        pr: 0,
                        m: 0
                    }) : (m.s = parseFloat(d), p || (m.c = parseFloat(s) - m.s || 0))), m.c ? ((m._next = this._firstPT) && (m._next._prev = m), this._firstPT = m, m) : void 0
                },
                Y = L._internals = {
                    isArray: g,
                    isSelector: N,
                    lazyTweens: R,
                    blobDif: U
                },
                W = L._plugins = {},
                j = Y.tweenLookup = {},
                X = 0,
                z = Y.reservedProps = {
                    ease: 1,
                    delay: 1,
                    overwrite: 1,
                    onComplete: 1,
                    onCompleteParams: 1,
                    onCompleteScope: 1,
                    useFrames: 1,
                    runBackwards: 1,
                    startAt: 1,
                    onUpdate: 1,
                    onUpdateParams: 1,
                    onUpdateScope: 1,
                    onStart: 1,
                    onStartParams: 1,
                    onStartScope: 1,
                    onReverseComplete: 1,
                    onReverseCompleteParams: 1,
                    onReverseCompleteScope: 1,
                    onRepeat: 1,
                    onRepeatParams: 1,
                    onRepeatScope: 1,
                    easeParams: 1,
                    yoyo: 1,
                    immediateRender: 1,
                    repeat: 1,
                    repeatDelay: 1,
                    data: 1,
                    paused: 1,
                    reversed: 1,
                    autoCSS: 1,
                    lazy: 1,
                    onOverwrite: 1,
                    callbackScope: 1,
                    stringFilter: 1,
                    id: 1,
                    yoyoEase: 1
                },
                K = {
                    none: 0,
                    all: 1,
                    auto: 2,
                    concurrent: 3,
                    allOnStart: 4,
                    preexisting: 5,
                    true: 1,
                    false: 0
                },
                V = w._rootFramesTimeline = new O,
                q = w._rootTimeline = new O,
                J = 30,
                Z = Y.lazyRender = function() {
                    var t, e = R.length;
                    for (D = {}; --e > -1;)(t = R[e]) && !1 !== t._lazy && (t.render(t._lazy[0], t._lazy[1], !0), t._lazy = !1);
                    R.length = 0
                };
            q._startTime = h.time, V._startTime = h.frame, q._active = V._active = !0, setTimeout(Z, 1), w._updateRoot = L.render = function() {
                var t, e, i;
                if (R.length && Z(), q.render((h.time - q._startTime) * q._timeScale, !1, !1), V.render((h.frame - V._startTime) * V._timeScale, !1, !1), R.length && Z(), h.frame >= J) {
                    J = h.frame + (parseInt(L.autoSleep, 10) || 120);
                    for (i in j) {
                        for (t = (e = j[i].tweens).length; --t > -1;) e[t]._gc && e.splice(t, 1);
                        0 === e.length && delete j[i]
                    }
                    if ((!(i = q._first) || i._paused) && L.autoSleep && !V._first && 1 === h._listeners.tick.length) {
                        for (; i && i._paused;) i = i._next;
                        i || h.sleep()
                    }
                }
            }, h.addEventListener("tick", w._updateRoot);
            var Q = function(t, e, i) {
                    var s, n, a = t._gsTweenID;
                    if (j[a || (t._gsTweenID = a = "t" + X++)] || (j[a] = {
                        target: t,
                        tweens: []
                    }), e && (s = j[a].tweens, s[n = s.length] = e, i))
                        for (; --n > -1;) s[n] === e && s.splice(n, 1);
                    return j[a].tweens
                },
                $ = function(t, e, i, s) {
                    var n, a, o = t.vars.onOverwrite;
                    return o && (n = o(t, e, i, s)), (o = L.onOverwrite) && (a = o(t, e, i, s)), !1 !== n && !1 !== a
                },
                tt = function(t, e, i, s, n) {
                    var a, o, r, h;
                    if (1 === s || s >= 4) {
                        for (h = n.length, a = 0; h > a; a++)
                            if ((r = n[a]) !== e) r._gc || r._kill(null, t, e) && (o = !0);
                            else if (5 === s) break;
                        return o
                    }
                    var l, c = e._startTime + d,
                        u = [],
                        p = 0,
                        m = 0 === e._duration;
                    for (a = n.length; --a > -1;)(r = n[a]) === e || r._gc || r._paused || (r._timeline !== e._timeline ? (l = l || et(e, 0, m), 0 === et(r, l, m) && (u[p++] = r)) : r._startTime <= c && r._startTime + r.totalDuration() / r._timeScale > c && ((m || !r._initted) && c - r._startTime <= 2e-10 || (u[p++] = r)));
                    for (a = p; --a > -1;)
                        if (r = u[a], 2 === s && r._kill(i, t, e) && (o = !0), 2 !== s || !r._firstPT && r._initted) {
                            if (2 !== s && !$(r, e)) continue;
                            r._enabled(!1, !1) && (o = !0)
                        }
                    return o
                },
                et = function(t, e, i) {
                    for (var s = t._timeline, n = s._timeScale, a = t._startTime; s._timeline;) {
                        if (a += s._startTime, n *= s._timeScale, s._paused) return -100;
                        s = s._timeline
                    }
                    return (a /= n) > e ? a - e : i && a === e || !t._initted && 2 * d > a - e ? d : (a += t.totalDuration() / t._timeScale / n) > e + d ? 0 : a - e - d
                };
            r._init = function() {
                var t, e, i, s, n, a, o = this.vars,
                    r = this._overwrittenProps,
                    h = this._duration,
                    l = !!o.immediateRender,
                    c = o.ease;
                if (o.startAt) {
                    this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), n = {};
                    for (s in o.startAt) n[s] = o.startAt[s];
                    if (n.data = "isStart", n.overwrite = !1, n.immediateRender = !0, n.lazy = l && !1 !== o.lazy, n.startAt = n.delay = null, n.onUpdate = o.onUpdate, n.onUpdateParams = o.onUpdateParams, n.onUpdateScope = o.onUpdateScope || o.callbackScope || this, this._startAt = L.to(this.target, 0, n), l)
                        if (this._time > 0) this._startAt = null;
                        else if (0 !== h) return
                } else if (o.runBackwards && 0 !== h)
                    if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null;
                    else {
                        0 !== this._time && (l = !1), i = {};
                        for (s in o) z[s] && "autoCSS" !== s || (i[s] = o[s]);
                        if (i.overwrite = 0, i.data = "isFromStart", i.lazy = l && !1 !== o.lazy, i.immediateRender = l, this._startAt = L.to(this.target, 0, i), l) {
                            if (0 === this._time) return
                        } else this._startAt._init(), this._startAt._enabled(!1), this.vars.immediateRender && (this._startAt = null)
                    }
                if (this._ease = c = c ? c instanceof S ? c : "function" == typeof c ? new S(c, o.easeParams) : T[c] || L.defaultEase : L.defaultEase, o.easeParams instanceof Array && c.config && (this._ease = c.config.apply(c, o.easeParams)), this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)
                    for (a = this._targets.length, t = 0; a > t; t++) this._initProps(this._targets[t], this._propLookup[t] = {}, this._siblings[t], r ? r[t] : null, t) && (e = !0);
                else e = this._initProps(this.target, this._propLookup, this._siblings, r, 0); if (e && L._onPluginEvent("_onInitAllProps", this), r && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), o.runBackwards)
                    for (i = this._firstPT; i;) i.s += i.c, i.c = -i.c, i = i._next;
                this._onUpdate = o.onUpdate, this._initted = !0
            }, r._initProps = function(e, i, s, n, a) {
                var o, r, h, l, c, u;
                if (null == e) return !1;
                D[e._gsTweenID] && Z(), this.vars.css || e.style && e !== t && e.nodeType && W.css && !1 !== this.vars.autoCSS && k(this.vars, e);
                for (o in this.vars)
                    if (u = this.vars[o], z[o]) u && (u instanceof Array || u.push && g(u)) && -1 !== u.join("").indexOf("{self}") && (this.vars[o] = u = this._swapSelfInParams(u, this));
                    else if (W[o] && (l = new W[o])._onInitTween(e, this.vars[o], this, a)) {
                    for (this._firstPT = c = {
                        _next: this._firstPT,
                        t: l,
                        p: "setRatio",
                        s: 0,
                        c: 1,
                        f: 1,
                        n: o,
                        pg: 1,
                        pr: l._priority,
                        m: 0
                    }, r = l._overwriteProps.length; --r > -1;) i[l._overwriteProps[r]] = this._firstPT;
                    (l._priority || l._onInitAllProps) && (h = !0), (l._onDisable || l._onEnable) && (this._notifyPluginsOfEnabled = !0), c._next && (c._next._prev = c)
                } else i[o] = H.call(this, e, o, "get", u, o, 0, null, this.vars.stringFilter, a);
                return n && this._kill(n, e) ? this._initProps(e, i, s, n, a) : this._overwrite > 1 && this._firstPT && s.length > 1 && tt(e, this, i, this._overwrite, s) ? (this._kill(i, e), this._initProps(e, i, s, n, a)) : (this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration) && (D[e._gsTweenID] = !0), h)
            }, r.render = function(t, e, i) {
                var s, n, a, o, r = this._time,
                    h = this._duration,
                    l = this._rawPrevTime;
                if (t >= h - 1e-7 && t >= 0) this._totalTime = this._time = h, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (s = !0, n = "onComplete", i = i || this._timeline.autoRemoveChildren), 0 === h && (this._initted || !this.vars.lazy || i) && (this._startTime === this._timeline._duration && (t = 0), (0 > l || 0 >= t && t >= -1e-7 || l === d && "isPause" !== this.data) && l !== t && (i = !0, l > d && (n = "onReverseComplete")), this._rawPrevTime = o = !e || t || l === t ? t : d);
                else if (1e-7 > t) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== r || 0 === h && l > 0) && (n = "onReverseComplete", s = this._reversed), 0 > t && (this._active = !1, 0 === h && (this._initted || !this.vars.lazy || i) && (l >= 0 && (l !== d || "isPause" !== this.data) && (i = !0), this._rawPrevTime = o = !e || t || l === t ? t : d)), (!this._initted || this._startAt && this._startAt.progress()) && (i = !0);
                else if (this._totalTime = this._time = t, this._easeType) {
                    var c = t / h,
                        u = this._easeType,
                        p = this._easePower;
                    (1 === u || 3 === u && c >= .5) && (c = 1 - c), 3 === u && (c *= 2), 1 === p ? c *= c : 2 === p ? c *= c * c : 3 === p ? c *= c * c * c : 4 === p && (c *= c * c * c * c), this.ratio = 1 === u ? 1 - c : 2 === u ? c : .5 > t / h ? c / 2 : 1 - c / 2
                } else this.ratio = this._ease.getRatio(t / h); if (this._time !== r || i) {
                    if (!this._initted) {
                        if (this._init(), !this._initted || this._gc) return;
                        if (!i && this._firstPT && (!1 !== this.vars.lazy && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = r, this._rawPrevTime = l, R.push(this), void(this._lazy = [t, e]);
                        this._time && !s ? this.ratio = this._ease.getRatio(this._time / h) : s && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                    }
                    for (!1 !== this._lazy && (this._lazy = !1), this._active || !this._paused && this._time !== r && t >= 0 && (this._active = !0), 0 === r && (this._startAt && (t >= 0 ? this._startAt.render(t, !0, i) : n || (n = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === h) && (e || this._callback("onStart"))), a = this._firstPT; a;) a.f ? a.t[a.p](a.c * this.ratio + a.s) : a.t[a.p] = a.c * this.ratio + a.s, a = a._next;
                    this._onUpdate && (0 > t && this._startAt && -1e-4 !== t && this._startAt.render(t, !0, i), e || (this._time !== r || s || i) && this._callback("onUpdate")), n && (!this._gc || i) && (0 > t && this._startAt && !this._onUpdate && -1e-4 !== t && this._startAt.render(t, !0, i), s && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !e && this.vars[n] && this._callback(n), 0 === h && this._rawPrevTime === d && o !== d && (this._rawPrevTime = 0))
                }
            }, r._kill = function(t, e, i) {
                if ("all" === t && (t = null), null == t && (null == e || e === this.target)) return this._lazy = !1, this._enabled(!1, !1);
                e = "string" != typeof e ? e || this._targets || this.target : L.selector(e) || e;
                var s, n, a, o, r, h, l, c, u, d = i && this._time && i._startTime === this._startTime && this._timeline === i._timeline;
                if ((g(e) || N(e)) && "number" != typeof e[0])
                    for (s = e.length; --s > -1;) this._kill(t, e[s], i) && (h = !0);
                else {
                    if (this._targets) {
                        for (s = this._targets.length; --s > -1;)
                            if (e === this._targets[s]) {
                                r = this._propLookup[s] || {}, this._overwrittenProps = this._overwrittenProps || [], n = this._overwrittenProps[s] = t ? this._overwrittenProps[s] || {} : "all";
                                break
                            }
                    } else {
                        if (e !== this.target) return !1;
                        r = this._propLookup, n = this._overwrittenProps = t ? this._overwrittenProps || {} : "all"
                    } if (r) {
                        if (l = t || r, c = t !== n && "all" !== n && t !== r && ("object" != typeof t || !t._tempKill), i && (L.onOverwrite || this.vars.onOverwrite)) {
                            for (a in l) r[a] && (u || (u = []), u.push(a));
                            if ((u || !t) && !$(this, i, e, u)) return !1
                        }
                        for (a in l)(o = r[a]) && (d && (o.f ? o.t[o.p](o.s) : o.t[o.p] = o.s, h = !0), o.pg && o.t._kill(l) && (h = !0), o.pg && 0 !== o.t._overwriteProps.length || (o._prev ? o._prev._next = o._next : o === this._firstPT && (this._firstPT = o._next), o._next && (o._next._prev = o._prev), o._next = o._prev = null), delete r[a]), c && (n[a] = 1);
                        !this._firstPT && this._initted && this._enabled(!1, !1)
                    }
                }
                return h
            }, r.invalidate = function() {
                return this._notifyPluginsOfEnabled && L._onPluginEvent("_onDisable", this), this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null, this._notifyPluginsOfEnabled = this._active = this._lazy = !1, this._propLookup = this._targets ? {} : [], w.prototype.invalidate.call(this), this.vars.immediateRender && (this._time = -d, this.render(Math.min(0, -this._delay))), this
            }, r._enabled = function(t, e) {
                if (l || h.wake(), t && this._gc) {
                    var i, s = this._targets;
                    if (s)
                        for (i = s.length; --i > -1;) this._siblings[i] = Q(s[i], this, !0);
                    else this._siblings = Q(this.target, this, !0)
                }
                return w.prototype._enabled.call(this, t, e), !(!this._notifyPluginsOfEnabled || !this._firstPT) && L._onPluginEvent(t ? "_onEnable" : "_onDisable", this)
            }, L.to = function(t, e, i) {
                return new L(t, e, i)
            }, L.from = function(t, e, i) {
                return i.runBackwards = !0, i.immediateRender = 0 != i.immediateRender, new L(t, e, i)
            }, L.fromTo = function(t, e, i, s) {
                return s.startAt = i, s.immediateRender = 0 != s.immediateRender && 0 != i.immediateRender, new L(t, e, s)
            }, L.delayedCall = function(t, e, i, s, n) {
                return new L(e, 0, {
                    delay: t,
                    onComplete: e,
                    onCompleteParams: i,
                    callbackScope: s,
                    onReverseComplete: e,
                    onReverseCompleteParams: i,
                    immediateRender: !1,
                    lazy: !1,
                    useFrames: n,
                    overwrite: 0
                })
            }, L.set = function(t, e) {
                return new L(t, 0, e)
            }, L.getTweensOf = function(t, e) {
                if (null == t) return [];
                t = "string" != typeof t ? t : L.selector(t) || t;
                var i, s, n, a;
                if ((g(t) || N(t)) && "number" != typeof t[0]) {
                    for (i = t.length, s = []; --i > -1;) s = s.concat(L.getTweensOf(t[i], e));
                    for (i = s.length; --i > -1;)
                        for (a = s[i], n = i; --n > -1;) a === s[n] && s.splice(i, 1)
                } else if (t._gsTweenID)
                    for (s = Q(t).concat(), i = s.length; --i > -1;)(s[i]._gc || e && !s[i].isActive()) && s.splice(i, 1);
                return s || []
            }, L.killTweensOf = L.killDelayedCallsTo = function(t, e, i) {
                "object" == typeof e && (i = e, e = !1);
                for (var s = L.getTweensOf(t, e), n = s.length; --n > -1;) s[n]._kill(i, t)
            };
            var it = v("plugins.TweenPlugin", function(t, e) {
                this._overwriteProps = (t || "").split(","), this._propName = this._overwriteProps[0], this._priority = e || 0, this._super = it.prototype
            }, !0);
            if (r = it.prototype, it.version = "1.19.0", it.API = 2, r._firstPT = null, r._addTween = H, r.setRatio = F, r._kill = function(t) {
                var e, i = this._overwriteProps,
                    s = this._firstPT;
                if (null != t[this._propName]) this._overwriteProps = [];
                else
                    for (e = i.length; --e > -1;) null != t[i[e]] && i.splice(e, 1);
                for (; s;) null != t[s.n] && (s._next && (s._next._prev = s._prev), s._prev ? (s._prev._next = s._next, s._prev = null) : this._firstPT === s && (this._firstPT = s._next)), s = s._next;
                return !1
            }, r._mod = r._roundProps = function(t) {
                for (var e, i = this._firstPT; i;)(e = t[this._propName] || null != i.n && t[i.n.split(this._propName + "_").join("")]) && "function" == typeof e && (2 === i.f ? i.t._applyPT.m = e : i.m = e), i = i._next
            }, L._onPluginEvent = function(t, e) {
                var i, s, n, a, o, r = e._firstPT;
                if ("_onInitAllProps" === t) {
                    for (; r;) {
                        for (o = r._next, s = n; s && s.pr > r.pr;) s = s._next;
                        (r._prev = s ? s._prev : a) ? r._prev._next = r: n = r, (r._next = s) ? s._prev = r : a = r, r = o
                    }
                    r = e._firstPT = n
                }
                for (; r;) r.pg && "function" == typeof r.t[t] && r.t[t]() && (i = !0), r = r._next;
                return i
            }, it.activate = function(t) {
                for (var e = t.length; --e > -1;) t[e].API === it.API && (W[(new t[e])._propName] = t[e]);
                return !0
            }, y.plugin = function(t) {
                if (!(t && t.propName && t.init && t.API)) throw "illegal plugin definition.";
                var e, i = t.propName,
                    s = t.priority || 0,
                    n = t.overwriteProps,
                    a = {
                        init: "_onInitTween",
                        set: "setRatio",
                        kill: "_kill",
                        round: "_mod",
                        mod: "_mod",
                        initAll: "_onInitAllProps"
                    },
                    o = v("plugins." + i.charAt(0).toUpperCase() + i.substr(1) + "Plugin", function() {
                        it.call(this, i, s), this._overwriteProps = n || []
                    }, !0 === t.global),
                    r = o.prototype = new it(i);
                r.constructor = o, o.API = t.API;
                for (e in a) "function" == typeof t[e] && (r[a[e]] = t[e]);
                return o.version = t.version, it.activate([o]), o
            }, a = t._gsQueue) {
                for (o = 0; o < a.length; o++) a[o]();
                for (r in f) f[r].func || t.console.log("GSAP encountered missing dependency: " + r)
            }
            l = !1
        }
    }("undefined" != typeof module && module.exports && "undefined" != typeof global ? global : this || window, "TweenMax"),
    function() {
        "use strict";
        var t = function() {
            this.init()
        };
        t.prototype = {
            init: function() {
                var t = this || e;
                return t._counter = 1e3, t._codecs = {}, t._howls = [], t._muted = !1, t._volume = 1, t._canPlayEvent = "canplaythrough", t._navigator = "undefined" != typeof window && window.navigator ? window.navigator : null, t.masterGain = null, t.noAudio = !1, t.usingWebAudio = !0, t.autoSuspend = !0, t.ctx = null, t.mobileAutoEnable = !0, t._setup(), t
            },
            volume: function(t) {
                var i = this || e;
                if (t = parseFloat(t), i.ctx || l(), void 0 !== t && t >= 0 && t <= 1) {
                    if (i._volume = t, i._muted) return i;
                    i.usingWebAudio && i.masterGain.gain.setValueAtTime(t, e.ctx.currentTime);
                    for (var s = 0; s < i._howls.length; s++)
                        if (!i._howls[s]._webAudio)
                            for (var n = i._howls[s]._getSoundIds(), a = 0; a < n.length; a++) {
                                var o = i._howls[s]._soundById(n[a]);
                                o && o._node && (o._node.volume = o._volume * t)
                            }
                        return i
                }
                return i._volume
            },
            mute: function(t) {
                var i = this || e;
                i.ctx || l(), i._muted = t, i.usingWebAudio && i.masterGain.gain.setValueAtTime(t ? 0 : i._volume, e.ctx.currentTime);
                for (var s = 0; s < i._howls.length; s++)
                    if (!i._howls[s]._webAudio)
                        for (var n = i._howls[s]._getSoundIds(), a = 0; a < n.length; a++) {
                            var o = i._howls[s]._soundById(n[a]);
                            o && o._node && (o._node.muted = !!t || o._muted)
                        }
                    return i
            },
            unload: function() {
                for (var t = this || e, i = t._howls.length - 1; i >= 0; i--) t._howls[i].unload();
                return t.usingWebAudio && t.ctx && void 0 !== t.ctx.close && (t.ctx.close(), t.ctx = null, l()), t
            },
            codecs: function(t) {
                return (this || e)._codecs[t.replace(/^x-/, "")]
            },
            _setup: function() {
                var t = this || e;
                if (t.state = t.ctx ? t.ctx.state || "running" : "running", t._autoSuspend(), !t.usingWebAudio)
                    if ("undefined" != typeof Audio) try {
                        void 0 === (i = new Audio).oncanplaythrough && (t._canPlayEvent = "canplay")
                    } catch (e) {
                        t.noAudio = !0
                    } else t.noAudio = !0;
                try {
                    var i = new Audio;
                    i.muted && (t.noAudio = !0)
                } catch (t) {}
                return t.noAudio || t._setupCodecs(), t
            },
            _setupCodecs: function() {
                var t = this || e,
                    i = null;
                try {
                    i = "undefined" != typeof Audio ? new Audio : null
                } catch (e) {
                    return t
                }
                if (!i || "function" != typeof i.canPlayType) return t;
                var s = i.canPlayType("audio/mpeg;").replace(/^no$/, ""),
                    n = t._navigator && t._navigator.userAgent.match(/OPR\/([0-6].)/g),
                    a = n && parseInt(n[0].split("/")[1], 10) < 33;
                return t._codecs = {
                    mp3: !(a || !s && !i.canPlayType("audio/mp3;").replace(/^no$/, "")),
                    mpeg: !!s,
                    opus: !!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
                    ogg: !!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                    oga: !!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                    wav: !!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
                    aac: !!i.canPlayType("audio/aac;").replace(/^no$/, ""),
                    caf: !!i.canPlayType("audio/x-caf;").replace(/^no$/, ""),
                    m4a: !!(i.canPlayType("audio/x-m4a;") || i.canPlayType("audio/m4a;") || i.canPlayType("audio/aac;")).replace(/^no$/, ""),
                    mp4: !!(i.canPlayType("audio/x-mp4;") || i.canPlayType("audio/mp4;") || i.canPlayType("audio/aac;")).replace(/^no$/, ""),
                    weba: !!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                    webm: !!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                    dolby: !!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
                    flac: !!(i.canPlayType("audio/x-flac;") || i.canPlayType("audio/flac;")).replace(/^no$/, "")
                }, t
            },
            _enableMobileAudio: function() {
                var t = this || e,
                    i = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator && t._navigator.userAgent),
                    s = !!("ontouchend" in window || t._navigator && t._navigator.maxTouchPoints > 0 || t._navigator && t._navigator.msMaxTouchPoints > 0);
                if (!t._mobileEnabled && t.ctx && (i || s)) {
                    t._mobileEnabled = !1, t._mobileUnloaded || 44100 === t.ctx.sampleRate || (t._mobileUnloaded = !0, t.unload()), t._scratchBuffer = t.ctx.createBuffer(1, 1, 22050);
                    var n = function() {
                        e._autoResume();
                        var i = t.ctx.createBufferSource();
                        i.buffer = t._scratchBuffer, i.connect(t.ctx.destination), void 0 === i.start ? i.noteOn(0) : i.start(0), "function" == typeof t.ctx.resume && t.ctx.resume(), i.onended = function() {
                            i.disconnect(0), t._mobileEnabled = !0, t.mobileAutoEnable = !1, document.removeEventListener("touchstart", n, !0), document.removeEventListener("touchend", n, !0)
                        }
                    };
                    return document.addEventListener("touchstart", n, !0), document.addEventListener("touchend", n, !0), t
                }
            },
            _autoSuspend: function() {
                var t = this;
                if (t.autoSuspend && t.ctx && void 0 !== t.ctx.suspend && e.usingWebAudio) {
                    for (var i = 0; i < t._howls.length; i++)
                        if (t._howls[i]._webAudio)
                            for (var s = 0; s < t._howls[i]._sounds.length; s++)
                                if (!t._howls[i]._sounds[s]._paused) return t;
                    return t._suspendTimer && clearTimeout(t._suspendTimer), t._suspendTimer = setTimeout(function() {
                        t.autoSuspend && (t._suspendTimer = null, t.state = "suspending", t.ctx.suspend().then(function() {
                            t.state = "suspended", t._resumeAfterSuspend && (delete t._resumeAfterSuspend, t._autoResume())
                        }))
                    }, 3e4), t
                }
            },
            _autoResume: function() {
                var t = this;
                if (t.ctx && void 0 !== t.ctx.resume && e.usingWebAudio) return "running" === t.state && t._suspendTimer ? (clearTimeout(t._suspendTimer), t._suspendTimer = null) : "suspended" === t.state ? (t.ctx.resume().then(function() {
                    t.state = "running";
                    for (var e = 0; e < t._howls.length; e++) t._howls[e]._emit("resume")
                }), t._suspendTimer && (clearTimeout(t._suspendTimer), t._suspendTimer = null)) : "suspending" === t.state && (t._resumeAfterSuspend = !0), t
            }
        };
        var e = new t,
            i = function(t) {
                var e = this;
                t.src && 0 !== t.src.length && e.init(t)
            };
        i.prototype = {
            init: function(t) {
                var i = this;
                return e.ctx || l(), i._autoplay = t.autoplay || !1, i._format = "string" != typeof t.format ? t.format : [t.format], i._html5 = t.html5 || !1, i._muted = t.mute || !1, i._loop = t.loop || !1, i._pool = t.pool || 5, i._preload = "boolean" != typeof t.preload || t.preload, i._rate = t.rate || 1, i._sprite = t.sprite || {}, i._src = "string" != typeof t.src ? t.src : [t.src], i._volume = void 0 !== t.volume ? t.volume : 1, i._xhrWithCredentials = t.xhrWithCredentials || !1, i._duration = 0, i._state = "unloaded", i._sounds = [], i._endTimers = {}, i._queue = [], i._playLock = !1, i._onend = t.onend ? [{
                    fn: t.onend
                }] : [], i._onfade = t.onfade ? [{
                    fn: t.onfade
                }] : [], i._onload = t.onload ? [{
                    fn: t.onload
                }] : [], i._onloaderror = t.onloaderror ? [{
                    fn: t.onloaderror
                }] : [], i._onplayerror = t.onplayerror ? [{
                    fn: t.onplayerror
                }] : [], i._onpause = t.onpause ? [{
                    fn: t.onpause
                }] : [], i._onplay = t.onplay ? [{
                    fn: t.onplay
                }] : [], i._onstop = t.onstop ? [{
                    fn: t.onstop
                }] : [], i._onmute = t.onmute ? [{
                    fn: t.onmute
                }] : [], i._onvolume = t.onvolume ? [{
                    fn: t.onvolume
                }] : [], i._onrate = t.onrate ? [{
                    fn: t.onrate
                }] : [], i._onseek = t.onseek ? [{
                    fn: t.onseek
                }] : [], i._onresume = [], i._webAudio = e.usingWebAudio && !i._html5, void 0 !== e.ctx && e.ctx && e.mobileAutoEnable && e._enableMobileAudio(), e._howls.push(i), i._autoplay && i._queue.push({
                    event: "play",
                    action: function() {
                        i.play()
                    }
                }), i._preload && i.load(), i
            },
            load: function() {
                var t = this,
                    i = null;
                if (e.noAudio) t._emit("loaderror", null, "No audio support.");
                else {
                    "string" == typeof t._src && (t._src = [t._src]);
                    for (var n = 0; n < t._src.length; n++) {
                        var o, r;
                        if (t._format && t._format[n]) o = t._format[n];
                        else {
                            if ("string" != typeof(r = t._src[n])) {
                                t._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                                continue
                            }(o = /^data:audio\/([^;,]+);/i.exec(r)) || (o = /\.([^.]+)$/.exec(r.split("?", 1)[0])), o && (o = o[1].toLowerCase())
                        } if (o && e.codecs(o)) {
                            i = t._src[n];
                            break
                        }
                    }
                    if (i) return t._src = i, t._state = "loading", "https:" === window.location.protocol && "http:" === i.slice(0, 5) && (t._html5 = !0, t._webAudio = !1), new s(t), t._webAudio && a(t), t;
                    t._emit("loaderror", null, "No codec support for selected audio sources.")
                }
            },
            play: function(t, i) {
                var s = this,
                    n = null;
                if ("number" == typeof t) n = t, t = null;
                else {
                    if ("string" == typeof t && "loaded" === s._state && !s._sprite[t]) return null;
                    if (void 0 === t) {
                        t = "__default";
                        for (var a = 0, o = 0; o < s._sounds.length; o++) s._sounds[o]._paused && !s._sounds[o]._ended && (a++, n = s._sounds[o]._id);
                        1 === a ? t = null : n = null
                    }
                }
                var r = n ? s._soundById(n) : s._inactiveSound();
                if (!r) return null;
                if (n && !t && (t = r._sprite || "__default"), "loaded" !== s._state) {
                    r._sprite = t, r._ended = !1;
                    var h = r._id;
                    return s._queue.push({
                        event: "play",
                        action: function() {
                            s.play(h)
                        }
                    }), h
                }
                if (n && !r._paused) return i || s._loadQueue("play"), r._id;
                s._webAudio && e._autoResume();
                var l = Math.max(0, r._seek > 0 ? r._seek : s._sprite[t][0] / 1e3),
                    c = Math.max(0, (s._sprite[t][0] + s._sprite[t][1]) / 1e3 - l),
                    u = 1e3 * c / Math.abs(r._rate);
                r._paused = !1, r._ended = !1, r._sprite = t, r._seek = l, r._start = s._sprite[t][0] / 1e3, r._stop = (s._sprite[t][0] + s._sprite[t][1]) / 1e3, r._loop = !(!r._loop && !s._sprite[t][2]);
                var d = r._node;
                if (s._webAudio) {
                    var p = function() {
                        s._refreshBuffer(r);
                        var t = r._muted || s._muted ? 0 : r._volume;
                        d.gain.setValueAtTime(t, e.ctx.currentTime), r._playStart = e.ctx.currentTime, void 0 === d.bufferSource.start ? r._loop ? d.bufferSource.noteGrainOn(0, l, 86400) : d.bufferSource.noteGrainOn(0, l, c) : r._loop ? d.bufferSource.start(0, l, 86400) : d.bufferSource.start(0, l, c), u !== 1 / 0 && (s._endTimers[r._id] = setTimeout(s._ended.bind(s, r), u)), i || setTimeout(function() {
                            s._emit("play", r._id)
                        }, 0)
                    };
                    "running" === e.state ? p() : (s.once("resume", p), s._clearTimer(r._id))
                } else {
                    var m = function() {
                            d.currentTime = l, d.muted = r._muted || s._muted || e._muted || d.muted, d.volume = r._volume * e.volume(), d.playbackRate = r._rate;
                            try {
                                var n = d.play();
                                if ("undefined" != typeof Promise && n instanceof Promise) {
                                    s._playLock = !0;
                                    var a = function() {
                                        s._playLock = !1, i || s._emit("play", r._id)
                                    };
                                    n.then(a, a)
                                } else i || s._emit("play", r._id); if (d.paused) return void s._emit("playerror", r._id, "Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");
                                "__default" !== t ? s._endTimers[r._id] = setTimeout(s._ended.bind(s, r), u) : (s._endTimers[r._id] = function() {
                                    s._ended(r), d.removeEventListener("ended", s._endTimers[r._id], !1)
                                }, d.addEventListener("ended", s._endTimers[r._id], !1))
                            } catch (t) {
                                s._emit("playerror", r._id, t)
                            }
                        },
                        g = window && window.ejecta || !d.readyState && e._navigator.isCocoonJS;
                    if (d.readyState >= 3 || g) m();
                    else {
                        var f = function() {
                            m(), d.removeEventListener(e._canPlayEvent, f, !1)
                        };
                        d.addEventListener(e._canPlayEvent, f, !1), s._clearTimer(r._id)
                    }
                }
                return r._id
            },
            pause: function(t) {
                var e = this;
                if ("loaded" !== e._state || e._playLock) return e._queue.push({
                    event: "pause",
                    action: function() {
                        e.pause(t)
                    }
                }), e;
                for (var i = e._getSoundIds(t), s = 0; s < i.length; s++) {
                    e._clearTimer(i[s]);
                    var n = e._soundById(i[s]);
                    if (n && !n._paused && (n._seek = e.seek(i[s]), n._rateSeek = 0, n._paused = !0, e._stopFade(i[s]), n._node))
                        if (e._webAudio) {
                            if (!n._node.bufferSource) continue;
                            void 0 === n._node.bufferSource.stop ? n._node.bufferSource.noteOff(0) : n._node.bufferSource.stop(0), e._cleanBuffer(n._node)
                        } else isNaN(n._node.duration) && n._node.duration !== 1 / 0 || n._node.pause();
                    arguments[1] || e._emit("pause", n ? n._id : null)
                }
                return e
            },
            stop: function(t, e) {
                var i = this;
                if ("loaded" !== i._state) return i._queue.push({
                    event: "stop",
                    action: function() {
                        i.stop(t)
                    }
                }), i;
                for (var s = i._getSoundIds(t), n = 0; n < s.length; n++) {
                    i._clearTimer(s[n]);
                    var a = i._soundById(s[n]);
                    a && (a._seek = a._start || 0, a._rateSeek = 0, a._paused = !0, a._ended = !0, i._stopFade(s[n]), a._node && (i._webAudio ? a._node.bufferSource && (void 0 === a._node.bufferSource.stop ? a._node.bufferSource.noteOff(0) : a._node.bufferSource.stop(0), i._cleanBuffer(a._node)) : isNaN(a._node.duration) && a._node.duration !== 1 / 0 || (a._node.currentTime = a._start || 0, a._node.pause())), e || i._emit("stop", a._id))
                }
                return i
            },
            mute: function(t, i) {
                var s = this;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "mute",
                    action: function() {
                        s.mute(t, i)
                    }
                }), s;
                if (void 0 === i) {
                    if ("boolean" != typeof t) return s._muted;
                    s._muted = t
                }
                for (var n = s._getSoundIds(i), a = 0; a < n.length; a++) {
                    var o = s._soundById(n[a]);
                    o && (o._muted = t, o._interval && s._stopFade(o._id), s._webAudio && o._node ? o._node.gain.setValueAtTime(t ? 0 : o._volume, e.ctx.currentTime) : o._node && (o._node.muted = !!e._muted || t), s._emit("mute", o._id))
                }
                return s
            },
            volume: function() {
                var t, i, s = this,
                    n = arguments;
                if (0 === n.length) return s._volume;
                1 === n.length || 2 === n.length && void 0 === n[1] ? s._getSoundIds().indexOf(n[0]) >= 0 ? i = parseInt(n[0], 10) : t = parseFloat(n[0]) : n.length >= 2 && (t = parseFloat(n[0]), i = parseInt(n[1], 10));
                var a;
                if (!(void 0 !== t && t >= 0 && t <= 1)) return (a = i ? s._soundById(i) : s._sounds[0]) ? a._volume : 0;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "volume",
                    action: function() {
                        s.volume.apply(s, n)
                    }
                }), s;
                void 0 === i && (s._volume = t), i = s._getSoundIds(i);
                for (var o = 0; o < i.length; o++)(a = s._soundById(i[o])) && (a._volume = t, n[2] || s._stopFade(i[o]), s._webAudio && a._node && !a._muted ? a._node.gain.setValueAtTime(t, e.ctx.currentTime) : a._node && !a._muted && (a._node.volume = t * e.volume()), s._emit("volume", a._id));
                return s
            },
            fade: function(t, i, s, n) {
                var a = this;
                if ("loaded" !== a._state) return a._queue.push({
                    event: "fade",
                    action: function() {
                        a.fade(t, i, s, n)
                    }
                }), a;
                a.volume(t, n);
                for (var o = a._getSoundIds(n), r = 0; r < o.length; r++) {
                    var h = a._soundById(o[r]);
                    if (h) {
                        if (n || a._stopFade(o[r]), a._webAudio && !h._muted) {
                            var l = e.ctx.currentTime,
                                c = l + s / 1e3;
                            h._volume = t, h._node.gain.setValueAtTime(t, l), h._node.gain.linearRampToValueAtTime(i, c)
                        }
                        a._startFadeInterval(h, t, i, s, o[r], void 0 === n)
                    }
                }
                return a
            },
            _startFadeInterval: function(t, e, i, s, n, a) {
                var o = this,
                    r = e,
                    h = i - e,
                    l = Math.abs(h / .01),
                    c = Math.max(4, l > 0 ? s / l : s),
                    u = Date.now();
                t._fadeTo = i, t._interval = setInterval(function() {
                    var n = (Date.now() - u) / s;
                    u = Date.now(), r += h * n, r = Math.max(0, r), r = Math.min(1, r), r = Math.round(100 * r) / 100, o._webAudio ? t._volume = r : o.volume(r, t._id, !0), a && (o._volume = r), (i < e && r <= i || i > e && r >= i) && (clearInterval(t._interval), t._interval = null, t._fadeTo = null, o.volume(i, t._id), o._emit("fade", t._id))
                }, c)
            },
            _stopFade: function(t) {
                var i = this,
                    s = i._soundById(t);
                return s && s._interval && (i._webAudio && s._node.gain.cancelScheduledValues(e.ctx.currentTime), clearInterval(s._interval), s._interval = null, i.volume(s._fadeTo, t), s._fadeTo = null, i._emit("fade", t)), i
            },
            loop: function() {
                var t, e, i, s = this,
                    n = arguments;
                if (0 === n.length) return s._loop;
                if (1 === n.length) {
                    if ("boolean" != typeof n[0]) return !!(i = s._soundById(parseInt(n[0], 10))) && i._loop;
                    t = n[0], s._loop = t
                } else 2 === n.length && (t = n[0], e = parseInt(n[1], 10));
                for (var a = s._getSoundIds(e), o = 0; o < a.length; o++)(i = s._soundById(a[o])) && (i._loop = t, s._webAudio && i._node && i._node.bufferSource && (i._node.bufferSource.loop = t, t && (i._node.bufferSource.loopStart = i._start || 0, i._node.bufferSource.loopEnd = i._stop)));
                return s
            },
            rate: function() {
                var t, i, s = this,
                    n = arguments;
                0 === n.length ? i = s._sounds[0]._id : 1 === n.length ? s._getSoundIds().indexOf(n[0]) >= 0 ? i = parseInt(n[0], 10) : t = parseFloat(n[0]) : 2 === n.length && (t = parseFloat(n[0]), i = parseInt(n[1], 10));
                var a;
                if ("number" != typeof t) return (a = s._soundById(i)) ? a._rate : s._rate;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "rate",
                    action: function() {
                        s.rate.apply(s, n)
                    }
                }), s;
                void 0 === i && (s._rate = t), i = s._getSoundIds(i);
                for (var o = 0; o < i.length; o++)
                    if (a = s._soundById(i[o])) {
                        a._rateSeek = s.seek(i[o]), a._playStart = s._webAudio ? e.ctx.currentTime : a._playStart, a._rate = t, s._webAudio && a._node && a._node.bufferSource ? a._node.bufferSource.playbackRate.setValueAtTime(t, e.ctx.currentTime) : a._node && (a._node.playbackRate = t);
                        var r = s.seek(i[o]),
                            h = 1e3 * ((s._sprite[a._sprite][0] + s._sprite[a._sprite][1]) / 1e3 - r) / Math.abs(a._rate);
                        !s._endTimers[i[o]] && a._paused || (s._clearTimer(i[o]), s._endTimers[i[o]] = setTimeout(s._ended.bind(s, a), h)), s._emit("rate", a._id)
                    }
                return s
            },
            seek: function() {
                var t, i, s = this,
                    n = arguments;
                if (0 === n.length ? i = s._sounds[0]._id : 1 === n.length ? s._getSoundIds().indexOf(n[0]) >= 0 ? i = parseInt(n[0], 10) : s._sounds.length && (i = s._sounds[0]._id, t = parseFloat(n[0])) : 2 === n.length && (t = parseFloat(n[0]), i = parseInt(n[1], 10)), void 0 === i) return s;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "seek",
                    action: function() {
                        s.seek.apply(s, n)
                    }
                }), s;
                var a = s._soundById(i);
                if (a) {
                    if (!("number" == typeof t && t >= 0)) {
                        if (s._webAudio) {
                            var o = s.playing(i) ? e.ctx.currentTime - a._playStart : 0,
                                r = a._rateSeek ? a._rateSeek - a._seek : 0;
                            return a._seek + (r + o * Math.abs(a._rate))
                        }
                        return a._node.currentTime
                    }
                    var h = s.playing(i);
                    if (h && s.pause(i, !0), a._seek = t, a._ended = !1, s._clearTimer(i), h && s.play(i, !0), !s._webAudio && a._node && (a._node.currentTime = t), h && !s._webAudio) {
                        var l = function() {
                            s._playLock ? setTimeout(l, 0) : s._emit("seek", i)
                        };
                        setTimeout(l, 0)
                    } else s._emit("seek", i)
                }
                return s
            },
            playing: function(t) {
                var e = this;
                if ("number" == typeof t) {
                    var i = e._soundById(t);
                    return !!i && !i._paused
                }
                for (var s = 0; s < e._sounds.length; s++)
                    if (!e._sounds[s]._paused) return !0;
                return !1
            },
            duration: function(t) {
                var e = this,
                    i = e._duration,
                    s = e._soundById(t);
                return s && (i = e._sprite[s._sprite][1] / 1e3), i
            },
            state: function() {
                return this._state
            },
            unload: function() {
                for (var t = this, i = t._sounds, s = 0; s < i.length; s++) {
                    i[s]._paused || t.stop(i[s]._id), t._webAudio || (/MSIE |Trident\//.test(e._navigator && e._navigator.userAgent) || (i[s]._node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"), i[s]._node.removeEventListener("error", i[s]._errorFn, !1), i[s]._node.removeEventListener(e._canPlayEvent, i[s]._loadFn, !1)), delete i[s]._node, t._clearTimer(i[s]._id);
                    var a = e._howls.indexOf(t);
                    a >= 0 && e._howls.splice(a, 1)
                }
                var o = !0;
                for (s = 0; s < e._howls.length; s++)
                    if (e._howls[s]._src === t._src) {
                        o = !1;
                        break
                    }
                return n && o && delete n[t._src], e.noAudio = !1, t._state = "unloaded", t._sounds = [], t = null, null
            },
            on: function(t, e, i, s) {
                var n = this,
                    a = n["_on" + t];
                return "function" == typeof e && a.push(s ? {
                    id: i,
                    fn: e,
                    once: s
                } : {
                    id: i,
                    fn: e
                }), n
            },
            off: function(t, e, i) {
                var s = this,
                    n = s["_on" + t],
                    a = 0;
                if ("number" == typeof e && (i = e, e = null), e || i)
                    for (a = 0; a < n.length; a++) {
                        var o = i === n[a].id;
                        if (e === n[a].fn && o || !e && o) {
                            n.splice(a, 1);
                            break
                        }
                    } else if (t) s["_on" + t] = [];
                    else {
                        var r = Object.keys(s);
                        for (a = 0; a < r.length; a++) 0 === r[a].indexOf("_on") && Array.isArray(s[r[a]]) && (s[r[a]] = [])
                    }
                return s
            },
            once: function(t, e, i) {
                var s = this;
                return s.on(t, e, i, 1), s
            },
            _emit: function(t, e, i) {
                for (var s = this, n = s["_on" + t], a = n.length - 1; a >= 0; a--) n[a].id && n[a].id !== e && "load" !== t || (setTimeout(function(t) {
                    t.call(this, e, i)
                }.bind(s, n[a].fn), 0), n[a].once && s.off(t, n[a].fn, n[a].id));
                return s._loadQueue(t), s
            },
            _loadQueue: function(t) {
                var e = this;
                if (e._queue.length > 0) {
                    var i = e._queue[0];
                    i.event === t && (e._queue.shift(), e._loadQueue()), t || i.action()
                }
                return e
            },
            _ended: function(t) {
                var i = this,
                    s = t._sprite;
                if (!i._webAudio && t._node && !t._node.paused && !t._node.ended && t._node.currentTime < t._stop) return setTimeout(i._ended.bind(i, t), 100), i;
                var n = !(!t._loop && !i._sprite[s][2]);
                if (i._emit("end", t._id), !i._webAudio && n && i.stop(t._id, !0).play(t._id), i._webAudio && n) {
                    i._emit("play", t._id), t._seek = t._start || 0, t._rateSeek = 0, t._playStart = e.ctx.currentTime;
                    var a = 1e3 * (t._stop - t._start) / Math.abs(t._rate);
                    i._endTimers[t._id] = setTimeout(i._ended.bind(i, t), a)
                }
                return i._webAudio && !n && (t._paused = !0, t._ended = !0, t._seek = t._start || 0, t._rateSeek = 0, i._clearTimer(t._id), i._cleanBuffer(t._node), e._autoSuspend()), i._webAudio || n || i.stop(t._id), i
            },
            _clearTimer: function(t) {
                var e = this;
                if (e._endTimers[t]) {
                    if ("function" != typeof e._endTimers[t]) clearTimeout(e._endTimers[t]);
                    else {
                        var i = e._soundById(t);
                        i && i._node && i._node.removeEventListener("ended", e._endTimers[t], !1)
                    }
                    delete e._endTimers[t]
                }
                return e
            },
            _soundById: function(t) {
                for (var e = this, i = 0; i < e._sounds.length; i++)
                    if (t === e._sounds[i]._id) return e._sounds[i];
                return null
            },
            _inactiveSound: function() {
                var t = this;
                t._drain();
                for (var e = 0; e < t._sounds.length; e++)
                    if (t._sounds[e]._ended) return t._sounds[e].reset();
                return new s(t)
            },
            _drain: function() {
                var t = this,
                    e = t._pool,
                    i = 0,
                    s = 0;
                if (!(t._sounds.length < e)) {
                    for (s = 0; s < t._sounds.length; s++) t._sounds[s]._ended && i++;
                    for (s = t._sounds.length - 1; s >= 0; s--) {
                        if (i <= e) return;
                        t._sounds[s]._ended && (t._webAudio && t._sounds[s]._node && t._sounds[s]._node.disconnect(0), t._sounds.splice(s, 1), i--)
                    }
                }
            },
            _getSoundIds: function(t) {
                var e = this;
                if (void 0 === t) {
                    for (var i = [], s = 0; s < e._sounds.length; s++) i.push(e._sounds[s]._id);
                    return i
                }
                return [t]
            },
            _refreshBuffer: function(t) {
                var i = this;
                return t._node.bufferSource = e.ctx.createBufferSource(), t._node.bufferSource.buffer = n[i._src], t._panner ? t._node.bufferSource.connect(t._panner) : t._node.bufferSource.connect(t._node), t._node.bufferSource.loop = t._loop, t._loop && (t._node.bufferSource.loopStart = t._start || 0, t._node.bufferSource.loopEnd = t._stop), t._node.bufferSource.playbackRate.setValueAtTime(t._rate, e.ctx.currentTime), i
            },
            _cleanBuffer: function(t) {
                var i = this;
                if (e._scratchBuffer) {
                    t.bufferSource.onended = null, t.bufferSource.disconnect(0);
                    try {
                        t.bufferSource.buffer = e._scratchBuffer
                    } catch (t) {}
                }
                return t.bufferSource = null, i
            }
        };
        var s = function(t) {
            this._parent = t, this.init()
        };
        s.prototype = {
            init: function() {
                var t = this,
                    i = t._parent;
                return t._muted = i._muted, t._loop = i._loop, t._volume = i._volume, t._rate = i._rate, t._seek = 0, t._paused = !0, t._ended = !0, t._sprite = "__default", t._id = ++e._counter, i._sounds.push(t), t.create(), t
            },
            create: function() {
                var t = this,
                    i = t._parent,
                    s = e._muted || t._muted || t._parent._muted ? 0 : t._volume;
                return i._webAudio ? (t._node = void 0 === e.ctx.createGain ? e.ctx.createGainNode() : e.ctx.createGain(), t._node.gain.setValueAtTime(s, e.ctx.currentTime), t._node.paused = !0, t._node.connect(e.masterGain)) : (t._node = new Audio, t._errorFn = t._errorListener.bind(t), t._node.addEventListener("error", t._errorFn, !1), t._loadFn = t._loadListener.bind(t), t._node.addEventListener(e._canPlayEvent, t._loadFn, !1), t._node.src = i._src, t._node.preload = "auto", t._node.volume = s * e.volume(), t._node.load()), t
            },
            reset: function() {
                var t = this,
                    i = t._parent;
                return t._muted = i._muted, t._loop = i._loop, t._volume = i._volume, t._rate = i._rate, t._seek = 0, t._rateSeek = 0, t._paused = !0, t._ended = !0, t._sprite = "__default", t._id = ++e._counter, t
            },
            _errorListener: function() {
                var t = this;
                t._parent._emit("loaderror", t._id, t._node.error ? t._node.error.code : 0), t._node.removeEventListener("error", t._errorFn, !1)
            },
            _loadListener: function() {
                var t = this,
                    i = t._parent;
                i._duration = Math.ceil(10 * t._node.duration) / 10, 0 === Object.keys(i._sprite).length && (i._sprite = {
                    __default: [0, 1e3 * i._duration]
                }), "loaded" !== i._state && (i._state = "loaded", i._emit("load"), i._loadQueue()), t._node.removeEventListener(e._canPlayEvent, t._loadFn, !1)
            }
        };
        var n = {},
            a = function(t) {
                var e = t._src;
                if (n[e]) return t._duration = n[e].duration, void h(t);
                if (/^data:[^;]+;base64,/.test(e)) {
                    for (var i = atob(e.split(",")[1]), s = new Uint8Array(i.length), a = 0; a < i.length; ++a) s[a] = i.charCodeAt(a);
                    r(s.buffer, t)
                } else {
                    var l = new XMLHttpRequest;
                    l.open("GET", e, !0), l.withCredentials = t._xhrWithCredentials, l.responseType = "arraybuffer", l.onload = function() {
                        var e = (l.status + "")[0];
                        "0" === e || "2" === e || "3" === e ? r(l.response, t) : t._emit("loaderror", null, "Failed loading audio file with status: " + l.status + ".")
                    }, l.onerror = function() {
                        t._webAudio && (t._html5 = !0, t._webAudio = !1, t._sounds = [], delete n[e], t.load())
                    }, o(l)
                }
            },
            o = function(t) {
                try {
                    t.send()
                } catch (e) {
                    t.onerror()
                }
            },
            r = function(t, i) {
                e.ctx.decodeAudioData(t, function(t) {
                    t && i._sounds.length > 0 && (n[i._src] = t, h(i, t))
                }, function() {
                    i._emit("loaderror", null, "Decoding audio data failed.")
                })
            },
            h = function(t, e) {
                e && !t._duration && (t._duration = e.duration), 0 === Object.keys(t._sprite).length && (t._sprite = {
                    __default: [0, 1e3 * t._duration]
                }), "loaded" !== t._state && (t._state = "loaded", t._emit("load"), t._loadQueue())
            },
            l = function() {
                try {
                    "undefined" != typeof AudioContext ? e.ctx = new AudioContext : "undefined" != typeof webkitAudioContext ? e.ctx = new webkitAudioContext : e.usingWebAudio = !1
                } catch (t) {
                    e.usingWebAudio = !1
                }
                var t = /iP(hone|od|ad)/.test(e._navigator && e._navigator.platform),
                    i = e._navigator && e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
                    s = i ? parseInt(i[1], 10) : null;
                if (t && s && s < 9) {
                    var n = /safari/.test(e._navigator && e._navigator.userAgent.toLowerCase());
                    (e._navigator && e._navigator.standalone && !n || e._navigator && !e._navigator.standalone && !n) && (e.usingWebAudio = !1)
                }
                e.usingWebAudio && (e.masterGain = void 0 === e.ctx.createGain ? e.ctx.createGainNode() : e.ctx.createGain(), e.masterGain.gain.setValueAtTime(e._muted ? 0 : 1, e.ctx.currentTime), e.masterGain.connect(e.ctx.destination)), e._setup()
            };
        "function" == typeof define && define.amd && define([], function() {
            return {
                Howler: e,
                Howl: i
            }
        }), "undefined" != typeof exports && (exports.Howler = e, exports.Howl = i), "undefined" != typeof window ? (window.HowlerGlobal = t, window.Howler = e, window.Howl = i, window.Sound = s) : "undefined" != typeof global && (global.HowlerGlobal = t, global.Howler = e, global.Howl = i, global.Sound = s)
    }(),
    function() {
        "use strict";
        HowlerGlobal.prototype._pos = [0, 0, 0], HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0], HowlerGlobal.prototype.stereo = function(t) {
            var e = this;
            if (!e.ctx || !e.ctx.listener) return e;
            for (var i = e._howls.length - 1; i >= 0; i--) e._howls[i].stereo(t);
            return e
        }, HowlerGlobal.prototype.pos = function(t, e, i) {
            var s = this;
            return s.ctx && s.ctx.listener ? (e = "number" != typeof e ? s._pos[1] : e, i = "number" != typeof i ? s._pos[2] : i, "number" != typeof t ? s._pos : (s._pos = [t, e, i], s.ctx.listener.setPosition(s._pos[0], s._pos[1], s._pos[2]), s)) : s
        }, HowlerGlobal.prototype.orientation = function(t, e, i, s, n, a) {
            var o = this;
            if (!o.ctx || !o.ctx.listener) return o;
            var r = o._orientation;
            return e = "number" != typeof e ? r[1] : e, i = "number" != typeof i ? r[2] : i, s = "number" != typeof s ? r[3] : s, n = "number" != typeof n ? r[4] : n, a = "number" != typeof a ? r[5] : a, "number" != typeof t ? r : (o._orientation = [t, e, i, s, n, a], o.ctx.listener.setOrientation(t, e, i, s, n, a), o)
        }, Howl.prototype.init = function(t) {
            return function(e) {
                var i = this;
                return i._orientation = e.orientation || [1, 0, 0], i._stereo = e.stereo || null, i._pos = e.pos || null, i._pannerAttr = {
                    coneInnerAngle: void 0 !== e.coneInnerAngle ? e.coneInnerAngle : 360,
                    coneOuterAngle: void 0 !== e.coneOuterAngle ? e.coneOuterAngle : 360,
                    coneOuterGain: void 0 !== e.coneOuterGain ? e.coneOuterGain : 0,
                    distanceModel: void 0 !== e.distanceModel ? e.distanceModel : "inverse",
                    maxDistance: void 0 !== e.maxDistance ? e.maxDistance : 1e4,
                    panningModel: void 0 !== e.panningModel ? e.panningModel : "HRTF",
                    refDistance: void 0 !== e.refDistance ? e.refDistance : 1,
                    rolloffFactor: void 0 !== e.rolloffFactor ? e.rolloffFactor : 1
                }, i._onstereo = e.onstereo ? [{
                    fn: e.onstereo
                }] : [], i._onpos = e.onpos ? [{
                    fn: e.onpos
                }] : [], i._onorientation = e.onorientation ? [{
                    fn: e.onorientation
                }] : [], t.call(this, e)
            }
        }(Howl.prototype.init), Howl.prototype.stereo = function(e, i) {
            var s = this;
            if (!s._webAudio) return s;
            if ("loaded" !== s._state) return s._queue.push({
                event: "stereo",
                action: function() {
                    s.stereo(e, i)
                }
            }), s;
            var n = void 0 === Howler.ctx.createStereoPanner ? "spatial" : "stereo";
            if (void 0 === i) {
                if ("number" != typeof e) return s._stereo;
                s._stereo = e, s._pos = [e, 0, 0]
            }
            for (var a = s._getSoundIds(i), o = 0; o < a.length; o++) {
                var r = s._soundById(a[o]);
                if (r) {
                    if ("number" != typeof e) return r._stereo;
                    r._stereo = e, r._pos = [e, 0, 0], r._node && (r._pannerAttr.panningModel = "equalpower", r._panner && r._panner.pan || t(r, n), "spatial" === n ? r._panner.setPosition(e, 0, 0) : r._panner.pan.setValueAtTime(e, Howler.ctx.currentTime)), s._emit("stereo", r._id)
                }
            }
            return s
        }, Howl.prototype.pos = function(e, i, s, n) {
            var a = this;
            if (!a._webAudio) return a;
            if ("loaded" !== a._state) return a._queue.push({
                event: "pos",
                action: function() {
                    a.pos(e, i, s, n)
                }
            }), a;
            if (i = "number" != typeof i ? 0 : i, s = "number" != typeof s ? -.5 : s, void 0 === n) {
                if ("number" != typeof e) return a._pos;
                a._pos = [e, i, s]
            }
            for (var o = a._getSoundIds(n), r = 0; r < o.length; r++) {
                var h = a._soundById(o[r]);
                if (h) {
                    if ("number" != typeof e) return h._pos;
                    h._pos = [e, i, s], h._node && (h._panner && !h._panner.pan || t(h, "spatial"), h._panner.setPosition(e, i, s)), a._emit("pos", h._id)
                }
            }
            return a
        }, Howl.prototype.orientation = function(e, i, s, n) {
            var a = this;
            if (!a._webAudio) return a;
            if ("loaded" !== a._state) return a._queue.push({
                event: "orientation",
                action: function() {
                    a.orientation(e, i, s, n)
                }
            }), a;
            if (i = "number" != typeof i ? a._orientation[1] : i, s = "number" != typeof s ? a._orientation[2] : s, void 0 === n) {
                if ("number" != typeof e) return a._orientation;
                a._orientation = [e, i, s]
            }
            for (var o = a._getSoundIds(n), r = 0; r < o.length; r++) {
                var h = a._soundById(o[r]);
                if (h) {
                    if ("number" != typeof e) return h._orientation;
                    h._orientation = [e, i, s], h._node && (h._panner || (h._pos || (h._pos = a._pos || [0, 0, -.5]), t(h, "spatial")), h._panner.setOrientation(e, i, s)), a._emit("orientation", h._id)
                }
            }
            return a
        }, Howl.prototype.pannerAttr = function() {
            var e, i, s, n = this,
                a = arguments;
            if (!n._webAudio) return n;
            if (0 === a.length) return n._pannerAttr;
            if (1 === a.length) {
                if ("object" != typeof a[0]) return (s = n._soundById(parseInt(a[0], 10))) ? s._pannerAttr : n._pannerAttr;
                e = a[0], void 0 === i && (e.pannerAttr || (e.pannerAttr = {
                    coneInnerAngle: e.coneInnerAngle,
                    coneOuterAngle: e.coneOuterAngle,
                    coneOuterGain: e.coneOuterGain,
                    distanceModel: e.distanceModel,
                    maxDistance: e.maxDistance,
                    refDistance: e.refDistance,
                    rolloffFactor: e.rolloffFactor,
                    panningModel: e.panningModel
                }), n._pannerAttr = {
                    coneInnerAngle: void 0 !== e.pannerAttr.coneInnerAngle ? e.pannerAttr.coneInnerAngle : n._coneInnerAngle,
                    coneOuterAngle: void 0 !== e.pannerAttr.coneOuterAngle ? e.pannerAttr.coneOuterAngle : n._coneOuterAngle,
                    coneOuterGain: void 0 !== e.pannerAttr.coneOuterGain ? e.pannerAttr.coneOuterGain : n._coneOuterGain,
                    distanceModel: void 0 !== e.pannerAttr.distanceModel ? e.pannerAttr.distanceModel : n._distanceModel,
                    maxDistance: void 0 !== e.pannerAttr.maxDistance ? e.pannerAttr.maxDistance : n._maxDistance,
                    refDistance: void 0 !== e.pannerAttr.refDistance ? e.pannerAttr.refDistance : n._refDistance,
                    rolloffFactor: void 0 !== e.pannerAttr.rolloffFactor ? e.pannerAttr.rolloffFactor : n._rolloffFactor,
                    panningModel: void 0 !== e.pannerAttr.panningModel ? e.pannerAttr.panningModel : n._panningModel
                })
            } else 2 === a.length && (e = a[0], i = parseInt(a[1], 10));
            for (var o = n._getSoundIds(i), r = 0; r < o.length; r++)
                if (s = n._soundById(o[r])) {
                    var h = s._pannerAttr;
                    h = {
                        coneInnerAngle: void 0 !== e.coneInnerAngle ? e.coneInnerAngle : h.coneInnerAngle,
                        coneOuterAngle: void 0 !== e.coneOuterAngle ? e.coneOuterAngle : h.coneOuterAngle,
                        coneOuterGain: void 0 !== e.coneOuterGain ? e.coneOuterGain : h.coneOuterGain,
                        distanceModel: void 0 !== e.distanceModel ? e.distanceModel : h.distanceModel,
                        maxDistance: void 0 !== e.maxDistance ? e.maxDistance : h.maxDistance,
                        refDistance: void 0 !== e.refDistance ? e.refDistance : h.refDistance,
                        rolloffFactor: void 0 !== e.rolloffFactor ? e.rolloffFactor : h.rolloffFactor,
                        panningModel: void 0 !== e.panningModel ? e.panningModel : h.panningModel
                    };
                    var l = s._panner;
                    l ? (l.coneInnerAngle = h.coneInnerAngle, l.coneOuterAngle = h.coneOuterAngle, l.coneOuterGain = h.coneOuterGain, l.distanceModel = h.distanceModel, l.maxDistance = h.maxDistance, l.refDistance = h.refDistance, l.rolloffFactor = h.rolloffFactor, l.panningModel = h.panningModel) : (s._pos || (s._pos = n._pos || [0, 0, -.5]), t(s, "spatial"))
                }
            return n
        }, Sound.prototype.init = function(t) {
            return function() {
                var e = this,
                    i = e._parent;
                e._orientation = i._orientation, e._stereo = i._stereo, e._pos = i._pos, e._pannerAttr = i._pannerAttr, t.call(this), e._stereo ? i.stereo(e._stereo) : e._pos && i.pos(e._pos[0], e._pos[1], e._pos[2], e._id)
            }
        }(Sound.prototype.init), Sound.prototype.reset = function(t) {
            return function() {
                var e = this,
                    i = e._parent;
                return e._orientation = i._orientation, e._pos = i._pos, e._pannerAttr = i._pannerAttr, t.call(this)
            }
        }(Sound.prototype.reset);
        var t = function(t, e) {
            "spatial" === (e = e || "spatial") ? (t._panner = Howler.ctx.createPanner(), t._panner.coneInnerAngle = t._pannerAttr.coneInnerAngle, t._panner.coneOuterAngle = t._pannerAttr.coneOuterAngle, t._panner.coneOuterGain = t._pannerAttr.coneOuterGain, t._panner.distanceModel = t._pannerAttr.distanceModel, t._panner.maxDistance = t._pannerAttr.maxDistance, t._panner.refDistance = t._pannerAttr.refDistance, t._panner.rolloffFactor = t._pannerAttr.rolloffFactor, t._panner.panningModel = t._pannerAttr.panningModel, t._panner.setPosition(t._pos[0], t._pos[1], t._pos[2]), t._panner.setOrientation(t._orientation[0], t._orientation[1], t._orientation[2])) : (t._panner = Howler.ctx.createStereoPanner(), t._panner.pan.setValueAtTime(t._stereo, Howler.ctx.currentTime)), t._panner.connect(t._node), t._paused || t._parent.pause(t._id, !0).play(t._id, !0)
        }
    }(),
    function() {
        "use strict";
        var t = function() {
            this.init()
        };
        t.prototype = {
            init: function() {
                var t = this || e;
                return t._counter = 1e3, t._codecs = {}, t._howls = [], t._muted = !1, t._volume = 1, t._canPlayEvent = "canplaythrough", t._navigator = "undefined" != typeof window && window.navigator ? window.navigator : null, t.masterGain = null, t.noAudio = !1, t.usingWebAudio = !0, t.autoSuspend = !0, t.ctx = null, t.mobileAutoEnable = !0, t._setup(), t
            },
            volume: function(t) {
                var i = this || e;
                if (t = parseFloat(t), i.ctx || l(), void 0 !== t && t >= 0 && t <= 1) {
                    if (i._volume = t, i._muted) return i;
                    i.usingWebAudio && i.masterGain.gain.setValueAtTime(t, e.ctx.currentTime);
                    for (var s = 0; s < i._howls.length; s++)
                        if (!i._howls[s]._webAudio)
                            for (var n = i._howls[s]._getSoundIds(), a = 0; a < n.length; a++) {
                                var o = i._howls[s]._soundById(n[a]);
                                o && o._node && (o._node.volume = o._volume * t)
                            }
                        return i
                }
                return i._volume
            },
            mute: function(t) {
                var i = this || e;
                i.ctx || l(), i._muted = t, i.usingWebAudio && i.masterGain.gain.setValueAtTime(t ? 0 : i._volume, e.ctx.currentTime);
                for (var s = 0; s < i._howls.length; s++)
                    if (!i._howls[s]._webAudio)
                        for (var n = i._howls[s]._getSoundIds(), a = 0; a < n.length; a++) {
                            var o = i._howls[s]._soundById(n[a]);
                            o && o._node && (o._node.muted = !!t || o._muted)
                        }
                    return i
            },
            unload: function() {
                for (var t = this || e, i = t._howls.length - 1; i >= 0; i--) t._howls[i].unload();
                return t.usingWebAudio && t.ctx && void 0 !== t.ctx.close && (t.ctx.close(), t.ctx = null, l()), t
            },
            codecs: function(t) {
                return (this || e)._codecs[t.replace(/^x-/, "")]
            },
            _setup: function() {
                var t = this || e;
                if (t.state = t.ctx ? t.ctx.state || "running" : "running", t._autoSuspend(), !t.usingWebAudio)
                    if ("undefined" != typeof Audio) try {
                        void 0 === (i = new Audio).oncanplaythrough && (t._canPlayEvent = "canplay")
                    } catch (e) {
                        t.noAudio = !0
                    } else t.noAudio = !0;
                try {
                    var i = new Audio;
                    i.muted && (t.noAudio = !0)
                } catch (t) {}
                return t.noAudio || t._setupCodecs(), t
            },
            _setupCodecs: function() {
                var t = this || e,
                    i = null;
                try {
                    i = "undefined" != typeof Audio ? new Audio : null
                } catch (e) {
                    return t
                }
                if (!i || "function" != typeof i.canPlayType) return t;
                var s = i.canPlayType("audio/mpeg;").replace(/^no$/, ""),
                    n = t._navigator && t._navigator.userAgent.match(/OPR\/([0-6].)/g),
                    a = n && parseInt(n[0].split("/")[1], 10) < 33;
                return t._codecs = {
                    mp3: !(a || !s && !i.canPlayType("audio/mp3;").replace(/^no$/, "")),
                    mpeg: !!s,
                    opus: !!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, ""),
                    ogg: !!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                    oga: !!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""),
                    wav: !!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""),
                    aac: !!i.canPlayType("audio/aac;").replace(/^no$/, ""),
                    caf: !!i.canPlayType("audio/x-caf;").replace(/^no$/, ""),
                    m4a: !!(i.canPlayType("audio/x-m4a;") || i.canPlayType("audio/m4a;") || i.canPlayType("audio/aac;")).replace(/^no$/, ""),
                    mp4: !!(i.canPlayType("audio/x-mp4;") || i.canPlayType("audio/mp4;") || i.canPlayType("audio/aac;")).replace(/^no$/, ""),
                    weba: !!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                    webm: !!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, ""),
                    dolby: !!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/, ""),
                    flac: !!(i.canPlayType("audio/x-flac;") || i.canPlayType("audio/flac;")).replace(/^no$/, "")
                }, t
            },
            _enableMobileAudio: function() {
                var t = this || e,
                    i = /iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator && t._navigator.userAgent),
                    s = !!("ontouchend" in window || t._navigator && t._navigator.maxTouchPoints > 0 || t._navigator && t._navigator.msMaxTouchPoints > 0);
                if (!t._mobileEnabled && t.ctx && (i || s)) {
                    t._mobileEnabled = !1, t._mobileUnloaded || 44100 === t.ctx.sampleRate || (t._mobileUnloaded = !0, t.unload()), t._scratchBuffer = t.ctx.createBuffer(1, 1, 22050);
                    var n = function() {
                        e._autoResume();
                        var i = t.ctx.createBufferSource();
                        i.buffer = t._scratchBuffer, i.connect(t.ctx.destination), void 0 === i.start ? i.noteOn(0) : i.start(0), "function" == typeof t.ctx.resume && t.ctx.resume(), i.onended = function() {
                            i.disconnect(0), t._mobileEnabled = !0, t.mobileAutoEnable = !1, document.removeEventListener("touchstart", n, !0), document.removeEventListener("touchend", n, !0)
                        }
                    };
                    return document.addEventListener("touchstart", n, !0), document.addEventListener("touchend", n, !0), t
                }
            },
            _autoSuspend: function() {
                var t = this;
                if (t.autoSuspend && t.ctx && void 0 !== t.ctx.suspend && e.usingWebAudio) {
                    for (var i = 0; i < t._howls.length; i++)
                        if (t._howls[i]._webAudio)
                            for (var s = 0; s < t._howls[i]._sounds.length; s++)
                                if (!t._howls[i]._sounds[s]._paused) return t;
                    return t._suspendTimer && clearTimeout(t._suspendTimer), t._suspendTimer = setTimeout(function() {
                        t.autoSuspend && (t._suspendTimer = null, t.state = "suspending", t.ctx.suspend().then(function() {
                            t.state = "suspended", t._resumeAfterSuspend && (delete t._resumeAfterSuspend, t._autoResume())
                        }))
                    }, 3e4), t
                }
            },
            _autoResume: function() {
                var t = this;
                if (t.ctx && void 0 !== t.ctx.resume && e.usingWebAudio) return "running" === t.state && t._suspendTimer ? (clearTimeout(t._suspendTimer), t._suspendTimer = null) : "suspended" === t.state ? (t.ctx.resume().then(function() {
                    t.state = "running";
                    for (var e = 0; e < t._howls.length; e++) t._howls[e]._emit("resume")
                }), t._suspendTimer && (clearTimeout(t._suspendTimer), t._suspendTimer = null)) : "suspending" === t.state && (t._resumeAfterSuspend = !0), t
            }
        };
        var e = new t,
            i = function(t) {
                var e = this;
                t.src && 0 !== t.src.length && e.init(t)
            };
        i.prototype = {
            init: function(t) {
                var i = this;
                return e.ctx || l(), i._autoplay = t.autoplay || !1, i._format = "string" != typeof t.format ? t.format : [t.format], i._html5 = t.html5 || !1, i._muted = t.mute || !1, i._loop = t.loop || !1, i._pool = t.pool || 5, i._preload = "boolean" != typeof t.preload || t.preload, i._rate = t.rate || 1, i._sprite = t.sprite || {}, i._src = "string" != typeof t.src ? t.src : [t.src], i._volume = void 0 !== t.volume ? t.volume : 1, i._xhrWithCredentials = t.xhrWithCredentials || !1, i._duration = 0, i._state = "unloaded", i._sounds = [], i._endTimers = {}, i._queue = [], i._playLock = !1, i._onend = t.onend ? [{
                    fn: t.onend
                }] : [], i._onfade = t.onfade ? [{
                    fn: t.onfade
                }] : [], i._onload = t.onload ? [{
                    fn: t.onload
                }] : [], i._onloaderror = t.onloaderror ? [{
                    fn: t.onloaderror
                }] : [], i._onplayerror = t.onplayerror ? [{
                    fn: t.onplayerror
                }] : [], i._onpause = t.onpause ? [{
                    fn: t.onpause
                }] : [], i._onplay = t.onplay ? [{
                    fn: t.onplay
                }] : [], i._onstop = t.onstop ? [{
                    fn: t.onstop
                }] : [], i._onmute = t.onmute ? [{
                    fn: t.onmute
                }] : [], i._onvolume = t.onvolume ? [{
                    fn: t.onvolume
                }] : [], i._onrate = t.onrate ? [{
                    fn: t.onrate
                }] : [], i._onseek = t.onseek ? [{
                    fn: t.onseek
                }] : [], i._onresume = [], i._webAudio = e.usingWebAudio && !i._html5, void 0 !== e.ctx && e.ctx && e.mobileAutoEnable && e._enableMobileAudio(), e._howls.push(i), i._autoplay && i._queue.push({
                    event: "play",
                    action: function() {
                        i.play()
                    }
                }), i._preload && i.load(), i
            },
            load: function() {
                var t = this,
                    i = null; {
                    if (!e.noAudio) {
                        "string" == typeof t._src && (t._src = [t._src]);
                        for (var n = 0; n < t._src.length; n++) {
                            var o, r;
                            if (t._format && t._format[n]) o = t._format[n];
                            else {
                                if ("string" != typeof(r = t._src[n])) {
                                    t._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
                                    continue
                                }(o = /^data:audio\/([^;,]+);/i.exec(r)) || (o = /\.([^.]+)$/.exec(r.split("?", 1)[0])), o && (o = o[1].toLowerCase())
                            } if (o && e.codecs(o)) {
                                i = t._src[n];
                                break
                            }
                        }
                        return i ? (t._src = i, t._state = "loading", "https:" === window.location.protocol && "http:" === i.slice(0, 5) && (t._html5 = !0, t._webAudio = !1), new s(t), t._webAudio && a(t), t) : void t._emit("loaderror", null, "No codec support for selected audio sources.")
                    }
                    t._emit("loaderror", null, "No audio support.")
                }
            },
            play: function(t, i) {
                var s = this,
                    n = null;
                if ("number" == typeof t) n = t, t = null;
                else {
                    if ("string" == typeof t && "loaded" === s._state && !s._sprite[t]) return null;
                    if (void 0 === t) {
                        t = "__default";
                        for (var a = 0, o = 0; o < s._sounds.length; o++) s._sounds[o]._paused && !s._sounds[o]._ended && (a++, n = s._sounds[o]._id);
                        1 === a ? t = null : n = null
                    }
                }
                var r = n ? s._soundById(n) : s._inactiveSound();
                if (!r) return null;
                if (n && !t && (t = r._sprite || "__default"), "loaded" !== s._state) {
                    r._sprite = t, r._ended = !1;
                    var h = r._id;
                    return s._queue.push({
                        event: "play",
                        action: function() {
                            s.play(h)
                        }
                    }), h
                }
                if (n && !r._paused) return i || s._loadQueue("play"), r._id;
                s._webAudio && e._autoResume();
                var l = Math.max(0, r._seek > 0 ? r._seek : s._sprite[t][0] / 1e3),
                    c = Math.max(0, (s._sprite[t][0] + s._sprite[t][1]) / 1e3 - l),
                    u = 1e3 * c / Math.abs(r._rate);
                r._paused = !1, r._ended = !1, r._sprite = t, r._seek = l, r._start = s._sprite[t][0] / 1e3, r._stop = (s._sprite[t][0] + s._sprite[t][1]) / 1e3, r._loop = !(!r._loop && !s._sprite[t][2]);
                var d = r._node;
                if (s._webAudio) {
                    var p = function() {
                        s._refreshBuffer(r);
                        var t = r._muted || s._muted ? 0 : r._volume;
                        d.gain.setValueAtTime(t, e.ctx.currentTime), r._playStart = e.ctx.currentTime, void 0 === d.bufferSource.start ? r._loop ? d.bufferSource.noteGrainOn(0, l, 86400) : d.bufferSource.noteGrainOn(0, l, c) : r._loop ? d.bufferSource.start(0, l, 86400) : d.bufferSource.start(0, l, c), u !== 1 / 0 && (s._endTimers[r._id] = setTimeout(s._ended.bind(s, r), u)), i || setTimeout(function() {
                            s._emit("play", r._id)
                        }, 0)
                    };
                    "running" === e.state ? p() : (s.once("resume", p), s._clearTimer(r._id))
                } else {
                    var m = function() {
                            d.currentTime = l, d.muted = r._muted || s._muted || e._muted || d.muted, d.volume = r._volume * e.volume(), d.playbackRate = r._rate;
                            try {
                                var n = d.play();
                                if ("undefined" != typeof Promise && n instanceof Promise) {
                                    s._playLock = !0;
                                    var a = function() {
                                        s._playLock = !1, i || s._emit("play", r._id)
                                    };
                                    n.then(a, a)
                                } else i || s._emit("play", r._id); if (d.paused) return void s._emit("playerror", r._id, "Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");
                                "__default" !== t ? s._endTimers[r._id] = setTimeout(s._ended.bind(s, r), u) : (s._endTimers[r._id] = function() {
                                    s._ended(r), d.removeEventListener("ended", s._endTimers[r._id], !1)
                                }, d.addEventListener("ended", s._endTimers[r._id], !1))
                            } catch (t) {
                                s._emit("playerror", r._id, t)
                            }
                        },
                        g = window && window.ejecta || !d.readyState && e._navigator.isCocoonJS;
                    if (d.readyState >= 3 || g) m();
                    else {
                        var f = function() {
                            m(), d.removeEventListener(e._canPlayEvent, f, !1)
                        };
                        d.addEventListener(e._canPlayEvent, f, !1), s._clearTimer(r._id)
                    }
                }
                return r._id
            },
            pause: function(t) {
                var e = this;
                if ("loaded" !== e._state || e._playLock) return e._queue.push({
                    event: "pause",
                    action: function() {
                        e.pause(t)
                    }
                }), e;
                for (var i = e._getSoundIds(t), s = 0; s < i.length; s++) {
                    e._clearTimer(i[s]);
                    var n = e._soundById(i[s]);
                    if (n && !n._paused && (n._seek = e.seek(i[s]), n._rateSeek = 0, n._paused = !0, e._stopFade(i[s]), n._node))
                        if (e._webAudio) {
                            if (!n._node.bufferSource) continue;
                            void 0 === n._node.bufferSource.stop ? n._node.bufferSource.noteOff(0) : n._node.bufferSource.stop(0), e._cleanBuffer(n._node)
                        } else isNaN(n._node.duration) && n._node.duration !== 1 / 0 || n._node.pause();
                    arguments[1] || e._emit("pause", n ? n._id : null)
                }
                return e
            },
            stop: function(t, e) {
                var i = this;
                if ("loaded" !== i._state) return i._queue.push({
                    event: "stop",
                    action: function() {
                        i.stop(t)
                    }
                }), i;
                for (var s = i._getSoundIds(t), n = 0; n < s.length; n++) {
                    i._clearTimer(s[n]);
                    var a = i._soundById(s[n]);
                    a && (a._seek = a._start || 0, a._rateSeek = 0, a._paused = !0, a._ended = !0, i._stopFade(s[n]), a._node && (i._webAudio ? a._node.bufferSource && (void 0 === a._node.bufferSource.stop ? a._node.bufferSource.noteOff(0) : a._node.bufferSource.stop(0), i._cleanBuffer(a._node)) : isNaN(a._node.duration) && a._node.duration !== 1 / 0 || (a._node.currentTime = a._start || 0, a._node.pause())), e || i._emit("stop", a._id))
                }
                return i
            },
            mute: function(t, i) {
                var s = this;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "mute",
                    action: function() {
                        s.mute(t, i)
                    }
                }), s;
                if (void 0 === i) {
                    if ("boolean" != typeof t) return s._muted;
                    s._muted = t
                }
                for (var n = s._getSoundIds(i), a = 0; a < n.length; a++) {
                    var o = s._soundById(n[a]);
                    o && (o._muted = t, o._interval && s._stopFade(o._id), s._webAudio && o._node ? o._node.gain.setValueAtTime(t ? 0 : o._volume, e.ctx.currentTime) : o._node && (o._node.muted = !!e._muted || t), s._emit("mute", o._id))
                }
                return s
            },
            volume: function() {
                var t, i, s = this,
                    n = arguments;
                if (0 === n.length) return s._volume;
                1 === n.length || 2 === n.length && void 0 === n[1] ? s._getSoundIds().indexOf(n[0]) >= 0 ? i = parseInt(n[0], 10) : t = parseFloat(n[0]) : n.length >= 2 && (t = parseFloat(n[0]), i = parseInt(n[1], 10));
                var a;
                if (!(void 0 !== t && t >= 0 && t <= 1)) return (a = i ? s._soundById(i) : s._sounds[0]) ? a._volume : 0;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "volume",
                    action: function() {
                        s.volume.apply(s, n)
                    }
                }), s;
                void 0 === i && (s._volume = t), i = s._getSoundIds(i);
                for (var o = 0; o < i.length; o++)(a = s._soundById(i[o])) && (a._volume = t, n[2] || s._stopFade(i[o]), s._webAudio && a._node && !a._muted ? a._node.gain.setValueAtTime(t, e.ctx.currentTime) : a._node && !a._muted && (a._node.volume = t * e.volume()), s._emit("volume", a._id));
                return s
            },
            fade: function(t, i, s, n) {
                var a = this;
                if ("loaded" !== a._state) return a._queue.push({
                    event: "fade",
                    action: function() {
                        a.fade(t, i, s, n)
                    }
                }), a;
                a.volume(t, n);
                for (var o = a._getSoundIds(n), r = 0; r < o.length; r++) {
                    var h = a._soundById(o[r]);
                    if (h) {
                        if (n || a._stopFade(o[r]), a._webAudio && !h._muted) {
                            var l = e.ctx.currentTime,
                                c = l + s / 1e3;
                            h._volume = t, h._node.gain.setValueAtTime(t, l), h._node.gain.linearRampToValueAtTime(i, c)
                        }
                        a._startFadeInterval(h, t, i, s, o[r], void 0 === n)
                    }
                }
                return a
            },
            _startFadeInterval: function(t, e, i, s, n, a) {
                var o = this,
                    r = e,
                    h = i - e,
                    l = Math.abs(h / .01),
                    c = Math.max(4, l > 0 ? s / l : s),
                    u = Date.now();
                t._fadeTo = i, t._interval = setInterval(function() {
                    var n = (Date.now() - u) / s;
                    u = Date.now(), r += h * n, r = Math.max(0, r), r = Math.min(1, r), r = Math.round(100 * r) / 100, o._webAudio ? t._volume = r : o.volume(r, t._id, !0), a && (o._volume = r), (i < e && r <= i || i > e && r >= i) && (clearInterval(t._interval), t._interval = null, t._fadeTo = null, o.volume(i, t._id), o._emit("fade", t._id))
                }, c)
            },
            _stopFade: function(t) {
                var i = this,
                    s = i._soundById(t);
                return s && s._interval && (i._webAudio && s._node.gain.cancelScheduledValues(e.ctx.currentTime), clearInterval(s._interval), s._interval = null, i.volume(s._fadeTo, t), s._fadeTo = null, i._emit("fade", t)), i
            },
            loop: function() {
                var t, e, i, s = this,
                    n = arguments;
                if (0 === n.length) return s._loop;
                if (1 === n.length) {
                    if ("boolean" != typeof n[0]) return !!(i = s._soundById(parseInt(n[0], 10))) && i._loop;
                    t = n[0], s._loop = t
                } else 2 === n.length && (t = n[0], e = parseInt(n[1], 10));
                for (var a = s._getSoundIds(e), o = 0; o < a.length; o++)(i = s._soundById(a[o])) && (i._loop = t, s._webAudio && i._node && i._node.bufferSource && (i._node.bufferSource.loop = t, t && (i._node.bufferSource.loopStart = i._start || 0, i._node.bufferSource.loopEnd = i._stop)));
                return s
            },
            rate: function() {
                var t, i, s = this,
                    n = arguments;
                0 === n.length ? i = s._sounds[0]._id : 1 === n.length ? s._getSoundIds().indexOf(n[0]) >= 0 ? i = parseInt(n[0], 10) : t = parseFloat(n[0]) : 2 === n.length && (t = parseFloat(n[0]), i = parseInt(n[1], 10));
                var a;
                if ("number" != typeof t) return (a = s._soundById(i)) ? a._rate : s._rate;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "rate",
                    action: function() {
                        s.rate.apply(s, n)
                    }
                }), s;
                void 0 === i && (s._rate = t), i = s._getSoundIds(i);
                for (var o = 0; o < i.length; o++)
                    if (a = s._soundById(i[o])) {
                        a._rateSeek = s.seek(i[o]), a._playStart = s._webAudio ? e.ctx.currentTime : a._playStart, a._rate = t, s._webAudio && a._node && a._node.bufferSource ? a._node.bufferSource.playbackRate.setValueAtTime(t, e.ctx.currentTime) : a._node && (a._node.playbackRate = t);
                        var r = s.seek(i[o]),
                            h = 1e3 * ((s._sprite[a._sprite][0] + s._sprite[a._sprite][1]) / 1e3 - r) / Math.abs(a._rate);
                        !s._endTimers[i[o]] && a._paused || (s._clearTimer(i[o]), s._endTimers[i[o]] = setTimeout(s._ended.bind(s, a), h)), s._emit("rate", a._id)
                    }
                return s
            },
            seek: function() {
                var t, i, s = this,
                    n = arguments;
                if (0 === n.length ? i = s._sounds[0]._id : 1 === n.length ? s._getSoundIds().indexOf(n[0]) >= 0 ? i = parseInt(n[0], 10) : s._sounds.length && (i = s._sounds[0]._id, t = parseFloat(n[0])) : 2 === n.length && (t = parseFloat(n[0]), i = parseInt(n[1], 10)), void 0 === i) return s;
                if ("loaded" !== s._state) return s._queue.push({
                    event: "seek",
                    action: function() {
                        s.seek.apply(s, n)
                    }
                }), s;
                var a = s._soundById(i);
                if (a) {
                    if (!("number" == typeof t && t >= 0)) {
                        if (s._webAudio) {
                            var o = s.playing(i) ? e.ctx.currentTime - a._playStart : 0,
                                r = a._rateSeek ? a._rateSeek - a._seek : 0;
                            return a._seek + (r + o * Math.abs(a._rate))
                        }
                        return a._node.currentTime
                    }
                    var h = s.playing(i);
                    if (h && s.pause(i, !0), a._seek = t, a._ended = !1, s._clearTimer(i), h && s.play(i, !0), !s._webAudio && a._node && (a._node.currentTime = t), h && !s._webAudio) {
                        var l = function() {
                            s._playLock ? setTimeout(l, 0) : s._emit("seek", i)
                        };
                        setTimeout(l, 0)
                    } else s._emit("seek", i)
                }
                return s
            },
            playing: function(t) {
                var e = this;
                if ("number" == typeof t) {
                    var i = e._soundById(t);
                    return !!i && !i._paused
                }
                for (var s = 0; s < e._sounds.length; s++)
                    if (!e._sounds[s]._paused) return !0;
                return !1
            },
            duration: function(t) {
                var e = this,
                    i = e._duration,
                    s = e._soundById(t);
                return s && (i = e._sprite[s._sprite][1] / 1e3), i
            },
            state: function() {
                return this._state
            },
            unload: function() {
                for (var t = this, i = t._sounds, s = 0; s < i.length; s++) {
                    i[s]._paused || t.stop(i[s]._id), t._webAudio || (/MSIE |Trident\//.test(e._navigator && e._navigator.userAgent) || (i[s]._node.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"), i[s]._node.removeEventListener("error", i[s]._errorFn, !1), i[s]._node.removeEventListener(e._canPlayEvent, i[s]._loadFn, !1)), delete i[s]._node, t._clearTimer(i[s]._id);
                    var a = e._howls.indexOf(t);
                    a >= 0 && e._howls.splice(a, 1)
                }
                var o = !0;
                for (s = 0; s < e._howls.length; s++)
                    if (e._howls[s]._src === t._src) {
                        o = !1;
                        break
                    }
                return n && o && delete n[t._src], e.noAudio = !1, t._state = "unloaded", t._sounds = [], t = null, null
            },
            on: function(t, e, i, s) {
                var n = this,
                    a = n["_on" + t];
                return "function" == typeof e && a.push(s ? {
                    id: i,
                    fn: e,
                    once: s
                } : {
                    id: i,
                    fn: e
                }), n
            },
            off: function(t, e, i) {
                var s = this,
                    n = s["_on" + t],
                    a = 0;
                if ("number" == typeof e && (i = e, e = null), e || i)
                    for (a = 0; a < n.length; a++) {
                        var o = i === n[a].id;
                        if (e === n[a].fn && o || !e && o) {
                            n.splice(a, 1);
                            break
                        }
                    } else if (t) s["_on" + t] = [];
                    else {
                        var r = Object.keys(s);
                        for (a = 0; a < r.length; a++) 0 === r[a].indexOf("_on") && Array.isArray(s[r[a]]) && (s[r[a]] = [])
                    }
                return s
            },
            once: function(t, e, i) {
                var s = this;
                return s.on(t, e, i, 1), s
            },
            _emit: function(t, e, i) {
                for (var s = this, n = s["_on" + t], a = n.length - 1; a >= 0; a--) n[a].id && n[a].id !== e && "load" !== t || (setTimeout(function(t) {
                    t.call(this, e, i)
                }.bind(s, n[a].fn), 0), n[a].once && s.off(t, n[a].fn, n[a].id));
                return s._loadQueue(t), s
            },
            _loadQueue: function(t) {
                var e = this;
                if (e._queue.length > 0) {
                    var i = e._queue[0];
                    i.event === t && (e._queue.shift(), e._loadQueue()), t || i.action()
                }
                return e
            },
            _ended: function(t) {
                var i = this,
                    s = t._sprite;
                if (!i._webAudio && t._node && !t._node.paused && !t._node.ended && t._node.currentTime < t._stop) return setTimeout(i._ended.bind(i, t), 100), i;
                var n = !(!t._loop && !i._sprite[s][2]);
                if (i._emit("end", t._id), !i._webAudio && n && i.stop(t._id, !0).play(t._id), i._webAudio && n) {
                    i._emit("play", t._id), t._seek = t._start || 0, t._rateSeek = 0, t._playStart = e.ctx.currentTime;
                    var a = 1e3 * (t._stop - t._start) / Math.abs(t._rate);
                    i._endTimers[t._id] = setTimeout(i._ended.bind(i, t), a)
                }
                return i._webAudio && !n && (t._paused = !0, t._ended = !0, t._seek = t._start || 0, t._rateSeek = 0, i._clearTimer(t._id), i._cleanBuffer(t._node), e._autoSuspend()), i._webAudio || n || i.stop(t._id), i
            },
            _clearTimer: function(t) {
                var e = this;
                if (e._endTimers[t]) {
                    if ("function" != typeof e._endTimers[t]) clearTimeout(e._endTimers[t]);
                    else {
                        var i = e._soundById(t);
                        i && i._node && i._node.removeEventListener("ended", e._endTimers[t], !1)
                    }
                    delete e._endTimers[t]
                }
                return e
            },
            _soundById: function(t) {
                for (var e = this, i = 0; i < e._sounds.length; i++)
                    if (t === e._sounds[i]._id) return e._sounds[i];
                return null
            },
            _inactiveSound: function() {
                var t = this;
                t._drain();
                for (var e = 0; e < t._sounds.length; e++)
                    if (t._sounds[e]._ended) return t._sounds[e].reset();
                return new s(t)
            },
            _drain: function() {
                var t = this,
                    e = t._pool,
                    i = 0,
                    s = 0;
                if (!(t._sounds.length < e)) {
                    for (s = 0; s < t._sounds.length; s++) t._sounds[s]._ended && i++;
                    for (s = t._sounds.length - 1; s >= 0; s--) {
                        if (i <= e) return;
                        t._sounds[s]._ended && (t._webAudio && t._sounds[s]._node && t._sounds[s]._node.disconnect(0), t._sounds.splice(s, 1), i--)
                    }
                }
            },
            _getSoundIds: function(t) {
                var e = this;
                if (void 0 === t) {
                    for (var i = [], s = 0; s < e._sounds.length; s++) i.push(e._sounds[s]._id);
                    return i
                }
                return [t]
            },
            _refreshBuffer: function(t) {
                var i = this;
                return t._node.bufferSource = e.ctx.createBufferSource(), t._node.bufferSource.buffer = n[i._src], t._panner ? t._node.bufferSource.connect(t._panner) : t._node.bufferSource.connect(t._node), t._node.bufferSource.loop = t._loop, t._loop && (t._node.bufferSource.loopStart = t._start || 0, t._node.bufferSource.loopEnd = t._stop), t._node.bufferSource.playbackRate.setValueAtTime(t._rate, e.ctx.currentTime), i
            },
            _cleanBuffer: function(t) {
                var i = this;
                if (e._scratchBuffer) {
                    t.bufferSource.onended = null, t.bufferSource.disconnect(0);
                    try {
                        t.bufferSource.buffer = e._scratchBuffer
                    } catch (t) {}
                }
                return t.bufferSource = null, i
            }
        };
        var s = function(t) {
            this._parent = t, this.init()
        };
        s.prototype = {
            init: function() {
                var t = this,
                    i = t._parent;
                return t._muted = i._muted, t._loop = i._loop, t._volume = i._volume, t._rate = i._rate, t._seek = 0, t._paused = !0, t._ended = !0, t._sprite = "__default", t._id = ++e._counter, i._sounds.push(t), t.create(), t
            },
            create: function() {
                var t = this,
                    i = t._parent,
                    s = e._muted || t._muted || t._parent._muted ? 0 : t._volume;
                return i._webAudio ? (t._node = void 0 === e.ctx.createGain ? e.ctx.createGainNode() : e.ctx.createGain(), t._node.gain.setValueAtTime(s, e.ctx.currentTime), t._node.paused = !0, t._node.connect(e.masterGain)) : (t._node = new Audio, t._errorFn = t._errorListener.bind(t), t._node.addEventListener("error", t._errorFn, !1), t._loadFn = t._loadListener.bind(t), t._node.addEventListener(e._canPlayEvent, t._loadFn, !1), t._node.src = i._src, t._node.preload = "auto", t._node.volume = s * e.volume(), t._node.load()), t
            },
            reset: function() {
                var t = this,
                    i = t._parent;
                return t._muted = i._muted, t._loop = i._loop, t._volume = i._volume, t._rate = i._rate, t._seek = 0, t._rateSeek = 0, t._paused = !0, t._ended = !0, t._sprite = "__default", t._id = ++e._counter, t
            },
            _errorListener: function() {
                var t = this;
                t._parent._emit("loaderror", t._id, t._node.error ? t._node.error.code : 0), t._node.removeEventListener("error", t._errorFn, !1)
            },
            _loadListener: function() {
                var t = this,
                    i = t._parent;
                i._duration = Math.ceil(10 * t._node.duration) / 10, 0 === Object.keys(i._sprite).length && (i._sprite = {
                    __default: [0, 1e3 * i._duration]
                }), "loaded" !== i._state && (i._state = "loaded", i._emit("load"), i._loadQueue()), t._node.removeEventListener(e._canPlayEvent, t._loadFn, !1)
            }
        };
        var n = {},
            a = function(t) {
                var e = t._src;
                if (n[e]) return t._duration = n[e].duration, void h(t);
                if (/^data:[^;]+;base64,/.test(e)) {
                    for (var i = atob(e.split(",")[1]), s = new Uint8Array(i.length), a = 0; a < i.length; ++a) s[a] = i.charCodeAt(a);
                    r(s.buffer, t)
                } else {
                    var l = new XMLHttpRequest;
                    l.open("GET", e, !0), l.withCredentials = t._xhrWithCredentials, l.responseType = "arraybuffer", l.onload = function() {
                        var e = (l.status + "")[0];
                        "0" === e || "2" === e || "3" === e ? r(l.response, t) : t._emit("loaderror", null, "Failed loading audio file with status: " + l.status + ".")
                    }, l.onerror = function() {
                        t._webAudio && (t._html5 = !0, t._webAudio = !1, t._sounds = [], delete n[e], t.load())
                    }, o(l)
                }
            },
            o = function(t) {
                try {
                    t.send()
                } catch (e) {
                    t.onerror()
                }
            },
            r = function(t, i) {
                e.ctx.decodeAudioData(t, function(t) {
                    t && i._sounds.length > 0 && (n[i._src] = t, h(i, t))
                }, function() {
                    i._emit("loaderror", null, "Decoding audio data failed.")
                })
            },
            h = function(t, e) {
                e && !t._duration && (t._duration = e.duration), 0 === Object.keys(t._sprite).length && (t._sprite = {
                    __default: [0, 1e3 * t._duration]
                }), "loaded" !== t._state && (t._state = "loaded", t._emit("load"), t._loadQueue())
            },
            l = function() {
                try {
                    "undefined" != typeof AudioContext ? e.ctx = new AudioContext : "undefined" != typeof webkitAudioContext ? e.ctx = new webkitAudioContext : e.usingWebAudio = !1
                } catch (t) {
                    e.usingWebAudio = !1
                }
                var t = /iP(hone|od|ad)/.test(e._navigator && e._navigator.platform),
                    i = e._navigator && e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),
                    s = i ? parseInt(i[1], 10) : null;
                if (t && s && s < 9) {
                    var n = /safari/.test(e._navigator && e._navigator.userAgent.toLowerCase());
                    (e._navigator && e._navigator.standalone && !n || e._navigator && !e._navigator.standalone && !n) && (e.usingWebAudio = !1)
                }
                e.usingWebAudio && (e.masterGain = void 0 === e.ctx.createGain ? e.ctx.createGainNode() : e.ctx.createGain(), e.masterGain.gain.setValueAtTime(e._muted ? 0 : 1, e.ctx.currentTime), e.masterGain.connect(e.ctx.destination)), e._setup()
            };
        "function" == typeof define && define.amd && define([], function() {
            return {
                Howler: e,
                Howl: i
            }
        }), "undefined" != typeof exports && (exports.Howler = e, exports.Howl = i), "undefined" != typeof window ? (window.HowlerGlobal = t, window.Howler = e, window.Howl = i, window.Sound = s) : "undefined" != typeof global && (global.HowlerGlobal = t, global.Howler = e, global.Howl = i, global.Sound = s)
    }(),
    function() {
        function t(t) {
            function e(e, i, s, n, a, o) {
                for (; a >= 0 && o > a; a += t) {
                    var r = n ? n[a] : a;
                    s = i(s, e[r], r, e)
                }
                return s
            }
            return function(i, s, n, a) {
                s = v(s, a, 4);
                var o = !I(i) && y.keys(i),
                    r = (o || i).length,
                    h = t > 0 ? 0 : r - 1;
                return arguments.length < 3 && (n = i[o ? o[h] : h], h += t), e(i, s, n, o, h, r)
            }
        }

        function e(t) {
            return function(e, i, s) {
                i = b(i, s);
                for (var n = A(e), a = t > 0 ? 0 : n - 1; a >= 0 && n > a; a += t)
                    if (i(e[a], a, e)) return a;
                return -1
            }
        }

        function i(t, e, i) {
            return function(s, n, a) {
                var o = 0,
                    r = A(s);
                if ("number" == typeof a) t > 0 ? o = a >= 0 ? a : Math.max(a + r, o) : r = a >= 0 ? Math.min(a + 1, r) : a + r + 1;
                else if (i && a && r) return a = i(s, n), s[a] === n ? a : -1;
                if (n !== n) return (a = e(c.call(s, o, r), y.isNaN)) >= 0 ? a + o : -1;
                for (a = t > 0 ? o : r - 1; a >= 0 && r > a; a += t)
                    if (s[a] === n) return a;
                return -1
            }
        }

        function s(t, e) {
            var i = O.length,
                s = t.constructor,
                n = y.isFunction(s) && s.prototype || r,
                a = "constructor";
            for (y.has(t, a) && !y.contains(e, a) && e.push(a); i--;)(a = O[i]) in t && t[a] !== n[a] && !y.contains(e, a) && e.push(a)
        }
        var n = this,
            a = n._,
            o = Array.prototype,
            r = Object.prototype,
            h = Function.prototype,
            l = o.push,
            c = o.slice,
            u = r.toString,
            d = r.hasOwnProperty,
            p = Array.isArray,
            m = Object.keys,
            g = h.bind,
            f = Object.create,
            _ = function() {},
            y = function(t) {
                return t instanceof y ? t : this instanceof y ? void(this._wrapped = t) : new y(t)
            };
        "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = y), exports._ = y) : n._ = y, y.VERSION = "1.8.3";
        var v = function(t, e, i) {
                if (void 0 === e) return t;
                switch (null == i ? 3 : i) {
                    case 1:
                        return function(i) {
                            return t.call(e, i)
                        };
                    case 2:
                        return function(i, s) {
                            return t.call(e, i, s)
                        };
                    case 3:
                        return function(i, s, n) {
                            return t.call(e, i, s, n)
                        };
                    case 4:
                        return function(i, s, n, a) {
                            return t.call(e, i, s, n, a)
                        }
                }
                return function() {
                    return t.apply(e, arguments)
                }
            },
            b = function(t, e, i) {
                return null == t ? y.identity : y.isFunction(t) ? v(t, e, i) : y.isObject(t) ? y.matcher(t) : y.property(t)
            };
        y.iteratee = function(t, e) {
            return b(t, e, 1 / 0)
        };
        var S = function(t, e) {
                return function(i) {
                    var s = arguments.length;
                    if (2 > s || null == i) return i;
                    for (var n = 1; s > n; n++)
                        for (var a = arguments[n], o = t(a), r = o.length, h = 0; r > h; h++) {
                            var l = o[h];
                            e && void 0 !== i[l] || (i[l] = a[l])
                        }
                    return i
                }
            },
            T = function(t) {
                if (!y.isObject(t)) return {};
                if (f) return f(t);
                _.prototype = t;
                var e = new _;
                return _.prototype = null, e
            },
            E = function(t) {
                return function(e) {
                    return null == e ? void 0 : e[t]
                }
            },
            P = Math.pow(2, 53) - 1,
            A = E("length"),
            I = function(t) {
                var e = A(t);
                return "number" == typeof e && e >= 0 && P >= e
            };
        y.each = y.forEach = function(t, e, i) {
            e = v(e, i);
            var s, n;
            if (I(t))
                for (s = 0, n = t.length; n > s; s++) e(t[s], s, t);
            else {
                var a = y.keys(t);
                for (s = 0, n = a.length; n > s; s++) e(t[a[s]], a[s], t)
            }
            return t
        }, y.map = y.collect = function(t, e, i) {
            e = b(e, i);
            for (var s = !I(t) && y.keys(t), n = (s || t).length, a = Array(n), o = 0; n > o; o++) {
                var r = s ? s[o] : o;
                a[o] = e(t[r], r, t)
            }
            return a
        }, y.reduce = y.foldl = y.inject = t(1), y.reduceRight = y.foldr = t(-1), y.find = y.detect = function(t, e, i) {
            var s;
            return void 0 !== (s = I(t) ? y.findIndex(t, e, i) : y.findKey(t, e, i)) && -1 !== s ? t[s] : void 0
        }, y.filter = y.select = function(t, e, i) {
            var s = [];
            return e = b(e, i), y.each(t, function(t, i, n) {
                e(t, i, n) && s.push(t)
            }), s
        }, y.reject = function(t, e, i) {
            return y.filter(t, y.negate(b(e)), i)
        }, y.every = y.all = function(t, e, i) {
            e = b(e, i);
            for (var s = !I(t) && y.keys(t), n = (s || t).length, a = 0; n > a; a++) {
                var o = s ? s[a] : a;
                if (!e(t[o], o, t)) return !1
            }
            return !0
        }, y.some = y.any = function(t, e, i) {
            e = b(e, i);
            for (var s = !I(t) && y.keys(t), n = (s || t).length, a = 0; n > a; a++) {
                var o = s ? s[a] : a;
                if (e(t[o], o, t)) return !0
            }
            return !1
        }, y.contains = y.includes = y.include = function(t, e, i, s) {
            return I(t) || (t = y.values(t)), ("number" != typeof i || s) && (i = 0), y.indexOf(t, e, i) >= 0
        }, y.invoke = function(t, e) {
            var i = c.call(arguments, 2),
                s = y.isFunction(e);
            return y.map(t, function(t) {
                var n = s ? e : t[e];
                return null == n ? n : n.apply(t, i)
            })
        }, y.pluck = function(t, e) {
            return y.map(t, y.property(e))
        }, y.where = function(t, e) {
            return y.filter(t, y.matcher(e))
        }, y.findWhere = function(t, e) {
            return y.find(t, y.matcher(e))
        }, y.max = function(t, e, i) {
            var s, n, a = -1 / 0,
                o = -1 / 0;
            if (null == e && null != t)
                for (var r = 0, h = (t = I(t) ? t : y.values(t)).length; h > r; r++)(s = t[r]) > a && (a = s);
            else e = b(e, i), y.each(t, function(t, i, s) {
                ((n = e(t, i, s)) > o || n === -1 / 0 && a === -1 / 0) && (a = t, o = n)
            });
            return a
        }, y.min = function(t, e, i) {
            var s, n, a = 1 / 0,
                o = 1 / 0;
            if (null == e && null != t)
                for (var r = 0, h = (t = I(t) ? t : y.values(t)).length; h > r; r++) s = t[r], a > s && (a = s);
            else e = b(e, i), y.each(t, function(t, i, s) {
                n = e(t, i, s), (o > n || 1 / 0 === n && 1 / 0 === a) && (a = t, o = n)
            });
            return a
        }, y.shuffle = function(t) {
            for (var e, i = I(t) ? t : y.values(t), s = i.length, n = Array(s), a = 0; s > a; a++)(e = y.random(0, a)) !== a && (n[a] = n[e]), n[e] = i[a];
            return n
        }, y.sample = function(t, e, i) {
            return null == e || i ? (I(t) || (t = y.values(t)), t[y.random(t.length - 1)]) : y.shuffle(t).slice(0, Math.max(0, e))
        }, y.sortBy = function(t, e, i) {
            return e = b(e, i), y.pluck(y.map(t, function(t, i, s) {
                return {
                    value: t,
                    index: i,
                    criteria: e(t, i, s)
                }
            }).sort(function(t, e) {
                var i = t.criteria,
                    s = e.criteria;
                if (i !== s) {
                    if (i > s || void 0 === i) return 1;
                    if (s > i || void 0 === s) return -1
                }
                return t.index - e.index
            }), "value")
        };
        var C = function(t) {
            return function(e, i, s) {
                var n = {};
                return i = b(i, s), y.each(e, function(s, a) {
                    var o = i(s, a, e);
                    t(n, s, o)
                }), n
            }
        };
        y.groupBy = C(function(t, e, i) {
            y.has(t, i) ? t[i].push(e) : t[i] = [e]
        }), y.indexBy = C(function(t, e, i) {
            t[i] = e
        }), y.countBy = C(function(t, e, i) {
            y.has(t, i) ? t[i]++ : t[i] = 1
        }), y.toArray = function(t) {
            return t ? y.isArray(t) ? c.call(t) : I(t) ? y.map(t, y.identity) : y.values(t) : []
        }, y.size = function(t) {
            return null == t ? 0 : I(t) ? t.length : y.keys(t).length
        }, y.partition = function(t, e, i) {
            e = b(e, i);
            var s = [],
                n = [];
            return y.each(t, function(t, i, a) {
                (e(t, i, a) ? s : n).push(t)
            }), [s, n]
        }, y.first = y.head = y.take = function(t, e, i) {
            return null == t ? void 0 : null == e || i ? t[0] : y.initial(t, t.length - e)
        }, y.initial = function(t, e, i) {
            return c.call(t, 0, Math.max(0, t.length - (null == e || i ? 1 : e)))
        }, y.last = function(t, e, i) {
            return null == t ? void 0 : null == e || i ? t[t.length - 1] : y.rest(t, Math.max(0, t.length - e))
        }, y.rest = y.tail = y.drop = function(t, e, i) {
            return c.call(t, null == e || i ? 1 : e)
        }, y.compact = function(t) {
            return y.filter(t, y.identity)
        };
        var x = function(t, e, i, s) {
            for (var n = [], a = 0, o = s || 0, r = A(t); r > o; o++) {
                var h = t[o];
                if (I(h) && (y.isArray(h) || y.isArguments(h))) {
                    e || (h = x(h, e, i));
                    var l = 0,
                        c = h.length;
                    for (n.length += c; c > l;) n[a++] = h[l++]
                } else i || (n[a++] = h)
            }
            return n
        };
        y.flatten = function(t, e) {
            return x(t, e, !1)
        }, y.without = function(t) {
            return y.difference(t, c.call(arguments, 1))
        }, y.uniq = y.unique = function(t, e, i, s) {
            y.isBoolean(e) || (s = i, i = e, e = !1), null != i && (i = b(i, s));
            for (var n = [], a = [], o = 0, r = A(t); r > o; o++) {
                var h = t[o],
                    l = i ? i(h, o, t) : h;
                e ? (o && a === l || n.push(h), a = l) : i ? y.contains(a, l) || (a.push(l), n.push(h)) : y.contains(n, h) || n.push(h)
            }
            return n
        }, y.union = function() {
            return y.uniq(x(arguments, !0, !0))
        }, y.intersection = function(t) {
            for (var e = [], i = arguments.length, s = 0, n = A(t); n > s; s++) {
                var a = t[s];
                if (!y.contains(e, a)) {
                    for (var o = 1; i > o && y.contains(arguments[o], a); o++);
                    o === i && e.push(a)
                }
            }
            return e
        }, y.difference = function(t) {
            var e = x(arguments, !0, !0, 1);
            return y.filter(t, function(t) {
                return !y.contains(e, t)
            })
        }, y.zip = function() {
            return y.unzip(arguments)
        }, y.unzip = function(t) {
            for (var e = t && y.max(t, A).length || 0, i = Array(e), s = 0; e > s; s++) i[s] = y.pluck(t, s);
            return i
        }, y.object = function(t, e) {
            for (var i = {}, s = 0, n = A(t); n > s; s++) e ? i[t[s]] = e[s] : i[t[s][0]] = t[s][1];
            return i
        }, y.findIndex = e(1), y.findLastIndex = e(-1), y.sortedIndex = function(t, e, i, s) {
            for (var n = (i = b(i, s, 1))(e), a = 0, o = A(t); o > a;) {
                var r = Math.floor((a + o) / 2);
                i(t[r]) < n ? a = r + 1 : o = r
            }
            return a
        }, y.indexOf = i(1, y.findIndex, y.sortedIndex), y.lastIndexOf = i(-1, y.findLastIndex), y.range = function(t, e, i) {
            null == e && (e = t || 0, t = 0), i = i || 1;
            for (var s = Math.max(Math.ceil((e - t) / i), 0), n = Array(s), a = 0; s > a; a++, t += i) n[a] = t;
            return n
        };
        var w = function(t, e, i, s, n) {
            if (!(s instanceof e)) return t.apply(i, n);
            var a = T(t.prototype),
                o = t.apply(a, n);
            return y.isObject(o) ? o : a
        };
        y.bind = function(t, e) {
            if (g && t.bind === g) return g.apply(t, c.call(arguments, 1));
            if (!y.isFunction(t)) throw new TypeError("Bind must be called on a function");
            var i = c.call(arguments, 2),
                s = function() {
                    return w(t, s, e, this, i.concat(c.call(arguments)))
                };
            return s
        }, y.partial = function(t) {
            var e = c.call(arguments, 1),
                i = function() {
                    for (var s = 0, n = e.length, a = Array(n), o = 0; n > o; o++) a[o] = e[o] === y ? arguments[s++] : e[o];
                    for (; s < arguments.length;) a.push(arguments[s++]);
                    return w(t, i, this, this, a)
                };
            return i
        }, y.bindAll = function(t) {
            var e, i, s = arguments.length;
            if (1 >= s) throw new Error("bindAll must be passed function names");
            for (e = 1; s > e; e++) i = arguments[e], t[i] = y.bind(t[i], t);
            return t
        }, y.memoize = function(t, e) {
            var i = function(s) {
                var n = i.cache,
                    a = "" + (e ? e.apply(this, arguments) : s);
                return y.has(n, a) || (n[a] = t.apply(this, arguments)), n[a]
            };
            return i.cache = {}, i
        }, y.delay = function(t, e) {
            var i = c.call(arguments, 2);
            return setTimeout(function() {
                return t.apply(null, i)
            }, e)
        }, y.defer = y.partial(y.delay, y, 1), y.throttle = function(t, e, i) {
            var s, n, a, o = null,
                r = 0;
            i || (i = {});
            var h = function() {
                r = !1 === i.leading ? 0 : y.now(), o = null, a = t.apply(s, n), o || (s = n = null)
            };
            return function() {
                var l = y.now();
                r || !1 !== i.leading || (r = l);
                var c = e - (l - r);
                return s = this, n = arguments, 0 >= c || c > e ? (o && (clearTimeout(o), o = null), r = l, a = t.apply(s, n), o || (s = n = null)) : o || !1 === i.trailing || (o = setTimeout(h, c)), a
            }
        }, y.debounce = function(t, e, i) {
            var s, n, a, o, r, h = function() {
                var l = y.now() - o;
                e > l && l >= 0 ? s = setTimeout(h, e - l) : (s = null, i || (r = t.apply(a, n), s || (a = n = null)))
            };
            return function() {
                a = this, n = arguments, o = y.now();
                var l = i && !s;
                return s || (s = setTimeout(h, e)), l && (r = t.apply(a, n), a = n = null), r
            }
        }, y.wrap = function(t, e) {
            return y.partial(e, t)
        }, y.negate = function(t) {
            return function() {
                return !t.apply(this, arguments)
            }
        }, y.compose = function() {
            var t = arguments,
                e = t.length - 1;
            return function() {
                for (var i = e, s = t[e].apply(this, arguments); i--;) s = t[i].call(this, s);
                return s
            }
        }, y.after = function(t, e) {
            return function() {
                return --t < 1 ? e.apply(this, arguments) : void 0
            }
        }, y.before = function(t, e) {
            var i;
            return function() {
                return --t > 0 && (i = e.apply(this, arguments)), 1 >= t && (e = null), i
            }
        }, y.once = y.partial(y.before, 2);
        var M = !{
                toString: null
            }.propertyIsEnumerable("toString"),
            O = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"];
        y.keys = function(t) {
            if (!y.isObject(t)) return [];
            if (m) return m(t);
            var e = [];
            for (var i in t) y.has(t, i) && e.push(i);
            return M && s(t, e), e
        }, y.allKeys = function(t) {
            if (!y.isObject(t)) return [];
            var e = [];
            for (var i in t) e.push(i);
            return M && s(t, e), e
        }, y.values = function(t) {
            for (var e = y.keys(t), i = e.length, s = Array(i), n = 0; i > n; n++) s[n] = t[e[n]];
            return s
        }, y.mapObject = function(t, e, i) {
            e = b(e, i);
            for (var s, n = y.keys(t), a = n.length, o = {}, r = 0; a > r; r++) s = n[r], o[s] = e(t[s], s, t);
            return o
        }, y.pairs = function(t) {
            for (var e = y.keys(t), i = e.length, s = Array(i), n = 0; i > n; n++) s[n] = [e[n], t[e[n]]];
            return s
        }, y.invert = function(t) {
            for (var e = {}, i = y.keys(t), s = 0, n = i.length; n > s; s++) e[t[i[s]]] = i[s];
            return e
        }, y.functions = y.methods = function(t) {
            var e = [];
            for (var i in t) y.isFunction(t[i]) && e.push(i);
            return e.sort()
        }, y.extend = S(y.allKeys), y.extendOwn = y.assign = S(y.keys), y.findKey = function(t, e, i) {
            e = b(e, i);
            for (var s, n = y.keys(t), a = 0, o = n.length; o > a; a++)
                if (s = n[a], e(t[s], s, t)) return s
        }, y.pick = function(t, e, i) {
            var s, n, a = {},
                o = t;
            if (null == o) return a;
            y.isFunction(e) ? (n = y.allKeys(o), s = v(e, i)) : (n = x(arguments, !1, !1, 1), s = function(t, e, i) {
                return e in i
            }, o = Object(o));
            for (var r = 0, h = n.length; h > r; r++) {
                var l = n[r],
                    c = o[l];
                s(c, l, o) && (a[l] = c)
            }
            return a
        }, y.omit = function(t, e, i) {
            if (y.isFunction(e)) e = y.negate(e);
            else {
                var s = y.map(x(arguments, !1, !1, 1), String);
                e = function(t, e) {
                    return !y.contains(s, e)
                }
            }
            return y.pick(t, e, i)
        }, y.defaults = S(y.allKeys, !0), y.create = function(t, e) {
            var i = T(t);
            return e && y.extendOwn(i, e), i
        }, y.clone = function(t) {
            return y.isObject(t) ? y.isArray(t) ? t.slice() : y.extend({}, t) : t
        }, y.tap = function(t, e) {
            return e(t), t
        }, y.isMatch = function(t, e) {
            var i = y.keys(e),
                s = i.length;
            if (null == t) return !s;
            for (var n = Object(t), a = 0; s > a; a++) {
                var o = i[a];
                if (e[o] !== n[o] || !(o in n)) return !1
            }
            return !0
        };
        var L = function(t, e, i, s) {
            if (t === e) return 0 !== t || 1 / t == 1 / e;
            if (null == t || null == e) return t === e;
            t instanceof y && (t = t._wrapped), e instanceof y && (e = e._wrapped);
            var n = u.call(t);
            if (n !== u.call(e)) return !1;
            switch (n) {
                case "[object RegExp]":
                case "[object String]":
                    return "" + t == "" + e;
                case "[object Number]":
                    return +t != +t ? +e != +e : 0 == +t ? 1 / +t == 1 / e : +t == +e;
                case "[object Date]":
                case "[object Boolean]":
                    return +t == +e
            }
            var a = "[object Array]" === n;
            if (!a) {
                if ("object" != typeof t || "object" != typeof e) return !1;
                var o = t.constructor,
                    r = e.constructor;
                if (o !== r && !(y.isFunction(o) && o instanceof o && y.isFunction(r) && r instanceof r) && "constructor" in t && "constructor" in e) return !1
            }
            i = i || [], s = s || [];
            for (var h = i.length; h--;)
                if (i[h] === t) return s[h] === e;
            if (i.push(t), s.push(e), a) {
                if ((h = t.length) !== e.length) return !1;
                for (; h--;)
                    if (!L(t[h], e[h], i, s)) return !1
            } else {
                var l, c = y.keys(t);
                if (h = c.length, y.keys(e).length !== h) return !1;
                for (; h--;)
                    if (l = c[h], !y.has(e, l) || !L(t[l], e[l], i, s)) return !1
            }
            return i.pop(), s.pop(), !0
        };
        y.isEqual = function(t, e) {
            return L(t, e)
        }, y.isEmpty = function(t) {
            return null == t || (I(t) && (y.isArray(t) || y.isString(t) || y.isArguments(t)) ? 0 === t.length : 0 === y.keys(t).length)
        }, y.isElement = function(t) {
            return !(!t || 1 !== t.nodeType)
        }, y.isArray = p || function(t) {
            return "[object Array]" === u.call(t)
        }, y.isObject = function(t) {
            var e = typeof t;
            return "function" === e || "object" === e && !!t
        }, y.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error"], function(t) {
            y["is" + t] = function(e) {
                return u.call(e) === "[object " + t + "]"
            }
        }), y.isArguments(arguments) || (y.isArguments = function(t) {
            return y.has(t, "callee")
        }), "function" != typeof / . / && "object" != typeof Int8Array && (y.isFunction = function(t) {
            return "function" == typeof t || !1
        }), y.isFinite = function(t) {
            return isFinite(t) && !isNaN(parseFloat(t))
        }, y.isNaN = function(t) {
            return y.isNumber(t) && t !== +t
        }, y.isBoolean = function(t) {
            return !0 === t || !1 === t || "[object Boolean]" === u.call(t)
        }, y.isNull = function(t) {
            return null === t
        }, y.isUndefined = function(t) {
            return void 0 === t
        }, y.has = function(t, e) {
            return null != t && d.call(t, e)
        }, y.noConflict = function() {
            return n._ = a, this
        }, y.identity = function(t) {
            return t
        }, y.constant = function(t) {
            return function() {
                return t
            }
        }, y.noop = function() {}, y.property = E, y.propertyOf = function(t) {
            return null == t ? function() {} : function(e) {
                return t[e]
            }
        }, y.matcher = y.matches = function(t) {
            return t = y.extendOwn({}, t),
                function(e) {
                    return y.isMatch(e, t)
                }
        }, y.times = function(t, e, i) {
            var s = Array(Math.max(0, t));
            e = v(e, i, 1);
            for (var n = 0; t > n; n++) s[n] = e(n);
            return s
        }, y.random = function(t, e) {
            return null == e && (e = t, t = 0), t + Math.floor(Math.random() * (e - t + 1))
        }, y.now = Date.now || function() {
            return (new Date).getTime()
        };
        var N = {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;",
                "`": "&#x60;"
            },
            k = y.invert(N),
            R = function(t) {
                var e = function(e) {
                        return t[e]
                    },
                    i = "(?:" + y.keys(t).join("|") + ")",
                    s = RegExp(i),
                    n = RegExp(i, "g");
                return function(t) {
                    return t = null == t ? "" : "" + t, s.test(t) ? t.replace(n, e) : t
                }
            };
        y.escape = R(N), y.unescape = R(k), y.result = function(t, e, i) {
            var s = null == t ? void 0 : t[e];
            return void 0 === s && (s = i), y.isFunction(s) ? s.call(t) : s
        };
        var D = 0;
        y.uniqueId = function(t) {
            var e = ++D + "";
            return t ? t + e : e
        }, y.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var G = /(.)^/,
            B = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            F = /\\|'|\r|\n|\u2028|\u2029/g,
            U = function(t) {
                return "\\" + B[t]
            };
        y.template = function(t, e, i) {
            !e && i && (e = i), e = y.defaults({}, e, y.templateSettings);
            var s = RegExp([(e.escape || G).source, (e.interpolate || G).source, (e.evaluate || G).source].join("|") + "|$", "g"),
                n = 0,
                a = "__p+='";
            t.replace(s, function(e, i, s, o, r) {
                return a += t.slice(n, r).replace(F, U), n = r + e.length, i ? a += "'+\n((__t=(" + i + "))==null?'':_.escape(__t))+\n'" : s ? a += "'+\n((__t=(" + s + "))==null?'':__t)+\n'" : o && (a += "';\n" + o + "\n__p+='"), e
            }), a += "';\n", e.variable || (a = "with(obj||{}){\n" + a + "}\n"), a = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n";
            try {
                var o = new Function(e.variable || "obj", "_", a)
            } catch (t) {
                throw t.source = a, t
            }
            var r = function(t) {
                    return o.call(this, t, y)
                },
                h = e.variable || "obj";
            return r.source = "function(" + h + "){\n" + a + "}", r
        }, y.chain = function(t) {
            var e = y(t);
            return e._chain = !0, e
        };
        var H = function(t, e) {
            return t._chain ? y(e).chain() : e
        };
        y.mixin = function(t) {
            y.each(y.functions(t), function(e) {
                var i = y[e] = t[e];
                y.prototype[e] = function() {
                    var t = [this._wrapped];
                    return l.apply(t, arguments), H(this, i.apply(y, t))
                }
            })
        }, y.mixin(y), y.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(t) {
            var e = o[t];
            y.prototype[t] = function() {
                var i = this._wrapped;
                return e.apply(i, arguments), "shift" !== t && "splice" !== t || 0 !== i.length || delete i[0], H(this, i)
            }
        }), y.each(["concat", "join", "slice"], function(t) {
            var e = o[t];
            y.prototype[t] = function() {
                return H(this, e.apply(this._wrapped, arguments))
            }
        }), y.prototype.value = function() {
            return this._wrapped
        }, y.prototype.valueOf = y.prototype.toJSON = y.prototype.value, y.prototype.toString = function() {
            return "" + this._wrapped
        }, "function" == typeof define && define.amd && define("underscore", [], function() {
            return y
        })
    }.call(this),
    function(t) {
        if ("object" == typeof module && "object" == typeof module.exports) module.exports = t();
        else if ("function" == typeof define && define.amd) define([], t);
        else {
            var e = t();
            window.astar = e.astar, window.Graph = e.Graph
        }
    }(function() {
        function t(t) {
            for (var e = t, i = []; e.parent;) i.unshift(e), e = e.parent;
            return i
        }

        function e() {
            return new n(function(t) {
                return t.f
            })
        }

        function i(t, e) {
            e = e || {}, this.nodes = [], this.diagonal = !!e.diagonal, this.grid = [];
            for (var i = 0; i < t.length; i++) {
                this.grid[i] = [];
                for (var n = 0, a = t[i]; n < a.length; n++) {
                    var o = new s(i, n, a[n]);
                    this.grid[i][n] = o, this.nodes.push(o)
                }
            }
            this.init()
        }

        function s(t, e, i) {
            this.x = t, this.y = e, this.weight = i
        }

        function n(t) {
            this.content = [], this.scoreFunction = t
        }
        var a = {
            search: function(i, s, n, o) {
                i.cleanDirty();
                var r = (o = o || {}).heuristic || a.heuristics.manhattan,
                    h = o.closest || !1,
                    l = e(),
                    c = s;
                for (s.h = r(s, n), i.markDirty(s), l.push(s); l.size() > 0;) {
                    var u = l.pop();
                    if (u === n) return t(u);
                    u.closed = !0;
                    for (var d = i.neighbors(u), p = 0, m = d.length; p < m; ++p) {
                        var g = d[p];
                        if (!g.closed && !g.isWall()) {
                            var f = u.g + g.getCost(u),
                                _ = g.visited;
                            (!_ || f < g.g) && (g.visited = !0, g.parent = u, g.h = g.h || r(g, n), g.g = f, g.f = g.g + g.h, i.markDirty(g), h && (g.h < c.h || g.h === c.h && g.g < c.g) && (c = g), _ ? l.rescoreElement(g) : l.push(g))
                        }
                    }
                }
                return h ? t(c) : []
            },
            heuristics: {
                manhattan: function(t, e) {
                    return Math.abs(e.x - t.x) + Math.abs(e.y - t.y)
                },
                diagonal: function(t, e) {
                    var i = Math.sqrt(2),
                        s = Math.abs(e.x - t.x),
                        n = Math.abs(e.y - t.y);
                    return 1 * (s + n) + (i - 2) * Math.min(s, n)
                }
            },
            cleanNode: function(t) {
                t.f = 0, t.g = 0, t.h = 0, t.visited = !1, t.closed = !1, t.parent = null
            }
        };
        return i.prototype.init = function() {
            this.dirtyNodes = [];
            for (var t = 0; t < this.nodes.length; t++) a.cleanNode(this.nodes[t])
        }, i.prototype.cleanDirty = function() {
            for (var t = 0; t < this.dirtyNodes.length; t++) a.cleanNode(this.dirtyNodes[t]);
            this.dirtyNodes = []
        }, i.prototype.markDirty = function(t) {
            this.dirtyNodes.push(t)
        }, i.prototype.neighbors = function(t) {
            var e = [],
                i = t.x,
                s = t.y,
                n = this.grid;
            return n[i - 1] && n[i - 1][s] && e.push(n[i - 1][s]), n[i + 1] && n[i + 1][s] && e.push(n[i + 1][s]), n[i] && n[i][s - 1] && e.push(n[i][s - 1]), n[i] && n[i][s + 1] && e.push(n[i][s + 1]), this.diagonal && (n[i - 1] && n[i - 1][s - 1] && e.push(n[i - 1][s - 1]), n[i + 1] && n[i + 1][s - 1] && e.push(n[i + 1][s - 1]), n[i - 1] && n[i - 1][s + 1] && e.push(n[i - 1][s + 1]), n[i + 1] && n[i + 1][s + 1] && e.push(n[i + 1][s + 1])), e
        }, i.prototype.toString = function() {
            for (var t = [], e = this.grid, i = 0; i < e.length; i++) {
                for (var s = [], n = e[i], a = 0; a < n.length; a++) s.push(n[a].weight);
                t.push(s.join(" "))
            }
            return t.join("\n")
        }, s.prototype.toString = function() {
            return "[" + this.x + " " + this.y + "]"
        }, s.prototype.getCost = function(t) {
            return t && t.x != this.x && t.y != this.y ? 1.41421 * this.weight : this.weight
        }, s.prototype.isWall = function() {
            return 0 === this.weight
        }, n.prototype = {
            push: function(t) {
                this.content.push(t), this.sinkDown(this.content.length - 1)
            },
            pop: function() {
                var t = this.content[0],
                    e = this.content.pop();
                return this.content.length > 0 && (this.content[0] = e, this.bubbleUp(0)), t
            },
            remove: function(t) {
                var e = this.content.indexOf(t),
                    i = this.content.pop();
                e !== this.content.length - 1 && (this.content[e] = i, this.scoreFunction(i) < this.scoreFunction(t) ? this.sinkDown(e) : this.bubbleUp(e))
            },
            size: function() {
                return this.content.length
            },
            rescoreElement: function(t) {
                this.sinkDown(this.content.indexOf(t))
            },
            sinkDown: function(t) {
                for (var e = this.content[t]; t > 0;) {
                    var i = (t + 1 >> 1) - 1,
                        s = this.content[i];
                    if (!(this.scoreFunction(e) < this.scoreFunction(s))) break;
                    this.content[i] = e, this.content[t] = s, t = i
                }
            },
            bubbleUp: function(t) {
                for (var e = this.content.length, i = this.content[t], s = this.scoreFunction(i);;) {
                    var n, a = t + 1 << 1,
                        o = a - 1,
                        r = null;
                    if (o < e) {
                        var h = this.content[o];
                        (n = this.scoreFunction(h)) < s && (r = o)
                    }
                    if (a < e) {
                        var l = this.content[a];
                        this.scoreFunction(l) < (null === r ? s : n) && (r = a)
                    }
                    if (null === r) break;
                    this.content[t] = this.content[r], this.content[r] = i, t = r
                }
            }
        }, {
            astar: a,
            Graph: i
        }
    });
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Ph2;
! function(t) {
    var e = function() {
        function t(t) {
            this.game = t, this.musicEnabled = !0, this.sfxEnabled = !0, this.playingMusic = !1, this.game.onPause.add(this.gamePaused, this), this.game.onResume.add(this.gameResumed, this)
        }
        return t.prototype.setAudioEffectsFile = function(t) {
            this.soundsFile = t
        }, t.prototype.playEffect = function(t, e) {
            if (!this.sfxEnabled) return null;
            var i = null;
            return e ? this.loopSoundExist(t) || (i = this.soundsFile.play(t), this.loopingSounds[t] = i) : i = this.soundsFile.play(t), i
        }, t.prototype.stopEffect = function(t) {
            this.sfxEnabled && this.soundsFile.stop(t)
        }, t.prototype.pauseEffect = function(t) {
            this.soundsFile.pause(t)
        }, t.prototype.pauseLoopEffect = function(t) {
            var e = this.loopingSounds[t];
            e && this.soundsFile.pause(e)
        }, t.prototype.resumeEffect = function(t) {
            this.sfxEnabled && this.soundsFile.play(t)
        }, t.prototype.resumeLoopEffect = function(t) {
            if (this.sfxEnabled) {
                var e = this.loopingSounds[t];
                e && this.soundsFile.play(e)
            }
        }, t.prototype.stopAllLoopEffects = function() {
            for (var t in this.loopingSounds) this.loopingSounds.hasOwnProperty(t) && this.soundsFile.stop(t);
            this.loopingSounds = {}
        }, t.prototype.pauseAllLoopEffects = function() {
            for (var t in this.loopingSounds) this.loopingSounds.hasOwnProperty(t) && this.soundsFile.pause(t)
        }, t.prototype.resumeAllLoopEffects = function() {
            for (var t in this.loopingSounds) this.loopingSounds.hasOwnProperty(t) && this.soundsFile.play(t)
        }, t.prototype.stopLoopEffect = function(t) {
            this.loopingSounds[t] && this.soundsFile.stop(this.loopingSounds[t]), delete this.loopingSounds[t]
        }, t.prototype.switchMusicState = function() {
            this.musicEnabled = !this.musicEnabled
        }, t.prototype.switchSfxState = function() {
            this.sfxEnabled = !this.sfxEnabled
        }, t.prototype.playMusic = function(t) {
            this.musicEnabled && (this.selectMusic(t), this.musicFile && (this.musicFile.play(), this.playingMusic = !0))
        }, t.prototype.pauseMusic = function() {
            this.playingMusic && this.musicFile && (this.musicFile.pause(), this.playingMusic = !1)
        }, t.prototype.stopMusic = function() {
            this.musicFile && (this.musicFile.stop(), this.playingMusic = !1, this.musicFile = null)
        }, t.prototype.resumeMusic = function() {
            this.musicFile && !this.playingMusic && this.musicEnabled && (this.musicFile.play(), this.playingMusic = !0)
        }, t.prototype.selectMusic = function(t) {
            this.musicFile && this.stopMusic(), this.musicFile = t
        }, t.prototype.switchMusic = function(t) {
            this.musicFile && this.musicFile._src == t._src || this.playMusic(t)
        }, t.prototype.fadeCurrentMusic = function(t, e, i) {
            this.musicEnabled && this.musicFile && this.playingMusic && this.musicFile.fade(t, e, i)
        }, t.prototype.setVolumeCurrentMusic = function(t) {
            this.musicEnabled && this.musicFile && this.playingMusic && this.musicFile.volume(t)
        }, t.prototype.getMusicEnabled = function() {
            return this.musicEnabled
        }, t.prototype.getSfxEnabled = function() {
            return this.sfxEnabled
        }, t.prototype.isPlayingMusic = function() {
            return this.playingMusic
        }, t.prototype.mute = function() {
            this.gamePaused()
        }, t.prototype.unmute = function() {
            this.gameResumed()
        }, t.prototype.loopSoundExist = function(t) {
            return this.loopingSounds[t]
        }, t.prototype.gamePaused = function() {
            this.musicFile && this.musicFile.mute(!0), this.soundsFile && this.soundsFile.mute(!0)
        }, t.prototype.gameResumed = function() {
            this.musicFile && this.musicFile.mute(!1), this.soundsFile && this.soundsFile.mute(!1)
        }, t
    }();
    t.AudioManager = e
}(Ph2 || (Ph2 = {}));
var Ph2;
! function(t) {
    var e = function(e) {
        function i(t, i) {
            var s = e.call(this, t, i) || this;
            return s.addAudioManager(), s
        }
        return __extends(i, e), i.prototype.addAudioManager = function() {
            Phaser.Game.prototype.ph2AudioManager = new t.AudioManager(this.game)
        }, i
    }(Phaser.Plugin);
    t.AudioPlugin = e
}(Ph2 || (Ph2 = {})),
function() {
    "use strict";
    var t, e, i = function(t, e) {
            function i() {
                this.constructor = t
            }
            for (var n in e) s.call(e, n) && (t[n] = e[n]);
            return i.prototype = e.prototype, t.prototype = new i, t.__super__ = e.prototype, t
        },
        s = {}.hasOwnProperty;
    t = this.Phaser, e = Number.isFinite, t.Plugin.AdvancedTiming = function(s) {
        function n() {
            return n.__super__.constructor.apply(this, arguments)
        }
        return i(n, s), n.MODE_GRAPH = "graph", n.MODE_METER = "meter", n.MODE_TEXT = "text", n.MODE_DEFAULT = n.MODE_TEXT, n.colors = {
            AQUA: "#7FDBFF",
            BLUE: "#0074D9",
            GRAY: "#666666",
            GREEN: "#2ECC40",
            LIME: "#01FF70",
            NAVY: "#001F3F",
            ORANGE: "#FF851B",
            PURPLE: "#B10DC9",
            RED: "#FF4136",
            WHITE: "#FFFFFF",
            YELLOW: "#FFDC00"
        }, n.hexColors = {
            AQUA: 8379391,
            BLUE: 29913,
            GRAY: 6710886,
            GREEN: 3066944,
            LIME: 130928,
            YELLOW: 16768e3
        }, n.modes = [n.MODE_DEFAULT, n.MODE_GRAPH, n.MODE_METER, n.MODE_TEXT], n.renderTypes = [null, "CANVAS", "WEBGL", "HEADLESS"], n.prototype.alpha = .75, n.prototype.enableResumeHandler = !0, n.prototype._mode = null, Object.defineProperty(n.prototype, "mode", {
            get: function() {
                return this._mode
            },
            set: function(t) {
                if (t === this._mode) return this._mode;
                switch (t) {
                    case this.constructor.MODE_GRAPH:
                    case this.constructor.MODE_METER:
                    case this.constructor.MODE_TEXT:
                        this._mode = t, this.add(), this.activeDisplay = this.display[this._mode];
                        break;
                    default:
                        throw new Error("No such mode: '" + t + "'")
                }
                return this.refresh(), this._mode
            }
        }), n.prototype.name = "Advanced Timing Plugin", n.prototype.init = function(e) {
            var i, s;
            (i = this.game).time.advancedTiming = !0, this.group = i.make.group(null, "advancedTimingPlugin", !0), this.position = new t.Point, this.renderType = this.constructor.renderTypes[i.renderType], this.reset(), i.onResume.add(this.onResume, this), i.debug.gameInfo = this.debugGameInfo.bind(this), i.debug.gameTimeInfo = this.debugGameTimeInfo.bind(this), this.display = {}, e && (s = e.mode, delete e.mode, t.Utils.extend(this, e)), this.mode = s || this.constructor.MODE_DEFAULT
        }, n.prototype.update = function() {
            this.group.visible = this.visible, this.visible && (this.graphGroup && this.graphGroup.visible && this.updateGraph(), this.meters && this.meters.visible && this.updateMeters(), this.text && this.text.visible && this.updateText())
        }, n.prototype.destroy = function() {
            n.__super__.destroy.apply(this, arguments), this.graph.destroy(), this.group.destroy()
        }, n.prototype.add = function() {
            switch (this._mode) {
                case this.constructor.MODE_GRAPH:
                    this.graphGroup || this.addGraph();
                    break;
                case this.constructor.MODE_METER:
                    this.meters || this.addMeters();
                    break;
                case this.constructor.MODE_TEXT:
                    this.text || this.addText();
                    break;
                default:
                    throw new Error("Nothing to add (bad mode: " + this._mode + ")")
            }
        }, n.prototype.addGraph = function(t, e) {
            var i, s, n, a, o, r, h;
            null == t && (t = this.position.x), null == e && (e = this.position.y), i = this.game.time.desiredFps, s = this.desiredMs(), r = {
                fill: "white",
                font: "10px monospace"
            }, this.graphGroup = this.game.add.group(this.group, "advancedTimingPluginGraphGroup"), this.graphGroup.x = t, this.graphGroup.y = e, this.graph = this.game.make.bitmapData(60, 60, "advancedTimingPluginGraph"), this.graph.fill(0, 0, 0), this.graphX = 0, this.graphImage = this.game.add.image(0, 0, this.graph, null, this.graphGroup), this.graphImage.alpha = this.alpha, this.graphImage.scale.set(2), this.graphImage.smoothed = !1, h = (a = this.graphImage).width, n = a.height, o = this.graphImage.scale.y, this.game.add.text(h, n - o * i, i + " fps", r, this.graphGroup), this.game.add.text(h, n - o * s, s + " ms", r, this.graphGroup), this.display[this.constructor.MODE_GRAPH] = this.graphGroup
        }, n.prototype.addMeters = function(e, i) {
            var s, n;
            null == e && (e = this.position.x), null == i && (i = this.position.y), n = this.constructor.hexColors, s = this.game.make.bitmapData(1, 1).fill(255, 255, 255), this.meters = this.game.add.group(this.group, "advancedTimingPluginMeters"), this.meters.alpha = this.alpha, this.meters.classType = t.Image, this.meters.x = e, this.meters.y = i, this.desiredFpsMeter = this.meters.create(0, 0, s), this.desiredFpsMeter.height = 10, this.desiredFpsMeter.tint = n.GRAY, this.fpsMeter = this.meters.create(0, 0, s), this.fpsMeter.height = 10, this.fpsMeter.tint = n.BLUE, this.desiredMsMeter = this.meters.create(0, 10, s), this.desiredMsMeter.height = 10, this.desiredMsMeter.tint = n.GRAY, this.elapsedMeter = this.meters.create(0, 10, s), this.elapsedMeter.height = 10, this.elapsedMeter.tint = n.GREEN, this.msMeter = this.meters.create(0, 10, s), this.msMeter.height = 10, this.msMeter.tint = n.YELLOW, this.display[this.constructor.MODE_METER] = this.meters
        }, n.prototype.addText = function(t, e) {
            null == t && (t = this.position.x), null == e && (e = this.position.y), this.text = this.game.add.text(t, e, null, {
                fill: this.constructor.colors.WHITE,
                font: this.game.debug.font
            }, this.group), this.text.name = "advancedTimingPluginText", this.display[this.constructor.MODE_TEXT] = this.text
        }, n.prototype.debugGameInfo = function(t, e, i) {
            var s, n;
            (s = (n = this.game).debug).start(t, e, i), s.line("renderType:         " + this.renderType), s.line("lockRender:         " + n.lockRender), s.line("forceSingleUpdate:  " + n.forceSingleUpdate), s.line("updatesThisFrame:   " + n.updatesThisFrame), s.line("lastCount:          " + n._lastCount), s.line("spiraling:          " + n._spiraling), s.stop()
        }, n.prototype.debugGameTimeInfo = function(t, e, i) {
            var s, n, a;
            s = (n = this.game).debug, a = n.time, s.start(t, e, i), s.line("fps:                " + a.fps + " " + this.fpsRangeStr()), s.line("desiredFps:         " + a.desiredFps), s.line("suggestedFps:       " + a.suggestedFps), s.line("elapsed:            " + a.elapsed + " ms " + this.elapsedRangeStr()), s.line("elapsedMS:          " + a.elapsedMS + " ms"), s.line("physicsElapsedMS:   " + a.physicsElapsedMS.toFixed(2) + " ms"), s.line("slowMotion:         " + a.slowMotion), s.stop()
        }, n.prototype.desiredMs = function() {
            return Math.ceil(1e3 / this.game.time.desiredFps)
        }, n.prototype.elapsedRange = function() {
            return this.game.time.msMax - this.game.time.msMin
        }, n.prototype.elapsedRangeStr = function() {
            var t, i, s;
            return s = this.game.time, t = s.msMax, i = s.msMin, e(t) && e(i) ? "(" + i + "–" + t + ")" : ""
        }, n.prototype.fpsColor = function(t) {
            var e, i;
            switch (null == t && (t = this.game.time.fps), i = this.game.time.desiredFps, e = this.constructor.colors, !1) {
                case !(t < i / 2):
                    return e.ORANGE;
                case !(t < i):
                    return e.YELLOW;
                default:
                    return e.WHITE
            }
        }, n.prototype.fpsRange = function() {
            return this.game.time.fpsMax - this.game.time.fpsMin
        }, n.prototype.fpsRangeStr = function() {
            var t, i, s;
            return s = this.game.time, t = s.fpsMax, i = s.fpsMin, e(t) && e(i) ? "(" + i + "–" + t + ")" : ""
        }, n.prototype.onResume = function() {
            this.reset()
        }, n.prototype.refresh = function() {
            var t, e;
            e = this.display;
            for (t in e) e[t].visible = t === this._mode
        }, n.prototype.reset = function(t, e, i, s) {
            var n;
            null == t && (t = 1 / 0), null == e && (e = 0), null == i && (i = 1 / 0), null == s && (s = 0), (n = this.game.time).fpsMin = t, n.fpsMax = e, n.msMin = i, n.msMax = s
        }, n.prototype.resetElapsed = function() {
            var t;
            (t = this.game.time).elapsed = t.now - t.prevTime
        }, n.prototype.updateGraph = function() {
            var t, e, i, s, n, a, o, r, h, l, c, u;
            n = (l = this.game).forceSingleUpdate, t = l._spiraling, u = l.updatesThisFrame, i = (c = this.game.time).elapsed, s = c.elapsedMS, a = c.fps, o = this.graph, r = this.graphX, e = this.constructor.colors, h = o.height, o.dirty = !0, o.rect(r, 0, 1, h, "black"), a <= h && o.rect(r, h - a, 1, 1, e.BLUE), i <= h && o.rect(r, h - i, 1, 1, e.GREEN), i !== s && i <= h && o.rect(r, h - s, 1, 1, e.YELLOW), n || o.rect(r, h - u, 1, 1, e.NAVY), t > 0 && o.rect(r, h - t, 1, 1, e.RED), this.graphX += 1, this.graphX %= o.width
        }, n.prototype.updateMeters = function() {
            var t, e, i, s, n;
            t = (n = this.game.time).desiredFps, e = n.elapsed, i = n.elapsedMS, s = n.fps, this.desiredFpsMeter.scale.x = t, this.fpsMeter.scale.x = s, this.desiredMsMeter.scale.x = this.desiredMs(), this.msMeter.scale.x = i, this.elapsedMeter.scale.x = e
        }, n.prototype.updateText = function() {
            var t;
            t = this.game.time.fps, this.text.text = t + " fps " + this.renderType, this.text.style.fill = this.fpsColor(t)
        }, n
    }(t.Plugin)
}.call(this), Phaser.VirtualJoystick = function(t, e) {
    Phaser.Plugin.call(this, t, e), this.sticks = null, this.buttons = null, this._pointerTotal = 0
}, Phaser.VirtualJoystick.prototype = Object.create(Phaser.Plugin.prototype), Phaser.VirtualJoystick.prototype.constructor = Phaser.VirtualJoystick, Phaser.VirtualJoystick.NONE = 0, Phaser.VirtualJoystick.HORIZONTAL = 1, Phaser.VirtualJoystick.VERTICAL = 2, Phaser.VirtualJoystick.CIRC_BUTTON = 0, Phaser.VirtualJoystick.RECT_BUTTON = 1, Phaser.VirtualJoystick.prototype.init = function() {
    this.sticks = new Phaser.ArraySet, this.buttons = new Phaser.ArraySet
}, Phaser.VirtualJoystick.prototype.addStick = function(t, e, i, s, n, a) {
    void 0 === n && (n = "base"), void 0 === a && (a = "stick");
    var o = new Phaser.VirtualJoystick.Stick(this, t, e, i, s, n, a);
    return this.sticks.add(o), ++this._pointerTotal > 2 && this.game.input.addPointer(), o
}, Phaser.VirtualJoystick.prototype.addDPad = function(t, e, i, s, n, a, o, r, h) {
    void 0 === n && (n = "neutral"), void 0 === a && (a = "up"), void 0 === o && (o = "down"), void 0 === r && (r = "left"), void 0 === h && (h = "right");
    var l = new Phaser.VirtualJoystick.DPad(this, t, e, i, s, n, a, o, r, h);
    return this.sticks.add(l), ++this._pointerTotal > 2 && this.game.input.addPointer(), l
}, Phaser.VirtualJoystick.prototype.removeStick = function(t) {
    this.sticks.remove(t), t.destroy()
}, Phaser.VirtualJoystick.prototype.addButton = function(t, e, i, s, n, a) {
    void 0 === a && (a = Phaser.VirtualJoystick.CIRC_BUTTON);
    var o = new Phaser.VirtualJoystick.Button(this, a, t, e, i, s, n);
    return this.buttons.add(o), ++this._pointerTotal > 2 && this.game.input.addPointer(), o
}, Phaser.VirtualJoystick.prototype.removeButton = function(t) {
    this.buttons.remove(t), t.destroy()
}, Phaser.VirtualJoystick.prototype.update = function() {
    this.sticks.callAll("update"), this.buttons.callAll("update")
}, Phaser.VirtualJoystick.prototype.destroy = function() {
    this.sticks.removeAll(!0), this.buttons.removeAll(!0)
}, Phaser.VirtualJoystick.Stick = function(t, e, i, s, n, a, o) {
    this.pad = t, this.baseFrame = a, this.stickFrame = o, this.position = new Phaser.Point(e, i), this.line = new Phaser.Line(this.position.x, this.position.y, this.position.x, this.position.y), this.baseSprite = this.pad.game.make.sprite(this.position.x, this.position.y, n, a), this.baseSprite.anchor.set(.5), this.stickSprite = this.pad.game.make.sprite(this.position.x, this.position.y, n, o), this.stickSprite.anchor.set(.5), this.baseHitArea = new Phaser.Circle(this.position.x, this.position.y, s), this.stickHitArea = new Phaser.Circle(this.position.x, this.position.y, this.stickSprite.width), this.limitPoint = new Phaser.Point, this.pointer = null, this.enabled = !0, this.isDown = !1, this.isUp = !0, this.onDown = new Phaser.Signal, this.onUp = new Phaser.Signal, this.onMove = new Phaser.Signal, this.onUpdate = new Phaser.Signal, this.timeDown = 0, this.timeUp = 0, this.angle = 0, this.angleFull = 0, this.quadrant = 0, this.octant = 0, this.motionLock = Phaser.VirtualJoystick.NONE, this._distance = s, this._deadZone = .15 * s, this._scale = 1, this._tracking = !1, this._showOnTouch = !1, this.pad.game.stage.addChild(this.baseSprite), this.pad.game.stage.addChild(this.stickSprite), this.pad.game.input.onDown.add(this.checkDown, this), this.pad.game.input.onUp.add(this.checkUp, this), this.pad.game.input.addMoveCallback(this.moveStick, this)
}, Phaser.VirtualJoystick.Stick.prototype = {
    checkDown: function(t) {
        this.enabled && this.isUp && (this.pointer = t, this.motionLock === Phaser.VirtualJoystick.NONE ? this.line.end.copyFrom(this.pointer) : this.motionLock === Phaser.VirtualJoystick.HORIZONTAL ? this.line.end.x = this.pointer.x : this.motionLock === Phaser.VirtualJoystick.VERTICAL && (this.line.end.y = this.pointer.y), this._showOnTouch ? (this.line.start.copyFrom(t), this.posX = t.x, this.posY = t.y, this.visible = !0, this.setDown()) : this.stickHitArea.contains(t.x, t.y) && (this.line.length <= this.deadZone ? this._tracking = !0 : (this.setDown(), this.moveStick())))
    },
    checkUp: function(t) {
        t === this.pointer && (this.pointer = null, this.stickHitArea.x = this.position.x, this.stickHitArea.y = this.position.y, this.stickSprite.x = this.stickHitArea.x, this.stickSprite.y = this.stickHitArea.y, this.line.end.copyFrom(this.line.start), this.isDown = !1, this.isUp = !0, this.timeUp = this.pad.game.time.time, this.onUp.dispatch(this, t), this._showOnTouch && (this.visible = !1))
    },
    setDown: function() {
        this.isDown = !0, this.isUp = !1, this.timeDown = this.pad.game.time.time, this.timeUp = 0, this._tracking = !1, this.checkArea(), this.onDown.dispatch(this, this.pointer)
    },
    checkArea: function() {
        this.angle = this.pad.game.math.radToDeg(this.line.angle), this.angleFull = this.angle, this.angleFull < 0 && (this.angleFull += 360), this.octant = 45 * Math.round(this.angleFull / 45), this.angleFull >= 45 && this.angleFull < 135 ? this.quadrant = 1 : this.angleFull >= 135 && this.angleFull < 225 ? this.quadrant = 2 : this.angleFull >= 225 && this.angleFull < 315 ? this.quadrant = 3 : this.quadrant = 0
    },
    moveStick: function() {
        this.pointer && (this.isDown || this._tracking) && (this.motionLock === Phaser.VirtualJoystick.NONE ? this.line.end.copyFrom(this.pointer) : this.motionLock === Phaser.VirtualJoystick.HORIZONTAL ? this.line.end.x = this.pointer.x : this.motionLock === Phaser.VirtualJoystick.VERTICAL && (this.line.end.y = this.pointer.y), this.checkArea(), !this.isDown && this.line.length <= this.deadZone || (this._tracking && this.setDown(), this.line.length < this.baseHitArea.radius ? this.motionLock === Phaser.VirtualJoystick.NONE ? (this.stickHitArea.x = this.pointer.x, this.stickHitArea.y = this.pointer.y) : this.motionLock === Phaser.VirtualJoystick.HORIZONTAL ? this.stickHitArea.x = this.pointer.x : this.motionLock === Phaser.VirtualJoystick.VERTICAL && (this.stickHitArea.y = this.pointer.y) : (this.baseHitArea.circumferencePoint(this.line.angle, !1, this.limitPoint), this.motionLock === Phaser.VirtualJoystick.NONE ? (this.stickHitArea.x = this.limitPoint.x, this.stickHitArea.y = this.limitPoint.y) : this.motionLock === Phaser.VirtualJoystick.HORIZONTAL ? this.stickHitArea.x = this.limitPoint.x : this.motionLock === Phaser.VirtualJoystick.VERTICAL && (this.stickHitArea.y = this.limitPoint.y)), this.stickSprite.x = this.stickHitArea.x, this.stickSprite.y = this.stickHitArea.y, this.onMove.dispatch(this, this.force, this.forceX, this.forceY)))
    },
    update: function() {
        this.isDown && !this._tracking && this.onUpdate.dispatch(this, this.force, this.forceX, this.forceY)
    },
    alignBottomLeft: function(t) {
        void 0 === t && (t = 0);
        var e = this.baseSprite.width / 2 + t,
            i = this.baseSprite.height / 2 + t;
        this.posX = e, this.posY = this.pad.game.height - i
    },
    alignBottomRight: function(t) {
        void 0 === t && (t = 0);
        var e = this.baseSprite.width / 2 + t,
            i = this.baseSprite.height / 2 + t;
        this.posX = this.pad.game.width - e, this.posY = this.pad.game.height - i
    },
    destroy: function() {
        this.pad.game.input.onDown.remove(this.checkDown, this), this.pad.game.input.onUp.remove(this.checkUp, this);
        for (var t = this.pad.game.input.moveCallbacks, e = 0; e < t.length; e++)
            if (t.callback === this.moveStick && t.context === this) {
                t.splice(e, 1);
                break
            }
        this.stickSprite.destroy(), this.baseSprite.destroy(), this.stickHitArea = null, this.baseHitArea = null, this.line = null, this.limitPoint = null, this.onDown.dispose(), this.onUp.dispose(), this.onMove.dispose(), this.onUpdate.dispose(), this.pointer = null, this._scale = null, this.pad = null
    },
    debug: function(t, e, i) {
        void 0 === t && (t = !0), void 0 === e && (e = !0), void 0 === i && (i = this.baseSprite.right);
        var s = this.pad.game.debug;
        if (t && (s.context.lineWidth = 2, s.geom(this.baseHitArea, "rgba(255, 0, 0, 1)", !1), s.geom(this.stickHitArea, "rgba(0, 255, 0, 1)", !1), s.geom(this.line, "rgba(255, 255, 0, 1)"), s.context.lineWidth = 1), e) {
            var n = s.renderShadow,
                a = i,
                o = this.baseSprite.y - 114;
            s.renderShadow = !0, s.text("Force: " + this.force.toFixed(2), a, o), s.text("ForceX: " + this.forceX.toFixed(2), a, o + 24), s.text("ForceY: " + this.forceY.toFixed(2), a, o + 48), s.text("Rotation: " + this.rotation.toFixed(2), a, o + 96), s.text("Angle: " + this.angle.toFixed(2), a, o + 120), s.text("Distance: " + this.distance, a, o + 172), s.text("Quadrant: " + this.quadrant, a, o + 196), s.text("Octant: " + this.octant, a, o + 220), s.renderShadow = n
        }
    }
}, Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "rotation", {
    get: function() {
        return this.line.angle
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "posX", {
    get: function() {
        return this.position.x
    },
    set: function(t) {
        this.position.x !== t && (this.position.x = t, this.baseSprite.x = t, this.stickSprite.x = t, this.baseHitArea.x = t, this.stickHitArea.x = t, this.line.start.x = t, this.line.end.x = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "posY", {
    get: function() {
        return this.position.y
    },
    set: function(t) {
        this.position.y !== t && (this.position.y = t, this.baseSprite.y = t, this.stickSprite.y = t, this.baseHitArea.y = t, this.stickHitArea.y = t, this.line.start.y = t, this.line.end.y = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "force", {
    get: function() {
        return Math.min(1, this.line.length / this.distance * 2)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "forceX", {
    get: function() {
        return this.force * this.x
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "forceY", {
    get: function() {
        return this.force * this.y
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "x", {
    get: function() {
        return this.line.angle >= 0 ? this.line.angle <= 1.5707963267948966 ? (1.5707963267948966 - this.line.angle) / 1.5707963267948966 : (3.141592653589793 - this.line.angle) / 3.141592653589793 * 2 - 1 : this.line.angle >= -1.5707963267948966 ? Math.abs(-1.5707963267948966 - this.line.angle) / 1.5707963267948966 : Math.abs(-3.141592653589793 - this.line.angle) / 3.141592653589793 * 2 - 1
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "y", {
    get: function() {
        return this.line.angle >= 0 ? 1 - Math.abs(1.5707963267948966 - this.line.angle) / 1.5707963267948966 : Math.abs(-1.5707963267948966 - this.line.angle) / 1.5707963267948966 - 1
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "filterX", {
    get: function() {
        if (0 === this.x) return .5;
        var t = Math.abs(this.forceX) / 2;
        return this.x < 0 ? (.5 - t).toFixed(2) : (.5 + t).toFixed(2)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "filterY", {
    get: function() {
        if (0 === this.y) return .5;
        var t = Math.abs(this.forceY) / 2;
        return this.y < 0 ? 1 - (.5 - t).toFixed(2) : 1 - (.5 + t).toFixed(2)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "alpha", {
    get: function() {
        return this.stickSprite.alpha
    },
    set: function(t) {
        this.stickSprite.alpha = t, this.baseSprite.alpha = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "visible", {
    get: function() {
        return this.stickSprite.visible
    },
    set: function(t) {
        this.stickSprite.visible = t, this.baseSprite.visible = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "distance", {
    get: function() {
        return this._distance * this._scale
    },
    set: function(t) {
        this._distance !== t && (this._distance = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "deadZone", {
    get: function() {
        return this._deadZone * this._scale
    },
    set: function(t) {
        this._deadZone = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "scale", {
    get: function() {
        return this._scale
    },
    set: function(t) {
        this._scale !== t && (this.stickSprite.scale.set(t), this.baseSprite.scale.set(t), this.baseHitArea.setTo(this.position.x, this.position.y, this.distance * t), this.stickHitArea.setTo(this.position.x, this.position.y, this.stickSprite.width), this._scale = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Stick.prototype, "showOnTouch", {
    get: function() {
        return this._showOnTouch
    },
    set: function(t) {
        this._showOnTouch !== t && (this._showOnTouch = t, this._showOnTouch && this.visible && (this.visible = !1))
    }
}), Phaser.VirtualJoystick.Button = function(t, e, i, s, n, a, o) {
    this.pad = t, this.upFrame = a, this.downFrame = o, this.sprite = this.pad.game.make.sprite(i, s, n, a), this.sprite.anchor.set(.5), e === Phaser.VirtualJoystick.CIRC_BUTTON ? this.hitArea = new Phaser.Circle(this.sprite.x, this.sprite.y, this.sprite.width) : e === Phaser.VirtualJoystick.RECT_BUTTON && (this.hitArea = new Phaser.Rectangle(this.sprite.x, this.sprite.y, this.sprite.width, this.sprite.height)), this.pointer = null, this.enabled = !0, this.isDown = !1, this.isUp = !0, this.onDown = new Phaser.Signal, this.onUp = new Phaser.Signal, this.timeDown = 0, this.timeUp = 0, this.repeatRate = 0, this.key = null, this._timeNext = 0, this._scale = 1, this.pad.game.stage.addChild(this.sprite), this.pad.game.input.onDown.add(this.checkDown, this), this.pad.game.input.onUp.add(this.checkUp, this)
}, Phaser.VirtualJoystick.Button.prototype = {
    addKey: function(t) {
        if (this.key) {
            if (this.key.keyCode === t) return !1;
            this.key.onDown.removeAll(), this.key.onUp.removeAll(), this.pad.game.input.keyboard.removeKey(this.key), this.key = null
        }
        return t && (this.key = this.pad.game.input.keyboard.addKey(t), this.key.onDown.add(this.keyDown, this), this.key.onUp.add(this.keyUp, this)), this.key
    },
    keyDown: function() {
        this.isDown || (this.sprite.frameName = this.downFrame, this.isDown = !0, this.isUp = !1, this.timeDown = this.pad.game.time.time, this.timeUp = 0, this.onDown.dispatch(this, this.key))
    },
    keyUp: function() {
        this.isDown && (this.sprite.frameName = this.upFrame, this.isDown = !1, this.isUp = !0, this.timeUp = this.pad.game.time.time, this.onUp.dispatch(this, this.key, this.duration))
    },
    checkDown: function(t) {
        this.enabled && this.isUp && this.hitArea.contains(t.x, t.y) && (this.pointer = t, this.sprite.frameName = this.downFrame, this.isDown = !0, this.isUp = !1, this.timeDown = this.pad.game.time.time, this.timeUp = 0, this.onDown.dispatch(this, t))
    },
    checkUp: function(t) {
        t === this.pointer && (this.pointer = null, this.sprite.frameName = this.upFrame, this.isDown = !1, this.isUp = !0, this.timeUp = this.pad.game.time.time, this.onUp.dispatch(this, t, this.duration))
    },
    update: function() {
        this.repeatRate > 0 && this.isDown && this.pad.game.time.time >= this._timeNext && (this.onDown.dispatch(this, this.pointer), this._timeNext = this.pad.game.time.time + this.repeatRate)
    },
    alignBottomLeft: function(t) {
        void 0 === t && (t = 0);
        var e = this.sprite.width / 2 + t,
            i = this.sprite.height / 2 + t;
        this.posX = e, this.posY = this.pad.game.height - i
    },
    alignBottomRight: function(t) {
        void 0 === t && (t = 0);
        var e = this.sprite.width / 2 + t,
            i = this.sprite.height / 2 + t;
        this.posX = this.pad.game.width - e, this.posY = this.pad.game.height - i
    },
    destroy: function() {
        this.pad.game.input.onDown.remove(this.checkDown, this), this.pad.game.input.onUp.remove(this.checkUp, this), this.sprite.destroy(), this.onDown.dispose(), this.onUp.dispose(), this.hitArea = null, this.pointer = null, this._scale = null, this.pad = null
    }
}, Object.defineProperty(Phaser.VirtualJoystick.Button.prototype, "posX", {
    get: function() {
        return this.sprite.x
    },
    set: function(t) {
        this.sprite.x !== t && (this.sprite.x = t, this.hitArea.x = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Button.prototype, "posY", {
    get: function() {
        return this.sprite.y
    },
    set: function(t) {
        this.sprite.y !== t && (this.sprite.y = t, this.hitArea.y = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Button.prototype, "alpha", {
    get: function() {
        return this.sprite.alpha
    },
    set: function(t) {
        this.sprite.alpha = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Button.prototype, "visible", {
    get: function() {
        return this.sprite.visible
    },
    set: function(t) {
        this.sprite.visible = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Button.prototype, "scale", {
    get: function() {
        return this._scale
    },
    set: function(t) {
        this._scale !== t && (this.sprite.scale.set(t), this.hitArea.setTo(this.sprite.x, this.sprite.y, this.sprite.width), this._scale = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.Button.prototype, "duration", {
    get: function() {
        return this.isUp ? this.timeUp - this.timeDown : this.game.time.time - this.timeDown
    }
}), Phaser.VirtualJoystick.DPad = function(t, e, i, s, n, a, o, r, h, l) {
    this.pad = t, this.neutralFrame = a, this.upFrame = o, this.downFrame = r, this.leftFrame = h, this.rightFrame = l, this.position = new Phaser.Point(e, i), this.line = new Phaser.Line(this.position.x, this.position.y, this.position.x, this.position.y), this.sprite = this.pad.game.make.sprite(e, i, n, a), this.sprite.anchor.set(.5), this.baseHitArea = new Phaser.Circle(this.position.x, this.position.y, s), this.stickHitArea = new Phaser.Circle(this.position.x, this.position.y, this.sprite.width), this.limitPoint = new Phaser.Point, this.pointer = null, this.enabled = !0, this.isDown = !1, this.isUp = !0, this.onDown = new Phaser.Signal, this.onUp = new Phaser.Signal, this.onMove = new Phaser.Signal, this.onUpdate = new Phaser.Signal, this.timeDown = 0, this.timeUp = 0, this.angle = 0, this.angleFull = 0, this.quadrant = 0, this.octant = 0, this.direction = Phaser.NONE, this._distance = s, this._deadZone = .15 * s, this._scale = 1, this._tracking = !1, this._showOnTouch = !1, this.pad.game.stage.addChild(this.sprite), this.pad.game.input.onDown.add(this.checkDown, this), this.pad.game.input.onUp.add(this.checkUp, this), this.pad.game.input.addMoveCallback(this.moveStick, this)
}, Phaser.VirtualJoystick.DPad.prototype = {
    checkDown: function(t) {
        this.enabled && this.isUp && (this.pointer = t, this.line.end.copyFrom(t), this._showOnTouch ? (this.line.start.copyFrom(t), this.posX = t.x, this.posY = t.y, this.visible = !0, this.setDown()) : this.stickHitArea.contains(t.x, t.y) && (this.line.length <= this.deadZone ? this._tracking = !0 : (this.setDown(), this.moveStick())))
    },
    checkUp: function(t) {
        t === this.pointer && (this.pointer = null, this.stickHitArea.x = this.position.x, this.stickHitArea.y = this.position.y, this.sprite.frameName = this.neutralFrame, this.line.end.copyFrom(this.line.start), this.isDown = !1, this.isUp = !0, this.direction = Phaser.NONE, this.timeUp = this.pad.game.time.time, this.onUp.dispatch(this, t), this._showOnTouch && (this.visible = !1))
    },
    setDown: function() {
        this.isDown = !0, this.isUp = !1, this.timeDown = this.pad.game.time.time, this.timeUp = 0, this._tracking = !1, this.checkArea(), this.onDown.dispatch(this, this.pointer)
    },
    checkArea: function() {
        this.angle = this.pad.game.math.radToDeg(this.line.angle), this.angleFull = this.angle, this.angleFull < 0 && (this.angleFull += 360), this.octant = 45 * Math.round(this.angleFull / 45), this.angleFull >= 45 && this.angleFull < 135 ? this.quadrant = 1 : this.angleFull >= 135 && this.angleFull < 225 ? this.quadrant = 2 : this.angleFull >= 225 && this.angleFull < 315 ? this.quadrant = 3 : this.quadrant = 0
    },
    moveStick: function() {
        return this.pointer && (this.isDown || this._tracking) ? (this.line.end.copyFrom(this.pointer), this.checkArea(), !this.isDown && this.line.length <= this.deadZone ? (this.direction = Phaser.NONE, void(this.sprite.frameName = this.neutralFrame)) : (this._tracking && this.setDown(), this.line.length < this.baseHitArea.radius ? this.motionLock === Phaser.VirtualJoystick.NONE ? (this.stickHitArea.x = this.pointer.x, this.stickHitArea.y = this.pointer.y) : this.motionLock === Phaser.VirtualJoystick.HORIZONTAL ? this.stickHitArea.x = this.pointer.x : this.motionLock === Phaser.VirtualJoystick.VERTICAL && (this.stickHitArea.y = this.pointer.y) : (this.baseHitArea.circumferencePoint(this.line.angle, !1, this.limitPoint), this.motionLock === Phaser.VirtualJoystick.NONE ? (this.stickHitArea.x = this.limitPoint.x, this.stickHitArea.y = this.limitPoint.y) : this.motionLock === Phaser.VirtualJoystick.HORIZONTAL ? this.stickHitArea.x = this.limitPoint.x : this.motionLock === Phaser.VirtualJoystick.VERTICAL && (this.stickHitArea.y = this.limitPoint.y)), 1 === this.quadrant ? (this.sprite.frameName = this.downFrame, this.direction = Phaser.DOWN) : 2 === this.quadrant ? (this.sprite.frameName = this.leftFrame, this.direction = Phaser.LEFT) : 3 === this.quadrant ? (this.sprite.frameName = this.upFrame, this.direction = Phaser.UP) : (this.sprite.frameName = this.rightFrame, this.direction = Phaser.RIGHT), void this.onMove.dispatch(this, this.x, this.y))) : (this.direction = Phaser.NONE, void(this.sprite.frameName = this.neutralFrame))
    },
    update: function() {
        this.isDown && !this._tracking && this.onUpdate.dispatch(this, this.x, this.y)
    },
    alignBottomLeft: function(t) {
        void 0 === t && (t = 0);
        var e = this.sprite.width / 2 + t,
            i = this.sprite.height / 2 + t;
        this.posX = e, this.posY = this.pad.game.height - i
    },
    alignBottomRight: function(t) {
        void 0 === t && (t = 0);
        var e = this.sprite.width / 2 + t,
            i = this.sprite.height / 2 + t;
        this.posX = this.pad.game.width - e, this.posY = this.pad.game.height - i
    },
    destroy: function() {
        this.pad.game.input.onDown.remove(this.checkDown, this), this.pad.game.input.onUp.remove(this.checkUp, this);
        for (var t = this.pad.game.input.moveCallbacks, e = 0; e < t.length; e++)
            if (t.callback === this.moveStick && t.context === this) {
                t.splice(e, 1);
                break
            }
        this.sprite.destroy(), this.stickHitArea = null, this.baseHitArea = null, this.line = null, this.limitPoint = null, this.onDown.dispose(), this.onUp.dispose(), this.pointer = null, this._scale = null, this.pad = null
    },
    debug: function(t, e, i) {
        void 0 === t && (t = !0), void 0 === e && (e = !0), void 0 === i && (i = this.sprite.right);
        var s = this.pad.game.debug;
        if (t && (s.context.lineWidth = 2, s.geom(this.baseHitArea, "rgba(255, 0, 0, 1)", !1), s.geom(this.stickHitArea, "rgba(0, 255, 0, 1)", !1), s.geom(this.line, "rgba(255, 255, 0, 1)"), s.context.lineWidth = 1), e) {
            var n = s.renderShadow,
                a = i,
                o = this.sprite.y - 48;
            s.renderShadow = !0, s.text("X: " + this.x, a, o), s.text("Y: " + this.y, a, o + 24), s.text("Distance: " + this.distance, a, o + 48), s.text("Quadrant: " + this.quadrant, a, o + 96), s.text("Octant: " + this.octant, a, o + 120), s.renderShadow = n
        }
    }
}, Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "rotation", {
    get: function() {
        return this.line.angle
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "posX", {
    get: function() {
        return this.position.x
    },
    set: function(t) {
        this.position.x !== t && (this.position.x = t, this.sprite.x = t, this.baseHitArea.x = t, this.stickHitArea.x = t, this.line.start.x = t, this.line.end.x = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "posY", {
    get: function() {
        return this.position.y
    },
    set: function(t) {
        this.position.y !== t && (this.position.y = t, this.sprite.y = t, this.baseHitArea.y = t, this.stickHitArea.y = t, this.line.start.y = t, this.line.end.y = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "x", {
    get: function() {
        return this.direction === Phaser.LEFT ? -1 : this.direction === Phaser.RIGHT ? 1 : 0
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "y", {
    get: function() {
        return this.direction === Phaser.UP ? -1 : this.direction === Phaser.DOWN ? 1 : 0
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "alpha", {
    get: function() {
        return this.sprite.alpha
    },
    set: function(t) {
        this.sprite.alpha = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "visible", {
    get: function() {
        return this.sprite.visible
    },
    set: function(t) {
        this.sprite.visible = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "distance", {
    get: function() {
        return this._distance * this._scale
    },
    set: function(t) {
        this._distance !== t && (this._distance = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "deadZone", {
    get: function() {
        return this._deadZone * this._scale
    },
    set: function(t) {
        this._deadZone = t
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "scale", {
    get: function() {
        return this._scale
    },
    set: function(t) {
        this._scale !== t && (this.sprite.scale.set(t), this.baseHitArea.setTo(this.position.x, this.position.y, this.distance * t), this.stickHitArea.setTo(this.position.x, this.position.y, this.sprite.width), this._scale = t)
    }
}), Object.defineProperty(Phaser.VirtualJoystick.DPad.prototype, "showOnTouch", {
    get: function() {
        return this._showOnTouch
    },
    set: function(t) {
        this._showOnTouch !== t && (this._showOnTouch = t, this._showOnTouch && this.visible && (this.visible = !1))
    }
});
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.init = function() {
            var t = this;
            this.loadPlugins(), this.game.input.maxPointers = 1, this.game.canvas.oncontextmenu = function(t) {
                t.preventDefault()
            }, this.game.device.desktop ? (this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL, this.scale.pageAlignHorizontally = !0, this.game.scale.windowConstraints.bottom = "visual", this.game.ph2UIManager.setCurrentPlatform("desktop"), this.game.ph2UIManager.events.onGameResize(Constants.CALCULATED_WIDTH, Constants.CALCULATED_HEIGHT), this.game.onBlur.add(function(e) {
                t.game.ph2AudioManager.mute()
            }), this.game.onFocus.add(function(e) {
                t.game.ph2AudioManager.unmute()
            })) : (this.game.ph2UIManager.setCurrentPlatform("mobile"), this.scale.scaleMode = Phaser.ScaleManager.USER_SCALE, this.scale.fullScreenScaleMode = Phaser.ScaleManager.USER_SCALE, this.setScaling(), window.addEventListener("resize", function(e) {
                return i.mobileResizeCallback(t.game.scale)
            }), this.game.scale.onSizeChange.add(function() {
                t.game.width > t.game.height ? "landscape" !== Constants.CURRENT_ORIENTATION && (Constants.CURRENT_ORIENTATION = "landscape") : "portrait" !== Constants.CURRENT_ORIENTATION && (Constants.CURRENT_ORIENTATION = "portrait"), t.game.ph2UIManager.events.onGameResize(Constants.CALCULATED_WIDTH, Constants.CALCULATED_HEIGHT), t.game.state.getCurrentState().resize()
            }, this), i.mobileResizeCallback(this.game.scale), this.game.ph2UIManager.events.onGameResize(Constants.CALCULATED_WIDTH, Constants.CALCULATED_HEIGHT), Fabrique.Utils.isOnDevice(this.game) ? (document.addEventListener("pause", function() {
                t.game.ph2AudioManager.mute()
            }), document.addEventListener("resume", function() {
                t.game.ph2AudioManager.unmute()
            })) : this.stage.disableVisibilityChange = !1)
        }, i.prototype.loadPlugins = function() {
            this.game.storage.setNamespace("bombit-7-v1.0.0")
        }, i.mobileResizeCallback = function(e) {
            var i = window.innerWidth,
                s = window.innerHeight,
                n = Constants.GAME_WIDTH * t.SETTINGS.SCALE,
                a = Constants.GAME_HEIGHT * t.SETTINGS.SCALE,
                o = 1;
            i > s ? (o /= s / a, t.SETTINGS.CURRENT_ORIENTATION = t.SCREEN_ORIENTATION.LANDSCAPE) : (o /= s / n, t.SETTINGS.CURRENT_ORIENTATION = t.SCREEN_ORIENTATION.PORTRAIT), Constants.CALCULATED_WIDTH = Math.ceil(i * o), Constants.CALCULATED_HEIGHT = Math.ceil(s * o), e.setGameSize(Constants.CALCULATED_WIDTH, Constants.CALCULATED_HEIGHT), e.setUserScale(1 / o, 1 / o)
        }, i.prototype.setScaling = function() {
            var e = window.innerWidth * this.game.device.pixelRatio;
            e < window.innerHeight && (e = window.innerHeight * this.game.device.pixelRatio), t.SETTINGS.SCALE = e < 650 ? .5 : e > 1050 ? 1 : .75
        }, i.prototype.handleCorrect = function() {}, i.prototype.handleIncorrect = function() {}, i.prototype.create = function() {
            var t = this,
                e = function() {
                    t.recursiveUpdateText(t.stage)
                };
            WebFont.load({
                custom: {
                    families: ["roboto_condensedbold"],
                    urls: ["assets/fonts/roboto/roboto_condense-webfont.css"]
                },
                active: e,
                inactive: e
            }), this.game.analytics.game.setup(Constants.GAME_KEY, Constants.SECRET_KEY, version, this.game.analytics.game.createUser());
            var i = Date.now();
            window.addEventListener("beforeunload", function() {
                t.game.analytics.game.addEvent(new GA.Events.SessionEnd((Date.now() - i) / 1e3)), t.game.analytics.game.sendEvents()
            }), this.game.analytics.google.setup(Constants.GOOGLE_ID, Constants.GOOGLE_APP_NAME, version), this.game.ads.setAdProvider(new PhaserAds.AdProvider.GameDistributionAds(this.game, Constants.GAMEDISTRIBUTION_ID, Constants.GAMEDISTRIBUTION_USER)), this.game.analytics.google.sendScreenView("boot"), this.game.state.start("preloaderState")
        }, i.prototype.recursiveUpdateText = function(t) {
            var e = this;
            t instanceof Phaser.Text && (t.dirty = !0), t.children && t.children.length > 0 && t.children.forEach(function(t) {
                e.recursiveUpdateText(t)
            })
        }, i.prototype.preload = function() {
            this.game.ph2Loader.debug(!0), this.game.load.cacheBuster = "undefined" == typeof version ? null : version, this.game.load.json("resources", "resources.json"), this.game.load.json("balance", "assets/json/balance.json"), this.game.load.json("localization", "assets/json/localization.json"), this.game.load.json("missions", "assets/json/missions.json"), this.game.load.atlas("arcade", "assets/atlases/joystick/arcade-joystick.png", "assets/atlases/joystick/arcade-joystick.json"), this.game.load.atlas("dpad", "assets/atlases/joystick/dpad.png", "assets/atlases/joystick/dpad.json"), this.game.load.atlas("generic", "assets/atlases/joystick/generic-joystick.png", "assets/atlases/joystick/generic-joystick.json")
        }, i
    }(Phaser.State);
    t.BootState = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t) {
            var i = e.call(this) || this;
            return i.game = t, i
        }
        return __extends(i, e), i.prototype.init = function(t) {
            this.toState = t
        }, i.prototype.preload = function() {
            this.game.ph2Loader.useScalingVariant("x" + t.SETTINGS.SCALE), this.game.ph2Loader.useSpineScalingVariant("@" + t.SETTINGS.SCALE + "x"), this.game.ph2UIManager.setGameScale(t.SETTINGS.SCALE), this.game.ph2AnimationManager.setGameScale(t.SETTINGS.SCALE), this.loadAudio()
        }, i.prototype.loadAudio = function() {
            var e, i = new Howl({
                    src: ["assets/audios/game_music_1.ogg?v=" + version, "assets/audios/game_music_1.mp3?v=" + version, "assets/audios/game_music_1.m4a?v=" + version],
                    preload: !0,
                    loop: !0
                }),
                s = new Howl({
                    src: ["assets/audios/game_music_2.ogg?v=" + version, "assets/audios/game_music_2.mp3?v=" + version, "assets/audios/game_music_2.m4a?v=" + version],
                    preload: !0,
                    loop: !0
                }),
                n = new Howl({
                    src: ["assets/audios/game_music_3.ogg?v=" + version, "assets/audios/game_music_3.mp3?v=" + version, "assets/audios/game_music_3.m4a?v=" + version],
                    preload: !0,
                    loop: !0
                }),
                a = new Howl({
                    src: ["assets/audios/game_music_4.ogg?v=" + version, "assets/audios/game_music_4.mp3?v=" + version, "assets/audios/game_music_4.m4a?v=" + version],
                    preload: !0,
                    loop: !0
                }),
                o = new Howl({
                    src: ["assets/audios/menu_music.ogg?v=" + version, "assets/audios/menu_music.mp3?v=" + version, "assets/audios/menu_music.m4a?v=" + version],
                    preload: !0,
                    loop: !0
                }),
                r = new Howl({
                    src: ["assets/audios/ui_story.ogg?v=" + version, "assets/audios/ui_story.mp3?v=" + version, "assets/audios/ui_story.m4a?v=" + version],
                    preload: !0,
                    loop: !1
                }),
                h = new Howl({
                    src: ["assets/audios/ui_go.ogg?v=" + version, "assets/audios/ui_go.mp3?v=" + version, "assets/audios/ui_go.m4a?v=" + version],
                    preload: !0,
                    loop: !1
                }),
                l = new Howl({
                    src: ["assets/audios/level_complete.ogg?v=" + version, "assets/audios/level_complete.mp3?v=" + version, "assets/audios/level_complete.m4a?v=" + version],
                    preload: !0,
                    loop: !1
                }),
                c = new Howl({
                    src: ["assets/audios/level_failed.ogg?v=" + version, "assets/audios/level_failed.mp3?v=" + version, "assets/audios/level_failed.m4a?v=" + version],
                    preload: !0,
                    loop: !1
                }),
                u = new Howl({
                    src: ["assets/audios/game_failed.ogg?v=" + version, "assets/audios/game_failed.mp3?v=" + version, "assets/audios/game_failed.m4a?v=" + version],
                    preload: !0,
                    loop: !0
                });
            (e = []).push(i), e.push(s), e.push(n), e.push(a);
            var d = new Howl({
                src: ["assets/audios/bombit7_sfx.ogg?v=" + version, "assets/audios/bombit7_sfx.mp3?v=" + version, "assets/audios/bombit7_sfx.m4a?v=" + version],
                preload: !0,
                sprite: {
                    InvincibilitySound: [0, 1933.061224489796],
                    addBomb: [3e3, 261.2244897959184],
                    bomb: [5e3, 1410.6122448979593],
                    dead: [8e3, 757.5510204081635],
                    eatProp: [1e4, 339.5918367346944],
                    gameFailed: [12e3, 13740.408163265307],
                    getPlane: [27e3, 1306.1224489795932],
                    levelComplete: [3e4, 7653.877551020408],
                    levelFailed: [39e3, 5433.4693877551035],
                    loadingBomb: [46e3, 600.8163265306123],
                    menuPress: [48e3, 653.0612244897966],
                    menuTouch: [5e4, 208.9795918367372],
                    selectPress: [52e3, 783.6734693877575],
                    selectTouch: [54e3, 522.448979591836],
                    sound_TerminalHammer: [56e3, 3970.612244897957],
                    sound_butter: [61e3, 1776.3265306122448],
                    sound_car_run: [64e3, 2612.2448979591863],
                    sound_catch_robot: [68e3, 626.9387755101974],
                    sound_catch_run: [7e4, 940.4081632653032],
                    sound_chimney: [72e3, 835.9183673469346],
                    sound_coin: [74e3, 548.5714285714351],
                    sound_crabBite: [76e3, 809.7959183673424],
                    sound_dressUnlock: [78e3, 1201.6326530612246],
                    sound_dropWater: [81e3, 1358.3673469387777],
                    sound_frog: [84e3, 1149.3877551020405],
                    sound_getItem: [87e3, 417.9591836734744],
                    sound_horse_run: [89e3, 1985.306122448975],
                    sound_inv: [92e3, 940.4081632653032, !0],
                    sound_lightening: [94e3, 2272.6530612244887],
                    sound_rocket_exp: [98e3, 1880.8163265306064],
                    sound_rocket_start: [101e3, 2560.0000000000023],
                    sound_sealion: [105e3, 888.1632653061189],
                    sound_sealionAttack: [107e3, 522.448979591843],
                    sound_size: [109e3, 731.428571428566],
                    sound_snowball: [111e3, 835.9183673469346],
                    sound_speed_up: [113e3, 1097.142857142856],
                    sound_star: [116e3, 1201.6326530612246],
                    sound_stun: [119e3, 1149.3877551020405],
                    sound_teacher_angry: [122e3, 992.6530612244875],
                    sound_tractor: [124e3, 992.6530612244875],
                    sound_tree_hole: [126e3, 1462.8571428571463],
                    sound_ui_l: [129e3, 6191.020408163268],
                    sound_ui_m: [137e3, 4048.979591836741],
                    sound_ui_s: [143e3, 1880.8163265306064],
                    sound_wawa_exp: [146e3, 1097.1428571428703],
                    sound_wawa_fire: [149e3, 1253.8775510203948],
                    uiCherry: [152e3, 7471.020408163269, !0],
                    uiGo: [161e3, 13792.653061224484],
                    uiStory: [176e3, 27115.10204081634],
                    useLaserReady: [205e3, 1567.3469387755006],
                    useLaserShoot: [208e3, 1436.734693877554],
                    useLauncher: [211e3, 1227.7551020408168],
                    useNombril: [214e3, 783.6734693877645],
                    useSinker: [216e3, 1253.8775510203948],
                    useThrower: [219e3, 1071.020408163264]
                }
            });
            this.game.ph2AudioManager.setAudioEffectsFile(d), t.Music.MAIN_MENU = o, t.Music.GAMEPLAY = e, t.Music.COMIC_INTRO = r, t.Music.COMIC_GO_GAMEPLAY = h, t.Music.LEVEL_COMPLETED = l, t.Music.LEVEL_FAILED = c, t.Music.GAME_OVER = u
        }, i.prototype.create = function() {
            var e = this;
            this.game.analytics.google.sendScreenView("preloader"), t.Instances.DataManager = new t.DataManager(this.game), t.Instances.DataManager.checkGameData(), t.Instances.DataManager.saveLivesPlayer1(t.SETTINGS.INITIAL_LIVES), t.Instances.DataManager.saveLivesPlayer2(t.SETTINGS.INITIAL_LIVES), t.Instances.LocalizationManager = new t.LocalizationManager(this.game, t.Instances.DataManager.getLanguage()), t.Instances.MissionManager = new t.MissionManager(this.game), Fabrique.LoaderHelper.hide(), this.game.analytics.google.sendScreenView("splash"), this.game.state.start("preloader", !0, !1, {
                nextState: "mainMenuState",
                splashOverride: Fabrique.BrandingDomain.Spil,
                mobilePlayClickhandler: function() {
                    Fabrique.LoaderHelper.show(), e.game.ads.onContentPaused.addOnce(function() {
                        Fabrique.LoaderHelper.hide(), e.game.analytics.google.sendScreenView("advertisement")
                    }), e.game.ads.onContentResumed.addOnce(function() {
                        Fabrique.LoaderHelper.hide(), e.game.state.start("mainMenuState", !0, !1), e.game.ads.onContentPaused.removeAll(), e.game.ads.onContentResumed.removeAll()
                    }), e.game.ads.showAd()
                },
                preloadHandler: function() {
                    e.game.ph2Loader.debug(!0), e.game.ph2Loader.setAssetsResources(e.game.cache.getJSON("resources")), e.game.ph2Loader.load("firstLoad"), e.checkBalanceData(), Fabrique.Branding.preloadImages(e.game)
                }
            })
        }, i.prototype.checkBalanceData = function() {
            var e;
            e = this.game.cache.getJSON("balance");
            for (var i in e)
                if (e.hasOwnProperty(i) && "undefined" !== t[i])
                    for (var s in e[i]) e[i].hasOwnProperty(s) && "undefined" !== t[i][s] && (t[i][s] = e[i][s])
        }, i
    }(Phaser.State);
    t.PreloaderState = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.init = function(e) {
            this.firstLogin = !1, this.gameScale = t.SETTINGS.SCALE, this.gameMode = t.GAME_MODE.ARCADE, this.playerMode = t.PLAYER_MODE.SINGLE_PLAYER, this.enemiesSelected = 3, this.levelsSelected = 5, this.mapTheme = t.MAP_THEME.RANDOM, this.difficulty = t.DIFFICULTY.EASY, this.selectingPlayer1 = !0, this.selectingPlayer2 = !1, this.visiblePopup = -1, this.popupTimer = -1, this.playerCursorIndex1 = 0, this.playerCursorIndex2 = 1, this.charactersChosen = [0, 1, 2, 3], this.currentCharacterOn = 0, this.headsPlayer1 = [], this.headsPlayer2 = [], this.faces = [], this.bodies = [], this.outfitIndex1 = 0, this.outfitIndex2 = 0, this.unlocks = [], this.isDesktop = this.game.device.desktop, this.forceMobile = !1, this.changeFrameTimer = 0, this.currentFrameButtons = "small_button_select.png", this.directionMission1 = "left", this.directionMission2 = "left", this.directionMission3 = "left", this.movingText1 = !1, this.movingText2 = !1, this.movingText3 = !1, this.currentMissionLimitLeft = 0, this.currentMissionLimitRight = 0, this.missionLimitLeft1 = 0, this.missionLimitLeft2 = 0, this.missionLimitLeft3 = 0, this.missionLimitRight1 = 0, this.missionLimitRight2 = 0, this.missionLimitRight3 = 0
        }, i.prototype.create = function() {
            this.game.analytics.google.sendScreenView("main_menu");
            var e, i, s, n, a;
            this.game.input.maxPointers = 1, t.Instances.DataManager.saveLivesPlayer1(t.SETTINGS.INITIAL_LIVES), t.Instances.DataManager.saveLivesPlayer2(t.SETTINGS.INITIAL_LIVES), this.totalPoints = t.Instances.DataManager.getPlayerPoints(), this.unlocks = t.Instances.DataManager.getUnlocks(), this.equippedOutfits = t.Instances.DataManager.getEquippedOutfits(), this.headPlayer1 = this.equippedOutfits[0].head, this.facePlayer1 = this.equippedOutfits[0].face, this.bodyPlayer1 = this.equippedOutfits[0].body, this.headPlayer2 = this.equippedOutfits[1].head, this.facePlayer2 = this.equippedOutfits[1].face, this.bodyPlayer2 = this.equippedOutfits[1].body, this.bgLandscape = this.game.add.sprite(.5 * this.game.width, .5 * this.game.height, "mm_land"), this.bgLandscape.anchor.set(.5), this.bgPortrait = this.game.add.sprite(.5 * this.game.width, this.game.height, "mm"), this.bgPortrait.anchor.set(.5, 1), this.bgPortrait.visible = !1, this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.uiMainMenu = this.game.add.ph2UI("main_menu", "atlas_main_menu"), this.uiPowerups = this.game.add.ph2UI("powerups", "atlas_missions"), this.uiSettings = this.game.add.ph2UI("settings", "atlas_missions"), this.uiModeSelect = this.game.add.ph2UI("select_mode", "atlas_select_mode"), this.uiGameSettings = this.game.add.ph2UI("game_settings", "atlas_loading"), this.uiCharacterSelect = this.game.add.ph2UI("dress_up_character", "atlas_ui_dress_up"), this.uiLoading = this.game.add.ph2UI("loading_ingame", "atlas_loading"), this.uiMissions = this.game.add.ph2UI("pause", "atlas_missions"), this.comic = new t.Comic(this.game), this.overlayMissions = new t.Overlay(this.game, .7, "bg_black"), this.overlayMissions.kill(), this.logoAnimation1 = this.game.add.ph2AnimationObject(0, 0, "logo1", "atlas_main_menu"), this.logoAnimation2 = this.game.add.ph2AnimationObject(0, 0, "logo2", "atlas_main_menu"), this.logoAnimation1.ph2Animations.play("logo1_stand", 1, !0), this.logoAnimation2.ph2Animations.play("logo2_stand", 1, !0), this.logo = Ph2.UISystem.findObject("logo", this.uiMainMenu), this.logo.addChild(this.logoAnimation1), this.logo.addChild(this.logoAnimation2), this.logo.frameName = !this.isDesktop || this.forceMobile ? "mm_logo2.png" : "mm_logo1.png", this.logoAnimation1.visible = this.isDesktop, this.logoAnimation2.visible = !this.isDesktop, this.introAnim = this.game.add.ph2AnimationObject(.5 * this.game.width, .5 * this.game.height, "intro", "atlas_intro"), this.introAnim.visible = !1, this.trophy = this.game.add.ph2AnimationObject(0, 0, "trophy", "atlas_anim"), this.trophy.visible = !1, this.bomb = this.game.add.ph2AnimationObject(0, 0, "bomb_ui", "atlas_anim"), this.bomb.visible = !1, i = Ph2.UISystem.findObject("buttons_pivot", this.uiMainMenu), e = Ph2.UISystem.findObject("container", this.uiCharacterSelect), this.containerDressUp = Ph2.UISystem.findObject("container", this.uiCharacterSelect), this.containerSettings = Ph2.UISystem.findObject("container", this.uiGameSettings), this.containerSelectMode = Ph2.UISystem.findObject("container", this.uiModeSelect), this.containerLoading = Ph2.UISystem.findObject("container", this.uiLoading), this.containerControls = Ph2.UISystem.findObject("container", this.uiSettings), this.containerPowerUps = Ph2.UISystem.findObject("container", this.uiPowerups), s = Ph2.UISystem.findObject("mm_hero2", this.uiMainMenu), n = Ph2.UISystem.findObject("mm_bottom", this.uiMainMenu), this.bgSettings = Ph2.UISystem.findObject("container/bg", this.uiSettings), this.bgPowerUps = Ph2.UISystem.findObject("container/bg", this.uiPowerups), this.bgGameSettings = Ph2.UISystem.findObject("container/bg", this.uiGameSettings), this.bgDressUp = Ph2.UISystem.findObject("container/bg", this.uiCharacterSelect), this.bgLoading = Ph2.UISystem.findObject("container/bg", this.uiLoading), this.edgeSettings = Ph2.UISystem.findObject("container/edge", this.uiSettings), this.edgePowerUps = Ph2.UISystem.findObject("container/edge", this.uiPowerups), this.edgeGameSettings = Ph2.UISystem.findObject("container/edge", this.uiGameSettings), this.edgeDressUp = Ph2.UISystem.findObject("container/edge", this.uiCharacterSelect), this.edgeLoading = Ph2.UISystem.findObject("container/edge", this.uiLoading), this.buttonMission1 = Ph2.UISystem.findObject("bg/mission1/close", this.uiMissions), this.buttonMission2 = Ph2.UISystem.findObject("bg/mission2/close", this.uiMissions), this.buttonMission3 = Ph2.UISystem.findObject("bg/mission3/close", this.uiMissions), this.logoAGAME = Ph2.UISystem.findObject("logo_agame", this.uiMainMenu), this.flagSelected = Ph2.UISystem.findObject("container_select/flag_select", this.uiMainMenu), this.flagContainer = Ph2.UISystem.findObject("container_flag", this.uiMainMenu), this.flagOption1 = Ph2.UISystem.findObject("container_flag/flag1", this.uiMainMenu), this.flagOption2 = Ph2.UISystem.findObject("container_flag/flag2", this.uiMainMenu), this.buttonMusic = Ph2.UISystem.findObject("sound_container/music", this.uiMainMenu), this.buttonAudio = Ph2.UISystem.findObject("sound_container/audio", this.uiMainMenu), this.buttonStartGame = Ph2.UISystem.findObject("buttons_container/start_button", this.uiMainMenu), this.buttonHowToPlay = Ph2.UISystem.findObject("buttons_container/how_to_play_button", this.uiMainMenu), this.buttonMoreGames = Ph2.UISystem.findObject("buttons_container/more_games_button", this.uiMainMenu), this.buttonControls = Ph2.UISystem.findObject("container/controls_button", this.uiPowerups), this.buttonPowerups = Ph2.UISystem.findObject("container/power_ups_button", this.uiSettings), this.buttonBackToMainMenu1 = Ph2.UISystem.findObject("container/back_button", this.uiSettings), this.buttonBackToMainMenu2 = Ph2.UISystem.findObject("container/back_button", this.uiPowerups), this.buttonBackToMainMenu3 = Ph2.UISystem.findObject("container/back_button", this.uiModeSelect), this.buttonNextToGameSettings = Ph2.UISystem.findObject("container/next_button", this.uiModeSelect), this.buttonCharacterSelect = Ph2.UISystem.findObject("container/ok_button", this.uiGameSettings), this.buttonBackToMode = Ph2.UISystem.findObject("container/back_button", this.uiGameSettings), this.buttonGotoGameplay = Ph2.UISystem.findObject("container/start_button", this.uiCharacterSelect), this.buttonBackToSettings = Ph2.UISystem.findObject("container/back_button", this.uiCharacterSelect), this.imageModeSelected = Ph2.UISystem.findObject("container/mode_image", this.uiModeSelect), this.blackContainerGameMode = Ph2.UISystem.findObject("container/black_container", this.uiModeSelect), a = Ph2.UISystem.findObject("container", this.uiModeSelect), this.textGameMode = Ph2.UISystem.findObject("container/description", this.uiModeSelect), this.button1Player = Ph2.UISystem.findObject("container/1player_button", this.uiGameSettings), this.button2Player = Ph2.UISystem.findObject("container/2player_button", this.uiGameSettings), this.button0Enemies = Ph2.UISystem.findObject("container/0enemies_button", this.uiGameSettings), this.button1Enemies = Ph2.UISystem.findObject("container/1enemies_button", this.uiGameSettings), this.button2Enemies = Ph2.UISystem.findObject("container/2enemies_button", this.uiGameSettings), this.button3Enemies = Ph2.UISystem.findObject("container/3enemies_button", this.uiGameSettings), this.button20Levels = Ph2.UISystem.findObject("container/20levels_button", this.uiGameSettings), this.button15Levels = Ph2.UISystem.findObject("container/15levels_button", this.uiGameSettings), this.button10Levels = Ph2.UISystem.findObject("container/10levels_button", this.uiGameSettings), this.button5Levels = Ph2.UISystem.findObject("container/5levels_button", this.uiGameSettings), this.buttonAquarium = Ph2.UISystem.findObject("container/aquarium_button", this.uiGameSettings), this.buttonBathroom = Ph2.UISystem.findObject("container/bathroom_button", this.uiGameSettings), this.buttonBaseballField = Ph2.UISystem.findObject("container/baseball_field_button", this.uiGameSettings), this.buttonCastle = Ph2.UISystem.findObject("container/castle_button", this.uiGameSettings), this.buttonDollhouse = Ph2.UISystem.findObject("container/dollhouse_button", this.uiGameSettings), this.buttonFarm = Ph2.UISystem.findObject("container/farm_button", this.uiGameSettings), this.buttonGarden = Ph2.UISystem.findObject("container/garden_button", this.uiGameSettings), this.buttonPolarRegion = Ph2.UISystem.findObject("container/polar_region_button", this.uiGameSettings), this.buttonPicnic = Ph2.UISystem.findObject("container/picnic_button", this.uiGameSettings), this.buttonRandom = Ph2.UISystem.findObject("container/random_button", this.uiGameSettings), this.buttonEasy = Ph2.UISystem.findObject("container/easy_button", this.uiGameSettings), this.buttonNormal = Ph2.UISystem.findObject("container/normal_button", this.uiGameSettings), this.buttonHard = Ph2.UISystem.findObject("container/hard_button", this.uiGameSettings), this.spineContainer = Ph2.UISystem.findObject("container/character_container/character", this.uiCharacterSelect), this.iconPlayerNumber = Ph2.UISystem.findObject("container/character_container/p1_image", this.uiCharacterSelect), this.characterButtons = [], this.buttonCharacter1 = Ph2.UISystem.findObject("container/character1_button", this.uiCharacterSelect), this.buttonCharacter2 = Ph2.UISystem.findObject("container/character2_button", this.uiCharacterSelect), this.buttonCharacter3 = Ph2.UISystem.findObject("container/character3_button", this.uiCharacterSelect), this.buttonCharacter4 = Ph2.UISystem.findObject("container/character4_button", this.uiCharacterSelect), this.buttonCharacter5 = Ph2.UISystem.findObject("container/character5_button", this.uiCharacterSelect), this.buttonCharacter6 = Ph2.UISystem.findObject("container/character6_button", this.uiCharacterSelect), this.buttonCharacter7 = Ph2.UISystem.findObject("container/character7_button", this.uiCharacterSelect), this.buttonCharacter8 = Ph2.UISystem.findObject("container/character8_button", this.uiCharacterSelect), this.characterButtons.push(this.buttonCharacter1, this.buttonCharacter2, this.buttonCharacter3, this.buttonCharacter4, this.buttonCharacter5, this.buttonCharacter6, this.buttonCharacter7, this.buttonCharacter8), this.currentButtonCharacterP1 = this.buttonCharacter1, this.currentButtonCharacterP2 = this.buttonCharacter2, this.buttonCharacter1.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter2.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter3.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter4.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter5.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter6.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter7.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.buttonCharacter8.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.iconPlayerNumber.visible = !(!this.isDesktop || this.forceMobile), this.iconPlayerNumber.visibility.enable(!(!this.isDesktop || this.forceMobile)), this.itemContainer1 = Ph2.UISystem.findObject("container/itmes_container/item1", this.uiCharacterSelect), this.itemContainer2 = Ph2.UISystem.findObject("container/itmes_container/item2", this.uiCharacterSelect), this.itemContainer3 = Ph2.UISystem.findObject("container/itmes_container/item3", this.uiCharacterSelect), this.itemContainer4 = Ph2.UISystem.findObject("container/itmes_container/item4", this.uiCharacterSelect), this.itemContainer5 = Ph2.UISystem.findObject("container/itmes_container/item5", this.uiCharacterSelect), this.itemContainer6 = Ph2.UISystem.findObject("container/itmes_container/item6", this.uiCharacterSelect), this.itemContainer7 = Ph2.UISystem.findObject("container/itmes_container/item7", this.uiCharacterSelect), this.itemContainer8 = Ph2.UISystem.findObject("container/itmes_container/item8", this.uiCharacterSelect), this.itemContainer9 = Ph2.UISystem.findObject("container/itmes_container/item9", this.uiCharacterSelect), this.textStarPoints = Ph2.AnimationSystem.findObject("score", this.trophy), this.buttonsBombIts = this.game.add.ph2AnimationObject(0, 0, "buttons_bombit", "atlas_main_menu"), this.buttonsBombIts.ph2Animations.play("buttons_bombit_stand", 1, !0), this.buttonBombIt2 = Ph2.AnimationSystem.findObject("bombit2", this.buttonsBombIts), this.buttonBombIt3 = Ph2.AnimationSystem.findObject("bombit3", this.buttonsBombIts), this.buttonBombIt4 = Ph2.AnimationSystem.findObject("bombit4", this.buttonsBombIts), this.buttonBombIt5 = Ph2.AnimationSystem.findObject("bombit5", this.buttonsBombIts), this.buttonBombIt6 = Ph2.AnimationSystem.findObject("bombit6", this.buttonsBombIts), i.addChild(this.buttonsBombIts), this.animationButtonChange = this.game.add.ph2AnimationObject(0, -50 * t.SETTINGS.SCALE, "change_button", "atlas_ui_dress_up"), this.animationButtonChange.ph2Animations.play("change_button_stand", 1, !0), this.buttonChangeCharacter = Ph2.AnimationSystem.findObject("base", this.animationButtonChange), this.animationButtonChange.visible = this.playerMode === t.PLAYER_MODE.MULTI_PLAYER, e.addChild(this.animationButtonChange), this.textMission1 = Ph2.UISystem.findObject("bg/mission1/description", this.uiMissions), this.textMission2 = Ph2.UISystem.findObject("bg/mission2/description", this.uiMissions), this.textMission3 = Ph2.UISystem.findObject("bg/mission3/description", this.uiMissions);
            var o = this.game.add.ph2AnimationObject(0, 0, "arrows", "atlas_select_mode");
            switch (this.arrowRight = Ph2.AnimationSystem.findObject("arrow_right", o), this.arrowRight.ph2Animations.play("arrow_stand", 1, !0), this.arrowLeft = Ph2.AnimationSystem.findObject("arrow_left", o), this.arrowLeft.ph2Animations.play("arrow_stand", 1, !0), this.arrowLeft.scale.x = -1, a.addChild(this.arrowLeft), a.addChild(this.arrowRight), this.spineDressHero1 = this.game.add.spine(0, 0, "dress_hero1"), this.spineDressHero1.createCombinedSkin("outfit", "normal0", "head1", "face1", "body1"), this.spineDressHero1.setSkinByName("outfit"), this.spineContainer.addChild(this.spineDressHero1), this.spinePlayerName1 = "dress_hero1", this.spineDressHero1.scale.setTo(t.SETTINGS.SCALE), this.spineDressHero2 = this.game.add.spine(0, 0, "dress_hero2"), this.spineDressHero2.createCombinedSkin("outfit", "normal0", "head1", "face1", "body1"), this.spineDressHero2.setSkinByName("outfit"), this.spineDressHero2.visible = !1, this.spineContainer.addChild(this.spineDressHero2), this.spinePlayerName2 = "dress_hero2", this.spineDressHero2.scale.setTo(t.SETTINGS.SCALE), this.spineMainMenuHero1 = this.game.add.spine(0, 0, "mm_hero2"), this.spineMainMenuHero1.setSkinByName("normal_mockup5"), this.spineMainMenuHero1.scale.setTo(t.SETTINGS.SCALE), this.spineMainMenuHero2 = this.game.add.spine(0, 0, "mm_bottom"), this.spineMainMenuHero2.scale.setTo(t.SETTINGS.SCALE), this.button1Player.changeFrame("small_button_select.png"), this.button3Enemies.changeFrame("small_button_select.png"), this.button5Levels.changeFrame("small_button_select.png"), this.buttonRandom.changeFrame("small_button_select.png"), this.buttonEasy.changeFrame("small_button_select.png"), this.uiMissions.visible = !1, this.uiPowerups.visible = !1, this.uiSettings.visible = !1, this.uiModeSelect.visible = !1, this.uiGameSettings.visible = !1, this.uiCharacterSelect.visible = !1, this.uiLoading.visible = !1, this.flagContainer.visible = !1, this.flagContainer.visibility.enable(!1), this.currentButtonPlayers = this.button1Player, this.currentButtonEnemies = this.button3Enemies, this.currentButtonLevels = this.button5Levels, this.currentButtonArena = this.buttonRandom, this.currentButtonDifficulty = this.buttonEasy, n.addChild(this.spineMainMenuHero2), s.addChild(this.spineMainMenuHero1), this.group.add(this.uiMainMenu), this.group.add(this.uiSettings), this.group.add(this.uiPowerups), this.group.add(this.uiModeSelect), this.group.add(this.uiGameSettings), this.group.add(this.uiCharacterSelect), this.group.add(this.overlayMissions), this.group.add(this.uiMissions), this.group.add(this.introAnim), this.group.add(this.comic), t.Instances.DataManager.getAudio() ? this.game.ph2AudioManager.getSfxEnabled() || this.game.ph2AudioManager.switchSfxState() : (this.buttonAudio.setFrames("mm_audio_off.png", "mm_audio_off.png", "mm_audio.png", "mm_audio_off.png"), this.game.ph2AudioManager.getSfxEnabled() && this.game.ph2AudioManager.switchSfxState()), t.Instances.DataManager.getMusic() ? this.game.ph2AudioManager.switchMusic(t.Music.MAIN_MENU) : (this.buttonMusic.setFrames("mm_music_off.png", "mm_music_off.png", "mm_music.png", "mm_music_off.png"), this.game.ph2AudioManager.getMusicEnabled() && this.game.ph2AudioManager.switchMusicState()), t.Instances.DataManager.getLanguage()) {
                case "en-US":
                    this.flagSelected.frameName = "eng.png", this.flagOption1.frameName = "esp.png", this.flagOption2.frameName = "hol.png";
                    break;
                case "es-ES":
                    this.flagSelected.frameName = "esp.png", this.flagOption1.frameName = "eng.png", this.flagOption2.frameName = "hol.png";
                    break;
                case "nl-NL":
                    this.flagSelected.frameName = "hol.png", this.flagOption1.frameName = "eng.png", this.flagOption2.frameName = "esp.png";
                    break;
                default:
                    this.flagSelected.frameName = "eng.png", this.flagOption1.frameName = "esp.png", this.flagOption2.frameName = "hol.png"
            }
            this.createSelectCharacterFaces(), this.createUnlockableItems(), this.obtainSkins(), this.checkCharacterItems(0), this.addTouchListeners(), this.localizeUI(), this.setMenuSkin(), this.checkTimerMissions(), this.loadMissions(), this.createMissionsMask(), this.resize()
        }, i.prototype.createMissionsMask = function() {
            var e, i, s, n, a, o, r, h;
            r = 300 * t.SETTINGS.SCALE, h = 45 * t.SETTINGS.SCALE, e = Ph2.UISystem.findObject("bg/mission1", this.uiMissions), i = Ph2.UISystem.findObject("bg/mission2", this.uiMissions), s = Ph2.UISystem.findObject("bg/mission3", this.uiMissions), n = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), a = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), o = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), this.missionMask1 = this.game.add.graphics(this.textMission1.x, this.textMission1.y - .5 * h), this.missionMask2 = this.game.add.graphics(this.textMission2.x, this.textMission2.y - .5 * h), this.missionMask3 = this.game.add.graphics(this.textMission3.x, this.textMission3.y - .5 * h), this.missionMask1.beginFill(65331), this.missionMask1.drawRect(0, 0, r - n.width, h), this.missionMask1.endFill(), this.missionMask2.beginFill(65331), this.missionMask2.drawRect(0, 0, r - a.width, h), this.missionMask2.endFill(), this.missionMask3.beginFill(65331), this.missionMask3.drawRect(0, 0, r - o.width, h), this.missionMask3.endFill(), e.addChild(this.missionMask1), i.addChild(this.missionMask2), s.addChild(this.missionMask3), this.textMission1.mask = this.missionMask1, this.textMission2.mask = this.missionMask2, this.textMission3.mask = this.missionMask3, this.getMissionLimits()
        }, i.prototype.getMissionLimits = function() {
            var e, i, s, n, a, o;
            s = 10 * t.SETTINGS.SCALE, e = 300 * t.SETTINGS.SCALE, n = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), a = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), o = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), this.textMission1.width >= e - n.width && (i = this.textMission1.width - (e - n.width), this.missionLimitLeft1 = this.textMission1.left - (i + s), this.missionLimitRight1 = this.textMission1.x + s), this.textMission2.width >= e - a.width && (i = this.textMission2.width - (e - a.width), this.missionLimitLeft2 = this.textMission2.left - (i + s), this.missionLimitRight2 = this.textMission2.x + s), this.textMission3.width >= e - o.width && (i = this.textMission3.width - (e - o.width), this.missionLimitLeft3 = this.textMission3.left - (i + s), this.missionLimitRight3 = this.textMission3.x + s)
        }, i.prototype.checkTimerMissions = function() {
            var e;
            for (e = 0; e < t.Instances.MissionManager.missionsActive.length; e++) t.Instances.MissionManager.missionsActive[e].hasTimer && t.Instances.MissionManager.missionsActive[e].progress <= t.Instances.MissionManager.missionsActive[e].requirement && t.Instances.MissionManager.missionsActive[e].restartMission()
        }, i.prototype.createSelectCharacterFaces = function() {
            var t, e;
            for (this.characterFaces = [], t = 1; t < 9; t++)(e = this.game.add.ph2AnimationObject(0, 0, "character" + t, "atlas_ui_dress_up")).ph2Animations.play("character" + t + "_stand", 1, !0), Ph2.UISystem.findObject("container/character" + t, this.uiCharacterSelect).addChildAt(e, 0), Ph2.UISystem.findObject("container/character" + t + "/player", this.uiCharacterSelect).visible = !1, Ph2.UISystem.findObject("container/character" + t + "/player", this.uiCharacterSelect).visibility.enable(!1), this.characterFaces.push(e)
        }, i.prototype.createUnlockableItems = function() {
            this.item9 = this.game.add.ph2AnimationObject(0, 0, "item9", "atlas_ui_dress_up"), this.item8 = this.game.add.ph2AnimationObject(0, 0, "item8", "atlas_ui_dress_up"), this.item7 = this.game.add.ph2AnimationObject(0, 0, "item7", "atlas_ui_dress_up"), this.item6 = this.game.add.ph2AnimationObject(0, 0, "item6", "atlas_ui_dress_up"), this.item5 = this.game.add.ph2AnimationObject(0, 0, "item5", "atlas_ui_dress_up"), this.item4 = this.game.add.ph2AnimationObject(0, 0, "item4", "atlas_ui_dress_up"), this.item3 = this.game.add.ph2AnimationObject(0, 0, "item3", "atlas_ui_dress_up"), this.item2 = this.game.add.ph2AnimationObject(0, 0, "item2", "atlas_ui_dress_up"), this.item1 = this.game.add.ph2AnimationObject(0, 0, "item1", "atlas_ui_dress_up"), this.items = [], this.items.push(this.item1, this.item2, this.item3, this.item4, this.item5, this.item6, this.item7, this.item8, this.item9), this.itemContainer9.add(this.item9), this.itemContainer8.add(this.item8), this.itemContainer7.add(this.item7), this.itemContainer6.add(this.item6), this.itemContainer5.add(this.item5), this.itemContainer4.add(this.item4), this.itemContainer3.add(this.item3), this.itemContainer2.add(this.item2), this.itemContainer1.add(this.item1), this.itemPrice1 = Ph2.AnimationSystem.findObject("price", this.item1), this.itemPrice2 = Ph2.AnimationSystem.findObject("price", this.item2), this.itemPrice3 = Ph2.AnimationSystem.findObject("price", this.item3), this.itemPrice4 = Ph2.AnimationSystem.findObject("price", this.item4), this.itemPrice5 = Ph2.AnimationSystem.findObject("price", this.item5), this.itemPrice6 = Ph2.AnimationSystem.findObject("price", this.item6), this.itemPrice7 = Ph2.AnimationSystem.findObject("price", this.item7), this.itemPrice8 = Ph2.AnimationSystem.findObject("price", this.item8), this.itemPrice9 = Ph2.AnimationSystem.findObject("price", this.item9), this.itemImages = [], this.itemImage1 = Ph2.AnimationSystem.findObject("image", this.item1), this.itemImage2 = Ph2.AnimationSystem.findObject("image", this.item2), this.itemImage3 = Ph2.AnimationSystem.findObject("image", this.item3), this.itemImage4 = Ph2.AnimationSystem.findObject("image", this.item4), this.itemImage5 = Ph2.AnimationSystem.findObject("image", this.item5), this.itemImage6 = Ph2.AnimationSystem.findObject("image", this.item6), this.itemImage7 = Ph2.AnimationSystem.findObject("image", this.item7), this.itemImage8 = Ph2.AnimationSystem.findObject("image", this.item8), this.itemImage9 = Ph2.AnimationSystem.findObject("image", this.item9), this.itemImages.push(this.itemImage1, this.itemImage2, this.itemImage3, this.itemImage4, this.itemImage5, this.itemImage6, this.itemImage7, this.itemImage8, this.itemImage9), this.itemPopups = [], this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item1", this.item1)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item2", this.item2)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item3", this.item3)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item4", this.item4)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item5", this.item5)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item6", this.item6)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item7", this.item7)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item8", this.item8)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item9", this.item9));
            for (var e = 0; e < this.itemPopups.length; e++) this.itemPopups[e].visible = !1;
            this.itemFrames = [], this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item1)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item2)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item3)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item4)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item5)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item6)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item7)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item8)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item9)), this.itemPrice1.setText(t.SETTINGS.ITEM_COSTS[0].toString()), this.itemPrice2.setText(t.SETTINGS.ITEM_COSTS[1].toString()), this.itemPrice3.setText(t.SETTINGS.ITEM_COSTS[2].toString()), this.itemPrice4.setText(t.SETTINGS.ITEM_COSTS[3].toString()), this.itemPrice5.setText(t.SETTINGS.ITEM_COSTS[4].toString()), this.itemPrice6.setText(t.SETTINGS.ITEM_COSTS[5].toString()), this.itemPrice7.setText(t.SETTINGS.ITEM_COSTS[6].toString()), this.itemPrice8.setText(t.SETTINGS.ITEM_COSTS[7].toString()), this.itemPrice9.setText(t.SETTINGS.ITEM_COSTS[8].toString())
        }, i.prototype.addTouchListeners = function() {
            var t = this;
            this.buttonMusic.onInputDown.add(this.switchMusic, this), this.buttonAudio.onInputDown.add(this.switchAudio, this), this.buttonStartGame.events.onInputDown.add(this.showIntroComic1, this), this.buttonHowToPlay.events.onInputDown.add(this.showSettings, this), this.buttonMoreGames.events.onInputDown.add(this.gotoMoreGames, this), this.buttonControls.events.onInputDown.add(this.showSettings, this), this.buttonPowerups.events.onInputDown.add(this.showPowerups, this), this.buttonBackToMainMenu1.events.onInputDown.add(this.showMainMenu, this), this.buttonBackToMainMenu2.events.onInputDown.add(this.showMainMenu, this), this.buttonBackToMainMenu3.events.onInputDown.add(this.showMainMenu, this), this.buttonNextToGameSettings.events.onInputDown.add(this.showGameSettings, this), this.buttonCharacterSelect.events.onInputDown.add(this.showCharacterSelect, this), this.buttonBackToMode.events.onInputDown.add(this.showModeSelect, this), this.buttonGotoGameplay.events.onInputDown.add(this.gotoGameplay, this), this.buttonBackToSettings.events.onInputDown.add(this.showGameSettings, this), this.buttonStartGame.events.onInputOver.add(this.buttonInputOver, this), this.buttonHowToPlay.events.onInputOver.add(this.buttonInputOver, this), this.buttonMoreGames.events.onInputOver.add(this.buttonInputOver, this), this.buttonControls.events.onInputOver.add(this.buttonInputOver, this), this.buttonPowerups.events.onInputOver.add(this.buttonInputOver, this), this.buttonBackToMainMenu1.events.onInputOver.add(this.buttonInputOver, this), this.buttonBackToMainMenu2.events.onInputOver.add(this.buttonInputOver, this), this.buttonBackToMainMenu3.events.onInputOver.add(this.buttonInputOver, this), this.buttonNextToGameSettings.events.onInputOver.add(this.buttonInputOver, this), this.buttonCharacterSelect.events.onInputOver.add(this.buttonInputOver, this), this.buttonBackToMode.events.onInputOver.add(this.buttonInputOver, this), this.buttonGotoGameplay.events.onInputOver.add(this.buttonInputOver, this), this.buttonBackToSettings.events.onInputOver.add(this.buttonInputOver, this), this.buttonStartGame.events.onInputOut.add(i.buttonInputOut, this), this.buttonHowToPlay.events.onInputOut.add(i.buttonInputOut, this), this.buttonMoreGames.events.onInputOut.add(i.buttonInputOut, this), this.buttonControls.events.onInputOut.add(i.buttonInputOut, this), this.buttonPowerups.events.onInputOut.add(i.buttonInputOut, this), this.buttonBackToMainMenu1.events.onInputOut.add(i.buttonInputOut, this), this.buttonBackToMainMenu2.events.onInputOut.add(i.buttonInputOut, this), this.buttonBackToMainMenu3.events.onInputOut.add(i.buttonInputOut, this), this.buttonNextToGameSettings.events.onInputOut.add(i.buttonInputOut, this), this.buttonCharacterSelect.events.onInputOut.add(i.buttonInputOut, this), this.buttonBackToMode.events.onInputOut.add(i.buttonInputOut, this), this.buttonGotoGameplay.events.onInputOut.add(i.buttonInputOut, this), this.buttonBackToSettings.events.onInputOut.add(i.buttonInputOut, this), this.createButtonListener(this.arrowLeft, this.selectModeLeft), this.createButtonListener(this.arrowRight, this.selectModeRight), this.createButtonListener(this.button1Player, this.selectPlayerMode), this.createButtonListener(this.button2Player, this.selectPlayerMode), this.createButtonListener(this.button0Enemies, this.selectEnemies), this.createButtonListener(this.button1Enemies, this.selectEnemies), this.createButtonListener(this.button2Enemies, this.selectEnemies), this.createButtonListener(this.button3Enemies, this.selectEnemies), this.createButtonListener(this.button20Levels, this.selectLevels), this.createButtonListener(this.button15Levels, this.selectLevels), this.createButtonListener(this.button10Levels, this.selectLevels), this.createButtonListener(this.button5Levels, this.selectLevels), this.createButtonListener(this.buttonBathroom, this.selectTheme), this.createButtonListener(this.buttonPicnic, this.selectTheme), this.createButtonListener(this.buttonBaseballField, this.selectTheme), this.createButtonListener(this.buttonCastle, this.selectTheme), this.createButtonListener(this.buttonPolarRegion, this.selectTheme), this.createButtonListener(this.buttonFarm, this.selectTheme), this.createButtonListener(this.buttonGarden, this.selectTheme), this.createButtonListener(this.buttonAquarium, this.selectTheme), this.createButtonListener(this.buttonDollhouse, this.selectTheme), this.createButtonListener(this.buttonRandom, this.selectTheme), this.createButtonListener(this.buttonEasy, this.selectDifficulty), this.createButtonListener(this.buttonNormal, this.selectDifficulty), this.createButtonListener(this.buttonHard, this.selectDifficulty), this.button1Player.events.onInputOver.add(this.settingsInputOver, this), this.button2Player.events.onInputOver.add(this.settingsInputOver, this), this.button0Enemies.events.onInputOver.add(this.settingsInputOver, this), this.button1Enemies.events.onInputOver.add(this.settingsInputOver, this), this.button2Enemies.events.onInputOver.add(this.settingsInputOver, this), this.button3Enemies.events.onInputOver.add(this.settingsInputOver, this), this.button20Levels.events.onInputOver.add(this.settingsInputOver, this), this.button15Levels.events.onInputOver.add(this.settingsInputOver, this), this.button10Levels.events.onInputOver.add(this.settingsInputOver, this), this.button5Levels.events.onInputOver.add(this.settingsInputOver, this), this.buttonBathroom.events.onInputOver.add(this.settingsInputOver, this), this.buttonPicnic.events.onInputOver.add(this.settingsInputOver, this), this.buttonBaseballField.events.onInputOver.add(this.settingsInputOver, this), this.buttonCastle.events.onInputOver.add(this.settingsInputOver, this), this.buttonPolarRegion.events.onInputOver.add(this.settingsInputOver, this), this.buttonFarm.events.onInputOver.add(this.settingsInputOver, this), this.buttonGarden.events.onInputOver.add(this.settingsInputOver, this), this.buttonAquarium.events.onInputOver.add(this.settingsInputOver, this), this.buttonDollhouse.events.onInputOver.add(this.settingsInputOver, this), this.buttonRandom.events.onInputOver.add(this.settingsInputOver, this), this.buttonEasy.events.onInputOver.add(this.settingsInputOver, this), this.buttonNormal.events.onInputOver.add(this.settingsInputOver, this), this.buttonHard.events.onInputOver.add(this.settingsInputOver, this), this.button1Player.events.onInputOut.add(this.settingsInputOut, this), this.button2Player.events.onInputOut.add(this.settingsInputOut, this), this.button0Enemies.events.onInputOut.add(this.settingsInputOut, this), this.button1Enemies.events.onInputOut.add(this.settingsInputOut, this), this.button2Enemies.events.onInputOut.add(this.settingsInputOut, this), this.button3Enemies.events.onInputOut.add(this.settingsInputOut, this), this.button20Levels.events.onInputOut.add(this.settingsInputOut, this), this.button15Levels.events.onInputOut.add(this.settingsInputOut, this), this.button10Levels.events.onInputOut.add(this.settingsInputOut, this), this.button5Levels.events.onInputOut.add(this.settingsInputOut, this), this.buttonBathroom.events.onInputOut.add(this.settingsInputOut, this), this.buttonPicnic.events.onInputOut.add(this.settingsInputOut, this), this.buttonBaseballField.events.onInputOut.add(this.settingsInputOut, this), this.buttonCastle.events.onInputOut.add(this.settingsInputOut, this), this.buttonPolarRegion.events.onInputOut.add(this.settingsInputOut, this), this.buttonFarm.events.onInputOut.add(this.settingsInputOut, this), this.buttonGarden.events.onInputOut.add(this.settingsInputOut, this), this.buttonAquarium.events.onInputOut.add(this.settingsInputOut, this), this.buttonDollhouse.events.onInputOut.add(this.settingsInputOut, this), this.buttonRandom.events.onInputOut.add(this.settingsInputOut, this), this.buttonEasy.events.onInputOut.add(this.settingsInputOut, this), this.buttonNormal.events.onInputOut.add(this.settingsInputOut, this), this.buttonHard.events.onInputOut.add(this.settingsInputOut, this), this.createButtonListener2(this.buttonCharacter1, this.selectCharacter), this.createButtonListener2(this.buttonCharacter2, this.selectCharacter), this.createButtonListener2(this.buttonCharacter3, this.selectCharacter), this.createButtonListener2(this.buttonCharacter4, this.selectCharacter), this.createButtonListener2(this.buttonCharacter5, this.selectCharacter), this.createButtonListener2(this.buttonCharacter6, this.selectCharacter), this.createButtonListener2(this.buttonCharacter7, this.selectCharacter), this.createButtonListener2(this.buttonCharacter8, this.selectCharacter), this.buttonCharacter1.onInputOver.add(this.characterOver, this), this.buttonCharacter2.onInputOver.add(this.characterOver, this), this.buttonCharacter3.onInputOver.add(this.characterOver, this), this.buttonCharacter4.onInputOver.add(this.characterOver, this), this.buttonCharacter5.onInputOver.add(this.characterOver, this), this.buttonCharacter6.onInputOver.add(this.characterOver, this), this.buttonCharacter7.onInputOver.add(this.characterOver, this), this.buttonCharacter8.onInputOver.add(this.characterOver, this), this.buttonCharacter1.onInputOut.add(this.characterOut, this), this.buttonCharacter2.onInputOut.add(this.characterOut, this), this.buttonCharacter3.onInputOut.add(this.characterOut, this), this.buttonCharacter4.onInputOut.add(this.characterOut, this), this.buttonCharacter5.onInputOut.add(this.characterOut, this), this.buttonCharacter6.onInputOut.add(this.characterOut, this), this.buttonCharacter7.onInputOut.add(this.characterOut, this), this.buttonCharacter8.onInputOut.add(this.characterOut, this), this.createItemButtonListener(this.itemImage1, this.selectFace), this.createItemButtonListener(this.itemImage2, this.selectFace), this.createItemButtonListener(this.itemImage3, this.selectFace), this.createItemButtonListener(this.itemImage4, this.selectHead), this.createItemButtonListener(this.itemImage5, this.selectHead), this.createItemButtonListener(this.itemImage6, this.selectHead), this.createItemButtonListener(this.itemImage7, this.selectBody), this.createItemButtonListener(this.itemImage8, this.selectBody), this.createItemButtonListener(this.itemImage9, this.selectBody), this.createButtonListener(this.buttonChangeCharacter, this.switchSelection), this.createButtonListener(this.flagSelected, this.openLanguage), this.createButtonListener(this.flagOption1, this.changeLanguage), this.createButtonListener(this.flagOption2, this.changeLanguage), this.createButtonListener(this.buttonBombIt2, this.gotoBombIt), this.createButtonListener(this.buttonBombIt3, this.gotoBombIt), this.createButtonListener(this.buttonBombIt4, this.gotoBombIt), this.createButtonListener(this.buttonBombIt5, this.gotoBombIt), this.createButtonListener(this.buttonBombIt6, this.gotoBombIt), this.buttonBombIt2.events.onInputOver.add(this.bombItOver, this), this.buttonBombIt3.events.onInputOver.add(this.bombItOver, this), this.buttonBombIt4.events.onInputOver.add(this.bombItOver, this), this.buttonBombIt5.events.onInputOver.add(this.bombItOver, this), this.buttonBombIt6.events.onInputOver.add(this.bombItOver, this), this.buttonBombIt2.events.onInputOut.add(this.bombItOut, this), this.buttonBombIt3.events.onInputOut.add(this.bombItOut, this), this.buttonBombIt4.events.onInputOut.add(this.bombItOut, this), this.buttonBombIt5.events.onInputOut.add(this.bombItOut, this), this.buttonBombIt6.events.onInputOut.add(this.bombItOut, this), this.arrowLeft.input.useHandCursor = !0, this.arrowRight.input.useHandCursor = !0, this.itemImage1.input.useHandCursor = !0, this.itemImage2.input.useHandCursor = !0, this.itemImage3.input.useHandCursor = !0, this.itemImage4.input.useHandCursor = !0, this.itemImage5.input.useHandCursor = !0, this.itemImage6.input.useHandCursor = !0, this.itemImage7.input.useHandCursor = !0, this.itemImage8.input.useHandCursor = !0, this.itemImage9.input.useHandCursor = !0, this.buttonBombIt2.input.useHandCursor = !0, this.buttonBombIt3.input.useHandCursor = !0, this.buttonBombIt4.input.useHandCursor = !0, this.buttonBombIt5.input.useHandCursor = !0, this.buttonBombIt6.input.useHandCursor = !0, this.buttonCharacter1.input.useHandCursor = !0, this.buttonCharacter2.input.useHandCursor = !0, this.buttonCharacter3.input.useHandCursor = !0, this.buttonCharacter4.input.useHandCursor = !0, this.buttonCharacter5.input.useHandCursor = !0, this.buttonCharacter6.input.useHandCursor = !0, this.buttonCharacter7.input.useHandCursor = !0, this.buttonCharacter8.input.useHandCursor = !0, this.buttonChangeCharacter.events.onInputOver.add(function() {
                t.buttonChangeCharacter.frameName = "change_hov_button.png", t.animationButtonChange.ph2Animations.play("change_button_pause", 1, !0)
            }, this), this.buttonChangeCharacter.events.onInputOut.add(function() {
                t.buttonChangeCharacter.frameName = "change_button.png", t.animationButtonChange.ph2Animations.play("change_button_stand", 1, !0)
            }, this), this.trophy.inputEnabled = !0, this.trophy.input.useHandCursor = !0, this.trophy.events.onInputUp.add(this.showMissions, this), this.overlayMissions.inputEnabled = !0, this.overlayMissions.events.onInputUp.add(this.closeMissions, this), this.buttonMission1.onInputUp.add(this.changeMission, this), this.buttonMission2.onInputUp.add(this.changeMission, this), this.buttonMission3.onInputUp.add(this.changeMission, this), this.textMission1.inputEnabled = !0, this.textMission2.inputEnabled = !0, this.textMission3.inputEnabled = !0, Ph2.UISystem.findObject("bg", this.uiMissions).inputEnabled = !0, this.game.input.onUp.add(this.fixCharacterButtonFrames, this)
        }, i.prototype.localizeUI = function() {
            this.textStarPoints.setText(this.totalPoints.toString()), t.Instances.LocalizationManager.localizeText("buttons_container/start_button/start_text", this.uiMainMenu, "mm_start"), t.Instances.LocalizationManager.localizeText("buttons_container/how_to_play_button/how_to_play_text", this.uiMainMenu, "mm_how_to_play"), t.Instances.LocalizationManager.localizeText("buttons_container/more_games_button/more_games_text", this.uiMainMenu, "mm_more_games"), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item1/label", this.item1, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item2/label", this.item2, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item3/label", this.item3, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item4/label", this.item4, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item5/label", this.item5, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item6/label", this.item6, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item7/label", this.item7, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item8/label", this.item8, "not_enough_stars_popup"), 216), i.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item9/label", this.item9, "not_enough_stars_popup"), 216), t.Instances.LocalizationManager.localizeText("container/container_powerup/power_ups_text", this.uiPowerups, "tutorial_power_ups"), t.Instances.LocalizationManager.localizeText("container/container_powerup/bomb_icon/text", this.uiPowerups, "tutorial_bomb_text"), t.Instances.LocalizationManager.localizeText("container/container_powerup/power_blast_icon/text", this.uiPowerups, "tutorial_power_text"), t.Instances.LocalizationManager.localizeText("container/container_powerup/speed_icon/text", this.uiPowerups, "tutorial_speed_text"), t.Instances.LocalizationManager.localizeText("container/container_powerup/life_icon/text", this.uiPowerups, "tutorial_life_text"), t.Instances.LocalizationManager.localizeText("container/container_powerup/shield_icon/text", this.uiPowerups, "tutorial_shield_text"), t.Instances.LocalizationManager.localizeText("container/container_powerup/bomb_launcher_icon/text", this.uiPowerups, "tutorial_bomb_launcher_text"), t.Instances.LocalizationManager.localizeText("container/container_powerup/invincibility_icon/text", this.uiPowerups, "tutorial_invincibility_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/weapons_text", this.uiPowerups, "tutorial_weapons"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/flamethrower_icon/text", this.uiPowerups, "tutorial_flamethrower_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/lightning_icon/text", this.uiPowerups, "tutorial_lighting_gun_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/hammer_icon/text", this.uiPowerups, "tutorial_hammer_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/electric_gun_icon/text", this.uiPowerups, "tutorial_electric_gun_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/thor_hammer_icon/text", this.uiPowerups, "tutorial_thor_hammer_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/ice_gun_icon/text", this.uiPowerups, "tutorial_ice_gun_text"), t.Instances.LocalizationManager.localizeText("container/container_weapoms/doll_bomb_icon/text", this.uiPowerups, "tutorial_doll_bomb_text"), t.Instances.LocalizationManager.localizeText("container/container_vehicles/vehicles_text", this.uiPowerups, "tutorial_vehicles"), t.Instances.LocalizationManager.localizeText("container/container_vehicles/stag_icon/text", this.uiPowerups, "tutorial_stag_text"), t.Instances.LocalizationManager.localizeText("container/container_vehicles/cart_icon/text", this.uiPowerups, "tutorial_cart_text"), t.Instances.LocalizationManager.localizeText("container/container_vehicles/horse_icon/text", this.uiPowerups, "tutorial_horse_text"), t.Instances.LocalizationManager.localizeText("container/container_vehicles/skateboard_icon/text", this.uiPowerups, "tutorial_skateboard_text"), t.Instances.LocalizationManager.localizeText("container/back_button/back_text", this.uiPowerups, "back"), t.Instances.LocalizationManager.localizeText("container/controls_button/control_text", this.uiPowerups, "tutorial_controls"), t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiSettings, "tutorial_controls"), t.Instances.LocalizationManager.localizeText("container/controls_mobile/move_text", this.uiSettings, "tutorial_move"), t.Instances.LocalizationManager.localizeText("container/controls_mobile/bomb_text", this.uiSettings, "tutorial_bomb"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/move_text", this.uiSettings, "tutorial_move"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/bomb_text", this.uiSettings, "tutorial_bomb"), t.Instances.LocalizationManager.localizeText("container/back_button/text", this.uiSettings, "back"), t.Instances.LocalizationManager.localizeText("container/power_ups_button/text", this.uiSettings, "tutorial_power_ups"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/1player_bomb_text", this.uiSettings, "spacebar"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/1players_up_text", this.uiSettings, "arrow_up"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/1players_down_text", this.uiSettings, "arrow_down"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/1players_left_text", this.uiSettings, "arrow_left"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/1players_right_text", this.uiSettings, "arrow_right"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p1_bomb_text", this.uiSettings, "spacebar"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p1_up_text", this.uiSettings, "w", !0), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p1_down_text", this.uiSettings, "s", !0), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p1_left_text", this.uiSettings, "a", !0), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p1_right_text", this.uiSettings, "d", !0), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p2_bomb_text", this.uiSettings, "enter"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p2_up_text", this.uiSettings, "arrow_up"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p2_down_text", this.uiSettings, "arrow_down"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p2_left_text", this.uiSettings, "arrow_left"), t.Instances.LocalizationManager.localizeText("container/controls_desktop/keys/2players_p2_right_text", this.uiSettings, "arrow_right"), t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiModeSelect, "gm_select_mode"), t.Instances.LocalizationManager.localizeText("container/back_button/back_text", this.uiModeSelect, "back"), t.Instances.LocalizationManager.localizeText("container/next_button/next_text", this.uiModeSelect, "next"), t.Instances.LocalizationManager.localizeText("container/description", this.uiModeSelect, "gm_arcade"), t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiGameSettings, "settings"), t.Instances.LocalizationManager.localizeText("container/players_text", this.uiGameSettings, "settings_players"), t.Instances.LocalizationManager.localizeText("container/enemies_text", this.uiGameSettings, "settings_enemies"), t.Instances.LocalizationManager.localizeText("container/levels_text", this.uiGameSettings, "settings_levels"), t.Instances.LocalizationManager.localizeText("container/arena_text", this.uiGameSettings, "settings_arena"), t.Instances.LocalizationManager.localizeText("container/difficulty_text", this.uiGameSettings, "settings_difficulty"), t.Instances.LocalizationManager.localizeText("container/back_button/text", this.uiGameSettings, "back"), t.Instances.LocalizationManager.localizeText("container/ok_button/text", this.uiGameSettings, "ok"), t.Instances.LocalizationManager.localizeText("container/bathroom_button/text", this.uiGameSettings, "arena_boutique"), t.Instances.LocalizationManager.localizeText("container/castle_button/text", this.uiGameSettings, "arena_forest"), t.Instances.LocalizationManager.localizeText("container/garden_button/text", this.uiGameSettings, "arena_toy_store"), t.Instances.LocalizationManager.localizeText("container/aquarium_button/text", this.uiGameSettings, "arena_christmas"), t.Instances.LocalizationManager.localizeText("container/polar_region_button/text", this.uiGameSettings, "arena_race_track"), t.Instances.LocalizationManager.localizeText("container/picnic_button/text", this.uiGameSettings, "arena_bakery"), t.Instances.LocalizationManager.localizeText("container/dollhouse_button/text", this.uiGameSettings, "arena_beach"), t.Instances.LocalizationManager.localizeText("container/farm_button/text", this.uiGameSettings, "arena_ranch"), t.Instances.LocalizationManager.localizeText("container/baseball_field_button/text", this.uiGameSettings, "arena_classroom"), t.Instances.LocalizationManager.localizeText("container/random_button/text", this.uiGameSettings, "arena_random"), t.Instances.LocalizationManager.localizeText("container/easy_button/text", this.uiGameSettings, "settings_easy"), t.Instances.LocalizationManager.localizeText("container/normal_button/text", this.uiGameSettings, "settings_normal"), t.Instances.LocalizationManager.localizeText("container/hard_button/text", this.uiGameSettings, "settings_hard"), t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiCharacterSelect, "dress_up_character"), t.Instances.LocalizationManager.localizeText("container/start_button/text", this.uiCharacterSelect, "start"), t.Instances.LocalizationManager.localizeText("container/back_button/text", this.uiCharacterSelect, "back"), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/bomb_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/power_blast_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/speed_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/life_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/shield_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/bomb_launcher_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_powerup/invincibility_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/weapons_text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/flamethrower_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/lightning_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/hammer_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/electric_gun_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/thor_hammer_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/ice_gun_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_weapoms/doll_bomb_icon/text", this.uiPowerups, 170 * t.SETTINGS.SCALE, -1, 22 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_title/title", this.uiCharacterSelect, 350 * t.SETTINGS.SCALE, -1, 42 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/controls_mobile/move_text", this.uiSettings, 100 * t.SETTINGS.SCALE, -1, 27 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/controls_mobile/bomb_text", this.uiSettings, 100 * t.SETTINGS.SCALE, -1, 27 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/controls_desktop/move_text", this.uiSettings, 100 * t.SETTINGS.SCALE, -1, 27 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/controls_desktop/bomb_text", this.uiSettings, 100 * t.SETTINGS.SCALE, -1, 27 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/bathroom_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/castle_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/garden_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/aquarium_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/polar_region_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/picnic_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/dollhouse_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/farm_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/baseball_field_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/random_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/easy_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/normal_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/hard_button/text", this.uiGameSettings, 150 * t.SETTINGS.SCALE, -1, 24 * t.SETTINGS.SCALE), this.textGameMode = Ph2.UISystem.findObject("container/description", this.uiModeSelect), this.blackContainerGameMode.width = this.textGameMode.width + 75 * t.SETTINGS.SCALE
        }, i.prototype.openLanguage = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), this.flagContainer.visible = !this.flagContainer.visible
        }, i.prototype.closeLanguage = function() {
            this.flagContainer.visible = !1
        }, i.prototype.changeLanguage = function(e) {
            var i, s, n;
            switch (i = this.flagSelected.frameName, s = e.frameName, e.frameName) {
                case "eng.png":
                    n = "en-US";
                    break;
                case "esp.png":
                    n = "es-ES";
                    break;
                case "hol.png":
                    n = "nl-NL";
                    break;
                default:
                    n = "en-US"
            }
            this.flagSelected.frameName = s, e.frameName = i, this.game.ph2AudioManager.playEffect("menuPress", !1), t.Instances.LocalizationManager = new t.LocalizationManager(this.game, n), t.Instances.DataManager.saveLanguage(n), this.localizeUI(), this.loadMissions(), this.closeLanguage()
        }, i.prototype.switchAudio = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), t.Instances.DataManager.getAudio() ? (this.game.ph2AudioManager.switchSfxState(), t.Instances.DataManager.saveAudio(!1), this.buttonAudio.setFrames("mm_audio_off.png", "mm_audio_off.png", "mm_audio.png", "mm_audio_off.png")) : (this.game.ph2AudioManager.switchSfxState(), t.Instances.DataManager.saveAudio(!0), this.buttonAudio.setFrames("mm_audio.png", "mm_audio.png", "mm_audio_off.png", "mm_audio.png"))
        }, i.prototype.switchMusic = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), t.Instances.DataManager.getMusic() ? (this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.stopMusic(), t.Instances.DataManager.saveMusic(!1), this.buttonMusic.setFrames("mm_music_off.png", "mm_music_off.png", "mm_music.png", "mm_music_off.png")) : (this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.playMusic(t.Music.MAIN_MENU), t.Instances.DataManager.saveMusic(!0), this.buttonMusic.setFrames("mm_music.png", "mm_music.png", "mm_music_off.png", "mm_music.png"))
        }, i.prototype.showMainMenu = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), this.uiPowerups.visible = !1, this.uiSettings.visible = !1, this.uiModeSelect.visible = !1, this.uiMainMenu.visible = !0, this.setMenuSkin()
        }, i.prototype.setMenuSkin = function() {
            var t, e, i, s, n, a, o, r, h, l, c, u;
            o = ["body1", "body2", "body3", "body4"], l = ["head1", "head2", "head3", "head4"], r = ["hero1_body1", "hero1_body2", "hero1_body3", "hero1_body4"], h = ["hero7_body1", "hero7_body2", "hero7_body3", "hero7_body4"], c = ["hero1_decor1", "hero1_decor2", "hero1_decor3", "hero1_decor4"], u = ["hero7_head1", "hero7_head2", "hero7_head3", "hero7_head4"], t = this.game.rnd.pick(l), e = this.game.rnd.pick(o), i = this.game.rnd.pick(c), s = this.game.rnd.pick(u), n = this.game.rnd.pick(r), a = this.game.rnd.pick(h), this.spineMainMenuHero1.createCombinedSkin("outfit1" + t + e, "normal", t, e), this.spineMainMenuHero2.createCombinedSkin("outfit2" + i + s, "default", i, n, s, a), this.spineMainMenuHero1.setToSetupPose(), this.spineMainMenuHero1.setSkinByName("outfit1" + t + e), this.spineMainMenuHero1.setAnimationByName(0, "anim_face", !0), this.spineMainMenuHero1.setAnimationByName(1, "mm", !0), this.spineMainMenuHero2.setToSetupPose(), this.spineMainMenuHero2.setSkinByName("outfit2" + i + s), this.spineMainMenuHero2.setAnimationByName(1, "mm", !0), this.spineMainMenuHero1.visible = !0, this.spineMainMenuHero2.visible = !0
        }, i.prototype.loadMissions = function() {
            var e, i, s, n, a, o;
            Ph2.UISystem.findObject("pause_button", this.uiMissions).visible = !1, Ph2.UISystem.findObject("bg/description", this.uiMissions).visible = !1, Ph2.UISystem.findObject("sound_container", this.uiMissions).visible = !1, Ph2.UISystem.findObject("main_menu_button", this.uiMissions).visible = !1, Ph2.UISystem.findObject("pause_button", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/description", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("sound_container", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("main_menu_button", this.uiMissions).visibility.enable(!1), e = t.Instances.MissionManager.missionsActive[0], i = t.Instances.MissionManager.missionsActive[1], s = t.Instances.MissionManager.missionsActive[2], n = e.progress + "/" + e.requirement, a = i.progress + "/" + i.requirement, o = s.progress + "/" + s.requirement, t.Instances.LocalizationManager.localizeText("bg/mission1/description", this.uiMissions, e.name), t.Instances.LocalizationManager.localizeText("bg/mission1/mission", this.uiMissions, n, !0), t.Instances.LocalizationManager.localizeText("bg/mission1/score", this.uiMissions, e.reward.toString(), !0), t.Instances.LocalizationManager.localizeText("bg/mission2/description", this.uiMissions, i.name), t.Instances.LocalizationManager.localizeText("bg/mission2/mission", this.uiMissions, a, !0), t.Instances.LocalizationManager.localizeText("bg/mission2/score", this.uiMissions, i.reward.toString(), !0), t.Instances.LocalizationManager.localizeText("bg/mission3/description", this.uiMissions, s.name), t.Instances.LocalizationManager.localizeText("bg/mission3/mission", this.uiMissions, o, !0), t.Instances.LocalizationManager.localizeText("bg/mission3/score", this.uiMissions, s.reward.toString(), !0), Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visible = e.complete, Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visible = i.complete, Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visible = s.complete, Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visibility.enable(!1)
        }, i.prototype.showMissions = function() {
            this.overlayMissions.revive(), this.uiMissions.visible = !0
        }, i.prototype.closeMissions = function() {
            this.stopMovingMissionText(this.textMission1), this.stopMovingMissionText(this.textMission2), this.stopMovingMissionText(this.textMission3), this.overlayMissions.kill(), this.uiMissions.visible = !1
        }, i.prototype.checkMissionText = function(e) {
            var i, s, n, a;
            switch (s = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), n = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), a = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), e.parent.name) {
                case "mission1":
                    i = 300 * t.SETTINGS.SCALE - s.width;
                    break;
                case "mission2":
                    i = 300 * t.SETTINGS.SCALE - n.width;
                    break;
                case "mission3":
                    i = 300 * t.SETTINGS.SCALE - a.width
            }
            if (e.width > i) switch (e.width - i, e.parent.name) {
                case "mission1":
                    this.movingText1 = !0;
                    break;
                case "mission2":
                    this.movingText2 = !0;
                    break;
                case "mission3":
                    this.movingText3 = !0
            } else switch (e.parent.name) {
                case "mission1":
                    this.movingText1 = !1;
                    break;
                case "mission2":
                    this.movingText2 = !1;
                    break;
                case "mission3":
                    this.movingText3 = !1
            }
        }, i.prototype.stopMovingMissionText = function(t) {
            switch (t.parent.name) {
                case "mission1":
                    this.movingText1 = !1;
                    break;
                case "mission2":
                    this.movingText2 = !1;
                    break;
                case "mission3":
                    this.movingText3 = !1;
                    break;
                default:
                    this.movingText1 = !1, this.movingText2 = !1, this.movingText3 = !1
            }
        }, i.prototype.changeMission = function(e) {
            var i, s, n, a, o = this;
            switch (i = e.parent.name) {
                case "mission1":
                    s = 0, a = this.buttonMission1;
                    break;
                case "mission2":
                    s = 1, a = this.buttonMission2;
                    break;
                case "mission3":
                    s = 2, a = this.buttonMission3;
                    break;
                default:
                    return
            }
            a.inputEnabled = !1, n = Ph2.UISystem.findObject("bg/" + i, this.uiMissions), t.Instances.MissionManager.changeMission(s), this.game.add.tween(n).to({
                alpha: 0
            }, 500, "Linear", !0).onComplete.add(function() {
                o.onMissionFadeComplete(s)
            }, this)
        }, i.prototype.onMissionFadeComplete = function(e) {
            var i, s, n, a, o, r, h, l, c, u, d, p;
            switch (u = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), d = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), p = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), r = 10 * t.SETTINGS.SCALE, h = 300 * t.SETTINGS.SCALE, i = "mission" + (e + 1), n = t.Instances.MissionManager.missionsActive[e], s = n.progress + "/" + n.requirement, a = Ph2.UISystem.findObject("bg/" + i, this.uiMissions), c = Ph2.UISystem.findObject("bg/" + i + "/description", this.uiMissions), c.x = -192.5 * t.SETTINGS.SCALE, t.Instances.LocalizationManager.localizeText("bg/" + i + "/description", this.uiMissions, n.name), t.Instances.LocalizationManager.localizeText("bg/" + i + "/mission", this.uiMissions, s, !0), t.Instances.LocalizationManager.localizeText("bg/" + i + "/score", this.uiMissions, n.reward.toString(), !0), i) {
                case "mission1":
                    o = this.buttonMission1, this.textMission1.width >= h - u.width && (l = this.textMission1.width - (h - u.width), this.textMission1.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft1 = this.textMission1.left - (l + r), this.missionLimitRight1 = this.textMission1.x + r, this.missionMask1.width = h - u.width), Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visible = !1;
                    break;
                case "mission2":
                    o = this.buttonMission2, this.textMission2.width >= h - d.width && (l = this.textMission2.width - (h - d.width), this.textMission2.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft2 = this.textMission2.left - (l + r), this.missionLimitRight2 = this.textMission2.x + r, this.missionMask2.width = h - d.width), Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visible = !1;
                    break;
                case "mission3":
                    o = this.buttonMission3, this.textMission3.width >= h - p.width && (l = this.textMission3.width - (h - p.width), this.textMission3.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft3 = this.textMission3.left - (l + r), this.missionLimitRight3 = this.textMission3.x + r, this.missionMask3.width = h - p.width), Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visible = !1;
                    break;
                default:
                    return
            }
            this.game.add.tween(a).to({
                alpha: 1
            }, 500, "Linear", !0).onComplete.add(function() {
                o.inputEnabled = !0, o.input.useHandCursor = !0
            }, this)
        }, i.prototype.showSettings = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), Ph2.UISystem.findObject("bomb", this.uiSettings).addChild(this.bomb), this.bomb.ph2Animations.play("bomb_decor", 1, !0), this.bomb.visible = !0, this.spineMainMenuHero1.visible = !1, this.spineMainMenuHero2.visible = !1, this.uiMainMenu.visible = !1, this.uiPowerups.visible = !1, this.uiSettings.visible = !0
        }, i.prototype.showPowerups = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), Ph2.UISystem.findObject("bomb", this.uiPowerups).addChild(this.bomb), this.bomb.ph2Animations.play("bomb_decor", 1, !0), this.bomb.visible = !0, this.spineMainMenuHero1.visible = !1, this.spineMainMenuHero2.visible = !1, this.uiMainMenu.visible = !1, this.uiSettings.visible = !1, this.uiPowerups.visible = !0
        }, i.prototype.showIntroComic1 = function() {
            var e = this;
            this.game.ph2AudioManager.switchMusic(t.Music.COMIC_INTRO), this.game.ph2AudioManager.playEffect("menuPress", !1), this.comic.showIntroComic1().onComplete.add(function() {
                e.comic.hideComics(), e.showModeSelect()
            }, this)
        }, i.prototype.showModeSelect = function() {
            this.game.ph2AudioManager.switchMusic(t.Music.MAIN_MENU), this.game.ph2AudioManager.stopEffect(this.audioComic1), this.spineMainMenuHero1.visible = !1, this.spineMainMenuHero2.visible = !1, this.uiSettings.visible = !1, this.uiPowerups.visible = !1, this.uiMainMenu.visible = !1, this.uiGameSettings.visible = !1, this.uiModeSelect.visible = !0, this.closeLanguage(), this.resetSettingsButtons(), this.enableButton0Enemies(!1), Ph2.UISystem.findObject("container/trophy", this.uiModeSelect).addChild(this.trophy), Ph2.UISystem.findObject("bomb", this.uiModeSelect).addChild(this.bomb), this.bomb.ph2Animations.play("bomb_decor", 1, !0), this.bomb.visible = !0, this.trophy.ph2Animations.play("trophy_stand", 1, !0), this.trophy.visible = !0, this.currentButtonPlayers = this.button1Player, this.currentButtonEnemies = this.button3Enemies, this.currentButtonLevels = this.button5Levels, this.currentButtonArena = this.buttonRandom, this.currentButtonDifficulty = this.buttonEasy, this.playerMode = t.PLAYER_MODE.SINGLE_PLAYER, this.enemiesSelected = 3, this.levelsSelected = 5, this.mapTheme = t.MAP_THEME.RANDOM, this.difficulty = t.DIFFICULTY.EASY
        }, i.prototype.resetSettingsButtons = function() {
            this.button1Player.changeFrame("small_button_select.png"), this.button2Player.changeFrame("small_button_normal.png"), this.button0Enemies.changeFrame("small_button_normal.png"), this.button1Enemies.changeFrame("small_button_normal.png"), this.button2Enemies.changeFrame("small_button_normal.png"), this.button3Enemies.changeFrame("small_button_select.png"), this.button20Levels.changeFrame("small_button_normal.png"), this.button15Levels.changeFrame("small_button_normal.png"), this.button10Levels.changeFrame("small_button_normal.png"), this.button5Levels.changeFrame("small_button_select.png"), this.buttonAquarium.changeFrame("small_button_normal.png"), this.buttonBathroom.changeFrame("small_button_normal.png"), this.buttonBaseballField.changeFrame("small_button_normal.png"), this.buttonCastle.changeFrame("small_button_normal.png"), this.buttonDollhouse.changeFrame("small_button_normal.png"), this.buttonFarm.changeFrame("small_button_normal.png"), this.buttonGarden.changeFrame("small_button_normal.png"), this.buttonPolarRegion.changeFrame("small_button_normal.png"), this.buttonPicnic.changeFrame("small_button_normal.png"), this.buttonRandom.changeFrame("small_button_select.png"), this.buttonEasy.changeFrame("small_button_select.png"), this.buttonNormal.changeFrame("small_button_normal.png"), this.buttonHard.changeFrame("small_button_normal.png")
        }, i.prototype.showGameSettings = function() {
            this.game.analytics.google.sendScreenView("game_settings"), this.game.ph2AudioManager.playEffect("menuPress", !1), this.uiModeSelect.visible = !1, this.uiCharacterSelect.visible = !1, this.uiGameSettings.visible = !0, Ph2.UISystem.findObject("container/trophy", this.uiGameSettings).addChild(this.trophy), Ph2.UISystem.findObject("bomb", this.uiGameSettings).addChild(this.bomb), this.bomb.ph2Animations.play("bomb_decor", 1, !0), this.bomb.visible = !0, this.trophy.ph2Animations.play("trophy_stand", 1, !0), this.trophy.visible = !0
        }, i.prototype.showCharacterSelect = function() {
            this.game.analytics.google.sendScreenView("character_select");
            var e;
            this.game.ph2AudioManager.playEffect("menuPress", !1), this.uiGameSettings.visible = !1, this.uiCharacterSelect.visible = !0, this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (this.currentButtonCharacterP1.setFrames("face_hover.png", "face_hover.png", "face_hover.png", "face_hover.png"), this.currentButtonCharacterP2.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[0] + 1) + "/player", this.uiCharacterSelect)).visible = !0, e.visibility.enable(!0), e.frameName = "face_p1.png", (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[1] + 1) + "/player", this.uiCharacterSelect)).visible = !1, e.visibility.enable(!1), e.frameName = "face_p2.png") : (this.currentButtonCharacterP1.setFrames("face_hover.png", "face_hover.png", "face_hover.png", "face_hover.png"), this.currentButtonCharacterP2.setFrames("face_hover.png", "face_hover.png", "face_hover.png", "face_hover.png"), (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[0] + 1) + "/player", this.uiCharacterSelect)).visible = !0, e.visibility.enable(!0), e.frameName = "face_p1.png", (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[1] + 1) + "/player", this.uiCharacterSelect)).visible = !0, e.visibility.enable(!0), e.frameName = "face_p2.png"), Ph2.UISystem.findObject("container/trophy", this.uiCharacterSelect).addChild(this.trophy), Ph2.UISystem.findObject("bomb", this.uiCharacterSelect).addChild(this.bomb), this.bomb.ph2Animations.play("bomb_decor", 1, !0), this.bomb.visible = !0, this.trophy.ph2Animations.play("trophy_stand", 1, !0), this.trophy.visible = !0, this.selectCharacter(this.currentButtonCharacterP1)
        }, i.prototype.selectModeLeft = function() {
            if (this.game.ph2AudioManager.playEffect("menuPress", !1), --this.gameMode < 0) return this.gameMode = 5, void this.selectModeLeft();
            this.changeModeImage(), this.changeModeDescription()
        }, i.prototype.selectModeRight = function() {
            if (this.game.ph2AudioManager.playEffect("menuPress", !1), ++this.gameMode > 4) return this.gameMode = -1, void this.selectModeRight();
            this.changeModeImage(), this.changeModeDescription()
        }, i.prototype.enableButton0Enemies = function(t) {
            t ? (this.button0Enemies.inputEnabled = !0, this.button0Enemies.changeFrame("small_button_normal.png")) : (this.button0Enemies.inputEnabled = !1, this.button0Enemies.changeFrame("small_button_lock.png"))
        }, i.prototype.changeModeImage = function() {
            var e;
            switch (this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    e = "sm_image_1.png";
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    e = "sm_image_2.png";
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    e = "sm_image_3.png";
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    e = "sm_image_5.png";
                    break;
                case t.GAME_MODE.ICE_MAN:
                    e = "sm_image_4.png"
            }
            this.imageModeSelected.frameName = e
        }, i.prototype.changeModeDescription = function() {
            var e;
            switch (this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    e = "gm_arcade";
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    e = "gm_battle_royale";
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    e = "gm_new_pacman";
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    e = "gm_star_collector";
                    break;
                case t.GAME_MODE.ICE_MAN:
                    e = "gm_ice_man"
            }
            t.Instances.LocalizationManager.localizeText("container/description", this.uiModeSelect, e), this.textGameMode = Ph2.UISystem.findObject("container/description", this.uiModeSelect), this.blackContainerGameMode.width = this.textGameMode.width + 75 * t.SETTINGS.SCALE
        }, i.prototype.update = function() {
            this.updateButtonsSelected(), this.uiMissions.visible && this.updateMissionText(), this.popupTimer > -1 && (this.popupTimer -= this.game.time.elapsedMS, this.popupTimer <= 0 && (this.popupTimer = -1, this.itemPopups[this.visiblePopup].visible && (this.itemPopups[this.visiblePopup].visible = !1, this.visiblePopup = -1)))
        }, i.prototype.updateMissionText = function() {
            var e, i, s, n, a, o, r, h, l, c;
            this.checkMissionText(this.textMission1), this.checkMissionText(this.textMission2), this.checkMissionText(this.textMission3), (this.movingText1 || this.movingText2 || this.movingText3) && (h = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), l = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), c = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), r = .5 * t.SETTINGS.SCALE, this.movingText1 && (n = this.directionMission1, e = 300 * t.SETTINGS.SCALE - h.width), this.movingText2 && (a = this.directionMission2, i = 300 * t.SETTINGS.SCALE - l.width), this.movingText3 && (o = this.directionMission3, s = 300 * t.SETTINGS.SCALE - c.width), this.textMission1.width > e && ("left" === n ? (this.textMission1.x -= r, this.textMission1.x <= this.missionLimitLeft1 && (n = "right")) : "right" === n && (this.textMission1.x += r, this.textMission1.x >= this.missionLimitRight1 && (n = "left")), this.directionMission1 = n), this.textMission2.width > i && ("left" === a ? (this.textMission2.x -= r, this.textMission2.x <= this.missionLimitLeft2 && (a = "right")) : "right" === a && (this.textMission2.x += r, this.textMission2.x >= this.missionLimitRight2 && (a = "left")), this.directionMission2 = a), this.textMission3.width > s && ("left" === o ? (this.textMission3.x -= r, this.textMission3.x <= this.missionLimitLeft3 && (o = "right")) : "right" === o && (this.textMission3.x += r, this.textMission3.x >= this.missionLimitRight3 && (o = "left")), this.directionMission3 = o))
        }, i.prototype.updateButtonsSelected = function() {
            this.uiGameSettings.visible && (this.changeFrameTimer += this.game.time.elapsedMS, this.changeFrameTimer >= 100 && (this.changeFrameTimer = 0, "small_button_select.png" === this.currentFrameButtons ? this.currentFrameButtons = "small_button_select2.png" : this.currentFrameButtons = "small_button_select.png", this.currentButtonPlayers.changeFrame(this.currentFrameButtons), this.currentButtonEnemies.changeFrame(this.currentFrameButtons), this.currentButtonLevels.changeFrame(this.currentFrameButtons), this.currentButtonArena.changeFrame(this.currentFrameButtons), this.currentButtonDifficulty.changeFrame(this.currentFrameButtons)))
        }, i.prototype.checkPlayerNumberAndMode = function() {
            this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (this.button3Enemies.inputEnabled = !0, this.button3Enemies.changeFrame("small_button_normal.png"), this.button0Enemies.inputEnabled = !1, this.button0Enemies.changeFrame("small_button_lock.png")) : this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.button3Enemies.inputEnabled = !1, this.button3Enemies.changeFrame("small_button_lock.png"), this.button0Enemies.inputEnabled = !0, this.button0Enemies.changeFrame("small_button_normal.png")) : (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (this.button3Enemies.inputEnabled = !0, this.button3Enemies.changeFrame("small_button_normal.png")) : this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.button3Enemies.inputEnabled = !1, this.button3Enemies.changeFrame("small_button_lock.png")), this.button0Enemies.inputEnabled = !1, this.button0Enemies.changeFrame("small_button_lock.png"))
        }, i.prototype.selectPlayerMode = function(e) {
            switch (this.game.ph2AudioManager.playEffect("menuPress", !1), this.button1Player.changeFrame("small_button_normal.png"), this.button2Player.changeFrame("small_button_normal.png"), e.name) {
                case "1player_button":
                    this.playerMode = t.PLAYER_MODE.SINGLE_PLAYER, this.animationButtonChange.visible = !1;
                    break;
                case "2player_button":
                    this.playerMode = t.PLAYER_MODE.MULTI_PLAYER, this.animationButtonChange.visible = !0
            }
            this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER && (this.currentButtonEnemies === this.button0Enemies && (this.currentButtonEnemies = this.button1Enemies, this.enemiesSelected = 1), this.gameMode === t.GAME_MODE.BATTLE_ROYALE && this.enableButton0Enemies(!1), this.selectingPlayer1 = !0, this.selectingPlayer2 = !1, this.currentCharacterOn = this.charactersChosen[0], this.spineDressHero1.visible = !0, this.spineDressHero2.visible = !1), this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.currentButtonEnemies === this.button3Enemies && (this.currentButtonEnemies = this.button2Enemies, this.enemiesSelected = 2, this.button2Enemies.changeFrame("small_button_select.png")), this.gameMode === t.GAME_MODE.BATTLE_ROYALE && this.enableButton0Enemies(!0)), this.checkPlayerNumberAndMode(), e.changeFrame("small_button_select.png"), this.currentButtonPlayers = e
        }, i.prototype.selectEnemies = function(t) {
            switch (this.game.ph2AudioManager.playEffect("menuPress", !1), this.button3Enemies.changeFrame("small_button_normal.png"), this.button2Enemies.changeFrame("small_button_normal.png"), this.button1Enemies.changeFrame("small_button_normal.png"), this.button0Enemies.changeFrame("small_button_normal.png"), t.name) {
                case "0enemies_button":
                    this.enemiesSelected = 0;
                    break;
                case "1enemies_button":
                    this.enemiesSelected = 1;
                    break;
                case "2enemies_button":
                    this.enemiesSelected = 2;
                    break;
                case "3enemies_button":
                    this.enemiesSelected = 3
            }
            this.checkPlayerNumberAndMode(), t.changeFrame("small_button_select.png"), this.currentButtonEnemies = t
        }, i.prototype.selectLevels = function(t) {
            switch (this.game.ph2AudioManager.playEffect("menuPress", !1), this.button20Levels.changeFrame("small_button_normal.png"), this.button15Levels.changeFrame("small_button_normal.png"), this.button10Levels.changeFrame("small_button_normal.png"), this.button5Levels.changeFrame("small_button_normal.png"), t.name) {
                case "20levels_button":
                    this.levelsSelected = 20;
                    break;
                case "15levels_button":
                    this.levelsSelected = 15;
                    break;
                case "10levels_button":
                    this.levelsSelected = 10;
                    break;
                case "5levels_button":
                    this.levelsSelected = 5
            }
            t.changeFrame("small_button_select.png"), this.currentButtonLevels = t
        }, i.prototype.selectTheme = function(e) {
            switch (this.game.ph2AudioManager.playEffect("menuPress", !1), this.buttonAquarium.changeFrame("small_button_normal.png"), this.buttonBathroom.changeFrame("small_button_normal.png"), this.buttonBaseballField.changeFrame("small_button_normal.png"), this.buttonCastle.changeFrame("small_button_normal.png"), this.buttonDollhouse.changeFrame("small_button_normal.png"), this.buttonFarm.changeFrame("small_button_normal.png"), this.buttonGarden.changeFrame("small_button_normal.png"), this.buttonPolarRegion.changeFrame("small_button_normal.png"), this.buttonPicnic.changeFrame("small_button_normal.png"), this.buttonRandom.changeFrame("small_button_normal.png"), e.name) {
                case "aquarium_button":
                    this.mapTheme = t.MAP_THEME.CHRISTMAS;
                    break;
                case "bathroom_button":
                    this.mapTheme = t.MAP_THEME.BOUTIQUE;
                    break;
                case "baseball_field_button":
                    this.mapTheme = t.MAP_THEME.CLASSROOM;
                    break;
                case "castle_button":
                    this.mapTheme = t.MAP_THEME.FOREST;
                    break;
                case "dollhouse_button":
                    this.mapTheme = t.MAP_THEME.BEACH;
                    break;
                case "farm_button":
                    this.mapTheme = t.MAP_THEME.RANCH;
                    break;
                case "garden_button":
                    this.mapTheme = t.MAP_THEME.TOY_STORE;
                    break;
                case "polar_region_button":
                    this.mapTheme = t.MAP_THEME.RACE_TRACK;
                    break;
                case "picnic_button":
                    this.mapTheme = t.MAP_THEME.BAKERY;
                    break;
                case "random_button":
                    this.mapTheme = t.MAP_THEME.RANDOM
            }
            e.changeFrame("small_button_select.png"), this.currentButtonArena = e
        }, i.prototype.selectDifficulty = function(e) {
            switch (this.game.ph2AudioManager.playEffect("menuPress", !1), this.buttonEasy.changeFrame("small_button_normal.png"), this.buttonNormal.changeFrame("small_button_normal.png"), this.buttonHard.changeFrame("small_button_normal.png"), e.name) {
                case "easy_button":
                    this.difficulty = t.DIFFICULTY.EASY;
                    break;
                case "normal_button":
                    this.difficulty = t.DIFFICULTY.NORMAL;
                    break;
                case "hard_button":
                    this.difficulty = t.DIFFICULTY.HARD
            }
            e.changeFrame("small_button_select.png"), this.currentButtonDifficulty = e
        }, i.prototype.selectCharacter = function(e, i, s) {
            var n, a, o, r, h, l;
            if (!1 !== s) {
                switch (e.name) {
                    case "character1_button":
                        n = 0, a = "item1", o = "dress_hero1";
                        break;
                    case "character2_button":
                        n = 1, a = "item2", o = "dress_hero2";
                        break;
                    case "character3_button":
                        n = 2, a = "item3", o = "dress_hero3";
                        break;
                    case "character4_button":
                        n = 3, a = "item4", o = "dress_hero4";
                        break;
                    case "character5_button":
                        n = 4, a = "item5", o = "dress_hero5";
                        break;
                    case "character6_button":
                        n = 5, a = "item6", o = "dress_hero6";
                        break;
                    case "character7_button":
                        n = 6, a = "item7", o = "dress_hero7";
                        break;
                    case "character8_button":
                        n = 7, a = "item8", o = "dress_hero8"
                }
                if (!(this.currentCharacterOn === n && arguments.length > 1 || this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.selectingPlayer1 ? r = this.charactersChosen[1] : this.selectingPlayer2 && (r = this.charactersChosen[0]), r === n))) {
                    Ph2.UISystem.findObject("container/character" + (this.currentCharacterOn + 1) + "/player", this.uiCharacterSelect).visible = !1, Ph2.UISystem.findObject("container/character" + (this.currentCharacterOn + 1) + "/player", this.uiCharacterSelect).visibility.enable(!1), this.currentCharacterOn = n, this.itemImage1.alpha = 1, this.itemImage2.alpha = 1, this.itemImage3.alpha = 1, this.itemImage4.alpha = 1, this.itemImage5.alpha = 1, this.itemImage6.alpha = 1, this.itemImage7.alpha = 1, this.itemImage8.alpha = 1, this.itemImage9.alpha = 1, this.itemImage1.frameName = a + "_1.png", this.itemImage2.frameName = a + "_2.png", this.itemImage3.frameName = a + "_3.png", this.itemImage4.frameName = a + "_4.png", this.itemImage5.frameName = a + "_5.png", this.itemImage6.frameName = a + "_6.png", this.itemImage7.frameName = a + "_7.png", this.itemImage8.frameName = a + "_8.png", this.itemImage9.frameName = a + "_9.png";
                    for (var c = 0; c < this.itemFrames.length; c++) this.itemFrames[c].frameName = "item_bottom.png";
                    if (this.selectingPlayer1) {
                        if (this.charactersChosen[0] = n, this.spinePlayerName1 = o, h = this.spineDressHero1, this.currentButtonCharacterP2 === e) {
                            var u = void 0,
                                d = void 0;
                            do {
                                d = this.game.rnd.pick(this.characterButtons)
                            } while (d === e);
                            u = this.characterButtons.indexOf(d), this.currentButtonCharacterP2 = d, this.charactersChosen[1] = u
                        }
                        this.currentButtonCharacterP1.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.currentButtonCharacterP1 = e, e.setFrames("face_hover.png", "face_hover.png", "face_hover.png", "face_hover.png"), (l = Ph2.UISystem.findObject("container/character" + (n + 1) + "/player", this.uiCharacterSelect)).visible = !0, l.visibility.enable(!0), l.frameName = "face_p1.png"
                    } else this.selectingPlayer2 && (this.charactersChosen[1] = n, this.spinePlayerName2 = o, h = this.spineDressHero2, this.currentButtonCharacterP2.setFrames("face_hover.png", "face_normal.png", "face_hover.png", "face_normal.png"), this.currentButtonCharacterP2 = e, e.setFrames("face_hover.png", "face_hover.png", "face_hover.png", "face_hover.png"), (l = Ph2.UISystem.findObject("container/character" + (n + 1) + "/player", this.uiCharacterSelect)).visible = !0, l.visibility.enable(!0), l.frameName = "face_p2.png");
                    this.obtainSkins(), this.checkCharacterItems(n), h.destroy(), (h = this.game.add.spine(0, 0, o)).scale.setTo(t.SETTINGS.SCALE), this.selectingPlayer1 ? this.spineDressHero1 = h : this.spineDressHero2 = h, this.setSkin(), this.spineContainer.addChild(h), this.game.ph2AudioManager.playEffect("menuPress", !1), this.resetCharactersButtons()
                }
            }
        }, i.prototype.resetCharactersButtons = function() {
            var e, i;
            if (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER)
                for (e = 0; e < this.characterButtons.length; e++) i = this.characterButtons[e], this.charactersChosen[0] !== e && (i.frameName = "face_normal.png");
            else
                for (e = 0; e < this.characterButtons.length; e++) i = this.characterButtons[e], this.charactersChosen[0] !== e && this.charactersChosen[1] !== e && (i.frameName = "face_normal.png")
        }, i.prototype.itemAlreadyUnlocked = function(t) {
            var e, i, s, n, a, o, r;
            switch (Ph2.AnimationSystem.findObject("black", t).visible = !1, Ph2.AnimationSystem.findObject("star_empty", t).visible = !1, Ph2.AnimationSystem.findObject("price", t).visible = !1, e = parseInt(t.name.charAt(4), 10) - 1, t.name) {
                case "item1":
                case "item2":
                case "item3":
                    i = this.facePlayer1, s = this.facePlayer2;
                    break;
                case "item4":
                case "item5":
                case "item6":
                    i = this.headPlayer1 + 3, s = this.headPlayer2 + 3;
                    break;
                case "item7":
                case "item8":
                case "item9":
                    i = this.bodyPlayer1 + 6, s = this.bodyPlayer2 + 6
            }
            switch (this.selectingPlayer1 ? n = i === e + 1 : this.selectingPlayer2 && (n = s === e + 1), n ? (this.itemImages[e].alpha = 0, this.itemFrames[e].frameName = "item_bottom2.png") : (this.itemImages[e].alpha = 1, this.itemFrames[e].frameName = "item_bottom.png"), e) {
                case 0:
                    a = Ph2.AnimationSystem.findObject("face4_anim", t), 2 === this.currentCharacterOn ? this.selectingPlayer1 && this.facePlayer1 === e + 1 || this.selectingPlayer2 && this.facePlayer2 === e + 1 ? a.visible = !1 : a.visible = !0 : a.visible = !1;
                    break;
                case 1:
                    o = Ph2.AnimationSystem.findObject("face1_anim", t), r = Ph2.AnimationSystem.findObject("face2_anim", t), 0 === this.currentCharacterOn ? this.selectingPlayer1 && this.facePlayer1 === e + 1 || this.selectingPlayer2 && this.facePlayer2 === e + 1 ? (o.visible = !1, r.visible = !1) : (o.visible = !0, r.visible = !1) : 3 === this.currentCharacterOn ? this.selectingPlayer1 && this.facePlayer1 === e + 1 || this.selectingPlayer2 && this.facePlayer2 === e + 1 ? (o.visible = !1, r.visible = !1) : (o.visible = !1, r.visible = !0) : (o.visible = !1, r.visible = !1);
                    break;
                case 2:
                    r = Ph2.AnimationSystem.findObject("face3_anim", t), 5 === this.currentCharacterOn ? this.selectingPlayer1 && this.facePlayer1 === e + 1 || this.selectingPlayer2 && this.facePlayer2 === e + 1 ? r.visible = !1 : (r.visible = !0, r.ph2Animations.play("face3_pause", 1, !0)) : r.visible = !1
            }
        }, i.prototype.itemLocked = function(e) {
            var i, s, n, a, o, r, h;
            switch (a = parseInt(e.name.charAt(4), 10) - 1, s = t.Instances.DataManager.getPlayerPoints(), n = t.SETTINGS.ITEM_COSTS[a], Ph2.AnimationSystem.findObject("black", e).visible = !0, Ph2.AnimationSystem.findObject("price", e).visible = !0, i = Ph2.AnimationSystem.findObject("star_empty", e), i.visible = !0, i.frameName = s >= n ? "dress_up_star_full.png" : "dress_up_star_empty.png", a) {
                case 0:
                    o = Ph2.AnimationSystem.findObject("face4_anim", e), 2 === this.currentCharacterOn ? (o.visible = !0, o.ph2Animations.play("face4_stand", 1, !0)) : o.visible = !1;
                    break;
                case 1:
                    r = Ph2.AnimationSystem.findObject("face1_anim", e), h = Ph2.AnimationSystem.findObject("face2_anim", e), 0 === this.currentCharacterOn ? (r.visible = !0, h.visible = !1, r.ph2Animations.play("face1_stand", 1, !0)) : 3 === this.currentCharacterOn ? (r.visible = !1, h.visible = !0, h.ph2Animations.play("face2_stand", 1, !0)) : (r.visible = !1, h.visible = !1);
                    break;
                case 2:
                    h = Ph2.AnimationSystem.findObject("face3_anim", e), 5 === this.currentCharacterOn ? (h.visible = !0, h.ph2Animations.play("face3_stand", 1, !0)) : h.visible = !1
            }
        }, i.prototype.unlockItem = function(e) {
            var i;
            Ph2.AnimationSystem.findObject("star_empty", e).visible = !1, Ph2.AnimationSystem.findObject("price", e).visible = !1, null !== (i = Ph2.AnimationSystem.findObject("black", e)) && void 0 !== i && (i.visible = !0, i.ph2Animations.play("unlock_play", 1, !1).onComplete.add(function() {
                i.visible = !1
            }, this), this.game.ph2AudioManager.playEffect("sound_dressUnlock", !1), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.UNLOCK_1_OUTFIT), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.UNLOCK_OUTFIT_FOR_EVERY_ROBOT, this.currentCharacterOn))
        }, i.prototype.checkCharacterItems = function(t) {
            var e, i;
            for (this.facePlayer1 = this.equippedOutfits[this.charactersChosen[0]].face, this.bodyPlayer1 = this.equippedOutfits[this.charactersChosen[0]].body, this.headPlayer1 = this.equippedOutfits[this.charactersChosen[0]].head, this.facePlayer2 = this.equippedOutfits[this.charactersChosen[1]].face, this.bodyPlayer2 = this.equippedOutfits[this.charactersChosen[1]].body, this.headPlayer2 = this.equippedOutfits[this.charactersChosen[1]].head, e = this.unlocks[t].items, i = 0; i < e.length; i++)
                if (e[i]) switch (i) {
                    case 0:
                        this.itemAlreadyUnlocked(this.item1);
                        break;
                    case 1:
                        this.itemAlreadyUnlocked(this.item2);
                        break;
                    case 2:
                        this.itemAlreadyUnlocked(this.item3);
                        break;
                    case 3:
                        this.itemAlreadyUnlocked(this.item4);
                        break;
                    case 4:
                        this.itemAlreadyUnlocked(this.item5);
                        break;
                    case 5:
                        this.itemAlreadyUnlocked(this.item6);
                        break;
                    case 6:
                        this.itemAlreadyUnlocked(this.item7);
                        break;
                    case 7:
                        this.itemAlreadyUnlocked(this.item8);
                        break;
                    case 8:
                        this.itemAlreadyUnlocked(this.item9)
                } else switch (i) {
                    case 0:
                        this.itemLocked(this.item1);
                        break;
                    case 1:
                        this.itemLocked(this.item2);
                        break;
                    case 2:
                        this.itemLocked(this.item3);
                        break;
                    case 3:
                        this.itemLocked(this.item4);
                        break;
                    case 4:
                        this.itemLocked(this.item5);
                        break;
                    case 5:
                        this.itemLocked(this.item6);
                        break;
                    case 6:
                        this.itemLocked(this.item7);
                        break;
                    case 7:
                        this.itemLocked(this.item8);
                        break;
                    case 8:
                        this.itemLocked(this.item9)
                }
        }, i.prototype.itemOver = function(t) {
            var e, i, s, n, a;
            if (e = parseInt(t.parent.name.charAt(4), 10) - 1, i = this.unlocks[this.currentCharacterOn], i.items[e]) {
                switch (t.parent.name) {
                    case "item1":
                    case "item2":
                    case "item3":
                        n = this.facePlayer1, a = this.facePlayer2;
                        break;
                    case "item4":
                    case "item5":
                    case "item6":
                        n = this.headPlayer1 + 3, a = this.headPlayer2 + 3;
                        break;
                    case "item7":
                    case "item8":
                    case "item9":
                        n = this.bodyPlayer1 + 6, a = this.bodyPlayer2 + 6
                }
                this.selectingPlayer1 ? s = n === e + 1 : this.selectingPlayer2 && (s = a === e + 1), this.itemFrames[e].frameName = s ? "item_bottom3.png" : "item_bottom_hover.png"
            }
        }, i.prototype.itemOut = function(t) {
            var e, i, s, n, a, o;
            if (e = parseInt(t.parent.name.charAt(4), 10) - 1, i = this.unlocks[this.currentCharacterOn], s = i.items[e], this.itemPopups[e].visible && (this.itemPopups[e].visible = !1, this.popupTimer = -1, this.visiblePopup = -1), s) {
                switch (t.parent.name) {
                    case "item1":
                    case "item2":
                    case "item3":
                        a = this.facePlayer1, o = this.facePlayer2;
                        break;
                    case "item4":
                    case "item5":
                    case "item6":
                        a = this.headPlayer1 + 3, o = this.headPlayer2 + 3;
                        break;
                    case "item7":
                    case "item8":
                    case "item9":
                        a = this.bodyPlayer1 + 6, o = this.bodyPlayer2 + 6
                }
                this.selectingPlayer1 ? n = a === e + 1 : this.selectingPlayer2 && (n = o === e + 1), this.itemFrames[e].frameName = n ? "item_bottom2.png" : "item_bottom.png"
            }
        }, i.prototype.selectFace = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (n = t.Instances.DataManager.getPlayerPoints(), h = this.unlocks[this.currentCharacterOn], r = !1, e.parent.name) {
                case "item1":
                    s = 1, a = 0, o = h.items[0], i = t.SETTINGS.ITEM_COSTS[0], l = this.item1;
                    break;
                case "item2":
                    s = 2, a = 1, o = h.items[1], i = t.SETTINGS.ITEM_COSTS[1], l = this.item2;
                    break;
                case "item3":
                    s = 3, a = 2, o = h.items[2], i = t.SETTINGS.ITEM_COSTS[2], l = this.item3
            }
            if (o ? r = !0 : i <= n && (n -= i, r = !0, this.unlocks[this.currentCharacterOn].items[a] = !0, this.textStarPoints.setText(n.toString()), this.selectingPlayer1 ? this.checkCharacterItems(this.charactersChosen[0]) : this.selectingPlayer2 && this.checkCharacterItems(this.charactersChosen[1]), this.unlockItem(l), t.Instances.DataManager.savePlayersPoints(n), t.Instances.DataManager.saveUnlocks(this.unlocks)), !r) return this.visiblePopup > -1 && this.visiblePopup !== a && (this.itemPopups[this.visiblePopup].visible = !1), this.visiblePopup = a, this.itemPopups[a].visible = !0, void(this.popupTimer = 1200);
            this.selectingPlayer1 ? (s === this.facePlayer1 ? (1 === s && 2 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !0), 2 === s && 0 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !0), 2 === s && 3 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !0), 3 === s && 5 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !0), s = 0, e.alpha = 1, this.itemFrames[a].frameName = "item_bottom_hover.png") : (this.facePlayer1 - 1 >= 0 && (2 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer1 - 1]).visible = !0), 0 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer1 - 1]).visible = !0), 3 === this.currentCharacterOn && 2 === this.facePlayer1 && null !== Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer1 - 1]).visible = !0), 5 === this.currentCharacterOn && 3 === this.facePlayer1 && null !== Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer1 - 1]).visible = !0)), 1 === s && 2 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !1), 2 === s && 0 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !1), 2 === s && 3 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !1), 3 === s && 5 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !1), e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.facePlayer1 > 0 && (this.itemFrames[this.facePlayer1 - 1].frameName = "item_bottom.png", this.itemImages[this.facePlayer1 - 1].alpha = 1)), this.facePlayer1 = s) : this.selectingPlayer2 && (s === this.facePlayer2 ? (1 === s && 2 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !0), 2 === s && 0 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !0), 2 === s && 3 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !0), 3 === s && 6 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !0), s = 0, e.alpha = 1) : (this.facePlayer2 - 1 >= 0 && (2 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer2 - 1]).visible = !0), 0 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer2 - 1]).visible = !0), 3 === this.currentCharacterOn && 2 === this.facePlayer2 && null !== Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer2 - 1]).visible = !0), 5 === this.currentCharacterOn && 3 === this.facePlayer2 && null !== Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer2 - 1]).visible = !0)), 1 === s && 2 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !1), 2 === s && 0 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !1), 2 === s && 3 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !1), 3 === s && 5 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !1), e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.facePlayer2 > 0 && (this.itemFrames[this.facePlayer2 - 1].frameName = "item_bottom.png", this.itemImages[this.facePlayer2 - 1].alpha = 1)), this.facePlayer2 = s), this.equippedOutfits[this.currentCharacterOn].face = s, t.Instances.DataManager.saveEquippedOutfits(this.equippedOutfits), this.setSkin(), this.game.ph2AudioManager.playEffect("menuPress", !1)
        }, i.prototype.selectHead = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (n = t.Instances.DataManager.getPlayerPoints(), h = this.unlocks[this.currentCharacterOn], r = !1, e.parent.name) {
                case "item4":
                    s = 1, a = 3, o = h.items[3], i = t.SETTINGS.ITEM_COSTS[3], l = this.item4;
                    break;
                case "item5":
                    s = 2, a = 4, o = h.items[4], i = t.SETTINGS.ITEM_COSTS[4], l = this.item5;
                    break;
                case "item6":
                    s = 3, a = 5, o = h.items[5], i = t.SETTINGS.ITEM_COSTS[5], l = this.item6
            }
            if (o ? r = !0 : i <= n && (n -= i, r = !0, this.unlocks[this.currentCharacterOn].items[a] = !0, this.textStarPoints.setText(n.toString()), this.selectingPlayer1 ? this.checkCharacterItems(this.charactersChosen[0]) : this.selectingPlayer2 && this.checkCharacterItems(this.charactersChosen[1]), this.unlockItem(l), t.Instances.DataManager.savePlayersPoints(n), t.Instances.DataManager.saveUnlocks(this.unlocks)), !r) return this.visiblePopup > -1 && this.visiblePopup !== a && (this.itemPopups[this.visiblePopup].visible = !1), this.visiblePopup = a, this.itemPopups[a].visible = !0, void(this.popupTimer = 1200);
            this.selectingPlayer1 ? (s === this.headPlayer1 ? (s = 0, e.alpha = 1, this.itemFrames[a].frameName = "item_bottom_hover.png") : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.headPlayer1 > 0 && (this.itemFrames[this.headPlayer1 + 2].frameName = "item_bottom.png", this.itemImages[this.headPlayer1 + 2].alpha = 1)), this.headPlayer1 = s) : this.selectingPlayer2 && (s === this.headPlayer2 ? (s = 0, e.alpha = 1) : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.headPlayer2 > 0 && (this.itemFrames[this.headPlayer2 + 2].frameName = "item_bottom.png", this.itemImages[this.headPlayer2 + 2].alpha = 1)), this.headPlayer2 = s), this.equippedOutfits[this.currentCharacterOn].head = s, t.Instances.DataManager.saveEquippedOutfits(this.equippedOutfits), this.setSkin(), this.game.ph2AudioManager.playEffect("menuPress", !1)
        }, i.prototype.selectBody = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (n = t.Instances.DataManager.getPlayerPoints(), h = this.unlocks[this.currentCharacterOn], r = !1, e.parent.name) {
                case "item7":
                    s = 1, a = 6, o = h.items[6], i = t.SETTINGS.ITEM_COSTS[6], l = this.item7;
                    break;
                case "item8":
                    s = 2, a = 7, o = h.items[7], i = t.SETTINGS.ITEM_COSTS[7], l = this.item8;
                    break;
                case "item9":
                    s = 3, a = 8, o = h.items[8], i = t.SETTINGS.ITEM_COSTS[8], l = this.item9
            }
            if (o ? r = !0 : i <= n && (n -= i, r = !0, this.unlocks[this.currentCharacterOn].items[a] = !0, this.textStarPoints.setText(n.toString()), this.selectingPlayer1 ? this.checkCharacterItems(this.charactersChosen[0]) : this.selectingPlayer2 && this.checkCharacterItems(this.charactersChosen[1]), this.unlockItem(l), t.Instances.DataManager.savePlayersPoints(n), t.Instances.DataManager.saveUnlocks(this.unlocks)), !r) return this.visiblePopup > -1 && this.visiblePopup !== a && (this.itemPopups[this.visiblePopup].visible = !1), this.visiblePopup = a, this.itemPopups[a].visible = !0, void(this.popupTimer = 1200);
            this.selectingPlayer1 ? (s === this.bodyPlayer1 ? (s = 0, e.alpha = 1) : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.bodyPlayer1 > 0 && (this.itemFrames[this.bodyPlayer1 + 5].frameName = "item_bottom.png", this.itemImages[this.bodyPlayer1 + 5].alpha = 1)), this.bodyPlayer1 = s) : this.selectingPlayer2 && (s === this.bodyPlayer2 ? (s = 0, e.alpha = 1) : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.bodyPlayer2 > 0 && (this.itemFrames[this.bodyPlayer2 + 5].frameName = "item_bottom.png", this.itemImages[this.bodyPlayer2 + 5].alpha = 1)), this.bodyPlayer2 = s), this.equippedOutfits[this.currentCharacterOn].body = s, t.Instances.DataManager.saveEquippedOutfits(this.equippedOutfits), this.setSkin(), this.game.ph2AudioManager.playEffect("menuPress", !1)
        }, i.prototype.switchSelection = function() {
            var e;
            switch (this.game.ph2AudioManager.playEffect("menuPress", !1), this.selectingPlayer1 = !this.selectingPlayer1, this.selectingPlayer2 = !this.selectingPlayer2, this.selectingPlayer1 && (this.currentCharacterOn = this.charactersChosen[0], this.spineDressHero1.visible = !0, this.spineDressHero2.visible = !1, (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[0] + 1) + "/player", this.uiCharacterSelect)).visible = !0, e.visibility.enable(!0), e.frameName = "face_p1.png", e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[1] + 1) + "/player", this.uiCharacterSelect), this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (e.visible = !0, e.visibility.enable(!0), e.frameName = "face_p2.png")), this.selectingPlayer2 && (this.currentCharacterOn = this.charactersChosen[1], this.spineDressHero1.visible = !1, this.spineDressHero2.visible = !0, (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[0] + 1) + "/player", this.uiCharacterSelect)).visible = !0, e.visibility.enable(!0), e.frameName = "face_p1.png", (e = Ph2.UISystem.findObject("container/character" + (this.charactersChosen[1] + 1) + "/player", this.uiCharacterSelect)).visible = !1, e.visibility.enable(!1), e.frameName = "face_p2.png"), this.currentCharacterOn) {
                case 0:
                    this.selectCharacter(this.buttonCharacter1);
                    break;
                case 1:
                    this.selectCharacter(this.buttonCharacter2);
                    break;
                case 2:
                    this.selectCharacter(this.buttonCharacter3);
                    break;
                case 3:
                    this.selectCharacter(this.buttonCharacter4);
                    break;
                case 4:
                    this.selectCharacter(this.buttonCharacter5);
                    break;
                case 5:
                    this.selectCharacter(this.buttonCharacter6);
                    break;
                case 6:
                    this.selectCharacter(this.buttonCharacter7);
                    break;
                case 7:
                    this.selectCharacter(this.buttonCharacter8);
                    break;
                default:
                    this.selectCharacter(this.buttonCharacter1)
            }
        }, i.prototype.obtainSkins = function() {
            t.Instances.DataManager = t.Instances.DataManager, this.headsPlayer1 = i.obtainHeads(this.spinePlayerName1), this.headsPlayer2 = i.obtainHeads(this.spinePlayerName2), this.faces = ["face1", "face2", "face3", "face4"], this.bodies = ["body1", "body2", "body3", "body4"]
        }, i.prototype.setSkin = function() {
            var t, e, i, s, n, a, o, r, h, l, c;
            switch (this.selectingPlayer1 ? (this.outfitIndex1++, a = this.spinePlayerName1, n = this.spineDressHero1, s = this.equippedOutfits[this.charactersChosen[0]], t = this.headsPlayer1[s.head], o = this.outfitIndex1, c = this.headsPlayer1) : (this.outfitIndex2++, a = this.spinePlayerName2, n = this.spineDressHero2, s = this.equippedOutfits[this.charactersChosen[1]], t = this.headsPlayer2[s.head], o = this.outfitIndex2, c = this.headsPlayer2), e = this.faces[s.face], i = this.bodies[s.body], l = !0, "dress_hero1" === a || "dress_hero3" === a || "dress_hero6" === a ? (s.head < 4 && (t = c[s.head + 1]), "head1" === t ? n.createCombinedSkin("outfit" + o, "normal0", t, e, i) : n.createCombinedSkin("outfit" + o, "normal0", "head1", t, e, i)) : n.createCombinedSkin("outfit" + o, "normal0", t, e, i), n.setSkinByName("outfit" + o), r = n.setAnimationByName(0, "special", !1), r.onComplete = function() {
                n.setAnimationByName(0, "stand", !1)
            }, n.setAnimationByName(1, "stand", !1), n.setToSetupPose(), a) {
                case "dress_hero1":
                    if ("face1" === e) h = "face1_front";
                    else {
                        if ("face3" !== e) {
                            l = !1;
                            break
                        }
                        h = "face2_front"
                    }
                    break;
                case "dress_hero2":
                    "face1" === e ? h = "face1_front" : l = !1;
                    break;
                case "dress_hero3":
                    "face1" === e || "face2" === e || "face3" === e ? h = "face_front" : l = !1;
                    break;
                case "dress_hero4":
                    "face1" === e ? h = "face1_front" : "face3" === e ? h = "face2_front" : l = !1;
                    break;
                case "dress_hero5":
                    "face1" === e ? h = "face1_front" : l = !1;
                    break;
                case "dress_hero6":
                    "face1" === e || "face4" === e ? h = "face1_front" : l = !1;
                    break;
                case "dress_hero7":
                case "dress_hero8":
                    "face1" === e ? h = "face1_front" : l = !1;
                    break;
                default:
                    h = "face1_front", l = !1
            }
            l && n.setAnimationByName(1, h, !0)
        }, i.prototype.gotoGameplay = function() {
            var e, i, s, n, a, o, r, h, l;
            if (e = {
                face: this.facePlayer1,
                head: this.headPlayer1,
                body: this.bodyPlayer1
            }, i = this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? {
                face: this.game.rnd.integerInRange(0, 3),
                head: this.game.rnd.integerInRange(0, 3),
                body: this.game.rnd.integerInRange(0, 3)
            } : {
                face: this.facePlayer2,
                head: this.headPlayer2,
                body: this.bodyPlayer2
            }, s = {
                face: this.game.rnd.integerInRange(0, 3),
                head: this.game.rnd.integerInRange(0, 3),
                body: this.game.rnd.integerInRange(0, 3)
            }, n = {
                face: this.game.rnd.integerInRange(0, 3),
                head: this.game.rnd.integerInRange(0, 3),
                body: this.game.rnd.integerInRange(0, 3)
            }, t.Instances.DataManager.saveOutfitPlayer1(e), t.Instances.DataManager.saveOutfitPlayer2(i), t.Instances.DataManager.saveOutfitPlayer3(s), t.Instances.DataManager.saveOutfitPlayer4(n), (h = []).push(this.charactersChosen[0]), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER)
                for (a = 1; 1 === a;)(o = this.game.rnd.integerInRange(0, 7)) !== this.charactersChosen[0] && (this.charactersChosen[1] = o, a++, h.push(o));
            else a = 2, h.push(this.charactersChosen[1]);
            for (; a < this.enemiesSelected + 1;) {
                for (r = !1, o = this.game.rnd.integerInRange(0, 7), l = 0; l < h.length; l++) o === h[l] && (r = !0);
                r || (this.charactersChosen[h.length] = o, h.push(o), a++)
            }
            this.game.ph2AnimationManager.stopAll(), this.stopAnimations(), t.Instances.DataManager.saveCharactersChosen(this.charactersChosen), t.Instances.DataManager.saveOutfitPlayer1(this.equippedOutfits[this.charactersChosen[0]]), t.Instances.DataManager.saveOutfitPlayer2(this.equippedOutfits[this.charactersChosen[1]]), t.Instances.DataManager.saveCurrentLevel(1), t.Instances.DataManager.saveMapTheme(this.mapTheme), this.showIntroComic2()
        }, i.prototype.showIntroComic2 = function() {
            var e = this;
            this.game.ph2AudioManager.switchMusic(t.Music.COMIC_GO_GAMEPLAY), this.comic.showIntroComic2().onComplete.add(function() {
                e.comic.hideComics(), e.showLoadingScreen()
            }, this)
        }, i.prototype.showLoadingScreen = function() {
            var e, i, s, n, a, o, r, h, l = this;
            switch (e = Ph2.UISystem.findObject("container/mode_image", this.uiLoading), i = Ph2.UISystem.findObject("container/bomb_container/bomb1/bomb", this.uiLoading), s = Ph2.UISystem.findObject("container/bomb_container/bomb2/bomb", this.uiLoading), n = Ph2.UISystem.findObject("container/bomb_container/bomb3/bomb", this.uiLoading), a = Ph2.UISystem.findObject("container/bomb_container/bomb4/bomb", this.uiLoading), o = Ph2.UISystem.findObject("container/bomb_container/bomb5/bomb", this.uiLoading), r = Ph2.UISystem.findObject("container/bomb_container/bomb6/bomb", this.uiLoading), i.alpha = 0, s.alpha = 0, n.alpha = 0, a.alpha = 0, o.alpha = 0, r.alpha = 0, h = t.SETTINGS.LOADING_SCREEN / 6, this.game.ph2AudioManager.stopEffect(this.audioComic2), this.game.add.tween(i).to({
                alpha: 1
            }, h, "Linear", !0).onComplete.add(function() {
                l.game.ph2AudioManager.playEffect("loadingBomb", !1)
            }, this), this.game.add.tween(s).to({
                alpha: 1
            }, h, "Linear", !0, h).onComplete.add(function() {
                l.game.ph2AudioManager.playEffect("loadingBomb", !1)
            }, this), this.game.add.tween(n).to({
                alpha: 1
            }, h, "Linear", !0, 2 * h).onComplete.add(function() {
                l.game.ph2AudioManager.playEffect("loadingBomb", !1)
            }, this), this.game.add.tween(a).to({
                alpha: 1
            }, h, "Linear", !0, 3 * h).onComplete.add(function() {
                l.game.ph2AudioManager.playEffect("loadingBomb", !1)
            }, this), this.game.add.tween(o).to({
                alpha: 1
            }, h, "Linear", !0, 4 * h).onComplete.add(function() {
                l.game.ph2AudioManager.playEffect("loadingBomb", !1)
            }, this), this.game.add.tween(r).to({
                alpha: 1
            }, h, "Linear", !0, 5 * h).onComplete.add(function() {
                l.game.ph2AudioManager.playEffect("loadingBomb", !1)
            }, this), this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    e.frameName = "loading_image1.png", t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiLoading, "title_arcade"), t.Instances.LocalizationManager.localizeText("container/description", this.uiLoading, "advice_arcade");
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    e.frameName = "loading_image2.png", t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiLoading, "title_battle_royale"), t.Instances.LocalizationManager.localizeText("container/description", this.uiLoading, "advice_battle_royale");
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    e.frameName = "loading_image3.png", t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiLoading, "title_new_pacman"), t.Instances.LocalizationManager.localizeText("container/description", this.uiLoading, "advice_new_pacman");
                    break;
                case t.GAME_MODE.ICE_MAN:
                    e.frameName = "loading_image4.png", t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiLoading, "title_ice_man"), t.Instances.LocalizationManager.localizeText("container/description", this.uiLoading, "advice_ice_man");
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    e.frameName = "loading_image5.png", t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiLoading, "title_star_collector"), t.Instances.LocalizationManager.localizeText("container/description", this.uiLoading, "advice_star_collector");
                    break;
                default:
                    e.frameName = "loading_image1.png", t.Instances.LocalizationManager.localizeText("container_title/title", this.uiLoading, "title_arcade"), t.Instances.LocalizationManager.localizeText("container/description", this.uiLoading, "advice_arcade")
            }
            t.Instances.LocalizationManager.fitFontSizeUI("container/description", this.uiLoading, 500 * t.SETTINGS.SCALE, -1, 29 * t.SETTINGS.SCALE), this.uiCharacterSelect.visible = !1, this.uiLoading.visible = !0, this.game.time.events.add(t.SETTINGS.LOADING_SCREEN, function() {
                l.game.state.start("gameplayState", !0, !1, l.gameMode, l.difficulty, l.playerMode, l.mapTheme, l.charactersChosen, l.enemiesSelected, l.levelsSelected)
            }, this)
        }, i.prototype.stopAnimations = function() {
            this.trophy.ph2Animations.stop(), this.bomb.ph2Animations.stop(), this.logoAnimation1.ph2Animations.stop(), this.logoAnimation2.ph2Animations.stop(), this.logoAnimation1.destroy(), this.logoAnimation2.destroy();
            for (var t = 0; t < this.characterFaces.length; t++) this.characterFaces[t].ph2Animations.stop();
            Ph2.AnimationSystem.findObject("face4_anim", this.item1).ph2Animations.stop(), Ph2.AnimationSystem.findObject("face1_anim", this.item2).ph2Animations.stop(), Ph2.AnimationSystem.findObject("face2_anim", this.item2).ph2Animations.stop(), Ph2.AnimationSystem.findObject("face3_anim", this.item3).ph2Animations.stop()
        }, i.prototype.createButtonListener = function(t, e) {
            t.inputEnabled = !0, t.input.useHandCursor = !0, t.events.onInputDown.add(e, this)
        }, i.prototype.createItemButtonListener = function(t, e) {
            t.inputEnabled = !0, t.events.onInputDown.add(e, this), t.events.onInputOver.add(this.itemOver, this), t.events.onInputOut.add(this.itemOut, this)
        }, i.prototype.createButtonListener2 = function(t, e) {
            t.onInputUp.add(e, this)
        }, i.prototype.buttonInputOver = function(t) {
            t.changeFrame("button_press.png"), this.game.ph2AudioManager.playEffect("menuTouch", !1)
        }, i.buttonInputOut = function(t) {
            t.changeFrame("button.png")
        }, i.prototype.settingsInputOver = function(e) {
            var i;
            switch (i = !1, e.name) {
                case "1player_button":
                    i = this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER;
                    break;
                case "2player_button":
                    i = this.playerMode === t.PLAYER_MODE.MULTI_PLAYER;
                    break;
                case "0enemies_button":
                    i = 0 === this.enemiesSelected;
                    break;
                case "1enemies_button":
                    i = 1 === this.enemiesSelected;
                    break;
                case "2enemies_button":
                    i = 2 === this.enemiesSelected;
                    break;
                case "3enemies_button":
                    i = 3 === this.enemiesSelected;
                    break;
                case "20levels_button":
                    i = 20 === this.levelsSelected;
                    break;
                case "15levels_button":
                    i = 15 === this.levelsSelected;
                    break;
                case "10levels_button":
                    i = 10 === this.levelsSelected;
                    break;
                case "5levels_button":
                    i = 5 === this.levelsSelected;
                    break;
                case "aquarium_button":
                    i = this.mapTheme === t.MAP_THEME.CHRISTMAS;
                    break;
                case "bathroom_button":
                    i = this.mapTheme === t.MAP_THEME.BOUTIQUE;
                    break;
                case "baseball_field_button":
                    i = this.mapTheme === t.MAP_THEME.CLASSROOM;
                    break;
                case "castle_button":
                    i = this.mapTheme === t.MAP_THEME.FOREST;
                    break;
                case "dollhouse_button":
                    i = this.mapTheme === t.MAP_THEME.BEACH;
                    break;
                case "farm_button":
                    i = this.mapTheme === t.MAP_THEME.RANCH;
                    break;
                case "garden_button":
                    i = this.mapTheme === t.MAP_THEME.TOY_STORE;
                    break;
                case "polar_region_button":
                    i = this.mapTheme === t.MAP_THEME.RACE_TRACK;
                    break;
                case "picnic_button":
                    i = this.mapTheme === t.MAP_THEME.BAKERY;
                    break;
                case "random_button":
                    i = this.mapTheme === t.MAP_THEME.RANDOM;
                    break;
                case "easy_button":
                    i = this.difficulty === t.DIFFICULTY.EASY;
                    break;
                case "normal_button":
                    i = this.difficulty === t.DIFFICULTY.NORMAL;
                    break;
                case "hard_button":
                    i = this.difficulty === t.DIFFICULTY.HARD
            }
            i || e.changeFrame("small_button_hover.png")
        }, i.prototype.settingsInputOut = function(e) {
            var i;
            switch (i = !1, e.name) {
                case "1player_button":
                    i = this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER;
                    break;
                case "2player_button":
                    i = this.playerMode === t.PLAYER_MODE.MULTI_PLAYER;
                    break;
                case "0enemies_button":
                    i = 0 === this.enemiesSelected;
                    break;
                case "1enemies_button":
                    i = 1 === this.enemiesSelected;
                    break;
                case "2enemies_button":
                    i = 2 === this.enemiesSelected;
                    break;
                case "3enemies_button":
                    i = 3 === this.enemiesSelected;
                    break;
                case "20levels_button":
                    i = 20 === this.levelsSelected;
                    break;
                case "15levels_button":
                    i = 15 === this.levelsSelected;
                    break;
                case "10levels_button":
                    i = 10 === this.levelsSelected;
                    break;
                case "5levels_button":
                    i = 5 === this.levelsSelected;
                    break;
                case "aquarium_button":
                    i = this.mapTheme === t.MAP_THEME.CHRISTMAS;
                    break;
                case "bathroom_button":
                    i = this.mapTheme === t.MAP_THEME.BOUTIQUE;
                    break;
                case "baseball_field_button":
                    i = this.mapTheme === t.MAP_THEME.CLASSROOM;
                    break;
                case "castle_button":
                    i = this.mapTheme === t.MAP_THEME.FOREST;
                    break;
                case "dollhouse_button":
                    i = this.mapTheme === t.MAP_THEME.BEACH;
                    break;
                case "farm_button":
                    i = this.mapTheme === t.MAP_THEME.RANCH;
                    break;
                case "garden_button":
                    i = this.mapTheme === t.MAP_THEME.TOY_STORE;
                    break;
                case "polar_region_button":
                    i = this.mapTheme === t.MAP_THEME.RACE_TRACK;
                    break;
                case "picnic_button":
                    i = this.mapTheme === t.MAP_THEME.BAKERY;
                    break;
                case "random_button":
                    i = this.mapTheme === t.MAP_THEME.RANDOM;
                    break;
                case "easy_button":
                    i = this.difficulty === t.DIFFICULTY.EASY;
                    break;
                case "normal_button":
                    i = this.difficulty === t.DIFFICULTY.NORMAL;
                    break;
                case "hard_button":
                    i = this.difficulty === t.DIFFICULTY.HARD
            }
            i || e.changeFrame("small_button_normal.png")
        }, i.obtainHeads = function(t) {
            return "dress_hero1" === t || "dress_hero3" === t || "dress_hero6" === t ? ["head1", "decor1", "decor2", "decor3", "decor4"] : ["head1", "head2", "head3", "head4"]
        }, i.prototype.gotoMoreGames = function() {
           
        }, i.prototype.bombItOver = function(t) {
            switch (t.name) {
                case "bombit2":
                    t.frameName = "bombit2_hov.png";
                    break;
                case "bombit3":
                    t.frameName = "bombit3_hov.png";
                    break;
                case "bombit4":
                    t.frameName = "bombit4_hov.png";
                    break;
                case "bombit5":
                    t.frameName = "bombit5_hov.png";
                    break;
                case "bombit6":
                    t.frameName = "bombit6_hov.png"
            }
            this.game.ph2AudioManager.playEffect("menuTouch", !1)
        }, i.prototype.bombItOut = function(t) {
            switch (t.name) {
                case "bombit2":
                    t.frameName = "bombit2.png";
                    break;
                case "bombit3":
                    t.frameName = "bombit3.png";
                    break;
                case "bombit4":
                    t.frameName = "bombit4.png";
                    break;
                case "bombit5":
                    t.frameName = "bombit5.png";
                    break;
                case "bombit6":
                    t.frameName = "bombit6.png"
            }
        }, i.prototype.gotoBombIt = function(e) {
            var i;
            switch (e.name) {
                case "bombit2":
                    i = Constants.BOMB_IT_2;
                    break;
                case "bombit3":
                    i = Constants.BOMB_IT_3;
                    break;
                case "bombit4":
                    i = Constants.BOMB_IT_4;
                    break;
                case "bombit5":
                    i = Constants.BOMB_IT_5;
                    break;
                case "bombit6":
                    i = Constants.BOMB_IT_6
            }
          
        }, i.prototype.characterOver = function(t) {
            if (t !== this.currentButtonCharacterP1 && t !== this.currentButtonCharacterP2) switch (this.game.ph2AudioManager.playEffect("menuTouch", !1), t.name) {
                case "character1_button":
                case "character2_button":
                case "character3_button":
                case "character4_button":
                case "character5_button":
                case "character6_button":
                case "character7_button":
                    t.frameName = "face_hover.png"
            }
        }, i.prototype.characterOut = function(t) {
            if (t !== this.currentButtonCharacterP1 && t !== this.currentButtonCharacterP2) switch (t.name) {
                case "character1_button":
                case "character2_button":
                case "character3_button":
                case "character4_button":
                case "character5_button":
                case "character6_button":
                case "character7_button":
                    t.frameName = "face_normal.png"
            }
        }, i.prototype.fixCharacterButtonFrames = function() {
            this.isDesktop || this.uiCharacterSelect.visible && (this.buttonCharacter1 !== this.currentButtonCharacterP1 && (this.buttonCharacter1.frameName = "face_normal.png"), this.buttonCharacter2 !== this.currentButtonCharacterP1 && (this.buttonCharacter2.frameName = "face_normal.png"), this.buttonCharacter3 !== this.currentButtonCharacterP1 && (this.buttonCharacter3.frameName = "face_normal.png"), this.buttonCharacter4 !== this.currentButtonCharacterP1 && (this.buttonCharacter4.frameName = "face_normal.png"), this.buttonCharacter5 !== this.currentButtonCharacterP1 && (this.buttonCharacter5.frameName = "face_normal.png"), this.buttonCharacter6 !== this.currentButtonCharacterP1 && (this.buttonCharacter6.frameName = "face_normal.png"), this.buttonCharacter7 !== this.currentButtonCharacterP1 && (this.buttonCharacter7.frameName = "face_normal.png"), this.buttonCharacter8 !== this.currentButtonCharacterP1 && (this.buttonCharacter8.frameName = "face_normal.png"), this.buttonCharacter1 !== this.currentButtonCharacterP1 && (this.buttonCharacter1.frameName = "face_normal.png"))
        }, i.prototype.shutdown = function() {}, i.prototype.resize = function() {
            if (!this.isDesktop) {
                var e, i, s, n;
                this.bgLandscape.x = .5 * this.game.width, this.bgLandscape.y = .5 * this.game.height, this.bgPortrait.x = .5 * this.game.width, this.bgPortrait.y = this.game.height, this.bgLandscape.scale.set(1, 1), this.bgPortrait.scale.set(1, 1), "landscape" === (n = Constants.CURRENT_ORIENTATION) ? (this.bgLandscape.visible = !0, this.bgPortrait.visible = !1, this.containerSelectMode.frameName = "big_container4.png", this.containerSettings.frameName = "big_container1.png", this.containerDressUp.frameName = "big_container1.png", this.containerLoading.frameName = "big_container1.png", this.containerPowerUps.frameName = "big_container4.png", this.containerControls.frameName = "big_container4.png", this.logo.frameName = "mm_logo1.png", this.logoAnimation1.visible = !0, this.logoAnimation2.visible = !1, t.Instances.LocalizationManager.fitFontSizeUI("container/container_title/title", this.uiCharacterSelect, 520 * t.SETTINGS.SCALE, -1, 42 * t.SETTINGS.SCALE), this.bgPowerUps.resize(743 * t.SETTINGS.SCALE, 478 * t.SETTINGS.SCALE), this.edgePowerUps.resize(776 * t.SETTINGS.SCALE, 539 * t.SETTINGS.SCALE), this.bgSettings.resize(743 * t.SETTINGS.SCALE, 478 * t.SETTINGS.SCALE), this.edgeSettings.resize(776 * t.SETTINGS.SCALE, 538 * t.SETTINGS.SCALE), this.bgDressUp.resize(743 * t.SETTINGS.SCALE, 478 * t.SETTINGS.SCALE), this.edgeDressUp.resize(773 * t.SETTINGS.SCALE, 544 * t.SETTINGS.SCALE), this.bgLoading.resize(743 * t.SETTINGS.SCALE, 478 * t.SETTINGS.SCALE), this.edgeLoading.resize(776 * t.SETTINGS.SCALE, 553 * t.SETTINGS.SCALE), this.bgGameSettings.resize(776 * t.SETTINGS.SCALE, 478 * t.SETTINGS.SCALE), this.edgeGameSettings.resize(776 * t.SETTINGS.SCALE, 543 * t.SETTINGS.SCALE)) : "portrait" === n && (this.bgLandscape.visible = !1, this.bgPortrait.visible = !0, this.containerSelectMode.frameName = "big_container2.png", this.containerSettings.frameName = "big_container2.png", this.containerDressUp.frameName = "big_container2.png", this.containerLoading.frameName = "big_container2.png", this.containerPowerUps.frameName = "big_container2.png", this.containerControls.frameName = "big_container2.png", this.logo.frameName = "mm_logo2.png", this.logoAnimation1.visible = !1, this.logoAnimation2.visible = !0, t.Instances.LocalizationManager.fitFontSizeUI("container/container_title/title", this.uiCharacterSelect, 330 * t.SETTINGS.SCALE, -1, 42 * t.SETTINGS.SCALE), this.bgPowerUps.resize(688 * t.SETTINGS.SCALE, 694 * t.SETTINGS.SCALE), this.edgePowerUps.resize(718 * t.SETTINGS.SCALE, 764 * t.SETTINGS.SCALE), this.bgSettings.resize(688 * t.SETTINGS.SCALE, 694 * t.SETTINGS.SCALE), this.edgeSettings.resize(719 * t.SETTINGS.SCALE, 769 * t.SETTINGS.SCALE), this.bgDressUp.resize(688 * t.SETTINGS.SCALE, 694 * t.SETTINGS.SCALE), this.edgeDressUp.resize(719 * t.SETTINGS.SCALE, 763 * t.SETTINGS.SCALE), this.bgLoading.resize(678 * t.SETTINGS.SCALE, 478 * t.SETTINGS.SCALE), this.edgeLoading.resize(719 * t.SETTINGS.SCALE, 553 * t.SETTINGS.SCALE), this.bgGameSettings.resize(717 * t.SETTINGS.SCALE, 763 * t.SETTINGS.SCALE), this.edgeGameSettings.resize(717 * t.SETTINGS.SCALE, 769 * t.SETTINGS.SCALE)), (i = "landscape" === n ? Constants.CALCULATED_WIDTH - this.bgLandscape.width : Constants.CALCULATED_WIDTH - this.bgPortrait.width) > (e = "landscape" === n ? Constants.CALCULATED_HEIGHT - this.bgLandscape.height : Constants.CALCULATED_HEIGHT - this.bgPortrait.height) ? i > 0 && (s = "landscape" === n ? Constants.CALCULATED_WIDTH / this.bgLandscape.width : Constants.CALCULATED_WIDTH / this.bgPortrait.width, this.bgLandscape.scale.set(s, s), this.bgPortrait.scale.set(s, s)) : e > 0 && (s = "landscape" === n ? Constants.CALCULATED_HEIGHT / this.bgLandscape.height : Constants.CALCULATED_HEIGHT / this.bgPortrait.height, this.bgLandscape.scale.set(s, s), this.bgPortrait.scale.set(s, s)), this.uiMainMenu.onGameSizeChanged(), this.comic.resizeComic(), this.resizeGroup()
            }
        }, i.prototype.resizeGroup = function() {
            var e, i, s, n, a, o;
            i = Constants.CALCULATED_WIDTH, s = Constants.CALCULATED_HEIGHT, i < (n = 800 * t.SETTINGS.SCALE) ? (a = i * (e = i / n), o = s * e, this.group.x = .5 * (i - a), this.group.y = .5 * (s - o), this.group.scale.set(e, e), this.comic.resizeOverlay()) : (this.group.x = 0, this.group.y = 0, this.group.scale.set(1, 1))
        }, i.setWordWrap = function(t, e) {
            t.wordWrap = !0, t.wordWrapWidth = e
        }, i.prototype.createCheats = function() {
            var e, i, s, n = this;
            e = this.game.input.keyboard.addKey(Phaser.Keyboard.NINE), i = this.game.input.keyboard.addKey(Phaser.Keyboard.ZERO), s = this.game.input.keyboard.addKey(Phaser.Keyboard.R), e.onDown.add(function() {
                n.totalPoints = t.Instances.DataManager.getPlayerPoints() - 5e3, t.Instances.DataManager.savePlayersPoints(n.totalPoints), n.textStarPoints.setText(n.totalPoints.toString())
            }, this), i.onDown.add(function() {
                n.totalPoints = t.Instances.DataManager.getPlayerPoints() + 5e3, t.Instances.DataManager.savePlayersPoints(n.totalPoints), n.textStarPoints.setText(n.totalPoints.toString())
            }, this), s.onDown.add(function() {
                t.Instances.DataManager.createData(), t.Instances.DataManager.saveMusic(!1), n.stopAnimations(), n.game.state.start("mainMenuState", !0, !1)
            }, this)
        }, i
    }(Phaser.State);
    t.MainMenuState = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t) {
            var i = e.call(this) || this;
            return i.game = t, i
        }
        return __extends(i, e), i.prototype.init = function(e, i, s) {
            this.gameMode = e, this.difficulty = i, this.playerMode = s, this.selectingPlayer1 = !0, this.selectingPlayer2 = !1, this.playerCursorIndex1 = 0, this.playerCursorIndex2 = 1, this.headPlayer1 = 0, this.facePlayer1 = 0, this.bodyPlayer1 = 0, this.headPlayer2 = 0, this.facePlayer2 = 0, this.bodyPlayer2 = 0, s === t.PLAYER_MODE.SINGLE_PLAYER ? this.charactersChosen = [0] : this.charactersChosen = [0, 1]
        }, i.prototype.create = function() {
            this.game.analytics.google.sendScreenView("character_select"), this.dataManager = t.Instances.DataManager, this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.gotoGameplay()
        }, i.prototype.selectCharacter = function() {
            this.selectingPlayer1 ? this.charactersChosen[0] = void 0 : this.selectingPlayer2 && (this.charactersChosen[1] = void 0)
        }, i.prototype.selectHead = function() {
            this.selectingPlayer1 ? this.headPlayer1 = void 0 : this.selectingPlayer2 && (this.headPlayer2 = void 0)
        }, i.prototype.selectFace = function() {
            this.selectingPlayer1 ? this.facePlayer1 = void 0 : this.selectingPlayer2 && (this.facePlayer2 = void 0)
        }, i.prototype.selectBody = function() {
            this.selectingPlayer1 ? this.bodyPlayer1 = void 0 : this.selectingPlayer2 && (this.bodyPlayer2 = void 0)
        }, i.prototype.switchSelection = function() {
            this.selectingPlayer1 = !this.selectingPlayer1, this.selectingPlayer2 = !this.selectingPlayer2
        }, i.prototype.gotoGameplay = function() {
            var e, i;
            e = {
                face: this.facePlayer1,
                head: this.headPlayer1,
                body: this.bodyPlayer1
            }, i = {
                face: this.facePlayer2,
                head: this.headPlayer2,
                body: this.bodyPlayer2
            }, t.Instances.DataManager.saveOutfitPlayer1(e), t.Instances.DataManager.saveOutfitPlayer2(i), this.game.state.start("gameplayState", !0, !1, this.gameMode, this.difficulty, this.playerMode, this.charactersChosen)
        }, i
    }(Phaser.State);
    t.CharacterSelectState = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.init = function(e, i, s, n, a, o, r, h) {
            this.gameMode = e, this.difficulty = i, this.playerMode = s, this.mapTheme = n, this.characters = a, this.totalEnemies = o, this.totalLevels = r, this.gameTimer = 0, this.gameStatus = t.GAME_STATUS.PLAYING, this.endGame = null, this.isDesktop = this.game.device.desktop, this.gameScale = t.SETTINGS.SCALE, this.textFeedbackEnabled = [], this.textFeedbackEnabled = [!1, !1, !1, !1, !1], this.textFeedbackTimer = 0, this.textFeedbackColor = "#c30411", this.scoreManager = void 0 !== h ? h : null, this.currentOrientation = t.SETTINGS.CURRENT_ORIENTATION, this.levelNumber = t.Instances.DataManager.getCurrentLevel(), this.directionMission1 = "left", this.directionMission2 = "left", this.directionMission3 = "left", this.movingText1 = !1, this.movingText2 = !1, this.movingText3 = !1, this.currentMissionLimitLeft = 0, this.currentMissionLimitRight = 0, this.missionLimitLeft1 = 0, this.missionLimitLeft2 = 0, this.missionLimitLeft3 = 0, this.missionLimitRight1 = 0, this.missionLimitRight2 = 0, this.missionLimitRight3 = 0
        }, i.prototype.create = function() {
            var e, i, s, n;
            this.game.analytics.google.sendScreenView("gameplay"), this.game.analytics.game.addEvent(new GA.Events.Progression("Start:Level" + this.levelNumber)), e = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .75, i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT, this.currentLevel = t.Instances.DataManager.getCurrentLevel(), this.bgLandscape = this.game.add.sprite(.5 * this.game.width, .5 * this.game.height, "gameplay_land"), this.bgLandscape.anchor.set(.5), this.bgPortrait = this.game.add.sprite(.5 * this.game.width, .5 * this.game.height, "gameplay"), this.bgPortrait.anchor.set(.5), this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.uiGameplay = this.game.add.ph2UI("gameplay", "atlas_ui_gameplay"), this.uiPause = this.game.add.ph2UI("pause", "atlas_missions"), this.overlayPause = new t.Overlay(this.game, .7, "bg_black"), this.overlayGameOver = new t.Overlay(this.game, .7, "bg_black"), this.buttonPause = Ph2.UISystem.findObject("container/pause_button", this.uiGameplay), this.avatarsContainer = Ph2.UISystem.findObject("container", this.uiGameplay), this.gameContainer = Ph2.UISystem.findObject("edge", this.uiGameplay), s = this.gameContainer.width, n = this.gameContainer.height, this.buttonResume = Ph2.UISystem.findObject("pause_button", this.uiPause), this.buttonMainMenu = Ph2.UISystem.findObject("main_menu_button", this.uiPause), this.buttonAudio = Ph2.UISystem.findObject("sound_container/audio_button", this.uiPause), this.buttonMusic = Ph2.UISystem.findObject("sound_container/music_button", this.uiPause), this.characterContainer = Ph2.UISystem.findObject("character", this.uiPause), this.avatar1 = Ph2.UISystem.findObject("container/avatar1_container", this.uiGameplay), this.avatar2 = Ph2.UISystem.findObject("container/avatar2_container", this.uiGameplay), this.avatar3 = Ph2.UISystem.findObject("container/avatar3_container", this.uiGameplay), this.avatar4 = Ph2.UISystem.findObject("container/avatar4_container", this.uiGameplay), this.textLevel = Ph2.UISystem.findObject("container/level_container/level", this.uiGameplay), this.textTime = Ph2.UISystem.findObject("container/time_container/time", this.uiGameplay), this.edgeLeft = Ph2.UISystem.findObject("edge/edge_left", this.uiGameplay), this.edgeRight = Ph2.UISystem.findObject("edge/edge_right", this.uiGameplay), this.edgeTop = Ph2.UISystem.findObject("edge/edge_top", this.uiGameplay), this.edgeBot = Ph2.UISystem.findObject("edge/edge_bottom", this.uiGameplay), this.buttonMission1 = Ph2.UISystem.findObject("bg/mission1/close", this.uiPause), this.buttonMission2 = Ph2.UISystem.findObject("bg/mission2/close", this.uiPause), this.buttonMission3 = Ph2.UISystem.findObject("bg/mission3/close", this.uiPause), this.textMission1 = Ph2.UISystem.findObject("bg/mission1/description", this.uiPause), this.textMission2 = Ph2.UISystem.findObject("bg/mission2/description", this.uiPause), this.textMission3 = Ph2.UISystem.findObject("bg/mission3/description", this.uiPause), this.overlayGameOver.kill(), this.overlayPause.kill(), this.uiPause.visible = !1, this.grid = new t.Grid(this.game, this.difficulty, this.gameMode, this.playerMode, this.mapTheme, this.characters, this.totalEnemies), this.grid.x = this.edgeLeft.x + e, this.grid.y = this.edgeTop.bottom + i, this.grid.startingX = this.grid.x, this.grid.startingY = this.grid.y, this.animationContainer = this.game.add.ph2AnimationObject(this.gameContainer.x, this.gameContainer.y, "container", "atlas_ui_gameplay"), this.animationContainer.visible = !1, this.gameContainer.add(this.grid), this.containerWidthOffset = this.gameContainer.width - s, this.containerHeightOffset = this.gameContainer.height - n, this.edgeBot.bringToTop(), this.edgeTop.bringToTop(), this.edgeLeft.bringToTop(), this.edgeRight.bringToTop(), this.group.add(this.uiGameplay), this.group.add(this.overlayPause), this.group.add(this.uiPause), this.group.add(this.overlayGameOver), this.group.add(this.animationContainer), this.saveContainerValues(), this.initMusic(), this.createMask(), this.createPlayerAvatars(), this.createScoreManager(), this.createMissionAnimation(), this.addTouchListeners(), this.localizeUI(), this.updateUIs(), this.loadMissions(), this.createMissionsMask(), this.resize(), this.game.ph2NotificationManager.addObserver("_UPDATE_UIS", this.updateUIs, this), this.game.ph2NotificationManager.addObserver("_SHOW_MISSION_COMPLETE", this.showMissionCompleted, this), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_IN_120_SECONDS_IN_FROZEN), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_ARCADE_IN_120_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_BATTLE_ROYALE_120_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_STAR_COLLECTOR_120_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_IN_PACMAN_IN_120_SECONDS)
        }, i.prototype.createMissionAnimation = function() {
            var t, e;
            t = this.gameContainer.x, e = this.gameContainer.y + .5 * this.gameContainer.height, this.animationMissionComplete = this.game.add.ph2AnimationObject(t, e, "mission_completed", "atlas_ui_gameplay"), this.animationMissionComplete.visible = !1, this.group.add(this.animationMissionComplete)
        }, i.prototype.createMissionsMask = function() {
            var e, i, s, n, a, o, r, h;
            r = 300 * t.SETTINGS.SCALE, h = 45 * t.SETTINGS.SCALE, e = Ph2.UISystem.findObject("bg/mission1", this.uiPause), i = Ph2.UISystem.findObject("bg/mission2", this.uiPause), s = Ph2.UISystem.findObject("bg/mission3", this.uiPause), n = Ph2.UISystem.findObject("bg/mission1/mission", this.uiPause), a = Ph2.UISystem.findObject("bg/mission2/mission", this.uiPause), o = Ph2.UISystem.findObject("bg/mission3/mission", this.uiPause), this.missionMask1 = this.game.add.graphics(this.textMission1.x, this.textMission1.y - .5 * h), this.missionMask2 = this.game.add.graphics(this.textMission2.x, this.textMission2.y - .5 * h), this.missionMask3 = this.game.add.graphics(this.textMission3.x, this.textMission3.y - .5 * h), this.missionMask1.beginFill(65331), this.missionMask1.drawRect(0, 0, r - n.width, h), this.missionMask1.endFill(), this.missionMask2.beginFill(65331), this.missionMask2.drawRect(0, 0, r - a.width, h), this.missionMask2.endFill(), this.missionMask3.beginFill(65331), this.missionMask3.drawRect(0, 0, r - o.width, h), this.missionMask3.endFill(), e.addChild(this.missionMask1), i.addChild(this.missionMask2), s.addChild(this.missionMask3), this.textMission1.mask = this.missionMask1, this.textMission2.mask = this.missionMask2, this.textMission3.mask = this.missionMask3, this.getMissionLimits()
        }, i.prototype.getMissionLimits = function() {
            var e, i, s, n, a, o;
            s = 10 * t.SETTINGS.SCALE, e = 300 * t.SETTINGS.SCALE, n = Ph2.UISystem.findObject("bg/mission1/mission", this.uiPause), a = Ph2.UISystem.findObject("bg/mission2/mission", this.uiPause), o = Ph2.UISystem.findObject("bg/mission3/mission", this.uiPause), this.textMission1.width >= e - n.width && (i = this.textMission1.width - (e - n.width), this.missionLimitLeft1 = this.textMission1.left - (i + s), this.missionLimitRight1 = this.textMission1.x + s), this.textMission2.width >= e - a.width && (i = this.textMission2.width - (e - a.width), this.missionLimitLeft2 = this.textMission2.left - (i + s), this.missionLimitRight2 = this.textMission2.x + s), this.textMission3.width >= e - o.width && (i = this.textMission3.width - (e - o.width), this.missionLimitLeft3 = this.textMission3.left - (i + s), this.missionLimitRight3 = this.textMission3.x + s)
        }, i.prototype.saveContainerValues = function() {
            "landscape" === Constants.CURRENT_ORIENTATION ? this.containerInitialPortraitY = 0 : "portrait" === Constants.CURRENT_ORIENTATION && (this.containerInitialPortraitY = this.gameContainer.y)
        }, i.prototype.initMusic = function() {
            var e, i;
            i = t.Music.GAMEPLAY.length - 1, e = this.game.rnd.integerInRange(0, i), this.currentMusic = t.Music.GAMEPLAY[e], t.Instances.DataManager.getMusic() ? this.game.ph2AudioManager.switchMusic(t.Music.GAMEPLAY[e]) : this.buttonMusic.setFrames("mm_music_off.png", "mm_music_off.png", "mm_music.png", "mm_music_off.png"), t.Instances.DataManager.getAudio() ? this.buttonAudio.setFrames("mm_audio.png", "mm_audio.png", "mm_audio_off.png", "mm_audio.png") : this.buttonAudio.setFrames("mm_audio_off.png", "mm_audio_off.png", "mm_audio.png", "mm_audio_off.png")
        }, i.prototype.createMask = function() {
            var t, e, i, s, n = 1;
            "landscape" === Constants.CURRENT_ORIENTATION ? n = (this.game.height - 2 * this.edgeLeft.height) / this.gameContainer.height : "portrait" === Constants.CURRENT_ORIENTATION && (n = (this.game.width - 2 * this.edgeLeft.width) / this.gameContainer.width), n = Math.abs(n), t = this.gameContainer.x + this.edgeLeft.left * n, e = this.gameContainer.y + this.edgeTop.top * n, s = (Math.abs(this.edgeLeft.left) + Math.abs(this.edgeRight.right)) * n, i = (Math.abs(this.edgeTop.top) + Math.abs(this.edgeBot.bottom)) * n, this.gridMask = this.game.add.graphics(t, e - 10), this.gridMask.beginFill(16777215), this.gridMask.drawRect(0, 0, s, i), this.gridMask.endFill(), this.grid.mask = this.gridMask
        }, i.prototype.createPauseHeroes = function() {
            this.pauseHero1 = this.game.add.spine(150 * t.SETTINGS.SCALE, -150 * t.SETTINGS.SCALE, "dress_hero1"), this.pauseHero2 = this.game.add.spine(150 * t.SETTINGS.SCALE, -150 * t.SETTINGS.SCALE, "dress_hero2"), this.pauseHero1.createCombinedSkin("outfit", "normal0", "body1", "decor1"), this.pauseHero1.setSkinByName("outfit"), this.pauseHero1.setAnimationByName(0, "face1_front", !0), this.pauseHero1.setAnimationByName(1, "mm", !0), this.pauseHero1.setToSetupPose(), this.pauseHero1.scale.setTo(t.SETTINGS.SCALE), this.pauseHero2.createCombinedSkin("outfit", "normal0", "body3", "head3"), this.pauseHero2.setSkinByName("outfit"), this.pauseHero2.setAnimationByName(0, "anim_face", !0), this.pauseHero2.setAnimationByName(1, "mm", !0), this.pauseHero2.setToSetupPose(), this.pauseHero2.scale.setTo(t.SETTINGS.SCALE), this.characterContainer.add(this.pauseHero1), this.characterContainer.add(this.pauseHero2)
        }, i.prototype.createPlayerAvatars = function() {
            var e, i, s, n;
            for (s = [], e = 0; e < this.characters.length; e++) {
                switch (this.characters[e]) {
                    case 0:
                        i = "avatar_container1.png";
                        break;
                    case 1:
                        i = "avatar_container2.png";
                        break;
                    case 2:
                        i = "avatar_container3.png";
                        break;
                    case 3:
                        i = "avatar_container4.png";
                        break;
                    case 4:
                        i = "avatar_container5.png";
                        break;
                    case 5:
                        i = "avatar_container6.png";
                        break;
                    case 6:
                        i = "avatar_container7.png";
                        break;
                    case 7:
                        i = "avatar_container8.png";
                        break;
                    default:
                        i = "avatar_container1.png"
                }
                s.push(i)
            }
            switch (this.avatar1.frameName = s[0], this.avatar2.frameName = s[1], this.avatar3.frameName = s[2], this.avatar4.frameName = s[3], this.textLivesPlayer1 = Ph2.UISystem.findObject("container/avatar1_container/avatar1_life", this.uiGameplay), this.textBombsPlayer1 = Ph2.UISystem.findObject("container/avatar1_container/avatar1_bomb", this.uiGameplay), this.textPowerPlayer1 = Ph2.UISystem.findObject("container/avatar1_container/avatar1_power_blast", this.uiGameplay), this.textSpeedPlayer1 = Ph2.UISystem.findObject("container/avatar1_container/avatar1_speed", this.uiGameplay), this.textScorePlayer1 = Ph2.UISystem.findObject("container/avatar1_container/avatar1_score", this.uiGameplay), this.iconModePlayer1 = Ph2.UISystem.findObject("container/avatar1_container/avatar1_icon_mode", this.uiGameplay), this.textLivesPlayer2 = Ph2.UISystem.findObject("container/avatar2_container/avatar2_life", this.uiGameplay), this.textBombsPlayer2 = Ph2.UISystem.findObject("container/avatar2_container/avatar2_bomb", this.uiGameplay), this.textPowerPlayer2 = Ph2.UISystem.findObject("container/avatar2_container/avatar2_power_blast", this.uiGameplay), this.textSpeedPlayer2 = Ph2.UISystem.findObject("container/avatar2_container/avatar2_speed", this.uiGameplay), this.textScorePlayer2 = Ph2.UISystem.findObject("container/avatar2_container/avatar2_score", this.uiGameplay), this.iconModePlayer2 = Ph2.UISystem.findObject("container/avatar2_container/avatar2_icon_mode", this.uiGameplay), this.textLivesPlayer3 = Ph2.UISystem.findObject("container/avatar3_container/avatar3_life", this.uiGameplay), this.textBombsPlayer3 = Ph2.UISystem.findObject("container/avatar3_container/avatar3_bomb", this.uiGameplay), this.textPowerPlayer3 = Ph2.UISystem.findObject("container/avatar3_container/avatar3_power_blast", this.uiGameplay), this.textSpeedPlayer3 = Ph2.UISystem.findObject("container/avatar3_container/avatar3_speed", this.uiGameplay), this.textScorePlayer3 = Ph2.UISystem.findObject("container/avatar3_container/avatar3_score", this.uiGameplay), this.iconModePlayer3 = Ph2.UISystem.findObject("container/avatar3_container/avatar3_icon_mode", this.uiGameplay), this.textLivesPlayer4 = Ph2.UISystem.findObject("container/avatar4_container/avatar4_life", this.uiGameplay), this.textBombsPlayer4 = Ph2.UISystem.findObject("container/avatar4_container/avatar4_bomb", this.uiGameplay), this.textPowerPlayer4 = Ph2.UISystem.findObject("container/avatar4_container/avatar4_power_blast", this.uiGameplay), this.textSpeedPlayer4 = Ph2.UISystem.findObject("container/avatar4_container/avatar4_speed", this.uiGameplay), this.textScorePlayer4 = Ph2.UISystem.findObject("container/avatar4_container/avatar4_score", this.uiGameplay), this.iconModePlayer4 = Ph2.UISystem.findObject("container/avatar4_container/avatar4_icon_mode", this.uiGameplay), this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    n = "icon1.png";
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    n = "icon2.png";
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    n = "icon5.png";
                    break;
                case t.GAME_MODE.ICE_MAN:
                    n = "icon2.png";
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    n = "icon6.png";
                    break;
                default:
                    n = "icon1.png"
            }
            this.grid.players.length <= 2 && (this.avatar3.visible = !1, this.avatar3.visibility.enable(!1), this.avatar4.visible = !1, this.avatar4.visibility.enable(!1)), this.grid.players.length <= 3 && (this.avatar4.visible = !1, this.avatar4.visibility.enable(!1)), this.iconModePlayer1.frameName = n, this.iconModePlayer2.frameName = n, this.iconModePlayer3.frameName = n, this.iconModePlayer4.frameName = n, this.gameMode === t.GAME_MODE.NEW_PACMAN && (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER && (this.iconModePlayer2.frameName = "icon4.png"), this.iconModePlayer3.frameName = "icon4.png", this.iconModePlayer4.frameName = "icon4.png")
        }, i.prototype.createScoreManager = function() {
            null === this.scoreManager && (this.scoreManager = new t.ScoreManager(this.game, this.grid.players, this.difficulty, this.gameMode))
        }, i.prototype.addTouchListeners = function() {
            this.buttonAudio.onInputDown.add(this.switchAudio, this), this.buttonMusic.onInputDown.add(this.switchMusic, this), this.buttonPause.onInputDown.add(this.pausePressed, this), this.buttonResume.onInputDown.add(this.pausePressed, this), this.buttonMainMenu.onInputDown.add(this.gotoMainMenu, this), this.buttonResume.onInputOut.add(this.buttonInputOut, this), this.buttonMainMenu.onInputOut.add(this.buttonInputOut, this), this.buttonResume.onInputOver.add(this.buttonInputOver, this), this.buttonMainMenu.onInputOver.add(this.buttonInputOver, this), this.buttonMission1.onInputUp.add(this.changeMission, this), this.buttonMission2.onInputUp.add(this.changeMission, this), this.buttonMission3.onInputUp.add(this.changeMission, this), this.textMission1.inputEnabled = !0, this.textMission2.inputEnabled = !0, this.textMission3.inputEnabled = !0
        }, i.prototype.localizeUI = function() {
            this.textLevel.setText(this.currentLevel.toString() + " / " + this.totalLevels.toString()), this.textTime.setText("180"), t.Instances.LocalizationManager.localizeText("container/level_container/level_text", this.uiGameplay, "level"), t.Instances.LocalizationManager.localizeText("container/time_container/time_text", this.uiGameplay, "time"), t.Instances.LocalizationManager.localizeText("container/pause_button/pause_text", this.uiGameplay, "gp_pause"), t.Instances.LocalizationManager.localizeText("pause_button/text", this.uiPause, "gp_resume"), t.Instances.LocalizationManager.localizeText("main_menu_button/text", this.uiPause, "main_menu")
        }, i.prototype.loadMissions = function() {
            var e, i, s, n, a, o;
            e = t.Instances.MissionManager.missionsActive[0], i = t.Instances.MissionManager.missionsActive[1], s = t.Instances.MissionManager.missionsActive[2], n = e.progress + "/" + e.requirement, a = i.progress + "/" + i.requirement, o = s.progress + "/" + s.requirement, t.Instances.LocalizationManager.localizeText("bg/mission1/description", this.uiPause, e.name), t.Instances.LocalizationManager.localizeText("bg/mission1/mission", this.uiPause, n, !0), t.Instances.LocalizationManager.localizeText("bg/mission1/score", this.uiPause, e.reward.toString(), !0), t.Instances.LocalizationManager.localizeText("bg/mission2/description", this.uiPause, i.name), t.Instances.LocalizationManager.localizeText("bg/mission2/mission", this.uiPause, a, !0), t.Instances.LocalizationManager.localizeText("bg/mission2/score", this.uiPause, i.reward.toString(), !0), t.Instances.LocalizationManager.localizeText("bg/mission3/description", this.uiPause, s.name), t.Instances.LocalizationManager.localizeText("bg/mission3/mission", this.uiPause, o, !0), t.Instances.LocalizationManager.localizeText("bg/mission3/score", this.uiPause, s.reward.toString(), !0), Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiPause).visible = e.complete, Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiPause).visible = i.complete, Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiPause).visible = s.complete, Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiPause).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiPause).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiPause).visibility.enable(!1)
        }, i.prototype.pausePressed = function() {
            this.gameStatus === t.GAME_STATUS.PLAYING ? this.pauseGame() : this.gameStatus === t.GAME_STATUS.PAUSED && this.unpauseGame()
        }, i.prototype.pauseGame = function() {
            this.loadMissions(), this.game.ph2AudioManager.playEffect("menuPress", !1), this.gameStatus = t.GAME_STATUS.PAUSED, this.grid.gameStatus = t.GAME_STATUS.PAUSED, this.uiPause.visible = !0, this.overlayPause.revive(), this.grid.pauseGrid()
        }, i.prototype.unpauseGame = function() {
            this.stopMovingMissionText(this.textMission1), this.stopMovingMissionText(this.textMission2), this.stopMovingMissionText(this.textMission3), this.game.ph2AudioManager.playEffect("menuPress", !1), this.gameStatus = t.GAME_STATUS.PLAYING, this.grid.gameStatus = t.GAME_STATUS.PLAYING, this.uiPause.visible = !1, this.overlayPause.kill(), this.grid.resumeGrid()
        }, i.prototype.checkMissionText = function(e) {
            var i, s, n, a;
            switch (s = Ph2.UISystem.findObject("bg/mission1/mission", this.uiPause), n = Ph2.UISystem.findObject("bg/mission2/mission", this.uiPause), a = Ph2.UISystem.findObject("bg/mission3/mission", this.uiPause), e.parent.name) {
                case "mission1":
                    i = 300 * t.SETTINGS.SCALE - s.width;
                    break;
                case "mission2":
                    i = 300 * t.SETTINGS.SCALE - n.width;
                    break;
                case "mission3":
                    i = 300 * t.SETTINGS.SCALE - a.width
            }
            if (e.width > i) switch (e.width - i, e.parent.name) {
                case "mission1":
                    this.movingText1 = !0;
                    break;
                case "mission2":
                    this.movingText2 = !0;
                    break;
                case "mission3":
                    this.movingText3 = !0
            } else switch (e.parent.name) {
                case "mission1":
                    this.movingText1 = !1;
                    break;
                case "mission2":
                    this.movingText2 = !1;
                    break;
                case "mission3":
                    this.movingText3 = !1
            }
        }, i.prototype.stopMovingMissionText = function(t) {
            switch (t.parent.name) {
                case "mission1":
                    this.movingText1 = !1;
                    break;
                case "mission2":
                    this.movingText2 = !1;
                    break;
                case "mission3":
                    this.movingText3 = !1;
                    break;
                default:
                    this.movingText1 = !1, this.movingText2 = !1, this.movingText3 = !1
            }
        }, i.prototype.changeMission = function(e) {
            var i, s, n, a, o = this;
            switch (i = e.parent.name) {
                case "mission1":
                    s = 0, a = this.buttonMission1;
                    break;
                case "mission2":
                    s = 1, a = this.buttonMission2;
                    break;
                case "mission3":
                    s = 2, a = this.buttonMission3;
                    break;
                default:
                    return
            }
            a.inputEnabled = !1, n = Ph2.UISystem.findObject("bg/" + i, this.uiPause), t.Instances.MissionManager.changeMission(s), this.game.add.tween(n).to({
                alpha: 0
            }, 500, "Linear", !0).onComplete.add(function() {
                o.onMissionFadeComplete(s)
            }, this)
        }, i.prototype.onMissionFadeComplete = function(e) {
            var i, s, n, a, o, r, h, l, c, u, d, p;
            switch (u = Ph2.UISystem.findObject("bg/mission1/mission", this.uiPause), d = Ph2.UISystem.findObject("bg/mission2/mission", this.uiPause), p = Ph2.UISystem.findObject("bg/mission3/mission", this.uiPause), r = 10 * t.SETTINGS.SCALE, h = 300 * t.SETTINGS.SCALE, i = "mission" + (e + 1), n = t.Instances.MissionManager.missionsActive[e], s = n.progress + "/" + n.requirement, a = Ph2.UISystem.findObject("bg/" + i, this.uiPause), c = Ph2.UISystem.findObject("bg/" + i + "/description", this.uiPause), c.x = -192.5 * t.SETTINGS.SCALE, t.Instances.LocalizationManager.localizeText("bg/" + i + "/description", this.uiPause, n.name), t.Instances.LocalizationManager.localizeText("bg/" + i + "/mission", this.uiPause, s, !0), t.Instances.LocalizationManager.localizeText("bg/" + i + "/score", this.uiPause, n.reward.toString(), !0), i) {
                case "mission1":
                    o = this.buttonMission1, this.textMission1.width >= h - u.width && (l = this.textMission1.width - (h - u.width), this.textMission1.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft1 = this.textMission1.left - (l + r), this.missionLimitRight1 = this.textMission1.x + r, this.missionMask1.width = h - u.width);
                    break;
                case "mission2":
                    o = this.buttonMission2, this.textMission2.width >= h - d.width && (l = this.textMission2.width - (h - d.width), this.textMission2.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft2 = this.textMission2.left - (l + r), this.missionLimitRight2 = this.textMission2.x + r, this.missionMask2.width = h - d.width);
                    break;
                case "mission3":
                    o = this.buttonMission3, this.textMission3.width >= h - p.width && (l = this.textMission3.width - (h - p.width), this.textMission3.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft3 = this.textMission3.left - (l + r), this.missionLimitRight3 = this.textMission3.x + r, this.missionMask3.width = h - p.width);
                    break;
                default:
                    return
            }
            this.game.add.tween(a).to({
                alpha: 1
            }, 500, "Linear", !0).onComplete.add(function() {
                o.inputEnabled = !0, o.input.useHandCursor = !0
            }, this)
        }, i.prototype.showMissionCompleted = function(e) {
            var i, s;
            this.animationMissionComplete.visible = !0, this.animationMissionComplete.ph2Animations.play("mission_completed_in", 1, !1), i = t.Instances.LocalizationManager.getStringForKey(e.name), null !== (s = Ph2.AnimationSystem.findObject("base/description", this.animationMissionComplete)) && s.setText(i)
        }, i.prototype.switchAudio = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), t.Instances.DataManager.getAudio() ? (this.game.ph2AudioManager.switchSfxState(), t.Instances.DataManager.saveAudio(!1), this.buttonAudio.setFrames("mm_audio_off.png", "mm_audio_off.png", "mm_audio.png", "mm_audio_off.png")) : (this.game.ph2AudioManager.switchSfxState(), t.Instances.DataManager.saveAudio(!0), this.buttonAudio.setFrames("mm_audio.png", "mm_audio.png", "mm_audio_off.png", "mm_audio.png"))
        }, i.prototype.switchMusic = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), t.Instances.DataManager.getMusic() ? (this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.stopMusic(), t.Instances.DataManager.saveMusic(!1), this.buttonMusic.setFrames("mm_music_off.png", "mm_music_off.png", "mm_music.png", "mm_music_off.png")) : (this.game.ph2AudioManager.switchMusicState(), this.game.ph2AudioManager.playMusic(this.currentMusic), t.Instances.DataManager.saveMusic(!0), this.buttonMusic.setFrames("mm_music.png", "mm_music.png", "mm_music_off.png", "mm_music.png"))
        }, i.prototype.checkGameOver = function() {
            if (this.gameStatus !== t.GAME_STATUS.GAME_OVER) switch (this.checkTime(), this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    this.checkPlayersArcade();
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    this.checkPlayersBattleRoyale();
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    this.checkPlayersStarCollector();
                    break;
                case t.GAME_MODE.ICE_MAN:
                    this.checkPlayersIceman();
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    this.checkPlayersPacman()
            }
        }, i.prototype.checkTime = function() {
            if (this.gameStatus === t.GAME_STATUS.PLAYING) {
                var e, i;
                this.gameTimer += this.game.time.elapsedMS, i = t.SETTINGS.MATCH_TIME - this.gameTimer, e = Math.floor(i / 1e3), this.gameTimer >= t.SETTINGS.MATCH_TIME ? (this.textTime.setText("0"), this.gameOver()) : this.textTime.setText(e.toString()), this.gameTimer >= t.SETTINGS.MATCH_TIME - 1e4 && (this.textFeedbackEnabled[4] = !0)
            }
        }, i.prototype.checkPlayersArcade = function() {
            var e, i, s;
            if (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER)
                if (this.grid.players[0].deathComplete) this.endGame = t.GAME_END.LOSE, this.gameOver();
                else {
                    for (i = !0, s = this.grid.players, e = 1; e < s.length; e++) s[e].deathComplete || (i = !1);
                    i && (this.endGame = t.GAME_END.WIN, this.gameOver())
                } else if (this.playerMode === t.PLAYER_MODE.MULTI_PLAYER)
                if (this.grid.players[0].deathComplete && this.grid.players[1].deathComplete) this.endGame = t.GAME_END.LOSE, this.gameOver();
                else {
                    for (i = !0, s = this.grid.players, e = 2; e < s.length; e++) s[e].deathComplete || (i = !1);
                    i && (this.endGame = t.GAME_END.WIN, this.gameOver())
                }
        }, i.prototype.checkPlayersBattleRoyale = function() {
            var e, i;
            for (i = this.grid.players.length, e = 0; e < i; e++) this.grid.players[e].totalKills >= 10 && (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.endGame = 0 === e ? t.GAME_END.WIN : t.GAME_END.LOSE : this.endGame = 0 === e || 1 === e ? t.GAME_END.WIN : t.GAME_END.LOSE, this.gameOver())
        }, i.prototype.checkPlayersIceman = function() {
            var e, i;
            for (i = this.grid.players.length, e = 0; e < i; e++) this.grid.players[e].totalFreeze >= 10 && (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.endGame = 0 === e ? t.GAME_END.WIN : t.GAME_END.LOSE : this.endGame = 0 === e || 1 === e ? t.GAME_END.WIN : t.GAME_END.LOSE, this.gameOver())
        }, i.prototype.checkPlayersStarCollector = function() {
            var e, i;
            for (i = this.grid.players.length, e = 0; e < i; e++) this.grid.players[e].totalStars >= 5 && (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.endGame = 0 === e ? t.GAME_END.WIN : t.GAME_END.LOSE : this.endGame = 0 === e || 1 === e ? t.GAME_END.WIN : t.GAME_END.LOSE, this.gameOver())
        }, i.prototype.checkPlayersPacman = function() {
            this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.grid.players[0].deathComplete ? (this.endGame = t.GAME_END.LOSE, this.gameOver()) : this.grid.players[0].totalCoins >= 100 && (this.endGame = t.GAME_END.WIN, this.gameOver()) : this.grid.players[0].deathComplete && this.grid.players[1].deathComplete ? (this.endGame = t.GAME_END.LOSE, this.gameOver()) : (this.grid.players[0].totalCoins >= 100 || this.grid.players[1].totalCoins >= 100) && (this.endGame = t.GAME_END.WIN, this.gameOver())
        }, i.prototype.gameOver = function() {
            var e = this;
            this.gameTimer < t.SETTINGS.MATCH_TIME && (this.endGame === t.GAME_END.WIN ? this.game.analytics.game.addEvent(new GA.Events.Progression("Complete:Level" + this.levelNumber)) : this.game.analytics.game.addEvent(new GA.Events.Progression("Fail:Level" + this.levelNumber)));
            var i, s, n, a, o, r, h, l, c, u, d, p, m;
            if (n = !1, m = !1, this.gameMode === t.GAME_MODE.ICE_MAN)
                for (i = 0; i < this.grid.players.length; i++)
                    for (s = 0; s < this.grid.players[i].totalFreeze; s++) this.game.ph2NotificationManager.postNotification("_ADD_SCORE_KILLS", this.grid.players[i].playerID);
            if (this.gameTimer < t.SETTINGS.MATCH_TIME) this.endGame === t.GAME_END.WIN && (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.scoreManager.addLeftOverTime(this.gameTimer, this.grid.players[0].playerID) : (this.scoreManager.addLeftOverTime(this.gameTimer, this.grid.players[0].playerID), this.scoreManager.addLeftOverTime(this.gameTimer, this.grid.players[1].playerID)));
            else switch (m = !0, this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    this.checkArcadeScores();
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    this.checkBattleRoyaleScores();
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    this.checkNewPacmanScore();
                    break;
                case t.GAME_MODE.ICE_MAN:
                    this.checkIceManScore();
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    this.checkStarCollectorScore()
            }
            for (this.gameTimer = 0, this.gameStatus = t.GAME_STATUS.GAME_OVER, this.game.ph2AnimationManager.stopAll(), i = 0; i < this.grid.players.length; i++) this.grid.players[i].gameStatus = t.GAME_STATUS.GAME_OVER;
            if (this.endGame === t.GAME_END.LOSE && this.gameMode !== t.GAME_MODE.ARCADE && (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.grid.players[0].lives-- : (this.grid.players[0].lives--, this.grid.players[1].lives--)), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (n = this.grid.players[0].lives <= 0, t.Instances.DataManager.saveLivesPlayer1(this.grid.players[0].lives)) : ((n = this.grid.players[0].lives <= 0 && this.grid.players[1].lives <= 0) || (this.grid.players[0].lives <= 0 ? this.grid.players[0].lives = 1 : this.grid.players[1].lives <= 0 && (this.grid.players[1].lives = 1)), t.Instances.DataManager.saveLivesPlayer1(this.grid.players[0].lives), t.Instances.DataManager.saveLivesPlayer2(this.grid.players[1].lives)), m) switch (t.Instances.DataManager.getLanguage()) {
                    case "en-US":
                        a = "pause_time.png";
                        break;
                    case "es-ES":
                        a = "pause_time_esp.png";
                        break;
                    case "nl-NL":
                        a = "pause_time_dutch.png";
                        break;
                    default:
                        a = "pause_time.png"
                } else if (this.endGame === t.GAME_END.WIN) switch (t.Instances.DataManager.getLanguage()) {
                    case "en-US":
                        a = "pause_win.png";
                        break;
                    case "es-ES":
                        a = "pause_win_esp.png";
                        break;
                    case "nl-NL":
                        a = "pause_win_dutch.png";
                        break;
                    default:
                        a = "pause_win.png"
                } else switch (t.Instances.DataManager.getLanguage()) {
                    case "en-US":
                        a = "pause_lose.png";
                        break;
                    case "es-ES":
                        a = "pause_lose_esp.png";
                        break;
                    case "nl-NL":
                        a = "pause_lose_dutch.png";
                        break;
                    default:
                        a = "pause_lose.png"
                }
                this.endGame === t.GAME_END.WIN && (n || (this.currentLevel >= this.totalLevels && (n = !0), this.currentLevel++, t.Instances.DataManager.saveCurrentLevel(this.currentLevel))), Ph2.AnimationSystem.findObject("image", this.animationContainer).frameName = a, o = this.gameMode, r = this.difficulty, h = this.playerMode, l = this.grid.mapThemeSelected, c = this.characters, u = this.totalEnemies, p = this.endGame, d = this.totalLevels, this.overlayGameOver.revive(), this.animationContainer.visible = !0, this.animationContainer.ph2Animations.play("game_over_play"), this.grid.gameOver(), this.endGame === t.GAME_END.WIN ? this.game.ph2AudioManager.switchMusic(t.Music.LEVEL_COMPLETED) : this.game.ph2AudioManager.switchMusic(t.Music.LEVEL_FAILED), this.checkClearMissions(), this.game.time.events.add(2e3, function() {
                e.game.state.start("gameOverState", !0, !1, o, r, h, l, c, u, d, e.scoreManager, p, n)
            }, this)
        }, i.prototype.checkClearMissions = function() {
            var e;
            if (this.endGame === t.GAME_END.WIN) this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.WIN_CONTINUOUSLY_IN_3_LEVELS), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.grid.players[0].weaponActive && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_ANY_WEAPON) : (this.grid.players[0].weaponActive || this.grid.players[1].weaponActive) && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_ANY_WEAPON), this.gameMode === t.GAME_MODE.ARCADE ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_ARCADE_IN_120_SECONDS) : this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_BATTLE_ROYALE_120_SECONDS) : this.gameMode === t.GAME_MODE.NEW_PACMAN ? (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.WIN_CONTINUOUSLY_IN_3_LEVELS_IN_PACMAN), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_IN_PACMAN_IN_120_SECONDS)) : this.gameMode === t.GAME_MODE.ICE_MAN ? (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.WIN_CONTINUOUSLY_3_LEVELS_IN_FROZEN), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_IN_120_SECONDS_IN_FROZEN)) : this.gameMode === t.GAME_MODE.STAR_COLLECTOR && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_LEVEL_STAR_COLLECTOR_120_SECONDS);
            else
                for (e = 0; e < t.Instances.MissionManager.missionsActive.length; e++) switch (t.Instances.MissionManager.missionsActive[e], t.Instances.MissionManager.missionsActive[e].id) {
                    case t.MISSION.WIN_CONTINUOUSLY_3_LEVELS_IN_FROZEN:
                        this.gameMode === t.GAME_MODE.ICE_MAN && (t.Instances.MissionManager.missionsActive[e].progress = 0);
                        break;
                    case t.MISSION.WIN_CONTINUOUSLY_IN_3_LEVELS_IN_PACMAN:
                        this.gameMode === t.GAME_MODE.NEW_PACMAN && (t.Instances.MissionManager.missionsActive[e].progress = 0);
                        break;
                    case t.MISSION.WIN_CONTINUOUSLY_IN_3_LEVELS:
                        t.Instances.MissionManager.missionsActive[e].progress = 0
                }
        }, i.prototype.checkArcadeScores = function() {
            var e;
            e = this.scoreManager.getMaxScore(), this.difficulty === t.DIFFICULTY.EASY ? this.endGame = t.GAME_END.WIN : this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.endGame = e === this.grid.players[0].playerID ? t.GAME_END.WIN : t.GAME_END.LOSE : this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.endGame = e === this.grid.players[0].playerID || e === this.grid.players[1].playerID ? t.GAME_END.WIN : t.GAME_END.LOSE)
        }, i.prototype.checkBattleRoyaleScores = function() {
            var e, i, s = 0;
            if (this.difficulty === t.DIFFICULTY.EASY) this.endGame = t.GAME_END.WIN;
            else {
                for (e = 0; e < this.grid.players.length; e++) this.grid.players[e].totalKills >= s && (s = this.grid.players[e].totalKills, i = e);
                this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.endGame = 0 === i ? t.GAME_END.WIN : t.GAME_END.LOSE : this.endGame = 0 === i || 1 === i ? t.GAME_END.WIN : t.GAME_END.LOSE
            }
        }, i.prototype.checkNewPacmanScore = function() {
            this.difficulty === t.DIFFICULTY.EASY ? this.endGame = t.GAME_END.WIN : this.endGame = t.GAME_END.LOSE
        }, i.prototype.checkIceManScore = function() {
            this.difficulty === t.DIFFICULTY.EASY && (this.endGame = t.GAME_END.WIN)
        }, i.prototype.checkStarCollectorScore = function() {
            var e, i, s = 0;
            if (this.difficulty === t.DIFFICULTY.EASY) this.endGame = t.GAME_END.WIN;
            else {
                for (e = 0; e < this.grid.players.length; e++) this.grid.players[e].totalCoins >= s && (s = this.grid.players[0].totalCoins, i = e);
                this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.endGame = 0 === i ? t.GAME_END.WIN : t.GAME_END.LOSE : this.endGame = 0 === i || 1 === i ? t.GAME_END.WIN : t.GAME_END.LOSE
            }
        }, i.prototype.updateUIs = function() {
            var t, e;
            e = (t = this.grid.players)[0].lives <= 0 ? 0 : t[0].lives, this.textLivesPlayer1.setText(e.toString()), this.textBombsPlayer1.setText(t[0].bombs.toString()), this.textPowerPlayer1.setText(t[0].power.toString()), this.textSpeedPlayer1.setText(t[0].speedPickedUp.toString()), e = t[1].lives <= 0 ? 0 : t[1].lives, this.textLivesPlayer2.setText(e.toString()), this.textBombsPlayer2.setText(t[1].bombs.toString()), this.textPowerPlayer2.setText(t[1].power.toString()), this.textSpeedPlayer2.setText(t[1].speedPickedUp.toString()), t.length >= 3 && (e = t[2].lives <= 0 ? 0 : t[2].lives, this.textLivesPlayer3.setText(e.toString()), this.textBombsPlayer3.setText(t[2].bombs.toString()), this.textPowerPlayer3.setText(t[2].power.toString()), this.textSpeedPlayer3.setText(t[2].speedPickedUp.toString())), t.length >= 4 && (e = t[3].lives <= 0 ? 0 : t[3].lives, this.textLivesPlayer4.setText(e.toString()), this.textBombsPlayer4.setText(t[3].bombs.toString()), this.textPowerPlayer4.setText(t[3].power.toString()), this.textSpeedPlayer4.setText(t[3].speedPickedUp.toString())), this.updateGameModeUIs(), this.updateAvatarFeedback()
        }, i.prototype.updateGameModeUIs = function() {
            var e;
            switch (e = this.grid.players, this.gameMode) {
                case t.GAME_MODE.ARCADE:
                    this.textScorePlayer1.setText("--"), this.textScorePlayer2.setText("--"), this.textScorePlayer3.setText("--"), this.textScorePlayer4.setText("--");
                    break;
                case t.GAME_MODE.BATTLE_ROYALE:
                    this.textScorePlayer1.setText(e[0].totalKills + "/10"), this.textScorePlayer2.setText(e[1].totalKills + "/10"), this.textFeedbackEnabled[0] = e[0].totalKills >= 8, this.textFeedbackEnabled[1] = e[1].totalKills >= 8, e.length >= 3 && (this.textScorePlayer3.setText(e[2].totalKills + "/10"), this.textFeedbackEnabled[2] = e[2].totalKills >= 8), e.length >= 4 && (this.textScorePlayer4.setText(e[3].totalKills + "/10"), this.textFeedbackEnabled[3] = e[3].totalKills >= 8);
                    break;
                case t.GAME_MODE.NEW_PACMAN:
                    this.textScorePlayer1.setText(e[0].totalCoins + "/100"), this.textFeedbackEnabled[0] = e[0].totalCoins >= 80, this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.textScorePlayer2.setText("") : (this.textScorePlayer2.setText(e[1].totalCoins + "/100"), this.textFeedbackEnabled[1] = e[1].totalCoins >= 80), e.length >= 3 && this.textScorePlayer3.setText(""), e.length >= 4 && this.textScorePlayer4.setText("");
                    break;
                case t.GAME_MODE.ICE_MAN:
                    this.textScorePlayer1.setText((e[0].totalFreeze + "/10").toString()), this.textScorePlayer2.setText((e[1].totalFreeze + "/10").toString()), this.textFeedbackEnabled[0] = e[0].totalFreeze >= 8, this.textFeedbackEnabled[1] = e[1].totalFreeze >= 8, e.length >= 3 && (this.textScorePlayer3.setText((e[2].totalFreeze + "/10").toString()), this.textFeedbackEnabled[2] = e[2].totalFreeze >= 8), e.length >= 4 && (this.textScorePlayer4.setText((e[3].totalFreeze + "/10").toString()), this.textFeedbackEnabled[3] = e[3].totalFreeze >= 8);
                    break;
                case t.GAME_MODE.STAR_COLLECTOR:
                    this.textScorePlayer1.setText(e[0].totalStars + "/5"), this.textScorePlayer2.setText(e[1].totalStars + "/5"), this.textFeedbackEnabled[0] = e[0].totalStars >= 4, this.textFeedbackEnabled[1] = e[1].totalStars >= 4, e.length >= 3 && (this.textScorePlayer3.setText(e[2].totalStars + "/5"), this.textFeedbackEnabled[2] = e[2].totalStars >= 4), e.length >= 4 && (this.textScorePlayer4.setText(e[3].totalStars + "/5"), this.textFeedbackEnabled[3] = e[3].totalStars >= 4)
            }
        }, i.prototype.updateAvatarFeedback = function() {
            var e, i, s, n;
            if (this.gameMode !== t.GAME_MODE.ICE_MAN && this.gameMode !== t.GAME_MODE.STAR_COLLECTOR && this.gameMode !== t.GAME_MODE.BATTLE_ROYALE)
                for (e = 0; e < this.grid.players.length; e++)
                    if (n = !0, this.grid.players[e].dead && (this.gameMode === t.GAME_MODE.NEW_PACMAN && this.grid.players[e].isAI && (n = !1), n)) {
                        switch (this.characters[e]) {
                            case 0:
                                i = "avatar_disable_container1.png";
                                break;
                            case 1:
                                i = "avatar_disable_container2.png";
                                break;
                            case 2:
                                i = "avatar_disable_container3.png";
                                break;
                            case 3:
                                i = "avatar_disable_container4.png";
                                break;
                            case 4:
                                i = "avatar_disable_container5.png";
                                break;
                            case 5:
                                i = "avatar_disable_container6.png";
                                break;
                            case 6:
                                i = "avatar_disable_container7.png";
                                break;
                            case 7:
                                i = "avatar_disable_container8.png";
                                break;
                            default:
                                i = "avatar_disable_container1.png"
                        }
                        switch (e) {
                            case 0:
                                s = this.avatar1;
                                break;
                            case 1:
                                s = this.avatar2;
                                break;
                            case 2:
                                s = this.avatar3;
                                break;
                            case 3:
                                s = this.avatar4;
                                break;
                            default:
                                s = this.avatar1
                        }
                        s.frameName = i
                    }
        }, i.prototype.updateTextFeedback = function() {
            var t;
            for (this.textFeedbackTimer += this.game.time.elapsedMS, this.textFeedbackTimer >= 125 && (this.textFeedbackTimer = 0, this.textFeedbackColor = "#ffffff" === this.textFeedbackColor ? "#c30411" : "#ffffff"), t = 0; t < this.textFeedbackEnabled.length; t++)
                if (this.textFeedbackEnabled[t]) switch (t) {
                    case 0:
                        this.textScorePlayer1.addColor(this.textFeedbackColor, 0);
                        break;
                    case 1:
                        this.textScorePlayer2.addColor(this.textFeedbackColor, 0);
                        break;
                    case 2:
                        this.textScorePlayer3.addColor(this.textFeedbackColor, 0);
                        break;
                    case 3:
                        this.textScorePlayer4.addColor(this.textFeedbackColor, 0);
                        break;
                    case 4:
                        this.textTime.addColor(this.textFeedbackColor, 0)
                }
        }, i.prototype.update = function() {
            this.gameStatus !== t.GAME_STATUS.PAUSED && this.gameStatus !== t.GAME_STATUS.GAME_OVER ? (this.checkGameOver(), this.updateTextFeedback()) : this.updateMissionText()
        }, i.prototype.updateMissionText = function() {
            var e, i, s, n, a, o, r, h, l, c;
            this.checkMissionText(this.textMission1), this.checkMissionText(this.textMission2), this.checkMissionText(this.textMission3), (this.movingText1 || this.movingText2 || this.movingText3) && (h = Ph2.UISystem.findObject("bg/mission1/mission", this.uiPause), l = Ph2.UISystem.findObject("bg/mission2/mission", this.uiPause), c = Ph2.UISystem.findObject("bg/mission3/mission", this.uiPause), r = .5 * t.SETTINGS.SCALE, this.movingText1 && (n = this.directionMission1, e = 300 * t.SETTINGS.SCALE - h.width), this.movingText2 && (a = this.directionMission2, i = 300 * t.SETTINGS.SCALE - l.width), this.movingText3 && (o = this.directionMission3, s = 300 * t.SETTINGS.SCALE - c.width), this.textMission1.width > e && ("left" === n ? (this.textMission1.x -= r, this.textMission1.x <= this.missionLimitLeft1 && (n = "right")) : "right" === n && (this.textMission1.x += r, this.textMission1.x >= this.missionLimitRight1 && (n = "left")), this.directionMission1 = n), this.textMission2.width > i && ("left" === a ? (this.textMission2.x -= r, this.textMission2.x <= this.missionLimitLeft2 && (a = "right")) : "right" === a && (this.textMission2.x += r, this.textMission2.x >= this.missionLimitRight2 && (a = "left")), this.directionMission2 = a), this.textMission3.width > s && ("left" === o ? (this.textMission3.x -= r, this.textMission3.x <= this.missionLimitLeft3 && (o = "right")) : "right" === o && (this.textMission3.x += r, this.textMission3.x >= this.missionLimitRight3 && (o = "left")), this.directionMission3 = o))
        }, i.prototype.resize = function() {
            var t, e, i;
            this.bgLandscape.x = .5 * this.game.width, this.bgLandscape.y = .5 * this.game.height, this.bgPortrait.x = .5 * this.game.width, this.bgPortrait.y = .5 * this.game.height, this.bgLandscape.scale.set(1, 1), this.bgPortrait.scale.set(1, 1), "landscape" === Constants.CURRENT_ORIENTATION ? (this.avatarsContainer.frameName = "gp_container1.png", this.bgLandscape.visible = !0, this.bgPortrait.visible = !1) : "portrait" === Constants.CURRENT_ORIENTATION && (0 === this.containerInitialPortraitY ? (this.containerInitialPortraitY = 100 * this.gameContainer.y / 97.5, this.gameContainer.y = this.containerInitialPortraitY) : this.gameContainer.y = this.containerInitialPortraitY, this.avatarsContainer.frameName = "gp_container2.png", this.bgLandscape.visible = !1, this.bgPortrait.visible = !0), (e = "landscape" === orientation ? Constants.CALCULATED_WIDTH - this.bgLandscape.width : Constants.CALCULATED_WIDTH - this.bgPortrait.width) > (i = "landscape" === orientation ? Constants.CALCULATED_HEIGHT - this.bgLandscape.height : Constants.CALCULATED_HEIGHT - this.bgPortrait.height) ? e > 0 && (t = "landscape" === orientation ? Constants.CALCULATED_WIDTH / this.bgLandscape.width : Constants.CALCULATED_WIDTH / this.bgPortrait.width, this.bgLandscape.scale.set(t, t), this.bgPortrait.scale.set(t, t)) : i > 0 && (t = "landscape" === orientation ? Constants.CALCULATED_HEIGHT / this.bgLandscape.height : Constants.CALCULATED_HEIGHT / this.bgPortrait.height, this.bgLandscape.scale.set(t, t), this.bgPortrait.scale.set(t, t)), this.isDesktop || (this.grid.players[0].inputController.stick.alignBottomLeft(0), this.resizeGameContainer()), this.uiPause.onGameSizeChanged(), this.animationContainer.x = this.gameContainer.x, this.animationContainer.y = this.gameContainer.y
        }, i.prototype.resizeGameContainer = function() {
            var e, i, s, n;
            this.avatarsContainer.scale.set(1, 1), this.gameContainer.scale.set(1, 1), "landscape" === Constants.CURRENT_ORIENTATION ? (e = this.game.height / (this.gameContainer.height - this.containerHeightOffset), s = .45 * this.avatarsContainer.width * e, this.gameContainer.y = 359 * t.SETTINGS.SCALE, this.avatarsContainer.y = this.gameContainer.y + 2 * t.SETTINGS.SCALE, this.avatarsContainer.x = this.gameContainer.x - Math.abs(this.edgeLeft.left) - s) : "portrait" === Constants.CURRENT_ORIENTATION && (e = this.game.width / (this.gameContainer.width - this.containerWidthOffset)), i = Math.abs(e), this.gameContainer.scale.set(i, i), this.overlayGameOver.width = this.game.width, this.overlayGameOver.height = this.game.height, this.overlayPause.width = this.game.width, this.overlayPause.height = this.game.height, "portrait" === Constants.CURRENT_ORIENTATION && (e < 1 ? (n = 1 - e + 1, this.avatarsContainer.y = (this.gameContainer.y - Math.abs(this.edgeTop.y * n + this.edgeTop.height * n) - .5 * this.avatarsContainer.height) * n) : (n = e, this.avatarsContainer.y = (this.gameContainer.y - Math.abs(this.edgeTop.y * e - this.edgeTop.height * n) - .5 * this.avatarsContainer.height) * n)), this.repositionMask(i)
        }, i.prototype.repositionMask = function(t) {
            var e, i, s = this;
            this.gridMask.x = this.gameContainer.x + this.edgeLeft.left * t, this.gridMask.y = this.gameContainer.y + this.edgeTop.top * t, e = (Math.abs(this.edgeLeft.left) + Math.abs(this.edgeRight.right)) * t, i = (Math.abs(this.edgeTop.top) + Math.abs(this.edgeBot.bottom)) * t, this.game.time.events.add(5, function() {
                if (s.gridMask.width < e)
                    for (; s.gridMask.width < e;) s.gridMask.width += 1;
                else
                    for (; s.gridMask.width > e;) s.gridMask.width -= 1; if (s.gridMask.height < i)
                    for (; s.gridMask.height < i;) s.gridMask.height += 1;
                else
                    for (; s.gridMask.height > i;) s.gridMask.height -= 1
            }, this)
        }, i.prototype.gotoMainMenu = function() {
            this.game.ph2AudioManager.playEffect("menuPress", !1), this.game.state.start("mainMenuState", !0, !1)
        }, i.prototype.buttonInputOver = function(t) {
            t.changeFrame("button_press.png"), this.game.ph2AudioManager.playEffect("menuTouch", !1)
        }, i.prototype.buttonInputOut = function(t) {
            t.changeFrame("button.png")
        }, i.prototype.shutdown = function() {
            var t;
            for (t = this.game.stage.children.length - 1; t >= 0; t--) "arcade" === this.game.stage.children[t].key && (this.game.stage.children[t] = null, this.game.stage.children.splice(t, 1));
            this.grid.shutdownGrid(), this.grid = null
        }, i.prototype.createCheats = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p, m, g, f, _, y, v, b, S, T = this;
            i = this.game.input.keyboard.addKey(Phaser.Keyboard.X), s = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE), n = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO), a = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE), o = this.game.input.keyboard.addKey(Phaser.Keyboard.FOUR), r = this.game.input.keyboard.addKey(Phaser.Keyboard.FIVE), h = this.game.input.keyboard.addKey(Phaser.Keyboard.SIX), l = this.game.input.keyboard.addKey(Phaser.Keyboard.SEVEN), c = this.game.input.keyboard.addKey(Phaser.Keyboard.EIGHT), u = this.game.input.keyboard.addKey(Phaser.Keyboard.NINE), d = this.game.input.keyboard.addKey(Phaser.Keyboard.ZERO), p = this.game.input.keyboard.addKey(Phaser.Keyboard.R), m = this.game.input.keyboard.addKey(Phaser.Keyboard.T), g = this.game.input.keyboard.addKey(Phaser.Keyboard.Y), f = this.game.input.keyboard.addKey(Phaser.Keyboard.U), _ = this.game.input.keyboard.addKey(Phaser.Keyboard.I), y = this.game.input.keyboard.addKey(Phaser.Keyboard.O), v = this.game.input.keyboard.addKey(Phaser.Keyboard.P), b = this.game.input.keyboard.addKey(Phaser.Keyboard.K), S = this.game.input.keyboard.addKey(Phaser.Keyboard.L), this.game.input.keyboard.addKey(Phaser.Keyboard.M), i.onDown.add(function() {
                switch (T.gameMode) {
                    case t.GAME_MODE.ARCADE:
                        for (e = 1; e < T.grid.players.length; e++) T.grid.players[e].deathComplete = !0;
                        break;
                    case t.GAME_MODE.BATTLE_ROYALE:
                        T.grid.players[0].totalKills = 10;
                        break;
                    case t.GAME_MODE.NEW_PACMAN:
                        T.grid.players[0].totalCoins = 100;
                        break;
                    case t.GAME_MODE.ICE_MAN:
                        T.grid.players[0].totalFreeze = 10;
                        break;
                    case t.GAME_MODE.STAR_COLLECTOR:
                        T.grid.players[0].totalStars = 5
                }
            }, this), s.onDown.add(function() {
                T.grid.players[0].cheatWeapon(t.ITEM_TYPE.DOLL_BOMB)
            }, this), n.onDown.add(function() {
                T.grid.players[0].cheatWeapon(t.ITEM_TYPE.FLAMETHROWER)
            }, this), a.onDown.add(function() {
                T.grid.players[0].cheatWeapon(t.ITEM_TYPE.LASER_GUN)
            }, this), o.onDown.add(function() {
                T.grid.players[0].cheatWeapon(t.ITEM_TYPE.HAMMER)
            }, this), r.onDown.add(function() {
                T.grid.players[0].cheatWeapon(t.ITEM_TYPE.LIGHTING_GUN)
            }, this), h.onDown.add(function() {
                T.grid.players[0].cheatWeapon(t.ITEM_TYPE.MIGHTY_HAMMER)
            }, this), l.onDown.add(function() {
                T.grid.players[0].cheatMount(t.ITEM_TYPE.SKATEBOARD)
            }, this), c.onDown.add(function() {
                T.grid.players[0].cheatMount(t.ITEM_TYPE.STAG)
            }, this), u.onDown.add(function() {
                T.grid.players[0].cheatMount(t.ITEM_TYPE.SHOPPING_CART)
            }, this), d.onDown.add(function() {
                T.grid.players[0].cheatMount(t.ITEM_TYPE.HORSE)
            }, this), p.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.BOMB)
            }, this), m.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.POWER)
            }, this), g.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.SPEED)
            }, this), f.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.KICK_BOMBS)
            }, this), _.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.SHIELD)
            }, this), y.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.HEART)
            }, this), v.onDown.add(function() {
                T.grid.players[0].cheatItem(t.ITEM_TYPE.INVINCIBILITY)
            }, this), b.onDown.add(function() {
                T.grid.cheatDestroy()
            }, this), S.onDown.add(function() {
                T.gameTimer = 175e3
            }, this)
        }, i
    }(Phaser.State);
    t.GameplayState = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i() {
            return e.call(this) || this
        }
        return __extends(i, e), i.prototype.init = function(e, i, s, n, a, o, r, h, l, c) {
            this.gameMode = e, this.difficulty = i, this.playerMode = s, this.isGameOver = c, this.mapTheme = n, this.enemies = o, this.gameEnd = l, this.levels = r, this.charactersChosen = a, this.scoreManager = h, this.selectingPlayer1 = !0, this.selectingPlayer2 = !1, this.visiblePopup = -1, this.popupTimer = -1, this.outfitPlayer1 = t.Instances.DataManager.getOutfitPlayer1(), this.outfitPlayer2 = t.Instances.DataManager.getOutfitPlayer2(), this.equippedOutfits = t.Instances.DataManager.getEquippedOutfits(), this.facePlayer1 = this.outfitPlayer1.face, this.headPlayer1 = this.outfitPlayer1.head, this.bodyPlayer1 = this.outfitPlayer1.body, this.facePlayer2 = this.outfitPlayer2.face, this.headPlayer2 = this.outfitPlayer2.head, this.bodyPlayer2 = this.outfitPlayer2.body, this.headsPlayer1 = [], this.headsPlayer2 = [], this.faces = [], this.bodies = [], this.outfitIndex1 = 0, this.outfitIndex2 = 0, this.currentLevel = t.Instances.DataManager.getCurrentLevel() - 1, this.currentCharacterOn = 0, this.isDesktop = this.game.device.desktop, this.showingGameOver = !1, this.directionMission1 = "left", this.directionMission2 = "left", this.directionMission3 = "left", this.movingText1 = !1, this.movingText2 = !1, this.movingText3 = !1, this.currentMissionLimitLeft = 0, this.currentMissionLimitRight = 0, this.missionLimitLeft1 = 0, this.missionLimitLeft2 = 0, this.missionLimitLeft3 = 0, this.missionLimitRight1 = 0, this.missionLimitRight2 = 0, this.missionLimitRight3 = 0, this.starsMission1 = [], this.starsMission2 = [], this.starsMission3 = [], this.obtainCharactersNames()
        }, i.prototype.create = function() {
            this.game.analytics.google.sendScreenView("gameover");
            var e, i, s, n, a, o, r, h, l;
            n = .5 * this.game.width, a = .5 * this.game.height, t.Instances.DataManager = t.Instances.DataManager, this.unlocks = t.Instances.DataManager.getUnlocks(), this.bgLandscape = this.game.add.sprite(.5 * this.game.width, .5 * this.game.height, "mm_land"), this.bgLandscape.anchor.set(.5), this.bgPortrait = this.game.add.sprite(.5 * this.game.width, this.game.height, "mm"), this.bgPortrait.anchor.set(.5, 1), this.bgPortrait.visible = !1, this.bgGameOver = this.game.add.sprite(.5 * this.game.width, .5 * this.game.height, "gameover_land"), this.bgGameOver.anchor.set(.5), this.bgGameOver.visible = !1, this.bgGameOverPortrait = this.game.add.sprite(.5 * this.game.width, this.game.height, "gameover"), this.bgGameOverPortrait.anchor.set(.5, 1), this.bgGameOverPortrait.visible = !1, this.group = new Phaser.Group(this.game), this.add.existing(this.group), this.uiLevelComplete = this.game.add.ph2UI("level_completed", "atlas_loading"), this.uiDressUp = this.game.add.ph2UI("dress_up_gameover", "atlas_ui_dress_up"), this.uiGameComplete = this.game.add.ph2UI("ui_game_completed", "atlas_game_completed"), this.uiGameOver = this.game.add.ph2UI("ui_gameover", "atlas_loading"), this.uiMissions = this.game.add.ph2UI("pause", "atlas_missions"), this.comic = new t.Comic(this.game), this.overlayMissions = new t.Overlay(this.game, .7, "bg_black"), this.overlayMissions.kill(), this.overlayDressUp = new t.Overlay(this.game, .7, "bg_black"), this.container = Ph2.UISystem.findObject("container", this.uiLevelComplete), this.buttonDressUp = Ph2.UISystem.findObject("container/dress_up_button", this.uiLevelComplete), this.buttonNext = Ph2.UISystem.findObject("container/more_games_button", this.uiLevelComplete), this.buttonMoreGames = Ph2.UISystem.findObject("container/next_button", this.uiLevelComplete), this.buttonMoreGames2 = Ph2.UISystem.findObject("container/more_games_button", this.uiGameOver), this.buttonMoreGames3 = Ph2.UISystem.findObject("container/more_games_button", this.uiGameComplete), this.buttonTryAgain = Ph2.UISystem.findObject("container/play_again_button", this.uiGameOver), this.buttonBack = Ph2.UISystem.findObject("container/back_button", this.uiGameComplete), this.buttonBack2 = Ph2.UISystem.findObject("container/back_button", this.uiDressUp), this.buttonMission1 = Ph2.UISystem.findObject("bg/mission1/close", this.uiMissions), this.buttonMission2 = Ph2.UISystem.findObject("bg/mission2/close", this.uiMissions), this.buttonMission3 = Ph2.UISystem.findObject("bg/mission3/close", this.uiMissions), this.characterContainer = Ph2.UISystem.findObject("container/character", this.uiDressUp), this.containerItem1 = Ph2.UISystem.findObject("container/container_items/item1", this.uiDressUp), this.containerItem2 = Ph2.UISystem.findObject("container/container_items/item2", this.uiDressUp), this.containerItem3 = Ph2.UISystem.findObject("container/container_items/item3", this.uiDressUp), this.containerItem4 = Ph2.UISystem.findObject("container/container_items/item4", this.uiDressUp), this.containerItem5 = Ph2.UISystem.findObject("container/container_items/item5", this.uiDressUp), this.containerItem6 = Ph2.UISystem.findObject("container/container_items/item6", this.uiDressUp), this.containerItem7 = Ph2.UISystem.findObject("container/container_items/item7", this.uiDressUp), this.containerItem8 = Ph2.UISystem.findObject("container/container_items/item8", this.uiDressUp), this.containerItem9 = Ph2.UISystem.findObject("container/container_items/item9", this.uiDressUp), this.iconPlayerNumber = Ph2.UISystem.findObject("container/p1_image", this.uiDressUp), e = Ph2.UISystem.findObject("container", this.uiDressUp), this.animationButtonChange = this.game.add.ph2AnimationObject(-125 * t.SETTINGS.SCALE, -140 * t.SETTINGS.SCALE, "change_button", "atlas_ui_dress_up"), this.animationButtonChange.ph2Animations.play("change_button_stand", 1, !0), this.buttonChangeCharacter = Ph2.AnimationSystem.findObject("base", this.animationButtonChange), e.addChild(this.animationButtonChange), this.animationButtonChange.visible = this.playerMode === t.PLAYER_MODE.MULTI_PLAYER, this.containerInfo = Ph2.UISystem.findObject("container/info_container", this.uiLevelComplete), this.containerPlayer1 = Ph2.UISystem.findObject("container/player1_container", this.uiLevelComplete), this.containerPlayer2 = Ph2.UISystem.findObject("container/player2_container", this.uiLevelComplete), this.containerBar = Ph2.UISystem.findObject("container/bar", this.uiLevelComplete), this.iconPlayerOne = Ph2.UISystem.findObject("container/player1_container/p1_image", this.uiLevelComplete), this.iconPlayerTwo = Ph2.UISystem.findObject("container/player2_container/p2_image", this.uiLevelComplete), this.textKillsScoreP1 = Ph2.UISystem.findObject("container/player1_container/enemies_destroyed_p1", this.uiLevelComplete), this.textTimeScoreP1 = Ph2.UISystem.findObject("container/player1_container/time_bonus_p1", this.uiLevelComplete), this.textDifficultyScoreP1 = Ph2.UISystem.findObject("container/player1_container/easy_bonus_p1", this.uiLevelComplete), this.textModeScoreP1 = Ph2.UISystem.findObject("container/player1_container/occupy_zones_p1", this.uiLevelComplete), this.textLevelScoreP1 = Ph2.UISystem.findObject("container/player1_container/level_score_p1", this.uiLevelComplete), this.textTotalScoreP1 = Ph2.UISystem.findObject("container/bar/total_score_p1", this.uiLevelComplete), this.textKillsScoreP2 = Ph2.UISystem.findObject("container/player2_container/enemies_destroyed_p2", this.uiLevelComplete), this.textTimeScoreP2 = Ph2.UISystem.findObject("container/player2_container/time_bonus_p2", this.uiLevelComplete), this.textDifficultyScoreP2 = Ph2.UISystem.findObject("container/player2_container/easy_bonus_p2", this.uiLevelComplete), this.textModeScoreP2 = Ph2.UISystem.findObject("container/player2_container/occupy_zones_p2", this.uiLevelComplete), this.textLevelScoreP2 = Ph2.UISystem.findObject("container/player2_container/level_score_p2", this.uiLevelComplete), this.textTotalScoreP2 = Ph2.UISystem.findObject("container/bar/total_score_p2", this.uiLevelComplete), Ph2.UISystem.findObject("container/container_win_hero1", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero2", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero3", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero4", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero5", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero6", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero7", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero8", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_win_hero1", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero2", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero3", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero4", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero5", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero6", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero7", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_win_hero8", this.uiGameComplete).visibility.enable(!1), this.textMission1 = Ph2.UISystem.findObject("bg/mission1/description", this.uiMissions), this.textMission2 = Ph2.UISystem.findObject("bg/mission2/description", this.uiMissions), this.textMission3 = Ph2.UISystem.findObject("bg/mission3/description", this.uiMissions), this.spinePlayer1 = this.game.add.spine(0, 0, this.spineNamePlayer1), this.spinePlayer2 = this.game.add.spine(0, 0, this.spineNamePlayer2), this.spinePlayer1.scale.setTo(t.SETTINGS.SCALE), this.spinePlayer2.scale.setTo(t.SETTINGS.SCALE), i = this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? 150 * t.SETTINGS.SCALE : 200 * t.SETTINGS.SCALE, s = this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? 50 * t.SETTINGS.SCALE : 60 * t.SETTINGS.SCALE, this.spineGameOverHero1 = this.game.add.spine(i, s, this.spineNamePlayer1), this.spineGameOverHero2 = this.game.add.spine(250 * t.SETTINGS.SCALE, 25 * t.SETTINGS.SCALE, this.spineNamePlayer2), this.spineGameOverHero2.visible = this.playerMode === t.PLAYER_MODE.MULTI_PLAYER, this.spineGameOverHero1.scale.setTo(t.SETTINGS.SCALE), this.spineGameOverHero2.scale.setTo(t.SETTINGS.SCALE), this.container.addChild(this.spineGameOverHero2), this.container.addChild(this.spineGameOverHero1), this.animationGameOver = this.game.add.ph2AnimationObject(n, a, "gameover", "atlas_gameover"), this.animationHeroGameOver = Ph2.AnimationSystem.findObject("skin", this.animationGameOver), this.animationGameOver.visible = !1, r = Ph2.UISystem.findObject("container/trophy", this.uiLevelComplete), o = Ph2.UISystem.findObject("bomb", this.uiLevelComplete), l = this.container.y - Math.abs(r.y), h = this.container.x - Math.abs(r.x), this.trophy = this.game.add.ph2AnimationObject(h, l, "trophy", "atlas_anim"), this.trophy.ph2Animations.play("trophy_stand", 1, !0), this.bomb = this.game.add.ph2AnimationObject(0, 0, "bomb_ui", "atlas_anim"), this.bomb.ph2Animations.play("bomb_decor", 1, !0), o.addChild(this.bomb), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (this.containerPlayer2.visible = !1, this.containerPlayer2.visibility.enable(!1), this.textTotalScoreP2.visible = !1, this.textTotalScoreP2.visibility.enable(!1), Ph2.UISystem.findObject("container/bar/p2_image", this.uiLevelComplete).visible = !1, Ph2.UISystem.findObject("container/bar/p2_image", this.uiLevelComplete).visibility.enable(!1)) : (this.containerPlayer2.visible = !0, this.containerPlayer2.visibility.enable(!0), this.textTotalScoreP2.visible = !0, this.textTotalScoreP2.visibility.enable(!0)), this.textStarPoints = Ph2.AnimationSystem.findObject("score", this.trophy), this.textModeScoreP1.visible = !1, this.textModeScoreP1.visibility.enable(!1), this.uiMissions.visible = !1, this.uiDressUp.visible = !1, this.uiGameOver.visible = !1, this.uiGameComplete.visible = !1, this.spinePlayer2.visible = !1, this.overlayDressUp.kill(), this.group.add(this.uiLevelComplete), this.group.add(this.overlayDressUp), this.group.add(this.uiDressUp), this.group.add(this.animationGameOver), this.group.add(this.uiGameOver), this.group.add(this.uiGameComplete), this.group.add(this.overlayMissions), this.group.add(this.trophy), this.group.add(this.uiMissions), this.group.add(this.comic), this.characterContainer.addChild(this.spinePlayer1), this.characterContainer.addChild(this.spinePlayer2), this.checkGameModeInfo(), this.createUnlockableItems(), this.addTouchListeners(), this.localizeUI(), this.obtainSkins(), this.checkCharacterItems(this.currentCharacterOn), this.setSkinPlayer1(), this.setSkinPlayer2(), this.showScores(), this.checkTimerMissions(), this.loadMissions(), this.createMissionsMask(), this.createMissionCompleteStars(), this.isGameOver ? this.checkMissionsGameOver() : this.checkMissionsLevelComplete(), this.checkMissionsCompleted(), this.resize()
        }, i.prototype.createMissionsMask = function() {
            var e, i, s, n, a, o, r, h;
            r = 300 * t.SETTINGS.SCALE, h = 45 * t.SETTINGS.SCALE, e = Ph2.UISystem.findObject("bg/mission1", this.uiMissions), i = Ph2.UISystem.findObject("bg/mission2", this.uiMissions), s = Ph2.UISystem.findObject("bg/mission3", this.uiMissions), n = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), a = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), o = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), this.missionMask1 = this.game.add.graphics(this.textMission1.x, this.textMission1.y - .5 * h), this.missionMask2 = this.game.add.graphics(this.textMission2.x, this.textMission2.y - .5 * h), this.missionMask3 = this.game.add.graphics(this.textMission3.x, this.textMission3.y - .5 * h), this.missionMask1.beginFill(65331), this.missionMask1.drawRect(0, 0, r - n.width, h), this.missionMask1.endFill(), this.missionMask2.beginFill(65331), this.missionMask2.drawRect(0, 0, r - a.width, h), this.missionMask2.endFill(), this.missionMask3.beginFill(65331), this.missionMask3.drawRect(0, 0, r - o.width, h), this.missionMask3.endFill(), e.addChild(this.missionMask1), i.addChild(this.missionMask2), s.addChild(this.missionMask3), this.textMission1.mask = this.missionMask1, this.textMission2.mask = this.missionMask2, this.textMission3.mask = this.missionMask3, this.getMissionLimits()
        }, i.prototype.getMissionLimits = function() {
            var e, i, s, n, a, o;
            s = 10 * t.SETTINGS.SCALE, e = 300 * t.SETTINGS.SCALE, n = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), a = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), o = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), this.textMission1.width >= e - n.width && (i = this.textMission1.width - (e - n.width), this.missionLimitLeft1 = this.textMission1.left - (i + s), this.missionLimitRight1 = this.textMission1.x + s), this.textMission2.width >= e - a.width && (i = this.textMission2.width - (e - a.width), this.missionLimitLeft2 = this.textMission2.left - (i + s), this.missionLimitRight2 = this.textMission2.x + s), this.textMission3.width >= e - o.width && (i = this.textMission3.width - (e - o.width), this.missionLimitLeft3 = this.textMission3.left - (i + s), this.missionLimitRight3 = this.textMission3.x + s)
        }, i.prototype.checkTimerMissions = function() {
            var e;
            for (e = 0; e < t.Instances.MissionManager.missionsActive.length; e++) t.Instances.MissionManager.missionsActive[e].hasTimer && t.Instances.MissionManager.missionsActive[e].progress < t.Instances.MissionManager.missionsActive[e].requirement && t.Instances.MissionManager.missionsActive[e].restartMission()
        }, i.prototype.loadMissions = function() {
            var e, i, s, n, a, o;
            Ph2.UISystem.findObject("pause_button", this.uiMissions).visible = !1, Ph2.UISystem.findObject("bg/description", this.uiMissions).visible = !1, Ph2.UISystem.findObject("sound_container", this.uiMissions).visible = !1, Ph2.UISystem.findObject("main_menu_button", this.uiMissions).visible = !1, Ph2.UISystem.findObject("pause_button", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/description", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("sound_container", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("main_menu_button", this.uiMissions).visibility.enable(!1), e = t.Instances.MissionManager.missionsActive[0], i = t.Instances.MissionManager.missionsActive[1], s = t.Instances.MissionManager.missionsActive[2], n = e.progress + "/" + e.requirement, a = i.progress + "/" + i.requirement, o = s.progress + "/" + s.requirement, t.Instances.LocalizationManager.localizeText("bg/mission1/description", this.uiMissions, e.name), t.Instances.LocalizationManager.localizeText("bg/mission1/mission", this.uiMissions, n, !0), t.Instances.LocalizationManager.localizeText("bg/mission1/score", this.uiMissions, e.reward.toString(), !0), t.Instances.LocalizationManager.localizeText("bg/mission2/description", this.uiMissions, i.name), t.Instances.LocalizationManager.localizeText("bg/mission2/mission", this.uiMissions, a, !0), t.Instances.LocalizationManager.localizeText("bg/mission2/score", this.uiMissions, i.reward.toString(), !0), t.Instances.LocalizationManager.localizeText("bg/mission3/description", this.uiMissions, s.name), t.Instances.LocalizationManager.localizeText("bg/mission3/mission", this.uiMissions, o, !0), t.Instances.LocalizationManager.localizeText("bg/mission3/score", this.uiMissions, s.reward.toString(), !0), Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visible = e.complete, Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visible = i.complete, Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visible = s.complete, Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visibility.enable(!1)
        }, i.prototype.showMissions = function(e) {
            void 0 === e && (e = !1);
            var i;
            if (this.uiMissions.visible) this.closeMissions();
            else if (this.overlayMissions.revive(), this.uiMissions.visible = !0, e)
                for (i = 0; i < t.Instances.MissionManager.missionsActive.length; i++) t.Instances.MissionManager.missionsActive[i].complete && this.doStarsAnimation(i)
        }, i.prototype.createMissionCompleteStars = function() {
            var e, i, s, n, a, o, r, h;
            for (o = Ph2.UISystem.findObject("bg/mission1", this.uiMissions), r = Ph2.UISystem.findObject("bg/mission2", this.uiMissions), h = Ph2.UISystem.findObject("bg/mission3", this.uiMissions), i = this.game.rnd.integerInRange(25, 30), e = 0; e < i; e++) n = this.game.rnd.integerInRange(this.container.x - 150 * t.SETTINGS.SCALE, this.container.x + 150 * t.SETTINGS.SCALE), a = this.container.y - Math.abs(o.y), (s = new Phaser.Sprite(this.game, n, a, "atlas_anim", "stars_trophy.png")).anchor.set(.5), s.visible = !1, this.starsMission1.push(s), this.group.add(s);
            for (i = this.game.rnd.integerInRange(25, 30), e = 0; e < i; e++) n = this.game.rnd.integerInRange(this.container.x - 150 * t.SETTINGS.SCALE, this.container.x + 150 * t.SETTINGS.SCALE), a = this.container.y - Math.abs(r.y), (s = new Phaser.Sprite(this.game, n, a, "atlas_anim", "stars_trophy.png")).anchor.set(.5), s.visible = !1, this.starsMission2.push(s), this.group.add(s);
            for (i = this.game.rnd.integerInRange(25, 30), e = 0; e < i; e++) n = this.game.rnd.integerInRange(this.container.x - 150 * t.SETTINGS.SCALE, this.container.x + 150 * t.SETTINGS.SCALE), a = this.container.y + Math.abs(h.y), (s = new Phaser.Sprite(this.game, n, a, "atlas_anim", "stars_trophy.png")).anchor.set(.5), s.visible = !1, this.starsMission3.push(s), this.group.add(s)
        }, i.prototype.doStarsAnimation = function(t) {
            var e, i, s, n;
            for (0 === t ? (s = this.starsMission1, n = "mission1") : 1 === t ? (s = this.starsMission2, n = "mission2") : 2 === t && (s = this.starsMission3, n = "mission3"), e = 0; e < s.length; e++) i = s[e], this.makeStarFall(i, e, n)
        }, i.prototype.makeStarFall = function(e, i, s) {
            var n, a, o, r, h = this;
            e.visible = !0, r = Ph2.UISystem.findObject("bg", this.uiMissions), o = 5 * i, a = this.container.y + .5 * r.height, n = this.game.rnd.integerInRange(e.x - 200 * t.SETTINGS.SCALE, e.x + 200 * t.SETTINGS.SCALE), this.game.add.tween(e).to({
                x: n
            }, 1e3, "Linear", !0, o), this.game.add.tween(e).to({
                y: a
            }, 1e3, Phaser.Easing.Bounce.Out, !0, o).onComplete.add(function() {
                h.moveStarToTrophy(e, i, s)
            }, this)
        }, i.prototype.moveStarToTrophy = function(e, i, s) {
            var n, a, o;
            n = 50 * i, a = this.trophy.x + -34.9 * t.SETTINGS.SCALE, o = this.trophy.y + -2.9 * t.SETTINGS.SCALE, this.game.add.tween(e).to({
                alpha: 0
            }, 650, Phaser.Easing.Exponential.In, !0, n), this.game.add.tween(e).to({
                x: a,
                y: o
            }, 500, "Linear", !0, n), 0 === i && this.removeCompleteMissions(s)
        }, i.prototype.removeCompleteMissions = function(e) {
            var i, s, n, a, o = this;
            switch (e) {
                case "mission1":
                    i = 0, n = this.buttonMission1;
                    break;
                case "mission2":
                    i = 1, n = this.buttonMission2;
                    break;
                case "mission3":
                    i = 2, n = this.buttonMission3;
                    break;
                default:
                    return
            }
            n.inputEnabled = !1, s = Ph2.UISystem.findObject("bg/" + e, this.uiMissions), t.Instances.MissionManager.completeMission(i), this.game.add.tween(s).to({
                alpha: 0
            }, 500, "Linear", !0).onComplete.add(function() {
                o.onMissionFadeComplete(i)
            }, this), a = t.Instances.DataManager.getPlayerPoints() + t.Instances.MissionManager.missionsActive[i].reward, t.Instances.DataManager.savePlayersPoints(a), this.textStarPoints.setText(t.Instances.DataManager.getPlayerPoints().toString())
        }, i.prototype.closeMissions = function() {
            this.stopMovingMissionText(this.textMission1), this.stopMovingMissionText(this.textMission2), this.stopMovingMissionText(this.textMission3), this.overlayMissions.kill(), this.uiMissions.visible = !1
        }, i.prototype.checkMissionText = function(e) {
            var i, s, n, a;
            switch (s = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), n = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), a = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), e.parent.name) {
                case "mission1":
                    i = 300 * t.SETTINGS.SCALE - s.width;
                    break;
                case "mission2":
                    i = 300 * t.SETTINGS.SCALE - n.width;
                    break;
                case "mission3":
                    i = 300 * t.SETTINGS.SCALE - a.width
            }
            if (e.width > i) switch (e.width - i, e.parent.name) {
                case "mission1":
                    this.movingText1 = !0;
                    break;
                case "mission2":
                    this.movingText2 = !0;
                    break;
                case "mission3":
                    this.movingText3 = !0
            } else switch (e.parent.name) {
                case "mission1":
                    this.movingText1 = !1;
                    break;
                case "mission2":
                    this.movingText2 = !1;
                    break;
                case "mission3":
                    this.movingText3 = !1
            }
        }, i.prototype.stopMovingMissionText = function(t) {
            switch (t.parent.name) {
                case "mission1":
                    this.movingText1 = !1;
                    break;
                case "mission2":
                    this.movingText2 = !1;
                    break;
                case "mission3":
                    this.movingText3 = !1;
                    break;
                default:
                    this.movingText1 = !1, this.movingText2 = !1, this.movingText3 = !1
            }
        }, i.prototype.changeMission = function(e) {
            var i, s, n, a, o = this;
            switch (i = e.parent.name) {
                case "mission1":
                    s = 0, a = this.buttonMission1;
                    break;
                case "mission2":
                    s = 1, a = this.buttonMission2;
                    break;
                case "mission3":
                    s = 2, a = this.buttonMission3;
                    break;
                default:
                    return
            }
            a.inputEnabled = !1, n = Ph2.UISystem.findObject("bg/" + i, this.uiMissions), t.Instances.MissionManager.changeMission(s), this.game.add.tween(n).to({
                alpha: 0
            }, 500, "Linear", !0).onComplete.add(function() {
                o.onMissionFadeComplete(s)
            }, this)
        }, i.prototype.onMissionFadeComplete = function(e) {
            var i, s, n, a, o, r, h, l, c, u, d, p, m;
            switch (d = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), p = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), m = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), r = 10 * t.SETTINGS.SCALE, h = 300 * t.SETTINGS.SCALE, i = "mission" + (e + 1), n = t.Instances.MissionManager.missionsActive[e], s = n.progress + "/" + n.requirement, a = Ph2.UISystem.findObject("bg/" + i, this.uiMissions), u = Ph2.UISystem.findObject("bg/" + i + "/empty/check", this.uiMissions), c = Ph2.UISystem.findObject("bg/" + i + "/description", this.uiMissions), u.visible = !1, u.visibility.enable(!1), c.x = -192.5 * t.SETTINGS.SCALE, t.Instances.LocalizationManager.localizeText("bg/" + i + "/description", this.uiMissions, n.name), t.Instances.LocalizationManager.localizeText("bg/" + i + "/mission", this.uiMissions, s, !0), t.Instances.LocalizationManager.localizeText("bg/" + i + "/score", this.uiMissions, n.reward.toString(), !0), i) {
                case "mission1":
                    o = this.buttonMission1, this.textMission1.width >= h - d.width && (l = this.textMission1.width - (h - d.width), this.textMission1.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft1 = this.textMission1.left - (l + r), this.missionLimitRight1 = this.textMission1.x + r, this.missionMask1.width = h - d.width);
                    break;
                case "mission2":
                    o = this.buttonMission2, this.textMission2.width >= h - p.width && (l = this.textMission2.width - (h - p.width), this.textMission2.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft2 = this.textMission2.left - (l + r), this.missionLimitRight2 = this.textMission2.x + r, this.missionMask2.width = h - p.width);
                    break;
                case "mission3":
                    o = this.buttonMission3, this.textMission3.width >= h - m.width && (l = this.textMission3.width - (h - m.width), this.textMission3.x = -192.5 * t.SETTINGS.SCALE, this.missionLimitLeft3 = this.textMission3.left - (l + r), this.missionLimitRight3 = this.textMission3.x + r, this.missionMask3.width = h - m.width);
                    break;
                default:
                    return
            }
            this.game.add.tween(a).to({
                alpha: 1
            }, 500, "Linear", !0).onComplete.add(function() {
                o.inputEnabled = !0, o.input.useHandCursor = !0
            }, this)
        }, i.prototype.checkMissionsGameOver = function() {
            this.gameMode === t.GAME_MODE.ARCADE ? this.gameEnd === t.GAME_END.WIN && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_ARCADE), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_ARCADE_5_TIMES), t.Instances.DataManager.getMapTheme() === t.MAP_THEME.FOREST && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_ARCADE_5_TIMES_IN_FOREST), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? t.Instances.DataManager.getLivesPlayer1() >= 3 && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_ARCADE_WITH_3_LIVES_LEFT) : (t.Instances.DataManager.getLivesPlayer1() >= 3 || t.Instances.DataManager.getLivesPlayer2() >= 3) && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_ARCADE_WITH_3_LIVES_LEFT)) : this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? (10 === this.levels && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_BATTLE_ROYALE_10_LEVELS), t.Instances.DataManager.getMapTheme() && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_BATTLE_ROYALE_IN_RANCH)) : this.gameMode === t.GAME_MODE.NEW_PACMAN ? (this.difficulty === t.DIFFICULTY.NORMAL && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_PACMAN_IN_NORMAL), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? 4 === this.charactersChosen[0] && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_PACMAN_PURPLE_ROBOT) : 4 !== this.charactersChosen[0] && 4 !== this.charactersChosen[1] || this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_PACMAN_PURPLE_ROBOT)) : this.gameMode === t.GAME_MODE.STAR_COLLECTOR ? (this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? 5 === this.charactersChosen[0] && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_STAR_COLLECTOR_BLACK_ROBOT) : 5 !== this.charactersChosen[0] && 5 !== this.charactersChosen[1] || this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_STAR_COLLECTOR_BLACK_ROBOT), t.Instances.DataManager.getMapTheme() === t.MAP_THEME.FOREST && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_STAR_COLLECTOR_IN_FOREST)) : this.gameMode === t.GAME_MODE.ICE_MAN && (t.Instances.DataManager.getMapTheme() === t.MAP_THEME.RACE_TRACK && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_FROZEN_MODE_IN_RACE_ARENA), 20 === this.levels && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.CLEAR_FROZEN_WITH_20_LEVELS))
        }, i.prototype.checkMissionsLevelComplete = function() {
            var e;
            e = t.Instances.DataManager.getMapTheme(), this.gameMode === t.GAME_MODE.ARCADE ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FIGHT_IN_ALL_ARENAS_IN_ARCADE_MODE, e) : this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FIGHT_IN_ALL_ARENAS_IN_BATTLE_ROYALE_MODE, e), e === t.MAP_THEME.RANCH && this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_HORSES_BATTLE_ROYALE_1_LEVEL)) : this.gameMode === t.GAME_MODE.STAR_COLLECTOR ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FIGHT_IN_ALL_ARENAS_IN_STAR_BATTLE_MODE, e) : this.gameMode === t.GAME_MODE.NEW_PACMAN ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FIGHT_IN_ALL_ARENAS_IN_PACMAN_MODE, e) : this.gameMode === t.GAME_MODE.ICE_MAN && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FIGHT_IN_ALL_ARENAS_IN_FREEZE_MODE, e), e === t.MAP_THEME.TOY_STORE ? (this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_CLAWS_TOYSHOP_ARENA), this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_CLAWS_3_CONTINUOUS_LEVELS)) : e === t.MAP_THEME.RACE_TRACK ? (this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_CARS_RACE_ARENA), this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_CARS_3_LEVELS), this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_CARS_5_LEVELS)) : e === t.MAP_THEME.RANCH && this.game.ph2NotificationManager.postNotification("_CHECK_AVOID_MISSION", t.MISSION.AVOID_HORSES_ARENA_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.PLAY_ALL_MODES, this.gameMode)
        }, i.prototype.checkMissionsCompleted = function(e) {
            var i = this;
            void 0 === e && (e = !1);
            var s, n, a;
            for (a = !1, n = t.Instances.MissionManager.getActiveMissions(), s = 0; s < n.length; s++) n[s].complete && (a = !0);
            if (Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visible = n[0].complete, Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visible = n[1].complete, Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visible = n[2].complete, Ph2.UISystem.findObject("bg/mission1/empty/check", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission2/empty/check", this.uiMissions).visibility.enable(!1), Ph2.UISystem.findObject("bg/mission3/empty/check", this.uiMissions).visibility.enable(!1), e)
                for (s = 0; s < t.Instances.MissionManager.missionsActive.length; s++) t.Instances.MissionManager.missionsActive[s].complete && this.doStarsAnimation(s);
            else a && this.game.time.events.add(500, function() {
                i.showMissions(!0)
            }, this)
        }, i.prototype.checkGameModeInfo = function() {
            var e, i, s, n, a, o, r;
            switch (e = Ph2.UISystem.findObject("container/info_container/item_image1", this.uiLevelComplete), i = Ph2.UISystem.findObject("container/info_container/item_image2", this.uiLevelComplete), s = Ph2.UISystem.findObject("container/info_container/item_image3", this.uiLevelComplete), n = Ph2.UISystem.findObject("container/info_container/item_image4", this.uiLevelComplete), a = Ph2.UISystem.findObject("container/info_container/item_image5", this.uiLevelComplete), this.difficulty) {
                case t.DIFFICULTY.EASY:
                    r = "score_easy";
                    break;
                case t.DIFFICULTY.NORMAL:
                    r = "score_normal";
                    break;
                case t.DIFFICULTY.HARD:
                    r = "score_hard";
                    break;
                default:
                    r = "score_easy"
            }
            this.gameMode === t.GAME_MODE.NEW_PACMAN || this.gameMode === t.GAME_MODE.STAR_COLLECTOR ? (e.frameName = this.gameMode === t.GAME_MODE.NEW_PACMAN ? "lvlc_item7.png" : "lvlc_item8.png", i.frameName = "lvlc_item3.png", s.frameName = "lvlc_item4.png", n.frameName = "lvlc_item5.png", a.frameName = "lvlc_item6.png", o = this.gameMode === t.GAME_MODE.NEW_PACMAN ? "score_coins" : "score_stars", t.Instances.LocalizationManager.localizeText("container/info_container/enemies_destroyed_text", this.uiLevelComplete, o), t.Instances.LocalizationManager.localizeText("container/info_container/time_bonus_text", this.uiLevelComplete, "score_enemies"), t.Instances.LocalizationManager.localizeText("container/info_container/easy_bonus_text", this.uiLevelComplete, "score_time"), t.Instances.LocalizationManager.localizeText("container/info_container/level_score_text", this.uiLevelComplete, r), t.Instances.LocalizationManager.localizeText("container/info_container/occupy_zones_text", this.uiLevelComplete, "score_level")) : (o = this.gameMode === t.GAME_MODE.ICE_MAN ? "score_ice" : "score_enemies", e.frameName = "lvlc_item3.png", i.frameName = "lvlc_item4.png", s.frameName = "lvlc_item5.png", n.frameName = "lvlc_item6.png", t.Instances.LocalizationManager.localizeText("container/info_container/enemies_destroyed_text", this.uiLevelComplete, o), t.Instances.LocalizationManager.localizeText("container/info_container/time_bonus_text", this.uiLevelComplete, "score_time"), t.Instances.LocalizationManager.localizeText("container/info_container/easy_bonus_text", this.uiLevelComplete, r), t.Instances.LocalizationManager.localizeText("container/info_container/level_score_text", this.uiLevelComplete, "score_level"), Ph2.UISystem.findObject("container/info_container/item_image5", this.uiLevelComplete).visible = !1, Ph2.UISystem.findObject("container/info_container/occupy_zones_text", this.uiLevelComplete).visible = !1, Ph2.UISystem.findObject("container/player1_container/occupy_zones_p1", this.uiLevelComplete).visible = !1, Ph2.UISystem.findObject("container/player2_container/occupy_zones_p2", this.uiLevelComplete).visible = !1, Ph2.UISystem.findObject("container/info_container/item_image5", this.uiLevelComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/info_container/occupy_zones_text", this.uiLevelComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/player1_container/occupy_zones_p1", this.uiLevelComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/player2_container/occupy_zones_p2", this.uiLevelComplete).visibility.enable(!1))
        }, i.prototype.obtainSkins = function() {
            t.Instances.DataManager = t.Instances.DataManager, this.headsPlayer1 = i.obtainHeads(this.spineNamePlayer1), this.headsPlayer2 = i.obtainHeads(this.spineNamePlayer2), this.faces = ["face1", "face2", "face3", "face4"], this.bodies = ["body1", "body2", "body3", "body4"]
        }, i.prototype.setSkin = function() {
            var t, e, i, s, n, a, o, r, h, l;
            switch (this.selectingPlayer1 ? (this.outfitIndex1++, o = this.spineNamePlayer1, n = this.spinePlayer1, a = this.spineGameOverHero1, s = this.outfitPlayer1, t = this.headsPlayer1[s.head], r = this.outfitIndex1) : this.selectingPlayer2 && (this.outfitIndex2++, o = this.spineNamePlayer2, n = this.spinePlayer2, a = this.spineGameOverHero2, s = this.outfitPlayer2, t = this.headsPlayer2[s.head], r = this.outfitIndex2), e = this.faces[s.face], i = this.bodies[s.body], l = !0, "dress_hero1" === o || "dress_hero3" === o || "dress_hero6" === o ? "head1" === t ? (n.createCombinedSkin("outfit" + r, "normal0", t, e, i), a.createCombinedSkin("outfit" + r, "normal0", t, e, i)) : (n.createCombinedSkin("outfit" + r, "normal0", "head1", t, e, i), a.createCombinedSkin("outfit" + r, "normal0", "head1", t, e, i)) : (n.createCombinedSkin("outfit" + r, "normal0", t, e, i), a.createCombinedSkin("outfit" + r, "normal0", t, e, i)), n.setSkinByName("outfit" + r), a.setSkinByName("outfit" + r), n.setAnimationByName(0, "special", !1), n.setAnimationByName(1, "stand", !1), o) {
                case "dress_hero1":
                    if ("face1" === e) h = "face1_front";
                    else {
                        if ("face3" !== e) {
                            l = !1;
                            break
                        }
                        h = "face2_front"
                    }
                    break;
                case "dress_hero2":
                    "face1" === e ? h = "face1_front" : l = !1;
                    break;
                case "dress_hero3":
                    "face1" === e || "face2" === e || "face3" === e ? h = "face_front" : l = !1;
                    break;
                case "dress_hero4":
                    "face1" === e ? h = "face1_front" : "face3" === e ? h = "face2_front" : l = !1;
                    break;
                case "dress_hero5":
                    "face1" === e ? h = "face1_front" : l = !1;
                    break;
                case "dress_hero6":
                    "face1" === e || "face4" === e ? h = "face1_front" : l = !1;
                    break;
                case "dress_hero7":
                case "dress_hero8":
                    "face1" === e ? h = "face1_front" : l = !1;
                    break;
                default:
                    h = "face1_front", l = !1
            }
            l && (n.setAnimationByName(1, h, !0), a.setAnimationByName(1, h, !0)), n.setToSetupPose(), a.setToSetupPose()
        }, i.prototype.setSkinPlayer1 = function() {
            var e, i, s, n, a, o, r, h, l, c;
            if (this.outfitIndex1++, n = this.spineNamePlayer1, a = this.outfitIndex1, r = this.gameEnd === t.GAME_END.WIN ? "special" : "sad", l = this.gameEnd === t.GAME_END.LOSE, e = this.headsPlayer1[this.outfitPlayer1.head], i = this.gameEnd === t.GAME_END.WIN ? this.faces[this.outfitPlayer1.face] : "face5", s = this.bodies[this.outfitPlayer1.body], c = !0, "dress_hero1" === n || "dress_hero3" === n || "dress_hero6" === n ? "head1" === e ? (this.spinePlayer1.createCombinedSkin("outfit" + a, "normal0", e, this.faces[this.outfitPlayer1.face], s), this.spineGameOverHero1.createCombinedSkin("outfit" + a, "normal0", e, i, s)) : (this.spinePlayer1.createCombinedSkin("outfit" + a, "normal0", "head1", e, this.faces[this.outfitPlayer1.face], s), this.spineGameOverHero1.createCombinedSkin("outfit" + a, "normal0", "head1", e, i, s)) : (this.spinePlayer1.createCombinedSkin("outfit" + a, "normal0", e, this.faces[this.outfitPlayer1.face], s), this.spineGameOverHero1.createCombinedSkin("outfit" + a, "normal0", e, i, s)), this.spinePlayer1.setSkinByName("outfit" + a), this.spineGameOverHero1.setSkinByName("outfit" + a), this.spinePlayer1.setAnimationByName(0, "stand", !0), this.spinePlayer1.setToSetupPose(), o = this.spineGameOverHero1.setAnimationByName(0, r, l), o.onComplete = function() {
                l || (this.spineGameOverHero1.setAnimationByName(0, "stand", !0), this.spineGameOverHero1.setToSetupPose())
            }.bind(this), this.gameEnd === t.GAME_END.LOSE) "dress_hero3" !== n && this.spineGameOverHero1.setAnimationByName(1, "face1_front", !0);
            else {
                switch (n) {
                    case "dress_hero1":
                        if ("face1" === i) h = "face1_front";
                        else {
                            if ("face3" !== i) {
                                c = !1;
                                break
                            }
                            h = "face2_front"
                        }
                        break;
                    case "dress_hero2":
                        "face1" === i ? h = "face1_front" : c = !1;
                        break;
                    case "dress_hero3":
                        "face1" === i || "face2" === i || "face3" === i ? h = "face_front" : c = !1;
                        break;
                    case "dress_hero4":
                        "face1" === i ? h = "face1_front" : "face3" === i ? h = "face2_front" : c = !1;
                        break;
                    case "dress_hero5":
                        "face1" === i ? h = "face1_front" : c = !1;
                        break;
                    case "dress_hero6":
                        "face1" === i || "face4" === i ? h = "face1_front" : c = !1;
                        break;
                    case "dress_hero7":
                    case "dress_hero8":
                        "face1" === i ? h = "face1_front" : c = !1;
                        break;
                    default:
                        h = "face1_front", c = !1
                }
                c && (this.spinePlayer1.setAnimationByName(1, h, !0), this.spineGameOverHero1.setAnimationByName(1, h, !0))
            }
            this.spinePlayer1.setToSetupPose(), this.spineGameOverHero1.setToSetupPose()
        }, i.prototype.setSkinPlayer2 = function() {
            var e, i, s, n, a, o, r, h, l, c;
            if (this.outfitIndex2++, n = this.spineNamePlayer2, a = this.outfitIndex2, r = this.gameEnd === t.GAME_END.WIN ? "special" : "sad", h = this.gameEnd === t.GAME_END.LOSE, e = this.headsPlayer2[this.outfitPlayer2.head], i = this.gameEnd === t.GAME_END.WIN ? this.faces[this.outfitPlayer2.face] : "face5", s = this.bodies[this.outfitPlayer2.body], "dress_hero1" === n || "dress_hero3" === n || "dress_hero6" === n ? "head1" === e ? (this.spinePlayer2.createCombinedSkin("outfit" + a, "normal0", e, this.faces[this.outfitPlayer2.face], s), this.spineGameOverHero2.createCombinedSkin("outfit" + a, "normal0", e, i, s)) : (this.spinePlayer2.createCombinedSkin("outfit" + a, "normal0", "head1", e, this.faces[this.outfitPlayer2.face], s), this.spineGameOverHero2.createCombinedSkin("outfit" + a, "normal0", "head1", e, i, s)) : (this.spinePlayer2.createCombinedSkin("outfit" + a, "normal0", e, this.faces[this.outfitPlayer2.face], s), this.spineGameOverHero2.createCombinedSkin("outfit" + a, "normal0", e, i, s)), this.spinePlayer2.setSkinByName("outfit" + a), this.spineGameOverHero2.setSkinByName("outfit" + a), this.spinePlayer2.setAnimationByName(0, "stand", !0), this.spinePlayer2.setToSetupPose(), o = this.spineGameOverHero2.setAnimationByName(0, r, h), o.onComplete = function() {
                h || (this.spineGameOverHero2.setAnimationByName(0, "stand", !0), this.spineGameOverHero2.setToSetupPose())
            }.bind(this), this.gameEnd === t.GAME_END.LOSE) this.spineGameOverHero2.setAnimationByName(1, "face1_front", !0);
            else {
                switch (n) {
                    case "dress_hero1":
                        if ("face1" === i) l = "face1_front";
                        else {
                            if ("face3" !== i) {
                                c = !1;
                                break
                            }
                            l = "face2_front"
                        }
                        break;
                    case "dress_hero2":
                        "face1" === i ? l = "face1_front" : c = !1;
                        break;
                    case "dress_hero3":
                        "face1" === i || "face2" === i || "face3" === i ? l = "face_front" : c = !1;
                        break;
                    case "dress_hero4":
                        "face1" === i ? l = "face1_front" : "face3" === i ? l = "face2_front" : c = !1;
                        break;
                    case "dress_hero5":
                        "face1" === i ? l = "face1_front" : c = !1;
                        break;
                    case "dress_hero6":
                        "face1" === i || "face4" === i ? l = "face1_front" : c = !1;
                        break;
                    case "dress_hero7":
                    case "dress_hero8":
                        "face1" === i ? l = "face1_front" : c = !1;
                        break;
                    default:
                        l = "face1_front", c = !1
                }
                c && (this.spinePlayer2.setAnimationByName(1, l, !0), this.spineGameOverHero2.setAnimationByName(1, l, !0))
            }
            this.spinePlayer2.setToSetupPose(), this.spineGameOverHero2.setToSetupPose()
        }, i.prototype.createUnlockableItems = function() {
            var e;
            switch (this.item9 = this.game.add.ph2AnimationObject(0, 0, "item9", "atlas_ui_dress_up"), this.item8 = this.game.add.ph2AnimationObject(0, 0, "item8", "atlas_ui_dress_up"), this.item7 = this.game.add.ph2AnimationObject(0, 0, "item7", "atlas_ui_dress_up"), this.item6 = this.game.add.ph2AnimationObject(0, 0, "item6", "atlas_ui_dress_up"), this.item5 = this.game.add.ph2AnimationObject(0, 0, "item5", "atlas_ui_dress_up"), this.item4 = this.game.add.ph2AnimationObject(0, 0, "item4", "atlas_ui_dress_up"), this.item3 = this.game.add.ph2AnimationObject(0, 0, "item3", "atlas_ui_dress_up"), this.item2 = this.game.add.ph2AnimationObject(0, 0, "item2", "atlas_ui_dress_up"), this.item1 = this.game.add.ph2AnimationObject(0, 0, "item1", "atlas_ui_dress_up"), this.items = [], this.items.push(this.item1, this.item2, this.item3, this.item4, this.item5, this.item6, this.item7, this.item8, this.item9), this.containerItem9.add(this.item9), this.containerItem8.add(this.item8), this.containerItem7.add(this.item7), this.containerItem6.add(this.item6), this.containerItem5.add(this.item5), this.containerItem4.add(this.item4), this.containerItem3.add(this.item3), this.containerItem2.add(this.item2), this.containerItem1.add(this.item1), this.itemPrice1 = Ph2.AnimationSystem.findObject("price", this.item1), this.itemPrice2 = Ph2.AnimationSystem.findObject("price", this.item2), this.itemPrice3 = Ph2.AnimationSystem.findObject("price", this.item3), this.itemPrice4 = Ph2.AnimationSystem.findObject("price", this.item4), this.itemPrice5 = Ph2.AnimationSystem.findObject("price", this.item5), this.itemPrice6 = Ph2.AnimationSystem.findObject("price", this.item6), this.itemPrice7 = Ph2.AnimationSystem.findObject("price", this.item7), this.itemPrice8 = Ph2.AnimationSystem.findObject("price", this.item8), this.itemPrice9 = Ph2.AnimationSystem.findObject("price", this.item9), this.charactersChosen[0]) {
                case 0:
                    e = "item1";
                    break;
                case 1:
                    e = "item2";
                    break;
                case 2:
                    e = "item3";
                    break;
                case 3:
                    e = "item4";
                    break;
                case 4:
                    e = "item5";
                    break;
                case 5:
                    e = "item6";
                    break;
                case 6:
                    e = "item7";
                    break;
                case 7:
                    e = "item8";
                    break;
                case 8:
                    e = "item9"
            }
            this.itemImages = [], this.itemImage1 = Ph2.AnimationSystem.findObject("image", this.item1), this.itemImage2 = Ph2.AnimationSystem.findObject("image", this.item2), this.itemImage3 = Ph2.AnimationSystem.findObject("image", this.item3), this.itemImage4 = Ph2.AnimationSystem.findObject("image", this.item4), this.itemImage5 = Ph2.AnimationSystem.findObject("image", this.item5), this.itemImage6 = Ph2.AnimationSystem.findObject("image", this.item6), this.itemImage7 = Ph2.AnimationSystem.findObject("image", this.item7), this.itemImage8 = Ph2.AnimationSystem.findObject("image", this.item8), this.itemImage9 = Ph2.AnimationSystem.findObject("image", this.item9), this.itemImages.push(this.itemImage1, this.itemImage2, this.itemImage3, this.itemImage4, this.itemImage5, this.itemImage6, this.itemImage7, this.itemImage8, this.itemImage9), this.itemPopups = [], this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item1", this.item1)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item2", this.item2)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item3", this.item3)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item4", this.item4)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item5", this.item5)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item6", this.item6)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item7", this.item7)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item8", this.item8)), this.itemPopups.push(Ph2.AnimationSystem.findObject("bubble_item9", this.item9));
            for (var i = 0; i < this.itemPopups.length; i++) this.itemPopups[i].visible = !1;
            this.itemImage1.frameName = e + "_1.png", this.itemImage2.frameName = e + "_2.png", this.itemImage3.frameName = e + "_3.png", this.itemImage4.frameName = e + "_4.png", this.itemImage5.frameName = e + "_5.png", this.itemImage6.frameName = e + "_6.png", this.itemImage7.frameName = e + "_7.png", this.itemImage8.frameName = e + "_8.png", this.itemImage9.frameName = e + "_9.png", this.itemFrames = [], this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item1)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item2)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item3)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item4)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item5)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item6)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item7)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item8)), this.itemFrames.push(Ph2.AnimationSystem.findObject("bottom", this.item9)), this.itemPrice1.setText(t.SETTINGS.ITEM_COSTS[0].toString()), this.itemPrice2.setText(t.SETTINGS.ITEM_COSTS[1].toString()), this.itemPrice3.setText(t.SETTINGS.ITEM_COSTS[2].toString()), this.itemPrice4.setText(t.SETTINGS.ITEM_COSTS[3].toString()), this.itemPrice5.setText(t.SETTINGS.ITEM_COSTS[4].toString()), this.itemPrice6.setText(t.SETTINGS.ITEM_COSTS[5].toString()), this.itemPrice7.setText(t.SETTINGS.ITEM_COSTS[6].toString()), this.itemPrice8.setText(t.SETTINGS.ITEM_COSTS[7].toString()), this.itemPrice9.setText(t.SETTINGS.ITEM_COSTS[8].toString()), this.currentCharacterOn = this.charactersChosen[0]
        }, i.prototype.localizeUI = function() {
            var e, i, s;
            this.textStarPoints.setText(t.Instances.DataManager.getPlayerPoints().toString()), i = t.Instances.LocalizationManager.getStringForKey("go_level"), s = this.gameEnd === t.GAME_END.WIN ? t.Instances.LocalizationManager.getStringForKey("go_complete") : t.Instances.LocalizationManager.getStringForKey("go_failed"), e = i + " " + (this.gameEnd === t.GAME_END.WIN ? t.Instances.DataManager.getCurrentLevel() - 1 : t.Instances.DataManager.getCurrentLevel()) + "/" + this.levels + " " + s, t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiLevelComplete, e, !0), t.Instances.LocalizationManager.localizeText("container/next_button/next_text", this.uiLevelComplete, "mm_more_games"), t.Instances.LocalizationManager.localizeText("container/more_games_button/more_games_text", this.uiLevelComplete, "next"), t.Instances.LocalizationManager.localizeText("container/dress_up_button/dress_up_text", this.uiLevelComplete, "dress_up"), t.Instances.LocalizationManager.localizeText("container/bar/total_score_text", this.uiLevelComplete, "score_total"), t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiDressUp, "dress_up"), t.Instances.LocalizationManager.localizeText("container/back_button/back_text", this.uiDressUp, "back"), t.Instances.LocalizationManager.localizeText("container/container_title/title", this.uiGameOver, "go_game_over"), t.Instances.LocalizationManager.localizeText("container/more_games_button/text", this.uiGameOver, "mm_more_games"), t.Instances.LocalizationManager.localizeText("container/play_again_button/text", this.uiGameOver, "back"), t.Instances.LocalizationManager.localizeText("container/container_score/total_score_text", this.uiGameOver, "score_total"), t.Instances.LocalizationManager.localizeText("container/title", this.uiGameComplete, "go_game_complete"), t.Instances.LocalizationManager.localizeText("container/more_games_button/more_games_text", this.uiGameComplete, "mm_more_games"), t.Instances.LocalizationManager.localizeText("container/back_button/back_text", this.uiGameComplete, "back"), t.Instances.LocalizationManager.localizeText("container/container_score/total_score_text", this.uiGameComplete, "score_total"), t.Instances.LocalizationManager.fitFontSizeUI("container/container_title/title", this.uiLevelComplete, 320 * t.SETTINGS.SCALE, -1, 42 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/info_container/enemies_destroyed_text", this.uiLevelComplete, 190 * t.SETTINGS.SCALE, -1, 18 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/info_container/time_bonus_text", this.uiLevelComplete, 190 * t.SETTINGS.SCALE, -1, 18 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/info_container/easy_bonus_text", this.uiLevelComplete, 190 * t.SETTINGS.SCALE, -1, 18 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/info_container/level_score_text", this.uiLevelComplete, 190 * t.SETTINGS.SCALE, -1, 18 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/info_container/occupy_zones_text", this.uiLevelComplete, 190 * t.SETTINGS.SCALE, -1, 18 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/container_title/title", this.uiGameOver, 300 * t.SETTINGS.SCALE, -1, 40 * t.SETTINGS.SCALE), t.Instances.LocalizationManager.fitFontSizeUI("container/title", this.uiGameComplete, 300 * t.SETTINGS.SCALE, -1, 40 * t.SETTINGS.SCALE), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item1/label", this.item1, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item2/label", this.item2, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item3/label", this.item3, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item4/label", this.item4, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item5/label", this.item5, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item6/label", this.item6, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item7/label", this.item7, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item8/label", this.item8, "not_enough_stars_popup"), 216), t.MainMenuState.setWordWrap(t.Instances.LocalizationManager.localizeAnimText("bubble_item9/label", this.item9, "not_enough_stars_popup"), 216)
        }, i.prototype.addTouchListeners = function() {
            var t = this;
            this.buttonNext.onInputUp.add(this.nextStep, this), this.buttonDressUp.onInputDown.add(this.openDressUp, this), this.buttonBack2.onInputDown.add(this.closeDressUp, this), this.buttonMoreGames.onInputDown.add(this.gotoMoreGames, this), this.buttonMoreGames2.onInputDown.add(this.gotoMoreGames, this), this.buttonMoreGames3.onInputDown.add(this.gotoMoreGames, this), this.buttonTryAgain.onInputUp.add(this.gotoMainMenu, this), this.buttonBack.onInputUp.add(this.gotoMainMenu, this), this.buttonMoreGames.onInputOut.add(i.buttonInputOut, this), this.buttonDressUp.onInputOut.add(i.buttonInputOut, this), this.buttonBack2.onInputOut.add(i.buttonInputOut, this), this.buttonNext.onInputOut.add(i.buttonInputOut, this), this.buttonMoreGames2.onInputOut.add(i.buttonInputOut, this), this.buttonMoreGames3.onInputOut.add(i.buttonInputOut, this), this.buttonTryAgain.onInputOut.add(i.buttonInputOut, this), this.buttonBack.onInputOut.add(i.buttonInputOut, this), this.buttonMoreGames.onInputOver.add(this.buttonInputOver, this), this.buttonDressUp.onInputOver.add(this.buttonInputOver, this), this.buttonBack2.onInputOver.add(this.buttonInputOver, this), this.buttonNext.onInputOver.add(this.buttonInputOver, this), this.buttonMoreGames2.onInputOver.add(this.buttonInputOver, this), this.buttonMoreGames3.onInputOver.add(this.buttonInputOver, this), this.buttonTryAgain.onInputOver.add(this.buttonInputOver, this), this.buttonBack.onInputOver.add(this.buttonInputOver, this), this.createItemButtonListener(this.itemImage1, this.selectFace), this.createItemButtonListener(this.itemImage2, this.selectFace), this.createItemButtonListener(this.itemImage3, this.selectFace), this.createItemButtonListener(this.itemImage4, this.selectHead), this.createItemButtonListener(this.itemImage5, this.selectHead), this.createItemButtonListener(this.itemImage6, this.selectHead), this.createItemButtonListener(this.itemImage7, this.selectBody), this.createItemButtonListener(this.itemImage8, this.selectBody), this.createItemButtonListener(this.itemImage9, this.selectBody), this.createButtonListener(this.buttonChangeCharacter, this.switchSelection), this.itemImage1.input.useHandCursor = !0, this.itemImage2.input.useHandCursor = !0, this.itemImage3.input.useHandCursor = !0, this.itemImage4.input.useHandCursor = !0, this.itemImage5.input.useHandCursor = !0, this.itemImage6.input.useHandCursor = !0, this.itemImage7.input.useHandCursor = !0, this.itemImage8.input.useHandCursor = !0, this.itemImage9.input.useHandCursor = !0, this.buttonChangeCharacter.events.onInputOver.add(function() {
                t.buttonChangeCharacter.frameName = "change_hov_button.png", t.animationButtonChange.ph2Animations.play("change_button_pause", 1, !0)
            }, this), this.buttonChangeCharacter.events.onInputOut.add(function() {
                t.buttonChangeCharacter.frameName = "change_button.png", t.animationButtonChange.ph2Animations.play("change_button_stand", 1, !0)
            }, this), this.trophy.inputEnabled = !0, this.trophy.input.useHandCursor = !0, this.trophy.events.onInputUp.add(this.showMissions, this), this.overlayMissions.inputEnabled = !0, this.overlayMissions.events.onInputUp.add(this.closeMissions, this), this.buttonMission1.onInputUp.add(this.changeMission, this), this.buttonMission2.onInputUp.add(this.changeMission, this), this.buttonMission3.onInputUp.add(this.changeMission, this), this.textMission1.inputEnabled = !0, this.textMission2.inputEnabled = !0, this.textMission3.inputEnabled = !0, this.textMission1.events.onInputOver.add(this.checkMissionText, this), this.textMission2.events.onInputOver.add(this.checkMissionText, this), this.textMission3.events.onInputOver.add(this.checkMissionText, this), this.textMission1.events.onInputOut.add(this.stopMovingMissionText, this), this.textMission2.events.onInputOut.add(this.stopMovingMissionText, this), this.textMission3.events.onInputOut.add(this.stopMovingMissionText, this), Ph2.UISystem.findObject("bg", this.uiMissions).inputEnabled = !0
        }, i.prototype.showScores = function() {
            var e, i, s, n, a;
            if (this.gameEnd === t.GAME_END.WIN) {
                switch (this.difficulty) {
                    case t.DIFFICULTY.EASY:
                        e = 1e3;
                        break;
                    case t.DIFFICULTY.NORMAL:
                        e = 2e3;
                        break;
                    case t.DIFFICULTY.HARD:
                        e = 3e3;
                        break;
                    default:
                        e = 1e3
                }
                if (this.scoreManager.totalScores[0] += e, this.gameMode === t.GAME_MODE.NEW_PACMAN || this.gameMode === t.GAME_MODE.STAR_COLLECTOR) {
                    switch (this.textModeScoreP1.visible = !0, this.gameMode) {
                        case t.GAME_MODE.NEW_PACMAN:
                            this.textKillsScoreP1.setText(this.scoreManager.coinScores[0].toString()), this.textTimeScoreP1.setText(this.scoreManager.killScores[0].toString()), this.textDifficultyScoreP1.setText(this.scoreManager.timeScores[0].toString()), this.textLevelScoreP1.setText(e.toString()), this.textModeScoreP1.setText(this.scoreManager.totalScores[0].toString());
                            break;
                        case t.GAME_MODE.STAR_COLLECTOR:
                            this.textKillsScoreP1.setText(this.scoreManager.starScores[0].toString()), this.textTimeScoreP1.setText(this.scoreManager.killScores[0].toString()), this.textDifficultyScoreP1.setText(this.scoreManager.timeScores[0].toString()), this.textLevelScoreP1.setText(e.toString()), this.textModeScoreP1.setText(this.scoreManager.totalScores[0].toString())
                    }
                    this.scoreManager.finalScores[0] += this.scoreManager.totalScores[0], this.textTotalScoreP1.setText(this.scoreManager.finalScores[0].toString())
                } else this.textModeScoreP1.visible = !1, this.textModeScoreP1.visibility.enable(!1), this.textKillsScoreP1.setText(this.scoreManager.killScores[0].toString()), this.textTimeScoreP1.setText(this.scoreManager.timeScores[0].toString()), this.textDifficultyScoreP1.setText(e.toString()), this.textLevelScoreP1.setText(this.scoreManager.totalScores[0].toString()), this.scoreManager.finalScores[0] += this.scoreManager.totalScores[0], this.textTotalScoreP1.setText(this.scoreManager.finalScores[0].toString()); if (this.playerMode === t.PLAYER_MODE.MULTI_PLAYER)
                    if (this.gameMode === t.GAME_MODE.NEW_PACMAN || this.gameMode === t.GAME_MODE.STAR_COLLECTOR) {
                        switch (this.textModeScoreP2.visible = !0, this.gameMode) {
                            case t.GAME_MODE.NEW_PACMAN:
                                this.textKillsScoreP2.setText(this.scoreManager.coinScores[1].toString()), this.textTimeScoreP2.setText(this.scoreManager.killScores[1].toString()), this.textDifficultyScoreP2.setText(this.scoreManager.timeScores[1].toString()), this.textLevelScoreP2.setText(e.toString()), this.textModeScoreP2.setText(this.scoreManager.totalScores[1].toString());
                                break;
                            case t.GAME_MODE.STAR_COLLECTOR:
                                this.textKillsScoreP2.setText(this.scoreManager.starScores[1].toString()), this.textTimeScoreP2.setText(this.scoreManager.killScores[1].toString()), this.textDifficultyScoreP2.setText(this.scoreManager.timeScores[1].toString()), this.textLevelScoreP2.setText(e.toString()), this.textModeScoreP2.setText(this.scoreManager.totalScores[1].toString())
                        }
                        this.scoreManager.finalScores[1] += this.scoreManager.totalScores[1], this.textTotalScoreP2.setText(this.scoreManager.finalScores[1].toString())
                    } else this.textModeScoreP2.visible = !1, this.textModeScoreP2.visibility.enable(!1), this.textKillsScoreP2.setText(this.scoreManager.killScores[1].toString()), this.textTimeScoreP2.setText(this.scoreManager.timeScores[1].toString()), this.textDifficultyScoreP2.setText(e.toString()), this.textLevelScoreP2.setText(this.scoreManager.totalScores[1].toString()), this.scoreManager.finalScores[0] += this.scoreManager.totalScores[0], this.textTotalScoreP2.setText(this.scoreManager.finalScores[0].toString())
            } else this.gameMode === t.GAME_MODE.NEW_PACMAN || this.gameMode === t.GAME_MODE.STAR_COLLECTOR ? (this.textModeScoreP1.visible = !0, this.textModeScoreP2.visible = !0) : (this.textModeScoreP1.visible = !1, this.textModeScoreP1.visibility.enable(!1), this.textModeScoreP2.visible = !1, this.textModeScoreP2.visibility.enable(!1)), this.textKillsScoreP1.setText("0"), this.textTimeScoreP1.setText("0"), this.textDifficultyScoreP1.setText("0"), this.textModeScoreP1.setText("0"), this.textLevelScoreP1.setText("0"), this.textTotalScoreP1.setText(this.scoreManager.finalScores[0].toString()), this.textKillsScoreP2.setText("0"), this.textTimeScoreP2.setText("0"), this.textDifficultyScoreP2.setText("0"), this.textModeScoreP2.setText("0"), this.textLevelScoreP2.setText("0"), this.textTotalScoreP2.setText(this.scoreManager.finalScores[1].toString());
            i = Ph2.UISystem.findObject("container/container_score/total_score_p1", this.uiGameComplete), s = Ph2.UISystem.findObject("container/container_score/total_score_p2", this.uiGameComplete), n = Ph2.UISystem.findObject("container/container_score/total_score_p1", this.uiGameOver), a = Ph2.UISystem.findObject("container/container_score/total_score_p2", this.uiGameOver), i.setText(this.scoreManager.finalScores[0].toString()), s.setText(this.scoreManager.finalScores[1].toString()), n.setText(this.scoreManager.finalScores[0].toString()), a.setText(this.scoreManager.finalScores[1].toString()), this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (this.game.ph2NotificationManager.postNotification("_CHECK_POINT_MISSION", t.MISSION.GET_5000_POINTS, this.scoreManager.finalScores[0]), this.game.ph2NotificationManager.postNotification("_CHECK_POINT_MISSION", t.MISSION.GET_30000_POINTS, this.scoreManager.finalScores[0])) : (this.game.ph2NotificationManager.postNotification("_CHECK_POINT_MISSION", t.MISSION.GET_5000_POINTS, this.scoreManager.finalScores[0] + this.scoreManager.finalScores[1]), this.game.ph2NotificationManager.postNotification("_CHECK_POINT_MISSION", t.MISSION.GET_30000_POINTS, this.scoreManager.finalScores[0] + this.scoreManager.finalScores[1]))
        }, i.prototype.nextStep = function() {
            var e = this;
            Fabrique.LoaderHelper.show(), this.game.ads.onContentPaused.addOnce(function() {
                Fabrique.LoaderHelper.hide(), e.game.analytics.google.sendScreenView("advertisement")
            }), this.game.ads.onContentResumed.addOnce(function() {
                Fabrique.LoaderHelper.hide(), e.game.ads.onContentPaused.removeAll(), e.game.ads.onContentResumed.removeAll(), e.isGameOver ? e.gameEnd === t.GAME_END.WIN ? e.showComic() : e.showGameOver() : e.gotoGameplay()
            }), this.game.ads.showAd()
        }, i.prototype.openDressUp = function() {
            var t, e, i, s, n, a, o;
            switch (this.overlayDressUp.revive(), this.uiDressUp.visible = !0, this.selectingPlayer1 ? (s = this.spineNamePlayer1, i = this.spinePlayer1, e = this.equippedOutfits[this.charactersChosen[0]]) : (s = this.spineNamePlayer2, i = this.spinePlayer2, e = this.equippedOutfits[this.charactersChosen[1]]), t = this.faces[e.face], o = !0, n = i.setAnimationByName(0, "special", !1), n.onComplete = function() {
                this.selectingPlayer1 ? (this.spinePlayer1.setAnimationByName(0, "stand", !0), this.spinePlayer1.setToSetupPose()) : (this.spinePlayer2.setAnimationByName(0, "stand", !0), this.spinePlayer2.setToSetupPose())
            }.bind(this), i.setAnimationByName(1, "stand", !1), i.setToSetupPose(), s) {
                case "dress_hero1":
                    if ("face3" === t) {
                        o = !1;
                        break
                    }
                    a = "face2" === t ? "face2_front" : "face1_front";
                    break;
                case "dress_hero2":
                    if ("face4" === t) {
                        o = !1;
                        break
                    }
                    a = "face2" === t ? "face2_front" : "face1_front";
                    break;
                case "dress_hero3":
                    a = "face_front";
                    break;
                case "dress_hero4":
                    a = "face1_front";
                    break;
                case "dress_hero5":
                    if ("face3" === t || "face4" === t) {
                        o = !1;
                        break
                    }
                    a = "face1_front";
                    break;
                case "dress_hero6":
                    if ("face4" === t) {
                        o = !1;
                        break
                    }
                    a = "face3" === t ? "face3_front" : "face1_front";
                    break;
                case "dress_hero7":
                    if ("face3" === t) {
                        o = !1;
                        break
                    }
                    a = "face2" === t ? "face2_front" : "face4" === t ? "face4_front" : "face1_front";
                    break;
                case "dress_hero8":
                    if ("face3" === t || "face4" === t) {
                        o = !1;
                        break
                    }
                    a = "face1_front";
                    break;
                default:
                    a = "face1_front"
            }
            o && this.spineGameOverHero1.setAnimationByName(1, a, !0)
        }, i.prototype.closeDressUp = function() {
            var t, e, i, s, n, a, o, r, h;
            switch (this.overlayDressUp.kill(), this.uiDressUp.visible = !1, this.outfitIndex1++, a = this.spineNamePlayer1, o = this.outfitIndex1, i = this.headsPlayer1[this.outfitPlayer1.head], s = this.faces[this.outfitPlayer1.face], n = this.bodies[this.outfitPlayer1.body], h = !0, "dress_hero1" === a || "dress_hero3" === a || "dress_hero6" === a ? "head1" === i ? this.spineGameOverHero1.createCombinedSkin("outfit" + o, "normal0", i, s, n) : this.spineGameOverHero1.createCombinedSkin("outfit" + o, "normal0", "head1", i, s, n) : this.spineGameOverHero1.createCombinedSkin("outfit" + o, "normal0", i, s, n), this.spineGameOverHero1.setSkinByName("outfit" + o), t = this.spineGameOverHero1.setAnimationByName(0, "special", !1), t.onComplete = function() {
                this.spineGameOverHero1.setAnimationByName(0, "stand", !0), this.spineGameOverHero1.setToSetupPose()
            }.bind(this), this.spineGameOverHero1.setAnimationByName(1, "stand", !1), a) {
                case "dress_hero1":
                    if ("face1" === s) r = "face1_front";
                    else {
                        if ("face3" !== s) {
                            h = !1;
                            break
                        }
                        r = "face2_front"
                    }
                    break;
                case "dress_hero2":
                    "face1" === s ? r = "face1_front" : h = !1;
                    break;
                case "dress_hero3":
                    "face1" === s || "face2" === s || "face3" === s ? r = "face_front" : h = !1;
                    break;
                case "dress_hero4":
                    "face1" === s ? r = "face1_front" : "face3" === s ? r = "face2_front" : h = !1;
                    break;
                case "dress_hero5":
                    "face1" === s ? r = "face1_front" : h = !1;
                    break;
                case "dress_hero6":
                    "face1" === s || "face4" === s ? r = "face1_front" : h = !1;
                    break;
                case "dress_hero7":
                case "dress_hero8":
                    "face1" === s ? r = "face1_front" : h = !1;
                    break;
                default:
                    r = "face1_front", h = !1
            }
            switch (h && this.spineGameOverHero1.setAnimationByName(1, r, !0), this.spineGameOverHero1.setToSetupPose(), this.outfitIndex2++, a = this.spineNamePlayer2, o = this.outfitIndex2, i = this.headsPlayer2[this.outfitPlayer2.head], s = this.faces[this.outfitPlayer2.face], n = this.bodies[this.outfitPlayer2.body], h = !0, "dress_hero1" === a || "dress_hero3" === a || "dress_hero6" === a ? "head1" === i ? this.spineGameOverHero2.createCombinedSkin("outfit" + o, "normal0", i, s, n) : this.spineGameOverHero2.createCombinedSkin("outfit" + o, "normal0", "head1", i, s, n) : this.spineGameOverHero2.createCombinedSkin("outfit" + o, "normal0", i, s, n), this.spineGameOverHero2.setSkinByName("outfit" + o), e = this.spineGameOverHero2.setAnimationByName(0, "special", !1), e.onComplete = function() {
                this.spineGameOverHero2.setAnimationByName(0, "stand", !0), this.spineGameOverHero2.setToSetupPose()
            }.bind(this), this.spineGameOverHero2.setAnimationByName(1, "stand", !1), a) {
                case "dress_hero1":
                    if ("face1" === s) r = "face1_front";
                    else {
                        if ("face3" !== s) {
                            h = !1;
                            break
                        }
                        r = "face2_front"
                    }
                    break;
                case "dress_hero2":
                    "face1" === s ? r = "face1_front" : h = !1;
                    break;
                case "dress_hero3":
                    "face1" === s || "face2" === s || "face3" === s ? r = "face_front" : h = !1;
                    break;
                case "dress_hero4":
                    "face1" === s ? r = "face1_front" : "face3" === s ? r = "face2_front" : h = !1;
                    break;
                case "dress_hero5":
                    "face1" === s ? r = "face1_front" : h = !1;
                    break;
                case "dress_hero6":
                    "face1" === s || "face4" === s ? r = "face1_front" : h = !1;
                    break;
                case "dress_hero7":
                case "dress_hero8":
                    "face1" === s ? r = "face1_front" : h = !1;
                    break;
                default:
                    r = "face1_front", h = !1
            }
            h && this.spineGameOverHero2.setAnimationByName(1, r, !0), this.spineGameOverHero2.setToSetupPose()
        }, i.prototype.switchSelection = function() {
            this.selectingPlayer1 = !this.selectingPlayer1, this.selectingPlayer2 = !this.selectingPlayer2, this.selectingPlayer1 && (this.currentCharacterOn = this.charactersChosen[0], this.spinePlayer1.visible = !0, this.spinePlayer2.visible = !1, this.iconPlayerNumber.frameName = "p1_1.png"), this.selectingPlayer2 && (this.currentCharacterOn = this.charactersChosen[1], this.spinePlayer1.visible = !1, this.spinePlayer2.visible = !0, this.iconPlayerNumber.frameName = "p2_1.png"), this.selectCharacter(this.currentCharacterOn), this.game.ph2AudioManager.playEffect("menuPress", !1)
        }, i.prototype.selectCharacter = function(t) {
            var e;
            switch (t) {
                case 0:
                    e = "item1";
                    break;
                case 1:
                    e = "item2";
                    break;
                case 2:
                    e = "item3";
                    break;
                case 3:
                    e = "item4";
                    break;
                case 4:
                    e = "item5";
                    break;
                case 5:
                    e = "item6";
                    break;
                case 6:
                    e = "item7";
                    break;
                case 7:
                    e = "item8"
            }
            this.itemImage1.alpha = 1, this.itemImage2.alpha = 1, this.itemImage3.alpha = 1, this.itemImage4.alpha = 1, this.itemImage5.alpha = 1, this.itemImage6.alpha = 1, this.itemImage7.alpha = 1, this.itemImage8.alpha = 1, this.itemImage9.alpha = 1, this.itemImage1.frameName = e + "_1.png", this.itemImage2.frameName = e + "_2.png", this.itemImage3.frameName = e + "_3.png", this.itemImage4.frameName = e + "_4.png", this.itemImage5.frameName = e + "_5.png", this.itemImage6.frameName = e + "_6.png", this.itemImage7.frameName = e + "_7.png", this.itemImage8.frameName = e + "_8.png", this.itemImage9.frameName = e + "_9.png";
            for (var i = 0; i < this.itemFrames.length; i++) this.itemFrames[i].frameName = "item_bottom.png";
            this.obtainSkins(), this.checkCharacterItems(t)
        }, i.prototype.selectFace = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (n = t.Instances.DataManager.getPlayerPoints(), h = this.unlocks[this.currentCharacterOn], r = !1, e.parent.name) {
                case "item1":
                    s = 1, a = 0, o = h.items[0], i = t.SETTINGS.ITEM_COSTS[0], l = this.item1;
                    break;
                case "item2":
                    s = 2, a = 1, o = h.items[1], i = t.SETTINGS.ITEM_COSTS[1], l = this.item2;
                    break;
                case "item3":
                    s = 3, a = 2, o = h.items[2], i = t.SETTINGS.ITEM_COSTS[2], l = this.item3
            }
            if (o ? r = !0 : i <= n && (n -= i, r = !0, this.unlocks[this.currentCharacterOn].items[a] = !0, this.unlockItem(l), t.Instances.DataManager.savePlayersPoints(n), t.Instances.DataManager.saveUnlocks(this.unlocks), this.textStarPoints.setText(t.Instances.DataManager.getPlayerPoints().toString()), this.selectingPlayer1 ? this.checkCharacterItems(this.charactersChosen[0]) : this.selectingPlayer2 && this.checkCharacterItems(this.charactersChosen[1])), !r) return this.visiblePopup > -1 && this.visiblePopup !== a && (this.itemPopups[this.visiblePopup].visible = !1), this.visiblePopup = a, this.itemPopups[a].visible = !0, void(this.popupTimer = 1200);
            this.selectingPlayer1 ? (s === this.facePlayer1 ? (1 === s && 2 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !0), 2 === s && 0 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !0), 2 === s && 3 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !0), 3 === s && 5 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !0), s = 0, e.alpha = 1, this.itemFrames[a].frameName = "item_bottom_hover.png") : (this.facePlayer1 - 1 >= 0 && (2 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer1 - 1]).visible = !0), 0 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer1 - 1]).visible = !0), 3 === this.currentCharacterOn && 2 === this.facePlayer1 && null !== Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer1 - 1]).visible = !0), 5 === this.currentCharacterOn && 3 === this.facePlayer1 && null !== Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer1 - 1]) && (Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer1 - 1]).visible = !0)), 1 === s && 2 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !1), 2 === s && 0 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !1), 2 === s && 3 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !1), 3 === s && 5 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !1), e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.facePlayer1 > 0 && (this.itemFrames[this.facePlayer1 - 1].frameName = "item_bottom.png", this.itemImages[this.facePlayer1 - 1].alpha = 1)), this.facePlayer1 = s, this.outfitPlayer1.face = s) : this.selectingPlayer2 && (s === this.facePlayer2 ? (1 === s && 2 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !0), 2 === s && 0 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !0), 2 === s && 3 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !0), 3 === s && 6 === this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !0), s = 0, e.alpha = 1) : (this.facePlayer2 - 1 >= 0 && (2 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face4_anim", this.items[this.facePlayer2 - 1]).visible = !0), 0 === this.currentCharacterOn && null !== Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face1_anim", this.items[this.facePlayer2 - 1]).visible = !0), 3 === this.currentCharacterOn && 2 === this.facePlayer2 && null !== Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face2_anim", this.items[this.facePlayer2 - 1]).visible = !0), 5 === this.currentCharacterOn && 3 === this.facePlayer2 && null !== Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer2 - 1]) && (Ph2.AnimationSystem.findObject("face3_anim", this.items[this.facePlayer2 - 1]).visible = !0)), 1 === s && 2 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face4_anim", l).visible = !1), 2 === s && 0 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face1_anim", l).visible = !1), 2 === s && 3 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face2_anim", l).visible = !1), 3 === s && 5 !== this.currentCharacterOn && (Ph2.AnimationSystem.findObject("face3_anim", l).visible = !1), e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.facePlayer2 > 0 && (this.itemFrames[this.facePlayer2 - 1].frameName = "item_bottom.png", this.itemImages[this.facePlayer2 - 1].alpha = 1)), this.facePlayer2 = s, this.outfitPlayer2.face = s), this.equippedOutfits[this.currentCharacterOn].face = s, t.Instances.DataManager.saveEquippedOutfits(this.equippedOutfits), this.setSkin(), this.game.ph2AudioManager.playEffect("menuPress", !1)
        }, i.prototype.selectHead = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (n = t.Instances.DataManager.getPlayerPoints(), h = this.unlocks[this.currentCharacterOn], r = !1, e.parent.name) {
                case "item4":
                    s = 1, a = 3, o = h.items[3], i = t.SETTINGS.ITEM_COSTS[3], l = this.item4;
                    break;
                case "item5":
                    s = 2, a = 4, o = h.items[4], i = t.SETTINGS.ITEM_COSTS[4], l = this.item5;
                    break;
                case "item6":
                    s = 3, a = 5, o = h.items[5], i = t.SETTINGS.ITEM_COSTS[5], l = this.item6
            }
            if (o ? r = !0 : i <= n && (n -= i, r = !0, this.unlocks[this.currentCharacterOn].items[a] = !0, this.unlockItem(l), t.Instances.DataManager.savePlayersPoints(n), t.Instances.DataManager.saveUnlocks(this.unlocks), this.textStarPoints.setText(t.Instances.DataManager.getPlayerPoints().toString()), this.selectingPlayer1 ? this.checkCharacterItems(this.charactersChosen[0]) : this.selectingPlayer2 && this.checkCharacterItems(this.charactersChosen[1])), !r) return this.visiblePopup > -1 && this.visiblePopup !== a && (this.itemPopups[this.visiblePopup].visible = !1), this.visiblePopup = a, this.itemPopups[a].visible = !0, void(this.popupTimer = 1200);
            switch (e.parent.name) {
                case "item4":
                    s = 1;
                    break;
                case "item5":
                    s = 2;
                    break;
                case "item6":
                    s = 3
            }
            this.selectingPlayer1 ? (s === this.headPlayer1 ? (s = 0, e.alpha = 1, this.itemFrames[a].frameName = "item_bottom_hover.png") : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.headPlayer1 > 0 && (this.itemFrames[this.headPlayer1 + 2].frameName = "item_bottom.png", this.itemImages[this.headPlayer1 + 2].alpha = 1)), this.headPlayer1 = s, this.outfitPlayer1.head = s) : this.selectingPlayer2 && (s === this.headPlayer2 ? (s = 0, e.alpha = 1) : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.headPlayer2 > 0 && (this.itemFrames[this.headPlayer2 + 2].frameName = "item_bottom.png", this.itemImages[this.headPlayer2 + 2].alpha = 1)), this.headPlayer2 = s, this.outfitPlayer2.head = s), this.equippedOutfits[this.currentCharacterOn].face = s, t.Instances.DataManager.saveEquippedOutfits(this.equippedOutfits), this.game.ph2AudioManager.playEffect("menuPress", !1), this.setSkin()
        }, i.prototype.selectBody = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (n = t.Instances.DataManager.getPlayerPoints(), h = this.unlocks[this.currentCharacterOn], r = !1, e.parent.name) {
                case "item7":
                    s = 1, a = 6, o = h.items[6], i = t.SETTINGS.ITEM_COSTS[6], l = this.item7;
                    break;
                case "item8":
                    s = 2, a = 7, o = h.items[7], i = t.SETTINGS.ITEM_COSTS[7], l = this.item8;
                    break;
                case "item9":
                    s = 3, a = 8, o = h.items[8], i = t.SETTINGS.ITEM_COSTS[8], l = this.item9
            }
            if (o ? r = !0 : i <= n && (n -= i, r = !0, this.unlocks[this.currentCharacterOn].items[a] = !0, this.unlockItem(l), t.Instances.DataManager.savePlayersPoints(n), t.Instances.DataManager.saveUnlocks(this.unlocks), this.textStarPoints.setText(t.Instances.DataManager.getPlayerPoints().toString()), this.selectingPlayer1 ? this.checkCharacterItems(this.charactersChosen[0]) : this.selectingPlayer2 && this.checkCharacterItems(this.charactersChosen[1])), !r) return this.visiblePopup > -1 && this.visiblePopup !== a && (this.itemPopups[this.visiblePopup].visible = !1), this.visiblePopup = a, this.itemPopups[a].visible = !0, void(this.popupTimer = 1200);
            switch (e.parent.name) {
                case "item7":
                    s = 1;
                    break;
                case "item8":
                    s = 2;
                    break;
                case "item9":
                    s = 3
            }
            this.selectingPlayer1 ? (s === this.bodyPlayer1 ? (s = 0, e.alpha = 1) : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.bodyPlayer1 > 0 && (this.itemFrames[this.bodyPlayer1 + 5].frameName = "item_bottom.png", this.itemImages[this.bodyPlayer1 + 5].alpha = 1)), this.bodyPlayer1 = s, this.outfitPlayer1.body = s) : this.selectingPlayer2 && (s === this.bodyPlayer2 ? (s = 0, e.alpha = 1) : (e.alpha = 0, this.itemFrames[a].frameName = "item_bottom2.png", this.bodyPlayer2 > 0 && (this.itemFrames[this.bodyPlayer2 + 5].frameName = "item_bottom.png", this.itemImages[this.bodyPlayer2 + 5].alpha = 1)), this.bodyPlayer2 = s, this.outfitPlayer2.body = s), this.equippedOutfits[this.currentCharacterOn].face = s, t.Instances.DataManager.saveEquippedOutfits(this.equippedOutfits), this.game.ph2AudioManager.playEffect("menuPress", !1), this.setSkin()
        }, i.prototype.showComic = function() {
            var e = this;
            this.audioCheering = this.game.ph2AudioManager.playEffect("uiCherry", !1), this.game.ph2AudioManager.switchMusic(t.Music.MAIN_MENU), this.comic.showGameCompleteComic2(this.charactersChosen[0]).onComplete.add(function() {
                e.comic.hideComics(), e.showGameOver()
            }, this)
        }, i.prototype.showGameOver = function() {
            var e;
            this.game.ph2AudioManager.playEffect("menuPress", !1), this.trophy.visible = !1, this.currentLevel >= this.levels ? (this.uiGameComplete.visible = !0, this.uiGameOver.visible = !1, Ph2.UISystem.findObject("container/container_win_hero" + (this.charactersChosen[0] + 1), this.uiGameComplete).visible = !0, this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER && (Ph2.UISystem.findObject("container/container_score/p2_image", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_score/p2_image", this.uiGameComplete).visibility.enable(!1), Ph2.UISystem.findObject("container/container_score/total_score_p2", this.uiGameComplete).visible = !1, Ph2.UISystem.findObject("container/container_score/total_score_p2", this.uiGameComplete).visibility.enable(!1))) : (e = "hero" + (this.charactersChosen[0] + 1) + "_go", this.animationGameOver.visible = !0, this.animationGameOver.ph2Animations.play("gameover_stand", 1, !0), this.animationHeroGameOver.ph2Animations.play(e, 1, !0), this.game.ph2AudioManager.switchMusic(t.Music.GAME_OVER), this.bgPortrait.visible = !1, this.bgLandscape.visible = !1, this.showingGameOver = !0, this.bgGameOver.visible = !0, this.isDesktop || (this.bgGameOver.visible = "landscape" === Constants.CURRENT_ORIENTATION, this.bgGameOverPortrait.visible = "portrait" === Constants.CURRENT_ORIENTATION), this.uiGameComplete.visible = !1, this.uiGameOver.visible = !0, this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER && (Ph2.UISystem.findObject("container/container_score/p2_image", this.uiGameOver).visible = !1, Ph2.UISystem.findObject("container/container_score/p2_image", this.uiGameOver).visibility.enable(!1), Ph2.UISystem.findObject("container/container_score/total_score_p2", this.uiGameOver).visible = !1, Ph2.UISystem.findObject("container/container_score/total_score_p2", this.uiGameOver).visibility.enable(!1))), this.uiLevelComplete.visible = !1, this.uiDressUp.visible = !1
        }, i.prototype.gotoMoreGames = function() {
           
        }, i.prototype.gotoGameplay = function() {
            this.scoreManager.cleanScores(), t.Instances.DataManager.saveOutfitPlayer1(this.outfitPlayer1), t.Instances.DataManager.saveOutfitPlayer2(this.outfitPlayer2), this.gameEnd === t.GAME_END.WIN && (this.mapTheme = t.Instances.DataManager.getMapTheme()), this.game.ph2AudioManager.playEffect("menuPress", !1), this.game.state.start("gameplayState", !0, !1, this.gameMode, this.difficulty, this.playerMode, this.mapTheme, this.charactersChosen, this.enemies, this.levels, this.scoreManager)
        }, i.prototype.gotoMainMenu = function() {
            var e = this;
            this.game.ph2AnimationManager.stopAll(), this.gameEnd === t.GAME_END.WIN && this.game.ph2AudioManager.stopEffect(this.audioCheering), Fabrique.LoaderHelper.show(), this.game.ads.onContentPaused.addOnce(function() {
                Fabrique.LoaderHelper.hide(), e.game.analytics.google.sendScreenView("advertisement")
            }), this.game.ads.onContentResumed.addOnce(function() {
                Fabrique.LoaderHelper.hide(), e.game.ph2AudioManager.playEffect("menuPress", !1), e.game.state.start("mainMenuState", !0, !1), e.game.ads.onContentPaused.removeAll(), e.game.ads.onContentResumed.removeAll()
            }), this.game.ads.showAd()
        }, i.prototype.createButtonListener = function(t, e) {
            t.inputEnabled = !0, t.input.useHandCursor = !0, t.events.onInputDown.add(e, this)
        }, i.prototype.createItemButtonListener = function(t, e) {
            t.inputEnabled = !0, t.events.onInputDown.add(e, this), t.events.onInputOver.add(this.itemOver, this), t.events.onInputOut.add(this.itemOut, this)
        }, i.prototype.buttonInputOver = function(t) {
            this.game.ph2AudioManager.playEffect("menuTouch", !1)
        }, i.buttonInputOut = function(t) {}, i.prototype.obtainCharactersNames = function() {
            switch (t.Instances.DataManager.getCharactersChosen()[0]) {
                case 0:
                    this.spineNamePlayer1 = "dress_hero1";
                    break;
                case 1:
                    this.spineNamePlayer1 = "dress_hero2";
                    break;
                case 2:
                    this.spineNamePlayer1 = "dress_hero3";
                    break;
                case 3:
                    this.spineNamePlayer1 = "dress_hero4";
                    break;
                case 4:
                    this.spineNamePlayer1 = "dress_hero5";
                    break;
                case 5:
                    this.spineNamePlayer1 = "dress_hero6";
                    break;
                case 6:
                    this.spineNamePlayer1 = "dress_hero7";
                    break;
                case 7:
                    this.spineNamePlayer1 = "dress_hero8"
            }
            switch (t.Instances.DataManager.getCharactersChosen()[1]) {
                case 0:
                    this.spineNamePlayer2 = "dress_hero1";
                    break;
                case 1:
                    this.spineNamePlayer2 = "dress_hero2";
                    break;
                case 2:
                    this.spineNamePlayer2 = "dress_hero3";
                    break;
                case 3:
                    this.spineNamePlayer2 = "dress_hero4";
                    break;
                case 4:
                    this.spineNamePlayer2 = "dress_hero5";
                    break;
                case 5:
                    this.spineNamePlayer2 = "dress_hero6";
                    break;
                case 6:
                    this.spineNamePlayer2 = "dress_hero7";
                    break;
                case 7:
                    this.spineNamePlayer2 = "dress_hero8"
            }
        }, i.obtainHeads = function(t) {
            return "dress_hero1" === t || "dress_hero3" === t || "dress_hero6" === t ? ["head1", "decor2", "decor3", "decor4"] : ["head1", "head2", "head3", "head4"]
        }, i.prototype.itemAlreadyUnlocked = function(t) {
            var e, i, s, n, a, o, r, h, l, c, u;
            e = parseInt(t.name.charAt(4), 10) - 1, o = Ph2.AnimationSystem.findObject("star_empty", t), a = Ph2.AnimationSystem.findObject("price", t), n = Ph2.AnimationSystem.findObject("black", t), r = this.selectingPlayer1 ? this.charactersChosen[0] : this.charactersChosen[1], h = this.selectingPlayer1 ? this.outfitPlayer1.face : this.outfitPlayer2.face, l = Ph2.AnimationSystem.findObject("face1_anim", this.item2), c = Ph2.AnimationSystem.findObject("face2_anim", this.item2), "item2" === t.name && (0 === r ? (l.visible = 2 !== h, c.visible = !1) : 3 === r ? (l.visible = !1, c.visible = 2 !== h) : (l.visible = !1, c.visible = !1)), o.visible = !1, a.visible = !1, n.visible = !1, "item1" === t.name || "item2" === t.name || "item3" === t.name ? (i = this.facePlayer1, s = this.facePlayer2) : "item4" === t.name || "item5" === t.name || "item6" === t.name ? (i = this.headPlayer1 + 3, s = this.headPlayer2 + 3) : (i = this.bodyPlayer1 + 6, s = this.bodyPlayer2 + 6), this.selectingPlayer1 ? u = i === e + 1 : this.selectingPlayer2 && (u = s === e + 1), u ? (this.itemImages[e].alpha = 0, this.itemFrames[e].frameName = "item_bottom2.png") : (this.itemImages[e].alpha = 1, this.itemFrames[e].frameName = "item_bottom.png")
        }, i.prototype.itemLocked = function(e) {
            var i, s, n, a, o, r, h, l, c, u, d, p, m;
            r = parseInt(e.name.charAt(4), 10) - 1, a = t.Instances.DataManager.getPlayerPoints(), o = t.SETTINGS.ITEM_COSTS[r], n = Ph2.AnimationSystem.findObject("star_empty", e), s = Ph2.AnimationSystem.findObject("price", e), i = Ph2.AnimationSystem.findObject("black", e), n.visible = !0, s.visible = !0, i.visible = !0, n.frameName = a >= o ? "dress_up_star_full.png" : "dress_up_star_empty.png", h = this.selectingPlayer1 ? this.charactersChosen[0] : this.charactersChosen[1], l = this.selectingPlayer1 ? this.outfitPlayer1.face : this.outfitPlayer2.face, c = Ph2.AnimationSystem.findObject("face1_anim", this.item2), u = Ph2.AnimationSystem.findObject("face2_anim", this.item2), "item2" === e.name && (0 === h ? (c.visible = 2 !== l, u.visible = !1) : 3 === h ? (c.visible = !1, u.visible = 2 !== l) : (c.visible = !1, u.visible = !1)), "item1" === e.name || "item2" === e.name || "item3" === e.name ? (d = this.facePlayer1, p = this.facePlayer2) : "item4" === e.name || "item5" === e.name || "item6" === e.name ? (d = this.headPlayer1 + 3, p = this.headPlayer2 + 3) : (d = this.bodyPlayer1 + 6, p = this.bodyPlayer2 + 6), this.selectingPlayer1 ? m = d === r + 1 : this.selectingPlayer2 && (m = p === r + 1), m ? (this.itemImages[r].alpha = 0, this.itemFrames[r].frameName = "item_bottom2.png") : (this.itemImages[r].alpha = 1, this.itemFrames[r].frameName = "item_bottom.png")
        }, i.prototype.unlockItem = function(e) {
            var i, s, n;
            n = Ph2.AnimationSystem.findObject("star_empty", e), s = Ph2.AnimationSystem.findObject("price", e), n.visible = !1, s.visible = !1, (i = Ph2.AnimationSystem.findObject("black", e)).ph2Animations.play("unlock_play", 1, !1).onComplete.add(function() {
                i.visible = !1
            }, this), this.game.ph2AudioManager.playEffect("sound_dressUnlock", !1), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.UNLOCK_1_OUTFIT), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.UNLOCK_OUTFIT_FOR_EVERY_ROBOT, this.currentCharacterOn)
        }, i.prototype.checkCharacterItems = function(t) {
            var e, i;
            for (this.facePlayer1 = this.equippedOutfits[this.charactersChosen[0]].face, this.facePlayer2 = this.equippedOutfits[this.charactersChosen[1]].face, this.bodyPlayer1 = this.equippedOutfits[this.charactersChosen[0]].body, this.bodyPlayer2 = this.equippedOutfits[this.charactersChosen[1]].body, this.headPlayer1 = this.equippedOutfits[this.charactersChosen[0]].head, this.headPlayer2 = this.equippedOutfits[this.charactersChosen[1]].head, e = this.unlocks[t].items, i = 0; i < e.length; i++)
                if (e[i]) switch (i) {
                    case 0:
                        this.itemAlreadyUnlocked(this.item1);
                        break;
                    case 1:
                        this.itemAlreadyUnlocked(this.item2);
                        break;
                    case 2:
                        this.itemAlreadyUnlocked(this.item3);
                        break;
                    case 3:
                        this.itemAlreadyUnlocked(this.item4);
                        break;
                    case 4:
                        this.itemAlreadyUnlocked(this.item5);
                        break;
                    case 5:
                        this.itemAlreadyUnlocked(this.item6);
                        break;
                    case 6:
                        this.itemAlreadyUnlocked(this.item7);
                        break;
                    case 7:
                        this.itemAlreadyUnlocked(this.item8);
                        break;
                    case 8:
                        this.itemAlreadyUnlocked(this.item9)
                } else switch (i) {
                    case 0:
                        this.itemLocked(this.item1);
                        break;
                    case 1:
                        this.itemLocked(this.item2);
                        break;
                    case 2:
                        this.itemLocked(this.item3);
                        break;
                    case 3:
                        this.itemLocked(this.item4);
                        break;
                    case 4:
                        this.itemLocked(this.item5);
                        break;
                    case 5:
                        this.itemLocked(this.item6);
                        break;
                    case 6:
                        this.itemLocked(this.item7);
                        break;
                    case 7:
                        this.itemLocked(this.item8);
                        break;
                    case 8:
                        this.itemLocked(this.item9)
                }
        }, i.prototype.itemOver = function(t) {
            var e, i, s, n, a;
            if (e = parseInt(t.parent.name.charAt(4), 10) - 1, i = this.unlocks[this.currentCharacterOn], i.items[e]) {
                switch (t.parent.name) {
                    case "item1":
                    case "item2":
                    case "item3":
                        n = this.facePlayer1, a = this.facePlayer2;
                        break;
                    case "item4":
                    case "item5":
                    case "item6":
                        n = this.headPlayer1 + 3, a = this.headPlayer2 + 3;
                        break;
                    case "item7":
                    case "item8":
                    case "item9":
                        n = this.bodyPlayer1 + 6, a = this.bodyPlayer2 + 6
                }
                this.selectingPlayer1 ? s = n === e + 1 : this.selectingPlayer2 && (s = a === e + 1), this.itemFrames[e].frameName = s ? "item_bottom3.png" : "item_bottom_hover.png"
            }
        }, i.prototype.itemOut = function(t) {
            var e, i, s, n, a, o;
            if (e = parseInt(t.parent.name.charAt(4), 10) - 1, i = this.unlocks[this.currentCharacterOn], s = i.items[e], this.itemPopups[e].visible && (this.itemPopups[e].visible = !1, this.popupTimer = -1, this.visiblePopup = -1), s) {
                switch (t.parent.name) {
                    case "item1":
                    case "item2":
                    case "item3":
                        a = this.facePlayer1, o = this.facePlayer2;
                        break;
                    case "item4":
                    case "item5":
                    case "item6":
                        a = this.headPlayer1 + 3, o = this.headPlayer2 + 3;
                        break;
                    case "item7":
                    case "item8":
                    case "item9":
                        a = this.bodyPlayer1 + 6, o = this.bodyPlayer2 + 6
                }
                this.selectingPlayer1 ? n = a === e + 1 : this.selectingPlayer2 && (n = o === e + 1), this.itemFrames[e].frameName = n ? "item_bottom2.png" : "item_bottom.png"
            }
        }, i.prototype.update = function() {
            this.updateMissionText(), this.popupTimer > -1 && (this.popupTimer -= this.game.time.elapsedMS, this.popupTimer <= 0 && (this.popupTimer = -1, this.itemPopups[this.visiblePopup].visible && (this.itemPopups[this.visiblePopup].visible = !1, this.visiblePopup = -1)))
        }, i.prototype.updateMissionText = function() {
            var e, i, s, n, a, o, r, h, l, c;
            this.checkMissionText(this.textMission1), this.checkMissionText(this.textMission2), this.checkMissionText(this.textMission3), (this.movingText1 || this.movingText2 || this.movingText3) && (h = Ph2.UISystem.findObject("bg/mission1/mission", this.uiMissions), l = Ph2.UISystem.findObject("bg/mission2/mission", this.uiMissions), c = Ph2.UISystem.findObject("bg/mission3/mission", this.uiMissions), r = .5 * t.SETTINGS.SCALE, this.movingText1 && (n = this.directionMission1, e = 300 * t.SETTINGS.SCALE - h.width), this.movingText2 && (a = this.directionMission2, i = 300 * t.SETTINGS.SCALE - l.width), this.movingText3 && (o = this.directionMission3, s = 300 * t.SETTINGS.SCALE - c.width), this.textMission1.width > e && ("left" === n ? (this.textMission1.x -= r, this.textMission1.x <= this.missionLimitLeft1 && (n = "right")) : "right" === n && (this.textMission1.x += r, this.textMission1.x >= this.missionLimitRight1 && (n = "left")), this.directionMission1 = n), this.textMission2.width > i && ("left" === a ? (this.textMission2.x -= r, this.textMission2.x <= this.missionLimitLeft2 && (a = "right")) : "right" === a && (this.textMission2.x += r, this.textMission2.x >= this.missionLimitRight2 && (a = "left")), this.directionMission2 = a), this.textMission3.width > s && ("left" === o ? (this.textMission3.x -= r, this.textMission3.x <= this.missionLimitLeft3 && (o = "right")) : "right" === o && (this.textMission3.x += r, this.textMission3.x >= this.missionLimitRight3 && (o = "left")), this.directionMission3 = o))
        }, i.prototype.resize = function() {
            if (!this.isDesktop) {
                var e, i, s, n, a, o, r, h, l, c, u;
                n = Constants.CURRENT_ORIENTATION, c = this.game.width, u = this.game.height, this.overlayDressUp.width = c, this.overlayDressUp.height = u, this.overlayMissions.width = c, this.overlayDressUp.height = u, this.bgLandscape.x = .5 * c, this.bgLandscape.y = .5 * u, this.bgPortrait.x = .5 * c, this.bgPortrait.y = u, this.bgGameOver.x = .5 * c, this.bgGameOver.y = .5 * u, this.bgGameOverPortrait.x = .5 * c, this.bgGameOverPortrait.y = u, this.bgGameOverPortrait.scale.set(1, 1), this.bgGameOverPortrait.scale.set(1, 1), this.bgLandscape.scale.set(1, 1), this.bgPortrait.scale.set(1, 1), this.animationGameOver.x = .5 * c, this.animationGameOver.y = .5 * u, r = Ph2.UISystem.findObject("container/trophy", this.uiLevelComplete), h = this.container.y - Math.abs(r.y), l = this.container.x - Math.abs(r.x), this.trophy.position.set(l, h), "landscape" === Constants.CURRENT_ORIENTATION ? (this.showingGameOver ? (this.bgGameOver.visible = !0, this.bgGameOverPortrait.visible = !1, this.bgLandscape.visible = !1, this.bgPortrait.visible = !1) : (this.bgLandscape.visible = !0, this.bgPortrait.visible = !1, this.bgGameOver.visible = !1, this.bgGameOverPortrait.visible = !1), this.iconPlayerOne.visible = !0, this.iconPlayerTwo.visible = this.playerMode === t.PLAYER_MODE.MULTI_PLAYER, this.container.frameName = "big_container1.png", a = 175 * t.SETTINGS.SCALE, o = 40 * t.SETTINGS.SCALE, this.spineGameOverHero1.position.set(a, o)) : "portrait" === Constants.CURRENT_ORIENTATION && (this.showingGameOver ? (this.bgLandscape.visible = !1, this.bgPortrait.visible = !1, this.bgGameOver.visible = !1, this.bgGameOverPortrait.visible = !0) : (this.bgLandscape.visible = !1, this.bgPortrait.visible = !0, this.bgGameOver.visible = !1, this.bgGameOverPortrait.visible = !1), this.iconPlayerOne.visible = !1, this.iconPlayerTwo.visible = !1, this.container.frameName = "big_container2.png", a = 175 * t.SETTINGS.SCALE, o = 40 * t.SETTINGS.SCALE, this.spineGameOverHero1.position.set(a, o)), (i = "landscape" === n ? Constants.CALCULATED_WIDTH - this.bgLandscape.width : Constants.CALCULATED_WIDTH - this.bgPortrait.width) > (e = "landscape" === n ? Constants.CALCULATED_HEIGHT - this.bgLandscape.height : Constants.CALCULATED_HEIGHT - this.bgPortrait.height) ? i > 0 && (s = "landscape" === n ? Constants.CALCULATED_WIDTH / this.bgLandscape.width : Constants.CALCULATED_WIDTH / this.bgPortrait.width, this.bgLandscape.scale.set(s, s), this.bgPortrait.scale.set(s, s)) : e > 0 && (s = "landscape" === n ? Constants.CALCULATED_HEIGHT / this.bgLandscape.height : Constants.CALCULATED_HEIGHT / this.bgPortrait.height, this.bgLandscape.scale.set(s, s), this.bgPortrait.scale.set(s, s)), this.overlayDressUp.scale.set(s, s), this.resizeGameOverBorders(), this.comic.resizeComic()
            }
        }, i.prototype.resizeGameOverBorders = function() {
            var t, e, i, s, n, a;
            t = Ph2.UISystem.findObject("container/black_l", this.uiGameOver), e = Ph2.UISystem.findObject("container/black_r", this.uiGameOver), i = Ph2.UISystem.findObject("container/black_top", this.uiGameOver), s = Ph2.UISystem.findObject("container/black_bottom", this.uiGameOver), n = this.game.width, a = this.game.height, t.resize(.5 * n, a), e.resize(.5 * n, a), i.resize(n, .5 * a), s.resize(n, .5 * a)
        }, i.prototype.createCheats = function() {
            var e, i, s, n, a, o, r = this;
            e = this.game.input.keyboard.addKey(Phaser.Keyboard.ONE), i = this.game.input.keyboard.addKey(Phaser.Keyboard.TWO), s = this.game.input.keyboard.addKey(Phaser.Keyboard.THREE), e.onDown.add(function() {
                (n = t.Instances.MissionManager.missionsActive[0]).completeMissionWithCheats(), r.checkMissionsCompleted(!0)
            }, this), i.onDown.add(function() {
                (a = t.Instances.MissionManager.missionsActive[1]).completeMissionWithCheats(), r.checkMissionsCompleted(!0)
            }, this), s.onDown.add(function() {
                (o = t.Instances.MissionManager.missionsActive[2]).completeMissionWithCheats(), r.checkMissionsCompleted(!0)
            }, this)
        }, i
    }(Phaser.State);
    t.GameOverState = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function e(t, e) {
            this.game = t, this.player = e, this.isDesktop = this.game.device.desktop, this.upLeftPressed = !1, this.upRightPressed = !1, this.downLeftPressed = !1, this.downRightPressed = !1, this.isDesktop || (this.createController(), this.game.input.maxPointers = 2), this.createInputs()
        }
        return e.prototype.createController = function() {
            this.joystickPlugin = this.game.plugins.plugins[this.game.plugins.plugins.length - 1], this.stick = this.joystickPlugin.addStick(0, 0, 200, "arcade"), this.stick.alignBottomLeft(0), this.stick.showOnTouch = !0, this.game.input.onDown.remove(this.stick.checkDown, this.stick), this.game.input.onDown.add(this.checkDown, this)
        }, e.prototype.createInputs = function() {
            this.isDesktop ? (0 === this.player.playerID ? this.player.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? (this.leftKey = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT), this.upKey = this.game.input.keyboard.addKey(Phaser.Keyboard.UP), this.downKey = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN), this.actionKey = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)) : this.player.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.leftKey = this.game.input.keyboard.addKey(Phaser.Keyboard.A), this.rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.D), this.upKey = this.game.input.keyboard.addKey(Phaser.Keyboard.W), this.downKey = this.game.input.keyboard.addKey(Phaser.Keyboard.S), this.actionKey = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)) : 1 === this.player.playerID && (this.leftKey = this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT), this.rightKey = this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT), this.upKey = this.game.input.keyboard.addKey(Phaser.Keyboard.UP), this.downKey = this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN), this.actionKey = this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER)), this.upKey.onDown.add(this.upKeyPressed, this), this.downKey.onDown.add(this.downKeyPressed, this), this.leftKey.onDown.add(this.leftKeyPressed, this), this.rightKey.onDown.add(this.rightKeyPressed, this), this.upKey.onUp.add(this.upKeyReleased, this), this.downKey.onUp.add(this.downKeyReleased, this), this.leftKey.onUp.add(this.leftKeyReleased, this), this.rightKey.onUp.add(this.rightKeyReleased, this), this.actionKey.onDown.add(this.actionKeyPressed, this)) : this.stick.onUp.add(this.clearInputs, this)
        }, e.prototype.checkDown = function(e) {
            this.player.gameStatus !== t.GAME_STATUS.GAME_OVER && null == e.targetObject && (e.x < this.game.width / 2 ? this.stick.checkDown(e) : this.actionKeyPressed(), e.x < this.game.width / 2 ? this.stick.checkDown(e) : this.actionKeyPressed())
        }, e.prototype.checkInput = function() {
            this.canPressButtons() && (this.isDesktop || this.checkInputsDPad(), this.checkDirectionInputs(), this.checkInputReleased())
        }, e.prototype.checkDirectionInputs = function() {
            this.leftPressed && (this.isDesktop && (this.actionKey.enabled = !0), this.player.inputLeftPressed(), !this.player.movingAnimation && this.upLeftPressed ? this.player.inputUpPressed() : this.upLeftPressed = !1, !this.player.movingAnimation && this.downLeftPressed ? this.player.inputDownPressed() : this.downLeftPressed = !1), this.rightPressed && (this.isDesktop && (this.actionKey.enabled = !0), this.player.inputRightPressed(), !this.player.movingAnimation && this.upRightPressed ? this.player.inputUpPressed() : this.upRightPressed = !1, !this.player.movingAnimation && this.downRightPressed ? this.player.inputDownPressed() : this.downRightPressed = !1), this.upPressed && (this.isDesktop && (this.actionKey.enabled = !0), this.player.inputUpPressed(), !this.player.movingAnimation && this.upLeftPressed ? this.player.inputLeftPressed() : this.upLeftPressed = !1, !this.player.movingAnimation && this.upRightPressed ? this.player.inputRightPressed() : this.upRightPressed = !1), this.downPressed && (this.isDesktop && (this.actionKey.enabled = !0), this.player.inputDownPressed(), !this.player.movingAnimation && this.downLeftPressed ? this.player.inputLeftPressed() : this.downLeftPressed = !1, !this.player.movingAnimation && this.downRightPressed ? this.player.inputRightPressed() : this.downRightPressed = !1)
        }, e.prototype.checkInputsDPad = function() {
            if (this.stick.isDown) {
                if (this.stick.force <= .65 * t.SETTINGS.SCALE) return;
                2 === this.stick.quadrant ? (this.rightPressed = !1, this.upPressed = !1, this.downPressed = !1, this.leftPressed = !0, 225 === this.stick.octant && (this.upLeftPressed = !0, this.downLeftPressed = !1), 135 === this.stick.octant && (this.downLeftPressed = !0, this.upLeftPressed = !1)) : 0 === this.stick.quadrant ? (this.leftPressed = !1, this.upPressed = !1, this.downPressed = !1, this.rightPressed = !0, 315 === this.stick.octant && (this.upRightPressed = !0, this.downRightPressed = !1), 45 === this.stick.octant && (this.downRightPressed = !0, this.upRightPressed = !1)) : 3 === this.stick.quadrant ? (this.leftPressed = !1, this.rightPressed = !1, this.downPressed = !1, this.upPressed = !0, 225 === this.stick.octant && (this.upLeftPressed = !0, this.upRightPressed = !1), 315 === this.stick.octant && (this.upRightPressed = !0, this.upLeftPressed = !1)) : 1 === this.stick.quadrant && (this.leftPressed = !1, this.rightPressed = !1, this.upPressed = !1, this.downPressed = !0, 135 === this.stick.octant && (this.downLeftPressed = !0, this.downRightPressed = !1), 45 === this.stick.octant && (this.downRightPressed = !0, this.downLeftPressed = !1))
            } else this.leftPressed = !1, this.rightPressed = !1, this.upPressed = !1, this.downPressed = !1, this.player.keyPressed = !1
        }, e.prototype.checkInputReleased = function() {
            this.upPressed || this.downPressed || this.leftPressed || this.rightPressed || (this.player.keyPressed = !1, this.player.onStand())
        }, e.prototype.upKeyPressed = function() {
            this.clearInputs(), this.upPressed = !0
        }, e.prototype.downKeyPressed = function() {
            this.clearInputs(), this.downPressed = !0
        }, e.prototype.leftKeyPressed = function() {
            this.clearInputs(), this.leftPressed = !0
        }, e.prototype.rightKeyPressed = function() {
            this.clearInputs(), this.rightPressed = !0
        }, e.prototype.upKeyReleased = function() {
            this.upPressed = !1
        }, e.prototype.downKeyReleased = function() {
            this.downPressed = !1
        }, e.prototype.leftKeyReleased = function() {
            this.leftPressed = !1
        }, e.prototype.rightKeyReleased = function() {
            this.rightPressed = !1
        }, e.prototype.actionKeyPressed = function() {
            this.canPressButtons() && this.player.actionKeyPressed()
        }, e.prototype.clearInputs = function() {
            this.upPressed = !1, this.downPressed = !1, this.leftPressed = !1, this.rightPressed = !1, this.upLeftPressed = !1, this.upRightPressed = !1, this.downLeftPressed = !1, this.downRightPressed = !1, this.player.keyPressed = !1
        }, e.prototype.canPressButtons = function() {
            return this.player.gameStatus !== t.GAME_STATUS.GAME_OVER && (this.player.gameStatus !== t.GAME_STATUS.PAUSED && (!this.player.dead && (!this.player.jumping && (!this.player.attacking && (!this.player.losingMount && (!this.player.stunned && (!this.player.teleporting && (!this.player.onCream && (!this.player.inBooster && !this.player.frozen)))))))))
        }, e
    }();
    t.InputController = e
}(Game || (Game = {}));
var Constants = function() {
        function t() {}
        return t.GAME_SCALE = 1, t.MIN_FONT_SIZE_DEFAULT = 10, t.CALCULATED_WIDTH = 1280, t.CALCULATED_HEIGHT = 720, t.GAME_WIDTH = 1280, t.GAME_HEIGHT = 720, t.LANDSCAPE_LOCKED = !1, t.PORTRAIT_LOCKED = !1, t.CURRENT_ORIENTATION = "", t.MORE_GAMES = "http://www.agame.com/?utm_source=" + window.location.host + "&utm_medium=html5&utm_term=bomb-it-7&utm_content=logo&utm_campaign=brandedgames", t.BOMB_IT_2 = "http://www.a10.com/action-games/bomb-it-2", t.BOMB_IT_3 = "http://www.a10.com/action-games/bomb-it-3", t.BOMB_IT_4 = "http://www.a10.com/action-games/bomb-it-4", t.BOMB_IT_5 = "http://www.a10.com/action-games/bomb-it-5", t.BOMB_IT_6 = "http://www.a10.com/action-games/bomb-it-6", t.GAME_KEY = "3c872c99255b9ba45756ce672aef87fa", t.SECRET_KEY = "7ebdf37f300b32fc803370d3d08b9f38678907c3", t.GOOGLE_ID = "UA-78960661-10", t.GOOGLE_APP_NAME = "Bomb It 7", t.GAMEDISTRIBUTION_ID = "db1820b13aaf424f89230c60b221e711", t.GAMEDISTRIBUTION_USER = "25FAF025-4828-439B-A457-EBDAA0CEB168-s1", t
    }(),
    Images = function() {
        function t() {}
        return t.preloadList = [], t.list = [], t
    }(),
    Atlases = function() {
        function t() {}
        return t.Interface = "interface", t.preloadList = [t.Interface], t.list = [], t
    }(),
    Game;
! function(t) {
    var e = function() {
        function t() {}
        return t.DataManager = null, t.LocalizationManager = null, t.MissionManager = null, t
    }();
    t.Instances = e;
    var i = function() {
        function t() {}
        return t.GAMEPLAY = [], t.MAIN_MENU = null, t.LEVEL_COMPLETED = null, t.LEVEL_FAILED = null, t.COMIC_INTRO = null, t.COMIC_GO_GAMEPLAY = null, t.GAME_OVER = null, t
    }();
    t.Music = i;
    var s = function() {
        function t() {}
        return t.SCALE = 1, t.CURRENT_ORIENTATION = 0, t.CELL_WIDTH = 10, t.CELL_HEIGHT = 10, t.GRID_WIDTH = 10, t.GRID_HEIGHT = 10, t.LOADING_SCREEN = 3e3, t.MATCH_TIME = 18e4, t.INITIAL_BLINKING_TIME = 0, t.INITIAL_SPEED = 3, t.SPEED_INCREASE = 0, t.INITIAL_LIVES = 3, t.BOMB_TIMER = 2500, t.BOMB_SPEED_KICKED = 5, t.MAX_BOMB_POWER = 5, t.MAX_SPEED = 9, t.MAX_BOMBS = 9, t.TIME_STUNNED = 5e3, t.ON_BLOCK_DESTROY = [], t.POWER_UP_CHANCES = [], t.WEAPON_CHANCES = [], t.MOUNT_CHANCES = [], t.TREASURE_BOXES = [], t.PACMAN_POWER_UPS = [], t.POINTS_EASY = 100, t.POINTS_NORMAL = 100, t.POINTS_HARD = 100, t.POINTS_PER_SECOND = 100, t.POINTS_ARCADE_1_KILL = 100, t.POINTS_ARCADE_2_KILL = 100, t.POINTS_ARCADE_3_KILL = 100, t.POINTS_PER_KILL = 100, t.POINTS_PER_LIVE = 100, t.POINTS_PER_COIN = 100, t.POINTS_PER_STAR = 100, t.TIMES_TO_SEARCH_PLAYER_EASY = 10, t.TIMES_TO_SEARCH_PLAYER_NORMAL = 10, t.TIMES_TO_SEARCH_PLAYER_HARD = 10, t.CHANCE_TO_SEARCH_PLAYER_EASY = 10, t.CHANCE_TO_SEARCH_PLAYER_NORMAL = 10, t.CHANCE_TO_SEARCH_PLAYER_HARD = 10, t.CHANCE_TO_ATTACK_EASY = 30, t.CHANCE_TO_ATTACK_NORMAL = 30, t.CHANCE_TO_ATTACK_HARD = 30, t.ITEM_COSTS = [], t.CAMERA_SHAKE = .1, t.CAMERA_SHAKE_DURATION = 250, t.TRACK_VERTICAL_1 = [{
            x: 4,
            y: 5
        }, {
            x: 11,
            y: 5
        }, {
            x: 3,
            y: 8
        }, {
            x: 10,
            y: 8
        }], t.TRACK_HORIZONTAL_1 = [{
            x: 5,
            y: 4
        }, {
            x: 6,
            y: 4
        }, {
            x: 7,
            y: 4
        }, {
            x: 8,
            y: 4
        }, {
            x: 9,
            y: 4
        }, {
            x: 10,
            y: 4
        }, {
            x: 5,
            y: 6
        }, {
            x: 9,
            y: 6
        }, {
            x: 10,
            y: 6
        }, {
            x: 4,
            y: 9
        }, {
            x: 5,
            y: 9
        }, {
            x: 6,
            y: 9
        }, {
            x: 7,
            y: 9
        }, {
            x: 8,
            y: 9
        }, {
            x: 9,
            y: 9
        }, {
            x: 4,
            y: 7
        }, {
            x: 5,
            y: 7
        }, {
            x: 9,
            y: 7
        }], t.TRACK_UP_LEFT_1 = [{
            x: 4,
            y: 4
        }, {
            x: 3,
            y: 7
        }], t.TRACK_UP_RIGHT_1 = [{
            x: 11,
            y: 4
        }, {
            x: 10,
            y: 7
        }], t.TRACK_DOWN_LEFT_1 = [{
            x: 4,
            y: 6
        }, {
            x: 3,
            y: 9
        }], t.TRACK_DOWN_RIGHT_1 = [{
            x: 11,
            y: 6
        }, {
            x: 10,
            y: 9
        }], t.TRACK_VERTICAL_2 = [{
            x: 3,
            y: 6
        }, {
            x: 3,
            y: 7
        }, {
            x: 3,
            y: 8
        }, {
            x: 4,
            y: 7
        }, {
            x: 4,
            y: 3
        }, {
            x: 4,
            y: 4
        }, {
            x: 5,
            y: 4
        }, {
            x: 5,
            y: 5
        }, {
            x: 11,
            y: 4
        }, {
            x: 11,
            y: 5
        }, {
            x: 11,
            y: 6
        }, {
            x: 10,
            y: 5
        }, {
            x: 10,
            y: 8
        }, {
            x: 10,
            y: 9
        }, {
            x: 9,
            y: 7
        }, {
            x: 9,
            y: 8
        }], t.TRACK_HORIZONTAL_2 = [{
            x: 5,
            y: 2
        }, {
            x: 6,
            y: 2
        }, {
            x: 7,
            y: 2
        }, {
            x: 6,
            y: 3
        }, {
            x: 8,
            y: 4
        }, {
            x: 9,
            y: 4
        }, {
            x: 9,
            y: 3
        }, {
            x: 10,
            y: 3
        }, {
            x: 4,
            y: 9
        }, {
            x: 5,
            y: 9
        }, {
            x: 5,
            y: 8
        }, {
            x: 6,
            y: 8
        }, {
            x: 7,
            y: 10
        }, {
            x: 8,
            y: 10
        }, {
            x: 9,
            y: 10
        }, {
            x: 8,
            y: 9
        }], t.TRACK_UP_LEFT_2 = [{
            x: 4,
            y: 2
        }, {
            x: 5,
            y: 3
        }, {
            x: 3,
            y: 5
        }, {
            x: 4,
            y: 6
        }, {
            x: 9,
            y: 6
        }, {
            x: 10,
            y: 7
        }], t.TRACK_UP_RIGHT_2 = [{
            x: 8,
            y: 2
        }, {
            x: 7,
            y: 3
        }, {
            x: 11,
            y: 3
        }, {
            x: 10,
            y: 4
        }, {
            x: 7,
            y: 8
        }, {
            x: 6,
            y: 9
        }], t.TRACK_DOWN_LEFT_2 = [{
            x: 3,
            y: 9
        }, {
            x: 4,
            y: 8
        }, {
            x: 7,
            y: 9
        }, {
            x: 6,
            y: 10
        }, {
            x: 7,
            y: 4
        }, {
            x: 8,
            y: 3
        }], t.TRACK_DOWN_RIGHT_2 = [{
            x: 4,
            y: 5
        }, {
            x: 5,
            y: 6
        }, {
            x: 9,
            y: 9
        }, {
            x: 10,
            y: 10
        }, {
            x: 10,
            y: 6
        }, {
            x: 11,
            y: 7
        }], t
    }();
    t.SETTINGS = s;
    ! function(t) {
        t[t.LANDSCAPE = 0] = "LANDSCAPE", t[t.PORTRAIT = 1] = "PORTRAIT"
    }(t.SCREEN_ORIENTATION || (t.SCREEN_ORIENTATION = {}));
    ! function(t) {
        t[t.WIN = 0] = "WIN", t[t.LOSE = 1] = "LOSE"
    }(t.GAME_END || (t.GAME_END = {}));
    ! function(t) {
        t[t.ARCADE = 0] = "ARCADE", t[t.BATTLE_ROYALE = 1] = "BATTLE_ROYALE", t[t.NEW_PACMAN = 2] = "NEW_PACMAN", t[t.STAR_COLLECTOR = 3] = "STAR_COLLECTOR", t[t.ICE_MAN = 4] = "ICE_MAN"
    }(t.GAME_MODE || (t.GAME_MODE = {}));
    ! function(t) {
        t[t.SINGLE_PLAYER = 0] = "SINGLE_PLAYER", t[t.MULTI_PLAYER = 1] = "MULTI_PLAYER"
    }(t.PLAYER_MODE || (t.PLAYER_MODE = {}));
    ! function(t) {
        t[t.EASY = 0] = "EASY", t[t.NORMAL = 1] = "NORMAL", t[t.HARD = 2] = "HARD"
    }(t.DIFFICULTY || (t.DIFFICULTY = {}));
    ! function(t) {
        t[t.ALL = 0] = "ALL", t[t.UP = 1] = "UP", t[t.UP_LEFT = 2] = "UP_LEFT", t[t.UP_RIGHT = 3] = "UP_RIGHT", t[t.LEFT = 4] = "LEFT", t[t.RIGHT = 5] = "RIGHT", t[t.DOWN_RIGHT = 6] = "DOWN_RIGHT", t[t.DOWN_LEFT = 7] = "DOWN_LEFT", t[t.DOWN = 8] = "DOWN"
    }(t.DIRECTION || (t.DIRECTION = {}));
    ! function(t) {
        t[t.FREE = 0] = "FREE", t[t.WALL = 1] = "WALL", t[t.TOTEM = 2] = "TOTEM", t[t.BLOCK = 3] = "BLOCK", t[t.BOMB = 4] = "BOMB", t[t.FIRE = 5] = "FIRE", t[t.ITEM = 6] = "ITEM", t[t.SPECIAL_TILE = 7] = "SPECIAL_TILE", t[t.COIN = 8] = "COIN", t[t.JELLY = 9] = "JELLY", t[t.STAR = 10] = "STAR"
    }(t.MAP || (t.MAP = {}));
    ! function(t) {
        t[t.CHRISTMAS = 0] = "CHRISTMAS", t[t.CLASSROOM = 1] = "CLASSROOM", t[t.BOUTIQUE = 2] = "BOUTIQUE", t[t.FOREST = 3] = "FOREST", t[t.BEACH = 4] = "BEACH", t[t.RANCH = 5] = "RANCH", t[t.TOY_STORE = 6] = "TOY_STORE", t[t.BAKERY = 7] = "BAKERY", t[t.RACE_TRACK = 8] = "RACE_TRACK", t[t.RANDOM = 9] = "RANDOM"
    }(t.MAP_THEME || (t.MAP_THEME = {}));
    ! function(t) {
        t[t.FREE = 0] = "FREE", t[t.WALL = 1] = "WALL", t[t.TOTEM = 2] = "TOTEM", t[t.PLAYER = 3] = "PLAYER", t[t.SPECIAL_TILE = 4] = "SPECIAL_TILE", t[t.RACE_TRACK = 5] = "RACE_TRACK", t[t.JELLY = 6] = "JELLY", t[t.FORCE_FREE_CELL = 7] = "FORCE_FREE_CELL", t[t.LANDING_CELL = 8] = "LANDING_CELL"
    }(t.GRID_DATA || (t.GRID_DATA = {}));
    ! function(t) {
        t[t.BOMB = 0] = "BOMB", t[t.POWER = 1] = "POWER", t[t.SPEED = 2] = "SPEED", t[t.KICK_BOMBS = 3] = "KICK_BOMBS", t[t.SHIELD = 4] = "SHIELD", t[t.HEART = 5] = "HEART", t[t.INVINCIBILITY = 6] = "INVINCIBILITY", t[t.DOLL_BOMB = 7] = "DOLL_BOMB", t[t.FLAMETHROWER = 8] = "FLAMETHROWER", t[t.LIGHTING_GUN = 9] = "LIGHTING_GUN", t[t.HAMMER = 10] = "HAMMER", t[t.LASER_GUN = 11] = "LASER_GUN", t[t.ICE_GUN = 12] = "ICE_GUN", t[t.MIGHTY_HAMMER = 13] = "MIGHTY_HAMMER", t[t.HORSE = 14] = "HORSE", t[t.STAG = 15] = "STAG", t[t.SHOPPING_CART = 16] = "SHOPPING_CART", t[t.SKATEBOARD = 17] = "SKATEBOARD"
    }(t.ITEM_TYPE || (t.ITEM_TYPE = {}));
    ! function(t) {
        t[t.POWER_UP = 0] = "POWER_UP", t[t.WEAPON = 1] = "WEAPON", t[t.MOUNT = 2] = "MOUNT"
    }(t.POWER_UP_TYPE || (t.POWER_UP_TYPE = {}));
    ! function(t) {
        t[t.PLAYING = 0] = "PLAYING", t[t.PAUSED = 1] = "PAUSED", t[t.GAME_OVER = 2] = "GAME_OVER", t[t.TUTORIAL = 3] = "TUTORIAL", t[t.ROTATE_DEVICE = 4] = "ROTATE_DEVICE"
    }(t.GAME_STATUS || (t.GAME_STATUS = {}));
    ! function(t) {
        t[t.DEATH = 0] = "DEATH", t[t.DIZZY_BACK = 1] = "DIZZY_BACK", t[t.DIZZY_FRONT = 2] = "DIZZY_FRONT", t[t.DIZZY_SIDE = 3] = "DIZZY_SIDE", t[t.FACE1_FRONT = 4] = "FACE1_FRONT", t[t.FACE1_SIDE = 5] = "FACE1_SIDE", t[t.FACE2_FRONT = 6] = "FACE2_FRONT", t[t.FACE2_SIDE = 7] = "FACE2_SIDE", t[t.HORSE_BACK = 8] = "HORSE_BACK", t[t.HORSE_FRONT = 9] = "HORSE_FRONT", t[t.HORSE_SIDE = 10] = "HORSE_SIDE", t[t.HORSE_BACK_STAND = 11] = "HORSE_BACK_STAND", t[t.HORSE_FRONT_STAND = 12] = "HORSE_FRONT_STAND", t[t.HORSE_SIDE_STAND = 13] = "HORSE_SIDE_STAND", t[t.SKATE_FRONT = 14] = "SKATE_FRONT", t[t.SKATE_SIDE = 15] = "SKATE_SIDE", t[t.SKATE_BACK = 16] = "SKATE_BACK", t[t.SKATE_FRONT_STAND = 17] = "SKATE_FRONT_STAND", t[t.SKATE_SIDE_STAND = 18] = "SKATE_SIDE_STAND", t[t.SKATE_BACK_STAND = 19] = "SKATE_BACK_STAND", t[t.SHOPPING_CART_BACK = 20] = "SHOPPING_CART_BACK", t[t.SHOPPING_CART_SIDE = 21] = "SHOPPING_CART_SIDE", t[t.SHOPPING_CART_FRONT = 22] = "SHOPPING_CART_FRONT", t[t.SHOPPING_CART_BACK_STAND = 23] = "SHOPPING_CART_BACK_STAND", t[t.SHOPPING_CART_SIDE_STAND = 24] = "SHOPPING_CART_SIDE_STAND", t[t.SHOPPING_CART_FRONT_STAND = 25] = "SHOPPING_CART_FRONT_STAND", t[t.STAG_BACK = 26] = "STAG_BACK", t[t.STAG_FRONT = 27] = "STAG_FRONT", t[t.STAG_SIDE = 28] = "STAG_SIDE", t[t.STAG_BACK_STAND = 29] = "STAG_BACK_STAND", t[t.STAG_FRONT_STAND = 30] = "STAG_FRONT_STAND", t[t.STAG_SIDE_STAND = 31] = "STAG_SIDE_STAND", t[t.WALK_BACK = 32] = "WALK_BACK", t[t.WALK_FRONT = 33] = "WALK_FRONT", t[t.WALK_SIDE = 34] = "WALK_SIDE", t[t.STAND_FRONT = 35] = "STAND_FRONT", t[t.STAND_BACK = 36] = "STAND_BACK", t[t.STAND_SIDE = 37] = "STAND_SIDE"
    }(t.PLAYER_STATE || (t.PLAYER_STATE = {}));
    ! function(t) {
        t[t.STAND_FRONT = 0] = "STAND_FRONT", t[t.STAND_BACK = 1] = "STAND_BACK", t[t.STAND_LEFT = 2] = "STAND_LEFT", t[t.STAND_RIGHT = 3] = "STAND_RIGHT", t[t.FROZEN_FRONT = 4] = "FROZEN_FRONT", t[t.FROZEN_BACK = 5] = "FROZEN_BACK", t[t.FROZEN_LEFT = 6] = "FROZEN_LEFT", t[t.FROZEN_RIGHT = 7] = "FROZEN_RIGHT", t[t.UNFROZEN_FRONT = 8] = "UNFROZEN_FRONT", t[t.UNFROZEN_BACK = 9] = "UNFROZEN_BACK", t[t.UNFROZEN_LEFT = 10] = "UNFROZEN_LEFT", t[t.UNFROZEN_RIGHT = 11] = "UNFROZEN_RIGHT"
    }(t.MONSTER_STATE || (t.MONSTER_STATE = {}));
    ! function(t) {
        t[t.BACK_JUMP = 0] = "BACK_JUMP", t[t.FRONT_JUMP = 1] = "FRONT_JUMP", t[t.LEFT_JUMP = 2] = "LEFT_JUMP", t[t.RIGHT_JUMP = 3] = "RIGHT_JUMP", t[t.WALK_BACK = 4] = "WALK_BACK", t[t.WALK_FRONT = 5] = "WALK_FRONT", t[t.WALK_LEFT = 6] = "WALK_LEFT", t[t.WALK_RIGHT = 7] = "WALK_RIGHT", t[t.STAND_FRONT = 8] = "STAND_FRONT", t[t.STAND_BACK = 9] = "STAND_BACK", t[t.STAND_LEFT = 10] = "STAND_LEFT", t[t.STAND_RIGHT = 11] = "STAND_RIGHT"
    }(t.HORSE_STATE || (t.HORSE_STATE = {}));
    ! function(t) {
        t[t.BACK_ATTACK = 0] = "BACK_ATTACK", t[t.BACK_WALK = 1] = "BACK_WALK", t[t.FRONT_ATTACK = 2] = "FRONT_ATTACK", t[t.FRONT_WALK = 3] = "FRONT_WALK", t[t.SIDE_ATTACK_LEFT = 4] = "SIDE_ATTACK_LEFT", t[t.SIDE_ATTACK_RIGHT = 5] = "SIDE_ATTACK_RIGHT", t[t.SIDE_WALK_LEFT = 6] = "SIDE_WALK_LEFT", t[t.SIDE_WALK_RIGHT = 7] = "SIDE_WALK_RIGHT", t[t.STAND_FRONT = 8] = "STAND_FRONT", t[t.STAND_BACK = 9] = "STAND_BACK", t[t.STAND_LEFT = 10] = "STAND_LEFT", t[t.STAND_RIGHT = 11] = "STAND_RIGHT"
    }(t.STAG_STATE || (t.STAG_STATE = {}));
    ! function(t) {
        t[t.BACK = 0] = "BACK", t[t.SIDE = 1] = "SIDE", t[t.FRONT = 2] = "FRONT", t[t.BACK_STAND = 3] = "BACK_STAND", t[t.FRONT_STAND = 4] = "FRONT_STAND", t[t.SIDE_STAND = 5] = "SIDE_STAND"
    }(t.MOUNT_STATE || (t.MOUNT_STATE = {}));
    ! function(t) {
        t[t.PLAY_ALL_MODES = 0] = "PLAY_ALL_MODES", t[t.UNLOCK_OUTFIT_FOR_EVERY_ROBOT = 1] = "UNLOCK_OUTFIT_FOR_EVERY_ROBOT", t[t.FREEZE_5_IN_10_SECONDS = 2] = "FREEZE_5_IN_10_SECONDS", t[t.FREEZE_12_IN_10_SECONDS = 3] = "FREEZE_12_IN_10_SECONDS", t[t.FREEZE_25_MONSTERS = 4] = "FREEZE_25_MONSTERS", t[t.FREEZE_50_MONSTERS_IN_FOREST = 5] = "FREEZE_50_MONSTERS_IN_FOREST", t[t.FREEZE_100_MONSTERS = 6] = "FREEZE_100_MONSTERS", t[t.AVOID_CLAWS_TOYSHOP_ARENA = 7] = "AVOID_CLAWS_TOYSHOP_ARENA", t[t.AVOID_CLAWS_3_CONTINUOUS_LEVELS = 8] = "AVOID_CLAWS_3_CONTINUOUS_LEVELS", t[t.AVOID_CARS_RACE_ARENA = 9] = "AVOID_CARS_RACE_ARENA", t[t.AVOID_HORSES_ARENA_1_LEVEL = 10] = "AVOID_HORSES_ARENA_1_LEVEL", t[t.AVOID_HORSES_BATTLE_ROYALE_1_LEVEL = 11] = "AVOID_HORSES_BATTLE_ROYALE_1_LEVEL", t[t.AVOID_CARS_3_LEVELS = 12] = "AVOID_CARS_3_LEVELS", t[t.AVOID_CARS_5_LEVELS = 13] = "AVOID_CARS_5_LEVELS", t[t.CLEAR_LEVEL_STAR_COLLECTOR_120_SECONDS = 14] = "CLEAR_LEVEL_STAR_COLLECTOR_120_SECONDS", t[t.CLEAR_ARCADE = 15] = "CLEAR_ARCADE", t[t.CLEAR_PACMAN_PURPLE_ROBOT = 16] = "CLEAR_PACMAN_PURPLE_ROBOT", t[t.CLEAR_STAR_COLLECTOR_BLACK_ROBOT = 17] = "CLEAR_STAR_COLLECTOR_BLACK_ROBOT", t[t.CLEAR_LEVEL_BATTLE_ROYALE_120_SECONDS = 18] = "CLEAR_LEVEL_BATTLE_ROYALE_120_SECONDS", t[t.CLEAR_LEVEL_ANY_WEAPON = 19] = "CLEAR_LEVEL_ANY_WEAPON", t[t.CLEAR_BATTLE_ROYALE_10_LEVELS = 20] = "CLEAR_BATTLE_ROYALE_10_LEVELS", t[t.CLEAR_FROZEN_MODE_IN_RACE_ARENA = 21] = "CLEAR_FROZEN_MODE_IN_RACE_ARENA", t[t.CLEAR_LEVEL_IN_PACMAN_IN_120_SECONDS = 22] = "CLEAR_LEVEL_IN_PACMAN_IN_120_SECONDS", t[t.CLEAR_PACMAN_IN_NORMAL = 23] = "CLEAR_PACMAN_IN_NORMAL", t[t.CLEAR_STAR_COLLECTOR_IN_FOREST = 24] = "CLEAR_STAR_COLLECTOR_IN_FOREST", t[t.CLEAR_LEVEL_ARCADE_IN_120_SECONDS = 25] = "CLEAR_LEVEL_ARCADE_IN_120_SECONDS", t[t.CLEAR_ARCADE_WITH_3_LIVES_LEFT = 26] = "CLEAR_ARCADE_WITH_3_LIVES_LEFT", t[t.CLEAR_BATTLE_ROYALE_IN_RANCH = 27] = "CLEAR_BATTLE_ROYALE_IN_RANCH", t[t.CLEAR_FROZEN_WITH_20_LEVELS = 28] = "CLEAR_FROZEN_WITH_20_LEVELS", t[t.CLEAR_LEVEL_IN_120_SECONDS_IN_FROZEN = 29] = "CLEAR_LEVEL_IN_120_SECONDS_IN_FROZEN", t[t.CLEAR_ARCADE_5_TIMES = 30] = "CLEAR_ARCADE_5_TIMES", t[t.CLEAR_ARCADE_5_TIMES_IN_FOREST = 31] = "CLEAR_ARCADE_5_TIMES_IN_FOREST", t[t.GET_20_COINS_IN_10_SECONDS = 32] = "GET_20_COINS_IN_10_SECONDS", t[t.GET_40_COINS_IN_10_SECONDS = 33] = "GET_40_COINS_IN_10_SECONDS", t[t.GET_5000_POINTS = 34] = "GET_5000_POINTS", t[t.GET_5_SPEEDUPS_PROPS_IN_1_LEVEL = 35] = "GET_5_SPEEDUPS_PROPS_IN_1_LEVEL", t[t.GET_5_SPEEDUPS_PROPS_IN_LEVEL_IN_ARCADE = 36] = "GET_5_SPEEDUPS_PROPS_IN_LEVEL_IN_ARCADE", t[t.GET_30000_POINTS = 37] = "GET_30000_POINTS", t[t.GET_100_PROPS = 38] = "GET_100_PROPS", t[t.GET_10_FLAMETHROWERS = 39] = "GET_10_FLAMETHROWERS", t[t.GET_15_POWER_BLASTS = 40] = "GET_15_POWER_BLASTS", t[t.GET_200_PROPS = 41] = "GET_200_PROPS", t[t.GET_20_INVINCIBILITY = 42] = "GET_20_INVINCIBILITY", t[t.GET_25_SPEEDUPS = 43] = "GET_25_SPEEDUPS", t[t.DESTROY_20_BLOCKS_1_LEVEL = 44] = "DESTROY_20_BLOCKS_1_LEVEL", t[t.DESTROY_15_BLOCKS_WHEN_RIDING_WAPITI_1_LEVEL = 45] = "DESTROY_15_BLOCKS_WHEN_RIDING_WAPITI_1_LEVEL", t[t.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL = 46] = "DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL", t[t.DESTROY_15_BLOCKS_WHEN_RIDING_WAPITI_IN_ARCADE_MODE_1_LEVEL = 47] = "DESTROY_15_BLOCKS_WHEN_RIDING_WAPITI_IN_ARCADE_MODE_1_LEVEL", t[t.DESTROY_30_BLOCKS = 48] = "DESTROY_30_BLOCKS", t[t.DESTROY_120_BLOCKS_IN_ARCADE = 49] = "DESTROY_120_BLOCKS_IN_ARCADE", t[t.KILL_ENEMY_USING_INVINCIBILITY = 50] = "KILL_ENEMY_USING_INVINCIBILITY", t[t.KILL_2_ENEMIES_IN_10_SECONDS = 51] = "KILL_2_ENEMIES_IN_10_SECONDS", t[t.KILL_AN_ENEMY_WITH_1_OR_MORE_STARS = 52] = "KILL_AN_ENEMY_WITH_1_OR_MORE_STARS", t[t.KILL_AN_ENEMY_WITH_3_OR_MORE_STARS = 53] = "KILL_AN_ENEMY_WITH_3_OR_MORE_STARS", t[t.KILL_4_ENEMIES_IN_10_SECONDS = 54] = "KILL_4_ENEMIES_IN_10_SECONDS", t[t.KILL_10_ENEMIES_USING_BOMBS = 55] = "KILL_10_ENEMIES_USING_BOMBS", t[t.KILL_30_ENEMIES_USING_BOMBS = 56] = "KILL_30_ENEMIES_USING_BOMBS", t[t.KILL_50_ENEMIES_USING_BOMBS = 57] = "KILL_50_ENEMIES_USING_BOMBS", t[t.USE_ANGRY_HAMMER_3_TIMES_IN_LEVEL = 58] = "USE_ANGRY_HAMMER_3_TIMES_IN_LEVEL", t[t.USE_INVINCIBILITY_3_TIMES_IN_LEVEL = 59] = "USE_INVINCIBILITY_3_TIMES_IN_LEVEL", t[t.USE_4_TYPE_OF_WEAPONS_IN_LEVEL = 60] = "USE_4_TYPE_OF_WEAPONS_IN_LEVEL", t[t.USE_LIGHTNING_GUN_3_TIMES_IN_1_LEVEL_IN_ARCADE = 61] = "USE_LIGHTNING_GUN_3_TIMES_IN_1_LEVEL_IN_ARCADE", t[t.USE_INVINCIBILITY_TO_KILL_4_ENEMIES_IN_1_LEVEL = 62] = "USE_INVINCIBILITY_TO_KILL_4_ENEMIES_IN_1_LEVEL", t[t.USE_4_TYPES_OF_WEAPONS_IN_1_LEVEL_IN_ARCADE = 63] = "USE_4_TYPES_OF_WEAPONS_IN_1_LEVEL_IN_ARCADE", t[t.USE_DOLL_BOMB_3_TIMES_IN_1_LEVEL = 64] = "USE_DOLL_BOMB_3_TIMES_IN_1_LEVEL", t[t.USE_DOLL_BOMB_5_TIMES = 65] = "USE_DOLL_BOMB_5_TIMES", t[t.USE_ALL_THE_WEAPONS = 66] = "USE_ALL_THE_WEAPONS", t[t.UNLOCK_1_OUTFIT = 67] = "UNLOCK_1_OUTFIT", t[t.WIN_CONTINUOUSLY_IN_3_LEVELS = 68] = "WIN_CONTINUOUSLY_IN_3_LEVELS", t[t.WIN_CONTINUOUSLY_3_LEVELS_IN_FROZEN = 69] = "WIN_CONTINUOUSLY_3_LEVELS_IN_FROZEN", t[t.WIN_CONTINUOUSLY_IN_3_LEVELS_IN_PACMAN = 70] = "WIN_CONTINUOUSLY_IN_3_LEVELS_IN_PACMAN", t[t.COLLECT_20_STARS = 71] = "COLLECT_20_STARS", t[t.COLLECT_20_STARS_IN_RACE_ARENA = 72] = "COLLECT_20_STARS_IN_RACE_ARENA", t[t.COLLECT_600_COINS = 73] = "COLLECT_600_COINS", t[t.COLLECT_60_STARS_IN_RANCH_ARENA = 74] = "COLLECT_60_STARS_IN_RANCH_ARENA", t[t.COLLECT_1500_COINS = 75] = "COLLECT_1500_COINS", t[t.JUMP_BY_HAMMOCK_2_TIMES = 76] = "JUMP_BY_HAMMOCK_2_TIMES", t[t.JUMP_BY_HAMMOCK_10_TIMES = 77] = "JUMP_BY_HAMMOCK_10_TIMES", t[t.JUMP_BY_RIDING_A_HORSE_10_TIMES = 78] = "JUMP_BY_RIDING_A_HORSE_10_TIMES", t[t.JUMP_BY_RIDING_A_HORSE_20_TIMES = 79] = "JUMP_BY_RIDING_A_HORSE_20_TIMES", t[t.ATTACK_4_ENEMIES = 80] = "ATTACK_4_ENEMIES", t[t.ATTACK_10_ENEMIES = 81] = "ATTACK_10_ENEMIES", t[t.ATTACK_34_ENEMIES = 82] = "ATTACK_34_ENEMIES", t[t.CLICK_GAME_LINKS_IN_THIS_GAME = 83] = "CLICK_GAME_LINKS_IN_THIS_GAME", t[t.RIDE_2_KINDS_OF_VEHICLES_IN_1_LEVEL = 84] = "RIDE_2_KINDS_OF_VEHICLES_IN_1_LEVEL", t[t.TRANSFER_BY_TREE_HOLES_10_TIMES_IN_1_LEVEL = 85] = "TRANSFER_BY_TREE_HOLES_10_TIMES_IN_1_LEVEL", t[t.TRANSFER_BY_TREE_HOLES_20_TIMES_IN_1_LEVEL = 86] = "TRANSFER_BY_TREE_HOLES_20_TIMES_IN_1_LEVEL", t[t.TRANSFER_BY_TREE_HOLES_6_TIMES = 87] = "TRANSFER_BY_TREE_HOLES_6_TIMES", t[t.TRANSFER_BY_TREE_HOLES_46_TIMES = 88] = "TRANSFER_BY_TREE_HOLES_46_TIMES", t[t.FIGHT_IN_ALL_ARENAS_IN_ARCADE_MODE = 89] = "FIGHT_IN_ALL_ARENAS_IN_ARCADE_MODE", t[t.FIGHT_IN_ALL_ARENAS_IN_BATTLE_ROYALE_MODE = 90] = "FIGHT_IN_ALL_ARENAS_IN_BATTLE_ROYALE_MODE", t[t.FIGHT_IN_ALL_ARENAS_IN_STAR_BATTLE_MODE = 91] = "FIGHT_IN_ALL_ARENAS_IN_STAR_BATTLE_MODE", t[t.FIGHT_IN_ALL_ARENAS_IN_PACMAN_MODE = 92] = "FIGHT_IN_ALL_ARENAS_IN_PACMAN_MODE", t[t.FIGHT_IN_ALL_ARENAS_IN_FREEZE_MODE = 93] = "FIGHT_IN_ALL_ARENAS_IN_FREEZE_MODE"
    }(t.MISSION || (t.MISSION = {}))
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o, r, h, l) {
            var c = e.call(this, i) || this;
            return c.x = r.centerX, c.y = r.centerY, c.game = i, c.keyName = a, c.grid = o, c.gridCell = r, c.gridPositionX = r.gridPositionX, c.gridPositionY = r.gridPositionY, c.power = h, c.player = l, c.players = o.players, c.timer = 0, c.timerWarning = 0, c.timeToExplode = t.SETTINGS.BOMB_TIMER, c.kickedSpeed = t.SETTINGS.BOMB_SPEED_KICKED, c.gameStatus = t.GAME_STATUS.PLAYING, c.gameScale = t.SETTINGS.SCALE, c.isExploding = !1, c.isWarning = !1, c.isKicked = !1, c.falling = !1, c.ignoreTimer = !1, c.bombExplosion = new t.BombExplosion(c.game, c.grid, c.gridCell, c.power, c.player), c.grid.bombExplosions.push(c.bombExplosion), c.previousCellContains = null, c.cellKickedIndex = 0, c.cellsKicked = [], c.cellsKickedContains = [], c.createBombAnimation(), c
        }
        return __extends(i, e), i.prototype.createBombAnimation = function() {
            var e;
            e = .4 * t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, this.bombAnimation = this.game.add.ph2AnimationObject(0, e, this.keyName, "atlas_anim"), this.bombAnimation.ph2Animations.play("bomb_anim", 1, !0), this.addChild(this.bombAnimation)
        }, i.prototype.pauseBomb = function() {
            this.gameStatus = t.GAME_STATUS.PAUSED, this.bombAnimation.ph2Animations.pause()
        }, i.prototype.resumeBomb = function() {
            this.gameStatus = t.GAME_STATUS.PLAYING, this.bombAnimation.ph2Animations.resume()
        }, i.prototype.update = function() {
            this.gameStatus === t.GAME_STATUS.PAUSED || this.gameStatus === t.GAME_STATUS.GAME_OVER || this.falling || (this.isExploding || this.checkTimer(), this.isWarning || this.checkWarningTimer(), this.isKicked && (this.checkPlayers(), this.checkMovement()))
        }, i.prototype.checkTimer = function() {
            this.ignoreTimer || (this.timer += this.game.time.elapsedMS, this.timer >= this.timeToExplode && this.explode())
        }, i.prototype.checkWarningTimer = function() {
            this.timerWarning += this.game.time.elapsedMS, this.timerWarning >= .75 * t.SETTINGS.BOMB_TIMER && (this.isWarning = !0, this.bombExplosion.addDangerCellsToAstarGrid())
        }, i.prototype.checkPlayers = function() {
            var e, i;
            if (this.grid.gameMode === t.GAME_MODE.ICE_MAN)
                for (e = 0; e < this.players.length; e++)(i = this.players[e]).gridPositionX === this.gridPositionX && i.gridPositionY === this.gridPositionY && this.explode()
        }, i.prototype.checkMovement = function() {
            if (!this.isExploding) {
                var e, i, s;
                switch (this.direction) {
                    case t.DIRECTION.LEFT:
                        this.moveKickLeft(), e = this.gridPositionX - 1, i = this.gridPositionY, s = this.gridPositionX - 1 <= 0 ? this.grid.cells[0][i] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_WIDTH && this.updateBombCell(s);
                        break;
                    case t.DIRECTION.RIGHT:
                        this.moveKickRight(), e = this.gridPositionX + 1, i = this.gridPositionY, s = this.gridPositionX + 1 >= t.SETTINGS.GRID_WIDTH - 1 ? this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][i] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_WIDTH && this.updateBombCell(s);
                        break;
                    case t.DIRECTION.UP:
                        this.moveKickUp(), e = this.gridPositionX, i = this.gridPositionY - 1, s = this.gridPositionY - 1 <= 0 ? this.grid.cells[e][0] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_HEIGHT && this.updateBombCell(s);
                        break;
                    case t.DIRECTION.DOWN:
                        this.moveKickDown(), e = this.gridPositionX, i = this.gridPositionY + 1, s = this.gridPositionY + 1 >= t.SETTINGS.GRID_HEIGHT - 1 ? this.grid.cells[e][t.SETTINGS.GRID_HEIGHT - 1] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_HEIGHT && this.updateBombCell(s)
                }
            }
        }, i.prototype.updateBombCell = function(e) {
            var i = !0;
            this.cellsKicked.length > 0 && this.gridCell.gridPositionX === this.cellsKicked[this.cellKickedIndex].gridPositionX && this.gridCell.gridPositionY === this.cellsKicked[this.cellKickedIndex].gridPositionY && (i = !1, this.gridCell.cellContains = this.cellsKickedContains[this.cellKickedIndex], ++this.cellKickedIndex >= this.cellsKickedContains.length && (this.cellKickedIndex = this.cellsKickedContains.length - 1)), i && (this.gridCell.cellContains = t.MAP.FREE), this.gridPositionY !== e.gridPositionY && this.grid.rowsGroup[e.gridPositionY].add(this), this.gridCell.isEmpty = !0, this.gridPositionX = e.gridPositionX, this.gridPositionY = e.gridPositionY, this.gridCell = e, this.gridCell.isEmpty = !1, this.gridCell.cellContains = t.MAP.BOMB
        }, i.prototype.moveKickLeft = function() {
            var e;
            e = this.grid.cells[0][this.gridPositionY], this.x <= e.centerX || (0 !== this.gridPositionX && (e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY], this.grid.cells[this.gridPositionX][this.gridPositionY], !e.isEmpty && this.x - .5 * t.SETTINGS.CELL_WIDTH * this.gameScale <= e.right) ? e.cellContains === t.MAP.JELLY && (this.direction = t.DIRECTION.RIGHT) : this.x -= this.kickedSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.moveKickRight = function() {
            var e;
            e = this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY], this.x >= e.centerX || (this.gridPositionX !== t.SETTINGS.GRID_WIDTH - 1 && (e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY], this.grid.cells[this.gridPositionX][this.gridPositionY], !e.isEmpty && this.x + .5 * t.SETTINGS.CELL_WIDTH * this.gameScale >= e.left) ? e.cellContains === t.MAP.JELLY && (this.direction = t.DIRECTION.LEFT) : this.x += this.kickedSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.moveKickUp = function() {
            var e;
            e = this.grid.cells[this.gridPositionX][0], this.y <= e.centerY || 0 !== this.gridPositionY && (e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1], this.grid.cells[this.gridPositionX][this.gridPositionY], !e.isEmpty && this.y - .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale <= e.bottom) || (this.y -= this.kickedSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.moveKickDown = function() {
            var e;
            e = this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1], this.y >= e.centerY || this.gridPositionY !== t.SETTINGS.GRID_HEIGHT - 1 && (e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1], this.grid.cells[this.gridPositionX][this.gridPositionY], !e.isEmpty && this.y + .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale >= e.top) || (this.y += this.kickedSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.bombKicked = function(e, i) {
            var s;
            if (!this.falling) {
                switch (this.direction = e, this.ignoreTimer = i || !1, e) {
                    case t.DIRECTION.UP:
                        if (0 === this.gridPositionY) return;
                        for (s = this.gridPositionY - 1; s >= 0; s--) this.cellsKicked.push(this.grid.cells[this.gridPositionX][s]), this.cellsKickedContains.push(this.grid.cells[this.gridPositionX][s].cellContains);
                        break;
                    case t.DIRECTION.DOWN:
                        if (this.gridPositionY === t.SETTINGS.GRID_HEIGHT - 1) return;
                        for (s = this.gridPositionY + 1; s < t.SETTINGS.GRID_HEIGHT - 1; s++) this.cellsKicked.push(this.grid.cells[this.gridPositionX][s]), this.cellsKickedContains.push(this.grid.cells[this.gridPositionX][s].cellContains);
                        break;
                    case t.DIRECTION.LEFT:
                        if (0 === this.gridPositionX) return;
                        for (s = this.gridPositionX - 1; s >= 0; s--) this.cellsKicked.push(this.grid.cells[s][this.gridPositionY]), this.cellsKickedContains.push(this.grid.cells[s][this.gridPositionY].cellContains);
                        break;
                    case t.DIRECTION.RIGHT:
                        if (this.gridPositionX === t.SETTINGS.GRID_WIDTH - 1) return;
                        for (s = this.gridPositionX + 1; s < t.SETTINGS.GRID_WIDTH - 1; s++) this.cellsKicked.push(this.grid.cells[s][this.gridPositionY]), this.cellsKickedContains.push(this.grid.cells[s][this.gridPositionY].cellContains)
                }
                this.isKicked = !0
            }
        }, i.prototype.createFall = function() {
            var e, i;
            i = this.game.rnd.integerInRange(750, 1e3), e = this.gridCell.centerY, this.falling = !0, this.y = this.gridCell.centerY - t.SETTINGS.GRID_HEIGHT * t.SETTINGS.CELL_HEIGHT, this.timeToExplode = this.game.rnd.integerInRange(5e3, 7e3), this.game.add.tween(this).to({
                y: e
            }, i, Phaser.Easing.Bounce.Out, !0).onComplete.add(this.fallComplete, this)
        }, i.prototype.fallComplete = function() {
            this.falling = !1
        }, i.prototype.explode = function() {
            this.isKicked = !1, this.isExploding = !0, this.isWarning = !0, this.gridCell.isEmpty = !0, this.bombExplosion.gridCell = this.gridCell, this.bombExplosion.x = this.gridCell.centerX, this.bombExplosion.y = this.gridCell.centerY, this.bombExplosion.gridPositionX = this.gridPositionX, this.bombExplosion.gridPositionY = this.gridPositionY, this.bombExplosion.createDangerCells(), this.bombExplosion.makeExplosion(), this.grid.rowsGroup[this.gridCell.gridPositionY].add(this.bombExplosion), this.grid.removeBombFromArray(this.gridCell), this.destroyBomb()
        }, i.prototype.destroyBomb = function() {
            this.grid.gameMode === t.GAME_MODE.ICE_MAN ? (this.resetBombValues(), this.visible = !1, this.gameStatus = t.GAME_STATUS.GAME_OVER) : (this.alive = !1, this.bombAnimation.ph2Animations.stop(), this.bombAnimation.destroy(!0), this.destroy())
        }, i.prototype.resetBombValues = function() {
            this.timer = 0, this.timerWarning = 0, this.timeToExplode = t.SETTINGS.BOMB_TIMER, this.kickedSpeed = t.SETTINGS.BOMB_SPEED_KICKED, this.gameStatus = t.GAME_STATUS.PLAYING, this.gameScale = t.SETTINGS.SCALE, this.isExploding = !1, this.isWarning = !1, this.isKicked = !1, this.falling = !1, this.ignoreTimer = !1, this.previousCellContains = null, this.cellKickedIndex = 0, this.cellsKicked = [], this.cellsKickedContains = []
        }, i
    }(Phaser.Group);
    t.Bomb = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o, r) {
            var h = e.call(this, i) || this;
            return h.x = n.centerX, h.y = n.centerY, h.game = i, h.player = o, h.previousContain = n.cellContains, h.grid = s, h.gridCell = n, h.gridPositionX = n.gridPositionX, h.gridPositionY = n.gridPositionY, h.gameScale = t.SETTINGS.SCALE, h.timer = 0, h.power = a, h.explosion = [], h.cellsUsed = [], h.fireCells = [], h.previousCellsContains = [], h.direction = r || t.DIRECTION.ALL, h.hasExploded = !1, h.visible = !1, h.createExplosionAnimation(), h.createDangerCells(), h
        }
        return __extends(i, e), i.prototype.createExplosionAnimation = function() {
            this.animationExplosion = this.game.add.ph2AnimationObject(0, 0, "bomb_explosion_center", "atlas_anim"), this.animationExplosion.scaleX = 1.1, this.animationExplosion.scaleY = 1.1, this.animationExplosion.visible = !1, this.add(this.animationExplosion)
        }, i.prototype.checkTimer = function() {
            this.hasExploded && (this.timer += this.game.time.elapsedMS, this.timer >= 500 && this.endExplosion())
        }, i.prototype.createDangerCells = function() {
            var e;
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.LEFT || (this.gridPositionX - e < 0 ? e = this.power + 1 : this.grid.cells[this.gridPositionX - e][this.gridPositionY].isEmpty ? this.addToDangerCells(this.gridPositionX - e, this.gridPositionY, e) : e = this.power + 1);
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.RIGHT || (this.gridPositionX + e > t.SETTINGS.GRID_WIDTH - 1 ? e = this.power + 1 : this.grid.cells[this.gridPositionX + e][this.gridPositionY].isEmpty ? this.addToDangerCells(this.gridPositionX + e, this.gridPositionY, e) : e = this.power + 1);
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.UP || (this.gridPositionY - e < 0 ? e = this.power + 1 : this.grid.cells[this.gridPositionX][this.gridPositionY - e].isEmpty ? this.addToDangerCells(this.gridPositionX, this.gridPositionY - e, e) : e = this.power + 1);
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.DOWN || (this.gridPositionY + e > t.SETTINGS.GRID_HEIGHT - 1 ? e = this.power + 1 : this.grid.cells[this.gridPositionX][this.gridPositionY + e].isEmpty ? this.addToDangerCells(this.gridPositionX, this.gridPositionY + e, e) : e = this.power + 1)
        }, i.prototype.createExplosion = function() {
            var e;
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.LEFT || (this.gridPositionX - e < 0 ? e = this.power + 1 : this.grid.cells[this.gridPositionX - e][this.gridPositionY].isEmpty ? e = this.checkEmpty(this.gridPositionX - e, this.gridPositionY, e, t.DIRECTION.LEFT) : (this.checkNotEmpty(this.gridPositionX - e, this.gridPositionY, t.DIRECTION.LEFT), e = this.power + 1));
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.RIGHT || (this.gridPositionX + e > t.SETTINGS.GRID_WIDTH - 1 ? e = this.power + 1 : this.grid.cells[this.gridPositionX + e][this.gridPositionY].isEmpty ? e = this.checkEmpty(this.gridPositionX + e, this.gridPositionY, e, t.DIRECTION.RIGHT) : (this.checkNotEmpty(this.gridPositionX + e, this.gridPositionY, t.DIRECTION.RIGHT), e = this.power + 1));
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.UP || (this.gridPositionY - e < 0 ? e = this.power + 1 : this.grid.cells[this.gridPositionX][this.gridPositionY - e].isEmpty ? e = this.checkEmpty(this.gridPositionX, this.gridPositionY - e, e, t.DIRECTION.UP) : (this.checkNotEmpty(this.gridPositionX, this.gridPositionY - e, t.DIRECTION.UP), e = this.power + 1));
            for (e = 1; e < this.power + 1; e++) this.direction !== t.DIRECTION.ALL && this.direction !== t.DIRECTION.DOWN || (this.gridPositionY + e > t.SETTINGS.GRID_HEIGHT - 1 ? e = this.power + 1 : this.grid.cells[this.gridPositionX][this.gridPositionY + e].isEmpty ? e = this.checkEmpty(this.gridPositionX, this.gridPositionY + e, e, t.DIRECTION.DOWN) : (this.checkNotEmpty(this.gridPositionX, this.gridPositionY + e, t.DIRECTION.DOWN), e = this.power + 1))
        }, i.prototype.checkEmpty = function(e, i, s, n) {
            var a, o, r;
            return a = this.grid.cells[e][i], o = a.gridPositionY > this.gridPositionY || a.gridPositionY < this.gridPositionY ? 0 : 90, r = s === this.power, a.cellContains === t.MAP.SPECIAL_TILE ? this.createFire(e, i, o, n, r) : a.cellContains === t.MAP.ITEM || a.isItem ? (this.grid.removeItemFromArray(a, !0), this.createFire(e, i, o, n, r)) : a.cellContains === t.MAP.FREE ? this.createFire(e, i, o, n, r) : (a.cellContains === t.MAP.COIN || a.isCoin) && this.grid.coinPickedUp(a, !0), s
        }, i.prototype.checkNotEmpty = function(e, i, s) {
            var n, a;
            a = (n = this.grid.cells[e][i]).gridPositionY > this.gridPositionY || n.gridPositionY < this.gridPositionY ? 90 : 0, n.cellContains === t.MAP.BLOCK || n.isBox ? (this.createFireBlock(e, i, a, s, !0), this.grid.destroyBox(this.grid.cells[e][i]), null !== this.player && (this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE))))) : n.cellContains === t.MAP.BOMB ? this.grid.explodeBomb(this.grid.cells[e][i]) : n.cellContains === t.MAP.ITEM || n.isItem ? this.grid.removeItemFromArray(n, !0) : (n.cellContains === t.MAP.COIN || n.isCoin) && this.grid.coinPickedUp(n, !0)
        }, i.prototype.createFire = function(e, i, s, n, a) {
            var o, r;
            r = this.grid.cells[e][i], this.previousCellsContains.push(r.cellContains), o = new t.FireExplosion(this.game, r, s, n, a), r.isDangerCell = !0, null !== this.player ? r.dangerOwner = this.player : r.dangerOwner = null, this.grid.rowsGroup[0].add(o), this.explosion.push(o), this.cellsUsed.push(r), this.grid.astarGrid.grid[e][i].weight = 0
        }, i.prototype.createFireBlock = function(e, i, s, n, a) {
            var o, r;
            r = this.grid.cells[e][i], o = new t.FireExplosion(this.game, r, s, n, a), this.grid.rowsGroup[r.gridPositionY].add(o), this.explosion.push(o)
        }, i.prototype.addToDangerCells = function(t, e, i) {
            var s;
            s = this.grid.cells[t][e], this.fireCells.push(s), this.grid.astarGrid.grid[t][e].weight = 32
        }, i.prototype.endExplosion = function() {
            var e, i, s, n;
            for (this.gridCell.isDangerCell = !1, this.gridCell.isEmpty = !0, n = this.grid.getItemAtCell(this.gridCell), this.gridCell.cellContains = null !== n ? t.MAP.ITEM : t.MAP.FREE, e = 0; e < this.cellsUsed.length; e++) i = this.cellsUsed[e].gridPositionX, s = this.cellsUsed[e].gridPositionY, this.cellsUsed[e].isDangerCell = !1, this.cellsUsed[e].cellContains = this.previousCellsContains[e], this.grid.astarGrid.grid[i][s].weight = 1;
            for (e = this.explosion.length - 1; e >= 0; e--) this.explosion[e].visible = !1;
            this.grid.destroyBombExplosion(this.gridCell), this.destroyBombExplosion()
        }, i.prototype.addDangerCellsToAstarGrid = function() {
            var t, e, i = this.fireCells.length;
            for (t = 0; t < i; t++) e = this.fireCells[t], this.grid.astarGrid.grid[e.gridPositionX][e.gridPositionY].weight = 0
        }, i.prototype.makeExplosion = function() {
            this.visible = !0, this.animationExplosion.visible = !0, this.animationExplosion.ph2Animations.play("bomb_explosion_center2", 1, !1), this.gridCell.isDangerCell = !0, null !== this.player ? this.gridCell.dangerOwner = this.player : this.gridCell.dangerOwner = null, this.hasExploded = !0, this.game.ph2AudioManager.playEffect("bomb", !1), this.createExplosion()
        }, i.prototype.update = function() {
            this.gameStatus !== t.GAME_STATUS.PAUSED && this.checkTimer()
        }, i.prototype.destroyBombExplosion = function() {
            this.grid.gameMode === t.GAME_MODE.ICE_MAN ? this.resetBombExplosionValues() : (this.animationExplosion.ph2Animations.stop(), this.animationExplosion.destroy(!0), this.destroy())
        }, i.prototype.resetBombExplosionValues = function() {
            this.gameScale = t.SETTINGS.SCALE, this.timer = 0, this.explosion = [], this.cellsUsed = [], this.fireCells = [], this.previousCellsContains = [], this.hasExploded = !1, this.visible = !1
        }, i
    }(Phaser.Group);
    t.BombExplosion = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function e(t, e) {
            this.game = t, this.grid = e, this.bombs = [], this.redBombs = [], this.createPools()
        }
        return e.prototype.createPools = function() {
            var t;
            for (t = 0; t < 15; t++) this.createBomb();
            for (t = 0; t < 5; t++) this.createRedBomb()
        }, e.prototype.createBomb = function() {
            var e, i;
            return i = this.grid.cells[0][0], e = new t.Bomb(this.game, 0, 0, "bomb", this.grid, i, 2, null), e.gameStatus = t.GAME_STATUS.GAME_OVER, e.visible = !1, this.bombs.push(e), e
        }, e.prototype.createRedBomb = function() {
            var e, i;
            return i = this.grid.cells[0][0], e = new t.Bomb(this.game, 0, 0, "bomb_red", this.grid, i, 5, null), e.gameStatus = t.GAME_STATUS.GAME_OVER, e.visible = !1, this.redBombs.push(e), e
        }, e.prototype.getBomb = function(e) {
            var i;
            return null === (i = this.getFirstBombDead()) && (i = this.createBomb()), i.x = e.centerX, i.y = e.centerY, i.gridCell = e, i.gridPositionX = e.gridPositionX, i.gridPositionY = e.gridPositionY, i.gameStatus = t.GAME_STATUS.PLAYING, i.visible = !0, i.bombExplosion.gridCell = i.gridCell, i.bombExplosion.x = i.gridCell.centerX, i.bombExplosion.y = i.gridCell.centerY, i.bombExplosion.gridPositionX = i.gridPositionX, i.bombExplosion.gridPositionY = i.gridPositionY, i.bombExplosion.createDangerCells(), i
        }, e.prototype.getRedBomb = function(e) {
            var i;
            return null === (i = this.getFirstRedBombDead()) && (i = this.createRedBomb()), i.x = e.centerX, i.y = e.centerY, i.gridCell = e, i.gridPositionX = e.gridPositionX, i.gridPositionY = e.gridPositionY, i.gameStatus = t.GAME_STATUS.PLAYING, i.visible = !0, i.bombExplosion.gridCell = i.gridCell, i.bombExplosion.x = i.gridCell.centerX, i.bombExplosion.y = i.gridCell.centerY, i.bombExplosion.gridPositionX = i.gridPositionX, i.bombExplosion.gridPositionY = i.gridPositionY, i.bombExplosion.createDangerCells(), i
        }, e.prototype.getFirstBombDead = function() {
            var e;
            for (e = 0; e < this.bombs.length; e++)
                if (this.bombs[e].gameStatus === t.GAME_STATUS.GAME_OVER && !this.bombs[e].visible) return this.bombs[e];
            return null
        }, e.prototype.getFirstRedBombDead = function() {
            var e;
            for (e = 0; e < this.redBombs.length; e++)
                if (this.redBombs[e].gameStatus === t.GAME_STATUS.GAME_OVER && !this.redBombs[e].visible) return this.redBombs[e];
            return null
        }, e
    }();
    t.BombsPool = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a, o, r) {
            var h = e.call(this, t) || this;
            return h.x = i, h.y = s, h.game = t, h.grid = a, h.gridCell = o, h.gridPositionX = o.gridPositionX, h.gridPositionY = o.gridPositionY, h.canBeDestroyed = !0, h.boxDestroyed = !1, h.treasureBox = r || !1, h.createAnimations(n), h
        }
        return __extends(i, e), i.prototype.createAnimations = function(e) {
            var i, s, n = this;
            this.treasureBox ? (i = .5 * t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE, s = t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, this.animationTreasureBox = this.game.add.ph2AnimationObject(i, s, "box", "atlas_anim"), this.animationTreasureBox.ph2Animations.play("box_in", 1, !1).onComplete.add(function() {
                n.boxDestroyed || n.animationTreasureBox.ph2Animations.play("box_stand", 1, !0)
            }, this), this.add(this.animationTreasureBox)) : (i = .5 * t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE, s = .5 * t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, this.spriteBox = new Phaser.Sprite(this.game, i, s, "atlas_gameplay", e), this.spriteBox.anchor.set(.5, .5), this.add(this.spriteBox)), this.animationExplosion = this.game.add.ph2AnimationObject(i, s, "brick_explosion", "atlas_anim"), this.animationExplosion.visible = !1, this.add(this.animationExplosion)
        }, i.prototype.destroyBox = function() {
            var e = this;
            this.boxDestroyed = !0, this.treasureBox ? (this.animationTreasureBox.visible = !1, this.animationTreasureBox.ph2Animations.stop(), this.animationTreasureBox.destroy()) : this.spriteBox.visible = !1, this.animationExplosion.visible = !0, this.animationExplosion.ph2Animations.play("brick_explosion_anim", 1, !1).onComplete.add(function() {
                e.gridCell.cellContains = t.MAP.FREE, e.gridCell.isBox = !1, e.gridCell.isEmpty = !0, e.revealItem(), e.animationExplosion.ph2Animations.stop(), e.animationExplosion.destroy(!0), e.destroy()
            })
        }, i.prototype.revealItem = function() {
            this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED && this.grid.createPowerUp(this.gridCell)
        }, i.prototype.stopAnimations = function() {
            this.animationExplosion.ph2Animations.stop(), this.animationExplosion.destroy(), this.treasureBox && (this.animationTreasureBox.ph2Animations.stop(), this.animationTreasureBox.destroy())
        }, i
    }(Phaser.Group);
    t.Box = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t) || this;
            return n.x = i.centerX, n.y = i.centerY, n.game = t, n.grid = s, n.gridCell = i, n.gridPositionX = i.gridPositionX, n.gridPositionY = i.gridPositionY, n.canBePickedUp = !1, n.alreadyDestroyed = !1, n.createAnimations(), n
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            this.animationCoin = this.game.add.ph2AnimationObject(0, 0, "coin", "atlas_anim"), this.animationCoin.ph2Animations.play("coin_stand", 1, !0), this.addChild(this.animationCoin), this.animationDestroy = this.game.add.ph2AnimationObject(0, 0, "brick_explosion", "atlas_anim"), this.animationDestroy.visible = !1, this.addChild(this.animationDestroy)
        }, i.prototype.throwCoinUp = function() {
            var e, i, s = this;
            null !== (i = this.grid.obtainFreeCell()) ? (i.cellContains = t.MAP.COIN, i.isCoin = !0, e = i.gridPositionY > this.gridCell.gridPositionY + 1 ? this.gridCell.centerY - 25 : i.centerY - 50 * t.SETTINGS.SCALE, this.game.add.tween(this).to({
                y: e
            }, 750, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                s.game.add.tween(s).to({
                    y: i.centerY
                }, 750, Phaser.Easing.Quartic.In, !0)
            }, this), this.game.add.tween(this).to({
                x: i.centerX
            }, 1500, "Linear", !0).onComplete.add(function() {
                s.throwComplete(i)
            }, this)) : this.destroyCoin()
        }, i.prototype.throwComplete = function(t) {
            null != this.grid.rowsGroup && null != this.grid.items && (this.gridPositionX = t.gridPositionX, this.gridPositionY = t.gridPositionY, this.canBePickedUp = !0, this.grid.rowsGroup[t.gridPositionY].add(this), this.grid.coins.push(this))
        }, i.prototype.destroyCoin = function() {
            this.alreadyDestroyed || (this.alreadyDestroyed = !0, this.animationDestroy.ph2Animations.stop(), this.animationDestroy.destroy(), this.animationCoin.ph2Animations.stop(), this.animationCoin.destroy(), this.destroy())
        }, i.prototype.destroyAnimation = function() {
            void 0 !== this.animationDestroy && null !== this.animationDestroy && (this.animationDestroy.visible = !0, this.animationDestroy.ph2Animations.play("brick_explosion_anim", 1, !1).onComplete.add(this.destroyCoin, this))
        }, i
    }(Phaser.Group);
    t.Coin = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t) {
            var i = e.call(this, t) || this;
            return i.game = t, i.firstSkipComic1 = !0, i.secondSkipComic1 = !1, i.firstSkipGameComplete = !0, i.secondSkipGameComplete = !1, i.createComics(), i.createMaskIntroComic1(), i.createMaskGameCompleteComic(), i.addTouchListeners(), i
        }
        return __extends(i, e), i.prototype.createComics = function() {
            var e, i;
            e = .5 * this.game.width, i = .5 * this.game.height, this.overlayComics = new t.Overlay(this.game, 1, "bg_black"), this.overlayComics.kill(), this.introComic1 = this.game.add.ph2AnimationObject(e, i, "intro", "atlas_intro"), this.introComic2 = this.game.add.ph2AnimationObject(e, i, "intro2", "atlas_intro"), this.gameCompleteComic = this.game.add.ph2AnimationObject(e, i, "game_completed", "atlas_game_completed_comic"), this.introComic1.visible = !1, this.introComic2.visible = !1, this.gameCompleteComic.visible = !1, this.add(this.overlayComics), this.add(this.introComic1), this.add(this.introComic2), this.add(this.gameCompleteComic)
        }, i.prototype.addTouchListeners = function() {
            this.introComic1.inputEnabled = !0, this.introComic2.inputEnabled = !0, this.gameCompleteComic.inputEnabled = !0, this.introComic1.events.onInputUp.add(this.skipIntro1, this), this.introComic2.events.onInputUp.add(this.skipIntro2, this), this.gameCompleteComic.events.onInputUp.add(this.skipGameComplete, this)
        }, i.prototype.skipIntro1 = function() {
            Ph2.AnimationSystem.findObject("page1/image1", this.introComic1).alpha < 1 && (this.firstSkipComic1 = !1, this.secondSkipComic1 = !0), this.firstSkipComic1 ? (this.currentAnimation.getTimelineMax().seek(5.5), this.firstSkipComic1 = !1, this.secondSkipComic1 = !0) : this.secondSkipComic1 && (this.currentAnimation.stop(!0, !0), this.firstSkipComic1 = !1, this.secondSkipComic1 = !1, this.hideComics())
        }, i.prototype.skipIntro2 = function() {
            this.currentAnimation.stop(!0, !0), this.hideComics()
        }, i.prototype.skipGameComplete = function() {
            Ph2.AnimationSystem.findObject("skin/image1", this.gameCompleteComic).alpha < 1 && (this.firstSkipGameComplete = !1, this.secondSkipGameComplete = !0), this.firstSkipGameComplete ? (this.currentAnimation.getTimelineMax().seek(3.2), this.firstSkipGameComplete = !1, this.secondSkipGameComplete = !0) : this.secondSkipGameComplete && (this.currentAnimation.stop(!0, !0), this.firstSkipGameComplete = !1, this.secondSkipGameComplete = !1, this.hideComics())
        }, i.prototype.createMaskIntroComic1 = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p;
            e = Ph2.AnimationSystem.findObject("page1/image1", this.introComic1), i = Ph2.AnimationSystem.findObject("page1/image2", this.introComic1), s = Ph2.AnimationSystem.findObject("page1/image3", this.introComic1), n = Ph2.AnimationSystem.findObject("page2/image1", this.introComic1), p = t.SETTINGS.SCALE, l = new Phaser.Polygon([new Phaser.Point(150 * p, -262 * p), new Phaser.Point(-130 * p, -262 * p), new Phaser.Point(-130 * p, 320 * p), new Phaser.Point(103 * p, 320 * p)]), c = new Phaser.Polygon([new Phaser.Point(-242 * p, -142 * p), new Phaser.Point(273 * p, -142 * p), new Phaser.Point(268 * p, 137 * p), new Phaser.Point(-265 * p, 98 * p)]), u = new Phaser.Polygon([new Phaser.Point(-262 * p, -168 * p), new Phaser.Point(237 * p, -126 * p), new Phaser.Point(273 * p, 151 * p), new Phaser.Point(-291 * p, 151 * p)]), d = new Phaser.Polygon([new Phaser.Point(-304 * p, -158 * p), new Phaser.Point(308 * p, -158 * p), new Phaser.Point(219 * p, 69 * p), new Phaser.Point(-304 * p, 210 * p)]), (a = this.game.add.graphics(0, 0)).beginFill(65331), a.drawPolygon(l.points), a.endFill(), (o = this.game.add.graphics(0, 0)).beginFill(65331), o.drawPolygon(c.points), o.endFill(), (r = this.game.add.graphics(0, 0)).beginFill(65331), r.drawPolygon(u.points), r.endFill(), (h = this.game.add.graphics(0, 0)).beginFill(65331), h.drawPolygon(d.points), h.endFill(), e.addChild(a), e.mask = a, i.addChild(o), i.mask = o, s.addChild(r), s.mask = r, n.addChild(h), n.mask = h
        }, i.prototype.createMaskGameCompleteComic = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p;
            e = Ph2.AnimationSystem.findObject("skin/image1", this.gameCompleteComic), i = Ph2.AnimationSystem.findObject("skin/image2", this.gameCompleteComic), s = Ph2.AnimationSystem.findObject("skin/image3", this.gameCompleteComic), n = Ph2.AnimationSystem.findObject("skin/image4", this.gameCompleteComic), p = t.SETTINGS.SCALE, l = new Phaser.Polygon([new Phaser.Point(-407 * p, -137 * p), new Phaser.Point(405 * p, -137 * p), new Phaser.Point(405 * p, 160 * p), new Phaser.Point(-407 * p, 160 * p)]), c = new Phaser.Polygon([new Phaser.Point(-163 * p, -135 * p), new Phaser.Point(253 * p, -135 * p), new Phaser.Point(76 * p, 130 * p), new Phaser.Point(-163 * p, 130 * p)]), u = new Phaser.Polygon([new Phaser.Point(-151 * p, -140 * p), new Phaser.Point(218 * p, -140 * p), new Phaser.Point(218 * p, 124 * p), new Phaser.Point(-330 * p, 124 * p)]), d = new Phaser.Polygon([new Phaser.Point(-405 * p, -292 * p), new Phaser.Point(403 * p, -292 * p), new Phaser.Point(403 * p, 291 * p), new Phaser.Point(-405 * p, 291 * p)]), (a = this.game.add.graphics(0, 0)).beginFill(65331), a.drawPolygon(l.points), a.endFill(), (o = this.game.add.graphics(0, 0)).beginFill(65331), o.drawPolygon(c.points), o.endFill(), (r = this.game.add.graphics(0, 0)).beginFill(65331), r.drawPolygon(u.points), r.endFill(), (h = this.game.add.graphics(0, 0)).beginFill(65331), h.drawPolygon(d.points), h.endFill(), e.addChild(a), e.mask = a, i.addChild(o), i.mask = o, s.addChild(r), s.mask = r, n.addChild(h), n.mask = h
        }, i.prototype.showIntroComic1 = function() {
            return this.overlayComics.revive(), this.introComic1.visible = !0, this.firstSkipComic1 = !0, this.secondSkipComic1 = !1, this.currentAnimation = this.introComic1.ph2Animations.play("intro_play", 1, !1), this.currentAnimation
        }, i.prototype.showIntroComic2 = function() {
            return this.overlayComics.revive(), this.introComic2.visible = !0, this.currentAnimation = this.introComic2.ph2Animations.play("intro2_play", 1, !1), this.currentAnimation
        }, i.prototype.showGameCompleteComic2 = function(t) {
            var e;
            switch (t) {
                case 0:
                    e = "hero1_gc";
                    break;
                case 1:
                    e = "hero2_gc";
                    break;
                case 2:
                    e = "hero3_gc";
                    break;
                case 3:
                    e = "hero4_gc";
                    break;
                case 4:
                    e = "hero5_gc";
                    break;
                case 5:
                    e = "hero6_gc";
                    break;
                case 6:
                    e = "hero7_gc";
                    break;
                case 7:
                    e = "hero8_gc";
                    break;
                default:
                    e = "hero1_gc"
            }
            return this.overlayComics.revive(), this.gameCompleteComic.visible = !0, this.firstSkipGameComplete = !0, this.secondSkipGameComplete = !1, Ph2.AnimationSystem.findObject("skin", this.gameCompleteComic).ph2Animations.play(e, 1, !1), this.currentAnimation = this.gameCompleteComic.ph2Animations.play("game_completed_play", 1, !1), this.currentAnimation
        }, i.prototype.hideComics = function() {
            this.overlayComics.kill(), this.introComic1.visible = !1, this.introComic2.visible = !1, this.gameCompleteComic.visible = !1
        }, i.prototype.resizeComic = function() {
            var t, e;
            t = .5 * this.game.width, e = .5 * this.game.height, this.overlayComics.width = this.game.width, this.overlayComics.height = this.game.height, this.introComic1.x = t, this.introComic1.y = e, this.introComic2.x = t, this.introComic2.y = e, this.gameCompleteComic.x = t, this.gameCompleteComic.y = e
        }, i.prototype.resizeOverlay = function() {
            var e, i, s, n, a, o;
            i = Constants.CALCULATED_WIDTH, s = Constants.CALCULATED_HEIGHT, i < (n = 800 * t.SETTINGS.SCALE) ? (a = i * (e = i / n), o = s * e, this.overlayComics.x = -(i - a), this.overlayComics.y = -(s - o), this.overlayComics.width = this.game.width + this.game.width * e, this.overlayComics.height = this.game.height + this.game.height * e) : (this.overlayComics.x = 0, this.overlayComics.y = 0, this.overlayComics.width = this.game.width, this.overlayComics.height = this.game.height)
        }, i
    }(Phaser.Group);
    t.Comic = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o) {
            var r = e.call(this, i) || this;
            switch (r.x = s.centerX, r.y = s.centerY, r.game = i, r.gridCell = s, r.angle = n, a) {
                case t.DIRECTION.UP:
                    r.angle = 0;
                    break;
                case t.DIRECTION.DOWN:
                    r.angle = 180;
                    break;
                case t.DIRECTION.LEFT:
                    r.angle = 270;
                    break;
                case t.DIRECTION.RIGHT:
                    r.angle = 90
            }
            return o ? (r.keyName = "bomb_explosion_edge", r.animationName = "anim_explosion_edge") : (r.keyName = "bomb_explosion_line", r.animationName = "anim_explosion_line"), r.createExplosion(), r
        }
        return __extends(i, e), i.prototype.createExplosion = function() {
            this.explosion = this.game.add.ph2AnimationObject(0, 0, this.keyName, "atlas_anim"), this.explosion.ph2Animations.play(this.animationName, 1, !1), this.addChild(this.explosion)
        }, i
    }(Phaser.Group);
    t.FireExplosion = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o, r, h) {
            var l, c, u = e.call(this, i) || this;
            if (u.game = i, u.difficulty = s, u.playerMode = a, u.charactersChosen = r, u.gameMode = n, u.totalEnemies = h, u.mapTheme = o, u.rowsGroup = [], u.cells = [], u.players = [], u.bombs = [], u.boxes = [], u.items = [], u.weapons = [], u.bombExplosions = [], u.gridData = [], u.playersX = [], u.playersY = [], u.coins = [], u.stars = [], u.redCarRoute = [], u.whiteCarRoute = [], u.horses = [], u.monsters = [], u.beachLandingCells = [], u.spawneableCells = [], u.possibleBlockers = [], u.possibleWalls = [], u.possibleTiles = [], u.centerMapPositionX = [], u.centerMapPositionY = [], u.chosenWalls = [], u.pacmanChances = [], u.onBlockDestroyChances = [], u.weaponChances = [], u.powerupChances = [], u.treasureBoxChances = [], u.mountChances = [], u.survivalBombTimer = 0, u.survivalPowerUpTimer = 0, u.timeToCreatePowerUp = 6e4, u.boxTimer = 0, u.blockersCreated = 0, u.blockersTotal = 0, u.gameScale = t.SETTINGS.SCALE, u.initialX = 0, u.initialY = 0, u.tweenHammerShake = null, u.tweenLightningShake = null, u.hammerShakePlayer = 0, u.mapNumber = 0, u.pacmanPowerUps = 0, u.timerPacman = 0, u.defineAssets(), u.createChancesArray(), u.createTileGroups(), u.createGrid(), u.createMap(), u.createOuterWall(), u.createMapCenter(), u.createSpecialTiles(), u.createStartingCells(), u.createBoxes(), u.createPlayers(), u.createSpawneableCells(), u.createDarkness(), u.gameMode === t.GAME_MODE.NEW_PACMAN) u.createRandomPacmanPowerUp(), u.createRandomPacmanPowerUp(), u.createRandomPacmanPowerUp();
            else if (u.gameMode === t.GAME_MODE.STAR_COLLECTOR)
                for (c = u.game.rnd.integerInRange(7, 8), l = 0; l < c; l++) u.createStar();
            else if (u.gameMode === t.GAME_MODE.ICE_MAN)
                for (l = 0; l < 24; l++) u.createMonster();
            return u.gameStatus = t.GAME_STATUS.PLAYING, u
        }
        return __extends(i, e), i.prototype.defineAssets = function() {
            switch (this.mapTheme === t.MAP_THEME.RANDOM ? this.mapThemeSelected = this.game.rnd.integerInRange(0, 8) : this.mapThemeSelected = this.mapTheme, this.mapThemeSelected) {
                case t.MAP_THEME.CLASSROOM:
                    this.possibleBlockers = ["brick_h5.png", "brick_h6.png", "brick_h7.png", "brick_h8.png", "brick_h9.png"], this.possibleWalls = ["brick_h1.png", "brick_h2.png", "brick_h3.png", "brick_h4.png"], this.possibleTiles = ["tile_classroom.png"], this.centerName = "classroom_base.png";
                    break;
                case t.MAP_THEME.FOREST:
                    this.possibleBlockers = ["brick_b5.png", "brick_b6.png", "brick_b7.png", "brick_b8.png", "brick_b9.png"], this.possibleWalls = ["brick_b1.png", "brick_b2.png", "brick_b3.png", "brick_b4.png"], this.possibleTiles = ["tile_forest.png"], this.centerName = "center_forest_base.png";
                    break;
                case t.MAP_THEME.RACE_TRACK:
                    this.possibleBlockers = ["brick_a5.png", "brick_a6.png", "brick_a7.png", "brick_a8.png", "brick_a9.png"], this.possibleWalls = ["brick_a1.png", "brick_a2.png", "brick_a3.png", "brick_a4.png"], this.possibleTiles = ["tile_race_track.png"], this.centerName = "center_race_track.png";
                    break;
                case t.MAP_THEME.RANCH:
                    this.possibleBlockers = ["brick_i5.png", "brick_i6.png", "brick_i7.png", "brick_i8.png"], this.possibleWalls = ["brick_i1.png", "brick_i2.png", "brick_i3.png", "brick_i4.png"], this.possibleTiles = ["tile_ranch.png"], this.centerName = "center_ranch.png";
                    break;
                case t.MAP_THEME.CHRISTMAS:
                    this.possibleBlockers = ["brick_d5.png", "brick_d6.png", "brick_d7.png", "brick_d8.png", "brick_d9.png"], this.possibleWalls = ["brick_d1.png", "brick_d2.png", "brick_d3.png", "brick_d4.png"], this.possibleTiles = ["tile_christmas.png"], this.centerName = "center_christmas_base.png";
                    break;
                case t.MAP_THEME.BEACH:
                    this.possibleBlockers = ["brick_c5.png", "brick_c6.png", "brick_c7.png", "brick_c8.png", "brick_c9.png"], this.possibleWalls = ["brick_c1.png", "brick_c2.png", "brick_c3.png", "brick_c4.png"], this.possibleTiles = ["tile_beach.png"], this.centerName = "center_beach.png";
                    break;
                case t.MAP_THEME.BAKERY:
                    this.possibleBlockers = ["brick_f5.png", "brick_f6.png", "brick_f7.png", "brick_f8.png", "brick_f9.png"], this.possibleWalls = ["brick_f1.png", "brick_f2.png", "brick_f3.png", "brick_f4.png"], this.possibleTiles = ["tile_bakery.png"], this.centerName = "center_bakery_base.png";
                    break;
                case t.MAP_THEME.BOUTIQUE:
                    this.possibleBlockers = ["brick_g5.png", "brick_g6.png", "brick_g7.png", "brick_g8.png", "brick_g9.png"], this.possibleWalls = ["brick_g1.png", "brick_g2.png", "brick_g3.png", "brick_g4.png"], this.possibleTiles = ["tile_boutique.png"], this.centerName = "center_boutique.png";
                    break;
                case t.MAP_THEME.TOY_STORE:
                    this.possibleBlockers = ["brick_e5.png", "brick_e6.png", "brick_e7.png", "brick_e8.png", "brick_e9.png"], this.possibleWalls = ["brick_e1.png", "brick_e2.png", "brick_e3.png", "brick_e4.png"], this.possibleTiles = ["tile_toy_store.png"], this.centerName = "center_toy_store_base.png"
            }
            this.chosenTile = this.possibleTiles[this.game.rnd.integerInRange(0, this.possibleTiles.length - 1)], this.chosenWalls = _.sample(this.possibleWalls, 2), this.tileGroup = new Phaser.Group(this.game), this.mainGroup = new Phaser.Group(this.game), this.joystickGroup = new Phaser.Group(this.game), this.add(this.tileGroup), this.add(this.mainGroup), this.add(this.joystickGroup)
        }, i.prototype.createDarkness = function() {
            if (this.difficulty === t.DIFFICULTY.HARD && this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER) {
                var e = void 0,
                    i = void 0;
                e = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * (t.SETTINGS.GRID_WIDTH + 2), i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * (t.SETTINGS.GRID_HEIGHT + 2), this.darknessGroup = new Phaser.Group(this.game), this.add(this.darknessGroup), this.hardDarkness = new t.HardDarkness(this.game, e, i), this.darknessGroup.add(this.hardDarkness)
            }
        }, i.prototype.createChancesArray = function() {
            var e, i, s, n, a;
            for (s = t.SETTINGS.ON_BLOCK_DESTROY.length, e = 0; e < s; e++)
                for (a = (n = t.SETTINGS.ON_BLOCK_DESTROY[e]).chance, i = 0; i < a; i++) this.onBlockDestroyChances.push(n);
            for (s = t.SETTINGS.POWER_UP_CHANCES.length, e = 0; e < s; e++)
                for (a = (n = t.SETTINGS.POWER_UP_CHANCES[e]).chance, i = 0; i < a; i++) this.powerupChances.push(n);
            for (s = t.SETTINGS.WEAPON_CHANCES.length, e = 0; e < s; e++)
                for (a = (n = t.SETTINGS.WEAPON_CHANCES[e]).chance, i = 0; i < a; i++) this.weaponChances.push(n);
            for (s = t.SETTINGS.MOUNT_CHANCES.length, e = 0; e < s; e++)
                for (a = (n = t.SETTINGS.MOUNT_CHANCES[e]).chance, i = 0; i < a; i++) this.mountChances.push(n);
            for (s = t.SETTINGS.TREASURE_BOXES.length, e = 0; e < s; e++)
                for (a = (n = t.SETTINGS.TREASURE_BOXES[e]).chance, i = 0; i < a; i++) this.treasureBoxChances.push(n);
            for (s = t.SETTINGS.PACMAN_POWER_UPS.length, e = 0; e < s; e++)
                for (a = (n = t.SETTINGS.PACMAN_POWER_UPS[e]).chance, i = 0; i < a; i++) this.pacmanChances.push(n)
        }, i.prototype.createTileGroups = function() {
            var e, i;
            for (e = 0; e < t.SETTINGS.GRID_HEIGHT + 2; e++)(i = new Phaser.Group(this.game)).name = "row_" + e, this.add(i), this.rowsGroup.push(i)
        }, i.prototype.createOuterWall = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p, m, g;
            for (r = .5 * t.SETTINGS.CELL_WIDTH * this.gameScale, h = .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale, i = this.initialX - t.SETTINGS.CELL_WIDTH * this.gameScale, n = this.initialY - t.SETTINGS.CELL_HEIGHT * this.gameScale, a = this.initialY + t.SETTINGS.CELL_HEIGHT * t.SETTINGS.GRID_HEIGHT * this.gameScale, o = t.SETTINGS.GRID_WIDTH + 2, l = this.initialX - 2 * t.SETTINGS.CELL_WIDTH * this.gameScale, c = this.initialY - 2 * t.SETTINGS.CELL_HEIGHT * this.gameScale, u = t.SETTINGS.CELL_WIDTH * (t.SETTINGS.GRID_WIDTH + 4) * this.gameScale, d = t.SETTINGS.CELL_HEIGHT * (t.SETTINGS.GRID_HEIGHT + 4) * this.gameScale, g = new Phaser.TileSprite(this.game, l, c, u, d, "atlas_gameplay", this.chosenTile), this.tileGroup.add(g), e = 0; e < o; e++) p = new Phaser.Sprite(this.game, i + r, n + h, "atlas_gameplay", this.chosenWalls[0]), m = new Phaser.Sprite(this.game, i + r, a + h, "atlas_gameplay", this.chosenWalls[0]), p.anchor.set(.5), m.anchor.set(.5), i += t.SETTINGS.CELL_WIDTH * this.gameScale, this.rowsGroup[0].add(p), this.rowsGroup[this.rowsGroup.length - 1].add(m), p.sendToBack(), m.sendToBack();
            for (i = this.initialX - t.SETTINGS.CELL_WIDTH * this.gameScale, s = this.initialX + t.SETTINGS.CELL_WIDTH * t.SETTINGS.GRID_WIDTH * this.gameScale, n = this.initialY, e = 0; e < t.SETTINGS.GRID_HEIGHT; e++) p = new Phaser.Sprite(this.game, i + r, n + h, "atlas_gameplay", this.chosenWalls[0]), m = new Phaser.Sprite(this.game, s + r, n + h, "atlas_gameplay", this.chosenWalls[0]), p.anchor.set(.5), m.anchor.set(.5), n += t.SETTINGS.CELL_HEIGHT * this.gameScale, this.rowsGroup[e].add(p), this.rowsGroup[e].add(m)
        }, i.prototype.createGrid = function() {
            var e, i, s, n, a, o, r, h, l;
            for (s = this.initialX, n = this.initialY, r = [], o = [], h = [], l = [], e = 0; e < t.SETTINGS.GRID_WIDTH; e++) {
                for (i = 0; i < t.SETTINGS.GRID_HEIGHT; i++) a = new t.GridCell(this.game, s, n, this.chosenTile, e, i), o.push(a), h.push(1), l.push(0), n += t.SETTINGS.CELL_HEIGHT * this.gameScale;
                this.cells.push(o), this.gridData.push(l), r.push(h), h = [], o = [], l = [], n = this.initialY, s += t.SETTINGS.CELL_WIDTH * this.gameScale
            }
            this.astarGrid = new Graph(r)
        }, i.prototype.createMap = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p, m;
            switch (d = this.chosenWalls.length - 1, s = .5 * t.SETTINGS.CELL_WIDTH * this.gameScale, n = .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale, 0, 0, m = t.SETTINGS.GRID_WIDTH, p = t.SETTINGS.GRID_HEIGHT, this.mapThemeSelected) {
                case t.MAP_THEME.BEACH:
                    u = "beach", a = this.game.cache.getJSON("maps_special"), r = this.game.rnd.integerInRange(0, a[u].length - 1);
                    break;
                case t.MAP_THEME.FOREST:
                    u = "forest", a = this.game.cache.getJSON("maps_special"), r = this.game.rnd.integerInRange(0, a[u].length - 1);
                    break;
                case t.MAP_THEME.RACE_TRACK:
                    u = "race_track", a = this.game.cache.getJSON("maps_special"), r = this.game.rnd.integerInRange(0, a[u].length - 1), this.redCarRoute = a[u][r].car_red, this.whiteCarRoute = a[u][r].car_white;
                    break;
                case t.MAP_THEME.RANCH:
                    u = "ranch", a = this.game.cache.getJSON("maps_special"), r = this.game.rnd.integerInRange(0, a[u].length - 1);
                    break;
                case t.MAP_THEME.TOY_STORE:
                    u = "forest", a = this.game.cache.getJSON("maps_special"), r = this.game.rnd.integerInRange(0, a[u].length - 1);
                    break;
                default:
                    u = "maps", a = this.game.cache.getJSON("maps_generic"), r = this.game.rnd.integerInRange(0, a[u].length - 1)
            }
            for (o = a[u][r].grid, this.blockersTotal = a[u][r].blockers, this.mapNumber = r, e = 0; e < m; e++)
                for (i = 0; i < p; i++) this.gridData[e][i] = o[i][e], o[i][e] !== t.GRID_DATA.WALL && o[i][e] !== t.GRID_DATA.TOTEM || (l = this.cells[e][i], this.astarGrid.grid[e][i].weight = 0, l.isEmpty = !1, l.cellContains = t.MAP.WALL, c = this.chosenWalls[this.game.rnd.integerInRange(0, d)], o[i][e] === t.GRID_DATA.WALL ? ((h = new Phaser.Sprite(this.game, l.x + s, l.y + n, "atlas_gameplay", c)).anchor.set(.5), this.rowsGroup[i].add(h)) : o[i][e] === t.GRID_DATA.TOTEM && (this.centerMapPositionX.push(l.gridPositionX), this.centerMapPositionY.push(l.gridPositionY)))
        }, i.prototype.createMapCenter = function() {
            var e, i, s, n;
            switch (this.centerMap = null, n = this.centerMapPositionY[this.centerMapPositionY.length - 1], e = this.centerMapPositionX[4], i = this.centerMapPositionY[4], s = this.cells[e][i], this.mapThemeSelected) {
                case t.MAP_THEME.CHRISTMAS:
                    this.centerMap = new t.Christmas(this.game, this, s);
                    break;
                case t.MAP_THEME.CLASSROOM:
                    this.centerMap = new t.Classroom(this.game, this, s);
                    break;
                case t.MAP_THEME.BOUTIQUE:
                    this.centerMap = new t.Boutique(this.game, this, s);
                    break;
                case t.MAP_THEME.FOREST:
                    this.centerMap = new t.Forest(this.game, this, s);
                    break;
                case t.MAP_THEME.BEACH:
                    this.centerMap = new t.Beach(this.game, this, s);
                    break;
                case t.MAP_THEME.RANCH:
                    this.centerMap = new t.Ranch(this.game, this, s);
                    break;
                case t.MAP_THEME.TOY_STORE:
                    this.centerMap = new t.ToyStore(this.game, this, s);
                    break;
                case t.MAP_THEME.BAKERY:
                    this.centerMap = new t.Bakery(this.game, this, s);
                    break;
                case t.MAP_THEME.RACE_TRACK:
                    this.centerMap = new t.RaceTrack(this.game, this, s)
            }
            this.mapThemeSelected === t.MAP_THEME.RACE_TRACK ? this.rowsGroup[n - 1].add(this.centerMap) : this.rowsGroup[n].add(this.centerMap), this.mapThemeSelected === t.MAP_THEME.RACE_TRACK && (new t.RaceCar(this.game, this, this.redCarRoute, "red"), new t.RaceCar(this.game, this, this.whiteCarRoute, "white"))
        }, i.prototype.createSpecialTiles = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p;
            for (c = [], u = 0, i = 0; i < t.SETTINGS.GRID_HEIGHT; i++)
                for (e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                    if (this.gridData[e][i] === t.GRID_DATA.RACE_TRACK)(n = this.cells[e][i]).isForcedFreeCell = !0, s = new t.RaceTile(this.game, this, n, this.mapNumber);
                    else if (this.gridData[e][i] === t.GRID_DATA.LANDING_CELL)(n = this.cells[e][i]).isForcedFreeCell = !0, this.beachLandingCells.push(n);
            else if (this.gridData[e][i] === t.GRID_DATA.SPECIAL_TILE) switch (n = this.cells[e][i], n.cellContains = t.MAP.SPECIAL_TILE, n.isForcedFreeCell = !0, this.mapThemeSelected) {
                case t.MAP_THEME.BEACH:
                    n.isSpecialTile = !0, this.gridData[e - 1][i] === t.GRID_DATA.FORCE_FREE_CELL ? (a = this.cells[e - 1][i], o = this.cells[e + 1][i], this.astarGrid.grid[e - 1][i].weight = 0, this.astarGrid.grid[e + 1][i].weight = 0) : this.gridData[e][i - 1] === t.GRID_DATA.FORCE_FREE_CELL && (a = this.cells[e][i - 1], o = this.cells[e][i + 1], this.astarGrid.grid[e][i - 1].weight = 0, this.astarGrid.grid[e][i + 1].weight = 0), s = new t.Hammock(this.game, n.left, n.top, this, n, a, o);
                    break;
                case t.MAP_THEME.FOREST:
                    if (0 === this.mapNumber) switch (u) {
                        case 0:
                            r = "blue";
                            break;
                        case 1:
                            r = "yellow";
                            break;
                        case 2:
                        case 3:
                            r = "green";
                            break;
                        case 4:
                            r = "yellow";
                            break;
                        case 5:
                        default:
                            r = "blue"
                    } else if (1 === this.mapNumber) switch (u) {
                            case 0:
                                r = "yellow";
                                break;
                            case 1:
                            case 2:
                                r = "green";
                                break;
                            case 3:
                            default:
                                r = "yellow"
                        } else if (2 === this.mapNumber) switch (u) {
                            case 0:
                                r = "blue";
                                break;
                            case 1:
                                r = "yellow";
                                break;
                            case 2:
                            case 3:
                                r = "green";
                                break;
                            case 4:
                                r = "yellow";
                                break;
                            case 5:
                            default:
                                r = "blue"
                        }
                        s = new t.Portal(this.game, this, n, r), u++, c.push(s);
                    break;
                case t.MAP_THEME.RACE_TRACK:
                    if (0 === this.mapNumber) switch (u) {
                        case 0:
                            p = t.DIRECTION.RIGHT;
                            break;
                        case 1:
                        case 2:
                            p = t.DIRECTION.LEFT;
                            break;
                        case 3:
                        default:
                            p = t.DIRECTION.RIGHT
                    } else switch (u) {
                        case 0:
                            p = t.DIRECTION.LEFT;
                            break;
                        case 1:
                            p = t.DIRECTION.DOWN;
                            break;
                        case 2:
                            p = t.DIRECTION.UP;
                            break;
                        case 3:
                        default:
                            p = t.DIRECTION.RIGHT
                    }
                    s = new t.Booster(this.game, this, n, p), u++;
                    break;
                case t.MAP_THEME.RANCH:
                    d = new t.Horse(this.game, this, n), this.horses.push(d);
                    break;
                case t.MAP_THEME.TOY_STORE:
                    s = new t.Warning(this.game, this, n)
            }
            if (this.mapThemeSelected === t.MAP_THEME.FOREST)
                for (e = 0; e < c.length; e++)
                    for (h = c[e], i = 0; i < c.length; i++) l = c[i], "blue" === h.portalColor ? "blue" === h.portalColor && "blue" === l.portalColor && h !== l && (h.oppositePortal = l) : "green" === h.portalColor ? "green" === h.portalColor && "green" === l.portalColor && h !== l && (h.oppositePortal = l) : "yellow" === h.portalColor && "yellow" === h.portalColor && "yellow" === l.portalColor && h !== l && (h.oppositePortal = l)
        }, i.prototype.createStartingCells = function() {
            var e, i;
            for (e = 0; e < t.SETTINGS.GRID_HEIGHT; e++)
                for (i = 0; i < t.SETTINGS.GRID_WIDTH; i++) this.gridData[i][e] === t.GRID_DATA.PLAYER && (this.cells[i][e].isForcedFreeCell = !0, this.playersX.push(i), this.playersY.push(e), i - 1 >= 0 && (this.cells[i - 1][e].isForcedFreeCell = !0), i + 1 <= t.SETTINGS.GRID_WIDTH - 1 && (this.cells[i + 1][e].isForcedFreeCell = !0), e - 1 >= 0 && (this.cells[i][e - 1].isForcedFreeCell = !0), e + 1 <= t.SETTINGS.GRID_HEIGHT - 1 && (this.cells[i][e + 1].isForcedFreeCell = !0)), this.gridData[i][e] === t.GRID_DATA.FORCE_FREE_CELL && (this.cells[i][e].isForcedFreeCell = !0)
        }, i.prototype.createPlayers = function() {
            var e, i, s, n, a, o, r, h, l = [];
            for (l.push(this.cells[this.playersX[0]][this.playersY[0]]), l.push(this.cells[this.playersX[1]][this.playersY[1]]), l.push(this.cells[this.playersX[2]][this.playersY[2]]), l.push(this.cells[this.playersX[3]][this.playersY[3]]), h = (r = this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? 1 : 2) + this.totalEnemies, e = 0; e < r; e++) i = this.charactersChosen[e], a = this.obtainHeroName(i), s = new t.PlayerHuman(this.game, l[e].centerX, l[e].centerY, a, this, this.playersX[e], this.playersY[e], e, this.playerMode), this.players.push(s), this.rowsGroup[l[e].gridPositionY].add(s);
            for (; this.players.length < h;) o = this.players.length, a = this.obtainHeroName(this.charactersChosen[o]), n = new t.PlayerAI(this.game, l[o].centerX, l[o].centerY, a, this, this.playersX[o], this.playersY[o], o, this.difficulty), this.players.push(n), this.rowsGroup[l[o].gridPositionY].add(n);
            this.players[0].lives = t.Instances.DataManager.getLivesPlayer1(), this.playerMode === t.PLAYER_MODE.MULTI_PLAYER && (this.players[1].lives = t.Instances.DataManager.getLivesPlayer2())
        }, i.prototype.createSpawneableCells = function() {
            var e, i, s;
            for (this.spawneableCells = [], e = 1; e < t.SETTINGS.GRID_WIDTH - 1; e++)
                for (i = 1; i < t.SETTINGS.GRID_HEIGHT - 1; i++)(s = this.cells[e][i]).cellContains !== t.MAP.WALL && this.spawneableCells.push(s)
        }, i.prototype.obtainHeroName = function(t) {
            switch (t) {
                case 0:
                    return "gp_hero1";
                case 1:
                    return "gp_hero2";
                case 2:
                    return "gp_hero3";
                case 3:
                    return "gp_hero4";
                case 4:
                    return "gp_hero5";
                case 5:
                    return "gp_hero6";
                case 6:
                    return "gp_hero7";
                case 7:
                    return "gp_hero8"
            }
        }, i.prototype.createBoxes = function() {
            if (this.gameMode !== t.GAME_MODE.NEW_PACMAN && this.gameMode !== t.GAME_MODE.ICE_MAN) {
                var e, i, s, n, a, o;
                for (a = _.sample(this.possibleBlockers, 3), e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                    for (i = 0; i < t.SETTINGS.GRID_HEIGHT; i++)
                        if (this.cells[e][i].isEmpty && !this.cells[e][i].isForcedFreeCell) {
                            if (this.cells[e][i].isForcedFreeCell) return;
                            if (this.game.rnd.integerInRange(1, 100) > 30 && (n = this.cells[e][i], n.isEmpty = !1, n.cellContains = t.MAP.BLOCK, n.isBox = !0, o = a[this.game.rnd.integerInRange(0, 2)], s = new t.Box(this.game, n.x, n.y, o, this, n), this.astarGrid.grid[e][i].weight = 0, this.boxes.push(s), this.rowsGroup[i].add(s), ++this.blockersCreated >= this.blockersTotal)) return
                        }
            }
        }, i.prototype.obtainFreeCell = function() {
            var e, i, s;
            for (s = [], e = 0; e < this.spawneableCells.length; e++)(i = this.spawneableCells[e]).isEmpty && i.cellContains === t.MAP.FREE && s.push(i);
            return s.length <= 0 ? null : _.sample(s)
        }, i.prototype.createPowerUp = function(e) {
            if (this.gameStatus !== t.GAME_STATUS.GAME_OVER) {
                var i, s, n, a, o, r, h, l;
                if (i = this.game.rnd.integerInRange(0, 99), s = this.game.rnd.integerInRange(0, 99), "nothing" !== (a = this.onBlockDestroyChances[i].name)) {
                    if (this.gameMode === t.GAME_MODE.BATTLE_ROYALE) "hammer" === (r = this.weaponChances[s]).name && (r.name = "shield");
                    else if (this.gameMode === t.GAME_MODE.STAR_COLLECTOR) "ice_gun" === (r = this.weaponChances[s]).name && (r.name = "shield");
                    else switch (a) {
                        case "power_up":
                            r = this.powerupChances[s];
                            break;
                        case "weapon":
                            r = this.weaponChances[s];
                            break;
                        case "mount":
                            r = this.mountChances[s]
                    }
                    switch (r.name) {
                        case "bomb":
                            h = t.ITEM_TYPE.BOMB, n = "icon_bomb", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "power":
                            h = t.ITEM_TYPE.POWER, n = "icon_power_blast", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "speed":
                            h = t.ITEM_TYPE.SPEED, n = "icon_speed", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "shield":
                            h = t.ITEM_TYPE.SHIELD, n = "icon_shield", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "push":
                            h = t.ITEM_TYPE.KICK_BOMBS, n = "icon_super_gloves", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "invincibility":
                            h = t.ITEM_TYPE.INVINCIBILITY, n = "icon_invincibility", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "heart":
                            h = t.ITEM_TYPE.HEART, n = "icon_life", l = t.POWER_UP_TYPE.POWER_UP;
                            break;
                        case "flamethrower":
                            h = t.ITEM_TYPE.FLAMETHROWER, n = "icon_flamethrower", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "hammer":
                            h = t.ITEM_TYPE.HAMMER, n = "icon_hammer", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "laser_gun":
                            h = t.ITEM_TYPE.LASER_GUN, n = "icon_lightning_gun", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "ice_gun":
                            h = t.ITEM_TYPE.ICE_GUN, n = "icon_ice_gun", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "lightning_gun":
                            h = t.ITEM_TYPE.LIGHTING_GUN, n = "icon_laser_gun", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "doll_bomb":
                            h = t.ITEM_TYPE.DOLL_BOMB, n = "icon_doll_bomb", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "mighty_hammer":
                            h = t.ITEM_TYPE.MIGHTY_HAMMER, n = "icon_mighty_hammer", l = t.POWER_UP_TYPE.WEAPON;
                            break;
                        case "horse":
                            h = t.ITEM_TYPE.HORSE, n = "icon_horse", l = t.POWER_UP_TYPE.MOUNT;
                            break;
                        case "skate":
                            h = t.ITEM_TYPE.SKATEBOARD, n = "icon_skate", l = t.POWER_UP_TYPE.MOUNT;
                            break;
                        case "cart":
                            h = t.ITEM_TYPE.SHOPPING_CART, n = "icon_cart", l = t.POWER_UP_TYPE.MOUNT;
                            break;
                        case "stag":
                            h = t.ITEM_TYPE.STAG, n = "icon_stag", l = t.POWER_UP_TYPE.MOUNT;
                            break;
                        default:
                            return
                    }
                    o = new t.Item(this.game, e, n, h, l), e.cellContains = t.MAP.ITEM, e.isItem = !0, this.rowsGroup[e.gridPositionY].add(o), this.items.push(o)
                }
            }
        }, i.prototype.createRandomPacmanPowerUp = function() {
            if (!(this.pacmanPowerUps >= 4)) {
                var e, i, s, n, a, o, r;
                switch (i = this.game.rnd.integerInRange(0, 99), s = this.pacmanChances[i], e = this.obtainFreeCell(), s.name) {
                    case "speed":
                        a = t.ITEM_TYPE.SPEED, o = t.POWER_UP_TYPE.POWER_UP, r = "icon_speed";
                        break;
                    case "shield":
                        a = t.ITEM_TYPE.SHIELD, o = t.POWER_UP_TYPE.POWER_UP, r = "icon_shield";
                        break;
                    case "heart":
                        a = t.ITEM_TYPE.HEART, o = t.POWER_UP_TYPE.POWER_UP, r = "icon_life";
                        break;
                    case "invincibility":
                        a = t.ITEM_TYPE.INVINCIBILITY, o = t.POWER_UP_TYPE.POWER_UP, r = "icon_invincibility"
                }
                null !== e && (n = new t.Item(this.game, e, r, a, o), e.cellContains = t.MAP.ITEM, e.isItem = !0, this.rowsGroup[e.gridPositionY].add(n), this.items.push(n), this.pacmanPowerUps++)
            }
        }, i.prototype.createStar = function() {
            var e, i;
            null !== (i = this.obtainFreeCell()) && ((e = new t.Star(this.game, i, this)).canBePickedUp = !0, i.isStar = !0, i.cellContains = t.MAP.STAR, this.stars.push(e), this.rowsGroup[i.gridPositionY].add(e))
        }, i.prototype.createMonster = function() {
            var e, i;
            null !== (i = this.obtainFreeCell()) && (e = new t.Monster(this.game, this, i), this.monsters.push(e))
        }, i.prototype.addBomb = function(t, e) {
            this.bombs.push(t), this.rowsGroup[e.gridPositionY].add(t), this.astarGrid.grid[t.gridPositionX][t.gridPositionY].weight = 0
        }, i.prototype.removeBombFromArray = function(t) {
            var e;
            for (e = this.bombs.length - 1; e >= 0; e--) this.bombs[e].gridPositionX === t.gridPositionX && this.bombs[e].gridPositionY === t.gridPositionY && (this.bombs.splice(e, 1), e = -1);
            this.astarGrid.grid[t.gridPositionX][t.gridPositionY].weight = 1
        }, i.prototype.getItemAtCell = function(t) {
            var e;
            for (e = this.items.length - 1; e >= 0; e--)
                if (this.items[e].gridPositionX === t.gridPositionX && this.items[e].gridPositionY === t.gridPositionY) return this.items[e];
            return null
        }, i.prototype.coinPickedUp = function(e, i) {
            var s, n;
            for (s = this.coins.length - 1; s >= 0; s--)
                if ((n = this.coins[s]).canBePickedUp && n.gridPositionX === e.gridPositionX && n.gridPositionY === e.gridPositionY) return this.coins.splice(s, 1), i ? n.destroyAnimation() : n.destroyCoin(), e.cellContains = t.MAP.FREE, e.isCoin = !1, !0;
            return !1
        }, i.prototype.starPickedUp = function(e) {
            var i, s;
            for (i = this.stars.length - 1; i >= 0; i--)
                if ((s = this.stars[i]).canBePickedUp && s.gridPositionX === e.gridPositionX && s.gridPositionY === e.gridPositionY) return this.stars.splice(i, 1), s.destroy(), e.cellContains = t.MAP.FREE, e.isStar = !1, !0;
            return !1
        }, i.prototype.removeItemFromArray = function(e, i) {
            var s;
            for (s = this.items.length - 1; s >= 0; s--) this.items[s].gridPositionX === e.gridPositionX && this.items[s].gridPositionY === e.gridPositionY && (e.isEmpty = !0, e.isItem = !1, e.cellContains = t.MAP.FREE, i ? this.items[s].destroyItem() : this.items[s].destroyItemComplete(), this.items.splice(s, 1), s = -1, this.gameMode === t.GAME_MODE.NEW_PACMAN && this.pacmanPowerUps--)
        }, i.prototype.explodeBomb = function(t) {
            var e;
            for (this.clearAstarCell(t), e = this.bombs.length - 1; e >= 0; e--) this.bombs[e].gridPositionX === t.gridPositionX && this.bombs[e].gridPositionY === t.gridPositionY && (this.bombs[e].explode(), e = 0)
        }, i.prototype.destroyBox = function(t) {
            var e;
            for (this.clearAstarCell(t), e = this.boxes.length - 1; e >= 0; e--) this.boxes[e].gridPositionX === t.gridPositionX && this.boxes[e].gridPositionY === t.gridPositionY && (this.boxes[e].destroyBox(), this.boxes.splice(e, 1))
        }, i.prototype.destroyBombExplosion = function(t) {
            var e;
            for (e = this.bombExplosions.length - 1; e >= 0; e--) this.bombExplosions[e].gridPositionX === t.gridPositionX && this.bombExplosions[e].gridPositionY === t.gridPositionY && this.bombExplosions.splice(e, 1);
            for (e = this.bombExplosions.length - 1; e >= 0; e--) this.bombExplosions[e].gridPositionX === t.gridPositionX && this.bombExplosions[e].gridPositionY === t.gridPositionY && this.bombExplosions.splice(e, 1)
        }, i.prototype.clearAstarCell = function(t) {
            this.astarGrid.grid[t.gridPositionX][t.gridPositionY].weight = 1
        }, i.prototype.checkWeapons = function() {
            if (null !== this.weapons) {
                var t;
                for (t = this.weapons.length - 1; t >= 0; t--) this.weapons[t].alive || this.weapons.splice(t, 1)
            }
        }, i.prototype.startLightningShake = function() {
            var e, i;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .25, i = this.startingY + e, this.tweenLightningShake = this.game.add.tween(this).to({
                y: i
            }, 65, Phaser.Easing.Elastic.InOut, !0, 0, 2, !0), this.tweenLightningShake.onComplete.add(this.stopLightningShake, this)
        }, i.prototype.stopLightningShake = function() {
            null !== this.tweenLightningShake && (this.x = this.startingX, this.y = this.startingY)
        }, i.prototype.startHammerShake = function(e) {
            null !== this.tweenHammerShake && this.stopHammerShake(this.hammerShakePlayer);
            var i, s;
            i = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .25, s = this.startingY + i, this.hammerShakePlayer = e, this.tweenHammerShake = this.game.add.tween(this).to({
                y: s
            }, 65, Phaser.Easing.Elastic.InOut, !0, 0, -1, !0)
        }, i.prototype.stopHammerShake = function(t) {
            null !== this.tweenHammerShake && (this.hammerShakePlayer === t && this.tweenHammerShake.stop(), this.x = this.startingX, this.y = this.startingY)
        }, i.prototype.gameOver = function() {
            var e;
            for (this.gameStatus = t.GAME_STATUS.GAME_OVER, e = 0; e < this.players.length; e++) this.players[e].gameOver();
            for (e = 0; e < this.bombs.length; e++) this.bombs[e].gameStatus = t.GAME_STATUS.GAME_OVER;
            for (e = 0; e < this.bombExplosions.length; e++) this.bombExplosions[e].gameStatus = t.GAME_STATUS.GAME_OVER;
            for (e = 0; e < this.weapons.length; e++) this.weapons[e].gameStatus = t.GAME_STATUS.GAME_OVER;
            null !== this.centerMap && (this.centerMap.gameStatus = t.GAME_STATUS.GAME_OVER), null !== this.tweenHammerShake && this.tweenHammerShake.pause()
        }, i.prototype.pauseGrid = function() {
            var e;
            for (this.game.ph2AnimationManager.pauseAll(), this.gameStatus = t.GAME_STATUS.PAUSED, e = 0; e < this.players.length; e++) this.players[e].pausePlayer();
            for (e = 0; e < this.bombs.length; e++) this.bombs[e].pauseBomb();
            for (e = 0; e < this.bombExplosions.length; e++) this.bombExplosions[e].gameStatus = this.gameStatus;
            for (e = 0; e < this.items.length; e++) this.items[e].animationPowerUp.ph2Animations.pause();
            for (e = 0; e < this.weapons.length; e++) this.weapons[e].gameStatus = t.GAME_STATUS.PAUSED;
            null !== this.centerMap && this.centerMap.animationCenter.ph2Animations.pause(), null !== this.tweenHammerShake && this.tweenHammerShake.pause()
        }, i.prototype.resumeGrid = function() {
            var e;
            for (this.gameStatus = t.GAME_STATUS.PLAYING, this.game.ph2AnimationManager.resumeAll(), e = 0; e < this.players.length; e++) this.players[e].resumePlayer();
            for (e = 0; e < this.bombs.length; e++) this.bombs[e].resumeBomb();
            for (e = 0; e < this.bombExplosions.length; e++) this.bombExplosions[e].gameStatus = this.gameStatus;
            for (e = 0; e < this.items.length; e++) this.items[e].animationPowerUp.ph2Animations.resume();
            for (e = 0; e < this.weapons.length; e++) this.weapons[e].gameStatus = t.GAME_STATUS.PLAYING;
            null !== this.centerMap && this.centerMap.animationCenter.ph2Animations.resume(), null !== this.tweenHammerShake && this.tweenHammerShake.resume()
        }, i.prototype.createPacmanPowerUps = function() {
            this.gameStatus !== t.GAME_STATUS.PAUSED && this.gameStatus !== t.GAME_STATUS.GAME_OVER && (this.timerPacman += this.game.time.elapsedMS, this.timerPacman >= 5e3 && (this.timerPacman = 0, this.pacmanPowerUps < 4 && this.createRandomPacmanPowerUp()))
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.checkWeapons(), this.gameMode === t.GAME_MODE.NEW_PACMAN && this.createPacmanPowerUps(), this.difficulty === t.DIFFICULTY.HARD && this.playerMode === t.PLAYER_MODE.SINGLE_PLAYER && this.hardDarkness.updateVisionRadius(this.players[0].x, this.players[0].y)
        }, i.prototype.shutdownGrid = function() {
            var t;
            for (this.game.ph2AnimationManager.stopAll(), t = this.boxes.length - 1; t >= 0; t--) this.boxes[t].stopAnimations();
            this.tileGroup.destroy(!0), this.mainGroup.destroy(!0), this.joystickGroup.destroy(!0), this.cells = null, this.players = null, this.bombs = null, this.boxes = null, this.items = null, this.weapons = null, this.bombExplosions = null, this.astarGrid = null, this.initialX = null, this.initialY = null, this.tileGroup = null, this.mainGroup = null, this.joystickGroup = null, this.gridData = null, this.playersX = null, this.playersY = null, this.blockersTotal = null, this.blockersCreated = null, this.chosenTile = null, this.chosenWalls = null, this.possibleBlockers = null, this.possibleWalls = null, this.possibleTiles = null, this.centerName = null, this.centerMapPositionX = null, this.centerMapPositionY = null, this.weaponChances = null, this.powerupChances = null, this.gameScale = null
        }, i.prototype.cheatDestroy = function() {
            var t;
            for (t = this.boxes.length - 1; t >= 0; t--) this.destroyBox(this.boxes[t].gridCell)
        }, i
    }(Phaser.Group);
    t.Grid = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        return function(e, i, s, n, a, o) {
            this.x = i, this.y = s, this.top = this.y, this.bottom = this.y + t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, this.left = this.x, this.right = this.x + t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE, this.game = e, this.gridPositionX = a, this.gridPositionY = o, this.centerX = this.x + .5 * t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE, this.centerY = this.y + .5 * t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, this.isEmpty = !0, this.isDangerCell = !1, this.isForcedFreeCell = !1, this.isSpecialTile = !1, this.isItem = !1, this.isBox = !1, this.isFlag = !1, this.isCoin = !1, this.isStunCell = !1, this.isPortal = !1, this.isWarningClaw = !1, this.isStar = !1, this.cellContains = t.MAP.FREE, this.dangerWeapon = !1, this.dangerOwner = null, this.cream = null, this.hammock = null, this.portal = null, this.warningClaw = null
        }
    }();
    t.GridCell = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n) {
            var a, o, r = this,
                h = i.add.bitmapData(s, n);
            return a = -t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, o = -t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE - 20 * t.SETTINGS.SCALE, r = e.call(this, i, a, o, h) || this, r.game = i, r.lightRadius = 600 * t.SETTINGS.SCALE, r.screenWidth = s, r.screenHeight = n, r.shadowTexture = h, r.blendMode = PIXI.blendModes.MULTIPLY, r
        }
        return __extends(i, e), i.prototype.updateVisionRadius = function(t, e) {
            var i;
            this.shadowTexture.context.fillStyle = "rgb(5,5,5)", this.shadowTexture.context.fillRect(0, 0, this.screenWidth, this.screenHeight), (i = this.shadowTexture.context.createRadialGradient(t, e, .25 * this.lightRadius, t, e, this.lightRadius)).addColorStop(0, "rgba(255, 255, 255, 1.0)"), i.addColorStop(1, "rgba(255, 255, 255, 0.0)"), this.shadowTexture.context.beginPath(), this.shadowTexture.context.fillStyle = i, this.shadowTexture.context.arc(t, e, this.lightRadius, 0, 2 * Math.PI), this.shadowTexture.context.fill(), this.shadowTexture.dirty = !0
        }, i
    }(Phaser.Sprite);
    t.HardDarkness = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n) {
            var a = e.call(this, i) || this;
            return a.game = i, a.grid = s, a.gridCell = n, a.gridCell.isStunCell = !0, a.gridPositionX = n.gridPositionX, a.gridPositionY = n.gridPositionY, a.x = n.centerX, a.y = n.centerY, a.movingSpeed = .15, a.gameStatus = t.GAME_STATUS.PLAYING, a.gameScale = t.SETTINGS.SCALE, a.isMoving = !1, a.timerToMove = 0, a.delayToMove = 750, a.createHorseAnimation(), a.chooseNextDirection(), a
        }
        return __extends(i, e), i.prototype.createHorseAnimation = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.horseAnimation = this.game.add.ph2AnimationObject(0, e, "horse", "atlas_anim"), this.addChild(this.horseAnimation), this.grid.rowsGroup[this.gridPositionY].add(this)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.PAUSED && this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && (this.isMoving ? this.checkMovement() : this.checkTimer())
        }, i.prototype.checkTimer = function() {
            this.timerToMove += this.game.time.elapsedMS, this.timerToMove >= this.delayToMove && (this.timerToMove = 0, this.isMoving = !0)
        }, i.prototype.checkMovement = function() {
            var e, i, s;
            switch (this.direction) {
                case t.DIRECTION.LEFT:
                    this.moveHorseLeft(), e = this.gridPositionX - 1, i = this.gridPositionY, s = this.gridPositionX - 1 <= 0 ? this.grid.cells[0][i] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_WIDTH && this.updateHorseCell(s);
                    break;
                case t.DIRECTION.RIGHT:
                    this.moveHorseRight(), e = this.gridPositionX + 1, i = this.gridPositionY, s = this.gridPositionX + 1 >= t.SETTINGS.GRID_WIDTH - 1 ? this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][i] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_WIDTH && this.updateHorseCell(s);
                    break;
                case t.DIRECTION.UP:
                    this.moveHorseUp(), e = this.gridPositionX, i = this.gridPositionY - 1, s = this.gridPositionY - 1 <= 0 ? this.grid.cells[e][0] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_HEIGHT && this.updateHorseCell(s);
                    break;
                case t.DIRECTION.DOWN:
                    this.moveHorseDown(), e = this.gridPositionX, i = this.gridPositionY + 1, s = this.gridPositionY + 1 >= t.SETTINGS.GRID_HEIGHT - 1 ? this.grid.cells[e][t.SETTINGS.GRID_HEIGHT - 1] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_HEIGHT && this.updateHorseCell(s)
            }
        }, i.prototype.updateHorseCell = function(t) {
            this.gridCell.isStunCell = !1, this.gridPositionX = t.gridPositionX, this.gridPositionY = t.gridPositionY, this.gridCell = t, this.gridCell.isStunCell = !0, this.grid.rowsGroup[this.gridPositionY].add(this)
        }, i.prototype.moveHorseLeft = function() {
            var e, i;
            e = this.grid.cells[0][this.gridPositionY], this.x <= e.centerX ? this.chooseNextDirection() : 0 !== this.gridPositionX && !(e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY]).isEmpty && this.x - .5 * t.SETTINGS.CELL_WIDTH * this.gameScale <= e.right ? this.chooseNextDirection() : (i = this.x - this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionX - 1 >= 0 ? i >= this.grid.cells[this.gridPositionX - 1][this.gridPositionY].centerX && (this.x -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : i >= this.grid.cells[0][this.gridPositionY].left && (this.x -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS))
        }, i.prototype.moveHorseRight = function() {
            var e, i;
            e = this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY], this.x >= e.centerX ? this.chooseNextDirection() : this.gridPositionX !== t.SETTINGS.GRID_WIDTH - 1 && !(e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY]).isEmpty && this.x + .5 * t.SETTINGS.CELL_WIDTH * this.gameScale >= e.left ? this.chooseNextDirection() : (i = this.x + this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionX + 1 <= t.SETTINGS.GRID_WIDTH - 1 ? i <= this.grid.cells[this.gridPositionX + 1][this.gridPositionY].centerX && (this.x += this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : i <= this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY].right && (this.x += this.movingSpeed * this.gameScale * this.game.time.elapsedMS))
        }, i.prototype.moveHorseUp = function() {
            var e, i;
            e = this.grid.cells[this.gridPositionX][0], this.y <= e.centerY ? this.chooseNextDirection() : 0 !== this.gridPositionY && !(e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1]).isEmpty && this.y - .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale <= e.bottom ? this.chooseNextDirection() : (i = this.y - this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionY - 1 >= 0 ? i >= this.grid.cells[this.gridPositionX][this.gridPositionY - 1].centerY && (this.y -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : i >= this.grid.cells[this.gridPositionX][0].top && (this.y -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS))
        }, i.prototype.moveHorseDown = function() {
            var e, i;
            e = this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1], this.y >= e.centerY ? this.chooseNextDirection() : this.gridPositionY !== t.SETTINGS.GRID_HEIGHT - 1 && !(e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1]).isEmpty && this.y + .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale >= e.top ? this.chooseNextDirection() : (i = this.y + this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionY + 1 <= t.SETTINGS.GRID_HEIGHT - 1 ? i <= this.grid.cells[this.gridPositionX][this.gridPositionY + 1].centerY && (this.y += this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : i <= this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1].bottom && (this.y += this.movingSpeed * this.gameScale * this.game.time.elapsedMS))
        }, i.prototype.chooseNextDirection = function() {
            var e, i, s, n, a;
            if (n = [], 0 !== this.gridPositionY && ((i = this.grid.cells[this.gridPositionX][this.gridPositionY - 1]).isEmpty || i.cellContains === t.MAP.FREE) && n.push(t.DIRECTION.UP), this.gridPositionY !== t.SETTINGS.GRID_HEIGHT - 1 && ((i = this.grid.cells[this.gridPositionX][this.gridPositionY + 1]).isEmpty || i.cellContains === t.MAP.FREE) && n.push(t.DIRECTION.DOWN), 0 !== this.gridPositionX && ((i = this.grid.cells[this.gridPositionX - 1][this.gridPositionY]).isEmpty || i.cellContains === t.MAP.FREE) && n.push(t.DIRECTION.LEFT), this.gridPositionX !== t.SETTINGS.GRID_WIDTH - 1 && ((i = this.grid.cells[this.gridPositionX + 1][this.gridPositionY]).isEmpty || i.cellContains === t.MAP.FREE) && n.push(t.DIRECTION.RIGHT), n.length > 0) {
                switch (s = this.game.rnd.integerInRange(0, n.length - 1), this.direction = n[s], this.direction) {
                    case t.DIRECTION.UP:
                        a = "horse_run_back", e = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        a = "horse_run_front", e = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        a = "horse_run_side", e = 1;
                        break;
                    case t.DIRECTION.RIGHT:
                        a = "horse_run_side", e = -1;
                        break;
                    default:
                        a = "horse_run_back", e = 1
                }
                this.horseAnimation.scaleX = e, this.horseAnimation.ph2Animations.play(a, 1, !0)
            }
        }, i
    }(Phaser.Group);
    t.Horse = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a) {
            var o = e.call(this, t) || this;
            return o.x = i.centerX, o.y = i.centerY, o.game = t, o.gridCell = i, o.itemType = n, o.powerUpType = a, o.gridPositionX = i.gridPositionX, o.gridPositionY = i.gridPositionY, o.createAnimations(s), o
        }
        return __extends(i, e), i.prototype.createAnimations = function(e) {
            var i;
            i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationPowerUp = this.game.add.ph2AnimationObject(0, i, e, "atlas_anim"), this.animationPowerUp.ph2Animations.play("icon_anim", 1, !0), this.add(this.animationPowerUp), this.animationExplosion = this.game.add.ph2AnimationObject(0, 0, "brick_explosion", "atlas_anim"), this.animationExplosion.visible = !1, this.add(this.animationExplosion)
        }, i.prototype.destroyItem = function() {
            var t = this;
            this.animationPowerUp.visible = !1, this.animationExplosion.visible = !0, this.animationExplosion.ph2Animations.play("brick_explosion_anim", 1, !1).onComplete.add(function() {
                t.destroyItemComplete()
            }, this)
        }, i.prototype.destroyItemComplete = function() {
            this.animationPowerUp.ph2Animations.stop(), this.animationExplosion.ph2Animations.stop(), this.destroy(!0)
        }, i
    }(Phaser.Group);
    t.Item = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e) || this;
            return n.grid = i, n.gridCell = s, n
        }
        return __extends(e, t), e.prototype.update = function() {
            t.prototype.update.call(this)
        }, e.prototype.destroyCenter = function() {
            this.animationCenter.ph2Animations.stop(), this.animationCenter.destroy()
        }, e
    }(Phaser.Group);
    t.MapCenter = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function e(e, i, s, n, a, o, r, h) {
            switch (this.game = e, this.id = i, this.reward = n, this.requirement = s, this.name = h, this.timer = a, this.levels = o, this.avoid = r, this.failed = !1, this.progress = 0, this.levelsPassed = 0, this.active = !1, this.complete = !1, this.startCountdown = !1, this.hasLevels = o > 0, this.hasTimer = a > 0, this.progressArray = [], i) {
                case t.MISSION.FIGHT_IN_ALL_ARENAS_IN_ARCADE_MODE:
                case t.MISSION.FIGHT_IN_ALL_ARENAS_IN_BATTLE_ROYALE_MODE:
                case t.MISSION.FIGHT_IN_ALL_ARENAS_IN_PACMAN_MODE:
                case t.MISSION.FIGHT_IN_ALL_ARENAS_IN_STAR_BATTLE_MODE:
                case t.MISSION.FIGHT_IN_ALL_ARENAS_IN_FREEZE_MODE:
                    this.missionMapPlayed = !0;
                    break;
                default:
                    this.missionMapPlayed = !1
            }
            switch (i) {
                case t.MISSION.USE_4_TYPE_OF_WEAPONS_IN_LEVEL:
                case t.MISSION.USE_4_TYPES_OF_WEAPONS_IN_1_LEVEL_IN_ARCADE:
                case t.MISSION.USE_ALL_THE_WEAPONS:
                    this.missionWeaponUsage = !0;
                    break;
                default:
                    this.missionWeaponUsage = !1
            }
            switch (i) {
                case t.MISSION.RIDE_2_KINDS_OF_VEHICLES_IN_1_LEVEL:
                    this.missionMountUsage = !0;
                    break;
                default:
                    this.missionMountUsage = !1
            }
            i === t.MISSION.PLAY_ALL_MODES && (this.missionModesPlayed = !0)
        }
        return e.prototype.checkMissionProgress = function(t) {
            this.missionMapPlayed ? this.checkMapsPlayed(t) : this.missionModesPlayed ? this.checkModesPlayed(t) : this.missionMountUsage ? this.checkMountsUsed(t) : this.missionWeaponUsage ? this.checkWeaponsUsed(t) : this.hasTimer ? this.checkTimerMissions() : this.checkNormalMissions()
        }, e.prototype.checkNormalMissions = function() {
            ++this.progress >= this.requirement && (this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this))
        }, e.prototype.checkTimerMissions = function() {
            this.id !== t.MISSION.CLEAR_LEVEL_IN_120_SECONDS_IN_FROZEN && this.id !== t.MISSION.CLEAR_LEVEL_BATTLE_ROYALE_120_SECONDS && this.id !== t.MISSION.CLEAR_LEVEL_ARCADE_IN_120_SECONDS && this.id !== t.MISSION.CLEAR_LEVEL_STAR_COLLECTOR_120_SECONDS && this.id !== t.MISSION.CLEAR_LEVEL_IN_PACMAN_IN_120_SECONDS ? this.progress++ : this.startCountdown && this.progress++, this.hasTimer && !this.startCountdown && (this.startCountdown = !0, this.timeStarted = this.game.time.now), this.progress >= this.requirement && (this.timeEnded = this.game.time.now, this.timeEnded - this.timeStarted <= this.timer ? (this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this)) : (this.complete = !1, this.startCountdown = !1, this.progress = 0, this.timeStarted = 0, this.timeEnded = 0))
        }, e.prototype.checkModesPlayed = function(t) {
            var e, i;
            for (i = !1, e = 0; e < this.progressArray.length; e++) t === this.progressArray[e] && (i = !0);
            i || this.progressArray.push(t), this.progressArray.length >= 5 && (this.progress++, this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this))
        }, e.prototype.checkMountsUsed = function(t) {
            var e, i;
            for (i = !1, e = 0; e < this.progressArray.length; e++) t === this.progressArray[e] && (i = !0);
            i || this.progressArray.push(t), this.progressArray.length >= 4 && (this.progress++, this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this))
        }, e.prototype.checkMapsPlayed = function(t) {
            var e, i;
            for (i = !1, e = 0; e < this.progressArray.length; e++) t === this.progressArray[e] && (i = !0);
            i || this.progressArray.push(t), this.progressArray.length >= 9 && (this.progress++, this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this))
        }, e.prototype.checkWeaponsUsed = function(e) {
            var i, s;
            for (s = !1, i = 0; i < this.progressArray.length; i++) e === this.progressArray[i] && (s = !0);
            s || (this.progress++, this.progressArray.push(e)), this.id === t.MISSION.USE_4_TYPES_OF_WEAPONS_IN_1_LEVEL_IN_ARCADE || this.id === t.MISSION.USE_4_TYPE_OF_WEAPONS_IN_LEVEL ? this.progress >= 4 && (this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this)) : this.id === t.MISSION.USE_ALL_THE_WEAPONS && this.progress >= 7 && (this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this))
        }, e.prototype.avoidMissionFailed = function() {
            this.failed = !0, this.restartMission()
        }, e.prototype.checkAvoidMissionProgress = function() {
            this.failed ? this.failed = !1 : ++this.progress >= this.requirement && (this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this))
        }, e.prototype.restartMission = function() {
            this.progress = 0, this.levelsPassed = 0, this.active = !1, this.complete = !1, this.startCountdown = !1, this.progressArray = [], this.timeStarted = 0, this.timeEnded = 0
        }, e.prototype.completeMissionWithCheats = function() {
            this.progress = this.requirement, this.complete = !0, this.game.ph2NotificationManager.postNotification("_SHOW_MISSION_COMPLETE", this)
        }, e
    }();
    t.Mission = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e) || this;
            return n.grid = i, n.player = s, n.speed = 0, n.destroyed = !1, n.destroyTimer = 0, n.tweenMountLose = null, n
        }
        return __extends(e, t), e.prototype.update = function() {
            t.prototype.update.call(this)
        }, e.prototype.initiateDestruction = function() {
            this.destroyed = !0, this.tweenMountLose = this.game.add.tween(this).to({
                alpha: .5
            }, 500, "Linear", !0, 0, -1, !0)
        }, e
    }(Phaser.Group);
    t.Mount = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n) {
            var a = e.call(this, i) || this;
            switch (a.game = i, a.grid = s, a.gridCell = n, a.gridPositionX = n.gridPositionX, a.gridPositionY = n.gridPositionY, a.x = n.centerX, a.y = n.centerY, a.frozen = !1, a.idle = !0, a.moving = !1, a.notSafe = !1, a.awaitingNewAction = !0, a.speed = .05, a.idleTimer = 0, a.currentPathCell = 0, a.freeCells = [], a.pathCells = [], a.previousCellX = 0, a.previousCellY = 0, a.frozenTimer = 0, a.frozenBy = null, a.game.rnd.integerInRange(0, 3)) {
                case 0:
                    a.direction = t.DIRECTION.UP;
                    break;
                case 1:
                    a.direction = t.DIRECTION.DOWN;
                    break;
                case 2:
                    a.direction = t.DIRECTION.LEFT;
                    break;
                case 3:
                    a.direction = t.DIRECTION.RIGHT;
                    break;
                default:
                    a.direction = t.DIRECTION.UP
            }
            return a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e, i, s;
            switch (s = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.direction) {
                case t.DIRECTION.UP:
                    e = "monster_back_stand", i = 1;
                    break;
                case t.DIRECTION.DOWN:
                    e = "monster_front_stand", i = 1;
                    break;
                case t.DIRECTION.LEFT:
                    e = "monster_side_stand", i = -1;
                    break;
                case t.DIRECTION.RIGHT:
                    e = "monster_side_stand", i = 1;
                    break;
                default:
                    e = "monster_front_stand", i = 1
            }
            this.animationMonster = this.game.add.ph2AnimationObject(0, s, "monster", "atlas_anim"), this.animationMonster.ph2Animations.play(e, 1, !0), this.animationMonster.scaleX = i, this.grid.rowsGroup[this.gridPositionY].add(this), this.add(this.animationMonster)
        }, i.prototype.restartAI = function() {
            this.idle = !1, this.notSafe = !1, this.moving = !1, this.awaitingNewAction = !0, this.idleTimer = 0, this.currentPathCell = 0, this.freeCells = [], this.pathCells = []
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED && (this.checkFrozen(), this.updateIdle(), this.updateMovement(), this.updateSense(), this.checkAnimation(), this.updateState(), this.checkDangerZone())
        }, i.prototype.checkAnimation = function() {
            if (!this.frozen) switch (this.direction) {
                case t.DIRECTION.UP:
                    this.currentState = t.MONSTER_STATE.STAND_BACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.currentState = t.MONSTER_STATE.STAND_FRONT;
                    break;
                case t.DIRECTION.LEFT:
                    this.currentState = t.MONSTER_STATE.STAND_LEFT;
                    break;
                case t.DIRECTION.RIGHT:
                    this.currentState = t.MONSTER_STATE.STAND_RIGHT;
                    break;
                default:
                    this.currentState = t.MONSTER_STATE.STAND_FRONT
            }
        }, i.prototype.checkFrozen = function() {
            this.frozen && (this.frozenTimer += this.game.time.elapsedMS, this.frozenTimer >= 1e4 && this.unfrozeMonster())
        }, i.prototype.updateState = function() {
            switch (this.currentState) {
                case t.MONSTER_STATE.STAND_FRONT:
                    this.animationState !== t.MONSTER_STATE.STAND_FRONT && (this.animationState = t.MONSTER_STATE.STAND_FRONT, this.animationMonster.ph2Animations.play("monster_front_stand", 1, !0), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.STAND_BACK:
                    this.animationState !== t.MONSTER_STATE.STAND_BACK && (this.animationState = t.MONSTER_STATE.STAND_BACK, this.animationMonster.ph2Animations.play("monster_back_stand", 1, !0), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.STAND_LEFT:
                    this.animationState !== t.MONSTER_STATE.STAND_LEFT && (this.animationState = t.MONSTER_STATE.STAND_LEFT, this.animationMonster.ph2Animations.play("monster_side_stand", 1, !0), this.animationMonster.scaleX = -1);
                    break;
                case t.MONSTER_STATE.STAND_RIGHT:
                    this.animationState !== t.MONSTER_STATE.STAND_RIGHT && (this.animationState = t.MONSTER_STATE.STAND_RIGHT, this.animationMonster.ph2Animations.play("monster_side_stand", 1, !0), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.FROZEN_FRONT:
                    this.animationState !== t.MONSTER_STATE.FROZEN_FRONT && (this.animationState = t.MONSTER_STATE.FROZEN_FRONT, this.animationMonster.ph2Animations.play("monster_front_frozen", 1, !1), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.FROZEN_BACK:
                    this.animationState !== t.MONSTER_STATE.FROZEN_BACK && (this.animationState = t.MONSTER_STATE.FROZEN_BACK, this.animationMonster.ph2Animations.play("monster_back_frozen", 1, !1), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.FROZEN_LEFT:
                    this.animationState !== t.MONSTER_STATE.FROZEN_LEFT && (this.animationState = t.MONSTER_STATE.FROZEN_LEFT, this.animationMonster.ph2Animations.play("monster_side_frozen", 1, !1), this.animationMonster.scaleX = -1);
                    break;
                case t.MONSTER_STATE.FROZEN_RIGHT:
                    this.animationState !== t.MONSTER_STATE.FROZEN_RIGHT && (this.animationState = t.MONSTER_STATE.FROZEN_RIGHT, this.animationMonster.ph2Animations.play("monster_side_frozen", 1, !1), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.UNFROZEN_FRONT:
                    this.animationState !== t.MONSTER_STATE.UNFROZEN_FRONT && (this.animationState = t.MONSTER_STATE.UNFROZEN_FRONT, this.animationMonster.ph2Animations.play("monster_front_unfrozen", 1, !1), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.UNFROZEN_BACK:
                    this.animationState !== t.MONSTER_STATE.UNFROZEN_BACK && (this.animationState = t.MONSTER_STATE.UNFROZEN_BACK, this.animationMonster.ph2Animations.play("monster_back_unfrozen", 1, !1), this.animationMonster.scaleX = 1);
                    break;
                case t.MONSTER_STATE.UNFROZEN_LEFT:
                    this.animationState !== t.MONSTER_STATE.UNFROZEN_LEFT && (this.animationState = t.MONSTER_STATE.UNFROZEN_LEFT, this.animationMonster.ph2Animations.play("monster_side_unfrozen", 1, !1), this.animationMonster.scaleX = -1);
                    break;
                case t.MONSTER_STATE.UNFROZEN_RIGHT:
                    this.animationState !== t.MONSTER_STATE.UNFROZEN_RIGHT && (this.animationState = t.MONSTER_STATE.UNFROZEN_RIGHT, this.animationMonster.ph2Animations.play("monster_side_unfrozen", 1, !1), this.animationMonster.scaleX = 1)
            }
        }, i.prototype.postUpdate = function() {
            this.checkActualGridLocation()
        }, i.prototype.updateIdle = function() {
            this.idle && (this.idleTimer += this.game.time.elapsedMS, this.idleTimer >= 100 && (this.idle = !1, this.idleTimer = 0))
        }, i.prototype.updateMovement = function() {
            this.moving ? this.checkSafeMovement() : (this.chooseCellToMove(), this.findFreeCells(), this.findClearPath())
        }, i.prototype.updateSense = function() {
            this.checkFreeCells()
        }, i.prototype.checkFreeCells = function() {
            var e;
            this.freeCells = [], this.gridPositionX > 0 && (e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY]).isEmpty && this.freeCells.push(e), this.gridPositionX < t.SETTINGS.GRID_WIDTH - 1 && (e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY]).isEmpty && this.freeCells.push(e), this.gridPositionY > 0 && (e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1]).isEmpty && this.freeCells.push(e), this.gridPositionY < t.SETTINGS.GRID_HEIGHT - 1 && (e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1]).isEmpty && this.freeCells.push(e)
        }, i.prototype.findFreeCells = function() {
            var e, i, s, n, a, o;
            for (this.freeCells = [], s = this.gridPositionX - 1 < 0 ? 0 : this.gridPositionX - 1, n = this.gridPositionX + 1 > t.SETTINGS.GRID_WIDTH - 1 ? t.SETTINGS.GRID_WIDTH - 1 : this.gridPositionX + 1, a = this.gridPositionY - 1 < 0 ? 0 : this.gridPositionY - 1, o = this.gridPositionY + 1 > t.SETTINGS.GRID_HEIGHT - 1 ? t.SETTINGS.GRID_HEIGHT - 1 : this.gridPositionY + 1, e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                for (i = a; i < o + 1; i++) this.grid.cells[e][i].isEmpty && this.freeCells.push(this.grid.cells[e][i]);
            for (e = 0; e < this.grid.cells[this.gridPositionX].length; e++)
                for (i = s; i < n + 1; i++) this.grid.cells[i][e].isEmpty && this.freeCells.push(this.grid.cells[i][e])
        }, i.prototype.findClearPath = function() {
            var t, e, i, s, n, a, o = 999;
            if (s = [], a = [], e = this.grid.astarGrid.grid[this.gridPositionX][this.gridPositionY], this.notSafe)
                for (t = 0; t < this.freeCells.length; t++) n = this.freeCells[t], i = this.grid.astarGrid.grid[n.gridPositionX][n.gridPositionY], (s = astar.search(this.grid.astarGrid, e, i)).length > 0 && s.length < o && (a = s, o = s.length);
            else {
                if (this.freeCells.length <= 0) return void this.restartAI();
                n = _.sample(this.freeCells), i = this.grid.astarGrid.grid[n.gridPositionX][n.gridPositionY], a = astar.search(this.grid.astarGrid, e, i)
            }
            for (this.pathCells = [], t = 0; t < a.length; t++) this.pathCells.push(this.grid.cells[a[t].x][a[t].y]);
            this.pathCells.length > 0 && (this.moving = !0, this.currentPathCell = 0, this.previousCell = this.gridCell, this.safeCell = this.pathCells[this.currentPathCell], this.nextSafeDirection(this.gridPositionX, this.gridPositionY, this.safeCell))
        }, i.prototype.chooseCellToMove = function() {
            var e, i, s;
            for (i = [], e = 0; e < this.freeCells.length; e++) i.push(this.freeCells[e]);
            i.length > 0 ? (s = this.game.rnd.integerInRange(0, i.length - 1), this.destinationCell = i[s], this.notSafe = !1, this.awaitingNewAction = !1, this.gridPositionX - 1 === this.destinationCell.gridPositionX ? this.direction = t.DIRECTION.LEFT : this.gridPositionX + 1 === this.destinationCell.gridPositionX ? this.direction = t.DIRECTION.RIGHT : this.gridPositionY - 1 === this.destinationCell.gridPositionY ? this.direction = t.DIRECTION.UP : this.gridPositionY + 1 === this.destinationCell.gridPositionY && (this.direction = t.DIRECTION.DOWN)) : this.notSafe = !0
        }, i.prototype.canPressButtons = function() {
            if (this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED && !this.frozen) switch (this.safeDirection) {
                case t.DIRECTION.UP:
                    this.inputUpPressed();
                    break;
                case t.DIRECTION.DOWN:
                    this.inputDownPressed();
                    break;
                case t.DIRECTION.LEFT:
                    this.inputLeftPressed();
                    break;
                case t.DIRECTION.RIGHT:
                    this.inputRightPressed()
            }
        }, i.prototype.inputLeftPressed = function() {
            var e;
            this.direction = t.DIRECTION.LEFT, e = this.x - this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS, this.gridPositionX - 1 >= 0 ? e >= this.grid.cells[this.gridPositionX - 1][this.gridPositionY].centerX && this.moveMonsterLeft() : e >= this.grid.cells[0][this.gridPositionY].left && this.moveMonsterLeft(), this.y = this.grid.cells[this.gridPositionX][this.gridPositionY].centerY
        }, i.prototype.inputRightPressed = function() {
            var e;
            this.direction = t.DIRECTION.RIGHT, e = this.x + this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS, this.gridPositionX + 1 <= t.SETTINGS.GRID_WIDTH - 1 ? e <= this.grid.cells[this.gridPositionX + 1][this.gridPositionY].centerX && this.moveMonsterRight() : e <= this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY].right && this.moveMonsterRight(), this.y = this.grid.cells[this.gridPositionX][this.gridPositionY].centerY
        }, i.prototype.inputUpPressed = function() {
            var e;
            this.direction = t.DIRECTION.UP, e = this.y - this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS, this.gridPositionY - 1 >= 0 ? e >= this.grid.cells[this.gridPositionX][this.gridPositionY - 1].centerY && this.moveMonsterUp() : e >= this.grid.cells[this.gridPositionX][0].top && this.moveMonsterUp(), this.x = this.grid.cells[this.gridPositionX][this.gridPositionY].centerX
        }, i.prototype.inputDownPressed = function() {
            var e;
            this.direction = t.DIRECTION.DOWN, e = this.y + this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS, this.gridPositionY + 1 <= t.SETTINGS.GRID_HEIGHT - 1 ? e <= this.grid.cells[this.gridPositionX][this.gridPositionY + 1].centerY && this.moveMonsterDown() : e <= this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1].bottom && this.moveMonsterDown(), this.x = this.grid.cells[this.gridPositionX][this.gridPositionY].centerX
        }, i.prototype.moveMonsterLeft = function() {
            this.x -= this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS
        }, i.prototype.moveMonsterRight = function() {
            this.x += this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS
        }, i.prototype.moveMonsterUp = function() {
            this.y -= this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS
        }, i.prototype.moveMonsterDown = function() {
            this.y += this.speed * t.SETTINGS.SCALE * this.game.time.elapsedMS
        }, i.prototype.checkSafeMovement = function() {
            this.frozen || (this.safeCell.isEmpty && !this.safeCell.isDangerCell || (this.findFreeCells(), this.findClearPath()), this.canPressButtons(), Phaser.Math.distance(this.previousCell.centerX, this.previousCell.centerY, this.x, this.y) >= t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE && (this.currentPathCell++, this.previousCell = this.safeCell, this.currentPathCell < this.pathCells.length ? (this.safeCell = this.pathCells[this.currentPathCell], this.nextSafeDirection(this.gridPositionX, this.gridPositionY, this.safeCell)) : (this.idle = !0, this.moving = !1, this.awaitingNewAction = !0), this.awaitingNewAction = !0))
        }, i.prototype.nextSafeDirection = function(e, i, s) {
            e - 1 === s.gridPositionX ? this.safeDirection = t.DIRECTION.LEFT : e + 1 === s.gridPositionX ? this.safeDirection = t.DIRECTION.RIGHT : i - 1 === s.gridPositionY ? this.safeDirection = t.DIRECTION.UP : i + 1 === s.gridPositionY && (this.safeDirection = t.DIRECTION.DOWN)
        }, i.prototype.frozeMonster = function(e) {
            if (!this.frozen) switch (this.frozen = !0, this.frozenTimer = 0, this.direction) {
                case t.DIRECTION.UP:
                    this.currentState = t.MONSTER_STATE.FROZEN_BACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.currentState = t.MONSTER_STATE.FROZEN_FRONT;
                    break;
                case t.DIRECTION.LEFT:
                    this.currentState = t.MONSTER_STATE.FROZEN_LEFT;
                    break;
                case t.DIRECTION.RIGHT:
                    this.currentState = t.MONSTER_STATE.FROZEN_RIGHT;
                    break;
                default:
                    this.currentState = t.MONSTER_STATE.FROZEN_BACK
            }
        }, i.prototype.unfrozeMonster = function() {
            if (this.frozen) switch (this.frozen = !1, this.frozenTimer = 0, null !== this.frozenBy && (this.frozenBy.totalFreeze--, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS")), this.frozenBy = null, this.direction) {
                case t.DIRECTION.UP:
                    this.currentState = t.MONSTER_STATE.UNFROZEN_BACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.currentState = t.MONSTER_STATE.UNFROZEN_FRONT;
                    break;
                case t.DIRECTION.LEFT:
                    this.currentState = t.MONSTER_STATE.UNFROZEN_LEFT;
                    break;
                case t.DIRECTION.RIGHT:
                    this.currentState = t.MONSTER_STATE.UNFROZEN_RIGHT;
                    break;
                default:
                    this.currentState = t.MONSTER_STATE.UNFROZEN_BACK
            }
        }, i.prototype.checkDangerZone = function() {
            null === this.gridCell || this.frozen || this.gridCell.isDangerCell && (this.gridCell.isSpecialTile || (this.frozeMonster(this.gridCell), null !== this.gridCell.dangerOwner && (this.frozenBy = this.gridCell.dangerOwner, this.frozenBy.totalFreeze++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.frozenBy.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_5_IN_10_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_12_IN_10_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_25_MONSTERS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_100_MONSTERS), this.grid.mapThemeSelected === t.MAP_THEME.FOREST && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_50_MONSTERS_IN_FOREST)))))
        }, i.prototype.checkActualGridLocation = function() {
            var e, i;
            switch (this.direction) {
                case t.DIRECTION.LEFT:
                    0 !== this.gridPositionX && (e = Math.floor(this.x / (t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE))) !== this.gridPositionX && (e === this.gridPositionX - 1 ? this.grid.cells[e][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[e][this.gridPositionY], this.gridPositionX = e) : this.grid.cells[this.gridPositionX - 1][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX - 1][this.gridPositionY], this.gridPositionX = this.gridPositionX - 1, this.x = this.gridCell.right));
                    break;
                case t.DIRECTION.RIGHT:
                    this.gridPositionX !== t.SETTINGS.GRID_WIDTH - 1 && (e = Math.floor(this.x / (t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE))) !== this.gridPositionX && (e === this.gridPositionX + 1 ? this.grid.cells[e][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[e][this.gridPositionY], this.gridPositionX = e) : this.grid.cells[this.gridPositionX + 1][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX + 1][this.gridPositionY], this.gridPositionX = this.gridPositionX + 1, this.x = this.gridCell.left));
                    break;
                case t.DIRECTION.UP:
                    0 !== this.gridPositionY && (i = Math.floor(this.y / (t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE))) !== this.gridPositionY && (i === this.gridPositionY - 1 ? this.grid.cells[this.gridPositionX][i].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][i], this.gridPositionY = i) : this.grid.cells[this.gridPositionX][this.gridPositionY - 1].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][this.gridPositionY - 1], this.gridPositionY = this.gridPositionY - 1, this.y = this.gridCell.bottom), this.grid.rowsGroup[this.gridPositionY].addChild(this));
                    break;
                case t.DIRECTION.DOWN:
                    this.gridPositionY !== t.SETTINGS.GRID_HEIGHT - 1 && (i = Math.floor(this.y / (t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE))) !== this.gridPositionY && (i === this.gridPositionY + 1 ? this.grid.cells[this.gridPositionX][i].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][i], this.gridPositionY = i) : this.grid.cells[this.gridPositionX][this.gridPositionY + 1].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][this.gridPositionY + 1], this.gridPositionY = this.gridPositionY + 1, this.y = this.gridCell.top), this.grid.rowsGroup[this.gridPositionY].addChild(this))
            }
        }, i
    }(Phaser.Group);
    t.Monster = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e, 0, 0, e.world.width, e.world.height, s) || this;
            return n.game = e, n.alpha = i || 1, n.inputEnabled = !0, n.kill(), n
        }
        return __extends(e, t), e.prototype.kill = function() {
            this.alive = !1, this.exists = !1, this.visible = !1
        }, e.prototype.revive = function() {
            this.alive = !0, this.exists = !0, this.visible = !0
        }, e
    }(Phaser.TileSprite);
    t.Overlay = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o, r, h, l) {
            var c = e.call(this, i) || this;
            return c.x = s, c.y = n, c.keyName = a, c.game = i, c.grid = o, c.gridCell = o.cells[r][h], c.gridPositionX = r, c.gridPositionY = h, c.startingX = r, c.startingY = h, c.playerID = l, c.mapTheme = o.mapThemeSelected, c.gameMode = o.gameMode, c.gameScale = t.SETTINGS.SCALE, c.direction = t.DIRECTION.DOWN, c.speed = t.SETTINGS.INITIAL_SPEED, c.iceSpeed = .75 * t.SETTINGS.INITIAL_SPEED, c.lives = t.SETTINGS.INITIAL_LIVES, c.gameStatus = t.GAME_STATUS.PLAYING, c.speedPickedUp = 1, c.power = 1, c.bombs = 1, c.weaponTotalUses = 0, c.weaponCurrentUses = 0, c.bombsOnGround = [], c.weapons = [], c.cellEndPortal = null, c.mount = null, c.frozenBy = null, c.tweenPositioning = null, c.tweenTeleport = null, c.tweenJumpX = null, c.tweenJumpY = null, c.tweenInvulnerable = null, c.frozen = !1, c.attacking = !1, c.movingAnimation = !1, c.initialBlinking = !0, c.dead = !1, c.deathComplete = !1, c.canKickBombs = !1, c.shieldActive = !1, c.invincible = !1, c.invulnerable = !1, c.stunned = !1, c.isAI = !1, c.onCream = !1, c.keyPressed = !1, c.jumping = !1, c.blinking = !1, c.onMount = !1, c.losingMount = !1, c.isStand = !0, c.inBooster = !1, c.teleporting = !1, c.creamTimer = 0, c.creamTurnTimer = 0, c.stunTimer = 0, c.invulnerabilityTimer = 0, c.invincibilityTimer = 0, c.blinkTimer = 0, c.totalKills = 0, c.totalCoins = 0, c.totalFreeze = 0, c.totalStars = 0, c.scoreLevelDestruction = 0, c.scoreKillEnemies = 0, c.cellOffset = t.SETTINGS.CELL_WIDTH * c.gameScale * .5, c.currentIceDirection = t.DIRECTION.DOWN, c.obtainSkins(), c.createSpine(), c.createPlayerElements(), c.createInitialBlinking(), c
        }
        return __extends(i, e), i.prototype.obtainSkins = function() {
            t.Instances.DataManager = t.Instances.DataManager, "gp_hero1" === this.keyName || "gp_hero3" === this.keyName || "gp_hero6" === this.keyName ? this.heads = ["head1", "decor1", "decor2", "decor3"] : this.heads = ["head1", "head2", "head3", "head4"], this.faces = ["face1", "face2", "face3", "face4"], this.bodies = ["body1", "body2", "body3", "body4"], this.outfitCounter = 0
        }, i.prototype.createSpine = function() {
            var e, i, s, n;
            switch (this.playerID) {
                case 0:
                    this.outfit = t.Instances.DataManager.getOutfitPlayer1();
                    break;
                case 1:
                    this.outfit = t.Instances.DataManager.getOutfitPlayer2();
                    break;
                case 2:
                    this.outfit = t.Instances.DataManager.getOutfitPlayer3();
                    break;
                case 3:
                    this.outfit = t.Instances.DataManager.getOutfitPlayer4()
            }
            e = this.heads[this.outfit.head], i = this.faces[this.outfit.face], s = this.bodies[this.outfit.body], n = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.spine = this.game.add.spine(0, n, this.keyName), "gp_hero1" !== this.keyName && "gp_hero3" !== this.keyName && "gp_hero6" !== this.keyName || "head1" === e ? this.spine.createCombinedSkin("outfit", "normal0", e, i, s) : this.spine.createCombinedSkin("outfit", "normal0", "head1", e, i, s), this.spine.setSkinByName("outfit"), this.spine.setAnimationByName(0, "stand_front", !0), this.spine.setToSetupPose(), this.spine.scale.setTo(t.SETTINGS.SCALE), this.add(this.spine), this.playerState = t.PLAYER_STATE.STAND_FRONT
        }, i.prototype.createPlayerElements = function() {
            var e;
            switch (e = this.grid.rowsGroup.length - 1, this.animationRainbow = this.game.add.ph2AnimationObject(0, 0, "rainbows", "atlas_anim"), this.animationRainbow.visible = !1, this.grid.rowsGroup[e].add(this.animationRainbow), this.rainbowOffset = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationPowerUps = this.game.add.ph2AnimationObject(0, 0, "powerup_number", "atlas_anim"), this.animationPowerUps.visible = !1, this.grid.rowsGroup[e].add(this.animationPowerUps), this.gameMode) {
                case t.GAME_MODE.BATTLE_ROYALE:
                    this.createWeapon(t.ITEM_TYPE.HAMMER);
                    break;
                case t.GAME_MODE.ICE_MAN:
                    this.createWeapon(t.ITEM_TYPE.ICE_GUN)
            }
            this.gameMode === t.GAME_MODE.ICE_MAN && (this.iceBlock = new Phaser.Sprite(this.game, 0, 0, "atlas_anim", "hero_ice.png"), this.iceBlock.anchor.set(.5), this.iceBlock.visible = !1, this.add(this.iceBlock))
        }, i.prototype.createWeaponSkin = function(e) {
            var i, s, n, a;
            switch (e === t.ITEM_TYPE.SHIELD && this.weaponActive && (e = this.weaponCurrentType), e) {
                case t.ITEM_TYPE.ICE_GUN:
                    i = "ice_gun";
                    break;
                case t.ITEM_TYPE.FLAMETHROWER:
                    i = "flamethrower";
                    break;
                case t.ITEM_TYPE.LASER_GUN:
                    i = "lightning_gun";
                    break;
                case t.ITEM_TYPE.LIGHTING_GUN:
                    i = "laser_gun";
                    break;
                case t.ITEM_TYPE.HAMMER:
                    i = "hammer";
                    break;
                case t.ITEM_TYPE.MIGHTY_HAMMER:
                    i = "mighty_hammer";
                    break;
                case t.ITEM_TYPE.SHIELD:
                    i = "shield";
                    break;
                case t.ITEM_TYPE.DOLL_BOMB:
                    i = "doll_bomb"
            }
            s = this.heads[this.outfit.head], n = this.faces[this.outfit.face], a = this.bodies[this.outfit.body], this.outfitCounter++, "gp_hero1" !== this.keyName && "gp_hero3" !== this.keyName && "gp_hero6" !== this.keyName || "head1" === s ? this.shieldActive && this.weaponActive ? this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", s, n, a, i, "shield") : this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", s, n, a, i) : this.shieldActive && this.weaponActive ? this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", "head1", s, n, a, i, "shield") : this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", "head1", s, n, a, i), this.spine.setSkinByName("outfit" + this.outfitCounter), this.animationState = null
        }, i.prototype.clearWeaponSkin = function() {
            var e, i, s, n, a;
            if (e = this.heads[this.outfit.head], i = this.faces[this.outfit.face], s = this.bodies[this.outfit.body], this.shieldActive) n = "shield", a = !0;
            else if (this.weaponActive) switch (this.weaponCurrentType) {
                case t.ITEM_TYPE.ICE_GUN:
                    n = "ice_gun", a = !0;
                    break;
                case t.ITEM_TYPE.FLAMETHROWER:
                    n = "flamethrower", a = !0;
                    break;
                case t.ITEM_TYPE.LASER_GUN:
                    n = "lightning_gun", a = !0;
                    break;
                case t.ITEM_TYPE.LIGHTING_GUN:
                    n = "laser_gun", a = !0;
                    break;
                case t.ITEM_TYPE.HAMMER:
                    n = "hammer", a = !0;
                    break;
                case t.ITEM_TYPE.MIGHTY_HAMMER:
                    n = "mighty_hammer", a = !0;
                    break;
                case t.ITEM_TYPE.DOLL_BOMB:
                    n = "doll_bomb", a = !0
            } else a = !1;
            this.outfitCounter++, "gp_hero1" !== this.keyName && "gp_hero3" !== this.keyName && "gp_hero6" !== this.keyName || "head1" === e ? a ? this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", e, i, s, n) : this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", e, i, s) : a ? this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", "head1", e, i, s, n) : this.spine.createCombinedSkin("outfit" + this.outfitCounter, "normal0", "head1", e, i, s), this.spine.setSkinByName("outfit" + this.outfitCounter), this.animationState = null
        }, i.prototype.createInitialBlinking = function() {
            this.alpha = 1, this.blinking = !0, this.initialBlinking = !0, this.tweenInvulnerable = this.game.add.tween(this).to({
                alpha: .5
            }, 100, "Linear", !0, 0, -1, !0)
        }, i.prototype.checkHorseJump = function(e) {
            var i, s;
            switch (s = !1, e) {
                case t.DIRECTION.UP:
                    this.gridPositionY - 2 >= 0 && (i = this.grid.cells[this.gridPositionX][this.gridPositionY - 2]);
                    break;
                case t.DIRECTION.DOWN:
                    this.gridPositionY + 2 <= t.SETTINGS.GRID_HEIGHT - 1 && (i = this.grid.cells[this.gridPositionX][this.gridPositionY + 2]);
                    break;
                case t.DIRECTION.LEFT:
                    this.gridPositionX - 2 >= 0 && (i = this.grid.cells[this.gridPositionX - 2][this.gridPositionY]);
                    break;
                case t.DIRECTION.RIGHT:
                    this.gridPositionX + 2 <= t.SETTINGS.GRID_WIDTH - 1 && (i = this.grid.cells[this.gridPositionX + 2][this.gridPositionY])
            }
            return void 0 !== i && null !== i && i.isEmpty && (s = !0, this.mount.direction = null, this.mount.jumpCell(i), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.JUMP_BY_RIDING_A_HORSE_10_TIMES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.JUMP_BY_RIDING_A_HORSE_20_TIMES))), s
        }, i.prototype.checkStagAttack = function(e) {
            (e.cellContains === t.MAP.BLOCK || e.isBox) && (this.grid.destroyBox(e), this.mount.attackBlock(), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_15_BLOCKS_WHEN_RIDING_WAPITI_1_LEVEL), this.grid.gameMode === t.GAME_MODE.ARCADE && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_15_BLOCKS_WHEN_RIDING_WAPITI_IN_ARCADE_MODE_1_LEVEL)))
        }, i.prototype.checkLeft = function() {
            var e;
            return !this.jumping && !this.attacking && (e = this.grid.cells[0][this.gridPositionY], this.x <= e.centerX ? (this.x = this.gridCell.centerX, !1) : !(0 !== this.gridPositionX && !(e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY]).isEmpty && (e.cellContains === t.MAP.BOMB && this.canKickBombs && this.kickBomb(e, t.DIRECTION.LEFT), this.x - this.cellOffset <= e.right)) || (this.x = this.gridCell.centerX, this.onMount && (this.mountType === t.ITEM_TYPE.HORSE ? this.checkHorseJump(this.direction) : this.mountType === t.ITEM_TYPE.STAG && this.checkStagAttack(e)), !1))
        }, i.prototype.checkRight = function() {
            var e;
            return !this.jumping && !this.attacking && (e = this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY], this.x >= e.centerX ? (this.x = this.gridCell.centerX, !1) : !(this.gridPositionX !== t.SETTINGS.GRID_WIDTH - 1 && !(e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY]).isEmpty && (e.cellContains === t.MAP.BOMB && this.canKickBombs && this.kickBomb(e, t.DIRECTION.RIGHT), this.x + this.cellOffset >= e.left)) || (this.x = this.gridCell.centerX, this.onMount && (this.mountType === t.ITEM_TYPE.HORSE ? this.checkHorseJump(this.direction) : this.mountType === t.ITEM_TYPE.STAG && this.checkStagAttack(e)), !1))
        }, i.prototype.checkUp = function() {
            var e;
            return !this.jumping && !this.attacking && (e = this.grid.cells[this.gridPositionX][0], this.y <= e.centerY ? (this.y = this.gridCell.centerY, !1) : !(0 !== this.gridPositionY && !(e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1]).isEmpty && (e.cellContains === t.MAP.BOMB && this.canKickBombs && this.kickBomb(e, t.DIRECTION.UP), this.y - this.cellOffset <= e.bottom)) || (this.y = this.gridCell.centerY, this.onMount && (this.mountType === t.ITEM_TYPE.HORSE ? this.checkHorseJump(this.direction) : this.mountType === t.ITEM_TYPE.STAG && this.checkStagAttack(e)), !1))
        }, i.prototype.checkDown = function() {
            var e;
            return !this.jumping && !this.attacking && (e = this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1], this.y >= e.centerY ? (this.y = this.gridCell.centerY, !1) : !(this.gridPositionY !== t.SETTINGS.GRID_HEIGHT - 1 && !(e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1]).isEmpty && (e.cellContains === t.MAP.BOMB && this.canKickBombs && this.kickBomb(e, t.DIRECTION.DOWN), this.y + this.cellOffset >= e.top)) || (this.y = this.gridCell.centerY, this.onMount && (this.mountType === t.ITEM_TYPE.HORSE ? this.checkHorseJump(this.direction) : this.mountType === t.ITEM_TYPE.STAG && this.checkStagAttack(e)), !1))
        }, i.prototype.inputLeftPressed = function() {
            var e;
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                    this.playerState = t.PLAYER_STATE.HORSE_SIDE;
                    break;
                case t.ITEM_TYPE.SKATEBOARD:
                    this.playerState = t.PLAYER_STATE.SKATE_SIDE;
                    break;
                case t.ITEM_TYPE.SHOPPING_CART:
                    this.playerState = t.PLAYER_STATE.SHOPPING_CART_SIDE;
                    break;
                case t.ITEM_TYPE.STAG:
                    this.playerState = t.PLAYER_STATE.STAG_SIDE
            } else this.playerState = t.PLAYER_STATE.WALK_SIDE;
            this.direction = t.DIRECTION.LEFT, this.keyPressed = !0, this.checkLeft() && (e = this.x - this.speed * this.gameScale * this.game.time.elapsedMS, this.gridPositionX - 1 >= 0 ? e >= this.grid.cells[this.gridPositionX - 1][this.gridPositionY].centerX && this.movePlayerLeft() : e >= this.grid.cells[0][this.gridPositionY].left && this.movePlayerLeft(), this.y = this.grid.cells[this.gridPositionX][this.gridPositionY].centerY, this.movingAnimation = !0)
        }, i.prototype.inputRightPressed = function() {
            var e;
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                    this.playerState = t.PLAYER_STATE.HORSE_SIDE;
                    break;
                case t.ITEM_TYPE.SKATEBOARD:
                    this.playerState = t.PLAYER_STATE.SKATE_SIDE;
                    break;
                case t.ITEM_TYPE.SHOPPING_CART:
                    this.playerState = t.PLAYER_STATE.SHOPPING_CART_SIDE;
                    break;
                case t.ITEM_TYPE.STAG:
                    this.playerState = t.PLAYER_STATE.STAG_SIDE
            } else this.playerState = t.PLAYER_STATE.WALK_SIDE;
            this.direction = t.DIRECTION.RIGHT, this.keyPressed = !0, this.checkRight() && (e = this.x + this.speed * this.gameScale * this.game.time.elapsedMS, this.gridPositionX + 1 <= t.SETTINGS.GRID_WIDTH - 1 ? e <= this.grid.cells[this.gridPositionX + 1][this.gridPositionY].centerX && this.movePlayerRight() : e <= this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY].right && this.movePlayerRight(), this.y = this.grid.cells[this.gridPositionX][this.gridPositionY].centerY, this.movingAnimation = !0, this.spine.autoUpdate = !0)
        }, i.prototype.inputUpPressed = function() {
            var e;
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                    this.playerState = t.PLAYER_STATE.HORSE_BACK;
                    break;
                case t.ITEM_TYPE.SKATEBOARD:
                    this.playerState = t.PLAYER_STATE.SKATE_BACK;
                    break;
                case t.ITEM_TYPE.SHOPPING_CART:
                    this.playerState = t.PLAYER_STATE.SHOPPING_CART_BACK;
                    break;
                case t.ITEM_TYPE.STAG:
                    this.playerState = t.PLAYER_STATE.STAG_BACK
            } else this.playerState = t.PLAYER_STATE.WALK_BACK;
            this.direction = t.DIRECTION.UP, this.keyPressed = !0, this.checkUp() && (e = this.y - this.speed * this.gameScale * this.game.time.elapsedMS, this.gridPositionY - 1 >= 0 ? e >= this.grid.cells[this.gridPositionX][this.gridPositionY - 1].centerY && this.movePlayerUp() : e >= this.grid.cells[this.gridPositionX][0].top && this.movePlayerUp(), this.x = this.grid.cells[this.gridPositionX][this.gridPositionY].centerX, this.movingAnimation = !0, this.spine.autoUpdate = !0)
        }, i.prototype.inputDownPressed = function() {
            var e;
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                    this.playerState = t.PLAYER_STATE.HORSE_FRONT;
                    break;
                case t.ITEM_TYPE.SKATEBOARD:
                    this.playerState = t.PLAYER_STATE.SKATE_FRONT;
                    break;
                case t.ITEM_TYPE.SHOPPING_CART:
                    this.playerState = t.PLAYER_STATE.SHOPPING_CART_FRONT;
                    break;
                case t.ITEM_TYPE.STAG:
                    this.playerState = t.PLAYER_STATE.STAG_FRONT
            } else this.playerState = t.PLAYER_STATE.WALK_FRONT;
            this.direction = t.DIRECTION.DOWN, this.keyPressed = !0, this.checkDown() && (e = this.y + this.speed * this.gameScale * this.game.time.elapsedMS, this.gridPositionY + 1 <= t.SETTINGS.GRID_HEIGHT - 1 ? e <= this.grid.cells[this.gridPositionX][this.gridPositionY + 1].centerY && this.movePlayerDown() : e <= this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1].bottom && this.movePlayerDown(), this.x = this.grid.cells[this.gridPositionX][this.gridPositionY].centerX, this.movingAnimation = !0, this.spine.autoUpdate = !0)
        }, i.prototype.movePlayerLeft = function() {
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                case t.ITEM_TYPE.SKATEBOARD:
                case t.ITEM_TYPE.SHOPPING_CART:
                case t.ITEM_TYPE.STAG:
                    this.x -= this.mount.speed * this.gameScale * this.game.time.elapsedMS
            } else this.x -= this.speed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.movePlayerRight = function() {
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                case t.ITEM_TYPE.SKATEBOARD:
                case t.ITEM_TYPE.SHOPPING_CART:
                case t.ITEM_TYPE.STAG:
                    this.x += this.mount.speed * this.gameScale * this.game.time.elapsedMS
            } else this.x += this.speed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.movePlayerUp = function() {
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                case t.ITEM_TYPE.SKATEBOARD:
                case t.ITEM_TYPE.SHOPPING_CART:
                case t.ITEM_TYPE.STAG:
                    this.y -= this.mount.speed * this.gameScale * this.game.time.elapsedMS
            } else this.y -= this.speed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.movePlayerDown = function() {
            if (this.onMount) switch (this.mountType) {
                case t.ITEM_TYPE.HORSE:
                case t.ITEM_TYPE.SKATEBOARD:
                case t.ITEM_TYPE.SHOPPING_CART:
                case t.ITEM_TYPE.STAG:
                    this.y += this.mount.speed * this.gameScale * this.game.time.elapsedMS
            } else this.y += this.speed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.gameOver = function() {
            if (this.gameStatus = t.GAME_STATUS.GAME_OVER, !this.dead) {
                switch (this.direction) {
                    case t.DIRECTION.UP:
                        this.playerState = t.PLAYER_STATE.STAND_BACK, this.scale.x = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        this.playerState = t.PLAYER_STATE.STAND_FRONT, this.scale.x = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        this.playerState = t.PLAYER_STATE.STAND_SIDE, this.scale.x = 1;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.playerState = t.PLAYER_STATE.STAND_SIDE, this.scale.x = -1;
                        break;
                    default:
                        this.playerState = t.PLAYER_STATE.STAND_FRONT
                }
                this.updateState()
            }
        }, i.prototype.frozePlayer = function(t) {
            this.frozen || (this.frozen = !0, this.freezeTimer = 0, this.iceBlock.visible = !0)
        }, i.prototype.unfrozePlayer = function() {
            this.frozen && (this.frozen = !1, this.freezeTimer = 0, this.iceBlock.visible = !1, null !== this.frozenBy && (this.frozenBy.totalFreeze--, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS")), this.frozenBy = null, this.invulnerable = !0, this.tweenInvulnerable = this.game.add.tween(this).to({
                alpha: .5
            }, 100, "Linear", !0, 0, -1, !0))
        }, i.prototype.killPlayer = function(e, i) {
            this.dead || (this.attacking && null !== this.weaponUsed && this.weaponUsed.playerKilled(), this.playerState = t.PLAYER_STATE.DEATH, this.dead = !0, this.onCream = !1, this.spine.autoUpdate = !0, this.gameStatus = t.GAME_STATUS.GAME_OVER, this.attacking = !0, this.animationPowerUps.visible = !1, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.game.ph2AudioManager.playEffect("dead", !1), this.gameMode === t.GAME_MODE.NEW_PACMAN && this.isAI && this.dropCoins(), this.gameMode === t.GAME_MODE.STAR_COLLECTOR && this.dropStars(), this.gameMode === t.GAME_MODE.ARCADE && this.lives--, i && null !== this.gridCell.dangerOwner && this.gridCell.dangerOwner.playerID !== this.playerID && (this.gridCell.dangerOwner.totalKills++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.game.ph2NotificationManager.postNotification("_ADD_SCORE_KILLS", e.dangerOwner.playerID)))
        }, i.prototype.killPlayerComplete = function() {
            if (this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED) {
                switch (this.removeWeapons(), this.clearWeaponSkin(), this.gameMode) {
                    case t.GAME_MODE.BATTLE_ROYALE:
                    case t.GAME_MODE.ICE_MAN:
                    case t.GAME_MODE.STAR_COLLECTOR:
                        this.revivePlayer();
                        break;
                    case t.GAME_MODE.NEW_PACMAN:
                        this.isAI && this.revivePlayer()
                }
                this.deathComplete = !0
            }
        }, i.prototype.revivePlayer = function() {
            var e;
            e = this.grid.cells[this.startingX][this.startingY], this.dead = !1, this.deathComplete = !1, this.gameStatus = t.GAME_STATUS.PLAYING, this.gridPositionX = this.startingX, this.gridPositionY = this.startingY, this.gridCell = e, this.x = e.centerX, this.y = e.centerY, this.grid.rowsGroup[this.gridPositionY].add(this), this.attacking = !1, this.direction = t.DIRECTION.DOWN, this.playerState = t.PLAYER_STATE.STAND_FRONT, this.scale.x = 1, this.scale.y = 1, this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? this.createWeapon(t.ITEM_TYPE.HAMMER) : this.gameMode === t.GAME_MODE.NEW_PACMAN ? this.createWeapon(t.ITEM_TYPE.FLAMETHROWER) : this.gameMode === t.GAME_MODE.ICE_MAN && this.createWeapon(t.ITEM_TYPE.ICE_GUN), this.createInitialBlinking()
        }, i.prototype.dropCoins = function() {
            var e, i, s, n, a;
            for (a = 0, n = this.grid.rowsGroup.length - 1, s = this.game.rnd.integerInRange(25, 30), e = 0; e < this.grid.spawneableCells.length; e++) this.grid.spawneableCells[e].isEmpty && this.grid.spawneableCells[e].cellContains === t.MAP.FREE && a++;
            for (a < s && (s = a), e = 0; e < s; e++) i = new t.Coin(this.game, this.gridCell, this.grid), this.grid.rowsGroup[n].add(i), i.throwCoinUp()
        }, i.prototype.dropStars = function() {
            var e, i, s;
            for (s = this.grid.rowsGroup.length - 1, e = 0; e < this.totalStars; e++) i = new t.Star(this.game, this.gridCell, this.grid), this.grid.rowsGroup[s].add(i), i.throwStarUp();
            this.totalStars = 0
        }, i.prototype.actionKeyPressed = function() {
            this.jumping || this.attacking || this.gameMode === t.GAME_MODE.NEW_PACMAN || (this.gameMode === t.GAME_MODE.ARCADE || this.gameMode === t.GAME_MODE.STAR_COLLECTOR ? this.weaponActive ? this.useWeapon() : this.putBomb() : this.gameMode !== t.GAME_MODE.BATTLE_ROYALE && this.gameMode !== t.GAME_MODE.ICE_MAN || this.useWeapon())
        }, i.prototype.putBomb = function() {
            var e, i;
            !(i = this.grid.cells[this.gridPositionX][this.gridPositionY]).isEmpty || this.bombsOnGround.length >= this.bombs || (i.isEmpty = !1, i.cellContains = t.MAP.BOMB, e = new t.Bomb(this.game, i.centerX, i.centerY, "bomb", this.grid, i, this.power, this), this.game.ph2AudioManager.playEffect("addBomb", !1), this.grid.addBomb(e, i), this.bombsOnGround.push(e))
        }, i.prototype.kickBomb = function(t, e) {
            var i, s;
            for (i = 0; i < this.grid.bombs.length; i++)(s = this.grid.bombs[i]).gridPositionX === t.gridPositionX && s.gridPositionY === t.gridPositionY && (s.isKicked || s.bombKicked(e))
        }, i.prototype.useWeapon = function() {
            this.attacking || this.jumping || this.losingMount || this.weaponActive && (this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_ALL_THE_WEAPONS, this.weaponCurrentType), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_4_TYPE_OF_WEAPONS_IN_LEVEL, this.weaponCurrentType), this.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_4_TYPES_OF_WEAPONS_IN_1_LEVEL_IN_ARCADE, this.weaponCurrentType), this.weaponCurrentType === t.ITEM_TYPE.LIGHTING_GUN && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_LIGHTNING_GUN_3_TIMES_IN_1_LEVEL_IN_ARCADE)), this.weaponCurrentType === t.ITEM_TYPE.MIGHTY_HAMMER && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_ANGRY_HAMMER_3_TIMES_IN_LEVEL), this.weaponCurrentType === t.ITEM_TYPE.DOLL_BOMB && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_DOLL_BOMB_3_TIMES_IN_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_DOLL_BOMB_5_TIMES))), this.weapons[this.weaponCurrentUses].direction = this.direction, this.weaponUsed = this.weapons[this.weaponCurrentUses], this.weapons[this.weaponCurrentUses].useWeapon() && (Ph2.AnimationSystem.findObject("hero_number", this.animationPowerUps).frameName = "x1.png", this.checkWeaponUses(), this.weaponCurrentUses >= this.weaponTotalUses && (this.weaponActive = !1)))
        }, i.prototype.checkWeaponUses = function() {
            this.grid.weapons.push(this.weapons[this.weaponCurrentUses]), this.weaponCurrentType === t.ITEM_TYPE.HAMMER ? this.gameMode !== t.GAME_MODE.BATTLE_ROYALE && this.weaponCurrentUses++ : this.weaponCurrentType === t.ITEM_TYPE.FLAMETHROWER && this.isAI ? this.gameMode !== t.GAME_MODE.NEW_PACMAN && this.weaponCurrentUses++ : this.weaponCurrentUses++
        }, i.prototype.checkNextWeapon = function() {
            this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? this.createWeapon(t.ITEM_TYPE.HAMMER) : this.gameMode === t.GAME_MODE.ICE_MAN ? this.createWeapon(t.ITEM_TYPE.ICE_GUN) : this.gameMode === t.GAME_MODE.NEW_PACMAN && this.isAI ? this.createWeapon(t.ITEM_TYPE.FLAMETHROWER) : this.clearWeaponSkin()
        }, i.prototype.createWeapon = function(e) {
            var i, s;
            switch (this.removeWeapons(), this.weaponActive = !0, this.weaponCurrentType = e, this.changeWeaponIndicator(e), this.createWeaponSkin(e), e) {
                case t.ITEM_TYPE.HAMMER:
                    for (i = 0; i < 2; i++) s = new t.Hammer(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 2;
                    break;
                case t.ITEM_TYPE.LIGHTING_GUN:
                    for (i = 0; i < 1; i++) s = new t.LightningGun(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 1;
                    break;
                case t.ITEM_TYPE.FLAMETHROWER:
                    for (i = 0; i < 2; i++) s = new t.Flamethrower(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 2;
                    this.isAI || this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_10_FLAMETHROWERS);
                    break;
                case t.ITEM_TYPE.LASER_GUN:
                    for (i = 0; i < 2; i++) s = new t.LaserGun(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 2;
                    break;
                case t.ITEM_TYPE.DOLL_BOMB:
                    for (i = 0; i < 1; i++) s = new t.DollBomb(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 1;
                    break;
                case t.ITEM_TYPE.MIGHTY_HAMMER:
                    for (i = 0; i < 1; i++) s = new t.MightyHammer(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 1;
                    break;
                case t.ITEM_TYPE.ICE_GUN:
                    for (i = 0; i < 2; i++) s = new t.IceGun(this.game, this.grid, this, e), this.weapons.push(s), this.weaponCurrentUses = 0, this.weaponTotalUses = 2
            }
            this.weaponUsed = this.weapons[0]
        }, i.prototype.changeWeaponIndicator = function(e) {
            var i, s, n, a;
            switch (e) {
                case t.ITEM_TYPE.FLAMETHROWER:
                    n = "head_icon_flamethrower.png", a = "x2.png";
                    break;
                case t.ITEM_TYPE.HAMMER:
                    n = "head_icon_hammer.png", a = "x2.png";
                    break;
                case t.ITEM_TYPE.LASER_GUN:
                    n = "head_icon_lightning_gun.png", a = "x2.png";
                    break;
                case t.ITEM_TYPE.LIGHTING_GUN:
                    n = "head_icon_laser_gun.png", a = "x1.png";
                    break;
                case t.ITEM_TYPE.MIGHTY_HAMMER:
                    n = "head_icon_mighty_hammer.png", a = "x1.png";
                    break;
                case t.ITEM_TYPE.DOLL_BOMB:
                    n = "head_icon_doll.png", a = "x1.png";
                    break;
                case t.ITEM_TYPE.ICE_GUN:
                    n = "head_icon_ice_gun.png", a = "x1.png"
            }
            s = Ph2.AnimationSystem.findObject("hero_powerup", this.animationPowerUps), i = Ph2.AnimationSystem.findObject("hero_number", this.animationPowerUps), s.frameName = n, i.frameName = a, this.gameMode !== t.GAME_MODE.ARCADE ? this.animationPowerUps.visible = e !== t.ITEM_TYPE.HAMMER : this.animationPowerUps.visible = !0
        }, i.prototype.removeWeapons = function() {
            this.weaponActive = !1, this.weapons = []
        }, i.prototype.checkInitialBlinking = function() {
            this.initialBlinking && (this.blinkTimer += this.game.time.elapsedMS, this.blinkTimer >= t.SETTINGS.INITIAL_BLINKING_TIME && (this.blinkTimer = 0, this.initialBlinking = !1, this.blinking = !1, this.tweenInvulnerable.stop(!0), this.tweenInvulnerable = null, this.alpha = 1))
        }, i.prototype.checkActualGridLocation = function() {
            var e, i;
            if ((this.movingAnimation || this.onCream) && !this.jumping) {
                switch (this.direction) {
                    case t.DIRECTION.LEFT:
                        0 !== this.gridPositionX && (e = Math.floor(this.x / (t.SETTINGS.CELL_WIDTH * this.gameScale))) !== this.gridPositionX && (e === this.gridPositionX - 1 ? this.grid.cells[e][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[e][this.gridPositionY], this.gridPositionX = e) : this.grid.cells[this.gridPositionX - 1][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX - 1][this.gridPositionY], this.gridPositionX = this.gridPositionX - 1, this.x = this.gridCell.right));
                        break;
                    case t.DIRECTION.RIGHT:
                        this.gridPositionX !== t.SETTINGS.GRID_WIDTH - 1 && (e = Math.floor(this.x / (t.SETTINGS.CELL_WIDTH * this.gameScale))) !== this.gridPositionX && (e === this.gridPositionX + 1 ? this.grid.cells[e][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[e][this.gridPositionY], this.gridPositionX = e) : this.grid.cells[this.gridPositionX + 1][this.gridPositionY].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX + 1][this.gridPositionY], this.gridPositionX = this.gridPositionX + 1, this.x = this.gridCell.left));
                        break;
                    case t.DIRECTION.UP:
                        0 !== this.gridPositionY && (i = Math.floor(this.y / (t.SETTINGS.CELL_HEIGHT * this.gameScale))) !== this.gridPositionY && (i === this.gridPositionY - 1 ? this.grid.cells[this.gridPositionX][i].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][i], this.gridPositionY = i) : this.grid.cells[this.gridPositionX][this.gridPositionY - 1].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][this.gridPositionY - 1], this.gridPositionY = this.gridPositionY - 1, this.y = this.gridCell.bottom), this.grid.rowsGroup[this.gridPositionY].addChild(this), this.grid.rowsGroup[this.gridPositionY].addChild(this.animationRainbow));
                        break;
                    case t.DIRECTION.DOWN:
                        this.gridPositionY !== t.SETTINGS.GRID_HEIGHT - 1 && (i = Math.floor(this.y / (t.SETTINGS.CELL_HEIGHT * this.gameScale))) !== this.gridPositionY && (i === this.gridPositionY + 1 ? this.grid.cells[this.gridPositionX][i].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][i], this.gridPositionY = i) : this.grid.cells[this.gridPositionX][this.gridPositionY + 1].isEmpty && (this.gridCell = this.grid.cells[this.gridPositionX][this.gridPositionY + 1], this.gridPositionY = this.gridPositionY + 1, this.y = this.gridCell.top), this.grid.rowsGroup[this.gridPositionY].addChild(this), this.grid.rowsGroup[this.gridPositionY].addChild(this.animationRainbow))
                }
                this.gridCell !== this.cellEndPortal && (this.cellEndPortal = null)
            }
        }, i.prototype.checkItemPickUp = function() {
            var e;
            if (null !== this.gridCell && (!this.isAI || this.gameMode !== t.GAME_MODE.NEW_PACMAN) && (this.gridCell.cellContains === t.MAP.ITEM || this.gridCell.isItem)) {
                if (null === (e = this.grid.getItemAtCell(this.gridCell))) return;
                if (this.grid.removeItemFromArray(this.gridCell, !1), this.game.ph2AudioManager.playEffect("sound_getItem", !1), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_100_PROPS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_200_PROPS)), e.powerUpType === t.POWER_UP_TYPE.POWER_UP) switch (e.itemType) {
                    case t.ITEM_TYPE.BOMB:
                        if (this.bombs >= t.SETTINGS.MAX_BOMBS) return;
                        this.bombs++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS");
                        break;
                    case t.ITEM_TYPE.POWER:
                        if (this.power >= t.SETTINGS.MAX_BOMB_POWER) return;
                        this.power++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.isAI || this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_15_POWER_BLASTS);
                        break;
                    case t.ITEM_TYPE.SPEED:
                        if (this.speedPickedUp >= t.SETTINGS.MAX_SPEED) return;
                        this.speed = this.speed + this.speed * t.SETTINGS.SPEED_INCREASE, this.speedPickedUp++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_5_SPEEDUPS_PROPS_IN_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_25_SPEEDUPS), this.gameMode === t.GAME_MODE.ARCADE && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_5_SPEEDUPS_PROPS_IN_LEVEL_IN_ARCADE));
                        break;
                    case t.ITEM_TYPE.KICK_BOMBS:
                        this.canKickBombs = !0;
                        break;
                    case t.ITEM_TYPE.SHIELD:
                        this.shieldActive = !0, this.createWeaponSkin(t.ITEM_TYPE.SHIELD);
                        break;
                    case t.ITEM_TYPE.HEART:
                        this.lives++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS");
                        break;
                    case t.ITEM_TYPE.INVINCIBILITY:
                        this.invincibilityTimer = 0, this.invincible = !0, this.animationRainbow.visible = !0, this.animationRainbow.ph2Animations.play("rainbows_stand", 1, !0), this.soundInvincibility = this.game.ph2AudioManager.playEffect("sound_inv", !1), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_INVINCIBILITY_3_TIMES_IN_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_20_INVINCIBILITY))
                } else e.powerUpType === t.POWER_UP_TYPE.WEAPON ? this.createWeapon(e.itemType) : e.powerUpType === t.POWER_UP_TYPE.MOUNT && this.createMount(e.itemType)
            }
        }, i.prototype.checkOwnBombs = function() {
            var t;
            for (t = this.bombsOnGround.length - 1; t >= 0; t--) this.bombsOnGround[t].alive || this.bombsOnGround.splice(t, 1)
        }, i.prototype.checkDangerZone = function() {
            if (!(null === this.gridCell || this.invulnerable || this.invincible || this.jumping || this.blinking || this.losingMount || this.teleporting || this.frozen) && this.gridCell.isDangerCell) {
                if (this.gridCell.dangerWeapon && this.gridCell.dangerOwner === this) return;
                this.onMount ? (this.gridCell.isSpecialTile || null !== this.gridCell.dangerOwner && (this.gridCell.dangerOwner.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_4_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_10_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_34_ENEMIES))), this.loseMount()) : this.shieldActive ? (this.gridCell.isSpecialTile || null !== this.gridCell.dangerOwner && (this.gridCell.dangerOwner.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_4_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_10_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_34_ENEMIES))), this.shieldActive = !1, this.invulnerable = !0, this.tweenInvulnerable = this.game.add.tween(this).to({
                    alpha: .5
                }, 100, "Linear", !0, 0, -1, !0), this.clearWeaponSkin()) : this.gridCell.isSpecialTile ? (this.killPlayer(this.gridCell, !1), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_CLAWS_3_CONTINUOUS_LEVELS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_CLAWS_TOYSHOP_ARENA)) : this.gameMode === t.GAME_MODE.ICE_MAN ? (this.frozePlayer(this.gridCell), null !== this.gridCell.dangerOwner && (this.frozenBy = this.gridCell.dangerOwner, this.frozenBy.totalFreeze++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.frozenBy.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_4_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_10_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_34_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_5_IN_10_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.FREEZE_12_IN_10_SECONDS)))) : (null !== this.gridCell.dangerOwner && (this.gridCell.dangerOwner.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_4_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_10_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.ATTACK_34_ENEMIES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_2_ENEMIES_IN_10_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_4_ENEMIES_IN_10_SECONDS), this.gridCell.dangerWeapon || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_10_ENEMIES_USING_BOMBS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_30_ENEMIES_USING_BOMBS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_50_ENEMIES_USING_BOMBS)), this.gameMode === t.GAME_MODE.STAR_COLLECTOR && (this.totalStars >= 3 ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_AN_ENEMY_WITH_3_OR_MORE_STARS) : this.totalStars >= 1 && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_AN_ENEMY_WITH_1_OR_MORE_STARS)))), this.killPlayer(this.gridCell, !0))
            }
        }, i.prototype.checkEnemyInvulnerability = function(e) {
            this.invulnerable || this.invincible || this.jumping || this.blinking || this.losingMount || (this.onMount ? this.loseMount() : this.shieldActive ? (this.shieldActive = !1, this.invulnerable = !0, this.tweenInvulnerable = this.game.add.tween(this).to({
                alpha: .5
            }, 100, "Linear", !0, 0, -1, !0), this.clearWeaponSkin()) : (this.killPlayer(this.gridCell, !1), this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.game.ph2NotificationManager.postNotification("_ADD_SCORE_KILLS", e.playerID), e.totalKills++, e.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.KILL_ENEMY_USING_INVINCIBILITY), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.USE_INVINCIBILITY_TO_KILL_4_ENEMIES_IN_1_LEVEL)), this.updateState()))
        }, i.prototype.checkInvulnerability = function() {
            this.invulnerable && (this.invulnerabilityTimer += this.game.time.elapsedMS, this.invulnerabilityTimer >= 2e3 && (this.invulnerable = !1, this.invulnerabilityTimer = 0, this.tweenInvulnerable.stop(!0), this.tweenInvulnerable = null, this.alpha = 1))
        }, i.prototype.checkInvincibility = function() {
            var t, e, i;
            if (this.invincible) {
                for (e = this.grid.players, t = 0; t < e.length; t++) i = e[t], this.gridPositionX === i.gridPositionX && this.gridPositionY === i.gridPositionY && (i.dead || i.invulnerable || i.invincible || i.checkEnemyInvulnerability(this));
                this.invincibilityTimer += this.game.time.elapsedMS, this.invincibilityTimer >= 1e4 && (this.invincible = !1, this.invincibilityTimer = 0, this.animationRainbow.ph2Animations.stop(), this.animationRainbow.visible = !1, this.game.ph2AudioManager.stopEffect(this.soundInvincibility))
            }
        }, i.prototype.checkAnimation = function() {
            switch (this.movingAnimation || (this.isStand = !0, this.checkStandAnimation()), this.direction) {
                case t.DIRECTION.UP:
                    this.currentDirection !== t.DIRECTION.UP && (this.isStand = !1, this.scale.x = 1, this.movingAnimation = !0, this.currentDirection = t.DIRECTION.UP, this.playerState = t.PLAYER_STATE.WALK_BACK);
                    break;
                case t.DIRECTION.DOWN:
                    this.currentDirection !== t.DIRECTION.DOWN && (this.scale.x = 1, this.isStand = !1, this.movingAnimation = !0, this.currentDirection = t.DIRECTION.DOWN, this.playerState = t.PLAYER_STATE.WALK_FRONT);
                    break;
                case t.DIRECTION.LEFT:
                    this.currentDirection !== t.DIRECTION.LEFT && (this.scale.x = 1, this.isStand = !1, this.movingAnimation = !0, this.currentDirection = t.DIRECTION.LEFT, this.playerState = t.PLAYER_STATE.WALK_SIDE);
                    break;
                case t.DIRECTION.RIGHT:
                    this.currentDirection !== t.DIRECTION.RIGHT && (this.scale.x = -1, this.isStand = !1, this.movingAnimation = !0, this.currentDirection = t.DIRECTION.RIGHT, this.playerState = t.PLAYER_STATE.WALK_SIDE)
            }
        }, i.prototype.checkIndicators = function() {
            this.invincible ? (this.animationRainbow.visible = !0, this.animationRainbow.x = this.x, this.animationRainbow.y = this.y + this.rainbowOffset) : this.animationRainbow.visible = !1, this.animationPowerUps.visible = !this.dead, this.weaponActive ? this.gameMode === t.GAME_MODE.BATTLE_ROYALE ? this.animationPowerUps.visible = this.weaponCurrentType !== t.ITEM_TYPE.HAMMER : this.gameMode === t.GAME_MODE.ICE_MAN ? this.animationPowerUps.visible = this.weaponCurrentType !== t.ITEM_TYPE.ICE_GUN : this.animationPowerUps.visible = !0 : this.animationPowerUps.visible = !1, this.onMount && this.mount.jumping ? (this.animationPowerUps.x = this.x, this.animationPowerUps.y = this.y - 20 * t.SETTINGS.SCALE) : (this.animationPowerUps.x = this.x, this.animationPowerUps.y = this.y + 20 * t.SETTINGS.SCALE)
        }, i.prototype.checkHammocks = function() {
            var e;
            if (this.gridCell.isSpecialTile) {
                if (this.jumping) return;
                e = this.gridCell.hammock.hammockSteppedOn(), this.playerJump(e), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.JUMP_BY_HAMMOCK_2_TIMES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.JUMP_BY_HAMMOCK_10_TIMES))
            }
        }, i.prototype.checkBoosters = function() {
            var e, i, s, n, a, o, r = this;
            if (this.gridCell.isBooster) {
                if (this.inBooster) return;
                switch (o = [], i = this.gridCell.gridPositionX, s = this.gridCell.gridPositionY, n = this.gridCell.booster, this.inBooster = !0, this.game.ph2AudioManager.playEffect("sound_speed_up", !1), n.direction) {
                    case t.DIRECTION.UP:
                        for (e = s - 1; e > s - 4; e--) this.grid.cells[i][e].cellContains !== t.MAP.BLOCK && this.grid.cells[i][e].cellContains !== t.MAP.WALL && o.push(this.grid.cells[i][e]);
                        break;
                    case t.DIRECTION.DOWN:
                        for (e = s + 1; e < s + 4; e++) this.grid.cells[i][e].cellContains !== t.MAP.BLOCK && this.grid.cells[i][e].cellContains !== t.MAP.WALL && o.push(this.grid.cells[i][e]);
                        break;
                    case t.DIRECTION.LEFT:
                        for (e = i - 1; e > i - 4; e--) this.grid.cells[e][s].cellContains !== t.MAP.BLOCK && this.grid.cells[e][s].cellContains !== t.MAP.WALL && o.push(this.grid.cells[e][s]);
                        break;
                    case t.DIRECTION.RIGHT:
                        for (e = i + 1; e < i + 4; e++) this.grid.cells[e][s].cellContains !== t.MAP.BLOCK && this.grid.cells[e][s].cellContains !== t.MAP.WALL && o.push(this.grid.cells[e][s])
                }
                o.length > 0 && (this.direction = n.direction, a = o[o.length - 1], this.game.add.tween(this).to({
                    x: a.centerX,
                    y: a.centerY
                }, 750, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                    r.inBooster = !1, r.gridPositionX = a.gridPositionX, r.gridPositionY = a.gridPositionY, r.gridCell = a
                }, this))
            }
        }, i.prototype.checkPortals = function() {
            var t;
            if (!this.teleporting && this.gridCell.isPortal) {
                if (this.cellEndPortal === this.gridCell) return;
                t = this.gridCell.portal.oppositePortal, this.beginTeleport(t)
            }
        }, i.prototype.beginTeleport = function(e) {
            var i = this;
            this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.TRANSFER_BY_TREE_HOLES_6_TIMES), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.TRANSFER_BY_TREE_HOLES_10_TIMES_IN_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.TRANSFER_BY_TREE_HOLES_20_TIMES_IN_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.TRANSFER_BY_TREE_HOLES_46_TIMES)), this.teleporting = !0, this.game.ph2AudioManager.playEffect("sound_tree_hole", !1), this.tweenTeleport = this.game.add.tween(this).to({
                alpha: 0
            }, 500, "Linear", !0), this.tweenTeleport.onComplete.add(function() {
                i.endTeleport(e)
            }, this)
        }, i.prototype.endTeleport = function(t) {
            var e = this;
            this.gridCell = t.gridCell, this.cellEndPortal = t.gridCell, this.x = t.gridCell.centerX, this.y = t.gridCell.centerY, this.gridPositionX = t.gridPositionX, this.gridPositionY = t.gridPositionY, this.grid.rowsGroup[this.gridPositionY].add(this), this.tweenTeleport = this.game.add.tween(this).to({
                alpha: 1
            }, 500, "Linear", !0), this.tweenTeleport.onComplete.add(function() {
                e.teleporting = !1
            }, this)
        }, i.prototype.playerJump = function(e) {
            var i, s, n = this;
            s = this.grid.rowsGroup.length - 1, i = e.gridPositionY > this.gridPositionY ? this.gridCell.centerY - 150 * t.SETTINGS.SCALE : e.centerY - 50 * t.SETTINGS.SCALE, this.jumping = !0, this.gridCell = e, this.gridPositionX = e.gridPositionX, this.gridPositionY = e.gridPositionY, this.grid.rowsGroup[s].add(this), this.tweenJumpX = this.game.add.tween(this).to({
                x: e.centerX
            }, 1100, "Linear", !0), this.tweenJumpX.onComplete.add(this.endJump, this), this.tweenJumpY = this.game.add.tween(this).to({
                y: i
            }, 550, Phaser.Easing.Quartic.Out, !0), this.tweenJumpY.onComplete.add(function() {
                n.tweenJumpY = n.game.add.tween(n).to({
                    y: e.centerY
                }, 550, Phaser.Easing.Quartic.In, !0)
            }, this)
        }, i.prototype.endJump = function() {
            this.gridPositionX = this.gridCell.gridPositionX, this.gridPositionY = this.gridCell.gridPositionY, this.grid.rowsGroup[this.gridPositionY].add(this), this.jumping = !1, this.tweenJumpX = null, this.tweenJumpY = null
        }, i.prototype.checkCream = function() {
            var t, e;
            if (this.gridCell.isSpecialTile) {
                if (this.dead) return;
                this.onCream = !0, this.gridCell.isSpecialTile = !1, this.gridCell.cream.visible = !1, this.gridCell.cream.destroy(), this.gridCell.cream = null, t = this.gridCell.centerX, e = this.gridCell.centerY, this.tweenCreamCell = this.game.add.tween(this).to({
                    x: t,
                    y: e
                }, 500, "Linear", !0), this.game.ph2AudioManager.playEffect("sound_butter", !1)
            }
        }, i.prototype.checkCoins = function() {
            this.isAI || (this.gridCell.cellContains === t.MAP.COIN || this.gridCell.isCoin) && this.grid.coinPickedUp(this.gridCell, !1) && (this.totalCoins++, this.game.ph2AudioManager.playEffect("sound_coin", !1), this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.game.ph2NotificationManager.postNotification("_ADD_SCORE_COINS", this.playerID), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.COLLECT_600_COINS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.COLLECT_1500_COINS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_20_COINS_IN_10_SECONDS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.GET_40_COINS_IN_10_SECONDS)))
        }, i.prototype.checkStars = function() {
            (this.gridCell.cellContains === t.MAP.STAR || this.gridCell.isStar) && this.grid.starPickedUp(this.gridCell) && (this.totalStars++, this.game.ph2AudioManager.playEffect("sound_star", !1), this.game.ph2NotificationManager.postNotification("_UPDATE_UIS"), this.game.ph2NotificationManager.postNotification("_ADD_SCORE_STARS", this.playerID), this.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.COLLECT_20_STARS), this.mapTheme === t.MAP_THEME.RACE_TRACK ? this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.COLLECT_20_STARS_IN_RACE_ARENA) : this.mapTheme === t.MAP_THEME.RANCH && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.COLLECT_60_STARS_IN_RANCH_ARENA)))
        }, i.prototype.checkMonsters = function() {
            var t, e, i;
            if (!this.frozen && !this.invulnerable)
                for (i = this.grid.monsters, t = 0; t < i.length; t++)(e = i[t]).frozen || e.gridPositionX === this.gridPositionX && e.gridPositionY === this.gridPositionY && this.frozePlayer(this.gridCell)
        }, i.prototype.pausePlayer = function() {
            this.gameStatus = t.GAME_STATUS.PAUSED, this.spine.autoUpdate = !1, this.onMount && (this.mount.spine.autoUpdate = !1, null !== this.mount.tweenMountLose && this.mount.tweenMountLose.pause()), this.jumping && (this.tweenJumpX.pause(), this.tweenJumpY.pause()), null !== this.tweenInvulnerable && this.tweenInvulnerable.pause()
        }, i.prototype.resumePlayer = function() {
            this.gameStatus = t.GAME_STATUS.PLAYING, this.spine.autoUpdate = !0, this.onMount && (this.mount.spine.autoUpdate = !0, null !== this.mount.tweenMountLose && this.mount.tweenMountLose.resume()), this.jumping && (this.tweenJumpX.resume(), this.tweenJumpY.resume()), null !== this.tweenInvulnerable && this.tweenInvulnerable.resume()
        }, i.prototype.update = function() {
            this.gameStatus === t.GAME_STATUS.GAME_OVER || this.gameStatus === t.GAME_STATUS.PAUSED || this.dead || (this.mapTheme === t.MAP_THEME.BAKERY && this.checkCream(), this.mapTheme === t.MAP_THEME.BEACH && this.checkHammocks(), this.mapTheme === t.MAP_THEME.FOREST && this.checkPortals(), this.mapTheme === t.MAP_THEME.RACE_TRACK && this.checkBoosters(), this.gameMode === t.GAME_MODE.NEW_PACMAN && this.checkCoins(), this.gameMode === t.GAME_MODE.STAR_COLLECTOR && this.checkStars(), this.gameMode === t.GAME_MODE.ICE_MAN && this.checkMonsters(), this.onMount && this.updateMount(), this.onCream && this.doCreamAnimation(), this.frozen && this.checkFreezeTime(), this.checkInitialBlinking(), this.checkItemPickUp(), this.checkOwnBombs(), this.checkInvulnerability(), this.checkInvincibility(), this.checkAnimation(), this.checkIndicators(), this.checkDangerZone(), this.checkStun(), this.updateState())
        }, i.prototype.postUpdate = function() {
            this.checkActualGridLocation()
        }, i.prototype.doCreamAnimation = function() {
            var e;
            if (this.creamTimer += this.game.time.elapsedMS, this.creamTurnTimer += this.game.time.elapsedMS, this.creamTurnTimer >= 50) {
                switch (this.creamTurnTimer = 0, this.currentIceDirection) {
                    case t.DIRECTION.UP:
                        this.currentIceDirection = t.DIRECTION.RIGHT, e = "stand_side", this.scale.x = -1;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.currentIceDirection = t.DIRECTION.DOWN, e = "stand_front", this.scale.x = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        this.currentIceDirection = t.DIRECTION.LEFT, e = "stand_side", this.scale.x = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        this.currentIceDirection = t.DIRECTION.UP, e = "stand_back", this.scale.x = 1
                }
                this.spine.setAnimationByName(0, e, !0), this.spine.setToSetupPose()
            }
            this.creamTimer >= 2e3 && (this.creamTimer = 0, this.creamTurnTimer = 0, this.onCream = !1, this.direction = null, this.animationState = null, this.playerState = null)
        }, i.prototype.checkFreezeTime = function() {
            this.freezeTimer += this.game.time.elapsedMS, this.freezeTimer >= 3e3 && this.unfrozePlayer()
        }, i.prototype.checkStun = function() {
            if (!(this.dead || this.invulnerable || this.invincible))
                if (this.stunned) {
                    if (this.stunTimer += this.game.time.elapsedMS, this.stunTimer >= t.SETTINGS.TIME_STUNNED) switch (this.stunTimer = 0, this.stunned = !1, this.direction) {
                        case t.DIRECTION.UP:
                            this.playerState = t.PLAYER_STATE.STAND_BACK;
                            break;
                        case t.DIRECTION.DOWN:
                            this.playerState = t.PLAYER_STATE.STAND_FRONT;
                            break;
                        case t.DIRECTION.LEFT:
                        case t.DIRECTION.RIGHT:
                            this.playerState = t.PLAYER_STATE.STAND_SIDE
                    }
                } else if (this.gridCell.isStunCell) {
                switch (this.stunned = !0, this.game.ph2AudioManager.playEffect("sound_stun", !1), this.direction) {
                    case t.DIRECTION.UP:
                        this.playerState = t.PLAYER_STATE.DIZZY_BACK;
                        break;
                    case t.DIRECTION.DOWN:
                        this.playerState = t.PLAYER_STATE.DIZZY_FRONT;
                        break;
                    case t.DIRECTION.LEFT:
                    case t.DIRECTION.RIGHT:
                        this.playerState = t.PLAYER_STATE.DIZZY_SIDE
                }
                this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_CARS_RACE_ARENA), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_CARS_3_LEVELS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_CARS_5_LEVELS), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_HORSES_ARENA_1_LEVEL), this.gameMode === t.GAME_MODE.BATTLE_ROYALE && this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.AVOID_HORSES_BATTLE_ROYALE_1_LEVEL)
            }
        }, i.prototype.onStand = function() {
            this.checkStandAnimation()
        }, i.prototype.checkStandAnimation = function() {
            if (this.isStand = !0, this.onMount) {
                if (this.mountType === t.ITEM_TYPE.HORSE) switch (this.direction) {
                    case t.DIRECTION.UP:
                        this.playerState = t.PLAYER_STATE.HORSE_BACK_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        this.playerState = t.PLAYER_STATE.HORSE_FRONT_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        this.playerState = t.PLAYER_STATE.HORSE_SIDE_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.playerState = t.PLAYER_STATE.HORSE_SIDE_STAND, this.scale.x = -1;
                        break;
                    default:
                        this.playerState = t.PLAYER_STATE.HORSE_FRONT_STAND
                } else if (this.mountType === t.ITEM_TYPE.SHOPPING_CART) switch (this.direction) {
                    case t.DIRECTION.UP:
                        this.playerState = t.PLAYER_STATE.SHOPPING_CART_BACK_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        this.playerState = t.PLAYER_STATE.SHOPPING_CART_FRONT_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        this.playerState = t.PLAYER_STATE.SHOPPING_CART_SIDE_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.playerState = t.PLAYER_STATE.SHOPPING_CART_SIDE_STAND, this.scale.x = -1;
                        break;
                    default:
                        this.playerState = t.PLAYER_STATE.SHOPPING_CART_FRONT_STAND
                } else if (this.mountType === t.ITEM_TYPE.SKATEBOARD) switch (this.direction) {
                    case t.DIRECTION.UP:
                        this.playerState = t.PLAYER_STATE.SKATE_BACK_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        this.playerState = t.PLAYER_STATE.SKATE_FRONT_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        this.playerState = t.PLAYER_STATE.SKATE_SIDE_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.playerState = t.PLAYER_STATE.SKATE_SIDE_STAND, this.scale.x = -1;
                        break;
                    default:
                        this.playerState = t.PLAYER_STATE.SKATE_FRONT_STAND
                } else if (this.mountType === t.ITEM_TYPE.STAG) switch (this.direction) {
                    case t.DIRECTION.UP:
                        this.playerState = t.PLAYER_STATE.STAG_BACK_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.DOWN:
                        this.playerState = t.PLAYER_STATE.STAG_FRONT_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.LEFT:
                        this.playerState = t.PLAYER_STATE.STAG_SIDE_STAND, this.scale.x = 1;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.playerState = t.PLAYER_STATE.STAG_SIDE_STAND, this.scale.x = -1;
                        break;
                    default:
                        this.playerState = t.PLAYER_STATE.STAG_FRONT_STAND
                }
            } else switch (this.direction) {
                case t.DIRECTION.UP:
                    this.playerState = t.PLAYER_STATE.STAND_BACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.playerState = t.PLAYER_STATE.STAND_FRONT;
                    break;
                case t.DIRECTION.LEFT:
                case t.DIRECTION.RIGHT:
                    this.playerState = t.PLAYER_STATE.STAND_SIDE
            }
        }, i.prototype.updateState = function() {
            var e;
            if (!this.onCream) {
                switch (e = this, this.playerState) {
                    case t.PLAYER_STATE.STAND_FRONT:
                        this.animationState !== t.PLAYER_STATE.STAND_FRONT && (this.animationState = t.PLAYER_STATE.STAND_FRONT, this.spine.setAnimationByName(0, "stand_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAND_BACK:
                        this.animationState !== t.PLAYER_STATE.STAND_BACK && (this.animationState = t.PLAYER_STATE.STAND_BACK, this.spine.setAnimationByName(0, "stand_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAND_SIDE:
                        this.animationState !== t.PLAYER_STATE.STAND_SIDE && (this.animationState = t.PLAYER_STATE.STAND_SIDE, this.spine.setAnimationByName(0, "stand_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.DEATH:
                        this.animationState !== t.PLAYER_STATE.DEATH && (this.animationState = t.PLAYER_STATE.DEATH, this.spine.setAnimationByName(0, "death", !1).onComplete = function() {
                            e.killPlayerComplete()
                        }, this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.DIZZY_BACK:
                        this.animationState !== t.PLAYER_STATE.DIZZY_BACK && (this.animationState = t.PLAYER_STATE.DIZZY_BACK, this.spine.setAnimationByName(0, "dizzy_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.DIZZY_FRONT:
                        this.animationState !== t.PLAYER_STATE.DIZZY_FRONT && (this.animationState = t.PLAYER_STATE.DIZZY_FRONT, this.spine.setAnimationByName(0, "dizzy_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.DIZZY_SIDE:
                        this.animationState !== t.PLAYER_STATE.DIZZY_SIDE && (this.animationState = t.PLAYER_STATE.DIZZY_SIDE, this.spine.setAnimationByName(0, "dizzy_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.FACE1_FRONT:
                    case t.PLAYER_STATE.FACE1_SIDE:
                    case t.PLAYER_STATE.FACE2_FRONT:
                    case t.PLAYER_STATE.FACE2_SIDE:
                        break;
                    case t.PLAYER_STATE.HORSE_BACK:
                        this.animationState !== t.PLAYER_STATE.HORSE_BACK && (this.isStand = !1, this.animationState = t.PLAYER_STATE.HORSE_BACK, this.spine.setAnimationByName(0, "horse_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.HORSE_FRONT:
                        this.animationState !== t.PLAYER_STATE.HORSE_FRONT && (this.isStand = !1, this.animationState = t.PLAYER_STATE.HORSE_FRONT, this.spine.setAnimationByName(0, "horse_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.HORSE_SIDE:
                        this.animationState !== t.PLAYER_STATE.HORSE_SIDE && (this.isStand = !1, this.animationState = t.PLAYER_STATE.HORSE_SIDE, this.spine.setAnimationByName(0, "horse_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.HORSE_BACK_STAND:
                        this.animationState !== t.PLAYER_STATE.HORSE_BACK_STAND && (this.animationState = t.PLAYER_STATE.HORSE_BACK_STAND, this.spine.setAnimationByName(0, "horse_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.HORSE_FRONT_STAND:
                        this.animationState !== t.PLAYER_STATE.HORSE_FRONT_STAND && (this.animationState = t.PLAYER_STATE.HORSE_FRONT_STAND, this.spine.setAnimationByName(0, "horse_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.HORSE_SIDE_STAND:
                        this.animationState !== t.PLAYER_STATE.HORSE_SIDE_STAND && (this.animationState = t.PLAYER_STATE.HORSE_SIDE_STAND, this.spine.setAnimationByName(0, "horse_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SKATE_FRONT:
                        this.animationState !== t.PLAYER_STATE.SKATE_FRONT && (this.isStand = !1, this.animationState = t.PLAYER_STATE.SKATE_FRONT, this.spine.setAnimationByName(0, "skate_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SKATE_SIDE:
                        this.animationState !== t.PLAYER_STATE.SKATE_SIDE && (this.isStand = !1, this.animationState = t.PLAYER_STATE.SKATE_SIDE, this.spine.setAnimationByName(0, "skate_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SKATE_BACK:
                        this.animationState !== t.PLAYER_STATE.SKATE_BACK && (this.isStand = !1, this.animationState = t.PLAYER_STATE.SKATE_BACK, this.spine.setAnimationByName(0, "skate_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SKATE_FRONT_STAND:
                        this.animationState !== t.PLAYER_STATE.SKATE_FRONT_STAND && (this.animationState = t.PLAYER_STATE.SKATE_FRONT_STAND, this.spine.setAnimationByName(0, "skate_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SKATE_SIDE_STAND:
                        this.animationState !== t.PLAYER_STATE.SKATE_SIDE_STAND && (this.animationState = t.PLAYER_STATE.SKATE_SIDE_STAND, this.spine.setAnimationByName(0, "skate_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SKATE_BACK_STAND:
                        this.animationState !== t.PLAYER_STATE.SKATE_BACK_STAND && (this.animationState = t.PLAYER_STATE.SKATE_BACK_STAND, this.spine.setAnimationByName(0, "skate_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SHOPPING_CART_BACK:
                        this.animationState !== t.PLAYER_STATE.SHOPPING_CART_BACK && (this.isStand = !1, this.animationState = t.PLAYER_STATE.SHOPPING_CART_BACK, this.spine.setAnimationByName(0, "cart_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SHOPPING_CART_SIDE:
                        this.animationState !== t.PLAYER_STATE.SHOPPING_CART_SIDE && (this.isStand = !1, this.animationState = t.PLAYER_STATE.SHOPPING_CART_SIDE, this.spine.setAnimationByName(0, "cart_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SHOPPING_CART_FRONT:
                        this.animationState !== t.PLAYER_STATE.SHOPPING_CART_FRONT && (this.isStand = !1, this.animationState = t.PLAYER_STATE.SHOPPING_CART_FRONT, this.spine.setAnimationByName(0, "cart_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SHOPPING_CART_BACK_STAND:
                        this.animationState !== t.PLAYER_STATE.SHOPPING_CART_BACK_STAND && (this.animationState = t.PLAYER_STATE.SHOPPING_CART_BACK_STAND, this.spine.setAnimationByName(0, "cart_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SHOPPING_CART_SIDE_STAND:
                        this.animationState !== t.PLAYER_STATE.SHOPPING_CART_SIDE_STAND && (this.animationState = t.PLAYER_STATE.SHOPPING_CART_SIDE_STAND, this.spine.setAnimationByName(0, "cart_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.SHOPPING_CART_FRONT_STAND:
                        this.animationState !== t.PLAYER_STATE.SHOPPING_CART_FRONT_STAND && (this.animationState = t.PLAYER_STATE.SHOPPING_CART_FRONT_STAND, this.spine.setAnimationByName(0, "cart_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAG_BACK:
                        this.animationState !== t.PLAYER_STATE.STAG_BACK && (this.isStand = !1, this.animationState = t.PLAYER_STATE.STAG_BACK, this.spine.setAnimationByName(0, "stag_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAG_FRONT:
                        this.animationState !== t.PLAYER_STATE.STAG_FRONT && (this.isStand = !1, this.animationState = t.PLAYER_STATE.STAG_FRONT, this.spine.setAnimationByName(0, "stag_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAG_SIDE:
                        this.animationState !== t.PLAYER_STATE.STAG_SIDE && (this.isStand = !1, this.animationState = t.PLAYER_STATE.STAG_SIDE, this.spine.setAnimationByName(0, "stag_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAG_BACK_STAND:
                        this.animationState !== t.PLAYER_STATE.STAG_BACK_STAND && (this.animationState = t.PLAYER_STATE.STAG_BACK_STAND, this.spine.setAnimationByName(0, "stag_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAG_FRONT_STAND:
                        this.animationState !== t.PLAYER_STATE.STAG_FRONT_STAND && (this.animationState = t.PLAYER_STATE.STAG_FRONT_STAND, this.spine.setAnimationByName(0, "stag_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.STAG_SIDE_STAND:
                        this.animationState !== t.PLAYER_STATE.STAG_SIDE_STAND && (this.animationState = t.PLAYER_STATE.STAG_SIDE_STAND, this.spine.setAnimationByName(0, "stag_side", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.WALK_BACK:
                        this.animationState !== t.PLAYER_STATE.WALK_BACK && (this.animationState = t.PLAYER_STATE.WALK_BACK, this.spine.setAnimationByName(0, "walk_back", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.WALK_FRONT:
                        this.animationState !== t.PLAYER_STATE.WALK_FRONT && (this.animationState = t.PLAYER_STATE.WALK_FRONT, this.spine.setAnimationByName(0, "walk_front", !0), this.spine.setToSetupPose());
                        break;
                    case t.PLAYER_STATE.WALK_SIDE:
                        this.animationState !== t.PLAYER_STATE.WALK_SIDE && (this.animationState = t.PLAYER_STATE.WALK_SIDE, this.spine.setAnimationByName(0, "walk_side", !0), this.spine.setToSetupPose())
                }
                this.dead && this.playerState !== t.PLAYER_STATE.DEATH && (this.playerState = t.PLAYER_STATE.DEATH)
            }
        }, i.prototype.createMount = function(e) {
            var i;
            switch (null !== this.mount && (this.add(this.spine), this.mount.destroy(!0), this.mount = null), e) {
                case t.ITEM_TYPE.HORSE:
                    this.mount = new t.HorseMount(this.game, this.grid, this, this.direction), this.game.ph2AudioManager.playEffect("sound_frog", !1), i = 0;
                    break;
                case t.ITEM_TYPE.SKATEBOARD:
                    this.mount = new t.Skateboard(this.game, this.grid, this, this.direction), this.game.ph2AudioManager.playEffect("getPlane", !1), i = 0;
                    break;
                case t.ITEM_TYPE.SHOPPING_CART:
                    this.mount = new t.ShoppingCart(this.game, this.grid, this, this.direction), this.game.ph2AudioManager.playEffect("sound_tractor", !1), i = 0;
                    break;
                case t.ITEM_TYPE.STAG:
                    this.mount = new t.Stag(this.game, this.grid, this, this.direction), this.game.ph2AudioManager.playEffect("sound_sealion", !1), i = 0
            }
            this.onMount = !0, this.mountType = e, this.mount.direction = this.direction, this.add(this.mount), this.spine.position.set(0, i), this.mount.bone.addChild(this.spine), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.RIDE_2_KINDS_OF_VEHICLES_IN_1_LEVEL, this.mountType)
        }, i.prototype.loseMount = function() {
            this.add(this.spine), this.losingMount = !0, this.mount.initiateDestruction(), this.game.time.events.add(1200, this.destroyMount, this)
        }, i.prototype.destroyMount = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.mount.alpha = 0, this.onMount = !1, this.mountType = null, this.losingMount = !1, this.spine.position.set(0, e), this.mount.destroy(!0), this.invulnerable = !0, this.tweenInvulnerable = this.game.add.tween(this).to({
                alpha: .5
            }, 100, "Linear", !0, 0, -1, !0)
        }, i.prototype.updateMount = function() {
            null !== this.mount && this.mount.update()
        }, i.prototype.cheatItem = function(e) {
            switch (e) {
                case t.ITEM_TYPE.BOMB:
                    if (this.bombs >= t.SETTINGS.MAX_BOMBS) return;
                    this.bombs++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS");
                    break;
                case t.ITEM_TYPE.POWER:
                    if (this.power >= t.SETTINGS.MAX_BOMB_POWER) return;
                    this.power++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS");
                    break;
                case t.ITEM_TYPE.SPEED:
                    if (this.speedPickedUp >= t.SETTINGS.MAX_SPEED) return;
                    this.speed = this.speed + this.speed * t.SETTINGS.SPEED_INCREASE, this.speedPickedUp++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS");
                    break;
                case t.ITEM_TYPE.KICK_BOMBS:
                    this.canKickBombs = !0;
                    break;
                case t.ITEM_TYPE.SHIELD:
                    this.shieldActive = !0, this.createWeaponSkin(t.ITEM_TYPE.SHIELD);
                    break;
                case t.ITEM_TYPE.HEART:
                    this.lives++, this.game.ph2NotificationManager.postNotification("_UPDATE_UIS");
                    break;
                case t.ITEM_TYPE.INVINCIBILITY:
                    this.invincibilityTimer = 0, this.invincible = !0, this.animationRainbow.visible = !0, this.animationRainbow.ph2Animations.play("rainbows_stand", 1, !0)
            }
        }, i.prototype.cheatWeapon = function(t) {
            this.createWeapon(t)
        }, i.prototype.cheatMount = function(t) {
            this.createMount(t)
        }, i
    }(Phaser.Group);
    t.Player = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o, r, h, l, c) {
            var u = e.call(this, i, s, n, a, o, r, h, l) || this;
            switch (u.isAI = !0, u.idle = !0, u.moving = !1, u.notSafe = !1, u.awaitingNewAction = !0, u.awaitingStunToEnd = !1, u.idleTimer = 0, u.currentPathCell = 0, u.lives = 1, u.freeCells = [], u.dangerCells = [], u.pathCells = [], u.previousCellX = 0, u.previousCellY = 0, u.timeCheckCell = 1e3, u.timerSameCell = 1e3, u.difficulty = c, u.timeToKill = 0, u.difficulty) {
                case t.DIFFICULTY.EASY:
                    u.timesToSearchPlayer = t.SETTINGS.TIMES_TO_SEARCH_PLAYER_EASY, u.chanceToSearchPlayer = t.SETTINGS.CHANCE_TO_SEARCH_PLAYER_EASY;
                    break;
                case t.DIFFICULTY.NORMAL:
                    u.timesToSearchPlayer = t.SETTINGS.TIMES_TO_SEARCH_PLAYER_NORMAL, u.chanceToSearchPlayer = t.SETTINGS.CHANCE_TO_SEARCH_PLAYER_NORMAL;
                    break;
                case t.DIFFICULTY.HARD:
                    u.timesToSearchPlayer = t.SETTINGS.TIMES_TO_SEARCH_PLAYER_HARD, u.chanceToSearchPlayer = t.SETTINGS.CHANCE_TO_SEARCH_PLAYER_HARD
            }
            return u.grid.gameMode === t.GAME_MODE.NEW_PACMAN && u.createWeapon(t.ITEM_TYPE.FLAMETHROWER), u
        }
        return __extends(i, e), i.prototype.restartAI = function() {
            this.idle = !1, this.notSafe = !1, this.moving = !1, this.awaitingNewAction = !0, this.awaitingStunToEnd = !1, this.idleTimer = 0, this.currentPathCell = 0, this.freeCells = [], this.dangerCells = [], this.pathCells = []
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.waitStunToRestart(), this.gameStatus === t.GAME_STATUS.GAME_OVER || this.gameStatus === t.GAME_STATUS.PAUSED || this.dead || this.attacking || this.frozen || (this.updateIdle(), this.updateMovement(), this.checkSameCell(), this.updateSense())
        }, i.prototype.waitStunToRestart = function() {
            this.stunned ? this.awaitingStunToEnd = !0 : this.awaitingStunToEnd && (this.awaitingStunToEnd = !1, this.restartAI())
        }, i.prototype.updateIdle = function() {
            this.idle && (this.idleTimer += this.game.time.elapsedMS, this.idleTimer >= 100 && (this.idle = !1, this.idleTimer = 0))
        }, i.prototype.updateMovement = function() {
            this.idle ? this.movingAnimation = !1 : this.moving ? (this.movingAnimation = !0, this.checkSafeMovement()) : (this.chooseCellToMove(), this.findFreeCells(), this.game.rnd.integerInRange(1, 100) <= this.chanceToSearchPlayer || this.timeToKill >= this.timesToSearchPlayer ? (this.timeToKill = 0, this.findPathToPlayers()) : (this.timeToKill++, this.findClearPath()))
        }, i.prototype.checkSameCell = function() {
            this.dead || this.notSafe || this.jumping || this.attacking || this.frozen || this.stunned || (this.timerSameCell += this.game.time.elapsedMS, this.timerSameCell >= this.timeCheckCell && (this.timerSameCell = 0, this.previousCellX === this.gridPositionX && this.previousCellY === this.gridPositionY ? this.restartAI() : (this.previousCellX = this.gridPositionX, this.previousCellY = this.gridPositionY)))
        }, i.prototype.updateSense = function() {
            this.checkFireCells(), this.checkFreeCells()
        }, i.prototype.checkFireCells = function() {
            var t, e, i;
            for (this.dangerCells = [], t = 0; t < this.grid.bombs.length; t++)
                for (i = this.grid.bombs[t].bombExplosion, e = 0; e < i.fireCells.length; e++) this.dangerCells.push(i.fireCells[e])
        }, i.prototype.checkFreeCells = function() {
            var e, i, s, n, a;
            for (this.freeCells = [], this.gridPositionX > 0 && (s = this.grid.cells[this.gridPositionX - 1][this.gridPositionY]).isEmpty && this.freeCells.push(s), this.gridPositionX < t.SETTINGS.GRID_WIDTH - 1 && (s = this.grid.cells[this.gridPositionX + 1][this.gridPositionY]).isEmpty && this.freeCells.push(s), this.gridPositionY > 0 && (s = this.grid.cells[this.gridPositionX][this.gridPositionY - 1]).isEmpty && this.freeCells.push(s), this.gridPositionY < t.SETTINGS.GRID_HEIGHT - 1 && (s = this.grid.cells[this.gridPositionX][this.gridPositionY + 1]).isEmpty && this.freeCells.push(s), e = 0; e < this.dangerCells.length; e++)
                for (n = this.dangerCells[e], i = this.freeCells.length - 1; i >= 0; i--) a = this.freeCells[i], n.gridPositionX === a.gridPositionX && n.gridPositionY === a.gridPositionY && this.freeCells.splice(i, 1)
        }, i.prototype.findFreeCells = function() {
            var e, i, s, n, a, o, r, h;
            for (this.freeCells = [], s = this.gridPositionX - 1 < 0 ? 0 : this.gridPositionX - 1, n = this.gridPositionX + 1 > t.SETTINGS.GRID_WIDTH - 1 ? t.SETTINGS.GRID_WIDTH - 1 : this.gridPositionX + 1, a = this.gridPositionY - 1 < 0 ? 0 : this.gridPositionY - 1, o = this.gridPositionY + 1 > t.SETTINGS.GRID_HEIGHT - 1 ? t.SETTINGS.GRID_HEIGHT - 1 : this.gridPositionY + 1, e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                for (i = a; i < o + 1; i++) this.grid.cells[e][i].isEmpty && this.freeCells.push(this.grid.cells[e][i]);
            for (e = 0; e < this.grid.cells[this.gridPositionX].length; e++)
                for (i = s; i < n + 1; i++) this.grid.cells[i][e].isEmpty && this.freeCells.push(this.grid.cells[i][e]);
            for (e = this.freeCells.length - 1; e >= 0; e--)
                for (r = this.freeCells[e], i = 0; i < this.dangerCells.length; i++) h = this.dangerCells[i], r.gridPositionX === h.gridPositionX && r.gridPositionY === h.gridPositionY && (this.freeCells.splice(e, 1), i = this.dangerCells.length)
        }, i.prototype.findClearPath = function() {
            var t, e, i, s, n, a, o = 999;
            if (s = [], a = [], e = this.grid.astarGrid.grid[this.gridPositionX][this.gridPositionY], this.notSafe)
                for (t = 0; t < this.freeCells.length; t++) n = this.freeCells[t], i = this.grid.astarGrid.grid[n.gridPositionX][n.gridPositionY], (s = astar.search(this.grid.astarGrid, e, i)).length > 0 && s.length < o && (a = s, o = s.length);
            else {
                if (this.freeCells.length <= 0) return void this.restartAI();
                n = _.sample(this.freeCells), i = this.grid.astarGrid.grid[n.gridPositionX][n.gridPositionY], a = astar.search(this.grid.astarGrid, e, i)
            }
            for (this.pathCells = [], t = 0; t < a.length; t++) this.pathCells.push(this.grid.cells[a[t].x][a[t].y]);
            this.pathCells.length > 0 && (this.moving = !0, this.currentPathCell = 0, this.previousCell = this.gridCell, this.safeCell = this.pathCells[this.currentPathCell], this.nextSafeDirection(this.gridPositionX, this.gridPositionY, this.safeCell))
        }, i.prototype.findPathToPlayers = function() {
            var e, i, s, n, a;
            for (i = this.grid.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.grid.players[0] : this.grid.players[this.game.rnd.integerInRange(0, 1)], s = this.grid.astarGrid.grid[this.gridPositionX][this.gridPositionY], n = this.grid.astarGrid.grid[i.gridPositionX][i.gridPositionY], a = astar.search(this.grid.astarGrid, s, n), this.pathCells = [], e = 0; e < a.length; e++) this.pathCells.push(this.grid.cells[a[e].x][a[e].y]);
            this.pathCells.length > 0 ? (this.moving = !0, this.currentPathCell = 0, this.previousCell = this.gridCell, this.safeCell = this.pathCells[this.currentPathCell], this.nextSafeDirection(this.gridPositionX, this.gridPositionY, this.safeCell)) : this.moveNextToPlayers()
        }, i.prototype.moveNextToPlayers = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d;
            switch (r = this.grid.playerMode === t.PLAYER_MODE.SINGLE_PLAYER ? this.grid.players[0] : this.grid.players[this.game.rnd.integerInRange(0, 1)], h = this.grid.astarGrid.grid[this.gridPositionX][this.gridPositionY], r.gridPositionX < this.gridPositionX ? d = t.DIRECTION.LEFT : r.gridPositionX > this.gridPositionX ? d = t.DIRECTION.RIGHT : r.gridPositionY < this.gridPositionY ? d = t.DIRECTION.UP : r.gridPositionY > this.gridPositionY && (d = t.DIRECTION.DOWN), s = this.gridPositionX - 1 < 0 ? 0 : this.gridPositionX - 1, n = this.gridPositionX + 1 > t.SETTINGS.GRID_WIDTH - 1 ? t.SETTINGS.GRID_WIDTH - 1 : this.gridPositionX + 1, a = this.gridPositionY - 1 < 0 ? 0 : this.gridPositionY - 1, o = this.gridPositionY + 1 > t.SETTINGS.GRID_HEIGHT - 1 ? t.SETTINGS.GRID_HEIGHT - 1 : this.gridPositionY + 1, this.freeCells = [], d) {
                case t.DIRECTION.LEFT:
                    for (e = this.gridPositionX; e >= 0; e--)
                        for (i = a; i < o + 1; i++) this.grid.cells[e][i].isEmpty && this.freeCells.push(this.grid.cells[e][i]);
                    break;
                case t.DIRECTION.RIGHT:
                    for (e = this.gridPositionX; e < t.SETTINGS.GRID_WIDTH - 1; e++)
                        for (i = a; i < o + 1; i++) this.grid.cells[e][i].isEmpty && this.freeCells.push(this.grid.cells[e][i]);
                    break;
                case t.DIRECTION.UP:
                    for (e = this.gridPositionY; e >= 0; e--)
                        for (i = s; i < n + 1; i++) this.grid.cells[i][e].isEmpty && this.freeCells.push(this.grid.cells[i][e]);
                    break;
                case t.DIRECTION.DOWN:
                    for (e = this.gridPositionY; e < t.SETTINGS.GRID_HEIGHT - 1; e++)
                        for (i = s; i < n + 1; i++) this.grid.cells[i][e].isEmpty && this.freeCells.push(this.grid.cells[i][e])
            }
            if (this.freeCells.length <= 0) this.findClearPath();
            else {
                for (c = _.sample(this.freeCells), l = this.grid.astarGrid.grid[c.gridPositionX][c.gridPositionY], u = astar.search(this.grid.astarGrid, h, l), this.pathCells = [], e = 0; e < u.length; e++) this.pathCells.push(this.grid.cells[u[e].x][u[e].y]);
                this.pathCells.length > 0 ? (this.moving = !0, this.currentPathCell = 0, this.previousCell = this.gridCell, this.safeCell = this.pathCells[this.currentPathCell], this.nextSafeDirection(this.gridPositionX, this.gridPositionY, this.safeCell)) : this.findClearPath()
            }
        }, i.prototype.chooseCellToMove = function() {
            var e, i, s;
            for (i = [], e = 0; e < this.freeCells.length; e++) i.push(this.freeCells[e]);
            i.length > 0 ? (s = this.game.rnd.integerInRange(0, i.length - 1), this.destinationCell = i[s], this.notSafe = !1, this.awaitingNewAction = !1, this.gridPositionX - 1 === this.destinationCell.gridPositionX ? this.direction = t.DIRECTION.LEFT : this.gridPositionX + 1 === this.destinationCell.gridPositionX ? this.direction = t.DIRECTION.RIGHT : this.gridPositionY - 1 === this.destinationCell.gridPositionY ? this.direction = t.DIRECTION.UP : this.gridPositionY + 1 === this.destinationCell.gridPositionY && (this.direction = t.DIRECTION.DOWN)) : this.notSafe = !0
        }, i.prototype.canPressButtons = function() {
            if (this.gameStatus !== t.GAME_STATUS.GAME_OVER && this.gameStatus !== t.GAME_STATUS.PAUSED && !this.dead && !this.jumping && !(this.attacking || this.losingMount || this.stunned || this.teleporting || this.onCream || this.inBooster || this.frozen)) switch (this.safeDirection) {
                case t.DIRECTION.UP:
                    this.inputUpPressed();
                    break;
                case t.DIRECTION.DOWN:
                    this.inputDownPressed();
                    break;
                case t.DIRECTION.LEFT:
                    this.inputLeftPressed();
                    break;
                case t.DIRECTION.RIGHT:
                    this.inputRightPressed()
            }
        }, i.prototype.checkSafeMovement = function() {
            this.dead || (this.safeCell.isEmpty && !this.safeCell.isDangerCell || (this.findFreeCells(), this.game.rnd.integerInRange(1, 100) <= this.chanceToSearchPlayer || this.timeToKill >= this.timesToSearchPlayer ? (this.timeToKill = 0, this.findPathToPlayers()) : (this.timeToKill++, this.findClearPath())), this.canPressButtons(), Phaser.Math.distance(this.previousCell.centerX, this.previousCell.centerY, this.x, this.y) >= t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE && (this.currentPathCell++, this.previousCell = this.safeCell, this.currentPathCell < this.pathCells.length ? (this.safeCell = this.pathCells[this.currentPathCell], this.checkAdjacentCells(), this.nextSafeDirection(this.gridPositionX, this.gridPositionY, this.safeCell)) : (this.idle = !0, this.moving = !1, this.awaitingNewAction = !0, this.weaponActive ? this.checkWeaponToUse() : this.mountType === t.ITEM_TYPE.STAG ? this.checkUseStag() : this.mountType === t.ITEM_TYPE.HORSE ? this.checkUseHorse() : this.checkCellsToBomb()), this.awaitingNewAction = !0))
        }, i.prototype.checkCellsToBomb = function() {
            var e, i = !1;
            this.gridPositionX > 0 && ((e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY]).isEmpty || e.cellContains !== t.MAP.BLOCK || (i = !0)), this.gridPositionX < t.SETTINGS.GRID_WIDTH - 1 && ((e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY]).isEmpty || e.cellContains !== t.MAP.BLOCK || (i = !0)), this.gridPositionY > 0 && ((e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1]).isEmpty || e.cellContains !== t.MAP.BLOCK || (i = !0)), this.gridPositionY < t.SETTINGS.GRID_HEIGHT - 1 && ((e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1]).isEmpty || e.cellContains !== t.MAP.BLOCK || (i = !0)), this.checkBombsNearby() && (i || this.checkPlayersNearby()) && this.putBomb()
        }, i.prototype.checkBombsNearby = function() {
            var e, i, s, n, a, o, r, h, l, c;
            for (c = 0, s = this.gridPositionX, n = this.gridPositionY, l = [], a = s - 2 <= 0 ? 0 : s - 2, o = n - 2 <= 0 ? 0 : n - 2, r = s + 2 >= t.SETTINGS.GRID_WIDTH ? t.SETTINGS.GRID_WIDTH : s + 2, h = n + 2 >= t.SETTINGS.GRID_HEIGHT ? t.SETTINGS.GRID_HEIGHT : n + 2, e = a; e < r; e++)
                for (i = o; i < h; i++) l.push(this.grid.cells[e][i]);
            for (e = 0; e < l.length; e++) l[e].cellContains === t.MAP.BOMB && c++;
            return !(c > 0)
        }, i.prototype.canAttack = function() {
            if (this.gameStatus === t.GAME_STATUS.GAME_OVER) return !1;
            if (this.gameStatus === t.GAME_STATUS.PAUSED) return !1;
            if (this.dead) return !1;
            if (this.jumping) return !1;
            if (this.attacking) return !1;
            if (this.losingMount) return !1;
            if (!(this.teleporting || this.onCream || this.inBooster || this.frozen)) return !0
        }, i.prototype.checkPlayersNearby = function() {
            var e, i, s, n;
            for (e = 0; e < this.grid.players.length; e++)
                if (this.grid.players[e].playerID !== this.playerID && (i = Math.abs(this.gridPositionX - this.grid.players[e].gridPositionX), s = Math.abs(this.gridPositionY - this.grid.players[e].gridPositionY), i <= 2 && s <= 2))
                    if (n = this.game.rnd.integerInRange(1, 100), this.grid.difficulty === t.DIFFICULTY.EASY) {
                        if (n <= 30) return !0
                    } else {
                        if (this.grid.difficulty !== t.DIFFICULTY.NORMAL) return !0;
                        if (n <= 75) return !0
                    }
            return !1
        }, i.prototype.nextSafeDirection = function(e, i, s) {
            e - 1 === s.gridPositionX ? this.safeDirection = t.DIRECTION.LEFT : e + 1 === s.gridPositionX ? this.safeDirection = t.DIRECTION.RIGHT : i - 1 === s.gridPositionY ? this.safeDirection = t.DIRECTION.UP : i + 1 === s.gridPositionY && (this.safeDirection = t.DIRECTION.DOWN)
        }, i.prototype.checkAdjacentCells = function() {
            this.weaponActive && this.weaponCurrentType === t.ITEM_TYPE.HAMMER && this.useHammer()
        }, i.prototype.checkUseStag = function() {
            var e;
            switch (this.direction) {
                case t.DIRECTION.UP:
                    this.gridPositionY - 1 >= 0 && (e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1], this.checkStagAttack(e));
                    break;
                case t.DIRECTION.DOWN:
                    this.gridPositionY + 1 < t.SETTINGS.GRID_HEIGHT && (e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1], this.checkStagAttack(e));
                    break;
                case t.DIRECTION.LEFT:
                    this.gridPositionX - 1 >= 0 && (e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY], this.checkStagAttack(e));
                    break;
                case t.DIRECTION.RIGHT:
                    this.gridPositionX + 1 < t.SETTINGS.GRID_WIDTH && (e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY], this.checkStagAttack(e));
                    break;
                default:
                    this.checkCellsToBomb()
            }
        }, i.prototype.checkUseHorse = function() {
            this.checkCellsToBomb()
        }, i.prototype.checkWeaponToUse = function() {
            if (this.canAttack()) switch (this.weaponCurrentType) {
                case t.ITEM_TYPE.HAMMER:
                    this.useHammer();
                    break;
                case t.ITEM_TYPE.FLAMETHROWER:
                    this.useFlamethrower();
                    break;
                case t.ITEM_TYPE.LASER_GUN:
                case t.ITEM_TYPE.LIGHTING_GUN:
                case t.ITEM_TYPE.MIGHTY_HAMMER:
                case t.ITEM_TYPE.DOLL_BOMB:
                    this.useWeapon();
                    break;
                case t.ITEM_TYPE.ICE_GUN:
                    this.grid.gameMode === t.GAME_MODE.ICE_MAN ? this.useIceWeapon() : this.useWeapon()
            }
        }, i.prototype.useIceWeapon = function() {
            var e, i, s, n, a, o, r, h, l, c, u;
            for (s = this.gridPositionX, n = this.gridPositionY, r = this.grid.monsters, l = [], c = !1, a = n - 3 >= 0 ? n - 3 : 0, o = n + 3 < t.SETTINGS.GRID_HEIGHT ? n + 3 : t.SETTINGS.GRID_HEIGHT, e = a; e < o; e++) l.push(this.grid.cells[s][e]);
            for (a = s - 3 >= 0 ? s - 3 : 0, o = s + 3 < t.SETTINGS.GRID_WIDTH ? s + 3 : t.SETTINGS.GRID_WIDTH, e = a; e < o; e++) l.push(this.grid.cells[e][s]);
            for (i = 0; i < r.length; i++)
                for (h = r[i], e = 0; e < l.length; e++) h.gridPositionX === s ? h.gridPositionY < n ? (c = !0, u = t.DIRECTION.UP, i = r.length, e = l.length) : h.gridPositionY > n && (c = !0, u = t.DIRECTION.DOWN, i = r.length, e = l.length) : h.gridPositionY === n && (h.gridPositionX < s ? (c = !0, u = t.DIRECTION.LEFT, i = r.length, e = l.length) : h.gridPositionX > s && (c = !0, u = t.DIRECTION.RIGHT, i = r.length, e = l.length));
            c && (this.direction = u, this.useWeapon())
        }, i.prototype.checkPlayerNextCell = function(t, e) {
            var i;
            for (i = 0; i < this.grid.players.length; i++)
                if (this.grid.players[i].gridCell === t) return this.direction = e, this.useWeapon(), !0;
            return !1
        }, i.prototype.useHammer = function() {
            var e;
            if (this.canAttack()) {
                if (this.gridPositionX - 1 > 0) {
                    if (e = this.grid.cells[this.gridPositionX - 1][this.gridPositionY], this.checkPlayerNextCell(e, t.DIRECTION.LEFT)) return;
                    if (e.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.LEFT, void this.useWeapon()
                }
                if (this.gridPositionX + 1 < t.SETTINGS.GRID_WIDTH - 1) {
                    if (e = this.grid.cells[this.gridPositionX + 1][this.gridPositionY], this.checkPlayerNextCell(e, t.DIRECTION.RIGHT)) return;
                    if (e.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.RIGHT, void this.useWeapon()
                }
                if (this.gridPositionY - 1 > 0) {
                    if (e = this.grid.cells[this.gridPositionX][this.gridPositionY - 1], this.checkPlayerNextCell(e, t.DIRECTION.UP)) return;
                    if (e.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.UP, void this.useWeapon()
                }
                if (this.gridPositionY + 1 < t.SETTINGS.GRID_HEIGHT - 1) {
                    if (e = this.grid.cells[this.gridPositionX][this.gridPositionY + 1], this.checkPlayerNextCell(e, t.DIRECTION.DOWN)) return;
                    if (e.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.DOWN, void this.useWeapon()
                }
            }
        }, i.prototype.useFlamethrower = function() {
            var e, i, s;
            if (this.canAttack()) {
                if (this.gridPositionX - 1 > 0)
                    for ((s = this.gridPositionX - 3) < 0 && (s = 0), e = this.gridPositionX - 1; e >= s; e--) {
                        if (i = this.grid.cells[e][this.gridPositionY], this.checkPlayerNextCell(i, t.DIRECTION.LEFT)) return;
                        if (i.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.LEFT, void this.useWeapon()
                    }
                if (this.gridPositionX + 1 < t.SETTINGS.GRID_WIDTH - 1)
                    for ((s = this.gridPositionX + 3) > t.SETTINGS.GRID_WIDTH - 1 && (s = t.SETTINGS.GRID_WIDTH), e = this.gridPositionX + 1; e < s; e++) {
                        if (i = this.grid.cells[e][this.gridPositionY], this.checkPlayerNextCell(i, t.DIRECTION.RIGHT)) return;
                        if (i.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.RIGHT, void this.useWeapon()
                    }
                if (this.gridPositionY - 1 > 0)
                    for ((s = this.gridPositionY - 3) < 0 && (s = 0), e = this.gridPositionY - 1; e >= s; e--) {
                        if (i = this.grid.cells[this.gridPositionX][e], this.checkPlayerNextCell(i, t.DIRECTION.UP)) return;
                        if (i.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.UP, void this.useWeapon()
                    }
                if (this.gridPositionY + 1 < t.SETTINGS.GRID_HEIGHT - 1)
                    for ((s = this.gridPositionY + 3) > t.SETTINGS.GRID_HEIGHT - 1 && (s = t.SETTINGS.GRID_HEIGHT), e = this.gridPositionY + 1; e < s; e++) {
                        if (i = this.grid.cells[this.gridPositionX][e], this.checkPlayerNextCell(i, t.DIRECTION.DOWN)) return;
                        if (i.cellContains === t.MAP.BLOCK) return this.direction = t.DIRECTION.DOWN, void this.useWeapon()
                    }
            }
        }, i
    }(t.Player);
    t.PlayerAI = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a, o, r, h, l, c) {
            var u = e.call(this, i, s, n, a, o, r, h, l) || this;
            return u.playerMode = c, u.indicatorTimer = 0, u.grid.difficulty === t.DIFFICULTY.EASY && (u.shieldActive = !0, u.createWeaponSkin(t.ITEM_TYPE.SHIELD)), u.createInputController(), u.createPlayerIndicator(), u
        }
        return __extends(i, e), i.prototype.createInputController = function() {
            this.inputController = new t.InputController(this.game, this)
        }, i.prototype.createPlayerIndicator = function() {}, i.prototype.checkPlayerIndicator = function() {}, i.prototype.update = function() {
            e.prototype.update.call(this), this.gameStatus !== t.GAME_STATUS.GAME_OVER && this.gameStatus !== t.GAME_STATUS.PAUSED && (this.inputController.checkInput(), this.checkPlayerIndicator())
        }, i
    }(t.Player);
    t.PlayerHuman = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a) {
            var o = e.call(this, i) || this;
            return o.game = i, o.grid = s, o.carColor = a, o.movingSpeed = .175, o.gameStatus = t.GAME_STATUS.PLAYING, o.gameScale = t.SETTINGS.SCALE, o.isMoving = !0, o.previousCell = o.gridCell, o.pathCells = [], o.currentPathCell = 0, o.timerSound = 0, o.createRoute(n), o.createCarAnimation(), o.nextSafeDirection(o.nextCell), o
        }
        return __extends(i, e), i.prototype.createCarAnimation = function() {
            var e;
            t.SETTINGS.SCALE, t.SETTINGS.CELL_HEIGHT, e = "white" === this.carColor ? "car_white_right.png" : "car_red_right.png", this.carSprite = new Phaser.Sprite(this.game, 0, 0, "atlas_anim", e), this.carSprite.anchor.set(.5), this.addChild(this.carSprite), this.grid.rowsGroup[this.gridPositionY].add(this)
        }, i.prototype.createRoute = function(t) {
            var e, i, s, n, a;
            for (i = t.length, e = 0; e < i; e++) n = t[e][0], a = t[e][1], s = this.grid.cells[n][a], this.pathCells.push(s);
            this.x = this.pathCells[0].centerX, this.y = this.pathCells[0].centerY, this.gridCell = this.pathCells[0], this.gridPositionX = this.pathCells[0].gridPositionX, this.gridPositionY = this.pathCells[0].gridPositionY, this.previousCell = this.pathCells[0], this.nextCell = this.pathCells[1]
        }, i.prototype.pauseTrain = function() {
            this.gameStatus = t.GAME_STATUS.PAUSED
        }, i.prototype.resumeTrain = function() {
            this.gameStatus = t.GAME_STATUS.PLAYING
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.PAUSED && this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.isMoving && (this.updateCarCell(), this.checkMovement())
        }, i.prototype.checkMovement = function() {
            switch (this.direction) {
                case t.DIRECTION.UP:
                    this.moveCarUp();
                    break;
                case t.DIRECTION.DOWN:
                    this.moveCarDown();
                    break;
                case t.DIRECTION.LEFT:
                    this.moveCarLeft();
                    break;
                case t.DIRECTION.RIGHT:
                    this.moveCarRight()
            }
            this.checkNextCellPassedBy(), (this.direction === t.DIRECTION.LEFT || this.direction === t.DIRECTION.RIGHT ? Math.abs(this.x - this.nextCell.centerX) : Math.abs(this.y - this.nextCell.centerY)) > .25 * t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE || (++this.currentPathCell >= this.pathCells.length && (this.currentPathCell = 0), this.x = this.nextCell.centerX, this.y = this.nextCell.centerY, this.nextCell = this.pathCells[this.currentPathCell], this.nextSafeDirection(this.nextCell))
        }, i.prototype.checkNextCellPassedBy = function() {
            this.direction === t.DIRECTION.LEFT ? this.x < this.nextCell.centerX && (this.x = this.nextCell.centerX) : this.direction === t.DIRECTION.RIGHT ? this.x > this.nextCell.centerX && (this.x = this.nextCell.centerX) : this.direction === t.DIRECTION.UP ? this.y < this.nextCell.centerY && (this.y = this.nextCell.centerY) : this.direction === t.DIRECTION.DOWN && this.y > this.nextCell.centerY && (this.y = this.nextCell.centerY)
        }, i.prototype.nextSafeDirection = function(e) {
            e.gridPositionX < this.gridPositionX ? (this.direction = t.DIRECTION.LEFT, this.carSprite.scale.x = 1, this.carSprite.frameName = "white" === this.carColor ? "car_white_right.png" : "car_red_right.png") : e.gridPositionX > this.gridPositionX ? (this.direction = t.DIRECTION.RIGHT, this.carSprite.scale.x = -1, this.carSprite.frameName = "white" === this.carColor ? "car_white_right.png" : "car_red_right.png") : e.gridPositionY < this.gridPositionY ? (this.direction = t.DIRECTION.UP, this.carSprite.scale.x = 1, this.carSprite.frameName = "white" === this.carColor ? "car_white_back.png.png" : "car_red_back.png") : e.gridPositionY > this.gridPositionY && (this.direction = t.DIRECTION.DOWN, this.carSprite.scale.x = 1, this.carSprite.frameName = "white" === this.carColor ? "car_white_front.png" : "car_red_front.png")
        }, i.prototype.updateCarCell = function() {
            var e, i;
            switch (this.direction) {
                case t.DIRECTION.LEFT:
                    (e = Math.floor(this.x / (t.SETTINGS.CELL_WIDTH * this.gameScale))) !== this.gridPositionX && (e === this.gridPositionX - 1 ? (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[e][this.gridPositionY], this.gridPositionX = e, this.gridCell.isStunCell = !0) : (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[this.gridPositionX - 1][this.gridPositionY], this.gridPositionX = this.gridPositionX - 1, this.x = this.gridCell.right, this.gridCell.isStunCell = !0));
                    break;
                case t.DIRECTION.RIGHT:
                    (e = Math.floor(this.x / (t.SETTINGS.CELL_WIDTH * this.gameScale))) !== this.gridPositionX && (e === this.gridPositionX + 1 ? (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[e][this.gridPositionY], this.gridPositionX = e, this.gridCell.isStunCell = !0) : (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[this.gridPositionX + 1][this.gridPositionY], this.gridPositionX = this.gridPositionX + 1, this.x = this.gridCell.left, this.gridCell.isStunCell = !0));
                    break;
                case t.DIRECTION.UP:
                    (i = Math.floor(this.y / (t.SETTINGS.CELL_HEIGHT * this.gameScale))) !== this.gridPositionY && (i === this.gridPositionY - 1 ? (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[this.gridPositionX][i], this.gridPositionY = i, this.gridCell.isStunCell = !0) : (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[this.gridPositionX][this.gridPositionY - 1], this.gridPositionY = this.gridPositionY - 1, this.y = this.gridCell.bottom, this.gridCell.isStunCell = !0), this.grid.rowsGroup[this.gridPositionY].add(this));
                    break;
                case t.DIRECTION.DOWN:
                    (i = Math.floor(this.y / (t.SETTINGS.CELL_HEIGHT * this.gameScale))) !== this.gridPositionY && (i === this.gridPositionY + 1 ? (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[this.gridPositionX][i], this.gridPositionY = i, this.gridCell.isStunCell = !0) : (this.gridCell.isStunCell = !1, this.gridCell = this.grid.cells[this.gridPositionX][this.gridPositionY + 1], this.gridPositionY = this.gridPositionY + 1, this.y = this.gridCell.top, this.gridCell.isStunCell = !0), this.grid.rowsGroup[this.gridPositionY].add(this))
            }
        }, i.prototype.moveCarLeft = function() {
            var t;
            t = this.x - this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionX - 1 >= 0 ? t >= this.grid.cells[this.gridPositionX - 1][this.gridPositionY].centerX && (this.x -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : t >= this.grid.cells[0][this.gridPositionY].left && (this.x -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.moveCarRight = function() {
            var e;
            e = this.x + this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionX + 1 <= t.SETTINGS.GRID_WIDTH - 1 ? e <= this.grid.cells[this.gridPositionX + 1][this.gridPositionY].centerX && (this.x += this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : e <= this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.gridPositionY].right && (this.x += this.movingSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.moveCarUp = function() {
            var t;
            t = this.y - this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionY - 1 >= 0 ? t >= this.grid.cells[this.gridPositionX][this.gridPositionY - 1].centerY && (this.y -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : t >= this.grid.cells[this.gridPositionX][0].top && (this.y -= this.movingSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i.prototype.moveCarDown = function() {
            var e;
            e = this.y + this.movingSpeed * this.gameScale * this.game.time.elapsedMS, this.gridPositionY + 1 <= t.SETTINGS.GRID_HEIGHT - 1 ? e <= this.grid.cells[this.gridPositionX][this.gridPositionY + 1].centerY && (this.y += this.movingSpeed * this.gameScale * this.game.time.elapsedMS) : e <= this.grid.cells[this.gridPositionX][t.SETTINGS.GRID_HEIGHT - 1].bottom && (this.y += this.movingSpeed * this.gameScale * this.game.time.elapsedMS)
        }, i
    }(Phaser.Group);
    t.RaceCar = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, i.centerX, i.centerY, "atlas_gameplay", "toy_store_star.png") || this;
            return n.anchor.set(.5), n.game = t, n.grid = s, n.gridCell = i, n.gridPositionX = i.gridPositionX, n.gridPositionY = i.gridPositionY, n.canBePickedUp = !1, n
        }
        return __extends(i, e), i.prototype.throwStarUp = function() {
            var e, i, s = this;
            null !== (i = this.grid.obtainFreeCell()) ? (i.cellContains = t.MAP.STAR, i.isStar = !0, e = i.gridPositionY > this.gridCell.gridPositionY + 1 ? this.gridCell.centerY - 25 : i.centerY - 50 * t.SETTINGS.SCALE, this.game.add.tween(this).to({
                y: e
            }, 750, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                s.game.add.tween(s).to({
                    y: i.centerY
                }, 750, Phaser.Easing.Quartic.In, !0)
            }, this), this.game.add.tween(this).to({
                x: i.centerX
            }, 1500, "Linear", !0).onComplete.add(function() {
                s.throwComplete(i)
            }, this)) : this.destroy()
        }, i.prototype.throwComplete = function(t) {
            null !== this.grid.rowsGroup && null !== this.grid.items && (this.gridPositionX = t.gridPositionX, this.gridPositionY = t.gridPositionY, this.canBePickedUp = !0, this.grid.rowsGroup[t.gridPositionY].add(this), this.grid.stars.push(this))
        }, i
    }(Phaser.Sprite);
    t.Star = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s, n, a) {
            var o = t.call(this, e) || this;
            return o.x = i, o.y = s, o.game = e, o.grid = n, o.gridCell = a, o.gridPositionX = a.gridPositionX, o.gridPositionY = a.gridPositionY, o
        }
        return __extends(e, t), e.prototype.update = function() {
            t.prototype.update.call(this)
        }, e
    }(Phaser.Group);
    t.Tile = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s, n) {
            var a = t.call(this, e) || this;
            return a.game = e, a.x = 0, a.y = 0, a.player = s, a.grid = i, a.weaponType = n, a.weaponDisabled = !1, a.weaponUsed = !1, a
        }
        return __extends(e, t), e.prototype.update = function() {
            t.prototype.update.call(this)
        }, e.prototype.useWeapon = function() {
            this.startingGridX = this.player.gridPositionX, this.startingGridY = this.player.gridPositionY
        }, e.prototype.playerKilled = function() {
            this.weaponDisabled = !0
        }, e
    }(Phaser.Group);
    t.Weapon = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, i, s) || this;
            return n.timerPowerUps = 0, n.timeToThrowPowerUp = 5e3, n.createCenter(), n
        }
        return __extends(i, e), i.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_christmas", "atlas_anim"), this.animationCenter.ph2Animations.play("center_christmas_play", 1, !0), this.add(this.animationCenter)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PLAYING && (this.timerPowerUps += this.game.time.elapsedMS, this.timerPowerUps >= this.timeToThrowPowerUp && (this.timerPowerUps = 0, this.createPowerUps()))
        }, i.prototype.createPowerUps = function() {
            var e;
            null !== (e = this.chooseRandomCell()) && (this.grid.gameMode === t.GAME_MODE.NEW_PACMAN ? this.grid.createRandomPacmanPowerUp() : this.grid.createPowerUp(e))
        }, i.prototype.chooseRandomCell = function() {
            var e, i, s, n;
            for (n = [], e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                for (i = 0; i < t.SETTINGS.GRID_HEIGHT; i++)(s = this.grid.cells[e][i]).cellContains === t.MAP.FREE && n.push(s);
            return n.length <= 0 ? null : _.sample(n)
        }, i
    }(t.MapCenter);
    t.Christmas = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, i, s) || this;
            return n.timerTeacher = 0, n.timeToBomb = 16e3, n.isThrowingBomb = !1, n.createCenter(), n
        }
        return __extends(i, e), i.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_classroom", "atlas_anim"), this.animationCenter.ph2Animations.play("center_classroom_stand", 1, !0), this.add(this.animationCenter)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED && (this.isThrowingBomb || (this.timerTeacher += this.game.time.elapsedMS, this.timerTeacher >= this.timeToBomb && this.startWriting()))
        }, i.prototype.startWriting = function() {
            var t;
            this.timerTeacher = 0, this.isThrowingBomb = !0, (t = this.animationCenter.ph2Animations.play("center_classroom_play", 1, !1)).onEvent.add(this.throwBomb, this), t.onComplete.add(this.stopWriting, this)
        }, i.prototype.stopWriting = function() {
            this.isThrowingBomb = !1, this.animationCenter.ph2Animations.play("center_classroom_stand", 1, !0)
        }, i.prototype.throwBomb = function() {
            var e, i, s, n, a, o, r, h = this;
            i = this.grid.rowsGroup.length - 1, a = this.grid.players.length - 1, o = this.game.rnd.integerInRange(0, a), n = this.grid.players[o], s = n.gridCell, e = new t.Bomb(this.game, this.gridCell.centerX, this.gridCell.centerX, "bomb", this.grid, s, 1, null), this.grid.rowsGroup[i].add(e), r = s.gridPositionY > this.gridCell.gridPositionY + 1 ? this.gridCell.centerY - 25 : s.centerY - 50 * t.SETTINGS.SCALE, e.centerX = this.gridCell.centerX, e.centerY = this.gridCell.centerY, this.game.add.tween(e).to({
                y: r
            }, 250, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                h.game.add.tween(e).to({
                    y: s.centerY
                }, 250, Phaser.Easing.Quartic.In, !0)
            }, this), this.game.add.tween(e).to({
                x: s.centerX
            }, 500, "Linear", !0).onComplete.add(function() {
                h.throwComplete(e, s)
            }, this), this.game.ph2AudioManager.playEffect("sound_teacher_angry", !1)
        }, i.prototype.throwComplete = function(e, i) {
            i.isEmpty = !1, i.cellContains = t.MAP.BOMB, e.gridCell = i, this.grid.addBomb(e, i)
        }, i
    }(t.MapCenter);
    t.Classroom = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e, i, s) || this;
            return n.bubbleTimer = 0, n.bubbleCounter = 0, n.timeToCreateBubble = 5e3, n.createCenter(), n
        }
        return __extends(e, t), e.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_boutique", "atlas_anim"), this.animationCenter.ph2Animations.play("center_boutique_play", 1, !0), this.add(this.animationCenter)
        }, e
    }(t.MapCenter);
    t.Boutique = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e, i, s) || this;
            return n.createCenter(), n
        }
        return __extends(e, t), e.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_forest", "atlas_anim"), this.animationCenter.ph2Animations.play("center_forest_anim", 1, !0), this.add(this.animationCenter)
        }, e
    }(t.MapCenter);
    t.Forest = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e, i, s) || this;
            return n.createCenter(), n
        }
        return __extends(e, t), e.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_beach", "atlas_anim"), this.animationCenter.ph2Animations.play("center_beach_play", 1, !0), this.add(this.animationCenter)
        }, e
    }(t.MapCenter);
    t.Beach = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e, i, s) || this;
            return n.createCenter(), n
        }
        return __extends(e, t), e.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_ranch", "atlas_anim"), this.animationCenter.ph2Animations.play("center_ranch_play", 1, !0), this.add(this.animationCenter)
        }, e
    }(t.MapCenter);
    t.Ranch = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, i, s) || this;
            return n.rocketLaunched = !1, n.launchTime = 14e3, n.launchTimeCounter = 0, n.explodeCell = n.grid.cells[n.gridCell.gridPositionX][2], n.createCenter(), n
        }
        return __extends(i, e), i.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_toy_store", "atlas_anim"), this.animationCenter.ph2Animations.play("center_toy_store_stand", 1, !0), this.add(this.animationCenter)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.PAUSED && this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && (this.rocketLaunched || (this.launchTimeCounter += this.game.time.elapsedMS, this.launchTimeCounter >= this.launchTime && this.launchRocket()))
        }, i.prototype.launchRocket = function() {
            this.rocketLaunched = !0, this.launchTimeCounter = 0;
            var t;
            (t = this.animationCenter.ph2Animations.play("center_toy_store_play", 1, !1)).onEvent.add(this.searchCells, this), t.onComplete.add(this.resetRocket, this), this.game.ph2AudioManager.playEffect("sound_rocket_start", !1)
        }, i.prototype.resetRocket = function() {
            this.animationCenter.ph2Animations.play("center_toy_store_stand", 1, !0), this.launchTimeCounter = 0, this.rocketLaunched = !1
        }, i.prototype.searchCells = function() {
            var t, e;
            for (this.game.ph2AudioManager.playEffect("sound_rocket_exp", !1), t = this.chooseRandomCell(), e = this.chooseRandomCell(); t === e;) e = this.chooseRandomCell();
            this.throwPowerUp(t), this.throwPowerUp(e)
        }, i.prototype.chooseRandomCell = function() {
            var e, i, s, n;
            for (n = [], e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                for (i = 0; i < t.SETTINGS.GRID_HEIGHT; i++)(s = this.grid.cells[e][i]).cellContains === t.MAP.FREE && n.push(s);
            return _.sample(n)
        }, i.prototype.throwPowerUp = function(e) {
            var i, s, n = this;
            s = e.gridPositionY > this.explodeCell.gridPositionY + 1 ? this.explodeCell.centerY - 25 : e.centerY - 50 * t.SETTINGS.SCALE, (i = this.createPowerUp(e)).centerX = this.explodeCell.centerX, i.centerY = this.explodeCell.centerY, this.game.add.tween(i).to({
                y: s
            }, 750, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                n.game.add.tween(i).to({
                    y: e.centerY
                }, 750, Phaser.Easing.Quartic.In, !0)
            }, this), this.game.add.tween(i).to({
                x: e.centerX
            }, 1500, "Linear", !0).onComplete.add(function() {
                n.throwComplete(i, e)
            }, this)
        }, i.prototype.throwComplete = function(e, i) {
            null != this.grid.rowsGroup && null != this.grid.items && (i.isItem = !0, i.cellContains = t.MAP.ITEM, this.grid.rowsGroup[i.gridPositionY].add(e), this.grid.items.push(e))
        }, i.prototype.createPowerUp = function(e) {
            var i, s, n, a, o, r, h, l, c, u;
            if (u = this.grid.rowsGroup.length - 1, i = this.game.rnd.integerInRange(0, 99), s = this.game.rnd.integerInRange(0, 99), a = this.grid.onBlockDestroyChances[i].name, o = this.grid.gameMode, "nothing" === a && (i -= 25, a = this.grid.onBlockDestroyChances[i].name), o === t.GAME_MODE.BATTLE_ROYALE) "hammer" === (h = this.grid.weaponChances[s]).name && (h.name = "shield");
            else if (o === t.GAME_MODE.NEW_PACMAN) h = this.grid.pacmanChances[s];
            else switch (a) {
                case "power_up":
                    h = this.grid.powerupChances[s];
                    break;
                case "weapon":
                    h = this.grid.weaponChances[s];
                    break;
                case "mount":
                    h = this.grid.mountChances[s]
            }
            switch (h.name) {
                case "bomb":
                    l = t.ITEM_TYPE.BOMB, n = "icon_bomb", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "power":
                    l = t.ITEM_TYPE.POWER, n = "icon_power_blast", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "speed":
                    l = t.ITEM_TYPE.SPEED, n = "icon_speed", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "shield":
                    l = t.ITEM_TYPE.SHIELD, n = "icon_shield", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "push":
                    l = t.ITEM_TYPE.KICK_BOMBS, n = "icon_super_gloves", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "invincibility":
                    l = t.ITEM_TYPE.INVINCIBILITY, n = "icon_invincibility", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "heart":
                    l = t.ITEM_TYPE.HEART, n = "icon_life", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "flamethrower":
                    l = t.ITEM_TYPE.FLAMETHROWER, n = "icon_flamethrower", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "hammer":
                    l = t.ITEM_TYPE.HAMMER, n = "icon_hammer", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "laser_gun":
                    l = t.ITEM_TYPE.LASER_GUN, n = "icon_lightning_gun", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "ice_gun":
                    l = t.ITEM_TYPE.ICE_GUN, n = "icon_ice_gun", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "lightning_gun":
                    l = t.ITEM_TYPE.LIGHTING_GUN, n = "icon_laser_gun", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "doll_bomb":
                    l = t.ITEM_TYPE.DOLL_BOMB, n = "icon_doll_bomb", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "mighty_hammer":
                    l = t.ITEM_TYPE.MIGHTY_HAMMER, n = "icon_mighty_hammer", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "horse":
                    l = t.ITEM_TYPE.HORSE, n = "icon_horse", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                case "skate":
                    l = t.ITEM_TYPE.SKATEBOARD, n = "icon_skate", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                case "cart":
                    l = t.ITEM_TYPE.SHOPPING_CART, n = "icon_cart", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                case "stag":
                    l = t.ITEM_TYPE.STAG, n = "icon_stag", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                default:
                    return
            }
            return r = new t.Item(this.game, e, n, l, c), this.grid.rowsGroup[u].add(r), r
        }, i
    }(t.MapCenter);
    t.ToyStore = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, i, s) || this;
            return n.timerSpawn = 0, n.timeToActivate = 7e3, n.isActive = !1, n.spawnCell = n.grid.cells[n.gridCell.gridPositionX - 1][n.gridCell.gridPositionY - 1], n.createCenter(), n
        }
        return __extends(i, e), i.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_bakery", "atlas_anim"), this.add(this.animationCenter)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.PAUSED && this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && (this.isActive || (this.timerSpawn += this.game.time.elapsedMS, this.timerSpawn >= this.timeToActivate && (this.isActive = !0, this.timerSpawn = 0, this.openCake())))
        }, i.prototype.openCake = function() {
            var t;
            (t = this.animationCenter.ph2Animations.play("center_bakery_play", 1, !1)).onComplete.add(this.resetCake, this), t.onEvent.add(this.searchCells, this)
        }, i.prototype.resetCake = function() {
            this.timerSpawn = 0, this.isActive = !1
        }, i.prototype.searchCells = function() {
            var t, e;
            for (this.game.ph2AudioManager.playEffect("sound_chimney", !1), t = this.chooseRandomCell(), e = this.chooseRandomCell(); t === e;) e = this.chooseRandomCell();
            this.throwPowerUp(t), this.throwPowerUp(e)
        }, i.prototype.chooseRandomCell = function() {
            var e, i, s, n;
            for (n = [], e = 0; e < t.SETTINGS.GRID_WIDTH; e++)
                for (i = 0; i < t.SETTINGS.GRID_HEIGHT; i++)(s = this.grid.cells[e][i]).cellContains === t.MAP.FREE && n.push(s);
            return _.sample(n)
        }, i.prototype.throwPowerUp = function(e) {
            var i, s, n, a = this;
            0 === this.game.rnd.integerInRange(0, 1) ? (n = e.gridPositionY > this.spawnCell.gridPositionY + 1 ? this.spawnCell.centerY - 25 : e.centerY - 50 * t.SETTINGS.SCALE, s = this.createCream(this.spawnCell), this.game.add.tween(s).to({
                y: n
            }, 750, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                a.game.add.tween(s).to({
                    y: e.top
                }, 750, Phaser.Easing.Quartic.In, !0)
            }, this), this.game.add.tween(s).to({
                x: e.left
            }, 1500, "Linear", !0).onComplete.add(function() {
                a.throwComplete(s, e, !1)
            }, this)) : (n = e.gridPositionY > this.spawnCell.gridPositionY + 1 ? this.spawnCell.centerY - 25 : e.centerY - 50 * t.SETTINGS.SCALE, (i = this.createPowerUp(e)).centerX = this.spawnCell.centerX, i.centerY = this.spawnCell.centerY, this.game.add.tween(i).to({
                y: n
            }, 750, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                a.game.add.tween(i).to({
                    y: e.centerY
                }, 750, Phaser.Easing.Quartic.In, !0)
            }, this), this.game.add.tween(i).to({
                x: e.centerX
            }, 1500, "Linear", !0).onComplete.add(function() {
                a.throwComplete(i, e, !0)
            }, this))
        }, i.prototype.throwComplete = function(e, i, s) {
            null != this.grid.rowsGroup && null != this.grid.items && (s ? (i.isItem = !0, i.cellContains = t.MAP.ITEM, this.grid.items.push(e), this.grid.rowsGroup[i.gridPositionY].add(e)) : (i.isSpecialTile = !0, i.cream = e, this.grid.rowsGroup[0].add(e)))
        }, i.prototype.createCream = function(e) {
            var i, s;
            return s = this.grid.rowsGroup.length - 1, i = new t.Cream(this.game, this.grid, e), i.x = e.left, i.y = e.top, this.grid.rowsGroup[s].add(i), i
        }, i.prototype.createPowerUp = function(e) {
            var i, s, n, a, o, r, h, l, c, u;
            if (u = this.grid.rowsGroup.length - 1, i = this.game.rnd.integerInRange(0, 99), s = this.game.rnd.integerInRange(0, 99), a = this.grid.onBlockDestroyChances[i].name, o = this.grid.gameMode, "nothing" === a && (i -= 25, a = this.grid.onBlockDestroyChances[i].name), o === t.GAME_MODE.BATTLE_ROYALE) "hammer" === (h = this.grid.weaponChances[s]).name && (h.name = "shield");
            else if (o === t.GAME_MODE.NEW_PACMAN) h = this.grid.pacmanChances[s];
            else switch (a) {
                case "power_up":
                    h = this.grid.powerupChances[s];
                    break;
                case "weapon":
                    h = this.grid.weaponChances[s];
                    break;
                case "mount":
                    h = this.grid.mountChances[s]
            }
            switch (h.name) {
                case "bomb":
                    l = t.ITEM_TYPE.BOMB, n = "icon_bomb", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "power":
                    l = t.ITEM_TYPE.POWER, n = "icon_power_blast", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "speed":
                    l = t.ITEM_TYPE.SPEED, n = "icon_speed", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "shield":
                    l = t.ITEM_TYPE.SHIELD, n = "icon_shield", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "push":
                    l = t.ITEM_TYPE.KICK_BOMBS, n = "icon_super_gloves", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "invincibility":
                    l = t.ITEM_TYPE.INVINCIBILITY, n = "icon_invincibility", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "heart":
                    l = t.ITEM_TYPE.HEART, n = "icon_life", c = t.POWER_UP_TYPE.POWER_UP;
                    break;
                case "flamethrower":
                    l = t.ITEM_TYPE.FLAMETHROWER, n = "icon_flamethrower", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "hammer":
                    l = t.ITEM_TYPE.HAMMER, n = "icon_hammer", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "laser_gun":
                    l = t.ITEM_TYPE.LASER_GUN, n = "icon_lightning_gun", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "ice_gun":
                    l = t.ITEM_TYPE.ICE_GUN, n = "icon_ice_gun", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "lightning_gun":
                    l = t.ITEM_TYPE.LIGHTING_GUN, n = "icon_laser_gun", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "doll_bomb":
                    l = t.ITEM_TYPE.DOLL_BOMB, n = "icon_doll_bomb", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "mighty_hammer":
                    l = t.ITEM_TYPE.MIGHTY_HAMMER, n = "icon_mighty_hammer", c = t.POWER_UP_TYPE.WEAPON;
                    break;
                case "horse":
                    l = t.ITEM_TYPE.HORSE, n = "icon_horse", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                case "skate":
                    l = t.ITEM_TYPE.SKATEBOARD, n = "icon_skate", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                case "cart":
                    l = t.ITEM_TYPE.SHOPPING_CART, n = "icon_cart", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                case "stag":
                    l = t.ITEM_TYPE.STAG, n = "icon_stag", c = t.POWER_UP_TYPE.MOUNT;
                    break;
                default:
                    return
            }
            return r = new t.Item(this.game, e, n, l, c), this.grid.rowsGroup[u].add(r), r
        }, i.prototype.changePowerUp = function() {
            var t;
            return t = this.game.rnd.integerInRange(0, 1), 0 === t ? "speed" : "shield"
        }, i
    }(t.MapCenter);
    t.Bakery = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, i, s) || this;
            return n.createCenter(), n
        }
        return __extends(i, e), i.prototype.createCenter = function() {
            this.animationCenter = this.game.add.ph2AnimationObject(this.gridCell.centerX, this.gridCell.centerY, "center_race_track", "atlas_anim"), this.animationCenter.ph2Animations.play("center_race_track_play", 1, !0), this.add(this.animationCenter), this.grid.cells[6][6].isForcedFreeCell = !0, this.grid.cells[7][6].isForcedFreeCell = !0, this.grid.cells[8][6].isForcedFreeCell = !0, this.grid.cells[6][7].isForcedFreeCell = !0, this.grid.cells[7][7].isForcedFreeCell = !0, this.grid.cells[8][7].isForcedFreeCell = !0, this.grid.cells[6][6].cellContains = t.MAP.FREE, this.grid.cells[7][6].cellContains = t.MAP.FREE, this.grid.cells[8][6].cellContains = t.MAP.FREE, this.grid.cells[6][7].cellContains = t.MAP.FREE, this.grid.cells[7][7].cellContains = t.MAP.FREE, this.grid.cells[8][7].cellContains = t.MAP.FREE, this.grid.cells[6][6].isEmpty = !0, this.grid.cells[7][6].isEmpty = !0, this.grid.cells[8][6].isEmpty = !0, this.grid.cells[6][7].isEmpty = !0, this.grid.cells[7][7].isEmpty = !0, this.grid.cells[8][7].isEmpty = !0, this.grid.astarGrid.grid[6][6].weight = 1, this.grid.astarGrid.grid[7][6].weight = 1, this.grid.astarGrid.grid[8][6].weight = 1, this.grid.astarGrid.grid[6][7].weight = 1, this.grid.astarGrid.grid[7][7].weight = 1, this.grid.astarGrid.grid[8][7].weight = 1
        }, i
    }(t.MapCenter);
    t.RaceTrack = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a) {
            var o = e.call(this, i, s, n) || this;
            return o.createSpine(), o.jumping = !1, o.speed = t.SETTINGS.INITIAL_SPEED - .1 * t.SETTINGS.INITIAL_SPEED, o
        }
        return __extends(i, e), i.prototype.createSpine = function() {
            var e, i;
            switch (i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.spine = this.game.add.spine(0, i, "pony"), this.bone = this.spine.slotContainers[10].children[0], this.player.direction) {
                case t.DIRECTION.UP:
                    this.horseState = t.HORSE_STATE.STAND_BACK, e = "stand_back";
                    break;
                case t.DIRECTION.DOWN:
                    this.horseState = t.HORSE_STATE.STAND_FRONT, e = "stand_front";
                    break;
                case t.DIRECTION.LEFT:
                    this.horseState = t.HORSE_STATE.STAND_LEFT, e = "stand_side";
                    break;
                case t.DIRECTION.RIGHT:
                    this.horseState = t.HORSE_STATE.STAND_RIGHT, e = "stand_side"
            }
            this.spine.setAnimationByName(0, e, !0), this.spine.scale.setTo(t.SETTINGS.SCALE), this.spine.setToSetupPose(), this.add(this.spine)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.updateDirection(), this.updateState()
        }, i.prototype.updateState = function() {
            switch (this.horseState) {
                case t.HORSE_STATE.WALK_BACK:
                    this.horseAnimation !== t.HORSE_STATE.WALK_BACK && (this.horseAnimation = t.HORSE_STATE.WALK_BACK, this.spine.setAnimationByName(0, "walk_back", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.WALK_FRONT:
                    this.horseAnimation !== t.HORSE_STATE.WALK_FRONT && (this.horseAnimation = t.HORSE_STATE.WALK_FRONT, this.spine.setAnimationByName(0, "walk_front", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.WALK_LEFT:
                    this.horseAnimation !== t.HORSE_STATE.WALK_LEFT && (this.horseAnimation = t.HORSE_STATE.WALK_LEFT, this.spine.setAnimationByName(0, "walk_side", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.WALK_RIGHT:
                    this.horseAnimation !== t.HORSE_STATE.WALK_RIGHT && (this.horseAnimation = t.HORSE_STATE.WALK_RIGHT, this.spine.setAnimationByName(0, "walk_side", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.BACK_JUMP:
                    this.horseAnimation !== t.HORSE_STATE.BACK_JUMP && (this.horseState = null, this.horseAnimation = null, this.spine.setAnimationByName(0, "jump_back", !1), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.FRONT_JUMP:
                    this.horseAnimation !== t.HORSE_STATE.FRONT_JUMP && (this.horseState = null, this.horseAnimation = null, this.spine.setAnimationByName(0, "jump_front", !1), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.LEFT_JUMP:
                    this.horseAnimation !== t.HORSE_STATE.LEFT_JUMP && (this.horseState = null, this.horseAnimation = null, this.spine.setAnimationByName(0, "jump_side", !1), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.RIGHT_JUMP:
                    this.horseAnimation !== t.HORSE_STATE.RIGHT_JUMP && (this.horseState = null, this.horseAnimation = null, this.spine.setAnimationByName(0, "jump_side", !1), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.STAND_BACK:
                    this.horseAnimation !== t.HORSE_STATE.STAND_BACK && (this.horseAnimation = t.HORSE_STATE.STAND_BACK, this.spine.setAnimationByName(0, "stand_back", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.STAND_FRONT:
                    this.horseAnimation !== t.HORSE_STATE.STAND_FRONT && (this.horseAnimation = t.HORSE_STATE.STAND_FRONT, this.spine.setAnimationByName(0, "stand_front", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.STAND_LEFT:
                    this.horseAnimation !== t.HORSE_STATE.STAND_LEFT && (this.horseAnimation = t.HORSE_STATE.STAND_LEFT, this.spine.setAnimationByName(0, "stand_side", !0), this.spine.setToSetupPose());
                    break;
                case t.HORSE_STATE.STAND_RIGHT:
                    this.horseAnimation !== t.HORSE_STATE.STAND_RIGHT && (this.horseAnimation = t.HORSE_STATE.STAND_RIGHT, this.spine.setAnimationByName(0, "stand_side", !0), this.spine.setToSetupPose())
            }
        }, i.prototype.updateDirection = function() {
            if (!this.jumping)
                if (this.player.isStand) switch (this.player.direction) {
                    case t.DIRECTION.UP:
                        this.horseState = t.HORSE_STATE.STAND_BACK, this.direction = t.DIRECTION.UP;
                        break;
                    case t.DIRECTION.DOWN:
                        this.horseState = t.HORSE_STATE.STAND_FRONT, this.direction = t.DIRECTION.DOWN;
                        break;
                    case t.DIRECTION.LEFT:
                        this.horseState = t.HORSE_STATE.STAND_LEFT, this.direction = t.DIRECTION.LEFT;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.horseState = t.HORSE_STATE.STAND_RIGHT, this.direction = t.DIRECTION.RIGHT
                } else switch (this.player.direction) {
                    case t.DIRECTION.UP:
                        this.horseState = t.HORSE_STATE.WALK_BACK, this.direction = t.DIRECTION.UP;
                        break;
                    case t.DIRECTION.DOWN:
                        this.horseState = t.HORSE_STATE.WALK_FRONT, this.direction = t.DIRECTION.DOWN;
                        break;
                    case t.DIRECTION.LEFT:
                        this.horseState = t.HORSE_STATE.WALK_LEFT, this.direction = t.DIRECTION.LEFT;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.horseState = t.HORSE_STATE.WALK_RIGHT, this.direction = t.DIRECTION.RIGHT
                }
        }, i.prototype.jumpCell = function(e) {
            var i, s, n = this;
            switch (this.landingCell = e, this.player.jumping = !0, this.jumping = !0, this.player.direction !== t.DIRECTION.UP && this.grid.rowsGroup[this.landingCell.gridPositionY].add(this.player), this.player.direction) {
                case t.DIRECTION.UP:
                    this.horseState = t.HORSE_STATE.BACK_JUMP;
                    break;
                case t.DIRECTION.DOWN:
                    this.horseState = t.HORSE_STATE.FRONT_JUMP;
                    break;
                case t.DIRECTION.LEFT:
                    this.horseState = t.HORSE_STATE.LEFT_JUMP;
                    break;
                case t.DIRECTION.RIGHT:
                    this.horseState = t.HORSE_STATE.RIGHT_JUMP
            }
            s = this.player.y - t.SETTINGS.GRID_HEIGHT * t.SETTINGS.SCALE, this.player.direction === t.DIRECTION.LEFT || this.player.direction === t.DIRECTION.RIGHT ? (this.game.add.tween(this.player).to({
                x: e.centerX
            }, 750, "Linear", !0).onComplete.add(this.onFinishJumping, this), this.game.add.tween(this.player).to({
                y: s
            }, 375, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                n.game.add.tween(n.player).to({
                    y: e.centerY
                }, 375, Phaser.Easing.Quartic.In, !0)
            }, this)) : (this.game.add.tween(this.player).to({
                x: e.centerX
            }, 750, "Linear", !0).onComplete.add(this.onFinishJumping, this), this.game.add.tween(this.player).to({
                y: s
            }, 375, Phaser.Easing.Quartic.Out, !0).onComplete.add(function() {
                (i = n.game.add.tween(n.player).to({
                    y: e.centerY
                }, 375, Phaser.Easing.Quartic.In, !0)).onComplete.add(n.onFinishJumping, n)
            }, this))
        }, i.prototype.onFinishJumping = function() {
            this.player.gridCell = this.landingCell, this.player.gridPositionX = this.landingCell.gridPositionX, this.player.gridPositionY = this.landingCell.gridPositionY, this.player.x = this.landingCell.centerX, this.player.y = this.landingCell.centerY, this.grid.rowsGroup[this.player.gridPositionY].add(this.player), this.player.jumping = !1, this.jumping = !1, this.direction = null
        }, i
    }(t.Mount);
    t.HorseMount = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a) {
            var o = e.call(this, i, s, n) || this;
            return o.speed = t.SETTINGS.INITIAL_SPEED + .3 * t.SETTINGS.INITIAL_SPEED, o.createSpine(), o
        }
        return __extends(i, e), i.prototype.createSpine = function() {
            var e, i;
            switch (i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.spine = this.game.add.spine(0, i, "cart"), this.bone = this.spine.slotContainers[5].children[0], this.player.direction) {
                case t.DIRECTION.UP:
                    this.truckState = t.MOUNT_STATE.BACK_STAND, e = "stand_back";
                    break;
                case t.DIRECTION.DOWN:
                    this.truckState = t.MOUNT_STATE.FRONT_STAND, e = "stand_front";
                    break;
                case t.DIRECTION.LEFT:
                case t.DIRECTION.RIGHT:
                    this.truckState = t.MOUNT_STATE.SIDE_STAND, e = "stand_side"
            }
            this.spine.setAnimationByName(0, e, !0), this.spine.scale.setTo(t.SETTINGS.SCALE), this.spine.setToSetupPose(), this.add(this.spine)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.updateState(), this.updateDirection()
        }, i.prototype.updateState = function() {
            switch (this.truckState) {
                case t.MOUNT_STATE.BACK:
                    this.truckAnimation !== t.MOUNT_STATE.BACK && (this.truckAnimation = t.MOUNT_STATE.BACK, this.spine.setAnimationByName(0, "walk_back", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.FRONT:
                    this.truckAnimation !== t.MOUNT_STATE.FRONT && (this.truckAnimation = t.MOUNT_STATE.FRONT, this.spine.setAnimationByName(0, "walk_front", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.SIDE:
                    this.truckAnimation !== t.MOUNT_STATE.SIDE && (this.truckAnimation = t.MOUNT_STATE.SIDE, this.spine.setAnimationByName(0, "walk_side", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.FRONT_STAND:
                    this.truckAnimation !== t.MOUNT_STATE.FRONT_STAND && (this.truckAnimation = t.MOUNT_STATE.FRONT_STAND, this.spine.setAnimationByName(0, "stand_front", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.BACK_STAND:
                    this.truckAnimation !== t.MOUNT_STATE.BACK_STAND && (this.truckAnimation = t.MOUNT_STATE.BACK_STAND, this.spine.setAnimationByName(0, "stand_back", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.SIDE_STAND:
                    this.truckAnimation !== t.MOUNT_STATE.SIDE_STAND && (this.truckAnimation = t.MOUNT_STATE.SIDE_STAND, this.spine.setAnimationByName(0, "stand_side", !0), this.spine.setToSetupPose())
            }
        }, i.prototype.updateDirection = function() {
            if (this.player.isStand) switch (this.player.direction) {
                case t.DIRECTION.UP:
                    this.direction = t.DIRECTION.UP, this.truckState = t.MOUNT_STATE.BACK_STAND;
                    break;
                case t.DIRECTION.DOWN:
                    this.direction = t.DIRECTION.DOWN, this.truckState = t.MOUNT_STATE.FRONT_STAND;
                    break;
                case t.DIRECTION.LEFT:
                    this.direction = t.DIRECTION.LEFT, this.truckState = t.MOUNT_STATE.SIDE_STAND;
                    break;
                case t.DIRECTION.RIGHT:
                    this.direction = t.DIRECTION.RIGHT, this.truckState = t.MOUNT_STATE.SIDE_STAND
            } else switch (this.player.direction) {
                case t.DIRECTION.UP:
                    this.direction = t.DIRECTION.UP, this.truckState = t.MOUNT_STATE.BACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.direction = t.DIRECTION.DOWN, this.truckState = t.MOUNT_STATE.FRONT;
                    break;
                case t.DIRECTION.LEFT:
                    this.direction = t.DIRECTION.LEFT, this.truckState = t.MOUNT_STATE.SIDE;
                    break;
                case t.DIRECTION.RIGHT:
                    this.direction = t.DIRECTION.RIGHT, this.truckState = t.MOUNT_STATE.SIDE
            }
        }, i
    }(t.Mount);
    t.ShoppingCart = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a) {
            var o = e.call(this, i, s, n) || this;
            return o.attackingBlock = !1, o.speed = t.SETTINGS.INITIAL_SPEED + .2 * t.SETTINGS.INITIAL_SPEED, o.createSpine(), o
        }
        return __extends(i, e), i.prototype.createSpine = function() {
            var e, i;
            switch (i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.spine = this.game.add.spine(0, i, "stag"), this.bone = this.spine.slotContainers[7].children[0], this.player.direction) {
                case t.DIRECTION.UP:
                    this.walrusState = t.STAG_STATE.STAND_BACK, e = "stand_back";
                    break;
                case t.DIRECTION.DOWN:
                    this.walrusState = t.STAG_STATE.STAND_FRONT, e = "stand_front";
                    break;
                case t.DIRECTION.LEFT:
                    this.walrusState = t.STAG_STATE.STAND_LEFT, e = "stand_side";
                    break;
                case t.DIRECTION.RIGHT:
                    this.walrusState = t.STAG_STATE.STAND_RIGHT, e = "stand_side"
            }
            this.spine.setAnimationByName(0, e, !0), this.spine.scale.setTo(t.SETTINGS.SCALE), this.spine.setToSetupPose(), this.add(this.spine)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.updateState(), this.updateDirection()
        }, i.prototype.updateState = function() {
            var e = this;
            switch (this.walrusState) {
                case t.STAG_STATE.BACK_WALK:
                    this.walrusAnimation !== t.STAG_STATE.BACK_WALK && (this.walrusAnimation = t.STAG_STATE.BACK_WALK, this.spine.setAnimationByName(0, "walk_back", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.FRONT_WALK:
                    this.walrusAnimation !== t.STAG_STATE.FRONT_WALK && (this.walrusAnimation = t.STAG_STATE.FRONT_WALK, this.spine.setAnimationByName(0, "walk_front", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.SIDE_WALK_LEFT:
                    this.walrusAnimation !== t.STAG_STATE.SIDE_WALK_LEFT && (this.walrusAnimation = t.STAG_STATE.SIDE_WALK_LEFT, this.spine.setAnimationByName(0, "walk_side", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.SIDE_WALK_RIGHT:
                    this.walrusAnimation !== t.STAG_STATE.SIDE_WALK_RIGHT && (this.walrusAnimation = t.STAG_STATE.SIDE_WALK_RIGHT, this.spine.setAnimationByName(0, "walk_side", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.BACK_ATTACK:
                    this.walrusAnimation !== t.STAG_STATE.BACK_ATTACK && (this.walrusAnimation = t.STAG_STATE.BACK_ATTACK, this.spine.setAnimationByName(0, "hit_back", !1).onComplete = function() {
                        e.onAttackComplete()
                    }, this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.FRONT_ATTACK:
                    this.walrusAnimation !== t.STAG_STATE.FRONT_ATTACK && (this.walrusAnimation = t.STAG_STATE.FRONT_ATTACK, this.spine.setAnimationByName(0, "hit_front", !1).onComplete = function() {
                        e.onAttackComplete()
                    }, this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.SIDE_ATTACK_LEFT:
                    this.walrusAnimation !== t.STAG_STATE.SIDE_ATTACK_LEFT && (this.walrusAnimation = t.STAG_STATE.SIDE_ATTACK_LEFT, this.spine.setAnimationByName(0, "hit_side", !1).onComplete = function() {
                        e.onAttackComplete()
                    }, this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.SIDE_ATTACK_RIGHT:
                    this.walrusAnimation !== t.STAG_STATE.SIDE_ATTACK_RIGHT && (this.walrusAnimation = t.STAG_STATE.SIDE_ATTACK_RIGHT, this.spine.setAnimationByName(0, "hit_side", !1).onComplete = function() {
                        e.onAttackComplete()
                    }, this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.STAND_BACK:
                    this.walrusAnimation !== t.STAG_STATE.STAND_BACK && (this.walrusAnimation = t.STAG_STATE.STAND_BACK, this.spine.setAnimationByName(0, "stand_back", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.STAND_FRONT:
                    this.walrusAnimation !== t.STAG_STATE.STAND_FRONT && (this.walrusAnimation = t.STAG_STATE.STAND_FRONT, this.spine.setAnimationByName(0, "stand_front", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.STAND_LEFT:
                    this.walrusAnimation !== t.STAG_STATE.STAND_LEFT && (this.walrusAnimation = t.STAG_STATE.STAND_LEFT, this.spine.setAnimationByName(0, "stand_side", !0), this.spine.setToSetupPose());
                    break;
                case t.STAG_STATE.STAND_RIGHT:
                    this.walrusAnimation !== t.STAG_STATE.STAND_RIGHT && (this.walrusAnimation = t.STAG_STATE.STAND_RIGHT, this.spine.setAnimationByName(0, "stand_side", !0), this.spine.setToSetupPose())
            }
        }, i.prototype.updateDirection = function() {
            if (!this.attackingBlock)
                if (this.player.isStand) switch (this.player.direction) {
                    case t.DIRECTION.UP:
                        this.direction = t.DIRECTION.UP, this.walrusState = t.STAG_STATE.STAND_BACK;
                        break;
                    case t.DIRECTION.DOWN:
                        this.direction = t.DIRECTION.DOWN, this.walrusState = t.STAG_STATE.STAND_FRONT;
                        break;
                    case t.DIRECTION.LEFT:
                        this.direction = t.DIRECTION.LEFT, this.walrusState = t.STAG_STATE.STAND_LEFT;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.direction = t.DIRECTION.RIGHT, this.walrusState = t.STAG_STATE.STAND_RIGHT
                } else switch (this.player.direction) {
                    case t.DIRECTION.UP:
                        this.direction = t.DIRECTION.UP, this.walrusState = t.STAG_STATE.BACK_WALK;
                        break;
                    case t.DIRECTION.DOWN:
                        this.direction = t.DIRECTION.DOWN, this.walrusState = t.STAG_STATE.FRONT_WALK;
                        break;
                    case t.DIRECTION.LEFT:
                        this.direction = t.DIRECTION.LEFT, this.walrusState = t.STAG_STATE.SIDE_WALK_LEFT;
                        break;
                    case t.DIRECTION.RIGHT:
                        this.direction = t.DIRECTION.RIGHT, this.walrusState = t.STAG_STATE.SIDE_WALK_RIGHT
                }
        }, i.prototype.attackBlock = function() {
            switch (this.player.attacking = !0, this.attackingBlock = !0, this.game.ph2AudioManager.playEffect("sound_sealionAttack", !1), this.player.direction) {
                case t.DIRECTION.UP:
                    this.walrusState = t.STAG_STATE.BACK_ATTACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.walrusState = t.STAG_STATE.FRONT_ATTACK;
                    break;
                case t.DIRECTION.LEFT:
                    this.walrusState = t.STAG_STATE.SIDE_ATTACK_LEFT;
                    break;
                case t.DIRECTION.RIGHT:
                    this.walrusState = t.STAG_STATE.SIDE_ATTACK_RIGHT
            }
        }, i.prototype.onAttackComplete = function() {
            this.player.attacking = !1, this.attackingBlock = !1, this.direction = null
        }, i
    }(t.Mount);
    t.Stag = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a) {
            var o = e.call(this, i, s, n) || this;
            return o.speed = t.SETTINGS.INITIAL_SPEED + .4 * t.SETTINGS.INITIAL_SPEED, o.createSpine(), o
        }
        return __extends(i, e), i.prototype.createSpine = function() {
            var e, i;
            switch (i = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.spine = this.game.add.spine(0, i, "skate"), this.bone = this.spine.slotContainers[2].children[0], this.player.direction) {
                case t.DIRECTION.UP:
                    this.skateState = t.MOUNT_STATE.BACK_STAND, e = "back_stand";
                    break;
                case t.DIRECTION.DOWN:
                    this.skateState = t.MOUNT_STATE.FRONT_STAND, e = "front_stand";
                    break;
                case t.DIRECTION.LEFT:
                case t.DIRECTION.RIGHT:
                    this.skateState = t.MOUNT_STATE.SIDE_STAND, e = "side_stand"
            }
            this.spine.setAnimationByName(0, e, !0), this.spine.scale.setTo(t.SETTINGS.SCALE), this.spine.setToSetupPose(), this.add(this.spine)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.updateState(), this.updateDirection()
        }, i.prototype.updateState = function() {
            switch (this.skateState) {
                case t.MOUNT_STATE.BACK:
                    this.skateAnimation !== t.MOUNT_STATE.BACK && (this.skateAnimation = t.MOUNT_STATE.BACK, this.spine.setAnimationByName(0, "back", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.FRONT:
                    this.skateAnimation !== t.MOUNT_STATE.FRONT && (this.skateAnimation = t.MOUNT_STATE.FRONT, this.spine.setAnimationByName(0, "front", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.SIDE:
                    this.skateAnimation !== t.MOUNT_STATE.SIDE && (this.skateAnimation = t.MOUNT_STATE.SIDE, this.spine.setAnimationByName(0, "side", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.SIDE_STAND:
                    this.skateAnimation !== t.MOUNT_STATE.SIDE_STAND && (this.skateAnimation = t.MOUNT_STATE.SIDE_STAND, this.spine.setAnimationByName(0, "side_stand", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.BACK_STAND:
                    this.skateAnimation !== t.MOUNT_STATE.BACK_STAND && (this.skateAnimation = t.MOUNT_STATE.BACK_STAND, this.spine.setAnimationByName(0, "back_stand", !0), this.spine.setToSetupPose());
                    break;
                case t.MOUNT_STATE.FRONT_STAND:
                    this.skateAnimation !== t.MOUNT_STATE.FRONT_STAND && (this.skateAnimation = t.MOUNT_STATE.FRONT_STAND, this.spine.setAnimationByName(0, "front_stand", !0), this.spine.setToSetupPose())
            }
        }, i.prototype.updateDirection = function() {
            if (this.player.isStand) switch (this.player.direction) {
                case t.DIRECTION.UP:
                    this.direction = t.DIRECTION.UP, this.skateState = t.MOUNT_STATE.BACK_STAND;
                    break;
                case t.DIRECTION.DOWN:
                    this.direction = t.DIRECTION.DOWN, this.skateState = t.MOUNT_STATE.FRONT_STAND;
                    break;
                case t.DIRECTION.LEFT:
                    this.direction = t.DIRECTION.LEFT, this.skateState = t.MOUNT_STATE.SIDE_STAND;
                    break;
                case t.DIRECTION.RIGHT:
                    this.direction = t.DIRECTION.RIGHT, this.skateState = t.MOUNT_STATE.SIDE_STAND
            } else switch (this.player.direction) {
                case t.DIRECTION.UP:
                    this.direction = t.DIRECTION.UP, this.skateState = t.MOUNT_STATE.BACK;
                    break;
                case t.DIRECTION.DOWN:
                    this.direction = t.DIRECTION.DOWN, this.skateState = t.MOUNT_STATE.FRONT;
                    break;
                case t.DIRECTION.LEFT:
                    this.direction = t.DIRECTION.LEFT, this.skateState = t.MOUNT_STATE.SIDE;
                    break;
                case t.DIRECTION.RIGHT:
                    this.direction = t.DIRECTION.RIGHT, this.skateState = t.MOUNT_STATE.SIDE
            }
        }, i
    }(t.Mount);
    t.Skateboard = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, i, s, n) || this;
            return a.cellsOnFire = [], a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationBomb = this.game.add.ph2AnimationObject(0, e, "doll_bomb", "atlas_weapons0"), this.animationBomb.visible = !1, this.add(this.animationBomb)
        }, i.prototype.update = function() {
            e.prototype.update.call(this)
        }, i.prototype.useWeapon = function() {
            e.prototype.useWeapon.call(this);
            var i, s, n, a, o;
            switch (o = 1, s = this.grid.rowsGroup.length - 1, t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * 2, n = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * 2, this.gridCell = this.player.gridCell, this.gridPositionX = this.gridCell.gridPositionX, this.gridPositionY = this.gridCell.gridPositionY, this.player.direction) {
                case t.DIRECTION.UP:
                    this.x = this.gridCell.centerX, this.y = this.gridCell.centerY + n, a = "doll_bomb_up";
                    break;
                case t.DIRECTION.DOWN:
                    this.x = this.gridCell.centerX, this.y = this.gridCell.centerY + n, a = "doll_bomb_down";
                    break;
                case t.DIRECTION.LEFT:
                    this.x = this.gridCell.centerX, this.y = this.gridCell.centerY + n, a = "doll_bomb_side", o = -1;
                    break;
                case t.DIRECTION.RIGHT:
                    this.x = this.gridCell.centerX, this.y = this.gridCell.centerY + n, a = "doll_bomb_side"
            }
            return this.animationBomb.scaleX = o, this.animationBomb.visible = !0, this.grid.rowsGroup[s].add(this), this.checkCells(), (i = this.animationBomb.ph2Animations.play(a, 1, !1)).onEvent.add(this.explode, this), i.onComplete.add(this.endExplosion, this), this.game.ph2AudioManager.playEffect("sound_wawa_fire", !1), this.weaponUsed = !0, this.player.weaponActive = !1, this.player.clearWeaponSkin(), this.player.checkNextWeapon(), !0
        }, i.prototype.checkCells = function() {
            var e, i;
            switch (this.player.direction) {
                case t.DIRECTION.UP:
                    this.gridPositionY = this.gridPositionY - 2;
                    break;
                case t.DIRECTION.DOWN:
                    this.gridPositionY = this.gridPositionY + 2;
                    break;
                case t.DIRECTION.LEFT:
                    this.gridPositionX = this.gridPositionX - 2;
                    break;
                case t.DIRECTION.RIGHT:
                    this.gridPositionX = this.gridPositionX + 2
            }
            e = this.gridPositionX, i = this.gridPositionY, e >= 0 && e <= t.SETTINGS.GRID_WIDTH - 1 && i >= 0 && i <= t.SETTINGS.GRID_HEIGHT - 1 && this.cellsOnFire.push(this.grid.cells[e][i]), e - 1 >= 0 && e - 1 <= t.SETTINGS.GRID_WIDTH - 1 && (this.cellsOnFire.push(this.grid.cells[e - 1][i]), i - 1 >= 0 && i - 1 <= t.SETTINGS.GRID_HEIGHT - 1 && this.cellsOnFire.push(this.grid.cells[e - 1][i - 1]), i + 1 <= t.SETTINGS.CELL_HEIGHT - 1 && i + 1 >= 0 && this.cellsOnFire.push(this.grid.cells[e - 1][i + 1])), e + 1 <= t.SETTINGS.GRID_WIDTH - 1 && e + 1 >= 0 && (this.cellsOnFire.push(this.grid.cells[e + 1][i]), i - 1 >= 0 && i - 1 <= t.SETTINGS.GRID_HEIGHT - 1 && this.cellsOnFire.push(this.grid.cells[e + 1][i - 1]), i + 1 <= t.SETTINGS.CELL_HEIGHT - 1 && i + 1 >= 0 && this.cellsOnFire.push(this.grid.cells[e + 1][i + 1])), i - 1 >= 0 && i - 1 <= t.SETTINGS.GRID_HEIGHT - 1 && e >= 0 && e <= t.SETTINGS.GRID_WIDTH - 1 && this.cellsOnFire.push(this.grid.cells[e][i - 1]), i + 1 <= t.SETTINGS.CELL_HEIGHT - 1 && i + 1 >= 0 && e >= 0 && e <= t.SETTINGS.GRID_WIDTH - 1 && this.cellsOnFire.push(this.grid.cells[e][i + 1])
        }, i.prototype.explode = function() {
            var e, i;
            if (this.game.ph2AudioManager.playEffect("sound_wawa_exp", !1), this.cellsOnFire.length > 0)
                for (e = 0; e < this.cellsOnFire.length; e++) void 0 !== (i = this.cellsOnFire[e]) && null !== i && (i.dangerOwner = this.player, i.dangerWeapon = !0, i.isDangerCell = !0, (i.isBox || i.cellContains === t.MAP.BLOCK) && (this.grid.destroyBox(i), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE)))), (i.isItem || i.cellContains === t.MAP.ITEM) && this.grid.removeItemFromArray(i, !0), i.cellContains === t.MAP.BOMB && this.grid.explodeBomb(i))
        }, i.prototype.endExplosion = function() {
            var t, e;
            if (this.grid.startLightningShake(), this.cellsOnFire.length > 0)
                for (t = 0; t < this.cellsOnFire.length; t++) void 0 !== (e = this.cellsOnFire[t]) && null !== e && (e.isDangerCell = !1, e.dangerWeapon = !1, e.dangerOwner = null)
        }, i
    }(t.Weapon);
    t.DollBomb = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, i, s, n) || this;
            return a.cellsOnFire = [], a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationFlamethrower = this.game.add.ph2AnimationObject(0, e, "flamethrower", "atlas_weapons0"), this.animationFlamethrower.visible = !1, this.add(this.animationFlamethrower), this.baseFlamethrower = Ph2.AnimationSystem.findObject("base", this.animationFlamethrower)
        }, i.prototype.update = function() {
            e.prototype.update.call(this)
        }, i.prototype.useWeapon = function() {
            e.prototype.useWeapon.call(this);
            var i, s, n, a, o;
            switch (this.gridCell = this.player.gridCell, i = this.player.x, s = this.player.y, o = this.grid.rowsGroup.length - 1, this.baseFlamethrower.scaleX = 1, this.baseFlamethrower.scaleY = 1, this.player.direction) {
                case t.DIRECTION.UP:
                    n = "flamethrower_up", this.baseFlamethrower.scaleX = 1;
                    break;
                case t.DIRECTION.DOWN:
                    n = "flamethrower_down", this.baseFlamethrower.scaleX = 1;
                    break;
                case t.DIRECTION.LEFT:
                    n = "flamethrower_side", this.baseFlamethrower.scaleX = 1;
                    break;
                case t.DIRECTION.RIGHT:
                    n = "flamethrower_side", this.baseFlamethrower.scaleX = -1
            }
            return this.obtainCellsOnFire(), this.player.attacking = !0, this.animationFlamethrower.visible = !0, this.x = i, this.y = s, this.player.direction === t.DIRECTION.UP ? (o = this.player.gridPositionY, this.grid.rowsGroup[o].add(this), this.grid.rowsGroup[o].sendToBack(this)) : this.player.direction === t.DIRECTION.RIGHT ? (this.x = i + t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .5, this.grid.rowsGroup[o].add(this)) : this.grid.rowsGroup[o].add(this), (a = this.animationFlamethrower.ph2Animations.play(n, 1, !1)).onComplete.add(this.restartCells, this), a.onEvent.add(this.addCellsOnFire, this), this.game.ph2AudioManager.playEffect("useThrower", !1), this.weaponUsed = !0, !0
        }, i.prototype.obtainCellsOnFire = function() {
            var e, i, s, n, a;
            switch (i = this.gridCell.gridPositionX, s = this.gridCell.gridPositionY, this.player.direction) {
                case t.DIRECTION.UP:
                    for (e = 1; e <= 3; e++) s - e >= 0 && (a = this.grid.cells[i][s - e]).cellContains !== t.MAP.WALL ? this.cellsOnFire.push(a) : e = 4;
                    break;
                case t.DIRECTION.DOWN:
                    for (e = 1; e <= 3; e++) s + e <= t.SETTINGS.GRID_HEIGHT - 1 && (a = this.grid.cells[i][s + e]).cellContains !== t.MAP.WALL ? this.cellsOnFire.push(a) : e = 4;
                    break;
                case t.DIRECTION.LEFT:
                    for (e = 1; e <= 3; e++) i - e >= 0 && (a = this.grid.cells[i - e][s]).cellContains !== t.MAP.WALL ? this.cellsOnFire.push(a) : e = 4;
                    break;
                case t.DIRECTION.RIGHT:
                    for (e = 1; e <= 3; e++) i + e <= t.SETTINGS.GRID_WIDTH - 1 && (a = this.grid.cells[i + e][s]).cellContains !== t.MAP.WALL ? this.cellsOnFire.push(a) : e = 4
            }
            switch (this.cellsOnFire.length) {
                case 0:
                    n = .1;
                    break;
                case 1:
                    n = .3;
                    break;
                case 2:
                    n = .6;
                    break;
                case 3:
                    n = 1
            }
            this.player.direction === t.DIRECTION.LEFT || this.player.direction === t.DIRECTION.RIGHT ? this.player.direction === t.DIRECTION.LEFT ? this.baseFlamethrower.scaleX = n : this.baseFlamethrower.scaleX = -n : this.baseFlamethrower.scaleY = n
        }, i.prototype.addCellsOnFire = function() {
            var e, i;
            if (!this.weaponDisabled)
                for (e = 0; e < this.cellsOnFire.length; e++)(i = this.cellsOnFire[e]).isDangerCell = !0, i.dangerOwner = this.player, i.dangerWeapon = !0, i.cellContains === t.MAP.BOMB && this.grid.explodeBomb(i), (i.cellContains === t.MAP.BLOCK || i.isBox) && (this.grid.destroyBox(i), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE)))), (i.cellContains === t.MAP.ITEM || i.isItem) && this.grid.removeItemFromArray(i, !0), (i.cellContains === t.MAP.COIN || i.isCoin) && this.grid.coinPickedUp(i, !0)
        }, i.prototype.playerKilled = function() {
            e.prototype.playerKilled.call(this), this.animationFlamethrower.ph2Animations.stop(), this.animationFlamethrower.visible = !1, this.weaponUsed && this.restartCells()
        }, i.prototype.restartCells = function() {
            var t;
            for (t = 0; t < this.cellsOnFire.length; t++) this.cellsOnFire[t].isDangerCell = !1, this.cellsOnFire[t].dangerOwner = null, this.cellsOnFire[t].dangerWeapon = !1;
            this.cellsOnFire = [], this.player.dead || (this.player.attacking = !1, this.player.weaponActive || (this.player.clearWeaponSkin(), this.player.checkNextWeapon()))
        }, i
    }(t.Weapon);
    t.Flamethrower = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, i, s, n) || this;
            return a.hitConfirmed = !1, a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationHammer = this.game.add.ph2AnimationObject(0, e, "hammer", "atlas_weapons1"), this.animationHammer.visible = !1, this.add(this.animationHammer)
        }, i.prototype.update = function() {
            e.prototype.update.call(this)
        }, i.prototype.useWeapon = function() {
            var e, i, s, n, a, o, r;
            switch (this.gridCell = this.player.gridCell, e = this.gridCell.gridPositionX, i = this.gridCell.gridPositionY, a = this.player.spine, this.hitConfirmed = !1, "gp_hero1" === this.player.keyName ? (o = "weapon_l", r = "weapon_r_back") : (o = "weapon", r = "weapon_right"), this.player.direction) {
                case t.DIRECTION.UP:
                    i - 1 >= 0 && (this.cellHit = this.grid.cells[e][i - 1], this.hitConfirmed = !0), s = "hammer_up", this.animationHammer.scaleX = 1, void 0 !== a.skeleton.findSlot(r).sprites && (this.spriteHammer = a.skeleton.findSlot(r).sprites.hammer_back);
                    break;
                case t.DIRECTION.DOWN:
                    i + 1 < t.SETTINGS.GRID_HEIGHT && (this.cellHit = this.grid.cells[e][i + 1], this.hitConfirmed = !0), s = "hammer_down", this.animationHammer.scaleX = 1, void 0 !== a.skeleton.findSlot(o).sprites && (this.spriteHammer = a.skeleton.findSlot(o).sprites.hammer_front);
                    break;
                case t.DIRECTION.LEFT:
                    e - 1 >= 0 && (this.cellHit = this.grid.cells[e - 1][i], this.hitConfirmed = !0), s = "hammer_side", this.animationHammer.scaleX = 1, void 0 !== a.skeleton.findSlot(o).sprites && (this.spriteHammer = a.skeleton.findSlot(o).sprites.hammer_side);
                    break;
                case t.DIRECTION.RIGHT:
                    e + 1 < t.SETTINGS.GRID_WIDTH && (this.cellHit = this.grid.cells[e + 1][i], this.hitConfirmed = !0), s = "hammer_side", this.animationHammer.scaleX = -1, void 0 !== a.skeleton.findSlot(o).sprites && (this.spriteHammer = a.skeleton.findSlot(o).sprites.hammer_side)
            }
            return this.player.attacking = !0, this.animationHammer.visible = !0, void 0 !== this.spriteHammer && (this.spriteHammer.visible = !1), this.x = this.player.x, this.y = this.player.y, this.hitConfirmed ? this.grid.rowsGroup[this.cellHit.gridPositionY].add(this) : this.grid.rowsGroup[this.gridCell.gridPositionY].add(this), (n = this.animationHammer.ph2Animations.play(s, 1, !1)).onComplete.add(this.restartCell, this), n.onEvent.add(this.onHammerHit, this), this.game.ph2AudioManager.playEffect("useSinker", !1), this.weaponUsed = !0, !0
        }, i.prototype.onHammerHit = function() {
            void 0 !== this.cellHit && null !== this.cellHit && (this.hitConfirmed && !this.weaponDisabled ? (this.cellHit.isDangerCell = !0, this.cellHit.dangerOwner = this.player, this.cellHit.dangerWeapon = !0, this.cellHit.cellContains === t.MAP.BOMB && this.grid.explodeBomb(this.cellHit), (this.cellHit.cellContains === t.MAP.BLOCK || this.cellHit.isBox) && (this.grid.destroyBox(this.cellHit), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE)))), (this.cellHit.cellContains === t.MAP.ITEM || this.cellHit.isItem) && this.grid.removeItemFromArray(this.cellHit, !0), (this.cellHit.cellContains === t.MAP.COIN || this.cellHit.isCoin) && this.grid.coinPickedUp(this.cellHit, !0)) : this.cellHit = null)
        }, i.prototype.restartCell = function() {
            this.player.dead || this.player.weaponActive || (this.player.clearWeaponSkin(), this.player.checkNextWeapon()), void 0 !== this.spriteHammer && (this.spriteHammer.visible = !0), this.player.attacking = !1, this.resetCells()
        }, i.prototype.playerKilled = function() {
            e.prototype.playerKilled.call(this), void 0 !== this.animationHammer && (this.animationHammer.ph2Animations.stop(), this.animationHammer.visible = !1), this.weaponUsed && this.restartCell()
        }, i.prototype.resetCells = function() {
            null != this.cellHit && (this.cellHit.isDangerCell = !1, this.cellHit.dangerOwner = null, this.cellHit.dangerWeapon = !1)
        }, i
    }(t.Weapon);
    t.Hammer = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(i, s, n, a) {
            var o = e.call(this, i, s, n, a) || this;
            return o.isFlying = !1, o.activeTimer = 0, o.power = 1, o.cellFlyingIndex = 0, o.cellsFlying = [], o.cellsFlyingContains = [], o.gameScale = t.SETTINGS.SCALE, o.flyingSpeed = .5, o.offsetX = 0, o.createAnimations(), o
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            this.animationIceGun = this.game.add.ph2AnimationObject(0, 0, "ice_gun", "atlas_weapons0"), this.animationIceGun.visible = !1, this.add(this.animationIceGun), this.animationIce = this.game.add.ph2AnimationObject(0, 0, "ice_gun_fx", "atlas_weapons0"), this.animationIce.visible = !1, this.add(this.animationIce)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED && this.isFlying && (this.checkMovement(), this.checkPlayers(), this.grid.gameMode === t.GAME_MODE.ICE_MAN && this.checkMonsters())
        }, i.prototype.useWeapon = function() {
            var i, s = this;
            switch (e.prototype.useWeapon.call(this), this.direction) {
                case t.DIRECTION.UP:
                    if (0 === this.player.gridCell.gridPositionY) return;
                    "ice_gun_up.png", i = 90, this.offsetX = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .3, this.scale.x = 1;
                    break;
                case t.DIRECTION.DOWN:
                    if (this.player.gridCell.gridPositionY === t.SETTINGS.GRID_HEIGHT - 1) return;
                    "ice_gun_down.png", i = 270, this.offsetX = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .3, this.scale.x = 1;
                    break;
                case t.DIRECTION.LEFT:
                    if (0 === this.player.gridCell.gridPositionX) return;
                    "ice_gun_side.png", i = 0, this.scale.x = 1;
                    break;
                case t.DIRECTION.RIGHT:
                    if (this.player.gridCell.gridPositionX === t.SETTINGS.GRID_WIDTH - 1) return;
                    "ice_gun_side.png", i = 0, this.scale.x = -1
            }
            return this.createIceCells(), this.player.attacking = !0, this.animationIce.visible = !0, this.animationIce.angle = i, this.animationIce.ph2Animations.play("ice_gun_fx_anim", 1, !0), this.gridCell = this.player.gridCell, this.x = this.gridCell.centerX, this.y = this.gridCell.centerY, this.grid.rowsGroup[this.gridCell.gridPositionY].add(this), this.game.ph2AudioManager.playEffect("sound_snowball", !1), this.game.time.events.add(250, function() {
                s.player.dead || (s.player.attacking = !1, s.player.weaponActive || (s.player.clearWeaponSkin(), s.player.checkNextWeapon()))
            }, this), !0
        }, i.prototype.createIceCells = function() {
            var e, i, s;
            switch (this.isFlying = !0, this.direction) {
                case t.DIRECTION.UP:
                    for (s = this.startingGridY - 4 >= 0 ? this.startingGridY - 4 : 0, e = this.startingGridY - 1; e >= s; e--) this.cellsFlying.push(this.grid.cells[this.startingGridX][e]), this.cellsFlyingContains.push(this.grid.cells[this.startingGridX][e].cellContains);
                    break;
                case t.DIRECTION.DOWN:
                    for (s = this.startingGridY + 4 <= t.SETTINGS.GRID_HEIGHT - 1 ? this.startingGridY + 4 : t.SETTINGS.GRID_HEIGHT - 1, e = this.startingGridY + 1; e < s; e++) this.cellsFlying.push(this.grid.cells[this.startingGridX][e]), this.cellsFlyingContains.push(this.grid.cells[this.startingGridX][e].cellContains);
                    break;
                case t.DIRECTION.LEFT:
                    for (i = this.startingGridX - 4 >= 0 ? this.startingGridX - 4 : 0, e = this.startingGridX - 1; e >= i; e--) this.cellsFlying.push(this.grid.cells[e][this.startingGridY]), this.cellsFlyingContains.push(this.grid.cells[e][this.startingGridY].cellContains);
                    break;
                case t.DIRECTION.RIGHT:
                    for (i = this.startingGridX + 4 <= t.SETTINGS.GRID_WIDTH - 1 ? this.startingGridX + 4 : t.SETTINGS.GRID_WIDTH - 1, e = this.startingGridX + 1; e < i; e++) this.cellsFlying.push(this.grid.cells[e][this.startingGridY]), this.cellsFlyingContains.push(this.grid.cells[e][this.startingGridY].cellContains)
            }
        }, i.prototype.checkMovement = function() {
            var e, i, s;
            switch (this.direction) {
                case t.DIRECTION.LEFT:
                    this.moveIceLeft(), e = this.startingGridX - 1, i = this.startingGridY, s = this.startingGridX - 1 <= 0 ? this.grid.cells[0][i] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_WIDTH * this.gameScale && this.updateIceCell(s);
                    break;
                case t.DIRECTION.RIGHT:
                    this.moveIceRight(), e = this.startingGridX + 1, i = this.startingGridY, s = this.startingGridX + 1 >= t.SETTINGS.GRID_WIDTH - 1 ? this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][i] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_WIDTH * this.gameScale && this.updateIceCell(s);
                    break;
                case t.DIRECTION.UP:
                    this.moveIceUp(), e = this.startingGridX, i = this.startingGridY - 1, s = this.startingGridY - 1 <= 0 ? this.grid.cells[e][0] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale && this.updateIceCell(s);
                    break;
                case t.DIRECTION.DOWN:
                    this.moveIceDown(), e = this.startingGridX, i = this.startingGridY + 1, s = this.startingGridY + 1 >= t.SETTINGS.GRID_HEIGHT - 1 ? this.grid.cells[e][t.SETTINGS.GRID_HEIGHT - 1] : this.grid.cells[e][i], Phaser.Math.distance(s.centerX, s.centerY, this.x, this.y) < .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale && this.updateIceCell(s)
            }
        }, i.prototype.checkPlayers = function() {
            var e, i;
            if (this.direction === t.DIRECTION.UP || this.direction === t.DIRECTION.DOWN)
                for (e = 0; e < this.grid.players.length; e++) {
                    if ((i = this.grid.players[e]).dead || i.frozen) return;
                    i.gridPositionX !== this.startingGridX || this.player === i || i.dead || i.gridPositionY === this.gridCell.gridPositionY && (i.gridCell = this.gridCell, this.createExplosion())
                } else if (this.direction === t.DIRECTION.LEFT || this.direction === t.DIRECTION.RIGHT)
                    for (e = 0; e < this.grid.players.length; e++) {
                        if ((i = this.grid.players[e]).dead || i.frozen) return;
                        i.gridPositionY !== this.startingGridY || this.player === i || i.dead || i.gridPositionX === this.gridCell.gridPositionX && (i.gridCell = this.gridCell, this.createExplosion())
                    }
        }, i.prototype.checkMonsters = function() {
            var e, i;
            if (this.direction === t.DIRECTION.UP || this.direction === t.DIRECTION.DOWN)
                for (e = 0; e < this.grid.monsters.length; e++)(i = this.grid.monsters[e]).frozen || i.gridPositionX === this.startingGridX && i.gridPositionY === this.gridCell.gridPositionY && (i.gridCell = this.gridCell, this.createExplosion());
            else if (this.direction === t.DIRECTION.LEFT || this.direction === t.DIRECTION.RIGHT)
                for (e = 0; e < this.grid.monsters.length; e++)(i = this.grid.monsters[e]).frozen || i.gridPositionY === this.startingGridY && i.gridPositionX === this.gridCell.gridPositionX && (i.gridCell = this.gridCell, this.createExplosion())
        }, i.prototype.moveIceLeft = function() {
            this.x <= this.grid.cells[0][this.startingGridY].centerX ? this.createExplosion() : 0 !== this.startingGridX && !this.grid.cells[this.startingGridX - 1][this.startingGridY].isEmpty && this.x - .5 * t.SETTINGS.CELL_WIDTH * this.gameScale <= this.grid.cells[this.startingGridX - 1][this.startingGridY].right ? this.iceCollision(this.grid.cells[this.startingGridX - 1][this.startingGridY]) : this.x -= this.flyingSpeed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.moveIceRight = function() {
            this.x >= this.grid.cells[t.SETTINGS.GRID_WIDTH - 1][this.startingGridY].centerX ? this.createExplosion() : this.startingGridX !== t.SETTINGS.GRID_WIDTH - 1 && !this.grid.cells[this.startingGridX + 1][this.startingGridY].isEmpty && this.x + .5 * t.SETTINGS.CELL_WIDTH * this.gameScale >= this.grid.cells[this.startingGridX + 1][this.startingGridY].left ? this.iceCollision(this.grid.cells[this.startingGridX + 1][this.startingGridY]) : this.x += this.flyingSpeed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.moveIceUp = function() {
            this.y <= this.grid.cells[this.startingGridX][0].centerY ? this.createExplosion() : 0 !== this.startingGridY && !this.grid.cells[this.startingGridX][this.startingGridY - 1].isEmpty && this.y - .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale <= this.grid.cells[this.startingGridX][this.startingGridY - 1].bottom ? this.iceCollision(this.grid.cells[this.startingGridX][this.startingGridY - 1]) : this.y -= this.flyingSpeed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.moveIceDown = function() {
            this.y >= this.grid.cells[this.startingGridX][t.SETTINGS.GRID_HEIGHT - 1].centerY ? this.createExplosion() : this.startingGridY !== t.SETTINGS.GRID_HEIGHT - 1 && !this.grid.cells[this.startingGridX][this.startingGridY + 1].isEmpty && this.y + .5 * t.SETTINGS.CELL_HEIGHT * this.gameScale >= this.grid.cells[this.startingGridX][this.startingGridY + 1].y ? this.iceCollision(this.grid.cells[this.startingGridX][this.startingGridY + 1]) : this.y += this.flyingSpeed * this.gameScale * this.game.time.elapsedMS
        }, i.prototype.updateIceCell = function(e) {
            this.cellsFlying.length > 0 && this.gridCell.gridPositionX === this.cellsFlying[this.cellFlyingIndex].gridPositionX && this.gridCell.gridPositionY === this.cellsFlying[this.cellFlyingIndex].gridPositionY && (this.gridCell.cellContains = this.cellsFlyingContains[this.cellFlyingIndex], this.gridCell.isDangerCell = !1, ++this.cellFlyingIndex >= this.cellsFlying.length && this.createExplosion(), this.cellFlyingIndex >= this.cellsFlyingContains.length && (this.cellFlyingIndex = this.cellsFlyingContains.length - 1)), this.gridCell.isEmpty = !0, this.gridCell.gridPositionY !== e.gridPositionY && this.grid.rowsGroup[e.gridPositionY].add(this), this.isFlying && (this.startingGridX = e.gridPositionX, this.startingGridY = e.gridPositionY, this.gridCell = e, this.gridCell.isDangerCell = !0, this.gridCell.dangerOwner = this.player, (this.gridCell.isItem || this.gridCell.cellContains === t.MAP.ITEM) && this.grid.removeItemFromArray(this.gridCell, !0))
        }, i.prototype.iceCollision = function(e) {
            switch (e.cellContains) {
                case t.MAP.BLOCK:
                    this.grid.destroyBox(e), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE))), this.createExplosion();
                    break;
                case t.MAP.BOMB:
                    this.grid.explodeBomb(e), this.createExplosion();
                    break;
                case t.MAP.WALL:
                    this.createExplosion()
            }
        }, i.prototype.createExplosion = function() {
            this.gridCell.isDangerCell = !0, this.gridCell.dangerWeapon = !0, this.gridCell.dangerOwner = this.player, this.game.ph2AudioManager.playEffect("", !1), this.animationIce.ph2Animations.play("ice_gun_fx_end", 1, !1).onComplete.add(this.destroyIce, this), this.previousContain = this.gridCell.cellContains, this.isFlying = !1
        }, i.prototype.destroyIce = function() {
            this.animationIce.ph2Animations.stop(), this.gridCell.cellContains = t.MAP.FREE, this.gridCell.isDangerCell = !1, this.gridCell.isEmpty = !0, this.destroy()
        }, i
    }(t.Weapon);
    t.IceGun = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, i, s, n) || this;
            return a.laserCells = [], a.laserSprites = [], a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationLaser = this.game.add.ph2AnimationObject(0, e, "lightning_gun", "atlas_weapons0"), this.animationLaser.visible = !1, this.add(this.animationLaser)
        }, i.prototype.update = function() {
            e.prototype.update.call(this)
        }, i.prototype.useWeapon = function() {
            e.prototype.useWeapon.call(this);
            var i, s, n;
            switch (this.gridCell = this.player.gridCell, i = this.player.x, s = this.player.y, this.player.direction) {
                case t.DIRECTION.UP:
                    n = "lightning_up";
                    break;
                case t.DIRECTION.DOWN:
                    n = "lightning_down";
                    break;
                case t.DIRECTION.LEFT:
                    n = "lightning_side";
                    break;
                case t.DIRECTION.RIGHT:
                    n = "lightning_side", this.animationLaser.scaleX = -1
            }
            return this.obtainLaserCells(), this.player.attacking = !0, this.animationLaser.visible = !0, this.x = i, this.y = s, this.direction === t.DIRECTION.UP ? this.grid.rowsGroup[0].add(this) : this.grid.rowsGroup[this.gridCell.gridPositionY].add(this), this.game.ph2AudioManager.playEffect("useLaserReady", !1), this.animationLaser.ph2Animations.play(n, 1, !1).onComplete.add(this.restartCells, this), this.weaponUsed = !0, !0
        }, i.prototype.obtainLaserCells = function() {
            var e, i, s, n;
            switch (i = this.gridCell.gridPositionX, s = this.gridCell.gridPositionY, this.player.direction) {
                case t.DIRECTION.UP:
                    for (e = s - 1; e >= 0; e--)(n = this.grid.cells[i][e]).cellContains !== t.MAP.WALL ? this.createLaserCell(n) && (e = -1) : e = -1;
                    break;
                case t.DIRECTION.DOWN:
                    for (e = s + 1; e < t.SETTINGS.GRID_HEIGHT; e++)(n = this.grid.cells[i][e]).cellContains !== t.MAP.WALL ? this.createLaserCell(n) && (e = t.SETTINGS.GRID_HEIGHT) : e = t.SETTINGS.GRID_HEIGHT;
                    break;
                case t.DIRECTION.LEFT:
                    for (e = i - 1; e >= 0; e--)(n = this.grid.cells[e][s]).cellContains !== t.MAP.WALL ? this.createLaserCell(n) && (e = -1) : e = -1;
                    break;
                case t.DIRECTION.RIGHT:
                    for (e = i + 1; e < t.SETTINGS.GRID_WIDTH; e++)(n = this.grid.cells[e][s]).cellContains !== t.MAP.WALL ? this.createLaserCell(n) && (e = t.SETTINGS.GRID_WIDTH) : e = t.SETTINGS.GRID_WIDTH
            }
        }, i.prototype.createLaserCell = function(e) {
            var i, s, n, a, o, r, h, l;
            switch (l = 0 === this.laserCells.length, i = !1, e.isDangerCell = !0, e.dangerOwner = this.player, e.dangerWeapon = !0, o = e.centerX, r = e.centerY, h = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .25, e.cellContains === t.MAP.BOMB && this.grid.explodeBomb(e), (e.cellContains === t.MAP.BLOCK || e.isBox) && (i = !0, s = !0, this.grid.destroyBox(e), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE)))), (e.cellContains === t.MAP.ITEM || e.isItem) && this.grid.removeItemFromArray(e, !0), (e.cellContains === t.MAP.COIN || e.isCoin) && this.grid.coinPickedUp(e, !0), this.player.direction) {
                case t.DIRECTION.UP:
                    o += h;
                    break;
                case t.DIRECTION.DOWN:
                    o -= h
            }
            if (s) switch (this.player.direction) {
                case t.DIRECTION.UP:
                    o += h, r = e.bottom, a = "lightning_edge_up1.png";
                    break;
                case t.DIRECTION.DOWN:
                    o -= h, r = e.top, a = "lightning_edge_back1.png";
                    break;
                case t.DIRECTION.LEFT:
                    o = e.right, a = "lightning_edge_l2.png";
                    break;
                case t.DIRECTION.RIGHT:
                    o = e.left, a = "lightning_edge_r1.png"
            } else a = this.player.direction === t.DIRECTION.LEFT || this.player.direction === t.DIRECTION.RIGHT ? "lightning_tile_h.png" : "lightning_tile_v.png", this.player.direction !== t.DIRECTION.RIGHT && this.player.direction !== t.DIRECTION.LEFT || (r -= t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .25);
            return (n = new Phaser.Sprite(this.game, o, r, "atlas_weapons0", a)).anchor.set(.5), l && this.scaleFirstCell(n), this.grid.rowsGroup[e.gridPositionY].add(n), this.laserCells.push(e), this.laserSprites.push(n), i
        }, i.prototype.scaleFirstCell = function(e) {
            var i, s;
            switch (this.player.direction) {
                case t.DIRECTION.UP:
                    i = e.y + .5 * e.height, s = Math.abs(this.player.y - i), e.y += .5 * s, e.height += s;
                    break;
                case t.DIRECTION.DOWN:
                    i = e.y - .5 * e.height, s = Math.abs(this.player.y - i), e.y -= .5 * s, e.height += s;
                    break;
                case t.DIRECTION.LEFT:
                    i = e.x + .5 * e.width, s = Math.abs(this.player.x - i), e.x += .5 * s, e.width += s;
                    break;
                case t.DIRECTION.RIGHT:
                    i = e.x - .5 * e.width, s = Math.abs(this.player.x - i), e.x -= .5 * s, e.width += s;
                    break;
                default:
                    i = 0
            }
        }, i.prototype.playerKilled = function() {
            e.prototype.playerKilled.call(this), this.weaponUsed && this.restartCells()
        }, i.prototype.restartCells = function() {
            var t;
            for (t = 0; t < this.laserCells.length; t++) this.laserCells[t].isDangerCell = !1, this.laserCells[t].dangerWeapon = !1, this.laserCells[t].dangerOwner = null;
            for (t = this.laserSprites.length - 1; t >= 0; t--) this.laserSprites[t].destroy(), this.laserSprites.splice(t, 1);
            this.player.weaponActive || (this.player.clearWeaponSkin(), this.player.checkNextWeapon()), this.player.attacking = !1, this.animationLaser.ph2Animations.stop(), this.animationLaser.destroy(!0), this.destroy(!0)
        }, i
    }(t.Weapon);
    t.LaserGun = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, i, s, n) || this;
            return a.usableCells = [], a.markedCells = [], a.animationMarkedCells = [], a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationGun = this.game.add.ph2AnimationObject(0, e, "laser_gun_fx2", "atlas_weapons0"), this.animationGun.visible = !1, this.add(this.animationGun)
        }, i.prototype.update = function() {
            e.prototype.update.call(this)
        }, i.prototype.useWeapon = function() {
            e.prototype.useWeapon.call(this);
            return this.gridCell = this.player.gridCell, this.player.attacking = !0, this.animationGun.visible = !0, this.x = this.player.x, this.y = this.player.y, this.animationGun.ph2Animations.play("laser_gun_fx2_anim", 1, !1).onComplete.add(this.shootLightning, this), this.game.ph2AudioManager.playEffect("sound_lightening", !1), this.grid.rowsGroup[0].add(this), this.obtainUsableCells(), !0
        }, i.prototype.obtainUsableCells = function() {
            var e, i, s, n, a, o, r, h, l, c;
            switch (s = this.gridCell.gridPositionX, n = this.gridCell.gridPositionY, l = 0, this.player.direction) {
                case t.DIRECTION.UP:
                    for (h = 0, i = o = n - 1; i >= h; i--) {
                        for (a = s - l < 0 ? 0 : s - l, r = s + l >= t.SETTINGS.GRID_WIDTH ? t.SETTINGS.GRID_WIDTH - 1 : s + l, e = a; e < r + 1; e++) c = this.grid.cells[e][i], this.usableCells.push(c);
                        l++
                    }
                    break;
                case t.DIRECTION.DOWN:
                    for (o = n + 1, h = t.SETTINGS.GRID_HEIGHT, i = o; i < h; i++) {
                        for (a = s - l < 0 ? 0 : s - l, r = s + l >= t.SETTINGS.GRID_WIDTH ? t.SETTINGS.GRID_WIDTH - 1 : s + l, e = a; e < r + 1; e++) c = this.grid.cells[e][i], this.usableCells.push(c);
                        l++
                    }
                    break;
                case t.DIRECTION.LEFT:
                    for (r = 0, e = a = s - 1; e >= r; e--) {
                        for (o = n - l < 0 ? 0 : n - l, h = n + l >= t.SETTINGS.GRID_HEIGHT ? t.SETTINGS.GRID_HEIGHT - 1 : n + l, i = o; i < h + 1; i++) c = this.grid.cells[e][i], this.usableCells.push(c);
                        l++
                    }
                    break;
                case t.DIRECTION.RIGHT:
                    for (a = s + 1, r = t.SETTINGS.GRID_WIDTH, e = a; e < r; e++) {
                        for (o = n - l < 0 ? 0 : n - l, h = n + l >= t.SETTINGS.GRID_HEIGHT ? t.SETTINGS.GRID_HEIGHT - 1 : n + l, i = o; i < h + 1; i++) c = this.grid.cells[e][i], this.usableCells.push(c);
                        l++
                    }
            }
            this.markRandomCells()
        }, i.prototype.markRandomCells = function() {
            var e, i, s, n, a;
            if (n = this.usableCells.length, s = 0, !(n <= 0)) {
                if (n <= 6)
                    for (e = 0; e < n; e++)(i = this.usableCells[e]).cellContains !== t.MAP.WALL && this.markedCells.push(i);
                else
                    for (; s < 6;) a = this.game.rnd.integerInRange(0, this.usableCells.length - 1), (i = this.usableCells[a]).cellContains !== t.MAP.WALL && (s++, this.markedCells.push(i), this.usableCells.splice(a, 1));
                this.createMarkedCellsAnimation()
            }
        }, i.prototype.createMarkedCellsAnimation = function() {
            var t, e, i, s;
            for (e = this.markedCells.length, t = 0; t < e; t++) i = this.markedCells[t], (s = this.game.add.ph2AnimationObject(i.centerX, i.centerY, "laser_gun_fx1", "atlas_weapons0")).ph2Animations.play("laser_gun_fx1_anim", 1, !0), this.grid.rowsGroup[i.gridPositionY].add(s), this.animationMarkedCells.push(s)
        }, i.prototype.shootLightning = function() {
            var e, i, s, n, a, o, r, h, l;
            if (!this.weaponDisabled) {
                switch (l = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .25, t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .15, this.player.direction) {
                    case t.DIRECTION.UP:
                        l = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .25;
                        break;
                    case t.DIRECTION.DOWN:
                        l = -t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .25;
                        break;
                    case t.DIRECTION.LEFT:
                        l = -t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .15;
                        break;
                    case t.DIRECTION.RIGHT:
                        l = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .15
                }
                for (i = this.markedCells.length, h = this.grid.rowsGroup.length - 1, e = 0; e < i; e++)(s = this.markedCells[e]).isDangerCell = !0, s.dangerOwner = this.player, o = Phaser.Math.angleBetween(this.player.x + l, this.player.y, s.centerX, s.centerY), r = Phaser.Math.distance(this.player.x + l, this.player.y, s.centerX, s.centerY) / 621, (a = this.game.add.ph2AnimationObject(s.centerX, s.centerY, "laser_gun_fx3", "atlas_weapons0")).scaleY = r, a.rotation = o - 1.57, n = a.ph2Animations.play("laser_gun_fx3_anim", 1, !1), 0 === e && n.onComplete.add(this.destroyGun, this), this.grid.rowsGroup[h].add(a), this.animationMarkedCells[e].visible = !1, s.cellContains === t.MAP.BOMB && this.grid.explodeBomb(s), (s.cellContains === t.MAP.BLOCK || s.isBox) && (this.grid.destroyBox(s), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE)))), (s.cellContains === t.MAP.ITEM || s.isItem) && this.grid.removeItemFromArray(s, !0), (s.cellContains === t.MAP.COIN || s.isCoin) && this.grid.coinPickedUp(s, !0);
                this.grid.startLightningShake(), i <= 0 && (this.player.attacking = !1)
            }
        }, i.prototype.playerKilled = function() {
            e.prototype.playerKilled.call(this);
            var t;
            for (this.animationGun.ph2Animations.stop(), this.animationGun.visible = !1, t = 0; t < this.animationMarkedCells.length; t++) this.animationMarkedCells[t].ph2Animations.stop(), this.animationMarkedCells[t].visible = !1
        }, i.prototype.destroyGun = function() {
            var t, e, i;
            for (e = this.markedCells.length, t = 0; t < e; t++)(i = this.markedCells[t]).isDangerCell = !1, i.dangerOwner = null;
            for (t = this.animationMarkedCells.length - 1; t >= 0; t--) this.animationMarkedCells[t].ph2Animations.stop(), this.animationMarkedCells[t].destroy();
            this.player.weaponActive || (this.player.clearWeaponSkin(), this.player.checkNextWeapon()), this.player.attacking = !1, this.animationGun.ph2Animations.stop(), this.destroy()
        }, i
    }(t.Weapon);
    t.LightningGun = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, i, s, n) || this;
            return a.shockWaveCells = [], a.shockWaves = [], a.timeWave = 100, a.timerShockWaves = 0, a.creatingShockWaves = !1, a.currentShockWave = 0, a.createAnimations(), a
        }
        return __extends(i, e), i.prototype.createAnimations = function() {
            var e;
            e = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .3, this.animationHammer = this.game.add.ph2AnimationObject(0, e, "mighty_hammer", "atlas_weapons1"), this.animationHammer.visible = !1, this.add(this.animationHammer)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.checkShockWaves()
        }, i.prototype.checkShockWaves = function() {
            this.gameStatus !== t.GAME_STATUS.PAUSED && this.gameStatus !== t.GAME_STATUS.GAME_OVER && this.creatingShockWaves && (this.timerShockWaves += this.game.time.elapsedMS, this.timerShockWaves >= this.timeWave && (this.timerShockWaves = 0, this.createShockwave()))
        }, i.prototype.useWeapon = function() {
            e.prototype.useWeapon.call(this);
            var i;
            switch (this.direction) {
                case t.DIRECTION.UP:
                    this.animationHammer.scaleX = 1, i = "mighty_hammer_up";
                    break;
                case t.DIRECTION.DOWN:
                    this.animationHammer.scaleX = 1, i = "mighty_hammer_down";
                    break;
                case t.DIRECTION.LEFT:
                    this.animationHammer.scaleX = 1, i = "mighty_hammer_side";
                    break;
                case t.DIRECTION.RIGHT:
                    this.animationHammer.scaleX = -1, i = "mighty_hammer_side"
            }
            return this.player.attacking = !0, this.gridCell = this.player.gridCell, this.animationHammer.visible = !0, this.x = this.player.x, this.y = this.player.y, this.obtainCells(), this.game.ph2AudioManager.playEffect("sound_TerminalHammer", !1), this.grid.rowsGroup[this.gridCell.gridPositionY].add(this), this.animationHammer.ph2Animations.play(i, 1, !1).onEvent.add(this.initShockwave, this), this.weaponUsed = !0, !0
        }, i.prototype.playerKilled = function() {
            e.prototype.playerKilled.call(this);
            var t;
            if (this.grid.stopHammerShake(this.player.playerID), this.animationHammer.ph2Animations.stop(), this.animationHammer.visible = !1, this.weaponUsed)
                for (t = 0; t < this.shockWaves.length; t++) this.shockWaves[t].resetCell()
        }, i.prototype.initShockwave = function() {
            this.weaponDisabled || (this.shockWaveCells.length <= 0 ? (this.player.attacking = !1, this.player.checkNextWeapon()) : (this.creatingShockWaves = !0, this.grid.startHammerShake(this.player.playerID)))
        }, i.prototype.createShockwave = function() {
            var e, i, s;
            this.weaponDisabled || (i = this.currentShockWave === this.shockWaveCells.length - 1, s = this.shockWaveCells[this.currentShockWave], i && (this.player.checkNextWeapon(), this.player.attacking = !1), (e = new t.MightyShockwave(this.game, this.grid, this.player, t.ITEM_TYPE.MIGHTY_HAMMER, this.direction, s, i)).useWeapon(), this.shockWaves.push(e), ++this.currentShockWave >= this.shockWaveCells.length && (this.creatingShockWaves = !1))
        }, i.prototype.obtainCells = function() {
            var e, i, s, n;
            switch (this.direction) {
                case t.DIRECTION.UP:
                    for (s = this.gridCell.gridPositionX, e = n = this.gridCell.gridPositionY - 1; e >= 0; e--) i = this.grid.cells[s][e], this.shockWaveCells.push(i);
                    break;
                case t.DIRECTION.DOWN:
                    for (s = this.gridCell.gridPositionX, e = n = this.gridCell.gridPositionY + 1; e < t.SETTINGS.GRID_HEIGHT; e++) i = this.grid.cells[s][e], this.shockWaveCells.push(i);
                    break;
                case t.DIRECTION.LEFT:
                    for (s = this.gridCell.gridPositionX - 1, n = this.gridCell.gridPositionY, e = s; e >= 0; e--) i = this.grid.cells[e][n], this.shockWaveCells.push(i);
                    break;
                case t.DIRECTION.RIGHT:
                    for (s = this.gridCell.gridPositionX + 1, n = this.gridCell.gridPositionY, e = s; e < t.SETTINGS.GRID_WIDTH; e++) i = this.grid.cells[e][n], this.shockWaveCells.push(i)
            }
        }, i
    }(t.Weapon);
    t.MightyHammer = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a, o, r) {
            var h = e.call(this, t, i, s, n) || this;
            return h.direction = a, h.gridCell = o, h.gridPositionX = o.gridPositionX, h.gridPositionY = o.gridPositionY, h.lastWave = r, h.x = o.centerX, h.y = o.centerY, h.createFX(), h
        }
        return __extends(i, e), i.prototype.createFX = function() {
            var e;
            e = this.direction === t.DIRECTION.LEFT || this.direction === t.DIRECTION.RIGHT ? "mighty_hammer_fx1" : "mighty_hammer_fx2", this.animationFX = this.game.add.ph2AnimationObject(0, 0, e, "atlas_weapons1"), this.animationFX.visible = !1, this.direction === t.DIRECTION.RIGHT && (this.animationFX.scaleX = -1), this.add(this.animationFX), this.grid.rowsGroup[this.gridPositionY].add(this)
        }, i.prototype.useWeapon = function() {
            e.prototype.useWeapon.call(this);
            var i;
            this.animationFX.visible = !0, this.gridCell.isDangerCell = !0, this.gridCell.dangerWeapon = !0, this.gridCell.dangerOwner = this.player, this.gridCell.cellContains === t.MAP.BOMB && this.grid.explodeBomb(this.gridCell), (this.gridCell.cellContains === t.MAP.BLOCK || this.gridCell.isBox) && (this.grid.destroyBox(this.gridCell), this.player.isAI || (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_30_BLOCKS), this.grid.gameMode === t.GAME_MODE.ARCADE && (this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_20_BLOCKS_IN_ARCADE_MODE_1_LEVEL), this.game.ph2NotificationManager.postNotification("_CHECK_MISSION", t.MISSION.DESTROY_120_BLOCKS_IN_ARCADE)))), (this.gridCell.cellContains === t.MAP.ITEM || this.gridCell.isItem) && this.grid.removeItemFromArray(this.gridCell, !0), (this.gridCell.cellContains === t.MAP.COIN || this.gridCell.isCoin) && this.grid.coinPickedUp(this.gridCell, !0), i = this.direction === t.DIRECTION.LEFT || this.direction === t.DIRECTION.RIGHT ? "mighty_hammer_fx1_anim" : "mighty_hammer_fx2_anim", this.animationFX.ph2Animations.play(i, 1, !1).onComplete.add(this.resetCell, this)
        }, i.prototype.resetCell = function() {
            this.lastWave && this.grid.stopHammerShake(this.player.playerID), this.gridCell.isDangerCell = !1, this.gridCell.dangerWeapon = !1, this.gridCell.dangerOwner = null, this.animationFX.ph2Animations.stop(), this.animationFX.destroy(), this.destroy()
        }, i
    }(t.Weapon);
    t.MightyShockwave = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, s.centerX, s.centerY, i, s) || this;
            return a.direction = n, a.gridCell.isBooster = !0, a.gridCell.booster = a, a.createAnimation(), a
        }
        return __extends(i, e), i.prototype.createAnimation = function() {
            var e, i;
            switch (this.direction) {
                case t.DIRECTION.UP:
                    e = 0;
                    break;
                case t.DIRECTION.DOWN:
                    e = 180;
                    break;
                case t.DIRECTION.LEFT:
                    e = 270;
                    break;
                case t.DIRECTION.RIGHT:
                    e = 90
            }
            this.gridCell.centerX, this.gridCell.bottom, i = Phaser.Animation.generateFrameNames("tile_race_track_up", 1, 4, ".png"), this.animationBooster = new Phaser.Sprite(this.game, 0, 0, "atlas_gameplay", "tile_race_track_up1.png"), this.animationBooster.angle = e, this.animationBooster.anchor.set(.5), this.animationBooster.animations.add("stand", i, 15, !0), this.animationBooster.animations.play("stand"), this.add(this.animationBooster), this.grid.rowsGroup[0].add(this)
        }, i
    }(t.Tile);
    t.Booster = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s) {
            var n = t.call(this, e, s.left, s.top, i, s) || this;
            return n.creamTile = new Phaser.Sprite(n.game, 0, 0, "atlas_gameplay", "tile_cream.png"), n.grid.rowsGroup[0].add(n), n.add(n.creamTile), n
        }
        return __extends(e, t), e
    }(t.Tile);
    t.Cream = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n, a, o, r) {
            var h = e.call(this, t, i, s, n, a) || this;
            return h.used = !1, h.palmTree1 = o, h.palmTree2 = r, h.grid.rowsGroup[h.gridPositionY].add(h), h.gridCell.hammock = h, h.getHammockSide(), h.createHammock(), h
        }
        return __extends(i, e), i.prototype.getHammockSide = function() {
            var e, i, s, n;
            e = this.palmTree1.gridPositionX, s = this.palmTree1.gridPositionY, i = this.palmTree2.gridPositionX, n = this.palmTree2.gridPositionY, this.gridPositionX === e && this.gridPositionX === i ? this.hammockSide = "vertical" : this.gridPositionY === s && this.gridPositionY === n && (this.hammockSide = "horizontal"), this.palmTree1.cellContains = t.MAP.WALL, this.palmTree1.isForcedFreeCell = !1, this.palmTree1.isEmpty = !1, this.palmTree2.cellContains = t.MAP.WALL, this.palmTree2.isForcedFreeCell = !1, this.palmTree2.isEmpty = !1
        }, i.prototype.createHammock = function() {
            var e, i, s;
            e = "horizontal" === this.hammockSide ? "hammock_horizontal" : "hammock_vertical", i = t.SETTINGS.SCALE * t.SETTINGS.CELL_WIDTH * .5, s = t.SETTINGS.SCALE * t.SETTINGS.CELL_HEIGHT * .5, this.springAnimation = this.game.add.ph2AnimationObject(i, s, "hammock", "atlas_anim"), this.springAnimation.ph2Animations.play(e, 1, !1), this.springAnimation.ph2Animations.stop(e, !0), this.addChild(this.springAnimation)
        }, i.prototype.update = function() {
            e.prototype.update.call(this)
        }, i.prototype.hammockSteppedOn = function() {
            var t, e;
            return e = "horizontal" === this.hammockSide ? "hammock_horizontal" : "hammock_vertical", t = this.chooseRandomCell(), this.springAnimation.ph2Animations.play(e, 1, !1).onComplete.add(this.restartUsage, this), t
        }, i.prototype.chooseRandomCell = function() {
            var e, i, s;
            for (s = [], e = 0; e < this.grid.beachLandingCells.length; e++)((i = this.grid.beachLandingCells[e]).isEmpty || i.cellContains === t.MAP.FREE) && s.push(i);
            return _.sample(s)
        }, i.prototype.restartUsage = function() {
            this.used = !1
        }, i
    }(t.Tile);
    t.Hammock = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(t) {
        function e(e, i, s, n) {
            var a = t.call(this, e, s.left, s.top, i, s) || this;
            return a.portalColor = n, a.gridCell.portal = a, a.gridCell.isPortal = !0, a.createAnimation(), a
        }
        return __extends(e, t), e.prototype.createAnimation = function() {
            var t, e, i;
            switch (this.portalColor) {
                case "blue":
                    i = "forest_portal_blue";
                    break;
                case "green":
                    i = "forest_portal_green";
                    break;
                case "yellow":
                    i = "forest_portal_yellow";
                    break;
                default:
                    i = "forest_portal_blue"
            }
            t = this.gridCell.centerX, e = this.gridCell.bottom, this.animationPortal = this.game.add.ph2AnimationObject(t, e, i, "atlas_anim"), this.animationPortal.ph2Animations.play("forest_portal_stand", 1, !0), this.grid.rowsGroup[this.gridCell.gridPositionY].add(this.animationPortal)
        }, e
    }(t.Tile);
    t.Portal = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s, n) {
            var a = e.call(this, t, s.left, s.top, i, s) || this;
            return a.mapNumber = n, a.createRail(), a
        }
        return __extends(i, e), i.prototype.createRail = function() {
            var e, i, s, n, a, o, r, h, l, c, u, d, p, m = 0;
            if (i = this.gridCell.gridPositionX, s = this.gridCell.gridPositionY, 0 === this.mapNumber ? (r = t.SETTINGS.TRACK_HORIZONTAL_1, h = t.SETTINGS.TRACK_VERTICAL_1, l = t.SETTINGS.TRACK_UP_LEFT_1, c = t.SETTINGS.TRACK_UP_RIGHT_1, u = t.SETTINGS.TRACK_DOWN_LEFT_1, d = t.SETTINGS.TRACK_DOWN_RIGHT_1) : (r = t.SETTINGS.TRACK_HORIZONTAL_2, h = t.SETTINGS.TRACK_VERTICAL_2, l = t.SETTINGS.TRACK_UP_LEFT_2, c = t.SETTINGS.TRACK_UP_RIGHT_2, u = t.SETTINGS.TRACK_DOWN_LEFT_2, d = t.SETTINGS.TRACK_DOWN_RIGHT_2), !(p = !1))
                for (e = 0; e < r.length; e++)
                    if (i === r[e].x && s === r[e].y) {
                        n = "tile_race_track_line.png", m = 0, p = !0;
                        break
                    }
            if (!p)
                for (e = 0; e < h.length; e++)
                    if (i === h[e].x && s === h[e].y) {
                        n = "tile_race_track_line.png", m = 90, p = !0;
                        break
                    }
            if (!p)
                for (e = 0; e < l.length; e++)
                    if (i === l[e].x && s === l[e].y) {
                        n = "tile_race_track_corner.png", m = 270, p = !0;
                        break
                    }
            if (!p)
                for (e = 0; e < c.length; e++)
                    if (i === c[e].x && s === c[e].y) {
                        n = "tile_race_track_corner.png", m = 0, p = !0;
                        break
                    }
            if (!p)
                for (e = 0; e < u.length; e++)
                    if (i === u[e].x && s === u[e].y) {
                        n = "tile_race_track_corner.png", m = 180, p = !0;
                        break
                    }
            if (!p)
                for (e = 0; e < d.length; e++)
                    if (i === d[e].x && s === d[e].y) {
                        n = "tile_race_track_corner.png", m = 90, p = !0;
                        break
                    }
            a = .5 * t.SETTINGS.CELL_WIDTH * t.SETTINGS.SCALE, o = .5 * t.SETTINGS.CELL_HEIGHT * t.SETTINGS.SCALE, this.gridCell.isForcedFreeCell = !0, this.gridCell.isEmpty = !0, this.gridCell.cellContains = t.MAP.FREE, this.raceSprite = new Phaser.Sprite(this.game, a, o, "atlas_gameplay", n), this.raceSprite.anchor.set(.5), this.raceSprite.angle = m, this.grid.rowsGroup[0].add(this), this.add(this.raceSprite)
        }, i
    }(t.Tile);
    t.RaceTile = e
}(Game || (Game = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i(t, i, s) {
            var n = e.call(this, t, s.centerX, s.centerY, i, s) || this;
            return n.isActive = !1, n.activeTimer = 0, n.timeToActivate = 1e3 * n.game.rnd.integerInRange(4, 10), n.gridCell.warningClaw = n, n.gridCell.isWarningClaw = !0, n.createWarningClaws(), n
        }
        return __extends(i, e), i.prototype.createWarningClaws = function() {
            this.warningClawAnimation = this.game.add.ph2AnimationObject(0, 0, "alert", "atlas_anim"), this.grid.rowsGroup[this.gridPositionY].add(this), this.add(this.warningClawAnimation)
        }, i.prototype.update = function() {
            e.prototype.update.call(this), this.grid.gameStatus !== t.GAME_STATUS.GAME_OVER && this.grid.gameStatus !== t.GAME_STATUS.PAUSED && (this.isActive || (this.activeTimer += this.game.time.elapsedMS, this.activeTimer >= this.timeToActivate && (this.activeTimer = 0, this.timeToActivate = 1e3 * this.game.rnd.integerInRange(4, 10), this.activateClaws())))
        }, i.prototype.activateClaws = function() {
            var t = this;
            this.isActive = !0, this.gridCell.isDangerCell = !0, this.warningClawAnimation.ph2Animations.play("alert_play", 1, !1).onComplete.add(function() {
                t.isActive = !1, t.gridCell.isDangerCell = !1
            }, this)
        }, i
    }(t.Tile);
    t.Warning = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function t(t) {
            this.game = t
        }
        return t.prototype.checkGameData = function() {
            null === this.game.storage.getItem("created") && this.createData()
        }, t.prototype.createData = function() {
            this.game.storage.setItem("created", JSON.stringify(!0)), this.game.storage.setItem("language", JSON.stringify("en-US")), this.game.storage.setItem("music", JSON.stringify(!0)), this.game.storage.setItem("audio", JSON.stringify(!0)), this.game.storage.setItem("lives_player_1", JSON.stringify(3)), this.game.storage.setItem("lives_player_2", JSON.stringify(3)), this.game.storage.setItem("player_points", JSON.stringify(3e3)), this.game.storage.setItem("total_stars", JSON.stringify(3e3)), this.game.storage.setItem("current_level", JSON.stringify(1)), this.game.storage.setItem("outfit_player_1", JSON.stringify({
                face: 0,
                head: 0,
                body: 0
            })), this.game.storage.setItem("outfit_player_2", JSON.stringify({
                face: 0,
                head: 0,
                body: 0
            })), this.game.storage.setItem("outfit_player_3", JSON.stringify({
                face: 0,
                head: 0,
                body: 0
            })), this.game.storage.setItem("outfit_player_4", JSON.stringify({
                face: 0,
                head: 0,
                body: 0
            })), this.game.storage.setItem("characters_chosen", JSON.stringify([0, 1, 2, 3])), this.game.storage.setItem("unlocks", JSON.stringify([{
                character: 0,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 1,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 2,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 3,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 4,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 5,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 6,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }, {
                character: 7,
                items: [!1, !1, !1, !1, !1, !1, !1, !1, !1]
            }])), this.game.storage.setItem("equipped_outfits", JSON.stringify([{
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }, {
                face: 0,
                head: 0,
                body: 0
            }])), this.createMissionData()
        }, t.prototype.createMissionData = function() {
            var t, e, i;
            for (i = [], t = 0; t < 93; t++) e = {
                id: 0,
                progress: 0,
                progressArray: [],
                complete: !1,
                active: !1
            }, i.push(e);
            this.game.storage.setItem("missions", JSON.stringify(i)), this.game.storage.setItem("activeMissions", JSON.stringify([]))
        }, t.prototype.saveMissions = function(t) {
            this.game.storage.setItem("missions", JSON.stringify(t))
        }, t.prototype.saveActiveMissions = function(t) {
            this.game.storage.setItem("activeMissions", JSON.stringify(t))
        }, t.prototype.saveLanguage = function(t) {
            this.game.storage.setItem("language", JSON.stringify(t))
        }, t.prototype.saveAudio = function(t) {
            this.game.storage.setItem("audio", JSON.stringify(t))
        }, t.prototype.saveMusic = function(t) {
            this.game.storage.setItem("music", JSON.stringify(t))
        }, t.prototype.savePlayersPoints = function(t) {
            this.game.storage.setItem("player_points", JSON.stringify(t))
        }, t.prototype.saveLivesPlayer1 = function(t) {
            this.game.storage.setItem("lives_player_1", JSON.stringify(t))
        }, t.prototype.saveLivesPlayer2 = function(t) {
            this.game.storage.setItem("lives_player_2", JSON.stringify(t))
        }, t.prototype.saveCurrentLevel = function(t) {
            this.game.storage.setItem("current_level", JSON.stringify(t))
        }, t.prototype.saveCharactersChosen = function(t) {
            this.game.storage.setItem("characters_chosen", JSON.stringify(t))
        }, t.prototype.saveOutfitPlayer1 = function(t) {
            this.game.storage.setItem("outfit_player_1", JSON.stringify(t))
        }, t.prototype.saveOutfitPlayer2 = function(t) {
            this.game.storage.setItem("outfit_player_2", JSON.stringify(t))
        }, t.prototype.saveOutfitPlayer3 = function(t) {
            this.game.storage.setItem("outfit_player_3", JSON.stringify(t))
        }, t.prototype.saveOutfitPlayer4 = function(t) {
            this.game.storage.setItem("outfit_player_4", JSON.stringify(t))
        }, t.prototype.saveEquippedOutfits = function(t) {
            this.game.storage.setItem("equipped_outfits", JSON.stringify(t))
        }, t.prototype.saveUnlocks = function(t) {
            this.game.storage.setItem("unlocks", JSON.stringify(t))
        }, t.prototype.saveMapTheme = function(t) {
            this.game.storage.setItem("map_theme", JSON.stringify(t))
        }, t.prototype.getActiveMissions = function() {
            return null === this.game.storage.getItem("activeMissions") && this.game.storage.setItem("activeMissions", JSON.stringify([])), JSON.parse(this.game.storage.getItem("activeMissions"))
        }, t.prototype.getMissions = function() {
            return null === this.game.storage.getItem("missions") && this.createMissionData(), JSON.parse(this.game.storage.getItem("missions"))
        }, t.prototype.getLanguage = function() {
            return JSON.parse(this.game.storage.getItem("language"))
        }, t.prototype.getMusic = function() {
            return null === JSON.parse(this.game.storage.getItem("music")) && this.game.storage.setItem("music", JSON.stringify(!0)), JSON.parse(this.game.storage.getItem("music"))
        }, t.prototype.getAudio = function() {
            return JSON.parse(this.game.storage.getItem("audio"))
        }, t.prototype.getPlayerPoints = function() {
            return Number(this.game.storage.getItem("player_points"))
        }, t.prototype.getLivesPlayer1 = function() {
            return Number(this.game.storage.getItem("lives_player_1"))
        }, t.prototype.getLivesPlayer2 = function() {
            return Number(this.game.storage.getItem("lives_player_2"))
        }, t.prototype.getCurrentLevel = function() {
            return Number(this.game.storage.getItem("current_level"))
        }, t.prototype.getCharactersChosen = function() {
            return JSON.parse(this.game.storage.getItem("characters_chosen"))
        }, t.prototype.getOutfitPlayer1 = function() {
            return JSON.parse(this.game.storage.getItem("outfit_player_1"))
        }, t.prototype.getOutfitPlayer2 = function() {
            return JSON.parse(this.game.storage.getItem("outfit_player_2"))
        }, t.prototype.getOutfitPlayer3 = function() {
            return JSON.parse(this.game.storage.getItem("outfit_player_3"))
        }, t.prototype.getOutfitPlayer4 = function() {
            return JSON.parse(this.game.storage.getItem("outfit_player_4"))
        }, t.prototype.getEquippedOutfits = function() {
            return JSON.parse(this.game.storage.getItem("equipped_outfits"))
        }, t.prototype.getUnlocks = function() {
            return JSON.parse(this.game.storage.getItem("unlocks"))
        }, t.prototype.getMapTheme = function() {
            return JSON.parse(this.game.storage.getItem("map_theme"))
        }, t
    }();
    t.DataManager = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function e(t, e, i, s) {
            this.game = t, this.players = e, this.difficulty = i, this.gameMode = s, this.killScores = [0, 0, 0, 0], this.timeScores = [0, 0, 0, 0], this.starScores = [0, 0, 0, 0], this.coinScores = [0, 0, 0, 0], this.totalScores = [0, 0, 0, 0], this.finalScores = [0, 0, 0, 0], this.game.ph2NotificationManager.addObserver("_ADD_SCORE_KILLS", this.addScoreKills, this), this.game.ph2NotificationManager.addObserver("_ADD_SCORE_COINS", this.addScoreCoins, this), this.game.ph2NotificationManager.addObserver("_ADD_SCORE_STARS", this.addScoreStars, this)
        }
        return e.prototype.addScoreKills = function(e) {
            var i = 0;
            if (this.gameMode === t.GAME_MODE.ARCADE) switch (this.killScores[e]) {
                case 0:
                    i = 600;
                    break;
                case 600:
                case 900:
                    i = 300;
                    break;
                default:
                    i = 0
            } else i = t.SETTINGS.POINTS_PER_KILL;
            this.killScores[e] += i, this.totalScores[e] += i
        }, e.prototype.addScoreCoins = function(e) {
            this.coinScores[e] += t.SETTINGS.POINTS_PER_COIN, this.totalScores[e] += t.SETTINGS.POINTS_PER_COIN
        }, e.prototype.addScoreStars = function(e) {
            this.starScores[e] += t.SETTINGS.POINTS_PER_STAR, this.totalScores[e] += t.SETTINGS.POINTS_PER_STAR
        }, e.prototype.addLeftOverTime = function(e, i) {
            this.timeScores[i] += Math.floor((t.SETTINGS.MATCH_TIME - e) / 100), this.totalScores[i] += Math.floor((t.SETTINGS.MATCH_TIME - e) / 100)
        }, e.prototype.getMaxScore = function() {
            var t, e, i = 0;
            for (t = 0; t < this.totalScores.length; t++) this.totalScores[t] > i && (i = this.totalScores[t], e = t);
            return e
        }, e.prototype.cleanScores = function() {
            var t;
            for (t = 0; t < 4; t++) this.killScores[t] = 0, this.timeScores[t] = 0, this.starScores[t] = 0, this.coinScores[t] = 0, this.totalScores[t] = 0
        }, e
    }();
    t.ScoreManager = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function t(t, e) {
            this.game = t, this.language = e, this.jsonKey = "localization", this.localizationData = this.game.cache.getJSON(this.jsonKey)[this.language], this.charInitArg = "[", this.charEndArg = "]", this.specialSymbolArray = [], this.specialSymbolArray.push("<"), this.specialSymbolArray.push(">"), this.specialSymbolArray.push("&"), this.specialSymbolArray.push('"'), this.specialSymbolArray.push("'")
        }
        return t.prototype.localizeText = function(t, e, i, s) {
            void 0 === s && (s = !1);
            var n, a;
            return n = Ph2.UISystem.findObject(t, e), a = i, s || (a = this.localizationData[i]), n.clearColors(), n.text = a, n = this.checkColorStyle(n)
        }, t.prototype.localizeAnimText = function(t, e, i, s) {
            void 0 === s && (s = !1);
            var n, a;
            return n = Ph2.AnimationSystem.findObject(t, e), a = i, s || (a = this.localizationData[i]), n.clearColors(), n.text = a, n
        }, t.prototype.getStringForKey = function(t) {
            for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
            for (var s = this.localizationData[t], n = s.indexOf(this.charInitArg) + 1, a = s.indexOf(this.charEndArg), o = 0, r = s.substring(n, a);
                "" !== r && o < e.length;) s = s.split(this.charInitArg + r + this.charEndArg).join(e[o]), o++, n = s.indexOf(this.charInitArg) + 1, a = s.indexOf(this.charEndArg), r = s.substring(n, a);
            return s
        }, t.prototype.addSpriteTo = function(t) {
            for (var e = [], i = 1; i < arguments.length; i++) e[i - 1] = arguments[i];
            for (var s = this.localizationData[t], n = s.indexOf(this.charInitArg) + 1, a = s.indexOf(this.charEndArg), o = 0, r = s.substring(n, a);
                "" !== r && o < e.length;) s = s.split(this.charInitArg + r + this.charEndArg).join(e[o]), o++, n = s.indexOf(this.charInitArg) + 1, a = s.indexOf(this.charEndArg), r = s.substring(n, a);
            return s
        }, t.prototype.fitFontSizeUI = function(t, e, i, s, n, a) {
            void 0 === s && (s = -1), void 0 === n && (n = -1), void 0 === a && (a = Constants.MIN_FONT_SIZE_DEFAULT);
            var o;
            o = Ph2.UISystem.findObject(t, e), this.fitFontSizeText(o, i, s, n, a)
        }, t.prototype.fitFontSizeText = function(t, e, i, s, n) {
            void 0 === i && (i = -1), void 0 === s && (s = -1), void 0 === n && (n = Constants.MIN_FONT_SIZE_DEFAULT);
            var a, o, r, h;
            for (s > 0 && (t.fontSize = s), o = t.width, r = t.height, h = t.fontSize; o > e || r > i && -1 !== i;) {
                if ((a = parseInt(h.toString().replace("px", ""), 10) - 1) < n) {
                    h = a = n, t.fontSize = h;
                    break
                }
                h = a, t.fontSize = h, o = t.width, r = t.height
            }
        }, t.prototype.getLanguage = function() {
            return this.language
        }, t.prototype.checkColorStyle = function(t) {
            var e, i, s, n, a, o, r, h, l, c, u;
            for (0, a = (i = t.text).length, e = 0; e < a; e++)(s = i.indexOf("<s", 0)) < 0 ? e = a : (l = i.indexOf("|") + 1, c = i.indexOf(">"), u = parseFloat(i.substring(l, c)), o = i.slice(s + 3, s + 10), n = i.indexOf("s>", 1), r = i.substring(s, n + 2), h = i.substring(c + 1, n - 2), e = n + 1, i = i.replace(r, h), t.text = t.text.replace(r, h), t.strokeThickness = u, t.addStrokeColor(o, s), a = i.length);
            for (e = 0; e < a; e++)(s = i.indexOf("<c", 0)) < 0 ? e = a : (o = i.slice(s + 3, s + 10), n = i.indexOf("c>", 1), r = i.substring(s, n + 2), h = i.substring(s + 11, n - 2), e = n + 1, i = i.replace(r, h), t.text = t.text.replace(r, h), t.addColor(o, s), a = i.length);
            return t
        }, t
    }();
    t.LocalizationManager = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function e(t) {
            this.game = t, this.missions = [], this.missionsActive = [], this.missionsComplete = [], this.missionsAvailable = [], this.createMissions(), this.loadMissions(), this.obtainMissions(), this.game.ph2NotificationManager.addObserver("_CHECK_MISSION", this.checkMission, this), this.game.ph2NotificationManager.addObserver("_CHECK_POINT_MISSION", this.checkPointMission, this), this.game.ph2NotificationManager.addObserver("_CHECK_AVOID_MISSION", this.checkAvoidMission, this), this.game.ph2NotificationManager.addObserver("_CHANGE_MISSION", this.changeMission, this)
        }
        return e.prototype.createMissions = function() {
            var e, i, s, n;
            for (s = this.game.cache.getJSON("missions").missions, e = 0; e < s.length; e++) n = s[e], i = new t.Mission(this.game, n.id, n.requirement, n.reward, n.timer, n.levels, n.avoid, n.name), this.missions.push(i)
        }, e.prototype.loadMissions = function() {
            var e, i, s, n;
            for (n = t.Instances.DataManager.getMissions(), e = 0; e < n.length; e++) s = n[e], (i = this.missions[e]).progress = s.progress, i.complete = s.complete, i.progressArray = s.progressArray, i.active = s.active
        }, e.prototype.obtainMissions = function() {
            this.checkMissionsActive(), this.checkMissionAvailable(), this.checkMissionsComplete(), this.saveMissions()
        }, e.prototype.saveMissions = function() {
            var e, i, s, n, a;
            for (s = [], a = [], e = 0; e < this.missions.length; e++) i = {
                id: (n = this.missions[e]).id,
                progress: n.progress,
                progressArray: n.progressArray,
                complete: n.complete,
                active: n.active
            }, s.push(i);
            for (e = 0; e < this.missionsActive.length; e++) a.push(this.missionsActive[e].id);
            t.Instances.DataManager.saveMissions(s), this.missionsActive.length >= 0 && t.Instances.DataManager.saveActiveMissions(a)
        }, e.prototype.checkMissionsActive = function() {
            var e, i;
            for (i = t.Instances.DataManager.getActiveMissions(), e = 0; e < i.length; e++) this.missionsActive.push(this.missions[i[e]]);
            if (this.missionsActive.length < 3)
                for (; this.missionsActive.length < 3;) this.startNewMission();
            i.push(this.missionsActive[0].id), i.push(this.missionsActive[1].id), i.push(this.missionsActive[2].id), t.Instances.DataManager.saveActiveMissions(i)
        }, e.prototype.checkMissionAvailable = function() {
            var t, e;
            for (t = 0; t < this.missions.length; t++)(e = this.missions[t]).complete || this.missionsAvailable.push(e)
        }, e.prototype.checkMissionsComplete = function() {
            var t, e;
            for (t = 0; t < this.missions.length; t++)(e = this.missions[t]).complete && this.missionsComplete.push(e)
        }, e.prototype.startNewMission = function() {
            var t, e, i, s;
            for (e = 0, t = 0; t < this.missions.length; t++) this.missions[t].complete && e++;
            this.missions.length - e <= 3 && this.resetMissions(), i = this.game.rnd.integerInRange(0, this.missions.length - 1), (s = this.missions[i]).active || s.complete ? this.startNewMission() : (s.active = !0, this.missionsActive.push(s))
        }, e.prototype.resetMissions = function() {
            var t, e;
            for (t = 0; t < this.missions.length; t++)(e = this.missions[t]).complete && e.restartMission()
        }, e.prototype.changeMission = function(t) {
            var e, i, s;
            s = this.missionsActive[t], e = this.game.rnd.integerInRange(0, this.missions.length - 1), (i = this.missions[e]).active || i.complete || i.id === s.id ? this.changeMission(t) : (s.restartMission(), i.active = !0, this.missionsActive[t] = i, this.saveMissions())
        }, e.prototype.completeMission = function(t) {
            var e, i, s;
            s = this.missionsActive[t], e = this.game.rnd.integerInRange(0, this.missions.length - 1), (i = this.missions[e]).active || i.complete || i.id === s.id ? this.completeMission(t) : (i.active = !0, this.missionsActive[t] = i, this.saveMissions())
        }, e.prototype.checkMission = function(t, e) {
            void 0 === e && (e = 0);
            var i, s, n;
            for (n = !1, i = 0; i < this.missionsActive.length; i++)(s = this.missionsActive[i]).id === t && (n = !0, i = this.missionsActive.length);
            n && s.avoid ? s.avoidMissionFailed() : n && !s.complete && s.checkMissionProgress(e), this.saveMissions()
        }, e.prototype.checkPointMission = function(t, e) {
            var i, s, n;
            for (n = !1, i = 0; i < this.missionsActive.length; i++)(s = this.missionsActive[i]).id === t && (n = !0, i = this.missionsActive.length);
            n && !s.complete && (s.progress += e, s.checkMissionProgress(0)), this.saveMissions()
        }, e.prototype.checkAvoidMission = function(t) {
            var e, i, s;
            for (s = !1, e = 0; e < this.missionsActive.length; e++)(i = this.missionsActive[e]).id === t && (s = !0, e = this.missionsActive.length);
            s && i.avoid && i.checkAvoidMissionProgress(), this.saveMissions()
        }, e.prototype.getActiveMissions = function() {
            return this.missionsActive
        }, e
    }();
    t.MissionManager = e
}(Game || (Game = {}));
var Game;
! function(t) {
    var e = function() {
        function t() {
            this._fileList = null, this._jsIndex = 0, this._hasLoaded = !1, this._callback = null
        }
        return t.prototype.init = function(t) {
            this._fileList = [], this._jsIndex = 0, this._hasLoaded = !1, this._callback = t, this._loadProjectJson()
        }, t.prototype.xhrLoad = function(t, e, i, s) {
            var n = new XMLHttpRequest;
            n.open("GET", e, !0), n.responseType = "text";
            var a = this;
            n.onload = function() {
                return a[i](t, n)
            }, n.onerror = function() {
                return a[s](t, n)
            }, n.send()
        }, t.prototype.jsonLoadComplete = function(t, e) {
            for (var i = JSON.parse(e.responseText), s = i.developmentDependencies, n = 0; n < s.length; n++)
                for (var a = i[s[n]], o = 0; o < a.length; o++) this.addToFileList("script", a[o], a[o]);
            this._loadJsFile()
        }, t.prototype.jsonLoadFailed = function() {}, t.prototype.fileComplete = function(t) {
            var e = this._fileList[t];
            e.loaded = !0, e.data = document.createElement("script"), e.data.language = "javascript", e.data.type = "text/javascript", e.data.src = e.url, e.data.defer = !1, document.head.appendChild(e.data);
            var i = this;
            e.data.onload = function() {
                i.loadNext()
            }, e.data.onerror = function() {}
        }, t.prototype.loadNext = function() {
            this.totalQueuedFiles() > 0 ? (this._jsIndex++, this._loadJsFile()) : this.finishLoad()
        }, t.prototype.finishLoad = function() {
            this._hasLoaded = !0, this._callback.call(this)
        }, t.prototype.fileError = function(t) {
            this._fileList[t]
        }, t.prototype.addToFileList = function(t, e, i, s) {
            var n = {
                key: e,
                url: i,
                data: null,
                error: !1,
                loaded: !1
            };
            if (void 0 !== typeof s)
                for (var a in s) s.hasOwnProperty(a) && (n[a] = s[a]);
            !1 === this.checkKeyExists(e) && this._fileList.push(n)
        }, t.prototype.checkKeyExists = function(t) {
            if (this._fileList.length > 0)
                for (var e = 0; e < this._fileList.length; e++)
                    if (this._fileList[e].key === t) return !0;
            return !1
        }, t.prototype.totalQueuedFiles = function() {
            for (var t = 0, e = 0; e < this._fileList.length; e++)!1 === this._fileList[e].loaded && t++;
            return t
        }, t.prototype._loadProjectJson = function() {
            this.xhrLoad(null, "project.json", "jsonLoadComplete", "jsonLoadFailed")
        }, t.prototype._loadJsFile = function() {
            var t = this._fileList[this._jsIndex];
            t.url = t.url + "?v=" + (new Date).getTime(), this.xhrLoad(this._jsIndex, t.url, "fileComplete", "fileError")
        }, t
    }();
    t.Boot = e
}(Game || (Game = {}));
var Fabrique;
! function(t) {
    var e = function() {
        function t() {}
        return t.show = function() {
            var t = document.getElementById("loader");
            t && (t.style.display = "block")
        }, t.hide = function() {
            var t = document.getElementById("loader");
            t && (t.style.display = "none")
        }, t
    }();
    t.LoaderHelper = e
}(Fabrique || (Fabrique = {}));
var __extends = this && this.__extends || function() {
        var t = Object.setPrototypeOf || {
            __proto__: []
        }
        instanceof Array && function(t, e) {
            t.__proto__ = e
        } || function(t, e) {
            for (var i in e) e.hasOwnProperty(i) && (t[i] = e[i])
        };
        return function(e, i) {
            function s() {
                this.constructor = e
            }
            t(e, i), e.prototype = null === i ? Object.create(i) : (s.prototype = i.prototype, new s)
        }
    }(),
    Game;
! function(t) {
    var e = function(e) {
        function i() {
            var s, n = this,
                a = navigator.userAgent;
            return s = /Kindle/.test(a) || /\bKF[A-Z][A-Z]+/.test(a) || /Silk.*Mobile Safari/.test(a) ? Phaser.CANVAS : i.forceCanvas() ? Phaser.CANVAS : Phaser.AUTO, (n = e.call(this, {
                enableDebug: !1,
                width: Constants.GAME_WIDTH,
                height: Constants.GAME_HEIGHT,
                renderer: s,
                parent: "content",
                transparent: !1,
                antialias: !0,
                preserveDrawingBuffer: !1,
                physicsConfig: null,
                seed: "",
                state: null,
                forceSetTimeOut: !1
            }) || this).state.add("bootState", t.BootState, !1), n.state.add("preloaderState", t.PreloaderState, !1), n.state.add("preloader", Fabrique.SplashScreen.Preloader, !1), n.state.add("mainMenuState", t.MainMenuState, !1), n.state.add("characterSelectState", t.CharacterSelectState, !1), n.state.add("gameplayState", t.GameplayState, !1), n.state.add("gameOverState", t.GameOverState, !1), Phaser.Device.whenReady(function() {
                n.stage.disableVisibilityChange = !0;
                var t = n.device.desktop ? "click" : "touchstart";
                document.getElementById("content").addEventListener(t, function(t) {
                    n.gameResumed(t)
                }), n.plugins.add(PhaserSpine.SpinePlugin), n.plugins.add(Fabrique.Plugins.GameEvents), n.plugins.add(Fabrique.Plugins.GoogleAnalytics), n.plugins.add(Fabrique.Plugins.GameAnalytics), n.plugins.add(PhaserAds.AdManager), n.plugins.add(PhaserCachebuster.CacheBuster), n.plugins.add(PhaserSpine.SpinePlugin), n.plugins.add(PhaserSuperStorage.StoragePlugin), n.plugins.add(Ph2.NotificationPlugin), n.plugins.add(Ph2.AudioPlugin), n.plugins.add(Ph2.AnimationPlugin), n.plugins.add(Ph2.LoaderPlugin), n.plugins.add(Phaser.VirtualJoystick)
            }), n
        }
        return __extends(i, e), i.forceCanvas = function() {
            var t = ["Mali-400", "Mali-450"],
                e = document.createElement("canvas");
            e.setAttribute("width", "1"), e.setAttribute("height", "1"), document.body.appendChild(e);
            var i = document.getElementsByTagName("canvas"),
                s = i[0].getContext("webgl", {
                    stencil: !0
                });
            if (i[0].parentNode.removeChild(i[0]), !s) return !1;
            var n, a = s.getExtension("WEBGL_debug_renderer_info");
            if (null == a) return !1;
            n = s.getParameter(a.UNMASKED_RENDERER_WEBGL);
            for (var o = 0; o < t.length; o++)
                if (-1 !== n.search(t[o])) return !0;
            return !1
        }, i.getInstance = function() {
            return null === i.instance && (i.instance = new i), i.instance
        }, i.prototype.start = function() {
            this.state.start("bootState")
        }, i.instance = null, i
    }(Phaser.Game);
    t.App = e
}(Game || (Game = {}));